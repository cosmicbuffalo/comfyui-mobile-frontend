function Gy(r,l){for(var s=0;s<l.length;s++){const o=l[s];if(typeof o!="string"&&!Array.isArray(o)){for(const i in o)if(i!=="default"&&!(i in r)){const d=Object.getOwnPropertyDescriptor(o,i);d&&Object.defineProperty(r,i,d.get?d:{enumerable:!0,get:()=>o[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function s(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(i){if(i.ep)return;i.ep=!0;const d=s(i);fetch(i.href,d)}})();function qy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Pc={exports:{}},yo={};var Jh;function Wy(){if(Jh)return yo;Jh=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function s(o,i,d){var p=null;if(d!==void 0&&(p=""+d),i.key!==void 0&&(p=""+i.key),"key"in i){d={};for(var h in i)h!=="key"&&(d[h]=i[h])}else d=i;return i=d.ref,{$$typeof:r,type:o,key:p,ref:i!==void 0?i:null,props:d}}return yo.Fragment=l,yo.jsx=s,yo.jsxs=s,yo}var eg;function Fy(){return eg||(eg=1,Pc.exports=Wy()),Pc.exports}var u=Fy(),Zc={exports:{}},Je={};var tg;function $y(){if(tg)return Je;tg=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),p=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),N=Symbol.iterator;function k(T){return T===null||typeof T!="object"?null:(T=N&&T[N]||T["@@iterator"],typeof T=="function"?T:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,M={};function j(T,I,E){this.props=T,this.context=I,this.refs=M,this.updater=E||S}j.prototype.isReactComponent={},j.prototype.setState=function(T,I){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,I,"setState")},j.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function O(){}O.prototype=j.prototype;function D(T,I,E){this.props=T,this.context=I,this.refs=M,this.updater=E||S}var z=D.prototype=new O;z.constructor=D,w(z,j.prototype),z.isPureReactComponent=!0;var _=Array.isArray;function A(){}var L={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function G(T,I,E){var $=E.ref;return{$$typeof:r,type:T,key:I,ref:$!==void 0?$:null,props:E}}function U(T,I){return G(T.type,I,T.props)}function W(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function ne(T){var I={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(E){return I[E]})}var ve=/\/+/g;function ae(T,I){return typeof T=="object"&&T!==null&&T.key!=null?ne(""+T.key):I.toString(36)}function re(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(A,A):(T.status="pending",T.then(function(I){T.status==="pending"&&(T.status="fulfilled",T.value=I)},function(I){T.status==="pending"&&(T.status="rejected",T.reason=I)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function R(T,I,E,$,Q){var fe=typeof T;(fe==="undefined"||fe==="boolean")&&(T=null);var te=!1;if(T===null)te=!0;else switch(fe){case"bigint":case"string":case"number":te=!0;break;case"object":switch(T.$$typeof){case r:case l:te=!0;break;case x:return te=T._init,R(te(T._payload),I,E,$,Q)}}if(te)return Q=Q(T),te=$===""?"."+ae(T,0):$,_(Q)?(E="",te!=null&&(E=te.replace(ve,"$&/")+"/"),R(Q,I,E,"",function(Oe){return Oe})):Q!=null&&(W(Q)&&(Q=U(Q,E+(Q.key==null||T&&T.key===Q.key?"":(""+Q.key).replace(ve,"$&/")+"/")+te)),I.push(Q)),1;te=0;var le=$===""?".":$+":";if(_(T))for(var be=0;be<T.length;be++)$=T[be],fe=le+ae($,be),te+=R($,I,E,fe,Q);else if(be=k(T),typeof be=="function")for(T=be.call(T),be=0;!($=T.next()).done;)$=$.value,fe=le+ae($,be++),te+=R($,I,E,fe,Q);else if(fe==="object"){if(typeof T.then=="function")return R(re(T),I,E,$,Q);throw I=String(T),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return te}function F(T,I,E){if(T==null)return T;var $=[],Q=0;return R(T,$,"","",function(fe){return I.call(E,fe,Q++)}),$}function pe(T){if(T._status===-1){var I=T._result;I=I(),I.then(function(E){(T._status===0||T._status===-1)&&(T._status=1,T._result=E)},function(E){(T._status===0||T._status===-1)&&(T._status=2,T._result=E)}),T._status===-1&&(T._status=0,T._result=I)}if(T._status===1)return T._result.default;throw T._result}var xe=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},he={map:F,forEach:function(T,I,E){F(T,function(){I.apply(this,arguments)},E)},count:function(T){var I=0;return F(T,function(){I++}),I},toArray:function(T){return F(T,function(I){return I})||[]},only:function(T){if(!W(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Je.Activity=y,Je.Children=he,Je.Component=j,Je.Fragment=s,Je.Profiler=i,Je.PureComponent=D,Je.StrictMode=o,Je.Suspense=m,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Je.__COMPILER_RUNTIME={__proto__:null,c:function(T){return L.H.useMemoCache(T)}},Je.cache=function(T){return function(){return T.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(T,I,E){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var $=w({},T.props),Q=T.key;if(I!=null)for(fe in I.key!==void 0&&(Q=""+I.key),I)!B.call(I,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&I.ref===void 0||($[fe]=I[fe]);var fe=arguments.length-2;if(fe===1)$.children=E;else if(1<fe){for(var te=Array(fe),le=0;le<fe;le++)te[le]=arguments[le+2];$.children=te}return G(T.type,Q,$)},Je.createContext=function(T){return T={$$typeof:p,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:d,_context:T},T},Je.createElement=function(T,I,E){var $,Q={},fe=null;if(I!=null)for($ in I.key!==void 0&&(fe=""+I.key),I)B.call(I,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(Q[$]=I[$]);var te=arguments.length-2;if(te===1)Q.children=E;else if(1<te){for(var le=Array(te),be=0;be<te;be++)le[be]=arguments[be+2];Q.children=le}if(T&&T.defaultProps)for($ in te=T.defaultProps,te)Q[$]===void 0&&(Q[$]=te[$]);return G(T,fe,Q)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(T){return{$$typeof:h,render:T}},Je.isValidElement=W,Je.lazy=function(T){return{$$typeof:x,_payload:{_status:-1,_result:T},_init:pe}},Je.memo=function(T,I){return{$$typeof:g,type:T,compare:I===void 0?null:I}},Je.startTransition=function(T){var I=L.T,E={};L.T=E;try{var $=T(),Q=L.S;Q!==null&&Q(E,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(A,xe)}catch(fe){xe(fe)}finally{I!==null&&E.types!==null&&(I.types=E.types),L.T=I}},Je.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Je.use=function(T){return L.H.use(T)},Je.useActionState=function(T,I,E){return L.H.useActionState(T,I,E)},Je.useCallback=function(T,I){return L.H.useCallback(T,I)},Je.useContext=function(T){return L.H.useContext(T)},Je.useDebugValue=function(){},Je.useDeferredValue=function(T,I){return L.H.useDeferredValue(T,I)},Je.useEffect=function(T,I){return L.H.useEffect(T,I)},Je.useEffectEvent=function(T){return L.H.useEffectEvent(T)},Je.useId=function(){return L.H.useId()},Je.useImperativeHandle=function(T,I,E){return L.H.useImperativeHandle(T,I,E)},Je.useInsertionEffect=function(T,I){return L.H.useInsertionEffect(T,I)},Je.useLayoutEffect=function(T,I){return L.H.useLayoutEffect(T,I)},Je.useMemo=function(T,I){return L.H.useMemo(T,I)},Je.useOptimistic=function(T,I){return L.H.useOptimistic(T,I)},Je.useReducer=function(T,I,E){return L.H.useReducer(T,I,E)},Je.useRef=function(T){return L.H.useRef(T)},Je.useState=function(T){return L.H.useState(T)},Je.useSyncExternalStore=function(T,I,E){return L.H.useSyncExternalStore(T,I,E)},Je.useTransition=function(){return L.H.useTransition()},Je.version="19.2.3",Je}var ng;function Gd(){return ng||(ng=1,Zc.exports=$y()),Zc.exports}var b=Gd();const Sa=qy(b),rg=Gy({__proto__:null,default:Sa},[b]);var Kc={exports:{}},bo={},Jc={exports:{}},ed={};var lg;function Yy(){return lg||(lg=1,(function(r){function l(R,F){var pe=R.length;R.push(F);e:for(;0<pe;){var xe=pe-1>>>1,he=R[xe];if(0<i(he,F))R[xe]=F,R[pe]=he,pe=xe;else break e}}function s(R){return R.length===0?null:R[0]}function o(R){if(R.length===0)return null;var F=R[0],pe=R.pop();if(pe!==F){R[0]=pe;e:for(var xe=0,he=R.length,T=he>>>1;xe<T;){var I=2*(xe+1)-1,E=R[I],$=I+1,Q=R[$];if(0>i(E,pe))$<he&&0>i(Q,E)?(R[xe]=Q,R[$]=pe,xe=$):(R[xe]=E,R[I]=pe,xe=I);else if($<he&&0>i(Q,pe))R[xe]=Q,R[$]=pe,xe=$;else break e}}return F}function i(R,F){var pe=R.sortIndex-F.sortIndex;return pe!==0?pe:R.id-F.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var p=Date,h=p.now();r.unstable_now=function(){return p.now()-h}}var m=[],g=[],x=1,y=null,N=3,k=!1,S=!1,w=!1,M=!1,j=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function z(R){for(var F=s(g);F!==null;){if(F.callback===null)o(g);else if(F.startTime<=R)o(g),F.sortIndex=F.expirationTime,l(m,F);else break;F=s(g)}}function _(R){if(w=!1,z(R),!S)if(s(m)!==null)S=!0,A||(A=!0,ne());else{var F=s(g);F!==null&&re(_,F.startTime-R)}}var A=!1,L=-1,B=5,G=-1;function U(){return M?!0:!(r.unstable_now()-G<B)}function W(){if(M=!1,A){var R=r.unstable_now();G=R;var F=!0;try{e:{S=!1,w&&(w=!1,O(L),L=-1),k=!0;var pe=N;try{t:{for(z(R),y=s(m);y!==null&&!(y.expirationTime>R&&U());){var xe=y.callback;if(typeof xe=="function"){y.callback=null,N=y.priorityLevel;var he=xe(y.expirationTime<=R);if(R=r.unstable_now(),typeof he=="function"){y.callback=he,z(R),F=!0;break t}y===s(m)&&o(m),z(R)}else o(m);y=s(m)}if(y!==null)F=!0;else{var T=s(g);T!==null&&re(_,T.startTime-R),F=!1}}break e}finally{y=null,N=pe,k=!1}F=void 0}}finally{F?ne():A=!1}}}var ne;if(typeof D=="function")ne=function(){D(W)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,ae=ve.port2;ve.port1.onmessage=W,ne=function(){ae.postMessage(null)}}else ne=function(){j(W,0)};function re(R,F){L=j(function(){R(r.unstable_now())},F)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(R){R.callback=null},r.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<R?Math.floor(1e3/R):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(R){switch(N){case 1:case 2:case 3:var F=3;break;default:F=N}var pe=N;N=F;try{return R()}finally{N=pe}},r.unstable_requestPaint=function(){M=!0},r.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var pe=N;N=R;try{return F()}finally{N=pe}},r.unstable_scheduleCallback=function(R,F,pe){var xe=r.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?xe+pe:xe):pe=xe,R){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=pe+he,R={id:x++,callback:F,priorityLevel:R,startTime:pe,expirationTime:he,sortIndex:-1},pe>xe?(R.sortIndex=pe,l(g,R),s(m)===null&&R===s(g)&&(w?(O(L),L=-1):w=!0,re(_,pe-xe))):(R.sortIndex=he,l(m,R),S||k||(S=!0,A||(A=!0,ne()))),R},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(R){var F=N;return function(){var pe=N;N=F;try{return R.apply(this,arguments)}finally{N=pe}}}})(ed)),ed}var ag;function Qy(){return ag||(ag=1,Jc.exports=Yy()),Jc.exports}var td={exports:{}},xn={};var og;function Xy(){if(og)return xn;og=1;var r=Gd();function l(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(l(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},i=Symbol.for("react.portal");function d(m,g,x){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:m,containerInfo:g,implementation:x}}var p=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,xn.createPortal=function(m,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(l(299));return d(m,g,null,x)},xn.flushSync=function(m){var g=p.T,x=o.p;try{if(p.T=null,o.p=2,m)return m()}finally{p.T=g,o.p=x,o.d.f()}},xn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(m,g))},xn.prefetchDNS=function(m){typeof m=="string"&&o.d.D(m)},xn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var x=g.as,y=h(x,g.crossOrigin),N=typeof g.integrity=="string"?g.integrity:void 0,k=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?o.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:N,fetchPriority:k}):x==="script"&&o.d.X(m,{crossOrigin:y,integrity:N,fetchPriority:k,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},xn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=h(g.as,g.crossOrigin);o.d.M(m,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(m)},xn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,y=h(x,g.crossOrigin);o.d.L(m,x,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},xn.preloadModule=function(m,g){if(typeof m=="string")if(g){var x=h(g.as,g.crossOrigin);o.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(m)},xn.requestFormReset=function(m){o.d.r(m)},xn.unstable_batchedUpdates=function(m,g){return m(g)},xn.useFormState=function(m,g,x){return p.H.useFormState(m,g,x)},xn.useFormStatus=function(){return p.H.useHostTransitionStatus()},xn.version="19.2.3",xn}var sg;function g0(){if(sg)return td.exports;sg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),td.exports=Xy(),td.exports}var ig;function Py(){if(ig)return bo;ig=1;var r=Qy(),l=Gd(),s=g0();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(d(e)!==e)throw Error(o(188))}function g(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,a=t;;){var c=n.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){n=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===n)return m(c),e;if(f===a)return m(c),t;f=f.sibling}throw Error(o(188))}if(n.return!==a.return)n=c,a=f;else{for(var v=!1,C=c.child;C;){if(C===n){v=!0,n=c,a=f;break}if(C===a){v=!0,a=c,n=f;break}C=C.sibling}if(!v){for(C=f.child;C;){if(C===n){v=!0,n=f,a=c;break}if(C===a){v=!0,a=f,n=c;break}C=C.sibling}if(!v)throw Error(o(189))}}if(n.alternate!==a)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,N=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),D=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function ne(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Symbol.for("react.client.reference");function ae(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ve?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case j:return"Profiler";case M:return"StrictMode";case _:return"Suspense";case A:return"SuspenseList";case G:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case D:return e.displayName||"Context";case O:return(e._context.displayName||"Context")+".Consumer";case z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return t=e.displayName||null,t!==null?t:ae(e.type)||"Memo";case B:t=e._payload,e=e._init;try{return ae(e(t))}catch{}}return null}var re=Array.isArray,R=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},xe=[],he=-1;function T(e){return{current:e}}function I(e){0>he||(e.current=xe[he],xe[he]=null,he--)}function E(e,t){he++,xe[he]=e.current,e.current=t}var $=T(null),Q=T(null),fe=T(null),te=T(null);function le(e,t){switch(E(fe,t),E(Q,e),E($,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Sh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Sh(t),e=Nh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I($),E($,e)}function be(){I($),I(Q),I(fe)}function Oe(e){e.memoizedState!==null&&E(te,e);var t=$.current,n=Nh(t,e.type);t!==n&&(E(Q,e),E($,n))}function qe(e){Q.current===e&&(I($),I(Q)),te.current===e&&(I(te),ho._currentValue=pe)}var ee,Te;function Ne(e){if(ee===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ee=t&&t[1]||"",Te=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ee+e+Te}var _e=!1;function lt(e,t){if(!e||_e)return"";_e=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(se){var K=se}Reflect.construct(e,[],ge)}else{try{ge.call()}catch(se){K=se}e.call(ge.prototype)}}else{try{throw Error()}catch(se){K=se}(ge=e())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(se){if(se&&K&&typeof se.stack=="string")return[se.stack,K.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=a.DetermineComponentFrameRoot(),v=f[0],C=f[1];if(v&&C){var H=v.split(`
`),P=C.split(`
`);for(c=a=0;a<H.length&&!H[a].includes("DetermineComponentFrameRoot");)a++;for(;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;if(a===H.length||c===P.length)for(a=H.length-1,c=P.length-1;1<=a&&0<=c&&H[a]!==P[c];)c--;for(;1<=a&&0<=c;a--,c--)if(H[a]!==P[c]){if(a!==1||c!==1)do if(a--,c--,0>c||H[a]!==P[c]){var de=`
`+H[a].replace(" at new "," at ");return e.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",e.displayName)),de}while(1<=a&&0<=c);break}}}finally{_e=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ne(n):""}function Fe(e,t){switch(e.tag){case 26:case 27:case 5:return Ne(e.type);case 16:return Ne("Lazy");case 13:return e.child!==t&&t!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return lt(e.type,!1);case 11:return lt(e.type.render,!1);case 1:return lt(e.type,!0);case 31:return Ne("Activity");default:return""}}function we(e){try{var t="",n=null;do t+=Fe(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var ye=Object.prototype.hasOwnProperty,Me=r.unstable_scheduleCallback,Le=r.unstable_cancelCallback,it=r.unstable_shouldYield,ht=r.unstable_requestPaint,Ze=r.unstable_now,Se=r.unstable_getCurrentPriorityLevel,Ae=r.unstable_ImmediatePriority,Ke=r.unstable_UserBlockingPriority,$e=r.unstable_NormalPriority,Qe=r.unstable_LowPriority,Xe=r.unstable_IdlePriority,vt=r.log,oe=r.unstable_setDisableYieldValue,Pe=null,et=null;function gt(e){if(typeof vt=="function"&&oe(e),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(Pe,e)}catch{}}var Gt=Math.clz32?Math.clz32:fr,cr=Math.log,dr=Math.LN2;function fr(e){return e>>>=0,e===0?32:31-(cr(e)/dr|0)|0}var bn=256,sn=262144,hn=4194304;function gn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $n(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var c=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var C=a&134217727;return C!==0?(a=C&~f,a!==0?c=gn(a):(v&=C,v!==0?c=gn(v):n||(n=C&~e,n!==0&&(c=gn(n))))):(C=a&~f,C!==0?c=gn(C):v!==0?c=gn(v):n||(n=a&~e,n!==0&&(c=gn(n)))),c===0?0:t!==0&&t!==c&&(t&f)===0&&(f=c&-c,n=t&-t,f>=n||f===32&&(n&4194048)!==0)?t:c}function ke(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ze(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V(){var e=hn;return hn<<=1,(hn&62914560)===0&&(hn=4194304),e}function ue(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ce(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n,a,c,f){var v=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var C=e.entanglements,H=e.expirationTimes,P=e.hiddenUpdates;for(n=v&~n;0<n;){var de=31-Gt(n),ge=1<<de;C[de]=0,H[de]=-1;var K=P[de];if(K!==null)for(P[de]=null,de=0;de<K.length;de++){var se=K[de];se!==null&&(se.lane&=-536870913)}n&=~ge}a!==0&&Be(e,a,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~t))}function Be(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Gt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function Ye(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Gt(n),c=1<<a;c&t|e[a]&t&&(e[a]|=t),n&=~c}}function Re(e,t){var n=t&-t;return n=(n&42)!==0?1:st(n),(n&(e.suspendedLanes|t))!==0?0:n}function st(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function pt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function yt(){var e=F.p;return e!==0?e:(e=window.event,e===void 0?32:$h(e.type))}function bt(e,t){var n=F.p;try{return F.p=e,t()}finally{F.p=n}}var wt=Math.random().toString(36).slice(2),xt="__reactFiber$"+wt,Dt="__reactProps$"+wt,qt="__reactContainer$"+wt,wn="__reactEvents$"+wt,ie="__reactListeners$"+wt,tt="__reactHandles$"+wt,It="__reactResources$"+wt,Ht="__reactMarker$"+wt;function an(e){delete e[xt],delete e[Dt],delete e[wn],delete e[ie],delete e[tt]}function un(e){var t=e[xt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qt]||n[xt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Th(e);e!==null;){if(n=e[xt])return n;e=Th(e)}return t}e=n,n=e.parentNode}return null}function Yn(e){if(e=e[xt]||e[qt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function yl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function $r(e){var t=e[It];return t||(t=e[It]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Kt(e){e[Ht]=!0}var br=new Set,Go={};function wr(e,t){Yr(e,t),Yr(e+"Capture",t)}function Yr(e,t){for(Go[e]=t,e=0;e<t.length;e++)br.add(t[e])}var Gi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Z={},je={};function Ie(e){return ye.call(je,e)?!0:ye.call(Z,e)?!1:Gi.test(e)?je[e]=!0:(Z[e]=!0,!1)}function Mt(e,t,n){if(Ie(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ft(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function at(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function Sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ta(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(v){n=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(v){n=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qi(e){if(!e._valueTracker){var t=qo(e)?"checked":"value";e._valueTracker=Ta(e,t,""+e[t])}}function hf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=qo(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Wo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var zx=/[\n"\\]/g;function Qn(e){return e.replace(zx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Wi(e,t,n,a,c,f,v,C){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Sn(t)):e.value!==""+Sn(t)&&(e.value=""+Sn(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?Fi(e,v,Sn(t)):n!=null?Fi(e,v,Sn(n)):a!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+Sn(C):e.removeAttribute("name")}function gf(e,t,n,a,c,f,v,C){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||n!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){qi(e);return}n=n!=null?""+Sn(n):"",t=t!=null?""+Sn(t):n,C||t===e.value||(e.value=t),e.defaultValue=t}a=a??c,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=C?e.checked:!!a,e.defaultChecked=!!a,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),qi(e)}function Fi(e,t,n){t==="number"&&Wo(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ul(e,t,n,a){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Sn(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function xf(e,t,n){if(t!=null&&(t=""+Sn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Sn(n):""}function vf(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(o(92));if(re(a)){if(1<a.length)throw Error(o(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=Sn(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),qi(e)}function Gl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Bx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yf(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Bx.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function bf(e,t,n){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var c in t)a=t[c],t.hasOwnProperty(c)&&n[c]!==a&&yf(e,c,a)}else for(var f in t)t.hasOwnProperty(f)&&yf(e,f,t[f])}function $i(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ix=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fo(e){return Hx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Sr(){}var Yi=null;function Qi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ql=null,Wl=null;function wf(e){var t=Yn(e);if(t&&(e=t.stateNode)){var n=e[Dt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Wi(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Qn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var c=a[Dt]||null;if(!c)throw Error(o(90));Wi(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&hf(a)}break e;case"textarea":xf(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ul(e,!!n.multiple,t,!1)}}}var Xi=!1;function Sf(e,t,n){if(Xi)return e(t,n);Xi=!0;try{var a=e(t);return a}finally{if(Xi=!1,(ql!==null||Wl!==null)&&(Ls(),ql&&(t=ql,e=Wl,Wl=ql=null,wf(t),e)))for(t=0;t<e.length;t++)wf(e[t])}}function _a(e,t){var n=e.stateNode;if(n===null)return null;var a=n[Dt]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=!1;if(Nr)try{var La={};Object.defineProperty(La,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",La,La),window.removeEventListener("test",La,La)}catch{Pi=!1}var Qr=null,Zi=null,$o=null;function Nf(){if($o)return $o;var e,t=Zi,n=t.length,a,c="value"in Qr?Qr.value:Qr.textContent,f=c.length;for(e=0;e<n&&t[e]===c[e];e++);var v=n-e;for(a=1;a<=v&&t[n-a]===c[f-a];a++);return $o=c.slice(e,1<a?1-a:void 0)}function Yo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qo(){return!0}function jf(){return!1}function Cn(e){function t(n,a,c,f,v){this._reactName=n,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(n=e[C],this[C]=n?n(f):f[C]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Qo:jf,this.isPropagationStopped=jf,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),t}var bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xo=Cn(bl),Aa=y({},bl,{view:0,detail:0}),Vx=Cn(Aa),Ki,Ji,Ra,Po=y({},Aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ra&&(Ra&&e.type==="mousemove"?(Ki=e.screenX-Ra.screenX,Ji=e.screenY-Ra.screenY):Ji=Ki=0,Ra=e),Ki)},movementY:function(e){return"movementY"in e?e.movementY:Ji}}),Cf=Cn(Po),Ux=y({},Po,{dataTransfer:0}),Gx=Cn(Ux),qx=y({},Aa,{relatedTarget:0}),eu=Cn(qx),Wx=y({},bl,{animationName:0,elapsedTime:0,pseudoElement:0}),Fx=Cn(Wx),$x=y({},bl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yx=Cn($x),Qx=y({},bl,{data:0}),kf=Cn(Qx),Xx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Px={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zx[e])?!!t[e]:!1}function tu(){return Kx}var Jx=y({},Aa,{key:function(e){if(e.key){var t=Xx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Px[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tu,charCode:function(e){return e.type==="keypress"?Yo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ev=Cn(Jx),tv=y({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mf=Cn(tv),nv=y({},Aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tu}),rv=Cn(nv),lv=y({},bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),av=Cn(lv),ov=y({},Po,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sv=Cn(ov),iv=y({},bl,{newState:0,oldState:0}),uv=Cn(iv),cv=[9,13,27,32],nu=Nr&&"CompositionEvent"in window,Da=null;Nr&&"documentMode"in document&&(Da=document.documentMode);var dv=Nr&&"TextEvent"in window&&!Da,Of=Nr&&(!nu||Da&&8<Da&&11>=Da),Ef=" ",Tf=!1;function _f(e,t){switch(e){case"keyup":return cv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fl=!1;function fv(e,t){switch(e){case"compositionend":return Lf(t);case"keypress":return t.which!==32?null:(Tf=!0,Ef);case"textInput":return e=t.data,e===Ef&&Tf?null:e;default:return null}}function pv(e,t){if(Fl)return e==="compositionend"||!nu&&_f(e,t)?(e=Nf(),$o=Zi=Qr=null,Fl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Of&&t.locale!=="ko"?null:t.data;default:return null}}var mv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Af(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!mv[e.type]:t==="textarea"}function Rf(e,t,n,a){ql?Wl?Wl.push(a):Wl=[a]:ql=a,t=Hs(t,"onChange"),0<t.length&&(n=new Xo("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var za=null,Ba=null;function hv(e){gh(e,0)}function Zo(e){var t=yl(e);if(hf(t))return e}function Df(e,t){if(e==="change")return t}var zf=!1;if(Nr){var ru;if(Nr){var lu="oninput"in document;if(!lu){var Bf=document.createElement("div");Bf.setAttribute("oninput","return;"),lu=typeof Bf.oninput=="function"}ru=lu}else ru=!1;zf=ru&&(!document.documentMode||9<document.documentMode)}function If(){za&&(za.detachEvent("onpropertychange",Hf),Ba=za=null)}function Hf(e){if(e.propertyName==="value"&&Zo(Ba)){var t=[];Rf(t,Ba,e,Qi(e)),Sf(hv,t)}}function gv(e,t,n){e==="focusin"?(If(),za=t,Ba=n,za.attachEvent("onpropertychange",Hf)):e==="focusout"&&If()}function xv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zo(Ba)}function vv(e,t){if(e==="click")return Zo(t)}function yv(e,t){if(e==="input"||e==="change")return Zo(t)}function bv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rn=typeof Object.is=="function"?Object.is:bv;function Ia(e,t){if(Rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var c=n[a];if(!ye.call(t,c)||!Rn(e[c],t[c]))return!1}return!0}function Vf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Uf(e,t){var n=Vf(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vf(n)}}function Gf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wo(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wo(e.document)}return t}function au(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var wv=Nr&&"documentMode"in document&&11>=document.documentMode,$l=null,ou=null,Ha=null,su=!1;function Wf(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;su||$l==null||$l!==Wo(a)||(a=$l,"selectionStart"in a&&au(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ha&&Ia(Ha,a)||(Ha=a,a=Hs(ou,"onSelect"),0<a.length&&(t=new Xo("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=$l)))}function wl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yl={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionrun:wl("Transition","TransitionRun"),transitionstart:wl("Transition","TransitionStart"),transitioncancel:wl("Transition","TransitionCancel"),transitionend:wl("Transition","TransitionEnd")},iu={},Ff={};Nr&&(Ff=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);function Sl(e){if(iu[e])return iu[e];if(!Yl[e])return e;var t=Yl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ff)return iu[e]=t[n];return e}var $f=Sl("animationend"),Yf=Sl("animationiteration"),Qf=Sl("animationstart"),Sv=Sl("transitionrun"),Nv=Sl("transitionstart"),jv=Sl("transitioncancel"),Xf=Sl("transitionend"),Pf=new Map,uu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uu.push("scrollEnd");function ar(e,t){Pf.set(e,t),wr(t,[e])}var Ko=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Xn=[],Ql=0,cu=0;function Jo(){for(var e=Ql,t=cu=Ql=0;t<e;){var n=Xn[t];Xn[t++]=null;var a=Xn[t];Xn[t++]=null;var c=Xn[t];Xn[t++]=null;var f=Xn[t];if(Xn[t++]=null,a!==null&&c!==null){var v=a.pending;v===null?c.next=c:(c.next=v.next,v.next=c),a.pending=c}f!==0&&Zf(n,c,f)}}function es(e,t,n,a){Xn[Ql++]=e,Xn[Ql++]=t,Xn[Ql++]=n,Xn[Ql++]=a,cu|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function du(e,t,n,a){return es(e,t,n,a),ts(e)}function Nl(e,t){return es(e,null,null,t),ts(e)}function Zf(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var c=!1,f=e.return;f!==null;)f.childLanes|=n,a=f.alternate,a!==null&&(a.childLanes|=n),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&t!==null&&(c=31-Gt(n),e=f.hiddenUpdates,a=e[c],a===null?e[c]=[t]:a.push(t),t.lane=n|536870912),f):null}function ts(e){if(50<so)throw so=0,bc=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Xl={};function Cv(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(e,t,n,a){return new Cv(e,t,n,a)}function fu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jr(e,t){var n=e.alternate;return n===null?(n=Dn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Kf(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ns(e,t,n,a,c,f){var v=0;if(a=e,typeof e=="function")fu(e)&&(v=1);else if(typeof e=="string")v=Ty(e,n,$.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case G:return e=Dn(31,n,t,c),e.elementType=G,e.lanes=f,e;case w:return jl(n.children,c,f,t);case M:v=8,c|=24;break;case j:return e=Dn(12,n,t,c|2),e.elementType=j,e.lanes=f,e;case _:return e=Dn(13,n,t,c),e.elementType=_,e.lanes=f,e;case A:return e=Dn(19,n,t,c),e.elementType=A,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D:v=10;break e;case O:v=9;break e;case z:v=11;break e;case L:v=14;break e;case B:v=16,a=null;break e}v=29,n=Error(o(130,e===null?"null":typeof e,"")),a=null}return t=Dn(v,n,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function jl(e,t,n,a){return e=Dn(7,e,a,t),e.lanes=n,e}function pu(e,t,n){return e=Dn(6,e,null,t),e.lanes=n,e}function Jf(e){var t=Dn(18,null,null,0);return t.stateNode=e,t}function mu(e,t,n){return t=Dn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ep=new WeakMap;function Pn(e,t){if(typeof e=="object"&&e!==null){var n=ep.get(e);return n!==void 0?n:(t={value:e,source:t,stack:we(t)},ep.set(e,t),t)}return{value:e,source:t,stack:we(t)}}var Pl=[],Zl=0,rs=null,Va=0,Zn=[],Kn=0,Xr=null,pr=1,mr="";function Cr(e,t){Pl[Zl++]=Va,Pl[Zl++]=rs,rs=e,Va=t}function tp(e,t,n){Zn[Kn++]=pr,Zn[Kn++]=mr,Zn[Kn++]=Xr,Xr=e;var a=pr;e=mr;var c=32-Gt(a)-1;a&=~(1<<c),n+=1;var f=32-Gt(t)+c;if(30<f){var v=c-c%5;f=(a&(1<<v)-1).toString(32),a>>=v,c-=v,pr=1<<32-Gt(t)+c|n<<c|a,mr=f+e}else pr=1<<f|n<<c|a,mr=e}function hu(e){e.return!==null&&(Cr(e,1),tp(e,1,0))}function gu(e){for(;e===rs;)rs=Pl[--Zl],Pl[Zl]=null,Va=Pl[--Zl],Pl[Zl]=null;for(;e===Xr;)Xr=Zn[--Kn],Zn[Kn]=null,mr=Zn[--Kn],Zn[Kn]=null,pr=Zn[--Kn],Zn[Kn]=null}function np(e,t){Zn[Kn++]=pr,Zn[Kn++]=mr,Zn[Kn++]=Xr,pr=t.id,mr=t.overflow,Xr=e}var cn=null,Vt=null,mt=!1,Pr=null,Jn=!1,xu=Error(o(519));function Zr(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ua(Pn(t,e)),xu}function rp(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[xt]=e,t[Dt]=a,n){case"dialog":ct("cancel",t),ct("close",t);break;case"iframe":case"object":case"embed":ct("load",t);break;case"video":case"audio":for(n=0;n<uo.length;n++)ct(uo[n],t);break;case"source":ct("error",t);break;case"img":case"image":case"link":ct("error",t),ct("load",t);break;case"details":ct("toggle",t);break;case"input":ct("invalid",t),gf(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":ct("invalid",t);break;case"textarea":ct("invalid",t),vf(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||bh(t.textContent,n)?(a.popover!=null&&(ct("beforetoggle",t),ct("toggle",t)),a.onScroll!=null&&ct("scroll",t),a.onScrollEnd!=null&&ct("scrollend",t),a.onClick!=null&&(t.onclick=Sr),t=!0):t=!1,t||Zr(e,!0)}function lp(e){for(cn=e.return;cn;)switch(cn.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:cn=cn.return}}function Kl(e){if(e!==cn)return!1;if(!mt)return lp(e),mt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Dc(e.type,e.memoizedProps)),n=!n),n&&Vt&&Zr(e),lp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Vt=Eh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Vt=Eh(e)}else t===27?(t=Vt,dl(e.type)?(e=Vc,Vc=null,Vt=e):Vt=t):Vt=cn?tr(e.stateNode.nextSibling):null;return!0}function Cl(){Vt=cn=null,mt=!1}function vu(){var e=Pr;return e!==null&&(En===null?En=e:En.push.apply(En,e),Pr=null),e}function Ua(e){Pr===null?Pr=[e]:Pr.push(e)}var yu=T(null),kl=null,kr=null;function Kr(e,t,n){E(yu,t._currentValue),t._currentValue=n}function Mr(e){e._currentValue=yu.current,I(yu)}function bu(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function wu(e,t,n,a){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var v=c.child;f=f.firstContext;e:for(;f!==null;){var C=f;f=c;for(var H=0;H<t.length;H++)if(C.context===t[H]){f.lanes|=n,C=f.alternate,C!==null&&(C.lanes|=n),bu(f.return,n,e),a||(v=null);break e}f=C.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(o(341));v.lanes|=n,f=v.alternate,f!==null&&(f.lanes|=n),bu(v,n,e),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===e){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function Jl(e,t,n,a){e=null;for(var c=t,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(o(387));if(v=v.memoizedProps,v!==null){var C=c.type;Rn(c.pendingProps.value,v.value)||(e!==null?e.push(C):e=[C])}}else if(c===te.current){if(v=c.alternate,v===null)throw Error(o(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(ho):e=[ho])}c=c.return}e!==null&&wu(t,e,n,a),t.flags|=262144}function ls(e){for(e=e.firstContext;e!==null;){if(!Rn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ml(e){kl=e,kr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function dn(e){return ap(kl,e)}function as(e,t){return kl===null&&Ml(e),ap(e,t)}function ap(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},kr===null){if(e===null)throw Error(o(308));kr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else kr=kr.next=t;return n}var kv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Mv=r.unstable_scheduleCallback,Ov=r.unstable_NormalPriority,Jt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Su(){return{controller:new kv,data:new Map,refCount:0}}function Ga(e){e.refCount--,e.refCount===0&&Mv(Ov,function(){e.controller.abort()})}var qa=null,Nu=0,ea=0,ta=null;function Ev(e,t){if(qa===null){var n=qa=[];Nu=0,ea=kc(),ta={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Nu++,t.then(op,op),t}function op(){if(--Nu===0&&qa!==null){ta!==null&&(ta.status="fulfilled");var e=qa;qa=null,ea=0,ta=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Tv(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(c){n.push(c)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var c=0;c<n.length;c++)(0,n[c])(t)},function(c){for(a.status="rejected",a.reason=c,c=0;c<n.length;c++)(0,n[c])(void 0)}),a}var sp=R.S;R.S=function(e,t){Wm=Ze(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Ev(e,t),sp!==null&&sp(e,t)};var Ol=T(null);function ju(){var e=Ol.current;return e!==null?e:zt.pooledCache}function os(e,t){t===null?E(Ol,Ol.current):E(Ol,t.pool)}function ip(){var e=ju();return e===null?null:{parent:Jt._currentValue,pool:e}}var na=Error(o(460)),Cu=Error(o(474)),ss=Error(o(542)),is={then:function(){}};function up(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cp(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Sr,Sr),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,fp(e),e;default:if(typeof t.status=="string")t.then(Sr,Sr);else{if(e=zt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=a}},function(a){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,fp(e),e}throw Tl=t,na}}function El(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Tl=n,na):n}}var Tl=null;function dp(){if(Tl===null)throw Error(o(459));var e=Tl;return Tl=null,e}function fp(e){if(e===na||e===ss)throw Error(o(483))}var ra=null,Wa=0;function us(e){var t=Wa;return Wa+=1,ra===null&&(ra=[]),cp(ra,e,t)}function Fa(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function cs(e,t){throw t.$$typeof===N?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function pp(e){function t(Y,q){if(e){var X=Y.deletions;X===null?(Y.deletions=[q],Y.flags|=16):X.push(q)}}function n(Y,q){if(!e)return null;for(;q!==null;)t(Y,q),q=q.sibling;return null}function a(Y){for(var q=new Map;Y!==null;)Y.key!==null?q.set(Y.key,Y):q.set(Y.index,Y),Y=Y.sibling;return q}function c(Y,q){return Y=jr(Y,q),Y.index=0,Y.sibling=null,Y}function f(Y,q,X){return Y.index=X,e?(X=Y.alternate,X!==null?(X=X.index,X<q?(Y.flags|=67108866,q):X):(Y.flags|=67108866,q)):(Y.flags|=1048576,q)}function v(Y){return e&&Y.alternate===null&&(Y.flags|=67108866),Y}function C(Y,q,X,me){return q===null||q.tag!==6?(q=pu(X,Y.mode,me),q.return=Y,q):(q=c(q,X),q.return=Y,q)}function H(Y,q,X,me){var He=X.type;return He===w?de(Y,q,X.props.children,me,X.key):q!==null&&(q.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===B&&El(He)===q.type)?(q=c(q,X.props),Fa(q,X),q.return=Y,q):(q=ns(X.type,X.key,X.props,null,Y.mode,me),Fa(q,X),q.return=Y,q)}function P(Y,q,X,me){return q===null||q.tag!==4||q.stateNode.containerInfo!==X.containerInfo||q.stateNode.implementation!==X.implementation?(q=mu(X,Y.mode,me),q.return=Y,q):(q=c(q,X.children||[]),q.return=Y,q)}function de(Y,q,X,me,He){return q===null||q.tag!==7?(q=jl(X,Y.mode,me,He),q.return=Y,q):(q=c(q,X),q.return=Y,q)}function ge(Y,q,X){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=pu(""+q,Y.mode,X),q.return=Y,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case k:return X=ns(q.type,q.key,q.props,null,Y.mode,X),Fa(X,q),X.return=Y,X;case S:return q=mu(q,Y.mode,X),q.return=Y,q;case B:return q=El(q),ge(Y,q,X)}if(re(q)||ne(q))return q=jl(q,Y.mode,X,null),q.return=Y,q;if(typeof q.then=="function")return ge(Y,us(q),X);if(q.$$typeof===D)return ge(Y,as(Y,q),X);cs(Y,q)}return null}function K(Y,q,X,me){var He=q!==null?q.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return He!==null?null:C(Y,q,""+X,me);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case k:return X.key===He?H(Y,q,X,me):null;case S:return X.key===He?P(Y,q,X,me):null;case B:return X=El(X),K(Y,q,X,me)}if(re(X)||ne(X))return He!==null?null:de(Y,q,X,me,null);if(typeof X.then=="function")return K(Y,q,us(X),me);if(X.$$typeof===D)return K(Y,q,as(Y,X),me);cs(Y,X)}return null}function se(Y,q,X,me,He){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return Y=Y.get(X)||null,C(q,Y,""+me,He);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case k:return Y=Y.get(me.key===null?X:me.key)||null,H(q,Y,me,He);case S:return Y=Y.get(me.key===null?X:me.key)||null,P(q,Y,me,He);case B:return me=El(me),se(Y,q,X,me,He)}if(re(me)||ne(me))return Y=Y.get(X)||null,de(q,Y,me,He,null);if(typeof me.then=="function")return se(Y,q,X,us(me),He);if(me.$$typeof===D)return se(Y,q,X,as(q,me),He);cs(q,me)}return null}function Ee(Y,q,X,me){for(var He=null,St=null,De=q,ot=q=0,ft=null;De!==null&&ot<X.length;ot++){De.index>ot?(ft=De,De=null):ft=De.sibling;var Nt=K(Y,De,X[ot],me);if(Nt===null){De===null&&(De=ft);break}e&&De&&Nt.alternate===null&&t(Y,De),q=f(Nt,q,ot),St===null?He=Nt:St.sibling=Nt,St=Nt,De=ft}if(ot===X.length)return n(Y,De),mt&&Cr(Y,ot),He;if(De===null){for(;ot<X.length;ot++)De=ge(Y,X[ot],me),De!==null&&(q=f(De,q,ot),St===null?He=De:St.sibling=De,St=De);return mt&&Cr(Y,ot),He}for(De=a(De);ot<X.length;ot++)ft=se(De,Y,ot,X[ot],me),ft!==null&&(e&&ft.alternate!==null&&De.delete(ft.key===null?ot:ft.key),q=f(ft,q,ot),St===null?He=ft:St.sibling=ft,St=ft);return e&&De.forEach(function(gl){return t(Y,gl)}),mt&&Cr(Y,ot),He}function Ge(Y,q,X,me){if(X==null)throw Error(o(151));for(var He=null,St=null,De=q,ot=q=0,ft=null,Nt=X.next();De!==null&&!Nt.done;ot++,Nt=X.next()){De.index>ot?(ft=De,De=null):ft=De.sibling;var gl=K(Y,De,Nt.value,me);if(gl===null){De===null&&(De=ft);break}e&&De&&gl.alternate===null&&t(Y,De),q=f(gl,q,ot),St===null?He=gl:St.sibling=gl,St=gl,De=ft}if(Nt.done)return n(Y,De),mt&&Cr(Y,ot),He;if(De===null){for(;!Nt.done;ot++,Nt=X.next())Nt=ge(Y,Nt.value,me),Nt!==null&&(q=f(Nt,q,ot),St===null?He=Nt:St.sibling=Nt,St=Nt);return mt&&Cr(Y,ot),He}for(De=a(De);!Nt.done;ot++,Nt=X.next())Nt=se(De,Y,ot,Nt.value,me),Nt!==null&&(e&&Nt.alternate!==null&&De.delete(Nt.key===null?ot:Nt.key),q=f(Nt,q,ot),St===null?He=Nt:St.sibling=Nt,St=Nt);return e&&De.forEach(function(Uy){return t(Y,Uy)}),mt&&Cr(Y,ot),He}function Rt(Y,q,X,me){if(typeof X=="object"&&X!==null&&X.type===w&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case k:e:{for(var He=X.key;q!==null;){if(q.key===He){if(He=X.type,He===w){if(q.tag===7){n(Y,q.sibling),me=c(q,X.props.children),me.return=Y,Y=me;break e}}else if(q.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===B&&El(He)===q.type){n(Y,q.sibling),me=c(q,X.props),Fa(me,X),me.return=Y,Y=me;break e}n(Y,q);break}else t(Y,q);q=q.sibling}X.type===w?(me=jl(X.props.children,Y.mode,me,X.key),me.return=Y,Y=me):(me=ns(X.type,X.key,X.props,null,Y.mode,me),Fa(me,X),me.return=Y,Y=me)}return v(Y);case S:e:{for(He=X.key;q!==null;){if(q.key===He)if(q.tag===4&&q.stateNode.containerInfo===X.containerInfo&&q.stateNode.implementation===X.implementation){n(Y,q.sibling),me=c(q,X.children||[]),me.return=Y,Y=me;break e}else{n(Y,q);break}else t(Y,q);q=q.sibling}me=mu(X,Y.mode,me),me.return=Y,Y=me}return v(Y);case B:return X=El(X),Rt(Y,q,X,me)}if(re(X))return Ee(Y,q,X,me);if(ne(X)){if(He=ne(X),typeof He!="function")throw Error(o(150));return X=He.call(X),Ge(Y,q,X,me)}if(typeof X.then=="function")return Rt(Y,q,us(X),me);if(X.$$typeof===D)return Rt(Y,q,as(Y,X),me);cs(Y,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,q!==null&&q.tag===6?(n(Y,q.sibling),me=c(q,X),me.return=Y,Y=me):(n(Y,q),me=pu(X,Y.mode,me),me.return=Y,Y=me),v(Y)):n(Y,q)}return function(Y,q,X,me){try{Wa=0;var He=Rt(Y,q,X,me);return ra=null,He}catch(De){if(De===na||De===ss)throw De;var St=Dn(29,De,null,Y.mode);return St.lanes=me,St.return=Y,St}}}var _l=pp(!0),mp=pp(!1),Jr=!1;function ku(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function el(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function tl(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(jt&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,t=ts(e),Zf(e,null,n),t}return es(e,a,t,n),ts(e)}function $a(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ye(e,n)}}function Ou(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var c=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var v={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};f===null?c=f=v:f=f.next=v,n=n.next}while(n!==null);f===null?c=f=t:f=f.next=t}else c=f=t;n={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Eu=!1;function Ya(){if(Eu){var e=ta;if(e!==null)throw e}}function Qa(e,t,n,a){Eu=!1;var c=e.updateQueue;Jr=!1;var f=c.firstBaseUpdate,v=c.lastBaseUpdate,C=c.shared.pending;if(C!==null){c.shared.pending=null;var H=C,P=H.next;H.next=null,v===null?f=P:v.next=P,v=H;var de=e.alternate;de!==null&&(de=de.updateQueue,C=de.lastBaseUpdate,C!==v&&(C===null?de.firstBaseUpdate=P:C.next=P,de.lastBaseUpdate=H))}if(f!==null){var ge=c.baseState;v=0,de=P=H=null,C=f;do{var K=C.lane&-536870913,se=K!==C.lane;if(se?(dt&K)===K:(a&K)===K){K!==0&&K===ea&&(Eu=!0),de!==null&&(de=de.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Ee=e,Ge=C;K=t;var Rt=n;switch(Ge.tag){case 1:if(Ee=Ge.payload,typeof Ee=="function"){ge=Ee.call(Rt,ge,K);break e}ge=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Ge.payload,K=typeof Ee=="function"?Ee.call(Rt,ge,K):Ee,K==null)break e;ge=y({},ge,K);break e;case 2:Jr=!0}}K=C.callback,K!==null&&(e.flags|=64,se&&(e.flags|=8192),se=c.callbacks,se===null?c.callbacks=[K]:se.push(K))}else se={lane:K,tag:C.tag,payload:C.payload,callback:C.callback,next:null},de===null?(P=de=se,H=ge):de=de.next=se,v|=K;if(C=C.next,C===null){if(C=c.shared.pending,C===null)break;se=C,C=se.next,se.next=null,c.lastBaseUpdate=se,c.shared.pending=null}}while(!0);de===null&&(H=ge),c.baseState=H,c.firstBaseUpdate=P,c.lastBaseUpdate=de,f===null&&(c.shared.lanes=0),ol|=v,e.lanes=v,e.memoizedState=ge}}function hp(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function gp(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)hp(n[e],t)}var la=T(null),ds=T(0);function xp(e,t){e=zr,E(ds,e),E(la,t),zr=e|t.baseLanes}function Tu(){E(ds,zr),E(la,la.current)}function _u(){zr=ds.current,I(la),I(ds)}var zn=T(null),er=null;function nl(e){var t=e.alternate;E(Xt,Xt.current&1),E(zn,e),er===null&&(t===null||la.current!==null||t.memoizedState!==null)&&(er=e)}function Lu(e){E(Xt,Xt.current),E(zn,e),er===null&&(er=e)}function vp(e){e.tag===22?(E(Xt,Xt.current),E(zn,e),er===null&&(er=e)):rl()}function rl(){E(Xt,Xt.current),E(zn,zn.current)}function Bn(e){I(zn),er===e&&(er=null),I(Xt)}var Xt=T(0);function fs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ic(n)||Hc(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Or=0,nt=null,Lt=null,en=null,ps=!1,aa=!1,Ll=!1,ms=0,Xa=0,oa=null,_v=0;function $t(){throw Error(o(321))}function Au(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rn(e[n],t[n]))return!1;return!0}function Ru(e,t,n,a,c,f){return Or=f,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=e===null||e.memoizedState===null?tm:Xu,Ll=!1,f=n(a,c),Ll=!1,aa&&(f=bp(t,n,a,c)),yp(e),f}function yp(e){R.H=Ka;var t=Lt!==null&&Lt.next!==null;if(Or=0,en=Lt=nt=null,ps=!1,Xa=0,oa=null,t)throw Error(o(300));e===null||tn||(e=e.dependencies,e!==null&&ls(e)&&(tn=!0))}function bp(e,t,n,a){nt=e;var c=0;do{if(aa&&(oa=null),Xa=0,aa=!1,25<=c)throw Error(o(301));if(c+=1,en=Lt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}R.H=nm,f=t(n,a)}while(aa);return f}function Lv(){var e=R.H,t=e.useState()[0];return t=typeof t.then=="function"?Pa(t):t,e=e.useState()[0],(Lt!==null?Lt.memoizedState:null)!==e&&(nt.flags|=1024),t}function Du(){var e=ms!==0;return ms=0,e}function zu(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Bu(e){if(ps){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ps=!1}Or=0,en=Lt=nt=null,aa=!1,Xa=ms=0,oa=null}function Nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?nt.memoizedState=en=e:en=en.next=e,en}function Pt(){if(Lt===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var t=en===null?nt.memoizedState:en.next;if(t!==null)en=t,Lt=e;else{if(e===null)throw nt.alternate===null?Error(o(467)):Error(o(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},en===null?nt.memoizedState=en=e:en=en.next=e}return en}function hs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pa(e){var t=Xa;return Xa+=1,oa===null&&(oa=[]),e=cp(oa,e,t),t=nt,(en===null?t.memoizedState:en.next)===null&&(t=t.alternate,R.H=t===null||t.memoizedState===null?tm:Xu),e}function gs(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Pa(e);if(e.$$typeof===D)return dn(e)}throw Error(o(438,String(e)))}function Iu(e){var t=null,n=nt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=nt.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=hs(),nt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=U;return t.index++,n}function Er(e,t){return typeof t=="function"?t(e):t}function xs(e){var t=Pt();return Hu(t,Lt,e)}function Hu(e,t,n){var a=e.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var c=e.baseQueue,f=a.pending;if(f!==null){if(c!==null){var v=c.next;c.next=f.next,f.next=v}t.baseQueue=c=f,a.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{t=c.next;var C=v=null,H=null,P=t,de=!1;do{var ge=P.lane&-536870913;if(ge!==P.lane?(dt&ge)===ge:(Or&ge)===ge){var K=P.revertLane;if(K===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),ge===ea&&(de=!0);else if((Or&K)===K){P=P.next,K===ea&&(de=!0);continue}else ge={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},H===null?(C=H=ge,v=f):H=H.next=ge,nt.lanes|=K,ol|=K;ge=P.action,Ll&&n(f,ge),f=P.hasEagerState?P.eagerState:n(f,ge)}else K={lane:ge,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},H===null?(C=H=K,v=f):H=H.next=K,nt.lanes|=ge,ol|=ge;P=P.next}while(P!==null&&P!==t);if(H===null?v=f:H.next=C,!Rn(f,e.memoizedState)&&(tn=!0,de&&(n=ta,n!==null)))throw n;e.memoizedState=f,e.baseState=v,e.baseQueue=H,a.lastRenderedState=f}return c===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Vu(e){var t=Pt(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var a=n.dispatch,c=n.pending,f=t.memoizedState;if(c!==null){n.pending=null;var v=c=c.next;do f=e(f,v.action),v=v.next;while(v!==c);Rn(f,t.memoizedState)||(tn=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,a]}function wp(e,t,n){var a=nt,c=Pt(),f=mt;if(f){if(n===void 0)throw Error(o(407));n=n()}else n=t();var v=!Rn((Lt||c).memoizedState,n);if(v&&(c.memoizedState=n,tn=!0),c=c.queue,qu(jp.bind(null,a,c,e),[e]),c.getSnapshot!==t||v||en!==null&&en.memoizedState.tag&1){if(a.flags|=2048,sa(9,{destroy:void 0},Np.bind(null,a,c,n,t),null),zt===null)throw Error(o(349));f||(Or&127)!==0||Sp(a,t,n)}return n}function Sp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=nt.updateQueue,t===null?(t=hs(),nt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Np(e,t,n,a){t.value=n,t.getSnapshot=a,Cp(t)&&kp(e)}function jp(e,t,n){return n(function(){Cp(t)&&kp(e)})}function Cp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rn(e,n)}catch{return!0}}function kp(e){var t=Nl(e,2);t!==null&&Tn(t,e,2)}function Uu(e){var t=Nn();if(typeof e=="function"){var n=e;if(e=n(),Ll){gt(!0);try{n()}finally{gt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:e},t}function Mp(e,t,n,a){return e.baseState=n,Hu(e,Lt,typeof a=="function"?a:Er)}function Av(e,t,n,a,c){if(bs(e))throw Error(o(485));if(e=t.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};R.T!==null?n(!0):f.isTransition=!1,a(f),n=t.pending,n===null?(f.next=t.pending=f,Op(t,f)):(f.next=n.next,t.pending=n.next=f)}}function Op(e,t){var n=t.action,a=t.payload,c=e.state;if(t.isTransition){var f=R.T,v={};R.T=v;try{var C=n(c,a),H=R.S;H!==null&&H(v,C),Ep(e,t,C)}catch(P){Gu(e,t,P)}finally{f!==null&&v.types!==null&&(f.types=v.types),R.T=f}}else try{f=n(c,a),Ep(e,t,f)}catch(P){Gu(e,t,P)}}function Ep(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Tp(e,t,a)},function(a){return Gu(e,t,a)}):Tp(e,t,n)}function Tp(e,t,n){t.status="fulfilled",t.value=n,_p(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Op(e,n)))}function Gu(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,_p(t),t=t.next;while(t!==a)}e.action=null}function _p(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Lp(e,t){return t}function Ap(e,t){if(mt){var n=zt.formState;if(n!==null){e:{var a=nt;if(mt){if(Vt){t:{for(var c=Vt,f=Jn;c.nodeType!==8;){if(!f){c=null;break t}if(c=tr(c.nextSibling),c===null){c=null;break t}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){Vt=tr(c.nextSibling),a=c.data==="F!";break e}}Zr(a)}a=!1}a&&(t=n[0])}}return n=Nn(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lp,lastRenderedState:t},n.queue=a,n=Kp.bind(null,nt,a),a.dispatch=n,a=Uu(!1),f=Qu.bind(null,nt,!1,a.queue),a=Nn(),c={state:t,dispatch:null,action:e,pending:null},a.queue=c,n=Av.bind(null,nt,c,f,n),c.dispatch=n,a.memoizedState=e,[t,n,!1]}function Rp(e){var t=Pt();return Dp(t,Lt,e)}function Dp(e,t,n){if(t=Hu(e,t,Lp)[0],e=xs(Er)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Pa(t)}catch(v){throw v===na?ss:v}else a=t;t=Pt();var c=t.queue,f=c.dispatch;return n!==t.memoizedState&&(nt.flags|=2048,sa(9,{destroy:void 0},Rv.bind(null,c,n),null)),[a,f,e]}function Rv(e,t){e.action=t}function zp(e){var t=Pt(),n=Lt;if(n!==null)return Dp(t,n,e);Pt(),t=t.memoizedState,n=Pt();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function sa(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=nt.updateQueue,t===null&&(t=hs(),nt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Bp(){return Pt().memoizedState}function vs(e,t,n,a){var c=Nn();nt.flags|=e,c.memoizedState=sa(1|t,{destroy:void 0},n,a===void 0?null:a)}function ys(e,t,n,a){var c=Pt();a=a===void 0?null:a;var f=c.memoizedState.inst;Lt!==null&&a!==null&&Au(a,Lt.memoizedState.deps)?c.memoizedState=sa(t,f,n,a):(nt.flags|=e,c.memoizedState=sa(1|t,f,n,a))}function Ip(e,t){vs(8390656,8,e,t)}function qu(e,t){ys(2048,8,e,t)}function Dv(e){nt.flags|=4;var t=nt.updateQueue;if(t===null)t=hs(),nt.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Hp(e){var t=Pt().memoizedState;return Dv({ref:t,nextImpl:e}),function(){if((jt&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Vp(e,t){return ys(4,2,e,t)}function Up(e,t){return ys(4,4,e,t)}function Gp(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qp(e,t,n){n=n!=null?n.concat([e]):null,ys(4,4,Gp.bind(null,t,e),n)}function Wu(){}function Wp(e,t){var n=Pt();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&Au(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Fp(e,t){var n=Pt();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&Au(t,a[1]))return a[0];if(a=e(),Ll){gt(!0);try{e()}finally{gt(!1)}}return n.memoizedState=[a,t],a}function Fu(e,t,n){return n===void 0||(Or&1073741824)!==0&&(dt&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=$m(),nt.lanes|=e,ol|=e,n)}function $p(e,t,n,a){return Rn(n,t)?n:la.current!==null?(e=Fu(e,n,a),Rn(e,t)||(tn=!0),e):(Or&42)===0||(Or&1073741824)!==0&&(dt&261930)===0?(tn=!0,e.memoizedState=n):(e=$m(),nt.lanes|=e,ol|=e,t)}function Yp(e,t,n,a,c){var f=F.p;F.p=f!==0&&8>f?f:8;var v=R.T,C={};R.T=C,Qu(e,!1,t,n);try{var H=c(),P=R.S;if(P!==null&&P(C,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var de=Tv(H,a);Za(e,t,de,Vn(e))}else Za(e,t,a,Vn(e))}catch(ge){Za(e,t,{then:function(){},status:"rejected",reason:ge},Vn())}finally{F.p=f,v!==null&&C.types!==null&&(v.types=C.types),R.T=v}}function zv(){}function $u(e,t,n,a){if(e.tag!==5)throw Error(o(476));var c=Qp(e).queue;Yp(e,c,t,pe,n===null?zv:function(){return Xp(e),n(a)})}function Qp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:pe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Xp(e){var t=Qp(e);t.next===null&&(t=e.alternate.memoizedState),Za(e,t.next.queue,{},Vn())}function Yu(){return dn(ho)}function Pp(){return Pt().memoizedState}function Zp(){return Pt().memoizedState}function Bv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Vn();e=el(n);var a=tl(t,e,n);a!==null&&(Tn(a,t,n),$a(a,t,n)),t={cache:Su()},e.payload=t;return}t=t.return}}function Iv(e,t,n){var a=Vn();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},bs(e)?Jp(t,n):(n=du(e,t,n,a),n!==null&&(Tn(n,e,a),em(n,t,a)))}function Kp(e,t,n){var a=Vn();Za(e,t,n,a)}function Za(e,t,n,a){var c={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(bs(e))Jp(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,C=f(v,n);if(c.hasEagerState=!0,c.eagerState=C,Rn(C,v))return es(e,t,c,0),zt===null&&Jo(),!1}catch{}if(n=du(e,t,c,a),n!==null)return Tn(n,e,a),em(n,t,a),!0}return!1}function Qu(e,t,n,a){if(a={lane:2,revertLane:kc(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},bs(e)){if(t)throw Error(o(479))}else t=du(e,n,a,2),t!==null&&Tn(t,e,2)}function bs(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function Jp(e,t){aa=ps=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function em(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ye(e,n)}}var Ka={readContext:dn,use:gs,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};Ka.useEffectEvent=$t;var tm={readContext:dn,use:gs,useCallback:function(e,t){return Nn().memoizedState=[e,t===void 0?null:t],e},useContext:dn,useEffect:Ip,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,vs(4194308,4,Gp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vs(4194308,4,e,t)},useInsertionEffect:function(e,t){vs(4,2,e,t)},useMemo:function(e,t){var n=Nn();t=t===void 0?null:t;var a=e();if(Ll){gt(!0);try{e()}finally{gt(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=Nn();if(n!==void 0){var c=n(t);if(Ll){gt(!0);try{n(t)}finally{gt(!1)}}}else c=t;return a.memoizedState=a.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},a.queue=e,e=e.dispatch=Iv.bind(null,nt,e),[a.memoizedState,e]},useRef:function(e){var t=Nn();return e={current:e},t.memoizedState=e},useState:function(e){e=Uu(e);var t=e.queue,n=Kp.bind(null,nt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Wu,useDeferredValue:function(e,t){var n=Nn();return Fu(n,e,t)},useTransition:function(){var e=Uu(!1);return e=Yp.bind(null,nt,e.queue,!0,!1),Nn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=nt,c=Nn();if(mt){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),zt===null)throw Error(o(349));(dt&127)!==0||Sp(a,t,n)}c.memoizedState=n;var f={value:n,getSnapshot:t};return c.queue=f,Ip(jp.bind(null,a,f,e),[e]),a.flags|=2048,sa(9,{destroy:void 0},Np.bind(null,a,f,n,t),null),n},useId:function(){var e=Nn(),t=zt.identifierPrefix;if(mt){var n=mr,a=pr;n=(a&~(1<<32-Gt(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=ms++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=_v++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Yu,useFormState:Ap,useActionState:Ap,useOptimistic:function(e){var t=Nn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Qu.bind(null,nt,!0,n),n.dispatch=t,[e,t]},useMemoCache:Iu,useCacheRefresh:function(){return Nn().memoizedState=Bv.bind(null,nt)},useEffectEvent:function(e){var t=Nn(),n={impl:e};return t.memoizedState=n,function(){if((jt&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}},Xu={readContext:dn,use:gs,useCallback:Wp,useContext:dn,useEffect:qu,useImperativeHandle:qp,useInsertionEffect:Vp,useLayoutEffect:Up,useMemo:Fp,useReducer:xs,useRef:Bp,useState:function(){return xs(Er)},useDebugValue:Wu,useDeferredValue:function(e,t){var n=Pt();return $p(n,Lt.memoizedState,e,t)},useTransition:function(){var e=xs(Er)[0],t=Pt().memoizedState;return[typeof e=="boolean"?e:Pa(e),t]},useSyncExternalStore:wp,useId:Pp,useHostTransitionStatus:Yu,useFormState:Rp,useActionState:Rp,useOptimistic:function(e,t){var n=Pt();return Mp(n,Lt,e,t)},useMemoCache:Iu,useCacheRefresh:Zp};Xu.useEffectEvent=Hp;var nm={readContext:dn,use:gs,useCallback:Wp,useContext:dn,useEffect:qu,useImperativeHandle:qp,useInsertionEffect:Vp,useLayoutEffect:Up,useMemo:Fp,useReducer:Vu,useRef:Bp,useState:function(){return Vu(Er)},useDebugValue:Wu,useDeferredValue:function(e,t){var n=Pt();return Lt===null?Fu(n,e,t):$p(n,Lt.memoizedState,e,t)},useTransition:function(){var e=Vu(Er)[0],t=Pt().memoizedState;return[typeof e=="boolean"?e:Pa(e),t]},useSyncExternalStore:wp,useId:Pp,useHostTransitionStatus:Yu,useFormState:zp,useActionState:zp,useOptimistic:function(e,t){var n=Pt();return Lt!==null?Mp(n,Lt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Iu,useCacheRefresh:Zp};nm.useEffectEvent=Hp;function Pu(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:y({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zu={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Vn(),c=el(a);c.payload=t,n!=null&&(c.callback=n),t=tl(e,c,a),t!==null&&(Tn(t,e,a),$a(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Vn(),c=el(a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=tl(e,c,a),t!==null&&(Tn(t,e,a),$a(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Vn(),a=el(n);a.tag=2,t!=null&&(a.callback=t),t=tl(e,a,n),t!==null&&(Tn(t,e,n),$a(t,e,n))}};function rm(e,t,n,a,c,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,v):t.prototype&&t.prototype.isPureReactComponent?!Ia(n,a)||!Ia(c,f):!0}function lm(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Zu.enqueueReplaceState(t,t.state,null)}function Al(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=y({},n));for(var c in e)n[c]===void 0&&(n[c]=e[c])}return n}function am(e){Ko(e)}function om(e){console.error(e)}function sm(e){Ko(e)}function ws(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function im(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Ku(e,t,n){return n=el(n),n.tag=3,n.payload={element:null},n.callback=function(){ws(e,t)},n}function um(e){return e=el(e),e.tag=3,e}function cm(e,t,n,a){var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=a.value;e.payload=function(){return c(f)},e.callback=function(){im(t,n,a)}}var v=n.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){im(t,n,a),typeof c!="function"&&(sl===null?sl=new Set([this]):sl.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})})}function Hv(e,t,n,a,c){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&Jl(t,n,c,!0),n=zn.current,n!==null){switch(n.tag){case 31:case 13:return er===null?As():n.alternate===null&&Yt===0&&(Yt=3),n.flags&=-257,n.flags|=65536,n.lanes=c,a===is?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Nc(e,a,c)),!1;case 22:return n.flags|=65536,a===is?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Nc(e,a,c)),!1}throw Error(o(435,n.tag))}return Nc(e,a,c),As(),!1}if(mt)return t=zn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,a!==xu&&(e=Error(o(422),{cause:a}),Ua(Pn(e,n)))):(a!==xu&&(t=Error(o(423),{cause:a}),Ua(Pn(t,n))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,a=Pn(a,n),c=Ku(e.stateNode,a,c),Ou(e,c),Yt!==4&&(Yt=2)),!1;var f=Error(o(520),{cause:a});if(f=Pn(f,n),oo===null?oo=[f]:oo.push(f),Yt!==4&&(Yt=2),t===null)return!0;a=Pn(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=c&-c,n.lanes|=e,e=Ku(n.stateNode,a,e),Ou(n,e),!1;case 1:if(t=n.type,f=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(sl===null||!sl.has(f))))return n.flags|=65536,c&=-c,n.lanes|=c,c=um(c),cm(c,e,n,a),Ou(n,c),!1}n=n.return}while(n!==null);return!1}var Ju=Error(o(461)),tn=!1;function fn(e,t,n,a){t.child=e===null?mp(t,null,n,a):_l(t,e.child,n,a)}function dm(e,t,n,a,c){n=n.render;var f=t.ref;if("ref"in a){var v={};for(var C in a)C!=="ref"&&(v[C]=a[C])}else v=a;return Ml(t),a=Ru(e,t,n,v,f,c),C=Du(),e!==null&&!tn?(zu(e,t,c),Tr(e,t,c)):(mt&&C&&hu(t),t.flags|=1,fn(e,t,a,c),t.child)}function fm(e,t,n,a,c){if(e===null){var f=n.type;return typeof f=="function"&&!fu(f)&&f.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=f,pm(e,t,f,a,c)):(e=ns(n.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!sc(e,c)){var v=f.memoizedProps;if(n=n.compare,n=n!==null?n:Ia,n(v,a)&&e.ref===t.ref)return Tr(e,t,c)}return t.flags|=1,e=jr(f,a),e.ref=t.ref,e.return=t,t.child=e}function pm(e,t,n,a,c){if(e!==null){var f=e.memoizedProps;if(Ia(f,a)&&e.ref===t.ref)if(tn=!1,t.pendingProps=a=f,sc(e,c))(e.flags&131072)!==0&&(tn=!0);else return t.lanes=e.lanes,Tr(e,t,c)}return ec(e,t,n,a,c)}function mm(e,t,n,a){var c=a.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|n:n,e!==null){for(a=t.child=e.child,c=0;a!==null;)c=c|a.lanes|a.childLanes,a=a.sibling;a=c&~f}else a=0,t.child=null;return hm(e,t,f,n,a)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&os(t,f!==null?f.cachePool:null),f!==null?xp(t,f):Tu(),vp(t);else return a=t.lanes=536870912,hm(e,t,f!==null?f.baseLanes|n:n,n,a)}else f!==null?(os(t,f.cachePool),xp(t,f),rl(),t.memoizedState=null):(e!==null&&os(t,null),Tu(),rl());return fn(e,t,c,n),t.child}function Ja(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function hm(e,t,n,a,c){var f=ju();return f=f===null?null:{parent:Jt._currentValue,pool:f},t.memoizedState={baseLanes:n,cachePool:f},e!==null&&os(t,null),Tu(),vp(t),e!==null&&Jl(e,t,a,!0),t.childLanes=c,null}function Ss(e,t){return t=js({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function gm(e,t,n){return _l(t,e.child,null,n),e=Ss(t,t.pendingProps),e.flags|=2,Bn(t),t.memoizedState=null,e}function Vv(e,t,n){var a=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(mt){if(a.mode==="hidden")return e=Ss(t,a),t.lanes=536870912,Ja(null,e);if(Lu(t),(e=Vt)?(e=Oh(e,Jn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Xr!==null?{id:pr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},n=Jf(e),n.return=t,t.child=n,cn=t,Vt=null)):e=null,e===null)throw Zr(t);return t.lanes=536870912,null}return Ss(t,a)}var f=e.memoizedState;if(f!==null){var v=f.dehydrated;if(Lu(t),c)if(t.flags&256)t.flags&=-257,t=gm(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(tn||Jl(e,t,n,!1),c=(n&e.childLanes)!==0,tn||c){if(a=zt,a!==null&&(v=Re(a,n),v!==0&&v!==f.retryLane))throw f.retryLane=v,Nl(e,v),Tn(a,e,v),Ju;As(),t=gm(e,t,n)}else e=f.treeContext,Vt=tr(v.nextSibling),cn=t,mt=!0,Pr=null,Jn=!1,e!==null&&np(t,e),t=Ss(t,a),t.flags|=4096;return t}return e=jr(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ns(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function ec(e,t,n,a,c){return Ml(t),n=Ru(e,t,n,a,void 0,c),a=Du(),e!==null&&!tn?(zu(e,t,c),Tr(e,t,c)):(mt&&a&&hu(t),t.flags|=1,fn(e,t,n,c),t.child)}function xm(e,t,n,a,c,f){return Ml(t),t.updateQueue=null,n=bp(t,a,n,c),yp(e),a=Du(),e!==null&&!tn?(zu(e,t,f),Tr(e,t,f)):(mt&&a&&hu(t),t.flags|=1,fn(e,t,n,f),t.child)}function vm(e,t,n,a,c){if(Ml(t),t.stateNode===null){var f=Xl,v=n.contextType;typeof v=="object"&&v!==null&&(f=dn(v)),f=new n(a,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Zu,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=a,f.state=t.memoizedState,f.refs={},ku(t),v=n.contextType,f.context=typeof v=="object"&&v!==null?dn(v):Xl,f.state=t.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(Pu(t,n,v,a),f.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Zu.enqueueReplaceState(f,f.state,null),Qa(t,a,f,c),Ya(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){f=t.stateNode;var C=t.memoizedProps,H=Al(n,C);f.props=H;var P=f.context,de=n.contextType;v=Xl,typeof de=="object"&&de!==null&&(v=dn(de));var ge=n.getDerivedStateFromProps;de=typeof ge=="function"||typeof f.getSnapshotBeforeUpdate=="function",C=t.pendingProps!==C,de||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(C||P!==v)&&lm(t,f,a,v),Jr=!1;var K=t.memoizedState;f.state=K,Qa(t,a,f,c),Ya(),P=t.memoizedState,C||K!==P||Jr?(typeof ge=="function"&&(Pu(t,n,ge,a),P=t.memoizedState),(H=Jr||rm(t,n,H,a,K,P,v))?(de||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=P),f.props=a,f.state=P,f.context=v,a=H):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,Mu(e,t),v=t.memoizedProps,de=Al(n,v),f.props=de,ge=t.pendingProps,K=f.context,P=n.contextType,H=Xl,typeof P=="object"&&P!==null&&(H=dn(P)),C=n.getDerivedStateFromProps,(P=typeof C=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==ge||K!==H)&&lm(t,f,a,H),Jr=!1,K=t.memoizedState,f.state=K,Qa(t,a,f,c),Ya();var se=t.memoizedState;v!==ge||K!==se||Jr||e!==null&&e.dependencies!==null&&ls(e.dependencies)?(typeof C=="function"&&(Pu(t,n,C,a),se=t.memoizedState),(de=Jr||rm(t,n,de,a,K,se,H)||e!==null&&e.dependencies!==null&&ls(e.dependencies))?(P||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,se,H),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,se,H)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=se),f.props=a,f.state=se,f.context=H,a=de):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),a=!1)}return f=a,Ns(e,t),a=(t.flags&128)!==0,f||a?(f=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&a?(t.child=_l(t,e.child,null,c),t.child=_l(t,null,n,c)):fn(e,t,n,c),t.memoizedState=f.state,e=t.child):e=Tr(e,t,c),e}function ym(e,t,n,a){return Cl(),t.flags|=256,fn(e,t,n,a),t.child}var tc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nc(e){return{baseLanes:e,cachePool:ip()}}function rc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Hn),e}function bm(e,t,n){var a=t.pendingProps,c=!1,f=(t.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Xt.current&2)!==0),v&&(c=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(mt){if(c?nl(t):rl(),(e=Vt)?(e=Oh(e,Jn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Xr!==null?{id:pr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},n=Jf(e),n.return=t,t.child=n,cn=t,Vt=null)):e=null,e===null)throw Zr(t);return Hc(e)?t.lanes=32:t.lanes=536870912,null}var C=a.children;return a=a.fallback,c?(rl(),c=t.mode,C=js({mode:"hidden",children:C},c),a=jl(a,c,n,null),C.return=t,a.return=t,C.sibling=a,t.child=C,a=t.child,a.memoizedState=nc(n),a.childLanes=rc(e,v,n),t.memoizedState=tc,Ja(null,a)):(nl(t),lc(t,C))}var H=e.memoizedState;if(H!==null&&(C=H.dehydrated,C!==null)){if(f)t.flags&256?(nl(t),t.flags&=-257,t=ac(e,t,n)):t.memoizedState!==null?(rl(),t.child=e.child,t.flags|=128,t=null):(rl(),C=a.fallback,c=t.mode,a=js({mode:"visible",children:a.children},c),C=jl(C,c,n,null),C.flags|=2,a.return=t,C.return=t,a.sibling=C,t.child=a,_l(t,e.child,null,n),a=t.child,a.memoizedState=nc(n),a.childLanes=rc(e,v,n),t.memoizedState=tc,t=Ja(null,a));else if(nl(t),Hc(C)){if(v=C.nextSibling&&C.nextSibling.dataset,v)var P=v.dgst;v=P,a=Error(o(419)),a.stack="",a.digest=v,Ua({value:a,source:null,stack:null}),t=ac(e,t,n)}else if(tn||Jl(e,t,n,!1),v=(n&e.childLanes)!==0,tn||v){if(v=zt,v!==null&&(a=Re(v,n),a!==0&&a!==H.retryLane))throw H.retryLane=a,Nl(e,a),Tn(v,e,a),Ju;Ic(C)||As(),t=ac(e,t,n)}else Ic(C)?(t.flags|=192,t.child=e.child,t=null):(e=H.treeContext,Vt=tr(C.nextSibling),cn=t,mt=!0,Pr=null,Jn=!1,e!==null&&np(t,e),t=lc(t,a.children),t.flags|=4096);return t}return c?(rl(),C=a.fallback,c=t.mode,H=e.child,P=H.sibling,a=jr(H,{mode:"hidden",children:a.children}),a.subtreeFlags=H.subtreeFlags&65011712,P!==null?C=jr(P,C):(C=jl(C,c,n,null),C.flags|=2),C.return=t,a.return=t,a.sibling=C,t.child=a,Ja(null,a),a=t.child,C=e.child.memoizedState,C===null?C=nc(n):(c=C.cachePool,c!==null?(H=Jt._currentValue,c=c.parent!==H?{parent:H,pool:H}:c):c=ip(),C={baseLanes:C.baseLanes|n,cachePool:c}),a.memoizedState=C,a.childLanes=rc(e,v,n),t.memoizedState=tc,Ja(e.child,a)):(nl(t),n=e.child,e=n.sibling,n=jr(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=n,t.memoizedState=null,n)}function lc(e,t){return t=js({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function js(e,t){return e=Dn(22,e,null,t),e.lanes=0,e}function ac(e,t,n){return _l(t,e.child,null,n),e=lc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wm(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),bu(e.return,t,n)}function oc(e,t,n,a,c,f){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:c,treeForkCount:f}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=n,v.tailMode=c,v.treeForkCount=f)}function Sm(e,t,n){var a=t.pendingProps,c=a.revealOrder,f=a.tail;a=a.children;var v=Xt.current,C=(v&2)!==0;if(C?(v=v&1|2,t.flags|=128):v&=1,E(Xt,v),fn(e,t,a,n),a=mt?Va:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wm(e,n,t);else if(e.tag===19)wm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&fs(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),oc(t,!1,c,n,f,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&fs(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}oc(t,!0,n,null,f,a);break;case"together":oc(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function Tr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ol|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Jl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=jr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=jr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ls(e)))}function Uv(e,t,n){switch(t.tag){case 3:le(t,t.stateNode.containerInfo),Kr(t,Jt,e.memoizedState.cache),Cl();break;case 27:case 5:Oe(t);break;case 4:le(t,t.stateNode.containerInfo);break;case 10:Kr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Lu(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(nl(t),t.flags|=128,null):(n&t.child.childLanes)!==0?bm(e,t,n):(nl(t),e=Tr(e,t,n),e!==null?e.sibling:null);nl(t);break;case 19:var c=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(Jl(e,t,n,!1),a=(n&t.childLanes)!==0),c){if(a)return Sm(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),E(Xt,Xt.current),a)break;return null;case 22:return t.lanes=0,mm(e,t,n,t.pendingProps);case 24:Kr(t,Jt,e.memoizedState.cache)}return Tr(e,t,n)}function Nm(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)tn=!0;else{if(!sc(e,n)&&(t.flags&128)===0)return tn=!1,Uv(e,t,n);tn=(e.flags&131072)!==0}else tn=!1,mt&&(t.flags&1048576)!==0&&tp(t,Va,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=El(t.elementType),t.type=e,typeof e=="function")fu(e)?(a=Al(e,a),t.tag=1,t=vm(null,t,e,a,n)):(t.tag=0,t=ec(null,t,e,a,n));else{if(e!=null){var c=e.$$typeof;if(c===z){t.tag=11,t=dm(null,t,e,a,n);break e}else if(c===L){t.tag=14,t=fm(null,t,e,a,n);break e}}throw t=ae(e)||e,Error(o(306,t,""))}}return t;case 0:return ec(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,c=Al(a,t.pendingProps),vm(e,t,a,c,n);case 3:e:{if(le(t,t.stateNode.containerInfo),e===null)throw Error(o(387));a=t.pendingProps;var f=t.memoizedState;c=f.element,Mu(e,t),Qa(t,a,null,n);var v=t.memoizedState;if(a=v.cache,Kr(t,Jt,a),a!==f.cache&&wu(t,[Jt],n,!0),Ya(),a=v.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=ym(e,t,a,n);break e}else if(a!==c){c=Pn(Error(o(424)),t),Ua(c),t=ym(e,t,a,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Vt=tr(e.firstChild),cn=t,mt=!0,Pr=null,Jn=!0,n=mp(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cl(),a===c){t=Tr(e,t,n);break e}fn(e,t,a,n)}t=t.child}return t;case 26:return Ns(e,t),e===null?(n=Rh(t.type,null,t.pendingProps,null))?t.memoizedState=n:mt||(n=t.type,e=t.pendingProps,a=Vs(fe.current).createElement(n),a[xt]=t,a[Dt]=e,pn(a,n,e),Kt(a),t.stateNode=a):t.memoizedState=Rh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Oe(t),e===null&&mt&&(a=t.stateNode=_h(t.type,t.pendingProps,fe.current),cn=t,Jn=!0,c=Vt,dl(t.type)?(Vc=c,Vt=tr(a.firstChild)):Vt=c),fn(e,t,t.pendingProps.children,n),Ns(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&mt&&((c=a=Vt)&&(a=xy(a,t.type,t.pendingProps,Jn),a!==null?(t.stateNode=a,cn=t,Vt=tr(a.firstChild),Jn=!1,c=!0):c=!1),c||Zr(t)),Oe(t),c=t.type,f=t.pendingProps,v=e!==null?e.memoizedProps:null,a=f.children,Dc(c,f)?a=null:v!==null&&Dc(c,v)&&(t.flags|=32),t.memoizedState!==null&&(c=Ru(e,t,Lv,null,null,n),ho._currentValue=c),Ns(e,t),fn(e,t,a,n),t.child;case 6:return e===null&&mt&&((e=n=Vt)&&(n=vy(n,t.pendingProps,Jn),n!==null?(t.stateNode=n,cn=t,Vt=null,e=!0):e=!1),e||Zr(t)),null;case 13:return bm(e,t,n);case 4:return le(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=_l(t,null,a,n):fn(e,t,a,n),t.child;case 11:return dm(e,t,t.type,t.pendingProps,n);case 7:return fn(e,t,t.pendingProps,n),t.child;case 8:return fn(e,t,t.pendingProps.children,n),t.child;case 12:return fn(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Kr(t,t.type,a.value),fn(e,t,a.children,n),t.child;case 9:return c=t.type._context,a=t.pendingProps.children,Ml(t),c=dn(c),a=a(c),t.flags|=1,fn(e,t,a,n),t.child;case 14:return fm(e,t,t.type,t.pendingProps,n);case 15:return pm(e,t,t.type,t.pendingProps,n);case 19:return Sm(e,t,n);case 31:return Vv(e,t,n);case 22:return mm(e,t,n,t.pendingProps);case 24:return Ml(t),a=dn(Jt),e===null?(c=ju(),c===null&&(c=zt,f=Su(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=n),c=f),t.memoizedState={parent:a,cache:c},ku(t),Kr(t,Jt,c)):((e.lanes&n)!==0&&(Mu(e,t),Qa(t,null,null,n),Ya()),c=e.memoizedState,f=t.memoizedState,c.parent!==a?(c={parent:a,cache:a},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Kr(t,Jt,a)):(a=f.cache,Kr(t,Jt,a),a!==c.cache&&wu(t,[Jt],n,!0))),fn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function _r(e){e.flags|=4}function ic(e,t,n,a,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Pm())e.flags|=8192;else throw Tl=is,Cu}else e.flags&=-16777217}function jm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Hh(t))if(Pm())e.flags|=8192;else throw Tl=is,Cu}function Cs(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?V():536870912,e.lanes|=t,da|=t)}function eo(e,t){if(!mt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags&65011712,a|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Gv(e,t,n){var a=t.pendingProps;switch(gu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(t),null;case 1:return Ut(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Mr(Jt),be(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Kl(t)?_r(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,vu())),Ut(t),null;case 26:var c=t.type,f=t.memoizedState;return e===null?(_r(t),f!==null?(Ut(t),jm(t,f)):(Ut(t),ic(t,c,null,a,n))):f?f!==e.memoizedState?(_r(t),Ut(t),jm(t,f)):(Ut(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&_r(t),Ut(t),ic(t,c,e,a,n)),null;case 27:if(qe(t),n=fe.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&_r(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return Ut(t),null}e=$.current,Kl(t)?rp(t):(e=_h(c,a,n),t.stateNode=e,_r(t))}return Ut(t),null;case 5:if(qe(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&_r(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return Ut(t),null}if(f=$.current,Kl(t))rp(t);else{var v=Vs(fe.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof a.is=="string"?v.createElement("select",{is:a.is}):v.createElement("select"),a.multiple?f.multiple=!0:a.size&&(f.size=a.size);break;default:f=typeof a.is=="string"?v.createElement(c,{is:a.is}):v.createElement(c)}}f[xt]=t,f[Dt]=a;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=f;e:switch(pn(f,c,a),c){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&_r(t)}}return Ut(t),ic(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&_r(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(o(166));if(e=fe.current,Kl(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,c=cn,c!==null)switch(c.tag){case 27:case 5:a=c.memoizedProps}e[xt]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||bh(e.nodeValue,n)),e||Zr(t,!0)}else e=Vs(e).createTextNode(a),e[xt]=t,t.stateNode=e}return Ut(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=Kl(t),n!==null){if(e===null){if(!a)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[xt]=t}else Cl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ut(t),e=!1}else n=vu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Bn(t),t):(Bn(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Ut(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Kl(t),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[xt]=t}else Cl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ut(t),c=!1}else c=vu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Bn(t),t):(Bn(t),null)}return Bn(t),(t.flags&128)!==0?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,c=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(c=a.alternate.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Cs(t,t.updateQueue),Ut(t),null);case 4:return be(),e===null&&Tc(t.stateNode.containerInfo),Ut(t),null;case 10:return Mr(t.type),Ut(t),null;case 19:if(I(Xt),a=t.memoizedState,a===null)return Ut(t),null;if(c=(t.flags&128)!==0,f=a.rendering,f===null)if(c)eo(a,!1);else{if(Yt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=fs(e),f!==null){for(t.flags|=128,eo(a,!1),e=f.updateQueue,t.updateQueue=e,Cs(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Kf(n,e),n=n.sibling;return E(Xt,Xt.current&1|2),mt&&Cr(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&Ze()>Ts&&(t.flags|=128,c=!0,eo(a,!1),t.lanes=4194304)}else{if(!c)if(e=fs(f),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Cs(t,e),eo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!f.alternate&&!mt)return Ut(t),null}else 2*Ze()-a.renderingStartTime>Ts&&n!==536870912&&(t.flags|=128,c=!0,eo(a,!1),t.lanes=4194304);a.isBackwards?(f.sibling=t.child,t.child=f):(e=a.last,e!==null?e.sibling=f:t.child=f,a.last=f)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ze(),e.sibling=null,n=Xt.current,E(Xt,c?n&1|2:n&1),mt&&Cr(t,a.treeForkCount),e):(Ut(t),null);case 22:case 23:return Bn(t),_u(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(Ut(t),t.subtreeFlags&6&&(t.flags|=8192)):Ut(t),n=t.updateQueue,n!==null&&Cs(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&I(Ol),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Mr(Jt),Ut(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function qv(e,t){switch(gu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mr(Jt),be(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return qe(t),null;case 31:if(t.memoizedState!==null){if(Bn(t),t.alternate===null)throw Error(o(340));Cl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Bn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Cl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(Xt),null;case 4:return be(),null;case 10:return Mr(t.type),null;case 22:case 23:return Bn(t),_u(),e!==null&&I(Ol),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Mr(Jt),null;case 25:return null;default:return null}}function Cm(e,t){switch(gu(t),t.tag){case 3:Mr(Jt),be();break;case 26:case 27:case 5:qe(t);break;case 4:be();break;case 31:t.memoizedState!==null&&Bn(t);break;case 13:Bn(t);break;case 19:I(Xt);break;case 10:Mr(t.type);break;case 22:case 23:Bn(t),_u(),e!==null&&I(Ol);break;case 24:Mr(Jt)}}function to(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var c=a.next;n=c;do{if((n.tag&e)===e){a=void 0;var f=n.create,v=n.inst;a=f(),v.destroy=a}n=n.next}while(n!==c)}}catch(C){Tt(t,t.return,C)}}function ll(e,t,n){try{var a=t.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&e)===e){var v=a.inst,C=v.destroy;if(C!==void 0){v.destroy=void 0,c=t;var H=n,P=C;try{P()}catch(de){Tt(c,H,de)}}}a=a.next}while(a!==f)}}catch(de){Tt(t,t.return,de)}}function km(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{gp(t,n)}catch(a){Tt(e,e.return,a)}}}function Mm(e,t,n){n.props=Al(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Tt(e,t,a)}}function no(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(c){Tt(e,t,c)}}function hr(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(c){Tt(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(c){Tt(e,t,c)}else n.current=null}function Om(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(c){Tt(e,e.return,c)}}function uc(e,t,n){try{var a=e.stateNode;dy(a,e.type,n,t),a[Dt]=t}catch(c){Tt(e,e.return,c)}}function Em(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&dl(e.type)||e.tag===4}function cc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Em(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&dl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dc(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Sr));else if(a!==4&&(a===27&&dl(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(dc(e,t,n),e=e.sibling;e!==null;)dc(e,t,n),e=e.sibling}function ks(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&dl(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(ks(e,t,n),e=e.sibling;e!==null;)ks(e,t,n),e=e.sibling}function Tm(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);pn(t,a,n),t[xt]=e,t[Dt]=n}catch(f){Tt(e,e.return,f)}}var Lr=!1,nn=!1,fc=!1,_m=typeof WeakSet=="function"?WeakSet:Set,on=null;function Wv(e,t){if(e=e.containerInfo,Ac=Ys,e=qf(e),au(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var v=0,C=-1,H=-1,P=0,de=0,ge=e,K=null;t:for(;;){for(var se;ge!==n||c!==0&&ge.nodeType!==3||(C=v+c),ge!==f||a!==0&&ge.nodeType!==3||(H=v+a),ge.nodeType===3&&(v+=ge.nodeValue.length),(se=ge.firstChild)!==null;)K=ge,ge=se;for(;;){if(ge===e)break t;if(K===n&&++P===c&&(C=v),K===f&&++de===a&&(H=v),(se=ge.nextSibling)!==null)break;ge=K,K=ge.parentNode}ge=se}n=C===-1||H===-1?null:{start:C,end:H}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rc={focusedElem:e,selectionRange:n},Ys=!1,on=t;on!==null;)if(t=on,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,on=e;else for(;on!==null;){switch(t=on,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)c=e[n],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,n=t,c=f.memoizedProps,f=f.memoizedState,a=n.stateNode;try{var Ee=Al(n.type,c);e=a.getSnapshotBeforeUpdate(Ee,f),a.__reactInternalSnapshotBeforeUpdate=e}catch(Ge){Tt(n,n.return,Ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Bc(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Bc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,on=e;break}on=t.return}}function Lm(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Rr(e,n),a&4&&to(5,n);break;case 1:if(Rr(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(v){Tt(n,n.return,v)}else{var c=Al(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Tt(n,n.return,v)}}a&64&&km(n),a&512&&no(n,n.return);break;case 3:if(Rr(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{gp(e,t)}catch(v){Tt(n,n.return,v)}}break;case 27:t===null&&a&4&&Tm(n);case 26:case 5:Rr(e,n),t===null&&a&4&&Om(n),a&512&&no(n,n.return);break;case 12:Rr(e,n);break;case 31:Rr(e,n),a&4&&Dm(e,n);break;case 13:Rr(e,n),a&4&&zm(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Jv.bind(null,n),yy(e,n))));break;case 22:if(a=n.memoizedState!==null||Lr,!a){t=t!==null&&t.memoizedState!==null||nn,c=Lr;var f=nn;Lr=a,(nn=t)&&!f?Dr(e,n,(n.subtreeFlags&8772)!==0):Rr(e,n),Lr=c,nn=f}break;case 30:break;default:Rr(e,n)}}function Am(e){var t=e.alternate;t!==null&&(e.alternate=null,Am(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&an(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Wt=null,kn=!1;function Ar(e,t,n){for(n=n.child;n!==null;)Rm(e,t,n),n=n.sibling}function Rm(e,t,n){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(Pe,n)}catch{}switch(n.tag){case 26:nn||hr(n,t),Ar(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:nn||hr(n,t);var a=Wt,c=kn;dl(n.type)&&(Wt=n.stateNode,kn=!1),Ar(e,t,n),fo(n.stateNode),Wt=a,kn=c;break;case 5:nn||hr(n,t);case 6:if(a=Wt,c=kn,Wt=null,Ar(e,t,n),Wt=a,kn=c,Wt!==null)if(kn)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(n.stateNode)}catch(f){Tt(n,t,f)}else try{Wt.removeChild(n.stateNode)}catch(f){Tt(n,t,f)}break;case 18:Wt!==null&&(kn?(e=Wt,kh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ya(e)):kh(Wt,n.stateNode));break;case 4:a=Wt,c=kn,Wt=n.stateNode.containerInfo,kn=!0,Ar(e,t,n),Wt=a,kn=c;break;case 0:case 11:case 14:case 15:ll(2,n,t),nn||ll(4,n,t),Ar(e,t,n);break;case 1:nn||(hr(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&Mm(n,t,a)),Ar(e,t,n);break;case 21:Ar(e,t,n);break;case 22:nn=(a=nn)||n.memoizedState!==null,Ar(e,t,n),nn=a;break;default:Ar(e,t,n)}}function Dm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ya(e)}catch(n){Tt(t,t.return,n)}}}function zm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ya(e)}catch(n){Tt(t,t.return,n)}}function Fv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new _m),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new _m),t;default:throw Error(o(435,e.tag))}}function Ms(e,t){var n=Fv(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var c=ey.bind(null,e,a);a.then(c,c)}})}function Mn(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var c=n[a],f=e,v=t,C=v;e:for(;C!==null;){switch(C.tag){case 27:if(dl(C.type)){Wt=C.stateNode,kn=!1;break e}break;case 5:Wt=C.stateNode,kn=!1;break e;case 3:case 4:Wt=C.stateNode.containerInfo,kn=!0;break e}C=C.return}if(Wt===null)throw Error(o(160));Rm(f,v,c),Wt=null,kn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Bm(t,e),t=t.sibling}var or=null;function Bm(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Mn(t,e),On(e),a&4&&(ll(3,e,e.return),to(3,e),ll(5,e,e.return));break;case 1:Mn(t,e),On(e),a&512&&(nn||n===null||hr(n,n.return)),a&64&&Lr&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var c=or;if(Mn(t,e),On(e),a&512&&(nn||n===null||hr(n,n.return)),a&4){var f=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,c=c.ownerDocument||c;t:switch(a){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Ht]||f[xt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(a),c.head.insertBefore(f,c.querySelector("head > title"))),pn(f,a,n),f[xt]=e,Kt(f),a=f;break e;case"link":var v=Bh("link","href",c).get(a+(n.href||""));if(v){for(var C=0;C<v.length;C++)if(f=v[C],f.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&f.getAttribute("rel")===(n.rel==null?null:n.rel)&&f.getAttribute("title")===(n.title==null?null:n.title)&&f.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){v.splice(C,1);break t}}f=c.createElement(a),pn(f,a,n),c.head.appendChild(f);break;case"meta":if(v=Bh("meta","content",c).get(a+(n.content||""))){for(C=0;C<v.length;C++)if(f=v[C],f.getAttribute("content")===(n.content==null?null:""+n.content)&&f.getAttribute("name")===(n.name==null?null:n.name)&&f.getAttribute("property")===(n.property==null?null:n.property)&&f.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&f.getAttribute("charset")===(n.charSet==null?null:n.charSet)){v.splice(C,1);break t}}f=c.createElement(a),pn(f,a,n),c.head.appendChild(f);break;default:throw Error(o(468,a))}f[xt]=e,Kt(f),a=f}e.stateNode=a}else Ih(c,e.type,e.stateNode);else e.stateNode=zh(c,a,e.memoizedProps);else f!==a?(f===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):f.count--,a===null?Ih(c,e.type,e.stateNode):zh(c,a,e.memoizedProps)):a===null&&e.stateNode!==null&&uc(e,e.memoizedProps,n.memoizedProps)}break;case 27:Mn(t,e),On(e),a&512&&(nn||n===null||hr(n,n.return)),n!==null&&a&4&&uc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Mn(t,e),On(e),a&512&&(nn||n===null||hr(n,n.return)),e.flags&32){c=e.stateNode;try{Gl(c,"")}catch(Ee){Tt(e,e.return,Ee)}}a&4&&e.stateNode!=null&&(c=e.memoizedProps,uc(e,c,n!==null?n.memoizedProps:c)),a&1024&&(fc=!0);break;case 6:if(Mn(t,e),On(e),a&4){if(e.stateNode===null)throw Error(o(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(Ee){Tt(e,e.return,Ee)}}break;case 3:if(qs=null,c=or,or=Us(t.containerInfo),Mn(t,e),or=c,On(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{ya(t.containerInfo)}catch(Ee){Tt(e,e.return,Ee)}fc&&(fc=!1,Im(e));break;case 4:a=or,or=Us(e.stateNode.containerInfo),Mn(t,e),On(e),or=a;break;case 12:Mn(t,e),On(e);break;case 31:Mn(t,e),On(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ms(e,a)));break;case 13:Mn(t,e),On(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Es=Ze()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ms(e,a)));break;case 22:c=e.memoizedState!==null;var H=n!==null&&n.memoizedState!==null,P=Lr,de=nn;if(Lr=P||c,nn=de||H,Mn(t,e),nn=de,Lr=P,On(e),a&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(n===null||H||Lr||nn||Rl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){H=n=t;try{if(f=H.stateNode,c)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=H.stateNode;var ge=H.memoizedProps.style,K=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;C.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Ee){Tt(H,H.return,Ee)}}}else if(t.tag===6){if(n===null){H=t;try{H.stateNode.nodeValue=c?"":H.memoizedProps}catch(Ee){Tt(H,H.return,Ee)}}}else if(t.tag===18){if(n===null){H=t;try{var se=H.stateNode;c?Mh(se,!0):Mh(H.stateNode,!1)}catch(Ee){Tt(H,H.return,Ee)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Ms(e,n))));break;case 19:Mn(t,e),On(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ms(e,a)));break;case 30:break;case 21:break;default:Mn(t,e),On(e)}}function On(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(Em(a)){n=a;break}a=a.return}if(n==null)throw Error(o(160));switch(n.tag){case 27:var c=n.stateNode,f=cc(e);ks(e,f,c);break;case 5:var v=n.stateNode;n.flags&32&&(Gl(v,""),n.flags&=-33);var C=cc(e);ks(e,C,v);break;case 3:case 4:var H=n.stateNode.containerInfo,P=cc(e);dc(e,P,H);break;default:throw Error(o(161))}}catch(de){Tt(e,e.return,de)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Im(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Im(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Rr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Lm(e,t.alternate,t),t=t.sibling}function Rl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Rl(t);break;case 1:hr(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Mm(t,t.return,n),Rl(t);break;case 27:fo(t.stateNode);case 26:case 5:hr(t,t.return),Rl(t);break;case 22:t.memoizedState===null&&Rl(t);break;case 30:Rl(t);break;default:Rl(t)}e=e.sibling}}function Dr(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,c=e,f=t,v=f.flags;switch(f.tag){case 0:case 11:case 15:Dr(c,f,n),to(4,f);break;case 1:if(Dr(c,f,n),a=f,c=a.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(P){Tt(a,a.return,P)}if(a=f,c=a.updateQueue,c!==null){var C=a.stateNode;try{var H=c.shared.hiddenCallbacks;if(H!==null)for(c.shared.hiddenCallbacks=null,c=0;c<H.length;c++)hp(H[c],C)}catch(P){Tt(a,a.return,P)}}n&&v&64&&km(f),no(f,f.return);break;case 27:Tm(f);case 26:case 5:Dr(c,f,n),n&&a===null&&v&4&&Om(f),no(f,f.return);break;case 12:Dr(c,f,n);break;case 31:Dr(c,f,n),n&&v&4&&Dm(c,f);break;case 13:Dr(c,f,n),n&&v&4&&zm(c,f);break;case 22:f.memoizedState===null&&Dr(c,f,n),no(f,f.return);break;case 30:break;default:Dr(c,f,n)}t=t.sibling}}function pc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ga(n))}function mc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ga(e))}function sr(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hm(e,t,n,a),t=t.sibling}function Hm(e,t,n,a){var c=t.flags;switch(t.tag){case 0:case 11:case 15:sr(e,t,n,a),c&2048&&to(9,t);break;case 1:sr(e,t,n,a);break;case 3:sr(e,t,n,a),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ga(e)));break;case 12:if(c&2048){sr(e,t,n,a),e=t.stateNode;try{var f=t.memoizedProps,v=f.id,C=f.onPostCommit;typeof C=="function"&&C(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(H){Tt(t,t.return,H)}}else sr(e,t,n,a);break;case 31:sr(e,t,n,a);break;case 13:sr(e,t,n,a);break;case 23:break;case 22:f=t.stateNode,v=t.alternate,t.memoizedState!==null?f._visibility&2?sr(e,t,n,a):ro(e,t):f._visibility&2?sr(e,t,n,a):(f._visibility|=2,ia(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),c&2048&&pc(v,t);break;case 24:sr(e,t,n,a),c&2048&&mc(t.alternate,t);break;default:sr(e,t,n,a)}}function ia(e,t,n,a,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,v=t,C=n,H=a,P=v.flags;switch(v.tag){case 0:case 11:case 15:ia(f,v,C,H,c),to(8,v);break;case 23:break;case 22:var de=v.stateNode;v.memoizedState!==null?de._visibility&2?ia(f,v,C,H,c):ro(f,v):(de._visibility|=2,ia(f,v,C,H,c)),c&&P&2048&&pc(v.alternate,v);break;case 24:ia(f,v,C,H,c),c&&P&2048&&mc(v.alternate,v);break;default:ia(f,v,C,H,c)}t=t.sibling}}function ro(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,c=a.flags;switch(a.tag){case 22:ro(n,a),c&2048&&pc(a.alternate,a);break;case 24:ro(n,a),c&2048&&mc(a.alternate,a);break;default:ro(n,a)}t=t.sibling}}var lo=8192;function ua(e,t,n){if(e.subtreeFlags&lo)for(e=e.child;e!==null;)Vm(e,t,n),e=e.sibling}function Vm(e,t,n){switch(e.tag){case 26:ua(e,t,n),e.flags&lo&&e.memoizedState!==null&&_y(n,or,e.memoizedState,e.memoizedProps);break;case 5:ua(e,t,n);break;case 3:case 4:var a=or;or=Us(e.stateNode.containerInfo),ua(e,t,n),or=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=lo,lo=16777216,ua(e,t,n),lo=a):ua(e,t,n));break;default:ua(e,t,n)}}function Um(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ao(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];on=a,qm(a,e)}Um(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gm(e),e=e.sibling}function Gm(e){switch(e.tag){case 0:case 11:case 15:ao(e),e.flags&2048&&ll(9,e,e.return);break;case 3:ao(e);break;case 12:ao(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Os(e)):ao(e);break;default:ao(e)}}function Os(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];on=a,qm(a,e)}Um(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ll(8,t,t.return),Os(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Os(t));break;default:Os(t)}e=e.sibling}}function qm(e,t){for(;on!==null;){var n=on;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Ga(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,on=a;else e:for(n=e;on!==null;){a=on;var c=a.sibling,f=a.return;if(Am(a),a===n){on=null;break e}if(c!==null){c.return=f,on=c;break e}on=f}}}var $v={getCacheForType:function(e){var t=dn(Jt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return dn(Jt).controller.signal}},Yv=typeof WeakMap=="function"?WeakMap:Map,jt=0,zt=null,ut=null,dt=0,Et=0,In=null,al=!1,ca=!1,hc=!1,zr=0,Yt=0,ol=0,Dl=0,gc=0,Hn=0,da=0,oo=null,En=null,xc=!1,Es=0,Wm=0,Ts=1/0,_s=null,sl=null,ln=0,il=null,fa=null,Br=0,vc=0,yc=null,Fm=null,so=0,bc=null;function Vn(){return(jt&2)!==0&&dt!==0?dt&-dt:R.T!==null?kc():yt()}function $m(){if(Hn===0)if((dt&536870912)===0||mt){var e=sn;sn<<=1,(sn&3932160)===0&&(sn=262144),Hn=e}else Hn=536870912;return e=zn.current,e!==null&&(e.flags|=32),Hn}function Tn(e,t,n){(e===zt&&(Et===2||Et===9)||e.cancelPendingCommit!==null)&&(pa(e,0),ul(e,dt,Hn,!1)),ce(e,n),((jt&2)===0||e!==zt)&&(e===zt&&((jt&2)===0&&(Dl|=n),Yt===4&&ul(e,dt,Hn,!1)),gr(e))}function Ym(e,t,n){if((jt&6)!==0)throw Error(o(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ke(e,t),c=a?Pv(e,t):Sc(e,t,!0),f=a;do{if(c===0){ca&&!a&&ul(e,t,0,!1);break}else{if(n=e.current.alternate,f&&!Qv(n)){c=Sc(e,t,!1),f=!1;continue}if(c===2){if(f=t,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var C=e;c=oo;var H=C.current.memoizedState.isDehydrated;if(H&&(pa(C,v).flags|=256),v=Sc(C,v,!1),v!==2){if(hc&&!H){C.errorRecoveryDisabledLanes|=f,Dl|=f,c=4;break e}f=En,En=c,f!==null&&(En===null?En=f:En.push.apply(En,f))}c=v}if(f=!1,c!==2)continue}}if(c===1){pa(e,0),ul(e,t,0,!0);break}e:{switch(a=e,f=c,f){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:ul(a,t,Hn,!al);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=Es+300-Ze(),10<c)){if(ul(a,t,Hn,!al),$n(a,0,!0)!==0)break e;Br=t,a.timeoutHandle=jh(Qm.bind(null,a,n,En,_s,xc,t,Hn,Dl,da,al,f,"Throttled",-0,0),c);break e}Qm(a,n,En,_s,xc,t,Hn,Dl,da,al,f,null,-0,0)}}break}while(!0);gr(e)}function Qm(e,t,n,a,c,f,v,C,H,P,de,ge,K,se){if(e.timeoutHandle=-1,ge=t.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sr},Vm(t,f,ge);var Ee=(f&62914560)===f?Es-Ze():(f&4194048)===f?Wm-Ze():0;if(Ee=Ly(ge,Ee),Ee!==null){Br=f,e.cancelPendingCommit=Ee(nh.bind(null,e,t,f,n,a,c,v,C,H,de,ge,null,K,se)),ul(e,f,v,!P);return}}nh(e,t,f,n,a,c,v,C,H)}function Qv(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var c=n[a],f=c.getSnapshot;c=c.value;try{if(!Rn(f(),c))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ul(e,t,n,a){t&=~gc,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var c=t;0<c;){var f=31-Gt(c),v=1<<f;a[f]=-1,c&=~v}n!==0&&Be(e,n,t)}function Ls(){return(jt&6)===0?(io(0),!1):!0}function wc(){if(ut!==null){if(Et===0)var e=ut.return;else e=ut,kr=kl=null,Bu(e),ra=null,Wa=0,e=ut;for(;e!==null;)Cm(e.alternate,e),e=e.return;ut=null}}function pa(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,my(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Br=0,wc(),zt=e,ut=n=jr(e.current,null),dt=t,Et=0,In=null,al=!1,ca=ke(e,t),hc=!1,da=Hn=gc=Dl=ol=Yt=0,En=oo=null,xc=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var c=31-Gt(a),f=1<<c;t|=e[c],a&=~f}return zr=t,Jo(),n}function Xm(e,t){nt=null,R.H=Ka,t===na||t===ss?(t=dp(),Et=3):t===Cu?(t=dp(),Et=4):Et=t===Ju?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,In=t,ut===null&&(Yt=1,ws(e,Pn(t,e.current)))}function Pm(){var e=zn.current;return e===null?!0:(dt&4194048)===dt?er===null:(dt&62914560)===dt||(dt&536870912)!==0?e===er:!1}function Zm(){var e=R.H;return R.H=Ka,e===null?Ka:e}function Km(){var e=R.A;return R.A=$v,e}function As(){Yt=4,al||(dt&4194048)!==dt&&zn.current!==null||(ca=!0),(ol&134217727)===0&&(Dl&134217727)===0||zt===null||ul(zt,dt,Hn,!1)}function Sc(e,t,n){var a=jt;jt|=2;var c=Zm(),f=Km();(zt!==e||dt!==t)&&(_s=null,pa(e,t)),t=!1;var v=Yt;e:do try{if(Et!==0&&ut!==null){var C=ut,H=In;switch(Et){case 8:wc(),v=6;break e;case 3:case 2:case 9:case 6:zn.current===null&&(t=!0);var P=Et;if(Et=0,In=null,ma(e,C,H,P),n&&ca){v=0;break e}break;default:P=Et,Et=0,In=null,ma(e,C,H,P)}}Xv(),v=Yt;break}catch(de){Xm(e,de)}while(!0);return t&&e.shellSuspendCounter++,kr=kl=null,jt=a,R.H=c,R.A=f,ut===null&&(zt=null,dt=0,Jo()),v}function Xv(){for(;ut!==null;)Jm(ut)}function Pv(e,t){var n=jt;jt|=2;var a=Zm(),c=Km();zt!==e||dt!==t?(_s=null,Ts=Ze()+500,pa(e,t)):ca=ke(e,t);e:do try{if(Et!==0&&ut!==null){t=ut;var f=In;t:switch(Et){case 1:Et=0,In=null,ma(e,t,f,1);break;case 2:case 9:if(up(f)){Et=0,In=null,eh(t);break}t=function(){Et!==2&&Et!==9||zt!==e||(Et=7),gr(e)},f.then(t,t);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:up(f)?(Et=0,In=null,eh(t)):(Et=0,In=null,ma(e,t,f,7));break;case 5:var v=null;switch(ut.tag){case 26:v=ut.memoizedState;case 5:case 27:var C=ut;if(v?Hh(v):C.stateNode.complete){Et=0,In=null;var H=C.sibling;if(H!==null)ut=H;else{var P=C.return;P!==null?(ut=P,Rs(P)):ut=null}break t}}Et=0,In=null,ma(e,t,f,5);break;case 6:Et=0,In=null,ma(e,t,f,6);break;case 8:wc(),Yt=6;break e;default:throw Error(o(462))}}Zv();break}catch(de){Xm(e,de)}while(!0);return kr=kl=null,R.H=a,R.A=c,jt=n,ut!==null?0:(zt=null,dt=0,Jo(),Yt)}function Zv(){for(;ut!==null&&!it();)Jm(ut)}function Jm(e){var t=Nm(e.alternate,e,zr);e.memoizedProps=e.pendingProps,t===null?Rs(e):ut=t}function eh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=xm(n,t,t.pendingProps,t.type,void 0,dt);break;case 11:t=xm(n,t,t.pendingProps,t.type.render,t.ref,dt);break;case 5:Bu(t);default:Cm(n,t),t=ut=Kf(t,zr),t=Nm(n,t,zr)}e.memoizedProps=e.pendingProps,t===null?Rs(e):ut=t}function ma(e,t,n,a){kr=kl=null,Bu(t),ra=null,Wa=0;var c=t.return;try{if(Hv(e,c,t,n,dt)){Yt=1,ws(e,Pn(n,e.current)),ut=null;return}}catch(f){if(c!==null)throw ut=c,f;Yt=1,ws(e,Pn(n,e.current)),ut=null;return}t.flags&32768?(mt||a===1?e=!0:ca||(dt&536870912)!==0?e=!1:(al=e=!0,(a===2||a===9||a===3||a===6)&&(a=zn.current,a!==null&&a.tag===13&&(a.flags|=16384))),th(t,e)):Rs(t)}function Rs(e){var t=e;do{if((t.flags&32768)!==0){th(t,al);return}e=t.return;var n=Gv(t.alternate,t,zr);if(n!==null){ut=n;return}if(t=t.sibling,t!==null){ut=t;return}ut=t=e}while(t!==null);Yt===0&&(Yt=5)}function th(e,t){do{var n=qv(e.alternate,e);if(n!==null){n.flags&=32767,ut=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ut=e;return}ut=e=n}while(e!==null);Yt=6,ut=null}function nh(e,t,n,a,c,f,v,C,H){e.cancelPendingCommit=null;do Ds();while(ln!==0);if((jt&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(f=t.lanes|t.childLanes,f|=cu,Ce(e,n,f,v,C,H),e===zt&&(ut=zt=null,dt=0),fa=t,il=e,Br=n,vc=f,yc=c,Fm=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ty($e,function(){return sh(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=R.T,R.T=null,c=F.p,F.p=2,v=jt,jt|=4;try{Wv(e,t,n)}finally{jt=v,F.p=c,R.T=a}}ln=1,rh(),lh(),ah()}}function rh(){if(ln===1){ln=0;var e=il,t=fa,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=R.T,R.T=null;var a=F.p;F.p=2;var c=jt;jt|=4;try{Bm(t,e);var f=Rc,v=qf(e.containerInfo),C=f.focusedElem,H=f.selectionRange;if(v!==C&&C&&C.ownerDocument&&Gf(C.ownerDocument.documentElement,C)){if(H!==null&&au(C)){var P=H.start,de=H.end;if(de===void 0&&(de=P),"selectionStart"in C)C.selectionStart=P,C.selectionEnd=Math.min(de,C.value.length);else{var ge=C.ownerDocument||document,K=ge&&ge.defaultView||window;if(K.getSelection){var se=K.getSelection(),Ee=C.textContent.length,Ge=Math.min(H.start,Ee),Rt=H.end===void 0?Ge:Math.min(H.end,Ee);!se.extend&&Ge>Rt&&(v=Rt,Rt=Ge,Ge=v);var Y=Uf(C,Ge),q=Uf(C,Rt);if(Y&&q&&(se.rangeCount!==1||se.anchorNode!==Y.node||se.anchorOffset!==Y.offset||se.focusNode!==q.node||se.focusOffset!==q.offset)){var X=ge.createRange();X.setStart(Y.node,Y.offset),se.removeAllRanges(),Ge>Rt?(se.addRange(X),se.extend(q.node,q.offset)):(X.setEnd(q.node,q.offset),se.addRange(X))}}}}for(ge=[],se=C;se=se.parentNode;)se.nodeType===1&&ge.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ge.length;C++){var me=ge[C];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Ys=!!Ac,Rc=Ac=null}finally{jt=c,F.p=a,R.T=n}}e.current=t,ln=2}}function lh(){if(ln===2){ln=0;var e=il,t=fa,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=R.T,R.T=null;var a=F.p;F.p=2;var c=jt;jt|=4;try{Lm(e,t.alternate,t)}finally{jt=c,F.p=a,R.T=n}}ln=3}}function ah(){if(ln===4||ln===3){ln=0,ht();var e=il,t=fa,n=Br,a=Fm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ln=5:(ln=0,fa=il=null,oh(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(sl=null),pt(n),t=t.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(Pe,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=R.T,c=F.p,F.p=2,R.T=null;try{for(var f=e.onRecoverableError,v=0;v<a.length;v++){var C=a[v];f(C.value,{componentStack:C.stack})}}finally{R.T=t,F.p=c}}(Br&3)!==0&&Ds(),gr(e),c=e.pendingLanes,(n&261930)!==0&&(c&42)!==0?e===bc?so++:(so=0,bc=e):so=0,io(0)}}function oh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ga(t)))}function Ds(){return rh(),lh(),ah(),sh()}function sh(){if(ln!==5)return!1;var e=il,t=vc;vc=0;var n=pt(Br),a=R.T,c=F.p;try{F.p=32>n?32:n,R.T=null,n=yc,yc=null;var f=il,v=Br;if(ln=0,fa=il=null,Br=0,(jt&6)!==0)throw Error(o(331));var C=jt;if(jt|=4,Gm(f.current),Hm(f,f.current,v,n),jt=C,io(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(Pe,f)}catch{}return!0}finally{F.p=c,R.T=a,oh(e,t)}}function ih(e,t,n){t=Pn(n,t),t=Ku(e.stateNode,t,2),e=tl(e,t,2),e!==null&&(ce(e,2),gr(e))}function Tt(e,t,n){if(e.tag===3)ih(e,e,n);else for(;t!==null;){if(t.tag===3){ih(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(sl===null||!sl.has(a))){e=Pn(n,e),n=um(2),a=tl(t,n,2),a!==null&&(cm(n,a,t,e),ce(a,2),gr(a));break}}t=t.return}}function Nc(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Yv;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(n)||(hc=!0,c.add(n),e=Kv.bind(null,e,t,n),t.then(e,e))}function Kv(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,zt===e&&(dt&n)===n&&(Yt===4||Yt===3&&(dt&62914560)===dt&&300>Ze()-Es?(jt&2)===0&&pa(e,0):gc|=n,da===dt&&(da=0)),gr(e)}function uh(e,t){t===0&&(t=V()),e=Nl(e,t),e!==null&&(ce(e,t),gr(e))}function Jv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),uh(e,n)}function ey(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(o(314))}a!==null&&a.delete(t),uh(e,n)}function ty(e,t){return Me(e,t)}var zs=null,ha=null,jc=!1,Bs=!1,Cc=!1,cl=0;function gr(e){e!==ha&&e.next===null&&(ha===null?zs=ha=e:ha=ha.next=e),Bs=!0,jc||(jc=!0,ry())}function io(e,t){if(!Cc&&Bs){Cc=!0;do for(var n=!1,a=zs;a!==null;){if(e!==0){var c=a.pendingLanes;if(c===0)var f=0;else{var v=a.suspendedLanes,C=a.pingedLanes;f=(1<<31-Gt(42|e)+1)-1,f&=c&~(v&~C),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(n=!0,ph(a,f))}else f=dt,f=$n(a,a===zt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(f&3)===0||ke(a,f)||(n=!0,ph(a,f));a=a.next}while(n);Cc=!1}}function ny(){ch()}function ch(){Bs=jc=!1;var e=0;cl!==0&&py()&&(e=cl);for(var t=Ze(),n=null,a=zs;a!==null;){var c=a.next,f=dh(a,t);f===0?(a.next=null,n===null?zs=c:n.next=c,c===null&&(ha=n)):(n=a,(e!==0||(f&3)!==0)&&(Bs=!0)),a=c}ln!==0&&ln!==5||io(e),cl!==0&&(cl=0)}function dh(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Gt(f),C=1<<v,H=c[v];H===-1?((C&n)===0||(C&a)!==0)&&(c[v]=ze(C,t)):H<=t&&(e.expiredLanes|=C),f&=~C}if(t=zt,n=dt,n=$n(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Et===2||Et===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Le(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||ke(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&Le(a),pt(n)){case 2:case 8:n=Ke;break;case 32:n=$e;break;case 268435456:n=Xe;break;default:n=$e}return a=fh.bind(null,e),n=Me(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&Le(a),e.callbackPriority=2,e.callbackNode=null,2}function fh(e,t){if(ln!==0&&ln!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ds()&&e.callbackNode!==n)return null;var a=dt;return a=$n(e,e===zt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Ym(e,a,t),dh(e,Ze()),e.callbackNode!=null&&e.callbackNode===n?fh.bind(null,e):null)}function ph(e,t){if(Ds())return null;Ym(e,t,!0)}function ry(){hy(function(){(jt&6)!==0?Me(Ae,ny):ch()})}function kc(){if(cl===0){var e=ea;e===0&&(e=bn,bn<<=1,(bn&261888)===0&&(bn=256)),cl=e}return cl}function mh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Fo(""+e)}function hh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function ly(e,t,n,a,c){if(t==="submit"&&n&&n.stateNode===c){var f=mh((c[Dt]||null).action),v=a.submitter;v&&(t=(t=v[Dt]||null)?mh(t.formAction):v.getAttribute("formAction"),t!==null&&(f=t,v=null));var C=new Xo("action","action",null,a,c);e.push({event:C,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(cl!==0){var H=v?hh(c,v):new FormData(c);$u(n,{pending:!0,data:H,method:c.method,action:f},null,H)}}else typeof f=="function"&&(C.preventDefault(),H=v?hh(c,v):new FormData(c),$u(n,{pending:!0,data:H,method:c.method,action:f},f,H))},currentTarget:c}]})}}for(var Mc=0;Mc<uu.length;Mc++){var Oc=uu[Mc],ay=Oc.toLowerCase(),oy=Oc[0].toUpperCase()+Oc.slice(1);ar(ay,"on"+oy)}ar($f,"onAnimationEnd"),ar(Yf,"onAnimationIteration"),ar(Qf,"onAnimationStart"),ar("dblclick","onDoubleClick"),ar("focusin","onFocus"),ar("focusout","onBlur"),ar(Sv,"onTransitionRun"),ar(Nv,"onTransitionStart"),ar(jv,"onTransitionCancel"),ar(Xf,"onTransitionEnd"),Yr("onMouseEnter",["mouseout","mouseover"]),Yr("onMouseLeave",["mouseout","mouseover"]),Yr("onPointerEnter",["pointerout","pointerover"]),Yr("onPointerLeave",["pointerout","pointerover"]),wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uo));function gh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var v=a.length-1;0<=v;v--){var C=a[v],H=C.instance,P=C.currentTarget;if(C=C.listener,H!==f&&c.isPropagationStopped())break e;f=C,c.currentTarget=P;try{f(c)}catch(de){Ko(de)}c.currentTarget=null,f=H}else for(v=0;v<a.length;v++){if(C=a[v],H=C.instance,P=C.currentTarget,C=C.listener,H!==f&&c.isPropagationStopped())break e;f=C,c.currentTarget=P;try{f(c)}catch(de){Ko(de)}c.currentTarget=null,f=H}}}}function ct(e,t){var n=t[wn];n===void 0&&(n=t[wn]=new Set);var a=e+"__bubble";n.has(a)||(xh(t,e,2,!1),n.add(a))}function Ec(e,t,n){var a=0;t&&(a|=4),xh(n,e,a,t)}var Is="_reactListening"+Math.random().toString(36).slice(2);function Tc(e){if(!e[Is]){e[Is]=!0,br.forEach(function(n){n!=="selectionchange"&&(sy.has(n)||Ec(n,!1,e),Ec(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Is]||(t[Is]=!0,Ec("selectionchange",!1,t))}}function xh(e,t,n,a){switch($h(t)){case 2:var c=Dy;break;case 8:c=zy;break;default:c=Fc}n=c.bind(null,t,n,e),c=void 0,!Pi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function _c(e,t,n,a,c){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var v=a.tag;if(v===3||v===4){var C=a.stateNode.containerInfo;if(C===c)break;if(v===4)for(v=a.return;v!==null;){var H=v.tag;if((H===3||H===4)&&v.stateNode.containerInfo===c)return;v=v.return}for(;C!==null;){if(v=un(C),v===null)return;if(H=v.tag,H===5||H===6||H===26||H===27){a=f=v;continue e}C=C.parentNode}}a=a.return}Sf(function(){var P=f,de=Qi(n),ge=[];e:{var K=Pf.get(e);if(K!==void 0){var se=Xo,Ee=e;switch(e){case"keypress":if(Yo(n)===0)break e;case"keydown":case"keyup":se=ev;break;case"focusin":Ee="focus",se=eu;break;case"focusout":Ee="blur",se=eu;break;case"beforeblur":case"afterblur":se=eu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Gx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=rv;break;case $f:case Yf:case Qf:se=Fx;break;case Xf:se=av;break;case"scroll":case"scrollend":se=Vx;break;case"wheel":se=sv;break;case"copy":case"cut":case"paste":se=Yx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Mf;break;case"toggle":case"beforetoggle":se=uv}var Ge=(t&4)!==0,Rt=!Ge&&(e==="scroll"||e==="scrollend"),Y=Ge?K!==null?K+"Capture":null:K;Ge=[];for(var q=P,X;q!==null;){var me=q;if(X=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||X===null||Y===null||(me=_a(q,Y),me!=null&&Ge.push(co(q,me,X))),Rt)break;q=q.return}0<Ge.length&&(K=new se(K,Ee,null,n,de),ge.push({event:K,listeners:Ge}))}}if((t&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",se=e==="mouseout"||e==="pointerout",K&&n!==Yi&&(Ee=n.relatedTarget||n.fromElement)&&(un(Ee)||Ee[qt]))break e;if((se||K)&&(K=de.window===de?de:(K=de.ownerDocument)?K.defaultView||K.parentWindow:window,se?(Ee=n.relatedTarget||n.toElement,se=P,Ee=Ee?un(Ee):null,Ee!==null&&(Rt=d(Ee),Ge=Ee.tag,Ee!==Rt||Ge!==5&&Ge!==27&&Ge!==6)&&(Ee=null)):(se=null,Ee=P),se!==Ee)){if(Ge=Cf,me="onMouseLeave",Y="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(Ge=Mf,me="onPointerLeave",Y="onPointerEnter",q="pointer"),Rt=se==null?K:yl(se),X=Ee==null?K:yl(Ee),K=new Ge(me,q+"leave",se,n,de),K.target=Rt,K.relatedTarget=X,me=null,un(de)===P&&(Ge=new Ge(Y,q+"enter",Ee,n,de),Ge.target=X,Ge.relatedTarget=Rt,me=Ge),Rt=me,se&&Ee)t:{for(Ge=iy,Y=se,q=Ee,X=0,me=Y;me;me=Ge(me))X++;me=0;for(var He=q;He;He=Ge(He))me++;for(;0<X-me;)Y=Ge(Y),X--;for(;0<me-X;)q=Ge(q),me--;for(;X--;){if(Y===q||q!==null&&Y===q.alternate){Ge=Y;break t}Y=Ge(Y),q=Ge(q)}Ge=null}else Ge=null;se!==null&&vh(ge,K,se,Ge,!1),Ee!==null&&Rt!==null&&vh(ge,Rt,Ee,Ge,!0)}}e:{if(K=P?yl(P):window,se=K.nodeName&&K.nodeName.toLowerCase(),se==="select"||se==="input"&&K.type==="file")var St=Df;else if(Af(K))if(zf)St=yv;else{St=xv;var De=gv}else se=K.nodeName,!se||se.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?P&&$i(P.elementType)&&(St=Df):St=vv;if(St&&(St=St(e,P))){Rf(ge,St,n,de);break e}De&&De(e,K,P),e==="focusout"&&P&&K.type==="number"&&P.memoizedProps.value!=null&&Fi(K,"number",K.value)}switch(De=P?yl(P):window,e){case"focusin":(Af(De)||De.contentEditable==="true")&&($l=De,ou=P,Ha=null);break;case"focusout":Ha=ou=$l=null;break;case"mousedown":su=!0;break;case"contextmenu":case"mouseup":case"dragend":su=!1,Wf(ge,n,de);break;case"selectionchange":if(wv)break;case"keydown":case"keyup":Wf(ge,n,de)}var ot;if(nu)e:{switch(e){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else Fl?_f(e,n)&&(ft="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ft="onCompositionStart");ft&&(Of&&n.locale!=="ko"&&(Fl||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Fl&&(ot=Nf()):(Qr=de,Zi="value"in Qr?Qr.value:Qr.textContent,Fl=!0)),De=Hs(P,ft),0<De.length&&(ft=new kf(ft,e,null,n,de),ge.push({event:ft,listeners:De}),ot?ft.data=ot:(ot=Lf(n),ot!==null&&(ft.data=ot)))),(ot=dv?fv(e,n):pv(e,n))&&(ft=Hs(P,"onBeforeInput"),0<ft.length&&(De=new kf("onBeforeInput","beforeinput",null,n,de),ge.push({event:De,listeners:ft}),De.data=ot)),ly(ge,e,P,n,de)}gh(ge,t)})}function co(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hs(e,t){for(var n=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=_a(e,n),c!=null&&a.unshift(co(e,c,f)),c=_a(e,t),c!=null&&a.push(co(e,c,f))),e.tag===3)return a;e=e.return}return[]}function iy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function vh(e,t,n,a,c){for(var f=t._reactName,v=[];n!==null&&n!==a;){var C=n,H=C.alternate,P=C.stateNode;if(C=C.tag,H!==null&&H===a)break;C!==5&&C!==26&&C!==27||P===null||(H=P,c?(P=_a(n,f),P!=null&&v.unshift(co(n,P,H))):c||(P=_a(n,f),P!=null&&v.push(co(n,P,H)))),n=n.return}v.length!==0&&e.push({event:t,listeners:v})}var uy=/\r\n?/g,cy=/\u0000|\uFFFD/g;function yh(e){return(typeof e=="string"?e:""+e).replace(uy,`
`).replace(cy,"")}function bh(e,t){return t=yh(t),yh(e)===t}function At(e,t,n,a,c,f){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Gl(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Gl(e,""+a);break;case"className":Ft(e,"class",a);break;case"tabIndex":Ft(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Ft(e,n,a);break;case"style":bf(e,a,f);break;case"data":if(t!=="object"){Ft(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Fo(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(n==="formAction"?(t!=="input"&&At(e,t,"name",c.name,c,null),At(e,t,"formEncType",c.formEncType,c,null),At(e,t,"formMethod",c.formMethod,c,null),At(e,t,"formTarget",c.formTarget,c,null)):(At(e,t,"encType",c.encType,c,null),At(e,t,"method",c.method,c,null),At(e,t,"target",c.target,c,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Fo(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Sr);break;case"onScroll":a!=null&&ct("scroll",e);break;case"onScrollEnd":a!=null&&ct("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=Fo(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":ct("beforetoggle",e),ct("toggle",e),Mt(e,"popover",a);break;case"xlinkActuate":at(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":at(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":at(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":at(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":at(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":at(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":at(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":at(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":at(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Mt(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Ix.get(n)||n,Mt(e,n,a))}}function Lc(e,t,n,a,c,f){switch(n){case"style":bf(e,a,f);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"children":typeof a=="string"?Gl(e,a):(typeof a=="number"||typeof a=="bigint")&&Gl(e,""+a);break;case"onScroll":a!=null&&ct("scroll",e);break;case"onScrollEnd":a!=null&&ct("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Go.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(c=n.endsWith("Capture"),t=n.slice(2,c?n.length-7:void 0),f=e[Dt]||null,f=f!=null?f[n]:null,typeof f=="function"&&e.removeEventListener(t,f,c),typeof a=="function")){typeof f!="function"&&f!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,c);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):Mt(e,n,a)}}}function pn(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",e),ct("load",e);var a=!1,c=!1,f;for(f in n)if(n.hasOwnProperty(f)){var v=n[f];if(v!=null)switch(f){case"src":a=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:At(e,t,f,v,n,null)}}c&&At(e,t,"srcSet",n.srcSet,n,null),a&&At(e,t,"src",n.src,n,null);return;case"input":ct("invalid",e);var C=f=v=c=null,H=null,P=null;for(a in n)if(n.hasOwnProperty(a)){var de=n[a];if(de!=null)switch(a){case"name":c=de;break;case"type":v=de;break;case"checked":H=de;break;case"defaultChecked":P=de;break;case"value":f=de;break;case"defaultValue":C=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(o(137,t));break;default:At(e,t,a,de,n,null)}}gf(e,f,C,H,P,v,c,!1);return;case"select":ct("invalid",e),a=v=f=null;for(c in n)if(n.hasOwnProperty(c)&&(C=n[c],C!=null))switch(c){case"value":f=C;break;case"defaultValue":v=C;break;case"multiple":a=C;default:At(e,t,c,C,n,null)}t=f,n=v,e.multiple=!!a,t!=null?Ul(e,!!a,t,!1):n!=null&&Ul(e,!!a,n,!0);return;case"textarea":ct("invalid",e),f=c=a=null;for(v in n)if(n.hasOwnProperty(v)&&(C=n[v],C!=null))switch(v){case"value":a=C;break;case"defaultValue":c=C;break;case"children":f=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:At(e,t,v,C,n,null)}vf(e,a,c,f);return;case"option":for(H in n)n.hasOwnProperty(H)&&(a=n[H],a!=null)&&(H==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":At(e,t,H,a,n,null));return;case"dialog":ct("beforetoggle",e),ct("toggle",e),ct("cancel",e),ct("close",e);break;case"iframe":case"object":ct("load",e);break;case"video":case"audio":for(a=0;a<uo.length;a++)ct(uo[a],e);break;case"image":ct("error",e),ct("load",e);break;case"details":ct("toggle",e);break;case"embed":case"source":case"link":ct("error",e),ct("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in n)if(n.hasOwnProperty(P)&&(a=n[P],a!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:At(e,t,P,a,n,null)}return;default:if($i(t)){for(de in n)n.hasOwnProperty(de)&&(a=n[de],a!==void 0&&Lc(e,t,de,a,n,void 0));return}}for(C in n)n.hasOwnProperty(C)&&(a=n[C],a!=null&&At(e,t,C,a,n,null))}function dy(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,v=null,C=null,H=null,P=null,de=null;for(se in n){var ge=n[se];if(n.hasOwnProperty(se)&&ge!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":H=ge;default:a.hasOwnProperty(se)||At(e,t,se,null,a,ge)}}for(var K in a){var se=a[K];if(ge=n[K],a.hasOwnProperty(K)&&(se!=null||ge!=null))switch(K){case"type":f=se;break;case"name":c=se;break;case"checked":P=se;break;case"defaultChecked":de=se;break;case"value":v=se;break;case"defaultValue":C=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(o(137,t));break;default:se!==ge&&At(e,t,K,se,a,ge)}}Wi(e,v,C,H,P,de,f,c);return;case"select":se=v=C=K=null;for(f in n)if(H=n[f],n.hasOwnProperty(f)&&H!=null)switch(f){case"value":break;case"multiple":se=H;default:a.hasOwnProperty(f)||At(e,t,f,null,a,H)}for(c in a)if(f=a[c],H=n[c],a.hasOwnProperty(c)&&(f!=null||H!=null))switch(c){case"value":K=f;break;case"defaultValue":C=f;break;case"multiple":v=f;default:f!==H&&At(e,t,c,f,a,H)}t=C,n=v,a=se,K!=null?Ul(e,!!n,K,!1):!!a!=!!n&&(t!=null?Ul(e,!!n,t,!0):Ul(e,!!n,n?[]:"",!1));return;case"textarea":se=K=null;for(C in n)if(c=n[C],n.hasOwnProperty(C)&&c!=null&&!a.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:At(e,t,C,null,a,c)}for(v in a)if(c=a[v],f=n[v],a.hasOwnProperty(v)&&(c!=null||f!=null))switch(v){case"value":K=c;break;case"defaultValue":se=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==f&&At(e,t,v,c,a,f)}xf(e,K,se);return;case"option":for(var Ee in n)K=n[Ee],n.hasOwnProperty(Ee)&&K!=null&&!a.hasOwnProperty(Ee)&&(Ee==="selected"?e.selected=!1:At(e,t,Ee,null,a,K));for(H in a)K=a[H],se=n[H],a.hasOwnProperty(H)&&K!==se&&(K!=null||se!=null)&&(H==="selected"?e.selected=K&&typeof K!="function"&&typeof K!="symbol":At(e,t,H,K,a,se));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in n)K=n[Ge],n.hasOwnProperty(Ge)&&K!=null&&!a.hasOwnProperty(Ge)&&At(e,t,Ge,null,a,K);for(P in a)if(K=a[P],se=n[P],a.hasOwnProperty(P)&&K!==se&&(K!=null||se!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,t));break;default:At(e,t,P,K,a,se)}return;default:if($i(t)){for(var Rt in n)K=n[Rt],n.hasOwnProperty(Rt)&&K!==void 0&&!a.hasOwnProperty(Rt)&&Lc(e,t,Rt,void 0,a,K);for(de in a)K=a[de],se=n[de],!a.hasOwnProperty(de)||K===se||K===void 0&&se===void 0||Lc(e,t,de,K,a,se);return}}for(var Y in n)K=n[Y],n.hasOwnProperty(Y)&&K!=null&&!a.hasOwnProperty(Y)&&At(e,t,Y,null,a,K);for(ge in a)K=a[ge],se=n[ge],!a.hasOwnProperty(ge)||K===se||K==null&&se==null||At(e,t,ge,K,a,se)}function wh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var c=n[a],f=c.transferSize,v=c.initiatorType,C=c.duration;if(f&&C&&wh(v)){for(v=0,C=c.responseEnd,a+=1;a<n.length;a++){var H=n[a],P=H.startTime;if(P>C)break;var de=H.transferSize,ge=H.initiatorType;de&&wh(ge)&&(H=H.responseEnd,v+=de*(H<C?1:(C-P)/(H-P)))}if(--a,t+=8*(f+v)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ac=null,Rc=null;function Vs(e){return e.nodeType===9?e:e.ownerDocument}function Sh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Dc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zc=null;function py(){var e=window.event;return e&&e.type==="popstate"?e===zc?!1:(zc=e,!0):(zc=null,!1)}var jh=typeof setTimeout=="function"?setTimeout:void 0,my=typeof clearTimeout=="function"?clearTimeout:void 0,Ch=typeof Promise=="function"?Promise:void 0,hy=typeof queueMicrotask=="function"?queueMicrotask:typeof Ch<"u"?function(e){return Ch.resolve(null).then(e).catch(gy)}:jh;function gy(e){setTimeout(function(){throw e})}function dl(e){return e==="head"}function kh(e,t){var n=t,a=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(c),ya(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")fo(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,fo(n);for(var f=n.firstChild;f;){var v=f.nextSibling,C=f.nodeName;f[Ht]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&f.rel.toLowerCase()==="stylesheet"||n.removeChild(f),f=v}}else n==="body"&&fo(e.ownerDocument.body);n=c}while(n);ya(t)}function Mh(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function Bc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Bc(n),an(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function xy(e,t,n,a){for(;e.nodeType===1;){var c=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Ht])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=tr(e.nextSibling),e===null)break}return null}function vy(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=tr(e.nextSibling),e===null))return null;return e}function Oh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=tr(e.nextSibling),e===null))return null;return e}function Ic(e){return e.data==="$?"||e.data==="$~"}function Hc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function yy(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Vc=null;function Eh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return tr(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Th(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function _h(e,t,n){switch(t=Vs(n),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function fo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);an(e)}var nr=new Map,Lh=new Set;function Us(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ir=F.d;F.d={f:by,r:wy,D:Sy,C:Ny,L:jy,m:Cy,X:My,S:ky,M:Oy};function by(){var e=Ir.f(),t=Ls();return e||t}function wy(e){var t=Yn(e);t!==null&&t.tag===5&&t.type==="form"?Xp(t):Ir.r(e)}var ga=typeof document>"u"?null:document;function Ah(e,t,n){var a=ga;if(a&&typeof t=="string"&&t){var c=Qn(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof n=="string"&&(c+='[crossorigin="'+n+'"]'),Lh.has(c)||(Lh.add(c),e={rel:e,crossOrigin:n,href:t},a.querySelector(c)===null&&(t=a.createElement("link"),pn(t,"link",e),Kt(t),a.head.appendChild(t)))}}function Sy(e){Ir.D(e),Ah("dns-prefetch",e,null)}function Ny(e,t){Ir.C(e,t),Ah("preconnect",e,t)}function jy(e,t,n){Ir.L(e,t,n);var a=ga;if(a&&e&&t){var c='link[rel="preload"][as="'+Qn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(c+='[imagesrcset="'+Qn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(c+='[imagesizes="'+Qn(n.imageSizes)+'"]')):c+='[href="'+Qn(e)+'"]';var f=c;switch(t){case"style":f=xa(e);break;case"script":f=va(e)}nr.has(f)||(e=y({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),nr.set(f,e),a.querySelector(c)!==null||t==="style"&&a.querySelector(po(f))||t==="script"&&a.querySelector(mo(f))||(t=a.createElement("link"),pn(t,"link",e),Kt(t),a.head.appendChild(t)))}}function Cy(e,t){Ir.m(e,t);var n=ga;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Qn(a)+'"][href="'+Qn(e)+'"]',f=c;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=va(e)}if(!nr.has(f)&&(e=y({rel:"modulepreload",href:e},t),nr.set(f,e),n.querySelector(c)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(mo(f)))return}a=n.createElement("link"),pn(a,"link",e),Kt(a),n.head.appendChild(a)}}}function ky(e,t,n){Ir.S(e,t,n);var a=ga;if(a&&e){var c=$r(a).hoistableStyles,f=xa(e);t=t||"default";var v=c.get(f);if(!v){var C={loading:0,preload:null};if(v=a.querySelector(po(f)))C.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},n),(n=nr.get(f))&&Uc(e,n);var H=v=a.createElement("link");Kt(H),pn(H,"link",e),H._p=new Promise(function(P,de){H.onload=P,H.onerror=de}),H.addEventListener("load",function(){C.loading|=1}),H.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Gs(v,t,a)}v={type:"stylesheet",instance:v,count:1,state:C},c.set(f,v)}}}function My(e,t){Ir.X(e,t);var n=ga;if(n&&e){var a=$r(n).hoistableScripts,c=va(e),f=a.get(c);f||(f=n.querySelector(mo(c)),f||(e=y({src:e,async:!0},t),(t=nr.get(c))&&Gc(e,t),f=n.createElement("script"),Kt(f),pn(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(c,f))}}function Oy(e,t){Ir.M(e,t);var n=ga;if(n&&e){var a=$r(n).hoistableScripts,c=va(e),f=a.get(c);f||(f=n.querySelector(mo(c)),f||(e=y({src:e,async:!0,type:"module"},t),(t=nr.get(c))&&Gc(e,t),f=n.createElement("script"),Kt(f),pn(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(c,f))}}function Rh(e,t,n,a){var c=(c=fe.current)?Us(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=xa(n.href),n=$r(c).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=xa(n.href);var f=$r(c).hoistableStyles,v=f.get(e);if(v||(c=c.ownerDocument||c,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=c.querySelector(po(e)))&&!f._p&&(v.instance=f,v.state.loading=5),nr.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},nr.set(e,n),f||Ey(c,e,n,v.state))),t&&a===null)throw Error(o(528,""));return v}if(t&&a!==null)throw Error(o(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=va(n),n=$r(c).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function xa(e){return'href="'+Qn(e)+'"'}function po(e){return'link[rel="stylesheet"]['+e+"]"}function Dh(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function Ey(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),pn(t,"link",n),Kt(t),e.head.appendChild(t))}function va(e){return'[src="'+Qn(e)+'"]'}function mo(e){return"script[async]"+e}function zh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Qn(n.href)+'"]');if(a)return t.instance=a,Kt(a),a;var c=y({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Kt(a),pn(a,"style",c),Gs(a,n.precedence,e),t.instance=a;case"stylesheet":c=xa(n.href);var f=e.querySelector(po(c));if(f)return t.state.loading|=4,t.instance=f,Kt(f),f;a=Dh(n),(c=nr.get(c))&&Uc(a,c),f=(e.ownerDocument||e).createElement("link"),Kt(f);var v=f;return v._p=new Promise(function(C,H){v.onload=C,v.onerror=H}),pn(f,"link",a),t.state.loading|=4,Gs(f,n.precedence,e),t.instance=f;case"script":return f=va(n.src),(c=e.querySelector(mo(f)))?(t.instance=c,Kt(c),c):(a=n,(c=nr.get(f))&&(a=y({},n),Gc(a,c)),e=e.ownerDocument||e,c=e.createElement("script"),Kt(c),pn(c,"link",a),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Gs(a,n.precedence,e));return t.instance}function Gs(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=a.length?a[a.length-1]:null,f=c,v=0;v<a.length;v++){var C=a[v];if(C.dataset.precedence===t)f=C;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Uc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Gc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var qs=null;function Bh(e,t,n){if(qs===null){var a=new Map,c=qs=new Map;c.set(n,a)}else c=qs,a=c.get(n),a||(a=new Map,c.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),c=0;c<n.length;c++){var f=n[c];if(!(f[Ht]||f[xt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(t)||"";v=e+v;var C=a.get(v);C?C.push(f):a.set(v,[f])}}return a}function Ih(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Ty(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Hh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function _y(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=xa(a.href),f=t.querySelector(po(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ws.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=f,Kt(f);return}f=t.ownerDocument||t,a=Dh(a),(c=nr.get(c))&&Uc(a,c),f=f.createElement("link"),Kt(f);var v=f;v._p=new Promise(function(C,H){v.onload=C,v.onerror=H}),pn(f,"link",a),n.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Ws.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var qc=0;function Ly(e,t){return e.stylesheets&&e.count===0&&$s(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&$s(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&qc===0&&(qc=62500*fy());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&$s(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>qc?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(c)}}:null}function Ws(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$s(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fs=null;function $s(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fs=new Map,t.forEach(Ay,e),Fs=null,Ws.call(e))}function Ay(e,t){if(!(t.state.loading&4)){var n=Fs.get(e);if(n)var a=n.get(null);else{n=new Map,Fs.set(e,n);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var v=c[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(n.set(v.dataset.precedence,v),a=v)}a&&n.set(null,a)}c=t.instance,v=c.getAttribute("data-precedence"),f=n.get(v)||a,f===a&&n.set(null,c),n.set(v,c),this.count++,a=Ws.bind(this),c.addEventListener("load",a),c.addEventListener("error",a),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var ho={$$typeof:D,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function Ry(e,t,n,a,c,f,v,C,H){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ue(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ue(0),this.hiddenUpdates=ue(null),this.identifierPrefix=a,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function Vh(e,t,n,a,c,f,v,C,H,P,de,ge){return e=new Ry(e,t,n,v,H,P,de,ge,C),t=1,f===!0&&(t|=24),f=Dn(3,null,null,t),e.current=f,f.stateNode=e,t=Su(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:a,isDehydrated:n,cache:t},ku(f),e}function Uh(e){return e?(e=Xl,e):Xl}function Gh(e,t,n,a,c,f){c=Uh(c),a.context===null?a.context=c:a.pendingContext=c,a=el(t),a.payload={element:n},f=f===void 0?null:f,f!==null&&(a.callback=f),n=tl(e,a,t),n!==null&&(Tn(n,e,t),$a(n,e,t))}function qh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Wc(e,t){qh(e,t),(e=e.alternate)&&qh(e,t)}function Wh(e){if(e.tag===13||e.tag===31){var t=Nl(e,67108864);t!==null&&Tn(t,e,67108864),Wc(e,67108864)}}function Fh(e){if(e.tag===13||e.tag===31){var t=Vn();t=st(t);var n=Nl(e,t);n!==null&&Tn(n,e,t),Wc(e,t)}}var Ys=!0;function Dy(e,t,n,a){var c=R.T;R.T=null;var f=F.p;try{F.p=2,Fc(e,t,n,a)}finally{F.p=f,R.T=c}}function zy(e,t,n,a){var c=R.T;R.T=null;var f=F.p;try{F.p=8,Fc(e,t,n,a)}finally{F.p=f,R.T=c}}function Fc(e,t,n,a){if(Ys){var c=$c(a);if(c===null)_c(e,t,a,Qs,n),Yh(e,a);else if(Iy(c,e,t,n,a))a.stopPropagation();else if(Yh(e,a),t&4&&-1<By.indexOf(e)){for(;c!==null;){var f=Yn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=gn(f.pendingLanes);if(v!==0){var C=f;for(C.pendingLanes|=2,C.entangledLanes|=2;v;){var H=1<<31-Gt(v);C.entanglements[1]|=H,v&=~H}gr(f),(jt&6)===0&&(Ts=Ze()+500,io(0))}}break;case 31:case 13:C=Nl(f,2),C!==null&&Tn(C,f,2),Ls(),Wc(f,2)}if(f=$c(a),f===null&&_c(e,t,a,Qs,n),f===c)break;c=f}c!==null&&a.stopPropagation()}else _c(e,t,a,null,n)}}function $c(e){return e=Qi(e),Yc(e)}var Qs=null;function Yc(e){if(Qs=null,e=un(e),e!==null){var t=d(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=p(t),e!==null)return e;e=null}else if(n===31){if(e=h(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Qs=e,null}function $h(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case Ae:return 2;case Ke:return 8;case $e:case Qe:return 32;case Xe:return 268435456;default:return 32}default:return 32}}var Qc=!1,fl=null,pl=null,ml=null,go=new Map,xo=new Map,hl=[],By="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yh(e,t){switch(e){case"focusin":case"focusout":fl=null;break;case"dragenter":case"dragleave":pl=null;break;case"mouseover":case"mouseout":ml=null;break;case"pointerover":case"pointerout":go.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xo.delete(t.pointerId)}}function vo(e,t,n,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},t!==null&&(t=Yn(t),t!==null&&Wh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Iy(e,t,n,a,c){switch(t){case"focusin":return fl=vo(fl,e,t,n,a,c),!0;case"dragenter":return pl=vo(pl,e,t,n,a,c),!0;case"mouseover":return ml=vo(ml,e,t,n,a,c),!0;case"pointerover":var f=c.pointerId;return go.set(f,vo(go.get(f)||null,e,t,n,a,c)),!0;case"gotpointercapture":return f=c.pointerId,xo.set(f,vo(xo.get(f)||null,e,t,n,a,c)),!0}return!1}function Qh(e){var t=un(e.target);if(t!==null){var n=d(t);if(n!==null){if(t=n.tag,t===13){if(t=p(n),t!==null){e.blockedOn=t,bt(e.priority,function(){Fh(n)});return}}else if(t===31){if(t=h(n),t!==null){e.blockedOn=t,bt(e.priority,function(){Fh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=$c(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Yi=a,n.target.dispatchEvent(a),Yi=null}else return t=Yn(n),t!==null&&Wh(t),e.blockedOn=n,!1;t.shift()}return!0}function Xh(e,t,n){Xs(e)&&n.delete(t)}function Hy(){Qc=!1,fl!==null&&Xs(fl)&&(fl=null),pl!==null&&Xs(pl)&&(pl=null),ml!==null&&Xs(ml)&&(ml=null),go.forEach(Xh),xo.forEach(Xh)}function Ps(e,t){e.blockedOn===t&&(e.blockedOn=null,Qc||(Qc=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Hy)))}var Zs=null;function Ph(e){Zs!==e&&(Zs=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Zs===e&&(Zs=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],c=e[t+2];if(typeof a!="function"){if(Yc(a||n)===null)continue;break}var f=Yn(n);f!==null&&(e.splice(t,3),t-=3,$u(f,{pending:!0,data:c,method:n.method,action:a},a,c))}}))}function ya(e){function t(H){return Ps(H,e)}fl!==null&&Ps(fl,e),pl!==null&&Ps(pl,e),ml!==null&&Ps(ml,e),go.forEach(t),xo.forEach(t);for(var n=0;n<hl.length;n++){var a=hl[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<hl.length&&(n=hl[0],n.blockedOn===null);)Qh(n),n.blockedOn===null&&hl.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var c=n[a],f=n[a+1],v=c[Dt]||null;if(typeof f=="function")v||Ph(n);else if(v){var C=null;if(f&&f.hasAttribute("formAction")){if(c=f,v=f[Dt]||null)C=v.formAction;else if(Yc(c)!==null)continue}else C=v.action;typeof C=="function"?n[a+1]=C:(n.splice(a,3),a-=3),Ph(n)}}}function Zh(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return c=v})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Xc(e){this._internalRoot=e}Ks.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var n=t.current,a=Vn();Gh(n,a,e,t,null,null)},Ks.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gh(e.current,2,null,e,null,null),Ls(),t[qt]=null}};function Ks(e){this._internalRoot=e}Ks.prototype.unstable_scheduleHydration=function(e){if(e){var t=yt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<hl.length&&t!==0&&t<hl[n].priority;n++);hl.splice(n,0,e),n===0&&Qh(e)}};var Kh=l.version;if(Kh!=="19.2.3")throw Error(o(527,Kh,"19.2.3"));F.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Vy={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Js=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Js.isDisabled&&Js.supportsFiber)try{Pe=Js.inject(Vy),et=Js}catch{}}return bo.createRoot=function(e,t){if(!i(e))throw Error(o(299));var n=!1,a="",c=am,f=om,v=sm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=Vh(e,1,!1,null,null,n,a,null,c,f,v,Zh),e[qt]=t.current,Tc(e),new Xc(t)},bo.hydrateRoot=function(e,t,n){if(!i(e))throw Error(o(299));var a=!1,c="",f=am,v=om,C=sm,H=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(v=n.onCaughtError),n.onRecoverableError!==void 0&&(C=n.onRecoverableError),n.formState!==void 0&&(H=n.formState)),t=Vh(e,1,!0,t,n??null,a,c,H,f,v,C,Zh),t.context=Uh(null),n=t.current,a=Vn(),a=st(a),c=el(a),c.callback=null,tl(n,c,a),n=a,t.current.lanes=n,ce(t,n),gr(t),e[qt]=t.current,Tc(e),new Ks(t)},bo.version="19.2.3",bo}var ug;function Zy(){if(ug)return Kc.exports;ug=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),Kc.exports=Py(),Kc.exports}var Ky=Zy();const cg=r=>{let l;const s=new Set,o=(g,x)=>{const y=typeof g=="function"?g(l):g;if(!Object.is(y,l)){const N=l;l=x??(typeof y!="object"||y===null)?y:Object.assign({},l,y),s.forEach(k=>k(l,N))}},i=()=>l,h={setState:o,getState:i,getInitialState:()=>m,subscribe:g=>(s.add(g),()=>s.delete(g))},m=l=r(o,i,h);return h},Jy=(r=>r?cg(r):cg),e1=r=>r;function t1(r,l=e1){const s=Sa.useSyncExternalStore(r.subscribe,Sa.useCallback(()=>l(r.getState()),[r,l]),Sa.useCallback(()=>l(r.getInitialState()),[r,l]));return Sa.useDebugValue(s),s}const dg=r=>{const l=Jy(r),s=o=>t1(l,o);return Object.assign(s,l),s},lr=(r=>r?dg(r):dg);function qr(r,l){let s;try{s=r()}catch{return}return{getItem:i=>{var d;const p=m=>m===null?null:JSON.parse(m,void 0),h=(d=s.getItem(i))!=null?d:null;return h instanceof Promise?h.then(p):p(h)},setItem:(i,d)=>s.setItem(i,JSON.stringify(d,void 0)),removeItem:i=>s.removeItem(i)}}const wd=r=>l=>{try{const s=r(l);return s instanceof Promise?s:{then(o){return wd(o)(s)},catch(o){return this}}}catch(s){return{then(o){return this},catch(o){return wd(o)(s)}}}},n1=(r,l)=>(s,o,i)=>{let d={storage:qr(()=>localStorage),partialize:w=>w,version:0,merge:(w,M)=>({...M,...w}),...l},p=!1;const h=new Set,m=new Set;let g=d.storage;if(!g)return r((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),s(...w)},o,i);const x=()=>{const w=d.partialize({...o()});return g.setItem(d.name,{state:w,version:d.version})},y=i.setState;i.setState=(w,M)=>(y(w,M),x());const N=r((...w)=>(s(...w),x()),o,i);i.getInitialState=()=>N;let k;const S=()=>{var w,M;if(!g)return;p=!1,h.forEach(O=>{var D;return O((D=o())!=null?D:N)});const j=((M=d.onRehydrateStorage)==null?void 0:M.call(d,(w=o())!=null?w:N))||void 0;return wd(g.getItem.bind(g))(d.name).then(O=>{if(O)if(typeof O.version=="number"&&O.version!==d.version){if(d.migrate){const D=d.migrate(O.state,O.version);return D instanceof Promise?D.then(z=>[!0,z]):[!0,D]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,O.state];return[!1,void 0]}).then(O=>{var D;const[z,_]=O;if(k=d.merge(_,(D=o())!=null?D:N),s(k,!0),z)return x()}).then(()=>{j?.(k,void 0),k=o(),p=!0,m.forEach(O=>O(k))}).catch(O=>{j?.(void 0,O)})};return i.persist={setOptions:w=>{d={...d,...w},w.storage&&(g=w.storage)},clearStorage:()=>{g?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>S(),hasHydrated:()=>p,onHydrate:w=>(h.add(w),()=>{h.delete(w)}),onFinishHydration:w=>(m.add(w),()=>{m.delete(w)})},d.skipHydration||S(),k||N},Wr=n1,Un=lr()(r=>({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0},setViewerState:l=>{r(s=>{const o={viewerOpen:l.viewerOpen??s.viewerOpen,viewerImages:l.viewerImages??s.viewerImages,viewerIndex:l.viewerIndex??s.viewerIndex,viewerScale:l.viewerScale??s.viewerScale,viewerTranslate:l.viewerTranslate??s.viewerTranslate};return o.viewerOpen===s.viewerOpen&&o.viewerIndex===s.viewerIndex&&o.viewerScale===s.viewerScale&&o.viewerTranslate.x===s.viewerTranslate.x&&o.viewerTranslate.y===s.viewerTranslate.y&&o.viewerImages===s.viewerImages?s:{...s,...o}})}})),Zt=lr()(Wr(r=>({error:null,nodeErrors:{},errorCycleIndex:0,errorsDismissed:!1,setError:l=>{r({error:l})},setNodeErrors:l=>{r({nodeErrors:l,errorCycleIndex:0,errorsDismissed:!1})},clearNodeErrors:()=>{r({nodeErrors:{},errorCycleIndex:0,errorsDismissed:!1})},clearNodeError:l=>{r(s=>{const o={...s.nodeErrors};return delete o[String(l)],{nodeErrors:o}})},setErrorCycleIndex:l=>{r({errorCycleIndex:l})},setErrorsDismissed:l=>{r({errorsDismissed:l})}}),{name:"workflow-errors-storage",storage:qr(()=>localStorage),partialize:r=>({error:r.error,nodeErrors:r.nodeErrors,errorCycleIndex:r.errorCycleIndex,errorsDismissed:r.errorsDismissed}),onRehydrateStorage:()=>r=>{if(!r)return;const l=Object.values(r.nodeErrors||{}).reduce((s,o)=>s+o.length,0);l>0&&!r.error&&r.setError(`Workflow load error: ${l} input${l===1?"":"s"} reference missing options.`),l>0&&r.setErrorCycleIndex(0)}}));function x0(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}function r1(r){if(!(!String(r.type||"").startsWith("Primitive")&&r.type!=="PrimitiveNode")){if(Array.isArray(r.widgets_values))return r.widgets_values[0];if(x0(r.widgets_values)){const s=r.widgets_values.value;return s!==void 0?s:r.widgets_values[0]}}}function ko(r,l,s){const o=r.widgets_values;if(Array.isArray(o))return s===void 0||s<0||s>=o.length?void 0:o[s];if(x0(o)){if(o[l]!==void 0)return o[l];if(r.type==="VHS_VideoCombine"&&l==="save_image"&&o.save_output!==void 0)return o.save_output}}function qd(r,l){const s=r.widget_idx_map?.[String(l)];return s||(r.extra?.widget_idx_map?.[String(l)]??null)}function Li(r){if(Array.isArray(r))return!0;const l=String(r).toUpperCase();return l==="INT"||l==="FLOAT"||l==="BOOLEAN"||l==="STRING"}function Wd(r,l,s){if(Array.isArray(l)){if(s?.comboIndexToValue&&typeof r=="number"&&Number.isFinite(r)){const o=Math.trunc(r);return l[o]??r}return r}if(l==="INT"&&typeof r=="string"&&r.trim()!==""&&!Number.isNaN(Number(r)))return Math.trunc(Number(r));if(l==="FLOAT"&&typeof r=="string"&&r.trim()!==""&&!Number.isNaN(Number(r)))return Number(r);if(l==="BOOLEAN"&&typeof r=="string"){if(r.toLowerCase()==="true")return!0;if(r.toLowerCase()==="false")return!1}return r}function l1(r,l,s){if(l.length===0)return r;const o=Wd(r,l,{comboIndexToValue:!0}),i=String(o),d=i.split(/[\\/]/).pop()??i,p=l.find(m=>String(m)===i);if(p!==void 0)return p;const h=l.find(m=>String(m)===d);return h!==void 0?h:s!==void 0&&l.some(m=>String(m)===String(s))?s:l[0]}function v0(r,l){const s=r.links.find(p=>p[0]===l);if(!s)return null;const o=s[1],i=s[2],d=r.nodes.find(p=>p.id===o);if(!d)return null;if(d.mode===4||d.type==="Reroute"){const p=d.outputs[i];if(!p)return null;const h=d.inputs.find(m=>{if(m.link===null)return!1;const g=String(m.type).toUpperCase(),x=String(p.type).toUpperCase();return g===x||g==="*"||x==="*"});return h?.link!=null?v0(r,h.link):null}return{nodeId:o,slotIndex:i}}function a1(r,l,s,o,i,d,p){const h={};for(const S of s.inputs)if(S.link!=null){const w=v0(r,S.link);if(w)if(i.has(w.nodeId))h[S.name]=[String(w.nodeId),w.slotIndex];else{const M=r.nodes.find(j=>j.id===w.nodeId);if(M){const j=r1(M);j!==void 0?h[S.name]=j:console.warn(`[workflowInputs] Missing source node for input '${S.name}' on node ${s.id} (${s.type}).`,{sourceNodeId:w.nodeId,sourceNodeType:M.type,sourceAllowed:!1})}}}const m=l[o];if(!m?.input)return h;const g=m.input_order?.required||Object.keys(m.input.required||{}),x=m.input_order?.optional||Object.keys(m.input.optional||{}),y=[...g,...x];let N=0;const k=Array.isArray(s.widgets_values)?s.widgets_values:null;for(const S of y)try{const w=m.input.required?.[S]||m.input.optional?.[S];if(!w)continue;const[M]=w,j=s.inputs.find(G=>G.name===S),O=j?.link!=null,D=!!j?.widget&&!O,z=!!j,_=w[1]?.default,A=Object.prototype.hasOwnProperty.call(w[1]??{},"default");if(Li(M)||D||!z){let G=d?.[S];if(G===void 0&&(G=N),S==="seed"&&p?.[s.id]!==void 0&&!(S in h))h[S]=p[s.id];else if(G!==void 0&&!O&&!(S in h)){const U=ko(s,S,G);U!==void 0&&(Array.isArray(M)?h[S]=l1(U,M,_):h[S]=Wd(U,M))}else!O&&A&&!(S in h)&&(h[S]=_);G!==void 0&&(N=Math.max(N,G+1)),String(M)==="INT"&&(S==="seed"||S==="noise_seed")&&(G!==void 0?N=Math.max(N,G+2):N=Math.max(N,N+1))}}catch(w){console.error(`Error processing input '${S}' for node ${s.id} (${s.type}):`,w)}if(d)for(const[S,w]of Object.entries(d)){if(!(S in h)&&k&&w<k.length){const M=k[w];M!=null&&(h[S]=M)}if(!(S in h)&&!k){const M=ko(s,S,w);M!=null&&(h[S]=M)}}return(o==="Power Lora Loader (rgthree)"||s.type==="Power Lora Loader (rgthree)")&&k&&k.forEach((S,w)=>{if(typeof S=="object"&&S!==null&&"lora"in S&&!(Object.values(d||{}).some(j=>j===w)||d===null&&w<N)){const j=`lora_${w}`;j in h||(h[j]=S)}}),p?.[s.id]!==void 0&&!("seed"in h)&&!("noise_seed"in h)&&(h.seed=p[s.id]),h}const Bt="";function o1(){const r="comfyui-mobile-client-id";let l=localStorage.getItem(r);return l||(l="mobile-"+Math.random().toString(36).substring(2,15),localStorage.setItem(r,l)),l}const y0=o1();async function b0(){const r=await fetch(`${Bt}/api/object_info`);if(!r.ok)throw new Error("Failed to fetch node types");return r.json()}async function s1(){const r=await fetch(`${Bt}/api/queue`);if(!r.ok)throw new Error("Failed to fetch queue");return r.json()}async function i1(r){const l=`${Bt}/api/history?max_items=${r}`,s=await fetch(l);if(!s.ok)throw new Error("Failed to fetch history");return s.json()}async function u1(){const r=await fetch(`${Bt}/api/v2/userdata?path=workflows`);if(!r.ok){if(r.status===404)return[];throw new Error("Failed to list user workflows")}return(await r.json()).filter(s=>s.type==="file"&&s.name.endsWith(".json"))}function w0(r){return encodeURIComponent(r)}async function S0(r){const l=await fetch(`${Bt}/api/userdata/${w0("workflows/"+r)}`);if(!l.ok)throw new Error("Failed to load workflow");return l.json()}async function c1(r,l){if(!(await fetch(`${Bt}/api/userdata/${w0("workflows/"+r)}?overwrite=true`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)throw new Error("Failed to save workflow")}async function d1(){const r=await fetch(`${Bt}/api/workflow_templates`);if(!r.ok)throw new Error("Failed to fetch templates");return r.json()}async function N0(r,l){const s=await fetch(`${Bt}/api/workflow_templates/${encodeURIComponent(r)}/${encodeURIComponent(l)}`);if(!s.ok)throw new Error("Failed to load template");return s.json()}async function f1(){await fetch(`${Bt}/api/interrupt`,{method:"POST"})}async function p1(){await fetch(`${Bt}/api/queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clear:!0})})}async function m1(r){await fetch(`${Bt}/api/queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:[r]})})}async function j0(r,l){const s=new FormData;s.append("image",r),l?.type&&s.append("type",l.type),l?.subfolder&&s.append("subfolder",l.subfolder),l?.overwrite!==void 0&&s.append("overwrite",l.overwrite?"true":"false");const o=await fetch(`${Bt}/upload/image`,{method:"POST",body:s});if(!o.ok)throw new Error("Failed to upload image");return o.json()}async function h1(r){await fetch(`${Bt}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:[r]})})}async function fg(r){r.length!==0&&await fetch(`${Bt}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:r})})}async function g1(){await fetch(`${Bt}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clear:!0})})}function qn(r,l,s){return`${Bt}/view?filename=${encodeURIComponent(r)}&subfolder=${encodeURIComponent(l)}&type=${encodeURIComponent(s)}`}function x1(r,l,s,o,i){const p=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws?clientId=${r}`,h=new WebSocket(p);return h.onopen=()=>{s?.()},h.onmessage=m=>{try{const g=JSON.parse(m.data);l(g)}catch(g){console.error("[WS] Failed to parse message:",g)}},h.onclose=()=>{o?.()},h.onerror=m=>{console.error("[WS] Error:",m),i?.(m)},h}async function Sd(r="",l=!1,s="output"){const o=new URLSearchParams;r&&o.set("path",r),l&&o.set("recursive","true"),s&&o.set("source",s);const i=await fetch(`${Bt}/mobile/api/files?${o}`);if(!i.ok)throw new Error("Failed to fetch files");return i.json()}async function v1(){const r=await Sd("",!1,"output"),l=await Sd("",!1,"input"),s=r.files.filter(i=>i.type==="dir").map(i=>i.name);return{input:l.files.filter(i=>i.type==="dir").map(i=>i.name),output:s}}async function Nd(r,l=1e3,s=0,o="modified",i=!1,d=null){return(await Sd(d||"",i,r)).files.map(h=>{if(h.type==="dir")return{id:`${r}/${h.path}`,name:h.name,type:"folder",date:h.date,size:h.size};const m=h.folder||(h.path.includes("/")?h.path.substring(0,h.path.lastIndexOf("/")):"");return{id:`${r}/${h.path}`,name:h.name,type:h.type,previewUrl:`${Bt}/mobile/api/thumbnail?filename=${encodeURIComponent(h.name)}&subfolder=${encodeURIComponent(m)}&source=${r}`,fullUrl:`${Bt}/view?filename=${encodeURIComponent(h.name)}&type=${r}&subfolder=${encodeURIComponent(m)}`,date:h.date,size:h.size}})}async function jd(r,l="output"){const s=await fetch(`${Bt}/mobile/api/files`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:r,source:l})});if(!s.ok){const o=await s.json();throw new Error(o.error||"Failed to delete file")}}async function y1(r,l="output"){const s=new URLSearchParams({path:r,source:l}),o=await fetch(`${Bt}/mobile/api/file-metadata?${s.toString()}`);if(!o.ok){const d=await o.json().catch(()=>({}));throw new Error(d.error||"Failed to load file metadata")}const i=await o.json();if(!i.workflow)throw new Error("No workflow metadata found");return i.workflow}async function b1(r,l="output"){const s=new URLSearchParams({path:r,source:l}),o=await fetch(`${Bt}/mobile/api/image-metadata?${s.toString()}`);if(!o.ok){const i=await o.json().catch(()=>({}));throw new Error(i.error||"Failed to load image metadata")}return o.json()}async function w1(r,l,s="output"){const o=await fetch(`${Bt}/mobile/api/files/move`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sources:r,destination:l??"",source:s})});if(!o.ok){const i=await o.json().catch(()=>({}));throw new Error(i.error||"Failed to move files")}}async function S1(r,l="output"){const s=await fetch(`${Bt}/mobile/api/files/mkdir`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:r,source:l})});if(!s.ok){const o=await s.json().catch(()=>({}));throw new Error(o.error||"Failed to create folder")}}const rt=lr()(Wr((r,l)=>({running:[],pending:[],isLoading:!1,lastExecutedId:null,queueItemExpanded:{},queueItemUserToggled:{},queueItemHideImages:{},showQueueMetadata:!1,previewVisibility:{},previewVisibilityDefault:!1,fetchQueue:async()=>{const{running:s}=l();r({isLoading:!0});try{const o=await s1(),i=o.queue_running.map(p=>({number:p[0],prompt_id:p[1],prompt:p[2],extra:p[3],outputs_to_execute:p[4]})),d=o.queue_pending.map(p=>({number:p[0],prompt_id:p[1],prompt:p[2],extra:p[3],outputs_to_execute:p[4]}));s.length>0&&i.length===0&&(r({lastExecutedId:s[0].prompt_id}),setTimeout(()=>r({lastExecutedId:null}),100)),r({running:i,pending:d})}catch(o){console.error("Failed to fetch queue:",o)}finally{r({isLoading:!1})}},clearQueue:async()=>{try{await p1(),r({pending:[]})}catch(s){console.error("Failed to clear queue:",s)}},deleteItem:async s=>{try{await m1(s),r(o=>({pending:o.pending.filter(i=>i.prompt_id!==s)}))}catch(o){console.error("Failed to delete queue item:",o)}},interrupt:async()=>{try{await f1()}catch(s){console.error("Failed to interrupt execution:",s)}},updateFromStatus:s=>{const{pending:o}=l();s!==o.length&&l().fetchQueue()},setQueueItemExpanded:(s,o)=>{r(i=>({queueItemExpanded:{...i.queueItemExpanded,[s]:o}}))},setQueueItemUserToggled:(s,o)=>{r(i=>({queueItemUserToggled:{...i.queueItemUserToggled,[s]:o}}))},setQueueItemHideImages:(s,o)=>{r(i=>({queueItemHideImages:{...i.queueItemHideImages,[s]:o}}))},toggleQueueItemHideImages:s=>{r(o=>({queueItemHideImages:{...o.queueItemHideImages,[s]:!o.queueItemHideImages[s]}}))},setShowQueueMetadata:s=>{r({showQueueMetadata:s})},toggleShowQueueMetadata:()=>{r(s=>({showQueueMetadata:!s.showQueueMetadata}))},setPreviewVisibility:(s,o)=>{r(i=>({previewVisibility:{...i.previewVisibility,[s]:o}}))},togglePreviewVisibility:s=>{r(o=>({previewVisibility:{...o.previewVisibility,[s]:!o.previewVisibility[s]}}))},setPreviewVisibilityDefault:s=>{r({previewVisibilityDefault:s})}}),{name:"queue-storage",storage:qr(()=>localStorage),partialize:r=>({queueItemExpanded:r.queueItemExpanded,queueItemUserToggled:r.queueItemUserToggled,queueItemHideImages:r.queueItemHideImages,showQueueMetadata:r.showQueueMetadata,previewVisibility:r.previewVisibility,previewVisibilityDefault:r.previewVisibilityDefault})})),Ln=lr()(Wr(r=>({currentPanel:"workflow",setCurrentPanel:l=>{r({currentPanel:l})}}),{name:"navigation-storage",storage:qr(()=>localStorage),partialize:r=>({currentPanel:r.currentPanel})})),Gn=lr()(Wr((r,l)=>({pinnedWidgets:{},pinnedWidget:null,pinOverlayOpen:!1,setPinnedWidget:(s,o)=>{const{pinnedWidgets:i}=l();if(o&&s)r({pinnedWidget:s,pinnedWidgets:{...i,[o]:s}});else if(o&&!s){const d={...i};delete d[o],r({pinnedWidget:null,pinnedWidgets:d})}else r({pinnedWidget:s})},setPinOverlayOpen:s=>{r({pinOverlayOpen:s})},togglePinOverlay:()=>{r(s=>({pinOverlayOpen:!s.pinOverlayOpen}))},clearPinnedWidgetForKey:s=>{if(!s){r({pinnedWidget:null,pinOverlayOpen:!1});return}r(o=>{const i={...o.pinnedWidgets};return delete i[s],{pinnedWidgets:i,pinnedWidget:null,pinOverlayOpen:!1}})},restorePinnedWidgetForWorkflow:(s,o)=>{if(!s){r({pinnedWidget:null,pinOverlayOpen:!1});return}const i=l().pinnedWidgets[s];if(!i){r({pinnedWidget:null,pinOverlayOpen:!1});return}const d=o.nodes.some(p=>p.id===i.nodeId);r({pinnedWidget:d?i:null,pinOverlayOpen:!1})},clearCurrentPin:()=>{r({pinnedWidget:null,pinOverlayOpen:!1})}}),{name:"pinned-widget-storage",storage:qr(()=>localStorage),partialize:r=>({pinnedWidgets:r.pinnedWidgets,pinnedWidget:r.pinnedWidget,pinOverlayOpen:r.pinOverlayOpen})})),Fd=-1,Ai=-2,Ri=-3,ei=0x4000000000000,hi=new Set([Fd,Ai,Ri]);function $d(r){return hi.has(r)}function C0(r){return r===Fd?"randomize":r===Ai?"increment":r===Ri?"decrement":null}function N1(r){return r==="randomize"?Fd:r==="increment"?Ai:r==="decrement"?Ri:null}function xl(r,l,s,o){if(!l)return null;const d=qd(r,s.id)?.[o];if(d!==void 0)return d;const p=l[s.type];if(!p?.input)return null;const h=p.input_order?.required||Object.keys(p.input.required||{}),m=p.input_order?.optional||Object.keys(p.input.optional||{}),g=[...h,...m];let x=0;for(const y of g){const N=p.input.required?.[y]||p.input.optional?.[y];if(!N)continue;const[k]=N,S=s.inputs.find(z=>z.name===y),w=S?.link!=null,M=!!S?.widget&&!w,j=!!S;if(Li(k)||M||!j){if(y===o)return x;x+=1,String(k)==="INT"&&(y==="seed"||y==="noise_seed")&&(x+=1)}}return null}function Ca(r,l,s){const o=xl(r,l,s,"seed")??xl(r,l,s,"noise_seed");if(o!==null)return o;if(!l)return s.outputs?.some(y=>String(y.name||"").toLowerCase().includes("seed")&&String(y.type||"").toUpperCase().includes("INT"))&&Array.isArray(s.widgets_values)&&s.widgets_values.length>0?0:null;const i=l[s.type];if(!i?.input)return s.outputs?.some(y=>String(y.name||"").toLowerCase().includes("seed")&&String(y.type||"").toUpperCase().includes("INT"))&&Array.isArray(s.widgets_values)&&s.widgets_values.length>0?0:null;const d=qd(r,s.id),p=i.input_order?.required||Object.keys(i.input.required||{}),h=i.input_order?.optional||Object.keys(i.input.optional||{}),m=[...p,...h];let g=0;for(const x of m){const y=i.input.required?.[x]||i.input.optional?.[x];if(!y)continue;const[N]=y,k=s.inputs.find(O=>O.name===x),S=k?.link!=null,w=!!k?.widget&&!S,M=!!k;if(Li(N)||w||!M){const D=d?.[x]??g;if(String(N)==="INT"&&x.toLowerCase().includes("seed"))return D;g+=1,String(N)==="INT"&&(x==="seed"||x==="noise_seed")&&(g+=1)}}return null}function j1(r,l){const s=r[l.type];if(!s?.input)return 1;const i=(s.input.required?.seed||s.input.optional?.seed)?.[1],d=typeof i?.step=="number"?i.step:1;return d>0?d:1}function C1(r){const l=Number(r.properties?.randomMin??0),s=Number(r.properties?.randomMax??ei),o=Number.isFinite(l)?Math.max(-ei,l):0,i=Number.isFinite(s)?Math.min(ei,s):ei;return o<=i?{min:o,max:i}:{min:i,max:o}}function Mo(r,l){const s=j1(r,l),{min:o,max:i}=C1(l),d=s>0?s/10:1,p=i-o;let h=o+Math.random()*p;return d>0&&(h=Math.round((h-o)/d)*d+o),h>i&&(h=i),h<o&&(h=o),hi.has(h)&&(h=0),h}function k1(r,l,s,o){if(hi.has(r)){if(typeof l=="number"&&!hi.has(l)){if(r===Ai)return l+1;if(r===Ri)return l-1}return Mo(s,o)}return Number.isFinite(r)?r:0}const jn=lr()(Wr((r,l)=>({seedModes:{},seedLastValues:{},setSeedMode:(s,o,i)=>{const{seedModes:d,seedLastValues:p}=l();if(i?.workflow&&i.nodeTypes){const{workflow:h,nodeTypes:m,updateNodeWidgets:g}=i,x=h.nodes.find(y=>y.id===s);if(x){const y=Ca(h,m,x);if(y!==null&&Array.isArray(x.widgets_values)){const N=y+1,k=typeof x.widgets_values[N]=="string",S={};if(k)S[N]=o;else{const w=N1(o);if(w!==null&&o!=="fixed")S[y]=w;else if(o==="fixed"){const M=Number(x.widgets_values[y]);if($d(M)){const j=p[s],O=typeof j=="number"?j:Mo(m,x);S[y]=O}}}Object.keys(S).length>0&&g(s,S)}}}r({seedModes:{...d,[s]:o}})},setSeedModes:s=>{r({seedModes:s})},setSeedLastValues:s=>{r({seedLastValues:s})},clearSeedState:()=>{r({seedModes:{},seedLastValues:{}})}}),{name:"seed-storage",storage:qr(()=>localStorage),partialize:r=>({seedModes:r.seedModes,seedLastValues:r.seedLastValues})}));function pg(r,l){return r&&r[l]||null}function k0(r,l){try{if(l.type==="PrimitiveNode"){const m=l.outputs?.[0]?.type;if(!m)return[];const g=String(m).toUpperCase(),x=Array.isArray(l.widgets_values)?l.widgets_values[0]:void 0;return[{name:l.outputs?.[0]?.name||"value",type:g,options:void 0,value:x,widgetIndex:0,isCombo:!1,connected:!1,inputIndex:-1}]}if(l.type==="Power Lora Loader (rgthree)"){const m=[],g=l.properties?.["Show Strengths"]==="Separate Model & Clip";let x=[];if(r){const y=pg(r,"LoraLoader");if(y?.input?.required?.lora_name){const[N]=y.input.required.lora_name;Array.isArray(N)&&(x=N)}}if(Array.isArray(l.widgets_values)){const y=l.widgets_values,N=[];y.forEach((k,S)=>{typeof k=="object"&&k!==null&&"lora"in k&&"strength"in k&&N.push(S)}),N.length>0&&(m.push({name:"Loras",type:"POWER_LORA_HEADER",options:{loraIndices:N},value:null,widgetIndex:-1,isCombo:!1,connected:!1,inputIndex:-1}),N.forEach(k=>{const S=y[k];m.push({name:"Lora",type:"POWER_LORA",options:{choices:x.length>0?x:void 0,showSeparate:g},value:S,widgetIndex:k,isCombo:!1,connected:!1,inputIndex:-1})})),m.push({name:"Add Lora",type:"POWER_LORA_ADD",options:void 0,value:null,widgetIndex:l.widgets_values.length,isCombo:!1,connected:!1,inputIndex:-1})}return m}const s=pg(r,l.type);if(!s?.input)return l.outputs?.some(g=>String(g.name||"").toLowerCase().includes("seed")&&String(g.type||"").toUpperCase().includes("INT"))&&Array.isArray(l.widgets_values)&&l.widgets_values.length>0?[{name:"seed",type:"INT",options:void 0,value:l.widgets_values[0],widgetIndex:0,isCombo:!1,connected:!1,inputIndex:-1}]:[];const o=s.input_order?.required||Object.keys(s.input.required||{}),i=s.input_order?.optional||Object.keys(s.input.optional||{}),d=[];let p=0;const h=(m,g)=>{if(!g)return;const[x,y]=g,N=l.inputs.findIndex(_=>_.name===m),k=N>=0?l.inputs[N]:void 0,S=k?.link!=null,w=!!k?.widget&&!S,M=!!k,j=Object.prototype.hasOwnProperty.call(y??{},"default"),O=Li(x)||w||!M||j,D=Array.isArray(x),z=D?{...y??{},options:x}:y;if(O){const _=ko(l,m,p);d.push({name:m,type:D?"COMBO":String(x),options:z,value:_,widgetIndex:p,isCombo:D,connected:!!S,inputIndex:N})}O&&(p+=1,String(x)==="INT"&&(m==="seed"||m==="noise_seed")&&(p+=1))};for(const m of o){const g=s.input.required?.[m];g&&h(m,g)}for(const m of i){const g=s.input.optional?.[m];g&&h(m,g)}return d}catch(s){return console.error(`Error collecting widget definitions for node ${l.id} (${l.type}):`,s),[]}}function Yd(r,l){return k0(r,l).filter(s=>!s.isCombo).map(s=>({name:s.name,type:s.type,options:s.options,value:s.value,widgetIndex:s.widgetIndex,connected:s.connected,inputIndex:s.inputIndex}))}function Qd(r,l){return k0(r,l).filter(s=>s.isCombo).map(s=>({name:s.name,type:s.type,value:s.value,options:s.options,widgetIndex:s.widgetIndex,connected:s.connected,inputIndex:s.inputIndex}))}function M1(r){let l=5381;for(let s=0;s<r.length;s+=1)l=(l<<5)+l+r.charCodeAt(s),l&=4294967295;return(l>>>0).toString(16).padStart(8,"0")}function O1(r,l){if(!r)return!1;const s=Yd(r,l).filter(i=>!i.connected),o=Qd(r,l).filter(i=>!i.connected);return s.length===0&&o.length===0}function E1(r){const l=r.nodes??[],s=r.definitions?.subgraphs?.flatMap(o=>o.nodes??[])??[];return[...l,...s]}function nd(r,l){const i=E1(r).filter(d=>!O1(l,d)).map(d=>d.type).sort().join("|");return`wf_${M1(i)}`}const mg="__mobile_origin",ti="__mobile_subgraph_group_map";function rd(r,l,s){const o={...r.properties??{}};return s&&o[mg]===void 0&&(o[mg]=s),{...r,id:l,inputs:(r.inputs??[]).map(i=>({...i,link:null})),outputs:(r.outputs??[]).map(i=>({...i,links:[]})),widgets_values:r.widgets_values??[],flags:r.flags??{},properties:o,mode:r.mode??0,order:r.order??0}}function T1(r,l){if(!l||l.length===0)return null;const s=[...l].sort((g,x)=>g.id-x.id),[o,i]=r.pos,[d,p]=r.size,h=o+d/2,m=i+p/2;for(const g of s){const[x,y,N,k]=g.bounding;if(h>=x&&h<=x+N&&m>=y&&m<=y+k)return g.id}return null}function hg(r,l){const s=new Map,o=new Map;return l.forEach((i,d)=>{i?.name&&o.set(i.name,d)}),r.forEach((i,d)=>{const p=i?.name;if(p&&o.has(p)){s.set(d,o.get(p));return}d<l.length&&s.set(d,d)}),s}function _1(r,l){const s=new Map;for(const o of r)o.inputs=(o.inputs??[]).map(i=>({...i,link:null})),o.outputs=(o.outputs??[]).map(i=>({...i,links:[]})),s.set(o.id,o);for(const o of l){const[i,d,p,h,m]=o,g=s.get(d),x=s.get(h),y=g?.outputs?.[p],N=x?.inputs?.[m];y&&(y.links||(y.links=[]),y.links.push(i)),N&&(N.link=i)}return r}function L1(r,l){const s=r.nodes.filter(S=>l.has(S.type));if(s.length===0)return{workflow:r,changed:!1};const o=new Set(s.map(S=>S.id));let i=Math.max(0,...r.nodes.map(S=>S.id))+1;const d=[],p=r.groups??[],h=r.extra??{},m=typeof h[ti]=="object"&&h[ti]!==null?h[ti]:{},g={};for(const[S,w]of Object.entries(m))(typeof w=="number"||w===null)&&(g[S]=w);const x=new Map;for(const S of r.nodes){if(!o.has(S.id)){d.push(rd(S,S.id,{scope:"root",nodeId:S.id}));continue}const w=l.get(S.type);if(!w){d.push(rd(S,S.id,{scope:"root",nodeId:S.id}));continue}const M=T1(S,p);g[w.id]=M??null;const j=hg(S.inputs??[],w.inputs??[]),O=hg(S.outputs??[],w.outputs??[]),D=new Map,z=new Map,_=new Map,A=[];for(const L of w.nodes??[]){const B=i++;D.set(L.id,B),d.push(rd(L,B,{scope:"subgraph",subgraphId:w.id,nodeId:L.id}))}for(const L of w.links??[]){const B=L.origin_id,G=L.target_id;if(B===-10){const ne=D.get(G);if(ne!==void 0){const ve=z.get(L.origin_slot)??[];ve.push({origin_id:-10,origin_slot:L.origin_slot,target_id:ne,target_slot:L.target_slot,type:L.type}),z.set(L.origin_slot,ve)}continue}if(G===-20){const ne=D.get(B);if(ne!==void 0){const ve=_.get(L.target_slot)??[];ve.push({origin_id:ne,origin_slot:L.origin_slot,target_id:-20,target_slot:L.target_slot,type:L.type}),_.set(L.target_slot,ve)}continue}const U=D.get(B),W=D.get(G);U!==void 0&&W!==void 0&&A.push({origin_id:U,origin_slot:L.origin_slot,target_id:W,target_slot:L.target_slot,type:L.type})}x.set(S.id,{inputSlotMap:j,outputSlotMap:O,inputTargets:z,outputSources:_,internalLinks:A})}const y=[],N=r.links??[];for(const S of N){const[,w,M,j,O,D]=S,z=o.has(w),_=o.has(j);if(!z&&!_){y.push({origin_id:w,origin_slot:M,target_id:j,target_slot:O,type:D});continue}if(z&&_){const A=x.get(w),L=x.get(j),B=A?.outputSlotMap.get(M),G=L?.inputSlotMap.get(O);if(B===void 0||G===void 0)continue;const U=A?.outputSources.get(B)??[],W=L?.inputTargets.get(G)??[];for(const ne of U)for(const ve of W)y.push({origin_id:ne.origin_id,origin_slot:ne.origin_slot,target_id:ve.target_id,target_slot:ve.target_slot,type:ne.type});continue}if(z){const A=x.get(w),L=A?.outputSlotMap.get(M);if(L===void 0)continue;const B=A?.outputSources.get(L)??[];for(const G of B)y.push({origin_id:G.origin_id,origin_slot:G.origin_slot,target_id:j,target_slot:O,type:G.type});continue}if(_){const A=x.get(j),L=A?.inputSlotMap.get(O);if(L===void 0)continue;const B=A?.inputTargets.get(L)??[];for(const G of B)y.push({origin_id:w,origin_slot:M,target_id:G.target_id,target_slot:G.target_slot,type:G.type})}}for(const S of x.values())y.push(...S.internalLinks);const k=y.map((S,w)=>[w+1,S.origin_id,S.origin_slot,S.target_id,S.target_slot,S.type]);return _1(d,k),{workflow:{...r,extra:{...h,[ti]:g},nodes:d,links:k,last_node_id:Math.max(0,...d.map(S=>S.id)),last_link_id:k.length},changed:!0}}function A1(r){const l=r.definitions?.subgraphs??[];if(l.length===0)return r;const s=new Map;for(const i of l)i?.id&&s.set(i.id,i);let o=r;for(let i=0;i<l.length+4;i+=1){const{workflow:d,changed:p}=L1(o,s);if(!p)break;o=d}return o}function R1(r){const l=new Map,s=new Map,o=new Map;for(const i of r.nodes)l.set(i.id,i),s.set(i.id,[]),o.set(i.id,[]);for(const i of r.links){const[,d,,p]=i,h=s.get(p);h&&!h.includes(d)&&h.push(d);const m=o.get(d);m&&!m.includes(p)&&m.push(p)}return{nodes:l,dependencies:s,dependents:o}}function D1(r){return["SaveImage","PreviewImage","SaveAnimatedWEBP","SaveAnimatedPNG","SaveVideo","SaveAudio"].some(s=>r.type.includes(s))||r.outputs.length===0||r.outputs.every(s=>!s.links||s.links.length===0)}function z1(r){if(r.nodes.length===0)return[];const l=R1(r),s=new Set,o=[];function i(p){if(s.has(p))return;s.add(p);const h=l.nodes.get(p);if(!h)return;const m=l.dependencies.get(p)||[];for(const g of m)i(g);o.push(h)}const d=r.nodes.filter(D1);if(d.length===0)for(const p of r.nodes)(l.dependents.get(p.id)||[]).length===0&&d.push(p);for(const p of d)i(p.id);for(const p of r.nodes)s.has(p.id)||i(p.id);return o}function Oo(r,l,s){const o=r.nodes.find(g=>g.id===l);if(!o||!o.inputs[s])return null;const i=o.inputs[s].link;if(i===null)return null;const d=r.links.find(g=>g[0]===i);if(!d)return null;const[,p,h]=d,m=r.nodes.find(g=>g.id===p);return m?{node:m,outputIndex:h}:null}function gi(r,l,s){const o=r.nodes.find(p=>p.id===l);if(!o||!o.outputs[s])return[];const i=o.outputs[s].links||[],d=[];for(const p of i){const h=r.links.find(y=>y[0]===p);if(!h)continue;const[,,,m,g]=h,x=r.nodes.find(y=>y.id===m);x&&d.push({node:x,inputIndex:g})}return d}const B1="__mobile_origin",M0="__mobile_subgraph_group_map";function Cd(r){return r.map(l=>({...l,widgets_values:l.widgets_values??[],inputs:l.inputs??[],outputs:l.outputs??[],flags:l.flags??{},properties:l.properties??{},mode:l.mode??0,order:l.order??0}))}function gg(r){const l=JSON.parse(JSON.stringify(r));return l.nodes=Cd(l.nodes??[]),l.links=l.links??[],l.groups=l.groups??[],l.config=l.config??{},l.definitions?.subgraphs&&(l.definitions.subgraphs=l.definitions.subgraphs.map(s=>({...s,nodes:Cd(s.nodes??[]),links:s.links??[]}))),l.last_node_id=l.last_node_id??Math.max(0,...l.nodes.map(s=>s.id)),l.last_link_id=l.last_link_id??0,l.version=l.version??.4,l}function Eo(r){if(!r)return null;const s=r.properties?.[B1];if(!s||typeof s!="object")return null;const o=s.scope;if(o==="root"){const i=s.nodeId;return typeof i=="number"?{scope:"root",nodeId:i}:null}if(o==="subgraph"){const i=s.nodeId,d=s.subgraphId;if(typeof i=="number"&&typeof d=="string")return{scope:"subgraph",subgraphId:d,nodeId:i}}return null}function kd(r,l){const s=new Map;if(!l||l.length===0)return s;const o=[...l].sort((i,d)=>i.id-d.id);for(const i of r){const[d,p]=i.pos,[h,m]=i.size,g=d+h/2,x=p+m/2;for(const y of o){const[N,k,S,w]=y.bounding;if(g>=N&&g<=N+S&&x>=k&&x<=k+w){s.set(i.id,y.id);break}}}return s}function xg(r,l){const s=new Set,o=Array.from(r);for(;o.length>0;){const i=o.pop();if(!i||s.has(i))continue;s.add(i);const d=l.get(i);if(d)for(const p of d)s.has(p)||o.push(p)}return s}function I1(r){const l=new Set(r.map(o=>o.id)),s=new Map;for(const o of r)for(const i of o.nodes??[]){if(!l.has(i.type))continue;const d=s.get(i.type)??[];d.push({parentId:o.id,nodeId:i.id}),s.set(i.type,d)}return s}function wo(r,l,s){return!s||s.length===0?null:kd(l,s).get(r)??null}function O0(r,l,s=null){const o=r.nodes??[],i=r.groups??[],d=r.definitions?.subgraphs??[],p=new Map(d.map(N=>[N.id,N])),h=new Set(d.map(N=>N.id)),m=new Map,g=[];for(const N of o){const k=Eo(N);if(k?.scope==="subgraph"){const S=m.get(k.subgraphId);S?S.push(N):m.set(k.subgraphId,[N])}else g.push(N)}const x=new Map;for(const N of d){const k=new Set;for(const S of N.nodes??[])h.has(S.type)&&k.add(S.type);k.size>0&&x.set(N.id,k)}const y=new Set;if(s){const N=p.get(s);if(!N)return y;const k=N.groups??[];if(!k.find(_=>_.id===l))return y;const w=N.nodes??[],M=kd(w,k),j=new Set,O=new Set;for(const _ of w)M.get(_.id)===l&&(h.has(_.type)?j.add(_.type):O.add(_.id));const D=m.get(s)??[];for(const _ of D){const A=Eo(_);A?.scope==="subgraph"&&O.has(A.nodeId)&&y.add(_.id)}const z=xg(j,x);for(const _ of z){const A=m.get(_)??[];for(const L of A)y.add(L.id)}}else{if(!i.find(j=>j.id===l))return y;const k=kd(g,i);for(const j of g)k.get(j.id)===l&&y.add(j.id);const S=r.extra?.[M0],w=new Set;if(S&&typeof S=="object")for(const[j,O]of Object.entries(S))O===l&&w.add(j);const M=xg(w,x);for(const j of M){const O=m.get(j)??[];for(const D of O)y.add(D.id)}}return y}function H1(r,l,s,o){if(!Array.isArray(r.widgets_values)){const d={...r.widgets_values||{}};return o?(d[o]=s,r.type==="VHS_VideoCombine"&&o==="save_image"&&"save_output"in d&&(d.save_output=s)):l>=0&&(d[String(l)]=s),{...r,widgets_values:d}}let i=[...r.widgets_values];return l>=i.length?i.push(s):i[l]=s,r.type==="Power Lora Loader (rgthree)"&&(i=i.filter(d=>d!==null)),{...r,widgets_values:i}}function V1(r,l){if(!Array.isArray(r.widgets_values))return r;const s=[...r.widgets_values];for(const[o,i]of Object.entries(l)){const d=parseInt(o,10);s[d]=i}return{...r,widgets_values:s}}function ni(r,l){const s=Eo(l)??{scope:"root",nodeId:l.id};if(s.scope==="root"){const d=r.nodes.map(p=>p.id===s.nodeId?{...p,widgets_values:l.widgets_values??[]}:p);return{...r,nodes:d}}const o=r.definitions?.subgraphs;if(!o)return r;const i=o.map(d=>{if(d.id!==s.subgraphId)return d;const p=d.nodes.map(h=>h.id===s.nodeId?{...h,widgets_values:l.widgets_values??[]}:h);return{...d,nodes:p}});return{...r,definitions:{...r.definitions,subgraphs:i}}}function ld(r,l,s){const o=["fixed","randomize","increment","decrement"];if(Array.isArray(s.widgets_values)){const d=s.widgets_values.find(p=>typeof p=="string"&&o.includes(p.toLowerCase()));if(typeof d=="string"){const p=d.toLowerCase();if(o.includes(p))return p}}const i=Ca(r,l,s);if(i!==null&&Array.isArray(s.widgets_values)){const d=Number(s.widgets_values[i]),p=C0(d);if(p)return p;const m=(s.outputs??[]).some(N=>String(N.name||"").toLowerCase().includes("seed")&&String(N.type||"").toUpperCase().includes("INT")),g=s.widgets_values.slice(i+1),x=g.length>0&&g.every(N=>N===""||N===null||N===void 0),y=s.properties&&("randomMin"in s.properties||"randomMax"in s.properties);if(m&&x&&y)return"randomize"}return"fixed"}function U1(r,l){const s={};for(const o of r.nodes){const i=l[o.type];if(!i?.input)continue;const d=i.input_order?.required||Object.keys(i.input.required||{}),p=i.input_order?.optional||Object.keys(i.input.optional||{}),h=[...d,...p];for(const m of h){const g=i.input.required?.[m]||i.input.optional?.[m];if(!g)continue;const[x]=g;if(!Array.isArray(x)||x.length===0||o.inputs.find(O=>O.name===m)?.link!=null)continue;const N=xl(r,l,o,m);if(N===null)continue;const k=ko(o,m,N);if(k==null)continue;const S=Wd(k,x,{comboIndexToValue:!0}),w=String(S),M=w.split(/[\\/]/).pop()??w;if(!x.some(O=>{const D=String(O);return D===w||D===M})){const O=String(o.id);s[O]||(s[O]=[]),s[O].push({type:"workflow_load",message:`Missing value: ${w}`,details:"Not found on server.",inputName:m})}}}return s}const J=lr()(Wr((r,l)=>{const s=o=>{const{manuallyHiddenNodes:i}=l(),p=Object.keys(o).filter(h=>i[Number(h)]);if(p.length>0){const h={...i};for(const m of p)delete h[Number(m)];r({manuallyHiddenNodes:h})}Zt.getState().setNodeErrors(o)};return{workflowSource:null,workflow:null,embedWorkflow:null,originalWorkflow:null,currentFilename:null,currentWorkflowKey:null,nodeTypes:null,isLoading:!1,savedWorkflowStates:{},isExecuting:!1,executingNodeId:null,executingPromptId:null,progress:0,executionStartTime:null,currentNodeStartTime:null,nodeDurationStats:{},workflowDurationStats:{},nodeOutputs:{},promptOutputs:{},runCount:1,followQueue:!1,workflowLoadedAt:0,connectionHighlightModes:{},connectionButtonsVisible:!0,manuallyHiddenNodes:{},searchQuery:"",searchOpen:!1,collapsedGroups:{},hiddenGroups:{},collapsedSubgraphs:{},hiddenSubgraphs:{},setNodeOutput:(o,i)=>{r(d=>({nodeOutputs:{...d.nodeOutputs,[o]:i}}))},clearNodeOutputs:()=>{r({nodeOutputs:{}})},addPromptOutputs:(o,i)=>{!o||i.length===0||r(d=>({promptOutputs:{...d.promptOutputs,[o]:[...d.promptOutputs[o]??[],...i]}}))},clearPromptOutputs:o=>{if(!o){r({promptOutputs:{}});return}r(i=>{if(!i.promptOutputs[o])return i;const d={...i.promptOutputs};return delete d[o],{promptOutputs:d}})},setRunCount:o=>{r({runCount:Math.max(1,Math.floor(o))})},setFollowQueue:o=>{r({followQueue:o})},cycleConnectionHighlight:o=>{r(i=>{const d=i.connectionHighlightModes[o]??"off",p=d==="off"?"inputs":d==="inputs"?"outputs":d==="outputs"?"both":"off";return{connectionHighlightModes:{...i.connectionHighlightModes,[o]:p}}})},setConnectionHighlightMode:(o,i)=>{r(d=>({connectionHighlightModes:{...d.connectionHighlightModes,[o]:i}}))},toggleConnectionButtonsVisible:()=>{r(o=>({connectionButtonsVisible:!o.connectionButtonsVisible}))},setConnectionButtonsVisible:o=>{r({connectionButtonsVisible:o})},hideNode:o=>{r(i=>({manuallyHiddenNodes:{...i.manuallyHiddenNodes,[o]:!0}}))},setNodeHidden:(o,i)=>{r(d=>{const p={...d.manuallyHiddenNodes};return i?p[o]=!0:delete p[o],{manuallyHiddenNodes:p}})},revealNodeWithParents:o=>{const{workflow:i}=l();if(!i)return;const d=i.definitions?.subgraphs??[];console.log("[revealNodeWithParents] start",{nodeId:o,rootNodeCount:i.nodes?.length??0,subgraphCount:d.length});let p=i.nodes.find(S=>S.id===o);if(!p)for(const S of d){const w=S.nodes?.find(M=>M.id===o);if(w){p=w;break}}if(!p){console.log("[revealNodeWithParents] node not found",{nodeId:o,rootIds:i.nodes?.slice(0,5).map(S=>S.id),subgraphSummaries:d.map(S=>({id:S.id,nodeCount:S.nodes?.length??0,sampleIds:S.nodes?.slice(0,5).map(w=>w.id)??[]}))});return}const h=new Map(d.map(S=>[S.id,S])),m=I1(d),g=Eo(p),x=i.nodes.filter(S=>Eo(S)?.scope!=="subgraph"),y=g?.scope==="subgraph"?g.nodeId:p.id,k=(()=>{const S=new Set,w=[y];if(g?.scope==="subgraph"){const M=h.get(g.subgraphId),j=new Map;for(M?.links?.forEach(O=>{const D=j.get(O.target_id)??[];D.push(O.origin_id),j.set(O.target_id,D)});w.length>0;){const O=w.pop();if(O===void 0)continue;(j.get(O)??[]).forEach(z=>{S.has(z)||(S.add(z),w.push(z))})}return S}for(;w.length>0;){const M=w.pop();if(M===void 0)continue;const j=i.nodes.find(O=>O.id===M);j&&j.inputs?.forEach((O,D)=>{if(O.link===null)return;const z=Oo(i,M,D);if(!z)return;const _=z.node.id;S.has(_)||(S.add(_),w.push(_))})}return S})();console.log("[revealNodeWithParents] parents",{nodeId:o,parentCount:k.size,parents:Array.from(k).slice(0,20)}),console.log("[revealNodeWithParents] found node",{nodeId:p.id,origin:g,hasGroups:(i.groups?.length??0)>0,hiddenNodeCount:Object.keys(l().manuallyHiddenNodes??{}).length}),r(S=>{const w={...S.manuallyHiddenNodes};delete w[o],k.forEach(A=>{delete w[A]});const M={...S.hiddenGroups},j={...S.hiddenSubgraphs},O={...S.collapsedGroups},D={...S.collapsedSubgraphs},z=A=>{A!=null&&(delete M[A],O[A]=!1)},_=A=>{A&&(D[A]=!1,delete j[A])};if(!g||g.scope==="root"){const A=wo(p.id,x,i.groups??[]);console.log("[revealNodeWithParents] root origin",{nodeId:o,groupId:A}),z(A),k.forEach(L=>{const B=wo(L,x,i.groups??[]);z(B)})}else{_(g.subgraphId);const A=h.get(g.subgraphId);if(A){const W=wo(g.nodeId,A.nodes??[],A.groups??[]);console.log("[revealNodeWithParents] subgraph origin",{nodeId:o,subgraphId:g.subgraphId,groupId:W}),z(W)}const L=i.extra?.[M0],B=L&&typeof L=="object"?L[g.subgraphId]:void 0;typeof B=="number"&&(console.log("[revealNodeWithParents] root group mapping",{subgraphId:g.subgraphId,rootGroupId:B}),z(B)),A&&k.forEach(W=>{const ne=wo(W,A.nodes??[],A.groups??[]);z(ne)});const G=[g.subgraphId],U=new Set;for(;G.length>0;){const W=G.pop();if(!W||U.has(W))continue;U.add(W);const ne=m.get(W)??[];console.log("[revealNodeWithParents] parent chain",{current:W,parentCount:ne.length});for(const ve of ne){_(ve.parentId);const ae=h.get(ve.parentId);if(ae){const re=wo(ve.nodeId,ae.nodes??[],ae.groups??[]);console.log("[revealNodeWithParents] parent expand",{parentId:ve.parentId,parentNodeId:ve.nodeId,parentGroupId:re}),z(re)}U.has(ve.parentId)||G.push(ve.parentId)}}}return{manuallyHiddenNodes:w,hiddenGroups:M,hiddenSubgraphs:j,collapsedGroups:O,collapsedSubgraphs:D}})},showAllHiddenNodes:()=>{r({manuallyHiddenNodes:{},hiddenGroups:{},hiddenSubgraphs:{}})},toggleGroupCollapse:o=>{r(i=>{const d=i.collapsedGroups[o]??!0;return{collapsedGroups:{...i.collapsedGroups,[o]:!d}}})},setGroupCollapsed:(o,i)=>{r(d=>{const p={...d.collapsedGroups};return i?p[o]=!0:delete p[o],{collapsedGroups:p}})},toggleGroupHidden:o=>{r(i=>({hiddenGroups:{...i.hiddenGroups,[o]:!i.hiddenGroups[o]}}))},setGroupHidden:(o,i)=>{r(d=>{const p={...d.hiddenGroups};return i?p[o]=!0:delete p[o],{hiddenGroups:p}})},toggleSubgraphHidden:o=>{r(i=>({hiddenSubgraphs:{...i.hiddenSubgraphs,[o]:!i.hiddenSubgraphs[o]}}))},setSubgraphHidden:(o,i)=>{r(d=>{const p={...d.hiddenSubgraphs};return i?p[o]=!0:delete p[o],{hiddenSubgraphs:p}})},updateGroupTitle:(o,i,d)=>{const{workflow:p}=l();if(!p)return;const h=i.trim();if(d){const x=(p.definitions?.subgraphs??[]).map(y=>{if(y.id!==d)return y;const k=(y.groups??[]).map(S=>S.id===o?{...S,title:h}:S);return{...y,groups:k}});Zt.getState().setError(null),r({workflow:{...p,definitions:{...p.definitions??{},subgraphs:x}}});return}const m=(p.groups??[]).map(g=>g.id===o?{...g,title:h}:g);r({workflow:{...p,groups:m}})},updateSubgraphTitle:(o,i)=>{const{workflow:d}=l();if(!d)return;const p=i.trim(),m=(d.definitions?.subgraphs??[]).map(g=>g.id===o?{...g,name:p}:g);r({workflow:{...d,definitions:{...d.definitions??{},subgraphs:m}}})},bypassAllInGroup:(o,i,d=null)=>{const{workflow:p}=l();if(!p)return;const h=O0(p,o,d);if(h.size===0)return;const m=i?4:0,g=(p.nodes??[]).map(x=>h.has(x.id)?{...x,mode:m}:x);r({workflow:{...p,nodes:g}})},showAllHiddenGroups:()=>{r({hiddenGroups:{}})},toggleSubgraphCollapse:o=>{r(i=>({collapsedSubgraphs:{...i.collapsedSubgraphs,[o]:!(i.collapsedSubgraphs[o]??!0)}}))},setSubgraphCollapsed:(o,i)=>{r(d=>({collapsedSubgraphs:{...d.collapsedSubgraphs,[o]:i}}))},setSearchQuery:o=>{r({searchQuery:o})},setSearchOpen:o=>{r({searchOpen:o})},updateWorkflowDuration:(o,i)=>{!o||i<=0||r(d=>{const p=d.workflowDurationStats[o],h=(p?.count??0)+1,m=p?(p.avgMs*p.count+i)/h:i;return{workflowDurationStats:{...d.workflowDurationStats,[o]:{avgMs:m,count:h}}}})},clearWorkflowCache:()=>{const{currentWorkflowKey:o,savedWorkflowStates:i,originalWorkflow:d,nodeTypes:p}=l(),h={...i};if(o?(delete h[o],Gn.getState().clearPinnedWidgetForKey(o)):Gn.getState().clearCurrentPin(),!d){jn.getState().setSeedModes({}),jn.getState().setSeedLastValues({}),r({savedWorkflowStates:h});return}const m={};if(p)for(const g of d.nodes)Ca(d,p,g)!==null&&(m[g.id]=ld(d,p,g));jn.getState().setSeedModes(m),jn.getState().setSeedLastValues({}),Zt.getState().setError(null),r({workflow:JSON.parse(JSON.stringify(d)),savedWorkflowStates:h,runCount:1,workflowLoadedAt:Date.now()})},saveCurrentWorkflowState:()=>{const{workflow:o,currentWorkflowKey:i,savedWorkflowStates:d,collapsedGroups:p,hiddenGroups:h,collapsedSubgraphs:m,hiddenSubgraphs:g}=l(),x=jn.getState().seedModes;if(!o||!i)return;const y=d[i]?.bookmarkedNodeIds??[],N={};for(const k of o.nodes)N[k.id]={mode:k.mode,flags:k.flags?{collapsed:!!k.flags.collapsed}:void 0,widgets_values:k.widgets_values};r({savedWorkflowStates:{...d,[i]:{nodes:N,seedModes:{...x},collapsedGroups:{...p},hiddenGroups:{...h},collapsedSubgraphs:{...m},hiddenSubgraphs:{...g},bookmarkedNodeIds:[...y]}}})},loadWorkflow:(o,i,d)=>{const{currentFilename:p,savedWorkflowStates:h,nodeTypes:m}=l(),g=d?.fresh??!1,x=d?.source??{type:"other"},y=A1(o),N=gg(o),k=Cd(y.nodes),S={...y,nodes:k,links:y.links??[],groups:y.groups??[],config:y.config??{},last_node_id:y.last_node_id??Math.max(0,...k.map(B=>B.id)),last_link_id:y.last_link_id??0,version:y.version??.4},w=nd(S,m),M=Gn.getState(),j=i?M.pinnedWidgets[i]:void 0;if(j&&!M.pinnedWidgets[w]&&M.setPinnedWidget(j,w),M.restorePinnedWidgetForWorkflow(w,S),p&&l().saveCurrentWorkflowState(),g&&h[w]){const B={...h};delete B[w],r({savedWorkflowStates:B})}const O={};if(m)for(const B of S.nodes)Ca(S,m,B)!==null&&(O[B.id]=ld(S,m,B));let D=g?null:h[w];!D&&!g&&i&&h[i]&&(D=h[i],r({savedWorkflowStates:{...h,[w]:h[i]}}));const z=o.definitions?.subgraphs??[],_={};for(const B of z)_[B.id]=!0;const A={};for(const B of S.groups??[])A[B.id]=!0;for(const B of z)for(const G of B.groups??[])A[G.id]=!0;let L=S;if(D){const B=S.nodes.map(W=>{const ne=D.nodes[W.id];return ne?{...W,mode:ne.mode??W.mode,flags:ne.flags??W.flags,widgets_values:ne.widgets_values??W.widgets_values}:W}),G={...S,nodes:B};L=G;let U=N;if(U)for(const W of B)U=ni(U,W);r({workflowSource:x,workflow:G,embedWorkflow:U,originalWorkflow:JSON.parse(JSON.stringify(S)),currentFilename:i||null,currentWorkflowKey:w,collapsedGroups:{...A,...D.collapsedGroups??{}},hiddenGroups:D.hiddenGroups??{},collapsedSubgraphs:{..._,...D.collapsedSubgraphs??{}},hiddenSubgraphs:D.hiddenSubgraphs??{},runCount:1,followQueue:!1,workflowLoadedAt:Date.now()}),jn.getState().setSeedModes({...O,...D.seedModes}),jn.getState().setSeedLastValues({}),Ln.getState().setCurrentPanel("workflow"),Un.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}})}else Zt.getState().setError(null),r({workflowSource:x,workflow:S,embedWorkflow:N,originalWorkflow:JSON.parse(JSON.stringify(S)),currentFilename:i||null,currentWorkflowKey:w,collapsedGroups:A,hiddenGroups:{},collapsedSubgraphs:_,hiddenSubgraphs:{},runCount:1,followQueue:!1,workflowLoadedAt:Date.now()}),jn.getState().setSeedModes(O),jn.getState().setSeedLastValues({}),Ln.getState().setCurrentPanel("workflow"),Un.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}});if(m){const B=U1(L,m),G=Object.values(B).reduce((U,W)=>U+W.length,0);G>0?(s(B),Zt.getState().setError(`Workflow load error: ${G} input${G===1?"":"s"} reference missing options.`)):Zt.getState().clearNodeErrors()}},unloadWorkflow:()=>{const{currentWorkflowKey:o,savedWorkflowStates:i}=l();if(o){const d={...i};delete d[o],r({savedWorkflowStates:d})}Zt.getState().setError(null),r({workflowSource:null,workflow:null,embedWorkflow:null,originalWorkflow:null,currentFilename:null,currentWorkflowKey:null,collapsedGroups:{},hiddenGroups:{},collapsedSubgraphs:{},hiddenSubgraphs:{},runCount:1,nodeOutputs:{},promptOutputs:{},followQueue:!1,workflowLoadedAt:Date.now(),connectionHighlightModes:{},manuallyHiddenNodes:{}}),jn.getState().clearSeedState(),Gn.getState().clearCurrentPin(),Ln.getState().setCurrentPanel("workflow"),Un.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}})},setSavedWorkflow:(o,i)=>{Zt.getState().setError(null);const d=nd(o,l().nodeTypes);r({workflow:o,embedWorkflow:gg(o),originalWorkflow:JSON.parse(JSON.stringify(o)),currentFilename:i,currentWorkflowKey:d})},updateNodeWidget:(o,i,d,p)=>{const{workflow:h,embedWorkflow:m}=l();if(!h)return;const g=h.nodes.map(N=>N.id===o?H1(N,i,d,p):N),x=g.find(N=>N.id===o),y=m&&x?ni(m,x):m;r({workflow:{...h,nodes:g},embedWorkflow:y})},updateNodeWidgets:(o,i)=>{const{workflow:d,embedWorkflow:p}=l();if(!d)return;const h=d.nodes.map(x=>x.id===o?V1(x,i):x),m=h.find(x=>x.id===o),g=p&&m?ni(p,m):p;r({workflow:{...d,nodes:h},embedWorkflow:g})},updateNodeTitle:(o,i)=>{const{workflow:d}=l();if(!d)return;const p=i?.trim()??"",h=d.nodes.map(m=>{if(m.id!==o)return m;const g={...m.properties??{}},x={...m,properties:g};return p?(x.title=p,g.title=p):(delete x.title,delete g.title),x});r({workflow:{...d,nodes:h}})},toggleBypass:o=>{const{workflow:i}=l();if(!i)return;const d=i.nodes.map(p=>{if(p.id===o){const m=(p.mode||0)===4?0:4;return{...p,mode:m}}return p});r({workflow:{...i,nodes:d}})},toggleNodeFold:o=>{const{workflow:i}=l();if(!i)return;const d=i.nodes.map(p=>{if(p.id===o){const h=p.flags||{},m=h.collapsed;return{...p,flags:{...h,collapsed:!m}}}return p});r({workflow:{...i,nodes:d}})},setNodeFold:(o,i)=>{const{workflow:d}=l();if(!d)return;const p=d.nodes.map(h=>{if(h.id===o){const m=h.flags||{};return{...h,flags:{...m,collapsed:i}}}return h});r({workflow:{...d,nodes:p}})},ensureNodeExpanded:o=>{const{workflow:i}=l();if(!i||!i.nodes.find(h=>h.id===o)?.flags?.collapsed)return;const p=i.nodes.map(h=>h.id===o?{...h,flags:{...h.flags,collapsed:!1}}:h);r({workflow:{...i,nodes:p}})},scrollToNode:(o,i)=>{const{manuallyHiddenNodes:d}=l(),{searchOpen:p,searchQuery:h,collapsedGroups:m,hiddenGroups:g,collapsedSubgraphs:x,hiddenSubgraphs:y}=l();if(console.log("[scrollToNode] start",{nodeId:o,hidden:!!d[o],searchOpen:p,searchQuery:h,collapsedGroups:Object.keys(m??{}).length,hiddenGroups:Object.keys(g??{}).length,collapsedSubgraphs:Object.keys(x??{}).length,hiddenSubgraphs:Object.keys(y??{}).length}),d[o]&&l().setNodeHidden(o,!1),document.body.dataset.textareaFocus==="true")return;l().ensureNodeExpanded(o);const N=(k,S)=>{const w=document.getElementById(`node-anchor-${o}`)??document.getElementById(`node-${o}`),M=document.getElementById(`node-card-${o}`)??document.getElementById(`node-${o}`);if(!w||!M){console.log("[scrollToNode] missing elements",{nodeId:o,attemptsLeft:k,hasAnchor:!!w,hasNode:!!M}),k>0?requestAnimationFrame(()=>N(k-1,S)):S>0&&setTimeout(()=>N(10,S-1),200);return}const j=w.closest('[data-node-list="true"]');if(console.log("[scrollToNode] found elements",{nodeId:o,hasContainer:!!j}),j){const L=w.getBoundingClientRect(),B=j.getBoundingClientRect(),G=L.top-B.top,U=Math.max(0,j.scrollTop+G);j.scrollTo({top:U,behavior:"smooth"})}else w.scrollIntoView({behavior:"smooth",block:"start"});const O=j||window;let D=null;const z=()=>{document.querySelectorAll(".highlight-pulse").forEach(L=>L.classList.remove("highlight-pulse")),M.classList.add("highlight-pulse"),setTimeout(()=>M.classList.remove("highlight-pulse"),1200),"vibrate"in navigator&&navigator.vibrate(10),i&&window.dispatchEvent(new CustomEvent("node-show-label",{detail:{nodeId:o,label:i}}))},_=()=>{D&&clearTimeout(D),D=setTimeout(()=>{A(),z()},120)},A=()=>{D&&(clearTimeout(D),D=null),O.removeEventListener("scroll",_)};O.addEventListener("scroll",_,{passive:!0}),D=setTimeout(()=>{A(),z()},200)};N(10,2)},setNodeTypes:o=>{r({nodeTypes:o});const{workflow:i,currentWorkflowKey:d,currentFilename:p,savedWorkflowStates:h}=l();if(!i)return;const m=nd(i,o);if(d===m)return;const g={...h};d&&g[d]&&!g[m]?(g[m]=g[d],delete g[d]):!d&&p&&g[p]&&!g[m]&&(g[m]=g[p]);const x=Gn.getState(),y=p?x.pinnedWidgets[p]:void 0,N=d?x.pinnedWidgets[d]:void 0;y&&!x.pinnedWidgets[m]?x.setPinnedWidget(y,m):N&&!x.pinnedWidgets[m]&&x.setPinnedWidget(N,m),r({currentWorkflowKey:m,savedWorkflowStates:g}),x.restorePinnedWidgetForWorkflow(m,i)},setExecutionState:(o,i,d,p)=>{r(h=>{const m=Date.now(),g=o?d??h.executingPromptId:null,x=o?i??h.executingNodeId:null,y={isExecuting:o,executingNodeId:x,executingPromptId:g,progress:p},N=(w,M)=>{if(!w||M<=0||h.workflow?.nodes.find(A=>String(A.id)===w)?.mode===4)return h.nodeDurationStats;const O=String(w),D=h.nodeDurationStats[O],z=(D?.count??0)+1,_=D?(D.avgMs*D.count+M)/z:M;return{...h.nodeDurationStats,[O]:{avgMs:_,count:z}}};if(!o){if(h.currentNodeStartTime&&h.executingNodeId){const w=m-h.currentNodeStartTime;y.nodeDurationStats=N(h.executingNodeId,w)}if(h.executionStartTime&&h.workflow){const w=m-h.executionStartTime,M=xi(h.workflow),j=h.workflowDurationStats[M],O=(j?.count??0)+1,D=j?(j.avgMs*j.count+w)/O:w;y.workflowDurationStats={...h.workflowDurationStats,[M]:{avgMs:D,count:O}}}return y.executionStartTime=null,y.currentNodeStartTime=null,y}const k=g&&g!==h.executingPromptId,S=x&&x!==h.executingNodeId;if(k&&(y.executionStartTime=m,y.currentNodeStartTime=m),S&&h.currentNodeStartTime&&h.executingNodeId){const w=m-h.currentNodeStartTime;y.nodeDurationStats=N(h.executingNodeId,w),y.currentNodeStartTime=m}else h.currentNodeStartTime||(y.currentNodeStartTime=m);return y})},queueWorkflow:async o=>{const i=jn.getState(),d=i.seedModes,p=i.seedLastValues,{workflow:h,nodeTypes:m,embedWorkflow:g}=l();if(!h||!m){Zt.getState().setError("Node types are still loading. Try again in a moment.");return}Zt.getState().setError(null),r({isLoading:!0});try{let x=h,y=g,N={...p};for(let k=0;k<o;k++){const S={},w=x.nodes.map(z=>{const _=Ca(x,m,z);if(_===null||!Array.isArray(z.widgets_values))return z;const A=d[z.id]??ld(x,m,z),L=_+1;if(typeof z.widgets_values[L]=="string"){if(!A||A==="fixed")return z;const ve=Number(z.widgets_values[_])||0;let ae;switch(A){case"randomize":ae=Mo(m,z);break;case"increment":ae=ve+1;break;case"decrement":ae=ve-1;break;default:return z}const re=[...z.widgets_values];return re[_]=ae,{...z,widgets_values:re}}const U=Number(z.widgets_values[_]),W=N[z.id]??null;let ne=null;return $d(U)?ne=k1(U,W,m,z):A&&A!=="fixed"&&(A==="randomize"?ne=Mo(m,z):A==="increment"?ne=(typeof W=="number"?W:U)+1:A==="decrement"&&(ne=(typeof W=="number"?W:U)-1)),ne===null||(S[z.id]=ne,N={...N,[z.id]:ne}),z});if(x={...x,nodes:w},y){let z=y;for(const _ of w)z=ni(z,_);y=z}i.setSeedLastValues(N),r({workflow:x,embedWorkflow:y});const M={},j=new Set,O=new Map;for(const z of x.nodes){if(z.mode===4)continue;let _=null;if(m[z.type])_=z.type;else{const A=Object.entries(m).find(([,L])=>L.display_name===z.type||L.name===z.type);A&&(_=A[0])}_&&(j.add(z.id),O.set(z.id,_))}for(const z of x.nodes){if(z.mode===4)continue;const _=O.get(z.id);if(!_)continue;const A=a1(x,m,z,_,j,qd(x,z.id),S);M[String(z.id)]={class_type:_,inputs:A}}const D=await fetch(`${Bt}/api/prompt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:M,client_id:y0,extra_data:{extra_pnginfo:{workflow:y??x}}})});if(!D.ok){const z=await D.json(),_={};if(z.node_errors)for(const[A,L]of Object.entries(z.node_errors)){const B=L.errors;B&&B.length>0&&(_[A]=B.map(G=>({type:G.type,message:G.message,details:G.details,inputName:G.extra_info?.input_name})))}throw Object.keys(_).length>0&&s(_),new Error(z.error?.message||"Failed to queue prompt")}Zt.getState().clearNodeErrors()}}catch(x){Zt.getState().setError(x instanceof Error?x.message:"Failed to queue workflow")}finally{rt.getState().fetchQueue(),r({isLoading:!1})}},applyControlAfterGenerate:()=>{const{workflow:o}=l();if(!o)return;let i=!1;const d=o.nodes.map(p=>{if(p.type==="PrimitiveNode"){if(!Array.isArray(p.widgets_values))return p;const h=p.outputs?.[0]?.type,m=String(h).toUpperCase();if(m!=="INT"&&m!=="FLOAT")return p;const g=p.widgets_values?.[1];if(!g||g==="fixed")return p;const x=p.widgets_values?.[0];if(typeof x!="number")return p;let y=x;if(g==="increment"?y=m==="INT"?x+1:x+.01:g==="decrement"?y=m==="INT"?x-1:x-.01:g==="randomize"&&(y=m==="INT"?Math.floor(Math.random()*0xffffffffffff):Math.random()),y!==x){i=!0;const N=[...p.widgets_values];return N[0]=y,{...p,widgets_values:N}}}return p});i&&r({workflow:{...o,nodes:d}})}}},{name:"workflow-storage",storage:qr(()=>localStorage),partialize:r=>({workflow:r.workflow,embedWorkflow:r.embedWorkflow,originalWorkflow:r.originalWorkflow,currentFilename:r.currentFilename,currentWorkflowKey:r.currentWorkflowKey,savedWorkflowStates:r.savedWorkflowStates,runCount:r.runCount,manuallyHiddenNodes:r.manuallyHiddenNodes,collapsedGroups:r.collapsedGroups,hiddenGroups:r.hiddenGroups,collapsedSubgraphs:r.collapsedSubgraphs,hiddenSubgraphs:r.hiddenSubgraphs,connectionButtonsVisible:r.connectionButtonsVisible,isExecuting:r.isExecuting,executingNodeId:r.executingNodeId,executingPromptId:r.executingPromptId,progress:r.progress,executionStartTime:r.executionStartTime,currentNodeStartTime:r.currentNodeStartTime,nodeDurationStats:r.nodeDurationStats,workflowDurationStats:r.workflowDurationStats}),onRehydrateStorage:()=>r=>{}}));function xi(r){const l=[...r.nodes].sort((s,o)=>s.id-o.id).map(s=>({id:s.id,type:s.type,mode:s.mode,inputs:s.inputs?.map(o=>o.link??null)??[],outputs:s.outputs?.map(o=>o.links??[])??[]}));return JSON.stringify({nodes:l,links:r.links??[]})}const Md=lr(r=>({appMenuOpen:!1,setAppMenuOpen:l=>r({appMenuOpen:l})})),_n=lr((r,l)=>({history:[],isLoading:!1,addHistoryEntry:s=>{r(i=>i.history.some(d=>d.prompt_id===s.prompt_id)?i:{history:[s,...i.history]});const o=rt.getState();if(o.queueItemExpanded[s.prompt_id]===void 0&&o.setQueueItemExpanded(s.prompt_id,!0),s.workflow&&s.durationSeconds){const i=xi(s.workflow);J.getState().updateWorkflowDuration(i,s.durationSeconds*1e3)}},fetchHistory:async()=>{r({isLoading:!0});try{const s=await i1(50),o=Object.entries(s).map(([d,p])=>{const h=[];for(const M of Object.values(p.outputs))M.images&&h.push(...M.images),M.gifs&&h.push(...M.gifs),M.videos&&h.push(...M.videos);let m=Date.now(),g=null,x=null,y=!1;if(p.status?.messages)for(const[M,j]of p.status.messages)M==="execution_start"&&j.timestamp&&(m=j.timestamp,g=j.timestamp),(M==="execution_end"||M==="execution_success")&&j.timestamp&&(x=j.timestamp),M==="execution_error"&&(y=!0);g===null&&m&&(g=m);const N=g!==null&&x!==null&&x>=g?(x-g)/1e3:void 0,k=p.status?.status_str?.toLowerCase()||"",S=!y&&p.status?.completed!==!1&&!k.includes("error"),w=p.prompt?.[3]?.extra_pnginfo?.workflow;return{prompt_id:d,timestamp:m,durationSeconds:N,success:S,outputs:{images:h},prompt:p.prompt[2],workflow:w}});o.sort((d,p)=>p.timestamp-d.timestamp),r({history:o});const i=rt.getState();for(const d of o)if(i.queueItemExpanded[d.prompt_id]===void 0&&i.setQueueItemExpanded(d.prompt_id,!0),d.workflow&&d.durationSeconds){const p=xi(d.workflow);J.getState().updateWorkflowDuration(p,d.durationSeconds*1e3)}}catch(s){console.error("Failed to fetch history:",s)}finally{r({isLoading:!1})}},deleteItem:async s=>{try{await h1(s),r(o=>({history:o.history.filter(i=>i.prompt_id!==s)}))}catch(o){console.error("Failed to delete history item:",o)}},clearHistory:async()=>{try{await g1()}catch(s){console.error("Failed to clear history:",s);try{const o=l().history.map(i=>i.prompt_id);await fg(o)}catch(o){console.error("Failed to delete history items:",o)}}finally{r({history:[]})}},clearEmptyItems:async()=>{const s=l().history.filter(o=>o.outputs.images.length===0).map(o=>o.prompt_id);if(s.length!==0)try{await fg(s),r(o=>({history:o.history.filter(i=>!s.includes(i.prompt_id))}))}catch(o){console.error("Failed to delete empty history items:",o)}}})),_t=lr()(Wr((r,l)=>({source:"output",currentFolder:null,folders:[],files:[],isLoading:!1,error:null,viewMode:"grid",showHidden:!1,filter:{search:"",favoritesOnly:!1,type:"all"},sort:{mode:"modified"},favorites:[],selectionMode:!1,selectedIds:[],selectionActionOpen:!1,filterModalOpen:!1,outputsViewerOpen:!1,setSource:s=>{r({source:s,currentFolder:null,files:[],folders:[],selectionMode:!1,selectedIds:[]}),l().fetchFolders(),l().fetchFiles()},setCurrentFolder:s=>{const{currentFolder:o}=l(),i=o?`${o}/${s}`:s;r({currentFolder:i,files:[],selectionMode:!1,selectedIds:[]}),l().fetchFiles()},navigateToPath:s=>{r({currentFolder:s,files:[],selectionMode:!1,selectedIds:[]}),l().fetchFiles()},navigateUp:()=>{const{currentFolder:s}=l();if(!s)return;const o=s.split("/");o.pop();const i=o.length>0?o.join("/"):null;r({currentFolder:i,files:[],selectionMode:!1,selectedIds:[]}),l().fetchFiles()},fetchFolders:async()=>{try{const s=await v1(),{source:o}=l();r({folders:o==="output"?s.output:s.input})}catch(s){console.error("Failed to fetch folders:",s)}},fetchFiles:async()=>{const{source:s,currentFolder:o,sort:i}=l();r({isLoading:!0,error:null});try{const d=await Nd(s,1e3,0,i.mode,!1,o);r({files:d,isLoading:!1})}catch(d){r({error:d.message,isLoading:!1})}},setFilter:s=>{r(o=>({filter:{...o.filter,...s}}))},setSort:s=>{r({sort:s}),l().fetchFiles()},setViewMode:s=>{r({viewMode:s})},toggleShowHidden:()=>{r(s=>({showHidden:!s.showHidden}))},toggleFavorite:s=>{r(o=>({favorites:o.favorites.includes(s)?o.favorites.filter(d=>d!==s):[...o.favorites,s]}))},toggleSelectionMode:()=>{r(s=>({selectionMode:!s.selectionMode,selectedIds:[],selectionActionOpen:!1}))},toggleSelection:s=>{r(o=>({selectedIds:o.selectedIds.includes(s)?o.selectedIds.filter(d=>d!==s):[...o.selectedIds,s]}))},selectAll:()=>{const s=l().getDisplayedFiles();r({selectedIds:s.map(o=>o.id)})},selectIds:(s,o="add")=>{r(i=>{if(o==="replace")return{selectedIds:[...s]};const d=new Set(i.selectedIds);return s.forEach(p=>d.add(p)),{selectedIds:Array.from(d)}})},clearSelection:()=>{r({selectedIds:[],selectionActionOpen:!1})},setSelectionActionOpen:s=>{r({selectionActionOpen:s})},setFilterModalOpen:s=>{r({filterModalOpen:s})},setOutputsViewerOpen:s=>{r({outputsViewerOpen:s})},addFavorites:s=>{r(o=>{const i=new Set(o.favorites);return s.forEach(d=>i.add(d)),{favorites:Array.from(i)}})},removeFavorites:s=>{r(o=>({favorites:o.favorites.filter(i=>!s.includes(i))}))},refresh:()=>{l().fetchFolders(),l().fetchFiles()},getDisplayedFiles:()=>{const{files:s,filter:o,favorites:i,showHidden:d,sort:p}=l();let h=[...s];if(d||(h=h.filter(g=>!g.name.startsWith("."))),o.search){const g=o.search.toLowerCase();h=h.filter(x=>x.name.toLowerCase().includes(g))}o.favoritesOnly&&(h=h.filter(g=>i.includes(g.id))),o.type!=="all"&&(h=h.filter(g=>g.type==="folder"||g.type===o.type));const m=p.mode.endsWith("-reverse")?-1:1;return p.mode.startsWith("name")?h.sort((g,x)=>g.name.localeCompare(x.name)*m):p.mode.startsWith("size")?h.sort((g,x)=>((g.size??0)-(x.size??0))*m):h.sort((g,x)=>((g.date??0)-(x.date??0))*m),h}}),{name:"outputs-storage",version:1,migrate:(r,l)=>{if(l===0){if(r.sort&&!r.sort.mode){const{field:s,order:o}=r.sort;s==="name"?r.sort={mode:o==="asc"?"name":"name-reverse"}:r.sort={mode:o==="desc"?"modified":"modified-reverse"}}r.filter&&!r.filter.type&&(r.filter.type="all")}return r},partialize:r=>({source:r.source,viewMode:r.viewMode,showHidden:r.showHidden,sort:r.sort,filter:r.filter,favorites:r.favorites})}));function G1(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:u.jsx("path",{d:"M12 11V16M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21ZM12.0498 8V8.1L11.9502 8.1002V8H12.0498Z"})})}function E0({className:r}){return u.jsx(G1,{className:r})}function q1(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M19 4H5L10.5 10.5V17L13.5 19V10.5L19 4Z"}),u.jsx("path",{d:"M2.5 9L4.5 7L6.5 9"}),u.jsx("path",{d:"M4.5 7V17"}),u.jsx("path",{d:"M2.5 15L4.5 17L6.5 15"})]})}function W1(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M6 4h9l3 3v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M9 10h6M9 14h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function F1(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M6 4h9l3 3v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M9 10h6M9 14h6M9 18h4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function $1(r){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:u.jsx("path",{d:"M4 20h16M6 16l4-4m0 0l4-4m-4 4l4 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function Y1(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M3 7h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M3 7l9 6 9-6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]})}function vl(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("circle",{cx:"12",cy:"5",r:"2",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"19",r:"2",fill:"currentColor"})]})}function Bl(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{d:"M10 17l5-5-5-5v10z"})})}function Wn(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{d:"M7 10l5 5 5-5H7z"})})}function vi(r){return u.jsx("svg",{viewBox:"0 0 20 20","aria-hidden":"true",...r,children:u.jsx("g",{transform:"translate(-164 -6319)",fill:"currentColor",children:u.jsx("path",{d:"M170.673,6324.726 L170.669,6324.729 C170.266,6325.104 170.244,6325.735 170.62,6326.137 L171.577,6327.158 C171.876,6327.478 171.649,6328 171.212,6328 L165,6328 C164.447,6328 164,6328.448 164,6329 C164,6329.552 164.447,6330 165,6330 L171.197,6330 C171.637,6330 171.862,6330.527 171.558,6330.845 L170.63,6331.819 C170.248,6332.218 170.266,6332.852 170.669,6333.229 C171.068,6333.603 171.695,6333.584 172.071,6333.186 L174.76,6330.338 C175.49,6329.564 175.487,6328.354 174.753,6327.585 L172.067,6324.769 C171.692,6324.376 171.071,6324.357 170.673,6324.726 M182.222,6319 L175.777,6319 C174.8,6319 174,6319.68 174,6321.111 L174,6322.007 C174,6322.555 174.444,6323 174.993,6323 L175.006,6323 C175.555,6323 176,6322.555 176,6322.007 L176,6321.993 C176,6321.445 176.444,6321 176.993,6321 L181.006,6321 C181.555,6321 182,6321.445 182,6321.993 L182,6336.007 C182,6336.555 181.555,6337 181.006,6337 L176.993,6337 C176.444,6337 176,6336.555 176,6336.007 L176,6335.993 C176,6335.445 175.555,6335 175.006,6335 L174.993,6335 C174.444,6335 174,6335.445 174,6335.993 L174,6337.111 C174,6338.293 174.847,6339 175.777,6339 L182.222,6339 C183.204,6339 184,6338.204 184,6337.222 L184,6337.111 L184,6320.778 C184,6319.796 183.204,6319 182.222,6319"})})})}function Xd(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M18.4101 3.6512L20.5315 5.77252C21.4101 6.6512 21.4101 8.07582 20.5315 8.9545L9.54019 19.9458C9.17774 20.3082 8.70239 20.536 8.19281 20.5915L4.57509 20.9856C3.78097 21.072 3.11061 20.4017 3.1971 19.6076L3.59111 15.9898C3.64661 15.4803 3.87444 15.0049 4.23689 14.6425L15.2282 3.6512C16.1068 2.77252 17.5315 2.77252 18.4101 3.6512Z",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M15.2282 3.6512C16.1068 2.77252 17.5315 2.77252 18.4101 3.6512L20.5315 5.77252C21.4101 6.6512 21.4101 8.07582 20.5315 8.9545L18.7283 10.7576L13.425 5.45432L15.2282 3.6512Z",stroke:"currentColor",strokeWidth:"1.5"})]})}function zo(r){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:u.jsx("path",{d:"M6 6l12 12M18 6l-12 12",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})})}function Il(r){return u.jsx("svg",{viewBox:"0 0 16 16","aria-hidden":"true",...r,children:u.jsx("path",{d:"M6.4 11.2L3.2 8l1.1-1.1 2.1 2.1 5-5L12.5 5l-6.1 6.2Z",fill:"currentColor"})})}function Q1(r){return u.jsx("svg",{viewBox:"0 0 16 16","aria-hidden":"true",...r,children:u.jsx("path",{d:"M4.2 4.2l7.6 7.6m0-7.6l-7.6 7.6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function X1(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M7 18a4 4 0 0 1 0-8 6 6 0 0 1 11.3-2.2A4.5 4.5 0 0 1 18 18H7Z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M12 10v7m0 0l-3-3m3 3l3-3",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function zl(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function ur(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24M1 1l22 22"})})}function Hr(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M3 6h18M8 6V4h8v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),u.jsx("path",{d:"M10 11v6M14 11v6"})]})}function P1(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M15 9l-6 6M9 9l6 6"})]})}function ui(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M23 4v6h-6M1 20v-6h6"}),u.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}function Z1(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:u.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"})})}function Oa(r){return u.jsx("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.3",d:"M9.18613 3.09999H6.81377M9.18613 12.9H7.55288c-3.08678 0-5.35171-2.99581-4.60305-6.08843l.3054-1.26158M14.7486 2.1721l-.5931 2.45c-.132.54533-.6065.92789-1.1508.92789h-2.2993c-.77173 0-1.33797-.74895-1.1508-1.5221l.5931-2.45c.132-.54533.6065-.9279 1.1508-.9279h2.2993c.7717 0 1.3379.74896 1.1508 1.52211Zm-8.3033 0-.59309 2.45c-.13201.54533-.60646.92789-1.15076.92789H2.4021c-.7717 0-1.33793-.74895-1.15077-1.5221l.59309-2.45c.13201-.54533.60647-.9279 1.15077-.9279h2.29935c.77169 0 1.33792.74896 1.15076 1.52211Zm8.3033 9.8-.5931 2.45c-.132.5453-.6065.9279-1.1508.9279h-2.2993c-.77173 0-1.33797-.749-1.1508-1.5221l.5931-2.45c.132-.5453.6065-.9279 1.1508-.9279h2.2993c.7717 0 1.3379.7489 1.1508 1.5221Z"})})}function T0(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...r,children:u.jsx("path",{d:"M13 20.74C12.9039 20.7541 12.8062 20.7541 12.71 20.74C12.5724 20.6823 12.4551 20.5849 12.3732 20.4602C12.2912 20.3355 12.2484 20.1892 12.25 20.04V16.7H3.00001C2.81189 16.6956 2.63208 16.6216 2.49538 16.4923C2.35868 16.363 2.27481 16.1876 2.26001 16V8.00002C2.25463 7.89856 2.26965 7.79706 2.30417 7.7015C2.3387 7.60595 2.39204 7.51829 2.46103 7.44371C2.53002 7.36913 2.61326 7.30913 2.70584 7.26727C2.79841 7.22542 2.89844 7.20255 3.00001 7.20002H12.25V4.01002C12.2498 3.86106 12.2946 3.71551 12.3784 3.59241C12.4623 3.4693 12.5813 3.37436 12.72 3.32002C12.8551 3.26039 13.0053 3.24376 13.1502 3.27238C13.2951 3.301 13.4277 3.37349 13.53 3.48002L21.53 11.48C21.6705 11.6206 21.7493 11.8113 21.7493 12.01C21.7493 12.2088 21.6705 12.3994 21.53 12.54L13.53 20.54C13.4601 20.6079 13.377 20.6608 13.2858 20.6952C13.1946 20.7296 13.0973 20.7448 13 20.74ZM3.76001 15.2H13C13.1981 15.2026 13.3874 15.2825 13.5275 15.4226C13.6676 15.5626 13.7474 15.7519 13.75 15.95V18.18L19.93 12L13.75 5.83002V8.00002C13.7477 8.19843 13.6689 8.3883 13.53 8.53002C13.3817 8.65257 13.1919 8.71343 13 8.70002H3.76001V15.2Z",fill:"currentColor"})})}function K1(r){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M10.667 2.667c1.45.008 2.235.072 2.748.585C14 3.837 14 4.78 14 6.666v4c0 1.885 0 2.828-.585 3.414-.586.585-1.529.585-3.415.585H6c-1.886 0-2.829 0-3.414-.585C2 13.494 2 12.55 2 10.666v-4c0-1.886 0-2.829.586-3.414.512-.513 1.297-.577 2.747-.585",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M5.333 2.333c0-.552.448-1 1-1h3.334c.552 0 1 .448 1 1v.667c0 .553-.448 1-1 1H6.333c-.552 0-1-.447-1-1v-.667Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"})]})}function J1(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})})}function eb(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[u.jsx("rect",{x:"9",y:"9",width:"10",height:"12",rx:"2"}),u.jsx("path",{d:"M5 15V5a2 2 0 0 1 2-2h8"})]})}function tb(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[u.jsx("circle",{cx:"12",cy:"12",r:"9"}),u.jsx("path",{d:"M7 12h10"})]})}function yi(r){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"none","aria-hidden":"true",...r,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})})}function Hl(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:u.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}function _0({showSlash:r=!1,...l}){return u.jsxs("svg",{viewBox:"0 0 32 32","aria-hidden":"true",overflow:"visible",...l,children:[u.jsx("path",{d:"M28 28H4a2.002 2.002 0 0 1-2-2V21h2v5h24v-5h2v5a2.002 2.002 0 0 1-2 2Z",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"21",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"16",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"11",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"6",width:"18",height:"2",fill:"currentColor"}),u.jsx("path",{d:"M16 -3l5 4H11l5-4Z",fill:"currentColor"}),r&&u.jsx("line",{x1:"2",y1:"30",x2:"28",y2:"4",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})]})}function nb({progress:r,radius:l=11,...s}){const o=Math.min(100,Math.max(0,r)),i=2*Math.PI*l,d=i*(1-o/100);return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...s,children:u.jsx("circle",{cx:"12",cy:"12",r:l,fill:"none",stroke:"rgba(34,197,94,0.9)",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:i,strokeDashoffset:d})})}function rb(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}function Pd(r){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})}function lb(r){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{fillRule:"evenodd",d:"M4 10a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1z",clipRule:"evenodd"})})}function ab(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[u.jsx("circle",{cx:"11",cy:"11",r:"7"}),u.jsx("path",{d:"M20 20l-3.5-3.5"})]})}function ob(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"3",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("circle",{cx:"9",cy:"9",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"15",cy:"15",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"15",cy:"9",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"9",cy:"15",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"})]})}function Zd(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}function L0(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{d:"M12 2L1 21h22L12 2zm0 3.5L19.5 19h-15L12 5.5zM11 10v4h2v-4h-2zm0 6v2h2v-2h-2z"})})}function bi(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:u.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}function vg(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[u.jsx("rect",{x:"3",y:"7",width:"12",height:"10",rx:"2"}),u.jsx("path",{d:"M15 10l5-3v10l-5-3z"})]})}function To(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{d:"M19.1835 7.80516L16.2188 4.83755C14.1921 2.8089 13.1788 1.79457 12.0904 2.03468C11.0021 2.2748 10.5086 3.62155 9.5217 6.31506L8.85373 8.1381C8.59063 8.85617 8.45908 9.2152 8.22239 9.49292C8.11619 9.61754 7.99536 9.72887 7.86251 9.82451C7.56644 10.0377 7.19811 10.1392 6.46145 10.3423C4.80107 10.8 3.97088 11.0289 3.65804 11.5721C3.5228 11.8069 3.45242 12.0735 3.45413 12.3446C3.45809 12.9715 4.06698 13.581 5.28476 14.8L6.69935 16.2163L2.22345 20.6964C1.92552 20.9946 1.92552 21.4782 2.22345 21.7764C2.52138 22.0746 3.00443 22.0746 3.30236 21.7764L7.77841 17.2961L9.24441 18.7635C10.4699 19.9902 11.0827 20.6036 11.7134 20.6045C11.9792 20.6049 12.2404 20.5358 12.4713 20.4041C13.0192 20.0914 13.2493 19.2551 13.7095 17.5825C13.9119 16.8472 14.013 16.4795 14.2254 16.1835C14.3184 16.054 14.4262 15.9358 14.5468 15.8314C14.8221 15.593 15.1788 15.459 15.8922 15.191L17.7362 14.4981C20.4 13.4973 21.7319 12.9969 21.9667 11.9115C22.2014 10.826 21.1954 9.81905 19.1835 7.80516Z"})})}function Od(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{d:"M15.9894 4.9502L16.52 4.42014L15.9894 4.9502ZM19.0716 8.03562L18.541 8.56568L19.0716 8.03562ZM8.73837 19.429L8.20777 19.9591L8.73837 19.429ZM4.62169 15.3081L5.15229 14.7781L4.62169 15.3081ZM17.5669 14.9943L17.3032 14.2922L17.5669 14.9943ZM15.6498 15.7146L15.9136 16.4167H15.9136L15.6498 15.7146ZM8.3322 8.38177L7.62798 8.12375L8.3322 8.38177ZM9.02665 6.48636L9.73087 6.74438V6.74438L9.02665 6.48636ZM5.84504 10.6735L6.04438 11.3965L5.84504 10.6735ZM7.30167 10.1351L6.86346 9.52646L6.86346 9.52646L7.30167 10.1351ZM7.67582 9.79038L8.24665 10.2768H8.24665L7.67582 9.79038ZM14.251 16.3805L14.742 16.9475L14.742 16.9475L14.251 16.3805ZM13.3806 18.2012L12.6574 18.0022V18.0022L13.3806 18.2012ZM13.9169 16.7466L13.3075 16.3094L13.3075 16.3094L13.9169 16.7466ZM2.71846 12.7552L1.96848 12.76L1.96848 12.76L2.71846 12.7552ZM2.93045 11.9521L2.28053 11.5778H2.28053L2.93045 11.9521ZM11.3052 21.3431L11.3064 20.5931H11.3064L11.3052 21.3431ZM12.0933 21.1347L11.7215 20.4833L11.7215 20.4833L12.0933 21.1347ZM11.6973 2.03606L11.8588 2.76845L11.6973 2.03606ZM1.4694 21.4699C1.17666 21.763 1.1769 22.2379 1.46994 22.5306C1.76298 22.8233 2.23786 22.8231 2.5306 22.5301L1.4694 21.4699ZM7.18383 17.8721C7.47657 17.5791 7.47633 17.1042 7.18329 16.8114C6.89024 16.5187 6.41537 16.5189 6.12263 16.812L7.18383 17.8721ZM15.4588 5.48026L18.541 8.56568L19.6022 7.50556L16.52 4.42014L15.4588 5.48026ZM9.26897 18.8989L5.15229 14.7781L4.09109 15.8382L8.20777 19.9591L9.26897 18.8989ZM17.3032 14.2922L15.386 15.0125L15.9136 16.4167L17.8307 15.6964L17.3032 14.2922ZM9.03642 8.63979L9.73087 6.74438L8.32243 6.22834L7.62798 8.12375L9.03642 8.63979ZM6.04438 11.3965C6.75583 11.2003 7.29719 11.0625 7.73987 10.7438L6.86346 9.52646C6.69053 9.65097 6.46601 9.72428 5.6457 9.95044L6.04438 11.3965ZM7.62798 8.12375C7.33502 8.92332 7.24338 9.14153 7.10499 9.30391L8.24665 10.2768C8.60041 9.86175 8.7823 9.33337 9.03642 8.63979L7.62798 8.12375ZM7.73987 10.7438C7.92696 10.6091 8.09712 10.4523 8.24665 10.2768L7.10499 9.30391C7.0337 9.38757 6.9526 9.46229 6.86346 9.52646L7.73987 10.7438ZM15.386 15.0125C14.697 15.2714 14.1716 15.4571 13.76 15.8135L14.742 16.9475C14.9028 16.8082 15.1192 16.7152 15.9136 16.4167L15.386 15.0125ZM14.1037 18.4001C14.329 17.5813 14.4021 17.3569 14.5263 17.1838L13.3075 16.3094C12.9902 16.7517 12.8529 17.2919 12.6574 18.0022L14.1037 18.4001ZM13.76 15.8135C13.5903 15.9605 13.4384 16.1269 13.3075 16.3094L14.5263 17.1838C14.5887 17.0968 14.6611 17.0175 14.742 16.9475L13.76 15.8135ZM5.15229 14.7781C4.50615 14.1313 4.06799 13.691 3.78366 13.3338C3.49835 12.9753 3.46889 12.8201 3.46845 12.7505L1.96848 12.76C1.97215 13.3422 2.26127 13.8297 2.61002 14.2679C2.95976 14.7073 3.47115 15.2176 4.09109 15.8382L5.15229 14.7781ZM5.6457 9.95044C4.80048 10.1835 4.10396 10.3743 3.58296 10.5835C3.06341 10.792 2.57116 11.0732 2.28053 11.5778L3.58038 12.3264C3.615 12.2663 3.71693 12.146 4.1418 11.9755C4.56523 11.8055 5.16337 11.6394 6.04438 11.3965L5.6457 9.95044ZM3.46845 12.7505C3.46751 12.6016 3.50616 12.4553 3.58038 12.3264L2.28053 11.5778C2.07354 11.9372 1.96586 12.3452 1.96848 12.76L3.46845 12.7505ZM8.20777 19.9591C8.83164 20.5836 9.34464 21.0987 9.78647 21.4506C10.227 21.8015 10.7179 22.0922 11.3041 22.0931L11.3064 20.5931C11.2369 20.593 11.0814 20.5644 10.721 20.2773C10.3618 19.9912 9.91923 19.5499 9.26897 18.8989L8.20777 19.9591ZM12.6574 18.0022C12.4133 18.8897 12.2462 19.4924 12.0751 19.9188C11.9033 20.3467 11.7821 20.4487 11.7215 20.4833L12.465 21.7861C12.974 21.4956 13.2573 21.0004 13.4671 20.4775C13.6776 19.9532 13.8694 19.2516 14.1037 18.4001L12.6574 18.0022ZM11.3041 22.0931C11.7112 22.0937 12.1114 21.9879 12.465 21.7861L11.7215 20.4833C11.595 20.5555 11.4519 20.5933 11.3064 20.5931L11.3041 22.0931ZM18.541 8.56568C19.6045 9.63022 20.3403 10.3695 20.7917 10.9788C21.2353 11.5774 21.2863 11.8959 21.2321 12.1464L22.6982 12.4634C22.8881 11.5854 22.5382 10.8162 21.9969 10.0857C21.4635 9.36592 20.6305 8.53486 19.6022 7.50556L18.541 8.56568ZM17.8307 15.6964C19.1921 15.1849 20.294 14.773 21.0771 14.3384C21.8718 13.8973 22.5083 13.3416 22.6982 12.4634L21.2321 12.1464C21.178 12.3968 21.0001 12.6655 20.3491 13.0268C19.6865 13.3946 18.7112 13.7632 17.3032 14.2922L17.8307 15.6964ZM16.52 4.42014C15.4841 3.3832 14.6481 2.54353 13.9246 2.00638C13.1908 1.46165 12.4175 1.10912 11.5357 1.30367L11.8588 2.76845C12.1086 2.71335 12.4277 2.7633 13.0304 3.21075C13.6433 3.66579 14.3876 4.40801 15.4588 5.48026L16.52 4.42014ZM9.73087 6.74438C10.2525 5.32075 10.6161 4.33403 10.9812 3.66315C11.3402 3.00338 11.609 2.82357 11.8588 2.76845L11.5357 1.30367C10.654 1.49819 10.1005 2.14332 9.66362 2.94618C9.23278 3.73793 8.82688 4.85154 8.32243 6.22834L9.73087 6.74438ZM2.5306 22.5301L7.18383 17.8721L6.12263 16.812L1.4694 21.4699L2.5306 22.5301Z"})})}function wi(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:u.jsx("path",{d:"M9 6l6 6-6 6"})})}function A0(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:u.jsx("path",{d:"M15 19l-7-7 7-7"})})}function Ed({isBypassed:r,...l}){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:r?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M5 12h14"}),u.jsx("path",{d:"M12 5l7 7-7 7"})]}):u.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}function sb({nodeId:r,connectionHighlightMode:l,leftLineCount:s,rightLineCount:o,...i}){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...i,children:[u.jsxs("defs",{children:[u.jsx("clipPath",{id:`node-rect-left-${r}`,children:u.jsx("rect",{x:"0",y:"0",width:"12",height:"24"})}),u.jsx("clipPath",{id:`node-rect-right-${r}`,children:u.jsx("rect",{x:"12",y:"0",width:"12",height:"24"})})]}),l==="off"?u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",className:"text-gray-500"}):u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",strokeLinejoin:"round",clipPath:`url(#node-rect-left-${r})`,className:l==="inputs"||l==="both"?"text-orange-500":"text-gray-500"}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",strokeLinejoin:"round",clipPath:`url(#node-rect-right-${r})`,className:l==="outputs"||l==="both"?"text-orange-500":"text-gray-500"})]}),u.jsxs("g",{className:l==="inputs"||l==="both"?"text-orange-500":"text-gray-500",children:[s===1&&u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),s===2&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"8.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"15.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),s>=3&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-2.743",y2:"6.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-2.743",y2:"17.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})]}),u.jsxs("g",{className:l==="outputs"||l==="both"?"text-orange-500":"text-gray-500",children:[o===1&&u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),o===2&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"8.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"15.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),o>=3&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"26.743",y2:"6.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"26.743",y2:"17.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})]})]})}function ib(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsxs("defs",{children:[u.jsx("clipPath",{id:"legend-trace-left",children:u.jsx("rect",{x:"0",y:"0",width:"12",height:"24"})}),u.jsx("clipPath",{id:"legend-trace-right",children:u.jsx("rect",{x:"12",y:"0",width:"12",height:"24"})})]}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",clipPath:"url(#legend-trace-left)",className:"text-gray-400"}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",clipPath:"url(#legend-trace-right)",className:"text-orange-500"}),u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",className:"text-gray-400"}),u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",className:"text-orange-500"})]})}function R0(r){return u.jsx("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.3",d:"m14.6685 5.7416.6425-2.57c.2028-.811-.4106-1.5967-1.2466-1.5967H2.5782a1.285 1.285 0 0 0-1.2467.9733l-.6425 2.57c-.2027.8111.4107 1.5968 1.2467 1.5968h11.4861a1.285 1.285 0 0 0 1.2467-.9734Zm0 7.7102.6425-2.5701c.2028-.811-.4106-1.5967-1.2466-1.5967h-5.061a1.285 1.285 0 0 0-1.2467.9734l-.6425 2.5701c-.2028.811.4106 1.5966 1.2466 1.5966h5.061a1.285 1.285 0 0 0 1.2467-.9733Zm-10.2802 0 .6425-2.5701c.2027-.811-.4107-1.5967-1.2467-1.5967H2.5782a1.285 1.285 0 0 0-1.2467.9734L.689 12.8285c-.2027.811.4107 1.5966 1.2467 1.5966h1.206a1.285 1.285 0 0 0 1.2466-.9733Z"})})}function ub(r){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:u.jsx("path",{d:"M12 3v10m0 0l-4-4m4 4l4-4M5 19h14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function cb(r){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M10.667 2.667c1.45.008 2.235.072 2.748.585C14 3.837 14 4.78 14 6.666v4c0 1.885 0 2.828-.585 3.414-.586.585-1.529.585-3.415.585H6c-1.886 0-2.829 0-3.414-.585C2 13.494 2 12.55 2 10.666v-4c0-1.886 0-2.829.586-3.414.512-.513 1.297-.577 2.747-.585",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M5.333 2.333c0-.552.448-1 1-1h3.334c.552 0 1 .448 1 1v.667c0 .553-.448 1-1 1H6.333c-.552 0-1-.447-1-1v-.667Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M8 6.667v4.666m0 0L5.667 9m2.333 2.333L10.333 9",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function _o(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M3 7a2 2 0 0 1 2-2h4l2 2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M3 9h18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function db(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M5 4h12l3 3v13H4V5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("rect",{x:"7",y:"4",width:"8",height:"4",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"13",width:"10",height:"6",rx:"1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]})}function fb(r){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M12.667 14H3.333C2.597 14 2 13.403 2 12.667V3.333C2 2.597 2.597 2 3.333 2h7.334L14 5.333v7.334c0 .736-.597 1.333-1.333 1.333Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M11.333 14v-4H4.667v4M4.667 2v3.333h5.333",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function pb(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),u.jsx("path",{d:"M12 2v3M12 19v3M4.22 4.22l2.12 2.12M17.66 17.66l2.12 2.12M2 12h3M19 12h3M4.22 19.78l2.12-2.12M17.66 6.34l2.12-2.12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"})]})}function mb(r){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:u.jsx("path",{d:"M21 14.5A9 9 0 0 1 9.5 3a7 7 0 1 0 11.5 11.5Z",fill:"currentColor"})})}function hb(r){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",fill:"currentColor",...r,children:u.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"})})}function yg(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}function gb(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function xb(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function vb(r){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:u.jsx("path",{d:"M8 4h8M8 20h8M9 6h6l-1 4 1 4H9l1-4-1-4Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function yb({progress:r,radius:l=10,trackColor:s="#e5e7eb",progressColor:o="#3b82f6",...i}){const d=Math.min(100,Math.max(0,r)),p=2*Math.PI*l,h=p*(1-d/100);return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...i,children:[u.jsx("circle",{cx:"12",cy:"12",r:l,fill:"none",stroke:s,strokeWidth:"2"}),u.jsx("circle",{cx:"12",cy:"12",r:l,fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeDasharray:p,strokeDashoffset:h})]})}var rr=g0();function bb({open:r,onClose:l,side:s,title:o,children:i}){const d=b.useRef(null);return b.useEffect(()=>{if(!r)return;const p=h=>{h.key==="Escape"&&l()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[r,l]),b.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]),r?rr.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[2300]",children:[u.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:l}),u.jsxs("div",{ref:d,className:`
          absolute top-0 bottom-0 w-[85%] max-w-sm bg-white shadow-xl
          flex flex-col overflow-hidden
          ${s==="left"?"left-0 animate-slide-in-left":"right-0 animate-slide-in-right"}
        `,style:{animation:`${s==="left"?"slideInLeft":"slideInRight"} 0.2s ease-out`},children:[o&&u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:o}),u.jsx("button",{onClick:l,className:`w-10 h-10 flex items-center justify-center rounded-full
                         text-gray-500 hover:bg-gray-100 text-2xl`,children:""})]}),u.jsx("div",{className:"flex-1 overflow-auto p-4 overscroll-contain scroll-container",children:i})]}),u.jsx("style",{children:`
        @keyframes slideInLeft {
          from { transform: translateX(-100%); }
          to { transform: translateX(0); }
        }
        @keyframes slideInRight {
          from { transform: translateX(100%); }
          to { transform: translateX(0); }
        }
      `})]}),document.body):null}function Bo({title:r,onBack:l}){return u.jsxs("button",{onClick:l,className:"w-full flex items-center gap-2 text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:[u.jsx(A0,{className:"w-5 h-5 text-gray-400"}),u.jsx("span",{children:r})]})}function wb({onBack:r}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Bo,{title:"Icon Legend",onBack:r}),u.jsxs("div",{className:"space-y-3 overflow-y-auto flex-1 pb-4",children:[u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-500 text-white rounded-lg font-bold text-xs shadow-sm",children:"Run"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Run"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Execute current workflow"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-white border border-gray-200 rounded-lg text-gray-700 shadow-sm overflow-hidden",children:u.jsx(_0,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Queue / Follow"}),u.jsx("p",{className:"text-xs text-gray-500",children:"View queue & follow execution"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-yellow-500 text-white rounded-lg shadow-sm",children:u.jsx(To,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Pinned Widget"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Quick access to pinned parameter"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full border border-gray-200 text-gray-700 font-bold",children:""}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Input"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Node input connection point"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full border border-gray-200 text-gray-700 font-bold",children:""}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Output"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Node output connection point"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(ib,{className:"w-6 h-6 overflow-visible"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Trace Connections"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Highlight connected nodes"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-500",children:u.jsx(Wn,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Fold / Unfold"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Collapse or expand node card"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(Zd,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Bypass"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Skip node execution"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(ur,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Hide"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Hide node from view"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(zl,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Show"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Make node visible again"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(Od,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Pin widget"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Pin widget to bottom bar"})]})]})]})]})}function Io({error:r,onDismiss:l}){return r?u.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[r,u.jsx("button",{onClick:l,className:"ml-2 text-red-500 font-medium",children:"Dismiss"})]}):null}function Sb({error:r,workflow:l,currentFilename:s,isDirty:o,loading:i,theme:d,menuSectionsOpen:p,fileInputRef:h,loadSectionRef:m,saveSectionRef:g,appearanceSectionRef:x,infoSectionRef:y,onDismissError:N,onFileChange:k,onLoadFromFile:S,onToggleSection:w,onOpenUserWorkflows:M,onOpenTemplates:j,onOpenPasteJson:O,onSave:D,onOpenSaveAs:z,onToggleTheme:_,onOpenLegend:A}){return u.jsxs(u.Fragment,{children:[u.jsx("input",{ref:h,type:"file",accept:".json",onChange:k,className:"hidden"}),u.jsx(Io,{error:r,onDismiss:N}),u.jsxs("section",{ref:m,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>w("load"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.load,children:[u.jsx("span",{children:"Load Workflow"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.load?"rotate-0":"-rotate-90"}`})]}),p.load&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("button",{onClick:M,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(Oa,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"My Workflows"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:j,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(R0,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Templates"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:O,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(cb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Paste JSON"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:S,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(_o,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"From Device"})]})]})]}),u.jsxs("section",{ref:g,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>w("save"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.save,children:[u.jsx("span",{children:"Save Workflow"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.save?"rotate-0":"-rotate-90"}`})]}),p.save&&u.jsxs("div",{className:"space-y-2",children:[s&&u.jsxs("button",{onClick:D,disabled:!l||!o||i,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                           rounded-xl text-left hover:bg-gray-50 min-h-[56px]
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[u.jsx(db,{className:"w-6 h-6 text-gray-600 shrink-0"}),u.jsxs("span",{className:"font-medium text-gray-900 truncate",children:["Save ",s.replace(".json","")]})]}),u.jsxs("button",{onClick:z,disabled:!l,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(fb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Save As..."}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]})]})]}),u.jsx("div",{className:"border-t border-gray-200 mb-6"}),u.jsxs("section",{ref:x,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>w("appearance"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.appearance,children:[u.jsx("span",{children:"Appearance"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.appearance?"rotate-0":"-rotate-90"}`})]}),p.appearance&&u.jsx("div",{className:"space-y-2",children:u.jsxs("button",{onClick:_,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[d==="dark"?u.jsx(mb,{className:"w-6 h-6 text-gray-600"}):u.jsx(pb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:d==="dark"?"Dark mode":"Light mode"})]})})]}),u.jsxs("section",{ref:y,className:"mt-auto pt-6 border-t border-gray-200",children:[u.jsxs("button",{type:"button",onClick:()=>w("info"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.info,children:[u.jsx("span",{children:"About"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.info?"rotate-0":"-rotate-90"}`})]}),p.info&&u.jsxs("div",{className:"space-y-2 pb-4",children:[u.jsxs("a",{href:"https://github.com/cosmicbuffalo/comfyui-mobile-frontend",target:"_blank",rel:"noopener noreferrer",className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(hb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Open in GitHub"}),u.jsx(yg,{className:"w-4 h-4 ml-auto text-gray-400"})]}),u.jsxs("button",{onClick:A,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(gb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Icon Legend"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("a",{href:"https://github.com/cosmicbuffalo/comfyui-mobile-frontend/blob/main/USER_GUIDE.md",target:"_blank",rel:"noopener noreferrer",className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(xb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"User Manual"}),u.jsx(yg,{className:"w-4 h-4 ml-auto text-gray-400"})]})]})]})]})}async function Nb(r){if(navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(r);return}catch{}const l=document.createElement("textarea");l.value=r,l.readOnly=!0,l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.opacity="0",document.body.appendChild(l),l.focus(),l.select(),l.setSelectionRange(0,l.value.length),document.execCommand("copy"),document.body.removeChild(l)}function bg(r,l,s){const o=r.current;if(o){if(o.focus(),l)o.setSelectionRange(l.start,l.end);else if(s!==void 0){const i=s.length;o.setSelectionRange(i,i)}}}function jb(r){const l=r.current;if(!l)return;const o=l.closest('[data-textarea-root="true"]')?.querySelector('[data-textarea-header="true"]');o?o.scrollIntoView({block:"nearest",behavior:"auto"}):l.scrollIntoView({block:"nearest",behavior:"auto"})}function Co({value:r,onChange:l,textareaRef:s,className:o=""}){const[i,d]=b.useState(!1),p=b.useRef(null),h=b.useRef(null),m=()=>{d(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>d(!1),900)},g=N=>{N.preventDefault()},x=async()=>{const N=s.current;N&&(h.current={start:N.selectionStart??0,end:N.selectionEnd??0});const k=s.current?.value??r;await Nb(k),requestAnimationFrame(()=>bg(s,h.current||void 0)),m()},y=()=>{l(""),requestAnimationFrame(()=>{bg(s,void 0,""),jb(s)})};return u.jsxs("div",{className:`flex items-center text-[11px] text-gray-500 ${o}`,children:[u.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-1 py-0.5 text-gray-600",onMouseDown:g,onClick:x,"aria-label":"Copy to clipboard",children:[i?u.jsx(Il,{className:"w-3.5 h-3.5 text-green-500"}):u.jsx(eb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Copy"})]}),u.jsx("span",{className:"text-gray-500/50",children:"|"}),u.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-1 py-0.5 text-red-600",onMouseDown:g,onClick:y,"aria-label":"Clear text",children:[u.jsx(tb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Clear"})]})]})}function Cb({error:r,pastedJson:l,pasteTextareaRef:s,onBack:o,onDismissError:i,onChangeJson:d,onLoad:p}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Bo,{title:"Paste JSON",onBack:o}),u.jsx(Io,{error:r,onDismiss:i}),u.jsxs("div",{className:"flex-1 flex flex-col space-y-4 overflow-hidden",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Paste your workflow JSON below."}),u.jsxs("div",{className:"group","data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1","data-textarea-header":"true",children:[u.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Workflow JSON"}),u.jsx(Co,{value:l,onChange:d,textareaRef:s,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),u.jsx("textarea",{ref:s,value:l,onChange:h=>d(h.target.value),placeholder:'{"last_node_id": ...}',className:"w-full flex-1 p-3 border border-gray-300 rounded-lg font-mono text-xs resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:o,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 min-h-[48px]",children:"Cancel"}),u.jsx("button",{onClick:p,disabled:!l.trim(),className:`flex-1 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600
                       disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px]`,children:"Load"})]})]})]})}function kb({error:r,loading:l,workflow:s,saveFilenameInput:o,onBack:i,onDismissError:d,onSaveFilenameChange:p,onSaveAs:h,onDownload:m}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Bo,{title:"Save Workflow",onBack:i}),u.jsx(Io,{error:r,onDismiss:d}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-xl",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Save to ComfyUI server:"}),u.jsx("input",{type:"text",value:o,onChange:g=>p(g.target.value),placeholder:"Enter filename (e.g., my_workflow.json)",className:"w-full p-3 border border-gray-300 rounded-lg mb-3"}),u.jsx("button",{onClick:h,disabled:!s||!o.trim()||l,className:`w-full py-3 bg-blue-500 text-white rounded-lg font-medium
                       disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px]`,children:l?"Saving...":"Save As"})]}),u.jsxs("button",{onClick:m,disabled:!s,className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                     rounded-xl text-left hover:bg-gray-50 min-h-[56px]
                     disabled:opacity-50 disabled:cursor-not-allowed`,children:[u.jsx(ub,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Download to Device"})]})]})]})}const Mb={sm:"w-4 h-4 border-2",md:"w-6 h-6 border-2",lg:"w-10 h-10 border-4"},Ob={blue:"border-blue-500 border-t-transparent",gray:"border-gray-200 border-t-gray-500"};function Kd({size:r="md",color:l="blue",className:s=""}){return u.jsx("div",{className:`animate-spin rounded-full ${Mb[r]} ${Ob[l]} ${s}`})}function Eb({error:r,loading:l,templates:s,onBack:o,onDismissError:i,onLoadTemplate:d}){const p=Object.entries(s);return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Bo,{title:"Templates",onBack:o}),u.jsx(Io,{error:r,onDismiss:i}),l?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx(Kd,{})}):p.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No templates available"}):u.jsx("div",{className:"space-y-4 overflow-y-auto flex-1",children:p.map(([h,m])=>u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-2",children:h}),u.jsx("div",{className:"space-y-2",children:m.map(g=>u.jsxs("button",{onClick:()=>d(h,g),className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                               rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(R0,{className:"w-5 h-5 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900 truncate",children:g.replace(/\.json$/,"")})]},g))})]},h))})]})}function Tb({error:r,loading:l,userWorkflows:s,onBack:o,onDismissError:i,onLoadWorkflow:d}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Bo,{title:"My Workflows",onBack:o}),u.jsx(Io,{error:r,onDismiss:i}),l?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx(Kd,{})}):s.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No saved workflows yet"}):u.jsx("div",{className:"space-y-2 overflow-y-auto flex-1",children:s.map(p=>u.jsxs("button",{onClick:()=>d(p.name),className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(Oa,{className:"w-5 h-5 text-gray-600"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:p.name.replace(/\.json$/,"")}),p.modified&&u.jsx("p",{className:"text-xs text-gray-500",children:new Date(p.modified*1e3).toLocaleDateString()})]})]},p.path))})]})}const Si=lr()(Wr(r=>({theme:"dark",setTheme:l=>{r({theme:l})},toggleTheme:()=>{r(l=>({theme:l.theme==="dark"?"light":"dark"}))}}),{name:"theme-storage",storage:qr(()=>localStorage)}));function _b({open:r,onClose:l}){const s=J(le=>le.loadWorkflow),o=J(le=>le.workflow),i=J(le=>le.currentFilename),d=J(le=>le.originalWorkflow),p=J(le=>le.setSavedWorkflow),h=Si(le=>le.theme),m=Si(le=>le.toggleTheme),g=b.useRef(null),x=!!(o&&d&&JSON.stringify(o)!==JSON.stringify(d)),y=b.useRef(null),[N,k]=b.useState(null),[S,w]=b.useState("menu"),[M,j]=b.useState([]),[O,D]=b.useState({}),[z,_]=b.useState(!1),[A,L]=b.useState(i||""),[B,G]=b.useState(""),[U,W]=b.useState({load:!0,save:!0,appearance:!0,info:!0}),ne=b.useRef(null),ve=b.useRef(null),ae=b.useRef(null),re=b.useRef(null),R=b.useRef(U);b.useEffect(()=>{const le=R.current,be=U;!le.load&&be.load?setTimeout(()=>ne.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!le.save&&be.save?setTimeout(()=>ve.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!le.appearance&&be.appearance?setTimeout(()=>ae.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!le.info&&be.info&&setTimeout(()=>re.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100),R.current=be},[U]),b.useEffect(()=>{r||(w("menu"),k(null),L(i||""),G(""),W({load:!0,save:!0,appearance:!0,info:!0}))},[r,i]),b.useEffect(()=>{S==="userWorkflows"&&(_(!0),u1().then(j).catch(le=>k(le.message)).finally(()=>_(!1)))},[S]),b.useEffect(()=>{S==="templates"&&(_(!0),d1().then(D).catch(le=>k(le.message)).finally(()=>_(!1)))},[S]);const F=le=>{"vibrate"in navigator&&navigator.vibrate(le)},pe=()=>{y.current?.click()},xe=async le=>{const be=le.target.files?.[0];if(be){try{const Oe=await be.text(),qe=JSON.parse(Oe);if(!qe.nodes||!Array.isArray(qe.nodes))throw new Error("Invalid workflow: missing nodes array");s(qe,be.name),k(null),l(),F(10)}catch(Oe){k(Oe instanceof Error?Oe.message:"Failed to load workflow")}y.current&&(y.current.value="")}},he=async le=>{try{_(!0);const be=await S0(le);s(be,le,{fresh:!0,source:{type:"user",filename:le}}),k(null),l(),F(10)}catch(be){k(be instanceof Error?be.message:"Failed to load workflow")}finally{_(!1)}},T=async(le,be)=>{try{_(!0);const Oe=await N0(le,be);s(Oe,`${le}/${be}`,{fresh:!0,source:{type:"template",moduleName:le,templateName:be}}),k(null),l(),F(10)}catch(Oe){k(Oe instanceof Error?Oe.message:"Failed to load template")}finally{_(!1)}},I=async le=>{if(!o)return;const be=le.endsWith(".json")?le:`${le}.json`;try{_(!0),await c1(be,o),p(o,be),k(null),l(),F(10)}catch(Oe){k(Oe instanceof Error?Oe.message:"Failed to save workflow")}finally{_(!1)}},E=()=>{i?I(i):w("save")},$=()=>{L(i||""),w("save")},Q=()=>{A.trim()?I(A):k("Please enter a filename.")},fe=()=>{if(!o)return;const le=JSON.stringify(o,null,2),be=new Blob([le],{type:"application/json"}),Oe=URL.createObjectURL(be),qe=document.createElement("a");qe.href=Oe,qe.download=`${i||`workflow-${Date.now()}`}.json`,qe.click(),URL.revokeObjectURL(Oe),F(10),l()},te=()=>{try{const le=JSON.parse(B);if(!le.nodes||!Array.isArray(le.nodes))throw new Error("Invalid workflow: missing nodes array");const be=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});s(le,`Pasted workflow (${be})`),k(null),l(),F(10),G("")}catch(le){k(le instanceof Error?le.message:"Failed to parse JSON")}};return u.jsxs(bb,{open:r,onClose:l,side:"left",title:"ComfyUI Mobile",children:[S==="menu"&&u.jsx(Sb,{error:N,workflow:o,currentFilename:i,isDirty:x,loading:z,theme:h,menuSectionsOpen:U,fileInputRef:y,loadSectionRef:ne,saveSectionRef:ve,appearanceSectionRef:ae,infoSectionRef:re,onDismissError:()=>k(null),onFileChange:xe,onLoadFromFile:pe,onToggleSection:le=>W(be=>({...be,[le]:!be[le]})),onOpenUserWorkflows:()=>w("userWorkflows"),onOpenTemplates:()=>w("templates"),onOpenPasteJson:()=>w("pasteJson"),onSave:E,onOpenSaveAs:$,onToggleTheme:m,onOpenLegend:()=>w("aboutLegend")}),S==="userWorkflows"&&u.jsx(Tb,{error:N,loading:z,userWorkflows:M,onBack:()=>w("menu"),onDismissError:()=>k(null),onLoadWorkflow:he}),S==="templates"&&u.jsx(Eb,{error:N,loading:z,templates:O,onBack:()=>w("menu"),onDismissError:()=>k(null),onLoadTemplate:T}),S==="save"&&u.jsx(kb,{error:N,loading:z,workflow:o,saveFilenameInput:A,onBack:()=>w("menu"),onDismissError:()=>k(null),onSaveFilenameChange:L,onSaveAs:Q,onDownload:fe}),S==="pasteJson"&&u.jsx(Cb,{error:N,pastedJson:B,pasteTextareaRef:g,onBack:()=>w("menu"),onDismissError:()=>k(null),onChangeJson:G,onLoad:te}),S==="aboutLegend"&&u.jsx(wb,{onBack:()=>w("menu")})]})}function Di({open:r,onDismiss:l,triggerRef:s,contentRef:o,closeOnScroll:i=!0}){b.useEffect(()=>{if(!r)return;const d=h=>{const m=h.target;s.current&&m&&s.current.contains(m)||o.current&&m&&o.current.contains(m)||l()},p=()=>{i&&l()};return document.addEventListener("mousedown",d),i&&document.addEventListener("scroll",p,!0),()=>{document.removeEventListener("mousedown",d),i&&document.removeEventListener("scroll",p,!0)}},[r,l,s,o,i])}function Lb({open:r,onClose:l,onConfirm:s}){if(!r)return null;const o=async()=>{await s(),l()};return u.jsx("div",{id:"clear-history-confirm-overlay",className:"fixed inset-0 z-[1500] bg-black/50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"clear-history-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:i=>i.stopPropagation(),children:[u.jsx("div",{id:"clear-history-title",className:"text-gray-900 text-base font-semibold",children:"Clear history?"}),u.jsx("div",{id:"clear-history-description",className:"text-gray-600 text-sm mt-1",children:"This will permanently remove all completed generations from history. Generated files will still be present in your server's output folder."}),u.jsxs("div",{id:"clear-history-actions",className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:l,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:o,children:"Clear history"})]})]})})}function Ab({open:r,buttonRef:l,menuRef:s,onToggle:o,onClose:i,onGoToWorkflow:d,onOpenClearHistoryConfirm:p}){const h=rt(I=>I.setQueueItemExpanded),m=rt(I=>I.queueItemExpanded),g=rt(I=>I.showQueueMetadata),x=rt(I=>I.toggleShowQueueMetadata),y=rt(I=>I.previewVisibility),N=rt(I=>I.setPreviewVisibility),k=rt(I=>I.previewVisibilityDefault),S=rt(I=>I.setPreviewVisibilityDefault),w=rt(I=>I.pending),M=rt(I=>I.running),j=rt(I=>I.clearQueue),O=_n(I=>I.history),D=_n(I=>I.clearEmptyItems),z=w.length>0,_=O.length>0,A=O.some(I=>I.outputs.images.length===0),L=w.length+M.length+O.length>0,B=b.useMemo(()=>{const I=new Set;return w.forEach(E=>I.add(E.prompt_id)),M.forEach(E=>I.add(E.prompt_id)),O.forEach(E=>{E.prompt_id&&I.add(String(E.prompt_id))}),Array.from(I)},[w,M,O]),G=b.useMemo(()=>B.some(I=>m[I]===!1),[B,m]),U=b.useMemo(()=>B.some(I=>m[I]!==!1),[B,m]),W=b.useMemo(()=>{const I=new Set;return O.forEach(E=>{(E.outputs?.images??[]).some(fe=>fe.type!=="output")&&E.prompt_id&&I.add(String(E.prompt_id))}),Array.from(I)},[O]),ne=L||W.length>0||k,ve=W.length>0?W.every(I=>y[I]??k):k,ae=()=>{d(),i()},re=async()=>{await j(),i()},R=()=>{B.forEach(I=>h(I,!1)),i()},F=()=>{B.forEach(I=>h(I,!0)),i()},pe=()=>{x(),i()},xe=()=>{const I=!ve;S(I),W.forEach(E=>N(E,I)),i()},he=async()=>{await D(),i()},T=()=>{i(),p()};return u.jsxs("div",{id:"queue-menu-container",className:"relative",children:[u.jsx("button",{ref:l,onClick:o,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Queue options",children:u.jsx(vl,{className:"w-5 h-5 -rotate-90"})}),r?u.jsxs("div",{id:"queue-options-dropdown",ref:s,className:"absolute right-0 top-11 z-50 w-48 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ae,children:[u.jsx(vi,{className:"w-3 h-3 text-gray-500 rotate-180"}),"Go to workflow"]}),z&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:re,children:[u.jsx(P1,{className:"w-4 h-4 text-gray-500"}),"Cancel all pending"]}),U&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:R,children:[u.jsx(Bl,{className:"w-7 h-7 -ml-1 text-gray-500"}),"Fold all"]}),G&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:F,children:[u.jsx(Wn,{className:"w-7 h-7 -ml-1 text-gray-500"}),"Unfold all"]}),_&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:pe,children:[u.jsx(E0,{className:"w-4 h-4 text-gray-500"}),g?"Hide metadata":"Show metadata"]}),ne&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:xe,children:[ve?u.jsx(ur,{className:"w-4 h-4 text-gray-500"}):u.jsx(zl,{className:"w-4 h-4 text-gray-500"}),ve?"Hide previews":"Show previews"]}),A&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-gray-600",onClick:he,children:[u.jsx(Hr,{className:"w-4 h-4"}),"Clear empty items"]}),_&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:T,children:[u.jsx(Hr,{className:"w-4 h-4"}),"Clear history"]})]}):null]})}function Rb(){const[r,l]=b.useState(!1),[s,o]=b.useState(!1),i=Ln(m=>m.setCurrentPanel),d=_n(m=>m.clearHistory),p=b.useRef(null),h=b.useRef(null);return Di({open:r,onDismiss:()=>l(!1),triggerRef:p,contentRef:h,closeOnScroll:!1}),u.jsxs(u.Fragment,{children:[u.jsx(Ab,{open:r,buttonRef:p,menuRef:h,onToggle:()=>l(m=>!m),onClose:()=>l(!1),onGoToWorkflow:()=>i("workflow"),onOpenClearHistoryConfirm:()=>o(!0)}),u.jsx(Lb,{open:s,onClose:()=>o(!1),onConfirm:d})]})}function Db({open:r,buttonRef:l,menuRef:s,onToggle:o,onClose:i,onGoToWorkflow:d}){const p=_t(O=>O.source),h=_t(O=>O.viewMode),m=_t(O=>O.showHidden),g=_t(O=>O.setSource),x=_t(O=>O.setViewMode),y=_t(O=>O.toggleShowHidden),N=_t(O=>O.toggleSelectionMode),k=()=>{g(p==="output"?"input":"output"),i()},S=()=>{d(),i()},w=()=>{N(),i()},M=()=>{y(),i()},j=()=>{x(h==="grid"?"list":"grid"),i()};return u.jsxs("div",{id:"outputs-topbar-actions",className:"relative flex items-center gap-1",children:[u.jsx("button",{ref:l,onClick:o,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Outputs options",children:u.jsx(vl,{className:"w-5 h-5 -rotate-90"})}),r?u.jsxs("div",{id:"outputs-options-dropdown",ref:s,className:"absolute right-0 top-11 z-50 w-48 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:k,children:[u.jsx(ui,{className:"w-4 h-4 text-gray-500"}),p==="output"?"Switch to inputs":"Switch to outputs"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:S,children:[u.jsx(vi,{className:"w-3 h-3 text-gray-500"}),"Go to workflow"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:w,children:[u.jsx(Il,{className:"w-4 h-4 text-gray-500"}),"Select"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:M,children:[m?u.jsx(ur,{className:"w-4 h-4 text-gray-500"}):u.jsx(zl,{className:"w-4 h-4 text-gray-500"}),m?"Hide hidden files":"Show hidden files"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:j,children:[h==="grid"?u.jsx(F1,{className:"w-4 h-4 text-gray-500"}):u.jsx(ob,{className:"w-4 h-4 text-gray-500"}),h==="grid"?"List view":"Grid view"]})]}):null]})}function zb(){const[r,l]=b.useState(!1),s=Ln(d=>d.setCurrentPanel),o=b.useRef(null),i=b.useRef(null);return Di({open:r,onDismiss:()=>l(!1),triggerRef:o,contentRef:i,closeOnScroll:!1}),u.jsx(Db,{open:r,buttonRef:o,menuRef:i,onToggle:()=>l(d=>!d),onClose:()=>l(!1),onGoToWorkflow:()=>s("workflow")})}function Bb({action:r,onCancel:l,onContinue:s}){return r?u.jsx("div",{id:"dirty-confirm-overlay",className:"fixed inset-0 z-[1500] bg-black/50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"dirty-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:o=>o.stopPropagation(),children:[u.jsx("div",{id:"dirty-confirm-title",className:"text-gray-900 text-base font-semibold",children:"Unsaved changes"}),u.jsx("div",{id:"dirty-confirm-description",className:"text-gray-600 text-sm mt-1",children:"You have unsaved changes in the current workflow. Continue without saving?"}),u.jsxs("div",{id:"dirty-confirm-actions",className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:l,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:()=>s(r),children:"Continue"})]})]})}):null}const Ib=5;function Hb(r){const l={};for(const s of r)l[s.id]={mode:s.mode,flags:s.flags?{collapsed:!!s.flags.collapsed}:void 0,widgets_values:s.widgets_values};return l}function Vb(r,l,s,o,i,d){return{nodes:Hb(r.nodes),seedModes:{...l},collapsedGroups:{...s},hiddenGroups:{...o},collapsedSubgraphs:{...i},hiddenSubgraphs:{...d}}}function wg(r,l){if(!r)return[];if(!l.length)return[];const s=new Set(r.nodes.map(o=>o.id));return l.filter(o=>s.has(o))}function Sg(r,l){if(r===l)return!0;if(r.length!==l.length)return!1;for(let s=0;s<r.length;s+=1)if(r[s]!==l[s])return!1;return!0}const yn=lr()(Wr((r,l)=>({bookmarkedNodeIds:[],bookmarkBarSide:"right",bookmarkBarTop:null,bookmarkRepositioningActive:!1,toggleNodeBookmark:s=>{const{bookmarkedNodeIds:o}=l(),{currentWorkflowKey:i,savedWorkflowStates:d,workflow:p,collapsedGroups:h,hiddenGroups:m,collapsedSubgraphs:g,hiddenSubgraphs:x}=J.getState(),y=jn.getState().seedModes,k=o.includes(s)?o.filter(S=>S!==s):o.length>=Ib?o:[...o,s];if(k!==o){if(i){let w=d[i];!w&&p&&(w=Vb(p,y,h,m,g,x)),w&&J.setState({savedWorkflowStates:{...d,[i]:{...w,bookmarkedNodeIds:[...k]}}})}r({bookmarkedNodeIds:k})}},clearNodeBookmarks:()=>{const{currentWorkflowKey:s,savedWorkflowStates:o}=J.getState();if(s&&o[s]){const i=o[s];J.setState({savedWorkflowStates:{...o,[s]:{...i,bookmarkedNodeIds:[]}}})}r({bookmarkedNodeIds:[]})},setBookmarkBarPosition:s=>{r(o=>({bookmarkBarSide:s.side??o.bookmarkBarSide,bookmarkBarTop:s.top??o.bookmarkBarTop}))},setBookmarkRepositioningActive:s=>{r({bookmarkRepositioningActive:s})}}),{name:"bookmark-bar-storage",storage:qr(()=>localStorage),partialize:r=>({bookmarkBarSide:r.bookmarkBarSide,bookmarkBarTop:r.bookmarkBarTop})}));function D0(){const{workflow:r,currentWorkflowKey:l,savedWorkflowStates:s}=J.getState(),{bookmarkedNodeIds:o}=yn.getState();if(!r){o.length>0&&yn.setState({bookmarkedNodeIds:[]});return}if(!l){const h=wg(r,o);Sg(o,h)||yn.setState({bookmarkedNodeIds:h});return}const d=s[l]?.bookmarkedNodeIds??[],p=wg(r,d);Sg(o,p)||yn.setState({bookmarkedNodeIds:p})}J.subscribe(()=>{D0()});D0();function Ub({open:r,buttonRef:l,menuRef:s,onToggle:o,onClose:i,onGoToQueue:d,onGoToOutputs:p,onHandleDirtyAction:h}){const m=J(oe=>oe.workflow),g=J(oe=>oe.nodeTypes),x=J(oe=>oe.setNodeFold),y=J(oe=>oe.setGroupCollapsed),N=J(oe=>oe.setSubgraphCollapsed),k=J(oe=>oe.setNodeHidden),S=J(oe=>oe.showAllHiddenNodes),w=J(oe=>oe.manuallyHiddenNodes),M=J(oe=>oe.hiddenGroups),j=J(oe=>oe.hiddenSubgraphs),O=yn(oe=>oe.bookmarkedNodeIds),D=yn(oe=>oe.clearNodeBookmarks),z=J(oe=>oe.collapsedGroups),_=J(oe=>oe.collapsedSubgraphs),A=J(oe=>oe.workflowSource),L=J(oe=>oe.loadWorkflow),B=J(oe=>oe.searchOpen),G=J(oe=>oe.setSearchOpen),U=J(oe=>oe.setSearchQuery),W=J(oe=>oe.connectionButtonsVisible),ne=J(oe=>oe.toggleConnectionButtonsVisible),ve=_n(oe=>oe.history),ae=!!m,re=b.useMemo(()=>m?.nodes.map(oe=>oe.id)??[],[m]),R=b.useMemo(()=>{if(!m)return[];const oe=m.groups?.map(et=>et.id)??[],Pe=m.definitions?.subgraphs?.flatMap(et=>et.groups?.map(gt=>gt.id)??[])??[];return[...oe,...Pe]},[m]),F=b.useMemo(()=>m?.definitions?.subgraphs?.map(oe=>oe.id)??[],[m]),pe=b.useMemo(()=>m?.nodes.filter(oe=>oe.mode===4).map(oe=>oe.id)??[],[m]),xe=b.useMemo(()=>!m||!g?[]:m.nodes.filter(oe=>{if(oe.type==="Fast Groups Bypasser (rgthree)")return!1;const Pe=Yd(g,oe).filter(gt=>!gt.connected),et=Qd(g,oe).filter(gt=>!gt.connected);return Pe.length===0&&et.length===0}).map(oe=>oe.id),[m,g]),he=pe.length,T=xe.length,I=b.useMemo(()=>Object.values(w).filter(Boolean).length,[w]),E=b.useMemo(()=>pe.filter(oe=>w[oe]).length,[pe,w]),$=b.useMemo(()=>xe.filter(oe=>w[oe]).length,[xe,w]),Q=b.useMemo(()=>m?m.nodes.filter(oe=>!w[oe.id]):[],[m,w]),fe=b.useMemo(()=>Q.some(oe=>oe.flags?.collapsed),[Q]),te=b.useMemo(()=>Q.some(oe=>!oe.flags?.collapsed),[Q]),le=b.useMemo(()=>R.some(oe=>z[oe]??!0),[R,z]),be=b.useMemo(()=>R.some(oe=>z[oe]===!1),[R,z]),Oe=b.useMemo(()=>F.some(oe=>_[oe]??!0),[F,_]),qe=b.useMemo(()=>F.some(oe=>_[oe]===!1),[F,_]),ee=fe||le||Oe,Te=te||be||qe,Ne=b.useMemo(()=>I>0||Object.values(M).some(Boolean)?!0:Object.values(j).some(Boolean),[I,M,j]),_e=()=>{i()},lt=()=>{d(),_e()},Fe=()=>{p(),_e()},we=()=>{U(""),G(!0),_e()},ye=()=>{ne(),_e()},Me=()=>{re.forEach(oe=>x(oe,!0)),R.forEach(oe=>y(oe,!0)),F.forEach(oe=>N(oe,!0)),_e()},Le=()=>{re.forEach(oe=>x(oe,!1)),R.forEach(oe=>y(oe,!1)),F.forEach(oe=>N(oe,!1)),_e()},it=()=>{xe.forEach(oe=>k(oe,!0)),_e()},ht=()=>{E>0?pe.forEach(oe=>k(oe,!1)):pe.forEach(oe=>k(oe,!0)),_e()},Ze=()=>{S(),_e()},Se=()=>{D(),_e()},Ae=async()=>{if(!(!A||A.type!=="user")){try{const oe=await S0(A.filename);L(oe,A.filename,{fresh:!0,source:A})}catch(oe){console.error("Failed to reload workflow:",oe)}_e()}},Ke=async()=>{if(!(!A||A.type!=="template")){try{const oe=await N0(A.moduleName,A.templateName);L(oe,`${A.moduleName}/${A.templateName}`,{fresh:!0,source:A})}catch(oe){console.error("Failed to reload template:",oe)}_e()}},$e=()=>{if(!A||A.type!=="history")return;const oe=ve.find(Pe=>Pe.prompt_id===A.promptId);oe?.workflow&&L(oe.workflow,`history-${A.promptId}.json`,{source:A}),_e()},Qe=()=>{h("clearWorkflowCache")},Xe=()=>{h("unload")},vt=()=>{h("clearAllCache")};return u.jsxs("div",{id:"workflow-menu-container",className:"relative",children:[u.jsx("button",{ref:l,onClick:o,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Workflow options",children:u.jsx(vl,{className:"w-5 h-5 -rotate-90"})}),r?u.jsxs("div",{id:"workflow-options-dropdown",ref:s,className:"absolute right-0 top-11 z-50 w-52 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:lt,children:[u.jsx(vi,{className:"w-3 h-3 text-gray-500"}),"Go to queue"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Fe,children:[u.jsx(vi,{className:"w-3 h-3 text-gray-500 rotate-180"}),"Go to outputs"]}),!B&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:we,children:[u.jsx(ab,{className:"w-4 h-4 text-gray-500"}),"Search"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ye,children:[W?u.jsx(ur,{className:"w-4 h-4 text-gray-500"}):u.jsx(zl,{className:"w-4 h-4 text-gray-500"}),W?"Hide connection buttons":"Show connection buttons"]}),Te&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Me,children:[u.jsx(Bl,{className:"w-6 h-6 -ml-1 text-gray-500"}),"Fold all"]}),ee&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Le,children:[u.jsx(Wn,{className:"w-6 h-6 -ml-1 text-gray-500"}),"Unfold all"]}),T>0&&$<T&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:it,children:[u.jsx(ur,{className:"w-4 h-4 text-gray-500"}),"Hide static nodes (",T,")"]}),he>0&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ht,children:[E>0?u.jsx(zl,{className:"w-4 h-4 text-gray-500"}):u.jsx(ur,{className:"w-4 h-4 text-gray-500"}),E>0?"Show bypassed nodes":"Hide bypassed nodes"," (",he,")"]}),Ne&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ze,children:[u.jsx(zl,{className:"w-4 h-4 text-gray-500"}),"Show all hidden nodes"]}),O.length>0&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Se,children:[u.jsx(Hr,{className:"w-4 h-4 text-gray-500"}),"Clear bookmarks"]}),A&&(A.type==="user"?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ae,children:[u.jsx(ui,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):A.type==="template"?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ke,children:[u.jsx(ui,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):A.type==="history"&&ve.find(oe=>oe.prompt_id===A.promptId)?.workflow?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:$e,children:[u.jsx(ui,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):null),ae&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Qe,children:[u.jsx(Hr,{className:"w-4 h-4 text-gray-500"}),"Clear workflow cache"]}),ae&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:Xe,children:[u.jsx(Z1,{className:"w-4 h-4"}),"Unload workflow"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:vt,children:[u.jsx(Hr,{className:"w-4 h-4"}),"Clear all cache"]})]}):null]})}function Gb(){const[r,l]=b.useState(null),[s,o]=b.useState(null),i=J(j=>j.workflow),d=J(j=>j.originalWorkflow),p=J(j=>j.clearWorkflowCache),h=J(j=>j.unloadWorkflow),m=Ln(j=>j.setCurrentPanel),g=J(j=>j.workflowLoadedAt),x=b.useRef(null),y=b.useRef(null),N=r!==null&&r===g,k=b.useMemo(()=>!!(i&&d&&JSON.stringify(i)!==JSON.stringify(d)),[i,d]);Di({open:N,onDismiss:()=>l(null),triggerRef:x,contentRef:y,closeOnScroll:!1});const S=async()=>{if(localStorage.clear(),sessionStorage.clear(),"caches"in window){const j=await caches.keys();await Promise.all(j.map(O=>caches.delete(O)))}document.cookie.split(";").forEach(j=>{const[O]=j.split("=");document.cookie=`${O.trim()}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}),window.location.reload()},w=j=>{if(k){l(null),o(j);return}j==="unload"?h():j==="clearWorkflowCache"?p():S(),l(null)},M=async j=>{o(null),j==="unload"?h():j==="clearWorkflowCache"?p():j==="clearAllCache"&&await S()};return u.jsxs(u.Fragment,{children:[u.jsx(Ub,{open:N,buttonRef:x,menuRef:y,onToggle:()=>l(N?null:g),onClose:()=>l(null),onGoToQueue:()=>m("queue"),onGoToOutputs:()=>m("outputs"),onHandleDirtyAction:w}),u.jsx(Bb,{action:s,onCancel:()=>o(null),onContinue:M})]})}function qb(r){return r==="queue"?['[data-queue-list="true"]','[data-node-list="true"]']:['[data-node-list="true"]','[data-queue-list="true"]']}function Wb({mode:r="workflow"}){const l=b.useRef(null),s=b.useRef(0),o=Md(O=>O.appMenuOpen),i=Md(O=>O.setAppMenuOpen),d=b.useCallback(()=>{const O=Date.now(),D=O-s.current;if(s.current=O,D<300){if(r==="workflow"){window.dispatchEvent(new Event("workflow-scroll-to-top")),"vibrate"in navigator&&navigator.vibrate(10);return}if(r==="outputs"){const _=document.querySelector("#outputs-content-container");_&&(_.scrollTo({top:0,behavior:"auto"}),"vibrate"in navigator&&navigator.vibrate(10));return}const z=qb(r);for(const _ of z){const A=document.querySelector(_);if(A&&A.scrollHeight>0&&!A.closest(".pointer-events-none")){A.scrollTo({top:0,behavior:"smooth"}),"vibrate"in navigator&&navigator.vibrate(10);break}}}},[r]),p=J(O=>O.workflow),h=J(O=>O.originalWorkflow),m=J(O=>O.currentFilename),g=J(O=>O.manuallyHiddenNodes),x=J(O=>O.hiddenSubgraphs),y=rt(O=>O.pending),N=_n(O=>O.history),k=_t(O=>O.source),S=p&&h&&JSON.stringify(p)!==JSON.stringify(h),w=b.useMemo(()=>{if(!p)return"";const O=p.nodes.length,D=Object.keys(g).length,z=Object.values(x).some(Boolean);if(D===0&&!z)return`${O} nodes ${S?"[Unsaved]":""}`.trim();const _=z?p.nodes.reduce((L,B)=>{const U=B.properties?.__mobile_origin;if(!U||typeof U!="object"||U.scope!=="subgraph")return L;const ne=U.subgraphId;return ne&&x[ne]?L+1:L},0):0,A=D+_;return`${O} nodes (${A} hidden) ${S?"[Unsaved]":""}`.trim()},[p,g,x,S]);b.useEffect(()=>{const O=l.current;if(!O)return;const D=()=>{const _=O.getBoundingClientRect();document.documentElement.style.setProperty("--top-bar-offset",`${_.height}px`)};D();const z=new ResizeObserver(D);return z.observe(O),()=>z.disconnect()},[]);const M=b.useMemo(()=>{switch(r){case"queue":return"Queue";case"outputs":return k==="output"?"Outputs":"Inputs";default:return m?m.replace(".json",""):p?"Untitled":"ComfyUI Mobile"}},[r,k,m,p]),j=b.useMemo(()=>{switch(r){case"queue":return u.jsx(Rb,{});case"outputs":return u.jsx(zb,{});default:return u.jsx(Gb,{})}},[r]);return u.jsxs("div",{id:"top-bar-root",ref:l,className:"fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-[2000] safe-area-top","data-top-bar":"true",children:[u.jsxs("div",{id:"top-bar-content",className:"flex items-center justify-between px-4 py-3",children:[u.jsx("button",{onClick:()=>i(!0),className:`w-10 h-10 flex items-center justify-center rounded-lg
                     text-gray-700 hover:bg-gray-100`,children:u.jsx(rb,{className:"w-6 h-6"})}),u.jsxs("div",{id:"top-bar-title-container",className:"flex-1 text-center min-w-0 px-2 cursor-pointer",onClick:d,children:[u.jsxs("h1",{id:"top-bar-title",className:"font-semibold text-gray-900 text-lg truncate flex items-center justify-center",children:[u.jsx("span",{className:"truncate",children:M}),r==="workflow"&&S&&u.jsx("span",{id:"dirty-indicator",className:"text-blue-500 ml-1 font-bold",children:"*"})]}),r==="workflow"&&p&&u.jsx("p",{className:"node-count-display text-xs text-gray-500",children:w}),r==="queue"&&u.jsxs("p",{className:"run-count-display text-xs text-gray-500",children:[N.length," ",N.length===1?"run":"runs",y.length>0&&` (${y.length} pending)`]})]}),u.jsx("div",{id:"top-bar-right-slot",className:"w-10 h-10 flex items-center justify-center",children:j})]}),u.jsx(_b,{open:o,onClose:()=>i(!1)})]})}function Td(r,l){const s=new Map;if(l.length===0)return s;const o=[...l].sort((i,d)=>i.id-d.id);for(const i of r){const[d,p]=i.pos,[h,m]=i.size,g=d+h/2,x=p+m/2;for(const y of o){const[N,k,S,w]=y.bounding;if(g>=N&&g<=N+S&&x>=k&&x<=k+w){s.set(i.id,y.id);break}}}return s}function Fb(r){const l=r.groups??[];return Td(r.nodes,l)}function $b(r){const s=r.properties?.__mobile_origin;if(!s||typeof s!="object")return null;const o=s.scope;if(o==="root"){const i=s.nodeId;return typeof i=="number"?{scope:"root",nodeId:i}:null}if(o==="subgraph"){const i=s.nodeId,d=s.subgraphId;if(typeof i=="number"&&typeof d=="string")return{scope:"subgraph",subgraphId:d,nodeId:i}}return null}function Yb(r,l,s,o,i={},d={}){const p=l.groups??[],h=l.definitions?.subgraphs??[],m=new Map(h.map(U=>[U.id,U])),g=l.extra?.__mobile_subgraph_group_map,x=new Map;if(g&&typeof g=="object")for(const[U,W]of Object.entries(g))(typeof W=="number"||W===null)&&x.set(U,W);for(const U of h)x.has(U.id)||x.set(U.id,null);const y=new Map;for(const U of r){const W=$b(U);W?.scope==="subgraph"&&W.subgraphId&&y.set(U.id,W.subgraphId)}const N=new Map;for(const U of h)N.set(U.id,[]);for(const U of r){const W=y.get(U.id);W&&N.get(W)?.push(U)}const k=r.filter(U=>!y.has(U.id)),S=Td(k,p),w=new Map(p.map(U=>[U.id,U])),M=[],j=new Set;for(const U of r){const W=y.get(U.id);if(W){j.has(W)||(M.push({kind:"subgraph",subgraphId:W}),j.add(W));continue}M.push({kind:"node",node:U})}const O=new Map;for(const U of M){const W=U.kind==="node"?S.get(U.node.id):x.get(U.subgraphId)??null;if(W==null)continue;const ne=O.get(W);ne?ne.push(U):O.set(W,[U])}const D=U=>U.kind==="node"?1:d[U.subgraphId]?0:N.get(U.subgraphId)?.length??0,z=(U,W,ne)=>({type:"node",node:U,groupId:W,subgraphId:ne}),_=U=>{const W=m.get(U);if(!W)return[];const ne=N.get(U)??[],ve=W.groups??[];if(ve.length===0)return ne.map(he=>z(he,null,U));const ae=Td(ne,ve),re=new Map(ve.map(he=>[he.id,he])),R=ne.map(he=>({kind:"node",node:he})),F=new Map;for(const he of R){const T=ae.get(he.node.id);if(T===void 0)continue;const I=F.get(T);I?I.push(he):F.set(T,[he])}const pe=[],xe=new Set;for(const he of R){const T=ae.get(he.node.id);if(T!==void 0){if(xe.has(T))continue;const I=re.get(T),E=F.get(T)??[];if(I&&!o[I.id]){const $=E.reduce((te,le)=>te+D(le),0),Q=s[I.id]??!0,fe=Q?[]:E.map(te=>z(te.node,I.id,U));pe.push({type:"group",group:I,nodeCount:$,isCollapsed:Q,subgraphId:U,children:fe})}xe.add(T);continue}pe.push(z(he.node,null,U))}for(const he of ve)o[he.id]||xe.has(he.id)||pe.push({type:"group",group:he,nodeCount:0,isCollapsed:s[he.id]??!0,subgraphId:U,children:[]});return pe},A=(U,W)=>{if(d[U])return null;const ne=m.get(U);if(!ne)return null;const ve=N.get(U)??[],ae=i[U]??!0,re=ae?[]:_(U);return{type:"subgraph",subgraph:ne,nodeCount:ve.length,isCollapsed:ae,groupId:W,children:re}},L=(U,W,ne)=>{if(o[U.id])return null;const ve=W.reduce((R,F)=>R+D(F),0),ae=s[U.id]??!0,re=ae?[]:W.map(R=>R.kind==="node"?z(R.node,U.id,ne):A(R.subgraphId,U.id)).filter(Boolean);return{type:"group",group:U,nodeCount:ve,isCollapsed:ae,subgraphId:ne,children:re}},B=[],G=new Set;for(const U of M){const W=U.kind==="node"?S.get(U.node.id):x.get(U.subgraphId)??null;if(W!=null){if(G.has(W))continue;const ne=w.get(W),ve=O.get(W)??[];if(ne){const ae=L(ne,ve,null);ae&&B.push(ae)}else for(const ae of ve)if(ae.kind==="node")B.push(z(ae.node,null,null));else{const re=A(ae.subgraphId,null);re&&B.push(re)}G.add(W);continue}if(U.kind==="node")B.push(z(U.node,null,null));else{const ne=A(U.subgraphId,null);ne&&B.push(ne)}}for(const U of p){if(G.has(U.id))continue;const W=O.get(U.id)??[],ne=L(U,W,null);ne&&B.push(ne),G.add(U.id)}return B}function Vr(r,l){const s=r.replace("#","");let o,i,d;if(s.length===3)o=parseInt(s[0]+s[0],16),i=parseInt(s[1]+s[1],16),d=parseInt(s[2]+s[2],16);else if(s.length===6)o=parseInt(s.slice(0,2),16),i=parseInt(s.slice(2,4),16),d=parseInt(s.slice(4,6),16);else return"rgba(0, 0, 0, 0)";return`rgba(${o}, ${i}, ${d}, ${l})`}function Ho({workflow:r,runKey:l,isRunning:s,workflowDurationStats:o}){const[i,d]=b.useState(null),p=b.useRef(null),h=b.useRef(null),m=b.useRef(null),g=b.useRef(null),x=b.useRef(null),y=b.useRef(0),N=b.useRef(null);return b.useEffect(()=>{let k=null,S=null;const w=()=>{if(!r){N.current!==null&&(N.current=null,d(null)),m.current=null,g.current=null,x.current=null,p.current=null,y.current=0,h.current=null;return}const M=250,j=Date.now();let O=null;if(!l)h.current?(m.current=j+M,h.current=null,y.current=100,O=100):m.current&&j<m.current?O=100:(m.current=null,g.current=null,x.current=null,p.current=null,y.current=0,O=null);else if(m.current&&j<m.current)g.current=l,O=100;else if(g.current&&j>=(m.current??0)&&(h.current=g.current,g.current=null,p.current=j-M,y.current=0,m.current=null),h.current&&l!==h.current)x.current!==l&&(x.current=l,m.current=j+M,y.current=100),O=100;else{h.current!==l&&(p.current=j,h.current=l,y.current=0,m.current=null);const D=Math.max(0,j-(p.current??j)),z=xi(r),_=o[z]?.avgMs??null;let A;if(_){const B=D/_*100;A=Math.min(99,Math.max(0,B))}else{const B=D/1e3;B<=50?A=B:A=50+(B-50)*.5,A=Math.min(90,A)}const L=Math.max(y.current,A);y.current=L,O=Math.round(L)}N.current!==O&&(N.current=O,d(O))};return r?(k=setTimeout(w,0),(s||m.current||l)&&(S=setInterval(w,200))):k=setTimeout(w,0),()=>{k&&clearTimeout(k),S&&clearInterval(S)}},[r,l,s,o]),i}const Qb=new Set(["mp4","webm","mkv","mov","avi","m4v"]);function Vo(r){const l=r.split(".").pop()?.toLowerCase()??"";return Qb.has(l)?"video":"image"}function wa(r){return Vo(r)==="video"}function Ng(r){const l=String(r).split(",")[0].trim();return["IMAGE","LATENT","MODEL","CLIP","VAE","CONDITIONING","INT","FLOAT","STRING","BOOLEAN","MASK"].includes(l)?`type-${l}`:"type-default"}function jg(r){return String(r).split(",").map(l=>l.trim().toUpperCase()).filter(Boolean)}const Cg=b.memo(function({slot:l,nodeId:s,direction:o,slotIndex:i,compact:d=!1,hideLabel:p=!1}){const h=J(ae=>ae.workflow),m=J(ae=>ae.scrollToNode),g=J(ae=>ae.revealNodeWithParents),x=J(ae=>ae.nodeTypes),y=J(ae=>ae.manuallyHiddenNodes),[N,k]=b.useState(!1),S=b.useRef(null),w=b.useRef(null),[M,j]=b.useState(null),O=b.useRef(null),D=b.useMemo(()=>{if(!h)return[];const ae=[];if(o==="input"){if(l.link!=null){const R=Oo(h,s,i);R&&ae.push(R.node)}}else{const re=gi(h,s,i);for(const R of re)ae.push(R.node)}return ae},[h,s,o,l,i]),{effectiveNodes:z,directNodes:_,bypassedTargets:A}=b.useMemo(()=>{if(!h)return{effectiveNodes:[],directNodes:[],bypassedTargets:[]};if(Object.keys(y).length===0)return{effectiveNodes:D,directNodes:D,bypassedTargets:[]};const ae=new Map(h.nodes.map($=>[$.id,$])),re=$=>!!y[$.id],R=new Set,F=$=>{if(R.has($))return[];R.add($);const Q=ae.get($);if(!Q)return[];const fe=[];return Q.outputs?.forEach((te,le)=>{gi(h,$,le).forEach(Oe=>{const qe=Oe.node;re(qe)?fe.push(...F(qe.id)):fe.push(qe)})}),fe},pe=$=>{if(R.has($))return[];R.add($);const Q=ae.get($);if(!Q)return[];const fe=[];return Q.inputs?.forEach((te,le)=>{if(te.link===null)return;const be=Oo(h,$,le);be&&(re(be.node)?fe.push(...pe(be.node.id)):fe.push(be.node))}),fe},xe=[],he=[];D.forEach($=>{re($)?o==="input"?he.push(...pe($.id)):he.push(...F($.id)):xe.push($)});const T=new Set(xe.map($=>$.id));let E=($=>{const Q=[],fe=new Set;return $.forEach(te=>{T.has(te.id)||fe.has(te.id)||(fe.add(te.id),Q.push(te))}),Q})(he);if(o==="input"&&E.length>1){const $=new Set(jg(l.type)),Q=E.filter(fe=>fe.outputs?.some(te=>jg(te.type).some(le=>$.has(le))));Q.length>0&&(E=Q)}return{effectiveNodes:[...xe,...E],directNodes:xe,bypassedTargets:E}},[D,h,o,l.type,y]),L=z.length,B=L===1?z[0].id:null,G=L>0,U=()=>{if(G){if(L===1&&B!==null){g(B),m(B);return}k(ae=>!ae)}},W=ae=>re=>{re.stopPropagation(),g(ae),m(ae),k(!1)};b.useLayoutEffect(()=>{if(!N)return;const ae=()=>{const re=w.current;if(!re)return;const R=re.getBoundingClientRect(),F=8;j({top:R.bottom+6,...o==="input"?{left:Math.min(R.left,window.innerWidth-F)}:{right:Math.max(F,window.innerWidth-R.right)}})};return O.current=ae,ae(),()=>{}},[N,L,o]),b.useEffect(()=>{if(!N)return;const ae=()=>O.current?.(),re=F=>{!S.current||!F.target||w.current?.contains(F.target)||S.current.contains(F.target)||k(!1)},R=F=>{const pe=F.target;S.current&&pe&&S.current.contains(pe)||k(!1)};return document.addEventListener("mousedown",re),document.addEventListener("scroll",R,!0),window.addEventListener("resize",ae),()=>{document.removeEventListener("mousedown",re),document.removeEventListener("scroll",R,!0),window.removeEventListener("resize",ae)}},[N]);const ne=d?"w-7 h-7":"w-10 h-10",ve=d?"text-sm":"text-base";return h?u.jsxs("div",{className:"flex items-center gap-2",children:[o==="input"?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:U,disabled:!G,ref:w,className:`
              flex items-center justify-center rounded-full font-medium
              ${ne} flex-shrink-0
              transition-opacity
              ${Ng(l.type)}
              ${G?"opacity-100 cursor-pointer active:scale-95":"opacity-40 cursor-not-allowed"}
            `,children:G&&u.jsx("span",{className:ve,children:""})}),!p&&u.jsx("span",{className:"text-sm text-gray-700 truncate",children:l.localized_name||l.name})]}):u.jsxs(u.Fragment,{children:[!p&&u.jsx("span",{className:"text-sm text-gray-700 truncate",children:l.localized_name||l.name}),L>1&&u.jsx("span",{className:"bg-gray-200 text-gray-700 rounded-full px-2 py-0.5 text-xs font-medium flex-shrink-0",children:L}),u.jsx("button",{onClick:U,disabled:!G,ref:w,className:`
              flex items-center justify-center rounded-full font-medium
              ${ne} flex-shrink-0
              transition-opacity
              ${Ng(l.type)}
              ${G?"opacity-100 cursor-pointer active:scale-95":"opacity-40 cursor-not-allowed"}
            `,children:G&&u.jsx("span",{className:ve,children:""})})]}),N&&M&&rr.createPortal(u.jsxs("div",{ref:S,className:"fixed z-[1000] bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:M.top,right:M.right,left:M.left,maxWidth:"calc(100vw - 16px)"},children:[_.map(ae=>{const R=x?.[ae.type]?.display_name||ae.type;return u.jsxs("button",{className:"block text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:W(ae.id),children:[R," #",ae.id]},ae.id)}),_.length>0&&A.length>0&&u.jsx("div",{className:"px-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"h-px flex-1 bg-gray-200"}),u.jsx("span",{className:"text-[10px] text-gray-400",children:"(via bypassed)"}),u.jsx("div",{className:"h-px flex-1 bg-gray-200"})]})}),A.map(ae=>{const R=x?.[ae.type]?.display_name||ae.type;return u.jsxs("button",{className:"block text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:W(ae.id),children:[R," #",ae.id]},`bypassed-${ae.id}`)})]}),document.body)]}):null});function Xb({nodeId:r,inputs:l,outputs:s,allInputs:o,allOutputs:i}){return!J(p=>p.connectionButtonsVisible)||l.length===0&&s.length===0?null:u.jsxs("div",{className:"mb-3 grid grid-cols-2 gap-3",children:[u.jsx("div",{children:l.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Inputs"}),u.jsx("div",{className:"flex flex-col gap-1.5",children:l.map(p=>{const h=o.findIndex(m=>m.name===p.name);return u.jsx(Cg,{slot:p,nodeId:r,direction:"input",slotIndex:h},`input-${p.name}`)})})]})}),u.jsx("div",{className:"flex flex-col items-end",children:s.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide text-right w-full",children:"Outputs"}),u.jsx("div",{className:"flex flex-col gap-1.5 w-full items-end",children:s.map(p=>{const h=i.findIndex(m=>m.name===p.name);return u.jsx(Cg,{slot:p,nodeId:r,direction:"output",slotIndex:h},`output-${h}`)})})]})})]})}function Pb({nodeId:r,isBypassed:l,onEditLabel:s,pinnableWidgets:o,singlePinnableWidget:i,isSingleWidgetPinned:d,hasPinnedWidget:p,toggleWidgetPin:h,setPinnedWidget:m,isNodeBookmarked:g,canAddNodeBookmark:x,onToggleNodeBookmark:y,toggleBypass:N,hideNode:k,connectionHighlightMode:S,setConnectionHighlightMode:w,leftLineCount:M,rightLineCount:j}){const[O,D]=b.useState(!1),[z,_]=b.useState(!1),A=b.useRef(null),L=b.useRef(null),[B,G]=b.useState(null);b.useEffect(()=>{if(!O)return;const T=()=>{const $=L.current;if(!$)return;const Q=$.getBoundingClientRect();G({top:Q.bottom+6,left:Q.right-160})};T();const I=$=>{!A.current||!$.target||L.current?.contains($.target)||A.current.contains($.target)||(D(!1),_(!1))},E=$=>{const Q=$.target;A.current&&Q&&A.current.contains(Q)||(D(!1),_(!1))};return document.addEventListener("mousedown",I),document.addEventListener("scroll",E,!0),window.addEventListener("resize",T),()=>{document.removeEventListener("mousedown",I),document.removeEventListener("scroll",E,!0),window.removeEventListener("resize",T)}},[O]);const U=M>0||j>0,W=()=>{D(!1),_(!1)},ne=T=>{T.stopPropagation();const I=M>0,E=j>0;if(!I&&!E)return;const $=I&&E?["off","inputs","outputs","both"]:I?["off","inputs"]:["off","outputs"],Q=$.indexOf(S),fe=$[(Q+1)%$.length];w(r,fe)},ve=T=>{T.stopPropagation(),D(I=>!I)},ae=T=>{T.stopPropagation(),s(),W()},re=T=>{T.stopPropagation(),N(r),W()},R=T=>{T.stopPropagation(),k(r),W()},F=T=>{T.stopPropagation(),i&&(h(i.widgetIndex,i.name,i.type,i.options),W())},pe=T=>{T.stopPropagation(),m(null),W()},xe=T=>{T.stopPropagation(),_(!z)},he=T=>I=>{I.stopPropagation(),m({nodeId:r,widgetIndex:T.widgetIndex,widgetName:T.name,widgetType:T.type,options:T.options}),W()};return u.jsxs("div",{className:"flex items-center gap-1 relative",onClick:T=>T.stopPropagation(),children:[U&&u.jsx("button",{type:"button",className:"w-8 h-8 flex items-center justify-center","aria-pressed":S!=="off","aria-label":"Highlight connected nodes",onClick:ne,children:u.jsx(sb,{className:"w-6 h-6 overflow-visible",nodeId:r,connectionHighlightMode:S,leftLineCount:M,rightLineCount:j})}),u.jsx("button",{onClick:ve,className:"w-8 h-8 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent","aria-label":"Node options",ref:L,children:g?u.jsx(Hl,{className:"w-5 h-5 text-yellow-500"}):u.jsx(vl,{className:"w-5 h-5 -rotate-90"})}),O&&B&&rr.createPortal(u.jsxs("div",{ref:A,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:B.top,left:B.left},children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ae,children:[u.jsx(Xd,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),(g||x)&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:T=>{T.stopPropagation(),y(),W()},children:[g?u.jsx(bi,{className:"w-4 h-4 text-gray-500"}):u.jsx(Hl,{className:"w-4 h-4 text-yellow-500"}),g?"Remove bookmark":"Bookmark node"]}),u.jsx("div",{className:"border-t border-gray-200 my-1"}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:re,children:[u.jsx(Ed,{className:"w-4 h-4 text-gray-500",isBypassed:l}),l?"Engage node":"Bypass node"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:R,children:[u.jsx(ur,{className:"w-4 h-4 text-gray-500"}),"Hide node"]}),o.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"border-t border-gray-200 my-1"}),i?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:F,children:[d?u.jsx(To,{className:"w-4 h-4 text-fuchsia-500"}):u.jsx(Od,{className:"w-4 h-4 text-gray-500"}),d?"Remove pin":"Pin widget"]}):u.jsxs(u.Fragment,{children:[p&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:pe,children:[u.jsx(To,{className:"w-4 h-4 text-fuchsia-500"}),"Remove pin"]}),u.jsxs("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex items-center justify-between",onClick:xe,children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx(Od,{className:"w-4 h-4 text-gray-500"}),"Pin widget"]}),u.jsx(wi,{className:`w-4 h-4 text-gray-400 transition-transform ${z?"rotate-90":""}`})]}),z&&u.jsx("div",{className:"border-t border-gray-100 bg-gray-50 max-h-48 overflow-auto",children:o.map(T=>u.jsx("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 text-gray-700",onClick:he(T),children:T.name},T.widgetIndex))})]})]})]}),document.body)]})}function Zb({nodeId:r,open:l,errors:s,anchorRef:o,onClose:i}){const d=x=>{x.stopPropagation(),i()},[p,h]=b.useState(null),m=b.useRef(null),g=Ln(x=>x.currentPanel);return b.useEffect(()=>{l&&g!=="workflow"&&i()},[l,g,i]),b.useEffect(()=>{if(!l)return;const x=()=>{const k=o.current;if(!k)return;const S=k.getBoundingClientRect();h({top:S.bottom+8,left:Math.max(16,Math.min(S.left+S.width/2-140,window.innerWidth-296))})};x();const y=k=>{k.target&&(o.current?.contains(k.target)||m.current?.contains(k.target)||i())},N=()=>{i()};return document.addEventListener("pointerdown",y),document.addEventListener("scroll",N,!0),window.addEventListener("resize",x),()=>{document.removeEventListener("pointerdown",y),document.removeEventListener("scroll",N,!0),window.removeEventListener("resize",x)}},[l,r,i,o]),!l||s.length===0||!p?null:rr.createPortal(u.jsxs("div",{ref:m,id:`error-popover-${r}`,className:"error-popover-root fixed z-[2000] bg-red-50 border border-red-700 rounded-lg shadow-lg w-72 max-h-64 overflow-auto",style:{top:p.top,left:p.left},children:[u.jsxs("div",{id:`error-popover-header-${r}`,className:"popover-header flex items-center justify-between px-3 py-2 border-b border-red-200 bg-red-700",children:[u.jsxs("span",{id:`error-popover-title-${r}`,className:"popover-title text-sm font-semibold text-white",children:[s.length," ",s.length===1?"Error":"Errors"]}),u.jsx("button",{type:"button",onClick:d,className:"w-6 h-6 flex items-center justify-center text-red-200 hover:text-white rounded","aria-label":"Close",children:u.jsx(Zd,{className:"w-4 h-4"})})]}),u.jsx("div",{id:`error-popover-body-${r}`,className:"popover-body p-3 space-y-2 bg-red-100",children:s.map((x,y)=>{const N=x.details?.toLowerCase().replace(/[_\s]/g,"")||"",k=x.inputName?.toLowerCase().replace(/[_\s]/g,"")||"",S=!x.details||x.details===x.message||x.inputName&&N===k;return u.jsxs("div",{className:"error-item flex items-start gap-2 text-sm",children:[u.jsx("span",{className:"error-dot mt-1.5 h-1.5 w-1.5 rounded-full bg-red-700 shrink-0","aria-hidden":"true"}),u.jsxs("div",{className:"error-content-wrapper min-w-0",children:[x.inputName&&u.jsx("div",{className:"error-input-name font-medium text-red-900 mb-0.5",children:x.inputName}),u.jsx("div",{className:"error-message-text text-red-800",children:x.message}),!S&&u.jsx("div",{className:"error-details-text text-xs text-red-700 mt-0.5 break-words",children:x.details})]})]},y)})})]}),document.body)}function Kb({noteText:r,noteLinkified:l,noteWidgetIndex:s,isEditingNote:o,setIsEditingNote:i,onUpdateNote:d,noteTextareaRef:p,onNoteTap:h}){const m=x=>{s!==null&&d(x)},g=x=>{s!==null&&d(x.target.value)};return u.jsxs("div",{className:"mb-3 group","data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1.5","data-textarea-header":"true",children:[u.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Note"}),o&&u.jsx(Co,{value:r,onChange:m,textareaRef:p,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),o?u.jsx("textarea",{ref:p,value:r,onChange:g,onBlur:()=>i(!1),className:"w-full p-3 border rounded-lg text-base resize-none note-display",rows:Math.min(8,Math.max(3,r.split(`
`).length))}):u.jsx("div",{className:"w-full p-3 border rounded-lg text-base whitespace-pre-wrap break-words note-display",onDoubleClick:()=>i(!0),onTouchEnd:h,children:l})]})}function Jb({show:r,previewImage:l,displayName:s,onImageClick:o,isExecuting:i,overallProgress:d,displayNodeProgress:p}){return!r||!l?null:u.jsxs("div",{className:"mb-3",children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Output Preview"}),u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:qn(l.filename,l.subfolder,l.type),alt:`${s} output`,className:"w-full h-auto rounded-lg border border-gray-100",loading:"lazy",onClick:o},"preview"),i&&d!==null&&u.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-lg flex items-end p-3",children:u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs text-white/90 mb-1",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[p,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-white/30 overflow-hidden",children:u.jsx("div",{className:"h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,p))}%`}})}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-white/90 mt-2 mb-1",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[d,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-white/30 overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,d))}%`}})})]})})]})]})}function e2({nodeId:r,displayName:l,isEditingLabel:s,labelValue:o,labelInputRef:i,onLabelChange:d,onLabelBlur:p,isCollapsed:h,isBypassed:m,isExecuting:g,overallProgress:x,hasErrors:y,errorIconRef:N,errorPopoverOpen:k,setErrorPopoverOpen:S,toggleNodeFold:w,rightSlot:M}){const j=()=>{s||w(r)},O=z=>{z.stopPropagation(),w(r)},D=z=>{z.stopPropagation(),S(!k)};return u.jsxs("div",{id:`node-header-${r}`,className:`node-header flex items-center justify-between cursor-pointer gap-3 ${h?"":"mb-3 pb-2 border-b"} ${m?`bg-purple-200 border-purple-300 px-3 -mx-3 -mt-1 pt-1 rounded-t-xl ${h?"pb-1 -mb-1 rounded-b-xl":""}`:h?"":"border-gray-100"}`,onClick:j,children:[u.jsxs("div",{id:`node-title-container-${r}`,className:"flex items-center gap-1 min-w-0",children:[u.jsx("button",{onClick:O,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-400 hover:text-gray-600 shrink-0",children:h?u.jsx(Bl,{className:"w-6 h-6"}):u.jsx(Wn,{className:"w-6 h-6"})}),s?u.jsx("input",{ref:i,value:o,onChange:z=>d(z.target.value),onBlur:p,onKeyDown:z=>{(z.key==="Enter"||z.key==="Escape")&&z.currentTarget.blur()},onClick:z=>z.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{id:`node-display-name-${r}`,className:`font-semibold text-gray-900 select-none flex-1 min-w-0 ${h?"whitespace-nowrap overflow-hidden text-ellipsis":"whitespace-normal break-words"}`,children:l}),u.jsxs("span",{id:`node-id-badge-${r}`,className:"text-xs text-gray-400 min-w-[2ch] text-right",children:["#",r]}),y&&u.jsx("button",{ref:N,type:"button",onClick:D,className:"w-5 h-5 flex items-center justify-center text-red-500 hover:text-red-600 shrink-0","aria-label":"View errors",children:u.jsx(L0,{className:"w-4 h-4"})}),g&&h&&x!==null?u.jsxs("div",{id:`node-progress-indicator-${r}`,className:"relative w-6 h-6 flex items-center justify-center",children:[u.jsx(yb,{className:"absolute",width:"24",height:"24",style:{transform:"rotate(-90deg)"},progress:x,radius:10}),u.jsx("span",{id:`node-progress-text-${r}`,className:"text-[8px] font-bold text-blue-600",children:x})]}):null,g&&!h?u.jsx("span",{id:`node-executing-pulse-${r}`,className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}):null]}),u.jsx("div",{id:`node-header-right-slot-${r}`,className:"header-right-slot",children:M})]})}function Jd({isOpen:r,title:l,onClose:s,children:o,headerActions:i}){const d=Un(p=>p.viewerOpen);return b.useEffect(()=>{if(r){const p=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=p}}},[r]),r?rr.createPortal(u.jsx("div",{className:"fixed inset-0 z-[2300] bg-gray-400/40 dark:bg-black/50 backdrop-blur-sm safe-area-top",onClick:s,children:u.jsxs("div",{className:"w-full h-full flex flex-col",style:{paddingTop:d?"env(safe-area-inset-top, 0px)":"calc(var(--top-bar-offset, 0px) + env(safe-area-inset-top, 0px))",paddingBottom:"var(--bottom-bar-offset, 0px)"},onClick:p=>p.stopPropagation(),children:[u.jsxs("div",{className:"bg-white dark:bg-[#151a23] p-4 border-b border-gray-200 dark:border-gray-800 shadow-sm relative z-50 min-h-0 overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200 truncate pr-4 pt-1 flex-1",children:l}),u.jsxs("div",{className:"flex items-center gap-2",children:[i,u.jsx("button",{onClick:s,className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Close",children:u.jsx(Zd,{className:"w-6 h-6"})})]})]}),u.jsx("div",{className:"mt-2",children:o})]}),u.jsx("div",{className:"flex-1",onClick:s})]})}),document.body):null}function Na({isPinned:r,onToggle:l}){if(!r||!l)return null;const s=o=>{o.preventDefault(),o.stopPropagation(),l()};return u.jsx("button",{type:"button",onClick:s,className:"flex items-center justify-center transition-colors text-fuchsia-500 hover:text-fuchsia-600","aria-label":"Remove pin",children:u.jsx(To,{className:"w-5 h-5"})})}function z0(){return typeof window>"u"?!1:window.matchMedia("(pointer: coarse)").matches}function kg({containerClass:r,name:l,value:s,options:o,onChange:i,disabled:d=!1,hideLabel:p=!1,hasPin:h,isPinned:m=!1,onTogglePin:g,maxHeight:x,hasError:y=!1,forceModalOpen:N=!1,onModalClose:k}){const S=W=>{if(!Array.isArray(o))return o?.[W]},w=S("multiline"),M=S("placeholder"),j=String(s??""),O=W=>{i(W.target.value)},[D,z]=b.useState(!1),_=N||D,A=z0(),L=N||A,B=b.useRef(null),G=b.useRef(null);b.useLayoutEffect(()=>{if(!w)return;const W=B.current;W&&(W.style.height="0px",W.style.height=`${W.scrollHeight}px`)},[s,_,w]);const U=()=>{z(!1),k?.()};return L?u.jsxs("div",{className:r,children:[w?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between mb-1 min-h-[18px]",children:[p?u.jsx("span",{className:"block text-sm font-medium text-gray-700"}):u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:l}),u.jsx(Co,{value:j,onChange:i,textareaRef:B,className:"opacity-100"})]}),u.jsxs("div",{className:`relative w-full p-3 comfy-input min-h-[100px] text-base group cursor-text ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-10":""} ${y?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&z(!0),children:[u.jsx("div",{className:"whitespace-pre-wrap break-words text-gray-900 dark:text-[#e5e7eb]",children:j||u.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:M})}),h&&u.jsx("div",{className:"absolute right-2 top-2 pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Na,{isPinned:m,onToggle:g})})})]})]}):u.jsxs(u.Fragment,{children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),u.jsxs("div",{className:`relative w-full p-3 comfy-input text-base min-h-[46px] flex items-center cursor-text ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-16":"pr-6"} ${y?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&z(!0),children:[u.jsx("div",{className:"truncate min-w-0 flex-1 text-gray-900 dark:text-[#e5e7eb]",children:j||u.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:M})}),h&&u.jsx("div",{className:"absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto px-3",children:u.jsx(Na,{isPinned:m,onToggle:g})})})]})]}),u.jsx(Jd,{title:l,isOpen:_,onClose:U,headerActions:w?u.jsx(Co,{value:j,onChange:i,textareaRef:B,className:"mr-2"}):null,children:w?u.jsx("textarea",{ref:B,value:j,onChange:W=>i(W.target.value),placeholder:M,className:"w-full p-3 border border-gray-300 rounded-lg min-h-[150px] text-base resize-none outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",autoFocus:!N,disabled:d}):u.jsx("input",{ref:G,type:"text",value:j,onChange:W=>i(W.target.value),placeholder:M,className:"w-full p-3 border border-gray-300 rounded-lg text-base outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",autoFocus:!N,disabled:d})})]}):w?u.jsxs("div",{className:`${r} group`,"data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1 min-h-[18px]","data-textarea-header":"true",children:[p?u.jsx("span",{className:"block text-sm font-medium text-gray-700"}):u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:l}),u.jsx(Co,{value:j,onChange:i,textareaRef:B,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("textarea",{ref:B,value:j,onChange:O,placeholder:M,className:`w-full p-3 comfy-input min-h-[100px] text-base resize-none ${x?"overflow-auto":"overflow-hidden"} ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-10":""} ${y?"border-red-700 ring-1 ring-red-700":""}`,style:{overflowAnchor:"none",...x?{maxHeight:x}:{}},disabled:d}),h&&u.jsx("div",{className:"absolute right-2 top-2",children:u.jsx(Na,{isPinned:m,onToggle:g})})]})]}):u.jsxs("div",{className:r,children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:String(s??""),onChange:W=>i(W.target.value),placeholder:M,className:`w-full p-3 comfy-input text-base ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-16":""} ${y?"border-red-700 ring-1 ring-red-700":""}`,disabled:d}),h&&u.jsx("div",{className:"absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto px-3",children:u.jsx(Na,{isPinned:m,onToggle:g})})})]})]})}function _d({containerClass:r,name:l,value:s,options:o,onChange:i,disabled:d,type:p,min:h,max:m,step:g,isInt:x,hasError:y=!1}){const[N,k]=b.useState(String(s||0)),S=x??(p?p.toUpperCase()==="INT":Number.isInteger(s)),w=g??o?.step??(S?1:.1),M=h??(o?.min!==void 0?o.min:-1/0),j=m??(o?.max!==void 0?o.max:1/0);b.useEffect(()=>{k(String(s))},[s]);const O=L=>{k(L.target.value)},D=()=>{let L=S?parseInt(N,10):parseFloat(N);isNaN(L)&&(L=s),L=Math.max(M,Math.min(j,L)),i(L),k(String(L))},z=L=>{const B=(S?parseInt(N,10):parseFloat(N))||0,G=Math.max(M,Math.min(j,B+L));i(G)},_=[`number-input-field-${l}`,"w-full p-3 comfy-input text-base text-gray-900",d?"opacity-60 cursor-not-allowed":"",y?"border-red-700 ring-1 ring-red-700":""].filter(Boolean).join(" "),A=["w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 text-gray-700 flex-shrink-0",d?"opacity-60 cursor-not-allowed":"active:scale-95 transition-all"].filter(Boolean).join(" ");return u.jsxs("div",{className:`${r??""} number-control-${l}`,children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),u.jsxs("div",{className:`number-stepper-container-${l} flex items-center gap-2`,children:[u.jsx("input",{className:_,type:"number",value:N,onChange:O,onBlur:D,disabled:d,"aria-label":p?`${l} ${p}`:l}),u.jsx("button",{type:"button",onClick:()=>z(-w),className:A,"aria-label":"Decrease value",disabled:d,children:u.jsx(lb,{className:"w-4 h-4"})}),u.jsx("button",{type:"button",onClick:()=>z(w),className:A,"aria-label":"Increase value",disabled:d,children:u.jsx(Pd,{className:"w-4 h-4"})})]})]})}function Vl(r){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},Vl(r)}function t2(r,l){if(Vl(r)!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var o=s.call(r,l);if(Vl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(r)}function B0(r){var l=t2(r,"string");return Vl(l)=="symbol"?l:l+""}function jo(r,l,s){return(l=B0(l))in r?Object.defineProperty(r,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[l]=s,r}function Mg(r,l){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);l&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),s.push.apply(s,o)}return s}function Ue(r){for(var l=1;l<arguments.length;l++){var s=arguments[l]!=null?arguments[l]:{};l%2?Mg(Object(s),!0).forEach(function(o){jo(r,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):Mg(Object(s)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(s,o))})}return r}function n2(r){if(Array.isArray(r))return r}function r2(r,l){var s=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(s!=null){var o,i,d,p,h=[],m=!0,g=!1;try{if(d=(s=s.call(r)).next,l===0){if(Object(s)!==s)return;m=!1}else for(;!(m=(o=d.call(s)).done)&&(h.push(o.value),h.length!==l);m=!0);}catch(x){g=!0,i=x}finally{try{if(!m&&s.return!=null&&(p=s.return(),Object(p)!==p))return}finally{if(g)throw i}}return h}}function Ld(r,l){(l==null||l>r.length)&&(l=r.length);for(var s=0,o=Array(l);s<l;s++)o[s]=r[s];return o}function I0(r,l){if(r){if(typeof r=="string")return Ld(r,l);var s={}.toString.call(r).slice(8,-1);return s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set"?Array.from(r):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Ld(r,l):void 0}}function l2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ur(r,l){return n2(r)||r2(r,l)||I0(r,l)||l2()}function a2(r,l){if(r==null)return{};var s={};for(var o in r)if({}.hasOwnProperty.call(r,o)){if(l.indexOf(o)!==-1)continue;s[o]=r[o]}return s}function Fr(r,l){if(r==null)return{};var s,o,i=a2(r,l);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);for(o=0;o<d.length;o++)s=d[o],l.indexOf(s)===-1&&{}.propertyIsEnumerable.call(r,s)&&(i[s]=r[s])}return i}var o2=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function s2(r){var l=r.defaultInputValue,s=l===void 0?"":l,o=r.defaultMenuIsOpen,i=o===void 0?!1:o,d=r.defaultValue,p=d===void 0?null:d,h=r.inputValue,m=r.menuIsOpen,g=r.onChange,x=r.onInputChange,y=r.onMenuClose,N=r.onMenuOpen,k=r.value,S=Fr(r,o2),w=b.useState(h!==void 0?h:s),M=Ur(w,2),j=M[0],O=M[1],D=b.useState(m!==void 0?m:i),z=Ur(D,2),_=z[0],A=z[1],L=b.useState(k!==void 0?k:p),B=Ur(L,2),G=B[0],U=B[1],W=b.useCallback(function(pe,xe){typeof g=="function"&&g(pe,xe),U(pe)},[g]),ne=b.useCallback(function(pe,xe){var he;typeof x=="function"&&(he=x(pe,xe)),O(he!==void 0?he:pe)},[x]),ve=b.useCallback(function(){typeof N=="function"&&N(),A(!0)},[N]),ae=b.useCallback(function(){typeof y=="function"&&y(),A(!1)},[y]),re=h!==void 0?h:j,R=m!==void 0?m:_,F=k!==void 0?k:G;return Ue(Ue({},S),{},{inputValue:re,menuIsOpen:R,onChange:W,onInputChange:ne,onMenuClose:ae,onMenuOpen:ve,value:F})}function We(){return We=Object.assign?Object.assign.bind():function(r){for(var l=1;l<arguments.length;l++){var s=arguments[l];for(var o in s)({}).hasOwnProperty.call(s,o)&&(r[o]=s[o])}return r},We.apply(null,arguments)}function i2(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")}function Og(r,l){for(var s=0;s<l.length;s++){var o=l[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,B0(o.key),o)}}function u2(r,l,s){return l&&Og(r.prototype,l),s&&Og(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r}function Ad(r,l){return Ad=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,o){return s.__proto__=o,s},Ad(r,l)}function c2(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(l&&l.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),l&&Ad(r,l)}function Ni(r){return Ni=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},Ni(r)}function H0(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H0=function(){return!!r})()}function d2(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function f2(r,l){if(l&&(Vl(l)=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d2(r)}function p2(r){var l=H0();return function(){var s,o=Ni(r);if(l){var i=Ni(this).constructor;s=Reflect.construct(o,arguments,i)}else s=o.apply(this,arguments);return f2(this,s)}}function m2(r){if(Array.isArray(r))return Ld(r)}function h2(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function g2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ef(r){return m2(r)||h2(r)||I0(r)||g2()}function x2(r){if(r.sheet)return r.sheet;for(var l=0;l<document.styleSheets.length;l++)if(document.styleSheets[l].ownerNode===r)return document.styleSheets[l]}function v2(r){var l=document.createElement("style");return l.setAttribute("data-emotion",r.key),r.nonce!==void 0&&l.setAttribute("nonce",r.nonce),l.appendChild(document.createTextNode("")),l.setAttribute("data-s",""),l}var y2=(function(){function r(s){var o=this;this._insertTag=function(i){var d;o.tags.length===0?o.insertionPoint?d=o.insertionPoint.nextSibling:o.prepend?d=o.container.firstChild:d=o.before:d=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(i,d),o.tags.push(i)},this.isSpeedy=s.speedy===void 0?!0:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var l=r.prototype;return l.hydrate=function(o){o.forEach(this._insertTag)},l.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(v2(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var d=x2(i);try{d.insertRule(o,d.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(o));this.ctr++},l.flush=function(){this.tags.forEach(function(o){var i;return(i=o.parentNode)==null?void 0:i.removeChild(o)}),this.tags=[],this.ctr=0},r})(),vn="-ms-",ji="-moz-",Ct="-webkit-",V0="comm",tf="rule",nf="decl",b2="@import",U0="@keyframes",w2="@layer",S2=Math.abs,zi=String.fromCharCode,N2=Object.assign;function j2(r,l){return mn(r,0)^45?(((l<<2^mn(r,0))<<2^mn(r,1))<<2^mn(r,2))<<2^mn(r,3):0}function G0(r){return r.trim()}function C2(r,l){return(r=l.exec(r))?r[0]:r}function kt(r,l,s){return r.replace(l,s)}function Rd(r,l){return r.indexOf(l)}function mn(r,l){return r.charCodeAt(l)|0}function Lo(r,l,s){return r.slice(l,s)}function xr(r){return r.length}function rf(r){return r.length}function ri(r,l){return l.push(r),r}function k2(r,l){return r.map(l).join("")}var Bi=1,Ma=1,q0=0,An=0,rn=0,Ea="";function Ii(r,l,s,o,i,d,p){return{value:r,root:l,parent:s,type:o,props:i,children:d,line:Bi,column:Ma,length:p,return:""}}function So(r,l){return N2(Ii("",null,null,"",null,null,0),r,{length:-r.length},l)}function M2(){return rn}function O2(){return rn=An>0?mn(Ea,--An):0,Ma--,rn===10&&(Ma=1,Bi--),rn}function Fn(){return rn=An<q0?mn(Ea,An++):0,Ma++,rn===10&&(Ma=1,Bi++),rn}function yr(){return mn(Ea,An)}function ci(){return An}function Uo(r,l){return Lo(Ea,r,l)}function Ao(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function W0(r){return Bi=Ma=1,q0=xr(Ea=r),An=0,[]}function F0(r){return Ea="",r}function di(r){return G0(Uo(An-1,Dd(r===91?r+2:r===40?r+1:r)))}function E2(r){for(;(rn=yr())&&rn<33;)Fn();return Ao(r)>2||Ao(rn)>3?"":" "}function T2(r,l){for(;--l&&Fn()&&!(rn<48||rn>102||rn>57&&rn<65||rn>70&&rn<97););return Uo(r,ci()+(l<6&&yr()==32&&Fn()==32))}function Dd(r){for(;Fn();)switch(rn){case r:return An;case 34:case 39:r!==34&&r!==39&&Dd(rn);break;case 40:r===41&&Dd(r);break;case 92:Fn();break}return An}function _2(r,l){for(;Fn()&&r+rn!==57;)if(r+rn===84&&yr()===47)break;return"/*"+Uo(l,An-1)+"*"+zi(r===47?r:Fn())}function L2(r){for(;!Ao(yr());)Fn();return Uo(r,An)}function A2(r){return F0(fi("",null,null,null,[""],r=W0(r),0,[0],r))}function fi(r,l,s,o,i,d,p,h,m){for(var g=0,x=0,y=p,N=0,k=0,S=0,w=1,M=1,j=1,O=0,D="",z=i,_=d,A=o,L=D;M;)switch(S=O,O=Fn()){case 40:if(S!=108&&mn(L,y-1)==58){Rd(L+=kt(di(O),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:L+=di(O);break;case 9:case 10:case 13:case 32:L+=E2(S);break;case 92:L+=T2(ci()-1,7);continue;case 47:switch(yr()){case 42:case 47:ri(R2(_2(Fn(),ci()),l,s),m);break;default:L+="/"}break;case 123*w:h[g++]=xr(L)*j;case 125*w:case 59:case 0:switch(O){case 0:case 125:M=0;case 59+x:j==-1&&(L=kt(L,/\f/g,"")),k>0&&xr(L)-y&&ri(k>32?Tg(L+";",o,s,y-1):Tg(kt(L," ","")+";",o,s,y-2),m);break;case 59:L+=";";default:if(ri(A=Eg(L,l,s,g,x,i,h,D,z=[],_=[],y),d),O===123)if(x===0)fi(L,l,A,A,z,d,y,h,_);else switch(N===99&&mn(L,3)===110?100:N){case 100:case 108:case 109:case 115:fi(r,A,A,o&&ri(Eg(r,A,A,0,0,i,h,D,i,z=[],y),_),i,_,y,h,o?z:_);break;default:fi(L,A,A,A,[""],_,0,h,_)}}g=x=k=0,w=j=1,D=L="",y=p;break;case 58:y=1+xr(L),k=S;default:if(w<1){if(O==123)--w;else if(O==125&&w++==0&&O2()==125)continue}switch(L+=zi(O),O*w){case 38:j=x>0?1:(L+="\f",-1);break;case 44:h[g++]=(xr(L)-1)*j,j=1;break;case 64:yr()===45&&(L+=di(Fn())),N=yr(),x=y=xr(D=L+=L2(ci())),O++;break;case 45:S===45&&xr(L)==2&&(w=0)}}return d}function Eg(r,l,s,o,i,d,p,h,m,g,x){for(var y=i-1,N=i===0?d:[""],k=rf(N),S=0,w=0,M=0;S<o;++S)for(var j=0,O=Lo(r,y+1,y=S2(w=p[S])),D=r;j<k;++j)(D=G0(w>0?N[j]+" "+O:kt(O,/&\f/g,N[j])))&&(m[M++]=D);return Ii(r,l,s,i===0?tf:h,m,g,x)}function R2(r,l,s){return Ii(r,l,s,V0,zi(M2()),Lo(r,2,-2),0)}function Tg(r,l,s,o){return Ii(r,l,s,nf,Lo(r,0,o),Lo(r,o+1,-1),o)}function ka(r,l){for(var s="",o=rf(r),i=0;i<o;i++)s+=l(r[i],i,r,l)||"";return s}function D2(r,l,s,o){switch(r.type){case w2:if(r.children.length)break;case b2:case nf:return r.return=r.return||r.value;case V0:return"";case U0:return r.return=r.value+"{"+ka(r.children,o)+"}";case tf:r.value=r.props.join(",")}return xr(s=ka(r.children,o))?r.return=r.value+"{"+s+"}":""}function z2(r){var l=rf(r);return function(s,o,i,d){for(var p="",h=0;h<l;h++)p+=r[h](s,o,i,d)||"";return p}}function B2(r){return function(l){l.root||(l=l.return)&&r(l)}}function I2(r){var l=Object.create(null);return function(s){return l[s]===void 0&&(l[s]=r(s)),l[s]}}var H2=function(l,s,o){for(var i=0,d=0;i=d,d=yr(),i===38&&d===12&&(s[o]=1),!Ao(d);)Fn();return Uo(l,An)},V2=function(l,s){var o=-1,i=44;do switch(Ao(i)){case 0:i===38&&yr()===12&&(s[o]=1),l[o]+=H2(An-1,s,o);break;case 2:l[o]+=di(i);break;case 4:if(i===44){l[++o]=yr()===58?"&\f":"",s[o]=l[o].length;break}default:l[o]+=zi(i)}while(i=Fn());return l},U2=function(l,s){return F0(V2(W0(l),s))},_g=new WeakMap,G2=function(l){if(!(l.type!=="rule"||!l.parent||l.length<1)){for(var s=l.value,o=l.parent,i=l.column===o.column&&l.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(l.props.length===1&&s.charCodeAt(0)!==58&&!_g.get(o))&&!i){_g.set(l,!0);for(var d=[],p=U2(s,d),h=o.props,m=0,g=0;m<p.length;m++)for(var x=0;x<h.length;x++,g++)l.props[g]=d[m]?p[m].replace(/&\f/g,h[x]):h[x]+" "+p[m]}}},q2=function(l){if(l.type==="decl"){var s=l.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(l.return="",l.value="")}};function $0(r,l){switch(j2(r,l)){case 5103:return Ct+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ct+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return Ct+r+ji+r+vn+r+r;case 6828:case 4268:return Ct+r+vn+r+r;case 6165:return Ct+r+vn+"flex-"+r+r;case 5187:return Ct+r+kt(r,/(\w+).+(:[^]+)/,Ct+"box-$1$2"+vn+"flex-$1$2")+r;case 5443:return Ct+r+vn+"flex-item-"+kt(r,/flex-|-self/,"")+r;case 4675:return Ct+r+vn+"flex-line-pack"+kt(r,/align-content|flex-|-self/,"")+r;case 5548:return Ct+r+vn+kt(r,"shrink","negative")+r;case 5292:return Ct+r+vn+kt(r,"basis","preferred-size")+r;case 6060:return Ct+"box-"+kt(r,"-grow","")+Ct+r+vn+kt(r,"grow","positive")+r;case 4554:return Ct+kt(r,/([^-])(transform)/g,"$1"+Ct+"$2")+r;case 6187:return kt(kt(kt(r,/(zoom-|grab)/,Ct+"$1"),/(image-set)/,Ct+"$1"),r,"")+r;case 5495:case 3959:return kt(r,/(image-set\([^]*)/,Ct+"$1$`$1");case 4968:return kt(kt(r,/(.+:)(flex-)?(.*)/,Ct+"box-pack:$3"+vn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ct+r+r;case 4095:case 3583:case 4068:case 2532:return kt(r,/(.+)-inline(.+)/,Ct+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xr(r)-1-l>6)switch(mn(r,l+1)){case 109:if(mn(r,l+4)!==45)break;case 102:return kt(r,/(.+:)(.+)-([^]+)/,"$1"+Ct+"$2-$3$1"+ji+(mn(r,l+3)==108?"$3":"$2-$3"))+r;case 115:return~Rd(r,"stretch")?$0(kt(r,"stretch","fill-available"),l)+r:r}break;case 4949:if(mn(r,l+1)!==115)break;case 6444:switch(mn(r,xr(r)-3-(~Rd(r,"!important")&&10))){case 107:return kt(r,":",":"+Ct)+r;case 101:return kt(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ct+(mn(r,14)===45?"inline-":"")+"box$3$1"+Ct+"$2$3$1"+vn+"$2box$3")+r}break;case 5936:switch(mn(r,l+11)){case 114:return Ct+r+vn+kt(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return Ct+r+vn+kt(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return Ct+r+vn+kt(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return Ct+r+vn+r+r}return r}var W2=function(l,s,o,i){if(l.length>-1&&!l.return)switch(l.type){case nf:l.return=$0(l.value,l.length);break;case U0:return ka([So(l,{value:kt(l.value,"@","@"+Ct)})],i);case tf:if(l.length)return k2(l.props,function(d){switch(C2(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ka([So(l,{props:[kt(d,/:(read-\w+)/,":"+ji+"$1")]})],i);case"::placeholder":return ka([So(l,{props:[kt(d,/:(plac\w+)/,":"+Ct+"input-$1")]}),So(l,{props:[kt(d,/:(plac\w+)/,":"+ji+"$1")]}),So(l,{props:[kt(d,/:(plac\w+)/,vn+"input-$1")]})],i)}return""})}},F2=[W2],$2=function(l){var s=l.key;if(s==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(w){var M=w.getAttribute("data-emotion");M.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var i=l.stylisPlugins||F2,d={},p,h=[];p=l.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(w){for(var M=w.getAttribute("data-emotion").split(" "),j=1;j<M.length;j++)d[M[j]]=!0;h.push(w)});var m,g=[G2,q2];{var x,y=[D2,B2(function(w){x.insert(w)})],N=z2(g.concat(i,y)),k=function(M){return ka(A2(M),N)};m=function(M,j,O,D){x=O,k(M?M+"{"+j.styles+"}":j.styles),D&&(S.inserted[j.name]=!0)}}var S={key:s,sheet:new y2({key:s,container:p,nonce:l.nonce,speedy:l.speedy,prepend:l.prepend,insertionPoint:l.insertionPoint}),nonce:l.nonce,inserted:d,registered:{},insert:m};return S.sheet.hydrate(h),S},ad={exports:{}},Ot={};var Lg;function Y2(){if(Lg)return Ot;Lg=1;var r=typeof Symbol=="function"&&Symbol.for,l=r?Symbol.for("react.element"):60103,s=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,d=r?Symbol.for("react.profiler"):60114,p=r?Symbol.for("react.provider"):60109,h=r?Symbol.for("react.context"):60110,m=r?Symbol.for("react.async_mode"):60111,g=r?Symbol.for("react.concurrent_mode"):60111,x=r?Symbol.for("react.forward_ref"):60112,y=r?Symbol.for("react.suspense"):60113,N=r?Symbol.for("react.suspense_list"):60120,k=r?Symbol.for("react.memo"):60115,S=r?Symbol.for("react.lazy"):60116,w=r?Symbol.for("react.block"):60121,M=r?Symbol.for("react.fundamental"):60117,j=r?Symbol.for("react.responder"):60118,O=r?Symbol.for("react.scope"):60119;function D(_){if(typeof _=="object"&&_!==null){var A=_.$$typeof;switch(A){case l:switch(_=_.type,_){case m:case g:case o:case d:case i:case y:return _;default:switch(_=_&&_.$$typeof,_){case h:case x:case S:case k:case p:return _;default:return A}}case s:return A}}}function z(_){return D(_)===g}return Ot.AsyncMode=m,Ot.ConcurrentMode=g,Ot.ContextConsumer=h,Ot.ContextProvider=p,Ot.Element=l,Ot.ForwardRef=x,Ot.Fragment=o,Ot.Lazy=S,Ot.Memo=k,Ot.Portal=s,Ot.Profiler=d,Ot.StrictMode=i,Ot.Suspense=y,Ot.isAsyncMode=function(_){return z(_)||D(_)===m},Ot.isConcurrentMode=z,Ot.isContextConsumer=function(_){return D(_)===h},Ot.isContextProvider=function(_){return D(_)===p},Ot.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===l},Ot.isForwardRef=function(_){return D(_)===x},Ot.isFragment=function(_){return D(_)===o},Ot.isLazy=function(_){return D(_)===S},Ot.isMemo=function(_){return D(_)===k},Ot.isPortal=function(_){return D(_)===s},Ot.isProfiler=function(_){return D(_)===d},Ot.isStrictMode=function(_){return D(_)===i},Ot.isSuspense=function(_){return D(_)===y},Ot.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===o||_===g||_===d||_===i||_===y||_===N||typeof _=="object"&&_!==null&&(_.$$typeof===S||_.$$typeof===k||_.$$typeof===p||_.$$typeof===h||_.$$typeof===x||_.$$typeof===M||_.$$typeof===j||_.$$typeof===O||_.$$typeof===w)},Ot.typeOf=D,Ot}var Ag;function Q2(){return Ag||(Ag=1,ad.exports=Y2()),ad.exports}var od,Rg;function X2(){if(Rg)return od;Rg=1;var r=Q2(),l={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},d={};d[r.ForwardRef]=o,d[r.Memo]=i;function p(S){return r.isMemo(S)?i:d[S.$$typeof]||l}var h=Object.defineProperty,m=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,x=Object.getOwnPropertyDescriptor,y=Object.getPrototypeOf,N=Object.prototype;function k(S,w,M){if(typeof w!="string"){if(N){var j=y(w);j&&j!==N&&k(S,j,M)}var O=m(w);g&&(O=O.concat(g(w)));for(var D=p(S),z=p(w),_=0;_<O.length;++_){var A=O[_];if(!s[A]&&!(M&&M[A])&&!(z&&z[A])&&!(D&&D[A])){var L=x(w,A);try{h(S,A,L)}catch{}}}}return S}return od=k,od}X2();var P2=!0;function Z2(r,l,s){var o="";return s.split(" ").forEach(function(i){r[i]!==void 0?l.push(r[i]+";"):i&&(o+=i+" ")}),o}var Y0=function(l,s,o){var i=l.key+"-"+s.name;(o===!1||P2===!1)&&l.registered[i]===void 0&&(l.registered[i]=s.styles)},K2=function(l,s,o){Y0(l,s,o);var i=l.key+"-"+s.name;if(l.inserted[s.name]===void 0){var d=s;do l.insert(s===d?"."+i:"",d,l.sheet,!0),d=d.next;while(d!==void 0)}};function J2(r){for(var l=0,s,o=0,i=r.length;i>=4;++o,i-=4)s=r.charCodeAt(o)&255|(r.charCodeAt(++o)&255)<<8|(r.charCodeAt(++o)&255)<<16|(r.charCodeAt(++o)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,l=(s&65535)*1540483477+((s>>>16)*59797<<16)^(l&65535)*1540483477+((l>>>16)*59797<<16);switch(i){case 3:l^=(r.charCodeAt(o+2)&255)<<16;case 2:l^=(r.charCodeAt(o+1)&255)<<8;case 1:l^=r.charCodeAt(o)&255,l=(l&65535)*1540483477+((l>>>16)*59797<<16)}return l^=l>>>13,l=(l&65535)*1540483477+((l>>>16)*59797<<16),((l^l>>>15)>>>0).toString(36)}var ew={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},tw=/[A-Z]|^ms/g,nw=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Q0=function(l){return l.charCodeAt(1)===45},Dg=function(l){return l!=null&&typeof l!="boolean"},sd=I2(function(r){return Q0(r)?r:r.replace(tw,"-$&").toLowerCase()}),zg=function(l,s){switch(l){case"animation":case"animationName":if(typeof s=="string")return s.replace(nw,function(o,i,d){return vr={name:i,styles:d,next:vr},i})}return ew[l]!==1&&!Q0(l)&&typeof s=="number"&&s!==0?s+"px":s};function Ro(r,l,s){if(s==null)return"";var o=s;if(o.__emotion_styles!==void 0)return o;switch(typeof s){case"boolean":return"";case"object":{var i=s;if(i.anim===1)return vr={name:i.name,styles:i.styles,next:vr},i.name;var d=s;if(d.styles!==void 0){var p=d.next;if(p!==void 0)for(;p!==void 0;)vr={name:p.name,styles:p.styles,next:vr},p=p.next;var h=d.styles+";";return h}return rw(r,l,s)}case"function":{if(r!==void 0){var m=vr,g=s(r);return vr=m,Ro(r,l,g)}break}}var x=s;return x}function rw(r,l,s){var o="";if(Array.isArray(s))for(var i=0;i<s.length;i++)o+=Ro(r,l,s[i])+";";else for(var d in s){var p=s[d];if(typeof p!="object"){var h=p;Dg(h)&&(o+=sd(d)+":"+zg(d,h)+";")}else if(Array.isArray(p)&&typeof p[0]=="string"&&l==null)for(var m=0;m<p.length;m++)Dg(p[m])&&(o+=sd(d)+":"+zg(d,p[m])+";");else{var g=Ro(r,l,p);switch(d){case"animation":case"animationName":{o+=sd(d)+":"+g+";";break}default:o+=d+"{"+g+"}"}}}return o}var Bg=/label:\s*([^\s;{]+)\s*(;|$)/g,vr;function X0(r,l,s){if(r.length===1&&typeof r[0]=="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var o=!0,i="";vr=void 0;var d=r[0];if(d==null||d.raw===void 0)o=!1,i+=Ro(s,l,d);else{var p=d;i+=p[0]}for(var h=1;h<r.length;h++)if(i+=Ro(s,l,r[h]),o){var m=d;i+=m[h]}Bg.lastIndex=0;for(var g="",x;(x=Bg.exec(i))!==null;)g+="-"+x[1];var y=J2(i)+g;return{name:y,styles:i,next:vr}}var lw=function(l){return l()},aw=rg.useInsertionEffect?rg.useInsertionEffect:!1,ow=aw||lw,P0=b.createContext(typeof HTMLElement<"u"?$2({key:"css"}):null);P0.Provider;var sw=function(l){return b.forwardRef(function(s,o){var i=b.useContext(P0);return l(s,i,o)})},iw=b.createContext({}),lf={}.hasOwnProperty,zd="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",uw=function(l,s){var o={};for(var i in s)lf.call(s,i)&&(o[i]=s[i]);return o[zd]=l,o},cw=function(l){var s=l.cache,o=l.serialized,i=l.isStringTag;return Y0(s,o,i),ow(function(){return K2(s,o,i)}),null},dw=sw(function(r,l,s){var o=r.css;typeof o=="string"&&l.registered[o]!==void 0&&(o=l.registered[o]);var i=r[zd],d=[o],p="";typeof r.className=="string"?p=Z2(l.registered,d,r.className):r.className!=null&&(p=r.className+" ");var h=X0(d,void 0,b.useContext(iw));p+=l.key+"-"+h.name;var m={};for(var g in r)lf.call(r,g)&&g!=="css"&&g!==zd&&(m[g]=r[g]);return m.className=p,s&&(m.ref=s),b.createElement(b.Fragment,null,b.createElement(cw,{cache:l,serialized:h,isStringTag:typeof i=="string"}),b.createElement(i,m))}),fw=dw,Ve=function(l,s){var o=arguments;if(s==null||!lf.call(s,"css"))return b.createElement.apply(void 0,o);var i=o.length,d=new Array(i);d[0]=fw,d[1]=uw(l,s);for(var p=2;p<i;p++)d[p]=o[p];return b.createElement.apply(null,d)};(function(r){var l;l||(l=r.JSX||(r.JSX={}))})(Ve||(Ve={}));function af(){for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return X0(l)}function pw(){var r=af.apply(void 0,arguments),l="animation-"+r.name;return{name:l,styles:"@keyframes "+l+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function mw(r,l){return l||(l=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(l)}}))}const hw=Math.min,gw=Math.max,Ci=Math.round,li=Math.floor,ki=r=>({x:r,y:r});function xw(r){const{x:l,y:s,width:o,height:i}=r;return{width:o,height:i,top:s,left:l,right:l+o,bottom:s+i,x:l,y:s}}function Hi(){return typeof window<"u"}function Z0(r){return J0(r)?(r.nodeName||"").toLowerCase():"#document"}function Gr(r){var l;return(r==null||(l=r.ownerDocument)==null?void 0:l.defaultView)||window}function K0(r){var l;return(l=(J0(r)?r.ownerDocument:r.document)||window.document)==null?void 0:l.documentElement}function J0(r){return Hi()?r instanceof Node||r instanceof Gr(r).Node:!1}function vw(r){return Hi()?r instanceof Element||r instanceof Gr(r).Element:!1}function of(r){return Hi()?r instanceof HTMLElement||r instanceof Gr(r).HTMLElement:!1}function Ig(r){return!Hi()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Gr(r).ShadowRoot}const yw=new Set(["inline","contents"]);function ex(r){const{overflow:l,overflowX:s,overflowY:o,display:i}=sf(r);return/auto|scroll|overlay|hidden|clip/.test(l+o+s)&&!yw.has(i)}function bw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ww=new Set(["html","body","#document"]);function Sw(r){return ww.has(Z0(r))}function sf(r){return Gr(r).getComputedStyle(r)}function Nw(r){if(Z0(r)==="html")return r;const l=r.assignedSlot||r.parentNode||Ig(r)&&r.host||K0(r);return Ig(l)?l.host:l}function tx(r){const l=Nw(r);return Sw(l)?r.ownerDocument?r.ownerDocument.body:r.body:of(l)&&ex(l)?l:tx(l)}function Mi(r,l,s){var o;l===void 0&&(l=[]),s===void 0&&(s=!0);const i=tx(r),d=i===((o=r.ownerDocument)==null?void 0:o.body),p=Gr(i);if(d){const h=Bd(p);return l.concat(p,p.visualViewport||[],ex(i)?i:[],h&&s?Mi(h):[])}return l.concat(i,Mi(i,[],s))}function Bd(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function jw(r){const l=sf(r);let s=parseFloat(l.width)||0,o=parseFloat(l.height)||0;const i=of(r),d=i?r.offsetWidth:s,p=i?r.offsetHeight:o,h=Ci(s)!==d||Ci(o)!==p;return h&&(s=d,o=p),{width:s,height:o,$:h}}function uf(r){return vw(r)?r:r.contextElement}function Hg(r){const l=uf(r);if(!of(l))return ki(1);const s=l.getBoundingClientRect(),{width:o,height:i,$:d}=jw(l);let p=(d?Ci(s.width):s.width)/o,h=(d?Ci(s.height):s.height)/i;return(!p||!Number.isFinite(p))&&(p=1),(!h||!Number.isFinite(h))&&(h=1),{x:p,y:h}}const Cw=ki(0);function kw(r){const l=Gr(r);return!bw()||!l.visualViewport?Cw:{x:l.visualViewport.offsetLeft,y:l.visualViewport.offsetTop}}function Mw(r,l,s){return!1}function Vg(r,l,s,o){l===void 0&&(l=!1);const i=r.getBoundingClientRect(),d=uf(r);let p=ki(1);l&&(p=Hg(r));const h=Mw()?kw(d):ki(0);let m=(i.left+h.x)/p.x,g=(i.top+h.y)/p.y,x=i.width/p.x,y=i.height/p.y;if(d){const N=Gr(d),k=o;let S=N,w=Bd(S);for(;w&&o&&k!==S;){const M=Hg(w),j=w.getBoundingClientRect(),O=sf(w),D=j.left+(w.clientLeft+parseFloat(O.paddingLeft))*M.x,z=j.top+(w.clientTop+parseFloat(O.paddingTop))*M.y;m*=M.x,g*=M.y,x*=M.x,y*=M.y,m+=D,g+=z,S=Gr(w),w=Bd(S)}}return xw({width:x,height:y,x:m,y:g})}function nx(r,l){return r.x===l.x&&r.y===l.y&&r.width===l.width&&r.height===l.height}function Ow(r,l){let s=null,o;const i=K0(r);function d(){var h;clearTimeout(o),(h=s)==null||h.disconnect(),s=null}function p(h,m){h===void 0&&(h=!1),m===void 0&&(m=1),d();const g=r.getBoundingClientRect(),{left:x,top:y,width:N,height:k}=g;if(h||l(),!N||!k)return;const S=li(y),w=li(i.clientWidth-(x+N)),M=li(i.clientHeight-(y+k)),j=li(x),D={rootMargin:-S+"px "+-w+"px "+-M+"px "+-j+"px",threshold:gw(0,hw(1,m))||1};let z=!0;function _(A){const L=A[0].intersectionRatio;if(L!==m){if(!z)return p();L?p(!1,L):o=setTimeout(()=>{p(!1,1e-7)},1e3)}L===1&&!nx(g,r.getBoundingClientRect())&&p(),z=!1}try{s=new IntersectionObserver(_,{...D,root:i.ownerDocument})}catch{s=new IntersectionObserver(_,D)}s.observe(r)}return p(!0),d}function Ew(r,l,s,o){o===void 0&&(o={});const{ancestorScroll:i=!0,ancestorResize:d=!0,elementResize:p=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:m=!1}=o,g=uf(r),x=i||d?[...g?Mi(g):[],...Mi(l)]:[];x.forEach(j=>{i&&j.addEventListener("scroll",s,{passive:!0}),d&&j.addEventListener("resize",s)});const y=g&&h?Ow(g,s):null;let N=-1,k=null;p&&(k=new ResizeObserver(j=>{let[O]=j;O&&O.target===g&&k&&(k.unobserve(l),cancelAnimationFrame(N),N=requestAnimationFrame(()=>{var D;(D=k)==null||D.observe(l)})),s()}),g&&!m&&k.observe(g),k.observe(l));let S,w=m?Vg(r):null;m&&M();function M(){const j=Vg(r);w&&!nx(w,j)&&s(),w=j,S=requestAnimationFrame(M)}return s(),()=>{var j;x.forEach(O=>{i&&O.removeEventListener("scroll",s),d&&O.removeEventListener("resize",s)}),y?.(),(j=k)==null||j.disconnect(),k=null,m&&cancelAnimationFrame(S)}}var Id=b.useLayoutEffect,Tw=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Oi=function(){};function _w(r,l){return l?l[0]==="-"?r+l:r+"__"+l:r}function Lw(r,l){for(var s=arguments.length,o=new Array(s>2?s-2:0),i=2;i<s;i++)o[i-2]=arguments[i];var d=[].concat(o);if(l&&r)for(var p in l)l.hasOwnProperty(p)&&l[p]&&d.push("".concat(_w(r,p)));return d.filter(function(h){return h}).map(function(h){return String(h).trim()}).join(" ")}var Ug=function(l){return Uw(l)?l.filter(Boolean):Vl(l)==="object"&&l!==null?[l]:[]},rx=function(l){l.className,l.clearValue,l.cx,l.getStyles,l.getClassNames,l.getValue,l.hasValue,l.isMulti,l.isRtl,l.options,l.selectOption,l.selectProps,l.setValue,l.theme;var s=Fr(l,Tw);return Ue({},s)},Qt=function(l,s,o){var i=l.cx,d=l.getStyles,p=l.getClassNames,h=l.className;return{css:d(s,l),className:i(o??{},p(s,l),h)}};function Vi(r){return[document.documentElement,document.body,window].indexOf(r)>-1}function Aw(r){return Vi(r)?window.innerHeight:r.clientHeight}function lx(r){return Vi(r)?window.pageYOffset:r.scrollTop}function Ei(r,l){if(Vi(r)){window.scrollTo(0,l);return}r.scrollTop=l}function Rw(r){var l=getComputedStyle(r),s=l.position==="absolute",o=/(auto|scroll)/;if(l.position==="fixed")return document.documentElement;for(var i=r;i=i.parentElement;)if(l=getComputedStyle(i),!(s&&l.position==="static")&&o.test(l.overflow+l.overflowY+l.overflowX))return i;return document.documentElement}function Dw(r,l,s,o){return s*((r=r/o-1)*r*r+1)+l}function ai(r,l){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Oi,i=lx(r),d=l-i,p=10,h=0;function m(){h+=p;var g=Dw(h,i,d,s);Ei(r,g),h<s?window.requestAnimationFrame(m):o(r)}m()}function Gg(r,l){var s=r.getBoundingClientRect(),o=l.getBoundingClientRect(),i=l.offsetHeight/3;o.bottom+i>s.bottom?Ei(r,Math.min(l.offsetTop+l.clientHeight-r.offsetHeight+i,r.scrollHeight)):o.top-i<s.top&&Ei(r,Math.max(l.offsetTop-i,0))}function zw(r){var l=r.getBoundingClientRect();return{bottom:l.bottom,height:l.height,left:l.left,right:l.right,top:l.top,width:l.width}}function qg(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Bw(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var ax=!1,Iw={get passive(){return ax=!0}},oi=typeof window<"u"?window:{};oi.addEventListener&&oi.removeEventListener&&(oi.addEventListener("p",Oi,Iw),oi.removeEventListener("p",Oi,!1));var Hw=ax;function Vw(r){return r!=null}function Uw(r){return Array.isArray(r)}function si(r,l,s){return r?l:s}var Gw=function(l){for(var s=arguments.length,o=new Array(s>1?s-1:0),i=1;i<s;i++)o[i-1]=arguments[i];var d=Object.entries(l).filter(function(p){var h=Ur(p,1),m=h[0];return!o.includes(m)});return d.reduce(function(p,h){var m=Ur(h,2),g=m[0],x=m[1];return p[g]=x,p},{})},qw=["children","innerProps"],Ww=["children","innerProps"];function Fw(r){var l=r.maxHeight,s=r.menuEl,o=r.minHeight,i=r.placement,d=r.shouldScroll,p=r.isFixedPosition,h=r.controlHeight,m=Rw(s),g={placement:"bottom",maxHeight:l};if(!s||!s.offsetParent)return g;var x=m.getBoundingClientRect(),y=x.height,N=s.getBoundingClientRect(),k=N.bottom,S=N.height,w=N.top,M=s.offsetParent.getBoundingClientRect(),j=M.top,O=p?window.innerHeight:Aw(m),D=lx(m),z=parseInt(getComputedStyle(s).marginBottom,10),_=parseInt(getComputedStyle(s).marginTop,10),A=j-_,L=O-w,B=A+D,G=y-D-w,U=k-O+D+z,W=D+w-_,ne=160;switch(i){case"auto":case"bottom":if(L>=S)return{placement:"bottom",maxHeight:l};if(G>=S&&!p)return d&&ai(m,U,ne),{placement:"bottom",maxHeight:l};if(!p&&G>=o||p&&L>=o){d&&ai(m,U,ne);var ve=p?L-z:G-z;return{placement:"bottom",maxHeight:ve}}if(i==="auto"||p){var ae=l,re=p?A:B;return re>=o&&(ae=Math.min(re-z-h,l)),{placement:"top",maxHeight:ae}}if(i==="bottom")return d&&Ei(m,U),{placement:"bottom",maxHeight:l};break;case"top":if(A>=S)return{placement:"top",maxHeight:l};if(B>=S&&!p)return d&&ai(m,W,ne),{placement:"top",maxHeight:l};if(!p&&B>=o||p&&A>=o){var R=l;return(!p&&B>=o||p&&A>=o)&&(R=p?A-_:B-_),d&&ai(m,W,ne),{placement:"top",maxHeight:R}}return{placement:"bottom",maxHeight:l};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return g}function $w(r){var l={bottom:"top",top:"bottom"};return r?l[r]:"bottom"}var ox=function(l){return l==="auto"?"bottom":l},Yw=function(l,s){var o,i=l.placement,d=l.theme,p=d.borderRadius,h=d.spacing,m=d.colors;return Ue((o={label:"menu"},jo(o,$w(i),"100%"),jo(o,"position","absolute"),jo(o,"width","100%"),jo(o,"zIndex",1),o),s?{}:{backgroundColor:m.neutral0,borderRadius:p,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:h.menuGutter,marginTop:h.menuGutter})},sx=b.createContext(null),Qw=function(l){var s=l.children,o=l.minMenuHeight,i=l.maxMenuHeight,d=l.menuPlacement,p=l.menuPosition,h=l.menuShouldScrollIntoView,m=l.theme,g=b.useContext(sx)||{},x=g.setPortalPlacement,y=b.useRef(null),N=b.useState(i),k=Ur(N,2),S=k[0],w=k[1],M=b.useState(null),j=Ur(M,2),O=j[0],D=j[1],z=m.spacing.controlHeight;return Id(function(){var _=y.current;if(_){var A=p==="fixed",L=h&&!A,B=Fw({maxHeight:i,menuEl:_,minHeight:o,placement:d,shouldScroll:L,isFixedPosition:A,controlHeight:z});w(B.maxHeight),D(B.placement),x?.(B.placement)}},[i,d,p,h,o,x,z]),s({ref:y,placerProps:Ue(Ue({},l),{},{placement:O||ox(d),maxHeight:S})})},Xw=function(l){var s=l.children,o=l.innerRef,i=l.innerProps;return Ve("div",We({},Qt(l,"menu",{menu:!0}),{ref:o},i),s)},Pw=Xw,Zw=function(l,s){var o=l.maxHeight,i=l.theme.spacing.baseUnit;return Ue({maxHeight:o,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},s?{}:{paddingBottom:i,paddingTop:i})},Kw=function(l){var s=l.children,o=l.innerProps,i=l.innerRef,d=l.isMulti;return Ve("div",We({},Qt(l,"menuList",{"menu-list":!0,"menu-list--is-multi":d}),{ref:i},o),s)},ix=function(l,s){var o=l.theme,i=o.spacing.baseUnit,d=o.colors;return Ue({textAlign:"center"},s?{}:{color:d.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},Jw=ix,eS=ix,tS=function(l){var s=l.children,o=s===void 0?"No options":s,i=l.innerProps,d=Fr(l,qw);return Ve("div",We({},Qt(Ue(Ue({},d),{},{children:o,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),o)},nS=function(l){var s=l.children,o=s===void 0?"Loading...":s,i=l.innerProps,d=Fr(l,Ww);return Ve("div",We({},Qt(Ue(Ue({},d),{},{children:o,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),o)},rS=function(l){var s=l.rect,o=l.offset,i=l.position;return{left:s.left,position:i,top:o,width:s.width,zIndex:1}},lS=function(l){var s=l.appendTo,o=l.children,i=l.controlElement,d=l.innerProps,p=l.menuPlacement,h=l.menuPosition,m=b.useRef(null),g=b.useRef(null),x=b.useState(ox(p)),y=Ur(x,2),N=y[0],k=y[1],S=b.useMemo(function(){return{setPortalPlacement:k}},[]),w=b.useState(null),M=Ur(w,2),j=M[0],O=M[1],D=b.useCallback(function(){if(i){var L=zw(i),B=h==="fixed"?0:window.pageYOffset,G=L[N]+B;(G!==j?.offset||L.left!==j?.rect.left||L.width!==j?.rect.width)&&O({offset:G,rect:L})}},[i,h,N,j?.offset,j?.rect.left,j?.rect.width]);Id(function(){D()},[D]);var z=b.useCallback(function(){typeof g.current=="function"&&(g.current(),g.current=null),i&&m.current&&(g.current=Ew(i,m.current,D,{elementResize:"ResizeObserver"in window}))},[i,D]);Id(function(){z()},[z]);var _=b.useCallback(function(L){m.current=L,z()},[z]);if(!s&&h!=="fixed"||!j)return null;var A=Ve("div",We({ref:_},Qt(Ue(Ue({},l),{},{offset:j.offset,position:h,rect:j.rect}),"menuPortal",{"menu-portal":!0}),d),o);return Ve(sx.Provider,{value:S},s?rr.createPortal(A,s):A)},aS=function(l){var s=l.isDisabled,o=l.isRtl;return{label:"container",direction:o?"rtl":void 0,pointerEvents:s?"none":void 0,position:"relative"}},oS=function(l){var s=l.children,o=l.innerProps,i=l.isDisabled,d=l.isRtl;return Ve("div",We({},Qt(l,"container",{"--is-disabled":i,"--is-rtl":d}),o),s)},sS=function(l,s){var o=l.theme.spacing,i=l.isMulti,d=l.hasValue,p=l.selectProps.controlShouldRenderValue;return Ue({alignItems:"center",display:i&&d&&p?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},s?{}:{padding:"".concat(o.baseUnit/2,"px ").concat(o.baseUnit*2,"px")})},iS=function(l){var s=l.children,o=l.innerProps,i=l.isMulti,d=l.hasValue;return Ve("div",We({},Qt(l,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":d}),o),s)},uS=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},cS=function(l){var s=l.children,o=l.innerProps;return Ve("div",We({},Qt(l,"indicatorsContainer",{indicators:!0}),o),s)},Wg,dS=["size"],fS=["innerProps","isRtl","size"],pS={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},ux=function(l){var s=l.size,o=Fr(l,dS);return Ve("svg",We({height:s,width:s,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:pS},o))},cf=function(l){return Ve(ux,We({size:20},l),Ve("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},cx=function(l){return Ve(ux,We({size:20},l),Ve("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},dx=function(l,s){var o=l.isFocused,i=l.theme,d=i.spacing.baseUnit,p=i.colors;return Ue({label:"indicatorContainer",display:"flex",transition:"color 150ms"},s?{}:{color:o?p.neutral60:p.neutral20,padding:d*2,":hover":{color:o?p.neutral80:p.neutral40}})},mS=dx,hS=function(l){var s=l.children,o=l.innerProps;return Ve("div",We({},Qt(l,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),o),s||Ve(cx,null))},gS=dx,xS=function(l){var s=l.children,o=l.innerProps;return Ve("div",We({},Qt(l,"clearIndicator",{indicator:!0,"clear-indicator":!0}),o),s||Ve(cf,null))},vS=function(l,s){var o=l.isDisabled,i=l.theme,d=i.spacing.baseUnit,p=i.colors;return Ue({label:"indicatorSeparator",alignSelf:"stretch",width:1},s?{}:{backgroundColor:o?p.neutral10:p.neutral20,marginBottom:d*2,marginTop:d*2})},yS=function(l){var s=l.innerProps;return Ve("span",We({},s,Qt(l,"indicatorSeparator",{"indicator-separator":!0})))},bS=pw(Wg||(Wg=mw([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),wS=function(l,s){var o=l.isFocused,i=l.size,d=l.theme,p=d.colors,h=d.spacing.baseUnit;return Ue({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},s?{}:{color:o?p.neutral60:p.neutral20,padding:h*2})},id=function(l){var s=l.delay,o=l.offset;return Ve("span",{css:af({animation:"".concat(bS," 1s ease-in-out ").concat(s,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:o?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},SS=function(l){var s=l.innerProps,o=l.isRtl,i=l.size,d=i===void 0?4:i,p=Fr(l,fS);return Ve("div",We({},Qt(Ue(Ue({},p),{},{innerProps:s,isRtl:o,size:d}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),s),Ve(id,{delay:0,offset:o}),Ve(id,{delay:160,offset:!0}),Ve(id,{delay:320,offset:!o}))},NS=function(l,s){var o=l.isDisabled,i=l.isFocused,d=l.theme,p=d.colors,h=d.borderRadius,m=d.spacing;return Ue({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:m.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},s?{}:{backgroundColor:o?p.neutral5:p.neutral0,borderColor:o?p.neutral10:i?p.primary:p.neutral20,borderRadius:h,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(p.primary):void 0,"&:hover":{borderColor:i?p.primary:p.neutral30}})},jS=function(l){var s=l.children,o=l.isDisabled,i=l.isFocused,d=l.innerRef,p=l.innerProps,h=l.menuIsOpen;return Ve("div",We({ref:d},Qt(l,"control",{control:!0,"control--is-disabled":o,"control--is-focused":i,"control--menu-is-open":h}),p,{"aria-disabled":o||void 0}),s)},CS=jS,kS=["data"],MS=function(l,s){var o=l.theme.spacing;return s?{}:{paddingBottom:o.baseUnit*2,paddingTop:o.baseUnit*2}},OS=function(l){var s=l.children,o=l.cx,i=l.getStyles,d=l.getClassNames,p=l.Heading,h=l.headingProps,m=l.innerProps,g=l.label,x=l.theme,y=l.selectProps;return Ve("div",We({},Qt(l,"group",{group:!0}),m),Ve(p,We({},h,{selectProps:y,theme:x,getStyles:i,getClassNames:d,cx:o}),g),Ve("div",null,s))},ES=function(l,s){var o=l.theme,i=o.colors,d=o.spacing;return Ue({label:"group",cursor:"default",display:"block"},s?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:d.baseUnit*3,paddingRight:d.baseUnit*3,textTransform:"uppercase"})},TS=function(l){var s=rx(l);s.data;var o=Fr(s,kS);return Ve("div",We({},Qt(l,"groupHeading",{"group-heading":!0}),o))},_S=OS,LS=["innerRef","isDisabled","isHidden","inputClassName"],AS=function(l,s){var o=l.isDisabled,i=l.value,d=l.theme,p=d.spacing,h=d.colors;return Ue(Ue({visibility:o?"hidden":"visible",transform:i?"translateZ(0)":""},RS),s?{}:{margin:p.baseUnit/2,paddingBottom:p.baseUnit/2,paddingTop:p.baseUnit/2,color:h.neutral80})},fx={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},RS={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ue({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},fx)},DS=function(l){return Ue({label:"input",color:"inherit",background:0,opacity:l?0:1,width:"100%"},fx)},zS=function(l){var s=l.cx,o=l.value,i=rx(l),d=i.innerRef,p=i.isDisabled,h=i.isHidden,m=i.inputClassName,g=Fr(i,LS);return Ve("div",We({},Qt(l,"input",{"input-container":!0}),{"data-value":o||""}),Ve("input",We({className:s({input:!0},m),ref:d,style:DS(h),disabled:p},g)))},BS=zS,IS=function(l,s){var o=l.theme,i=o.spacing,d=o.borderRadius,p=o.colors;return Ue({label:"multiValue",display:"flex",minWidth:0},s?{}:{backgroundColor:p.neutral10,borderRadius:d/2,margin:i.baseUnit/2})},HS=function(l,s){var o=l.theme,i=o.borderRadius,d=o.colors,p=l.cropWithEllipsis;return Ue({overflow:"hidden",textOverflow:p||p===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},s?{}:{borderRadius:i/2,color:d.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},VS=function(l,s){var o=l.theme,i=o.spacing,d=o.borderRadius,p=o.colors,h=l.isFocused;return Ue({alignItems:"center",display:"flex"},s?{}:{borderRadius:d/2,backgroundColor:h?p.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:p.dangerLight,color:p.danger}})},px=function(l){var s=l.children,o=l.innerProps;return Ve("div",o,s)},US=px,GS=px;function qS(r){var l=r.children,s=r.innerProps;return Ve("div",We({role:"button"},s),l||Ve(cf,{size:14}))}var WS=function(l){var s=l.children,o=l.components,i=l.data,d=l.innerProps,p=l.isDisabled,h=l.removeProps,m=l.selectProps,g=o.Container,x=o.Label,y=o.Remove;return Ve(g,{data:i,innerProps:Ue(Ue({},Qt(l,"multiValue",{"multi-value":!0,"multi-value--is-disabled":p})),d),selectProps:m},Ve(x,{data:i,innerProps:Ue({},Qt(l,"multiValueLabel",{"multi-value__label":!0})),selectProps:m},s),Ve(y,{data:i,innerProps:Ue(Ue({},Qt(l,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(s||"option")},h),selectProps:m}))},FS=WS,$S=function(l,s){var o=l.isDisabled,i=l.isFocused,d=l.isSelected,p=l.theme,h=p.spacing,m=p.colors;return Ue({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},s?{}:{backgroundColor:d?m.primary:i?m.primary25:"transparent",color:o?m.neutral20:d?m.neutral0:"inherit",padding:"".concat(h.baseUnit*2,"px ").concat(h.baseUnit*3,"px"),":active":{backgroundColor:o?void 0:d?m.primary:m.primary50}})},YS=function(l){var s=l.children,o=l.isDisabled,i=l.isFocused,d=l.isSelected,p=l.innerRef,h=l.innerProps;return Ve("div",We({},Qt(l,"option",{option:!0,"option--is-disabled":o,"option--is-focused":i,"option--is-selected":d}),{ref:p,"aria-disabled":o},h),s)},QS=YS,XS=function(l,s){var o=l.theme,i=o.spacing,d=o.colors;return Ue({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},s?{}:{color:d.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},PS=function(l){var s=l.children,o=l.innerProps;return Ve("div",We({},Qt(l,"placeholder",{placeholder:!0}),o),s)},ZS=PS,KS=function(l,s){var o=l.isDisabled,i=l.theme,d=i.spacing,p=i.colors;return Ue({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},s?{}:{color:o?p.neutral40:p.neutral80,marginLeft:d.baseUnit/2,marginRight:d.baseUnit/2})},JS=function(l){var s=l.children,o=l.isDisabled,i=l.innerProps;return Ve("div",We({},Qt(l,"singleValue",{"single-value":!0,"single-value--is-disabled":o}),i),s)},e3=JS,mx={ClearIndicator:xS,Control:CS,DropdownIndicator:hS,DownChevron:cx,CrossIcon:cf,Group:_S,GroupHeading:TS,IndicatorsContainer:cS,IndicatorSeparator:yS,Input:BS,LoadingIndicator:SS,Menu:Pw,MenuList:Kw,MenuPortal:lS,LoadingMessage:nS,NoOptionsMessage:tS,MultiValue:FS,MultiValueContainer:US,MultiValueLabel:GS,MultiValueRemove:qS,Option:QS,Placeholder:ZS,SelectContainer:oS,SingleValue:e3,ValueContainer:iS},t3=function(l){return Ue(Ue({},mx),l.components)},Fg=Number.isNaN||function(l){return typeof l=="number"&&l!==l};function n3(r,l){return!!(r===l||Fg(r)&&Fg(l))}function r3(r,l){if(r.length!==l.length)return!1;for(var s=0;s<r.length;s++)if(!n3(r[s],l[s]))return!1;return!0}function l3(r,l){l===void 0&&(l=r3);var s=null;function o(){for(var i=[],d=0;d<arguments.length;d++)i[d]=arguments[d];if(s&&s.lastThis===this&&l(i,s.lastArgs))return s.lastResult;var p=r.apply(this,i);return s={lastResult:p,lastArgs:i,lastThis:this},p}return o.clear=function(){s=null},o}var a3={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},o3=function(l){return Ve("span",We({css:a3},l))},$g=o3,s3={guidance:function(l){var s=l.isSearchable,o=l.isMulti,i=l.tabSelectsValue,d=l.context,p=l.isInitialFocus;switch(d){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return p?"".concat(l["aria-label"]||"Select"," is focused ").concat(s?",type to refine list":"",", press Down to open the menu, ").concat(o?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(l){var s=l.action,o=l.label,i=o===void 0?"":o,d=l.labels,p=l.isDisabled;switch(s){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(d.length>1?"s":""," ").concat(d.join(","),", selected.");case"select-option":return p?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(l){var s=l.context,o=l.focused,i=l.options,d=l.label,p=d===void 0?"":d,h=l.selectValue,m=l.isDisabled,g=l.isSelected,x=l.isAppleDevice,y=function(w,M){return w&&w.length?"".concat(w.indexOf(M)+1," of ").concat(w.length):""};if(s==="value"&&h)return"value ".concat(p," focused, ").concat(y(h,o),".");if(s==="menu"&&x){var N=m?" disabled":"",k="".concat(g?" selected":"").concat(N);return"".concat(p).concat(k,", ").concat(y(i,o),".")}return""},onFilter:function(l){var s=l.inputValue,o=l.resultsMessage;return"".concat(o).concat(s?" for search term "+s:"",".")}},i3=function(l){var s=l.ariaSelection,o=l.focusedOption,i=l.focusedValue,d=l.focusableOptions,p=l.isFocused,h=l.selectValue,m=l.selectProps,g=l.id,x=l.isAppleDevice,y=m.ariaLiveMessages,N=m.getOptionLabel,k=m.inputValue,S=m.isMulti,w=m.isOptionDisabled,M=m.isSearchable,j=m.menuIsOpen,O=m.options,D=m.screenReaderStatus,z=m.tabSelectsValue,_=m.isLoading,A=m["aria-label"],L=m["aria-live"],B=b.useMemo(function(){return Ue(Ue({},s3),y||{})},[y]),G=b.useMemo(function(){var re="";if(s&&B.onChange){var R=s.option,F=s.options,pe=s.removedValue,xe=s.removedValues,he=s.value,T=function(le){return Array.isArray(le)?null:le},I=pe||R||T(he),E=I?N(I):"",$=F||xe||void 0,Q=$?$.map(N):[],fe=Ue({isDisabled:I&&w(I,h),label:E,labels:Q},s);re=B.onChange(fe)}return re},[s,B,w,h,N]),U=b.useMemo(function(){var re="",R=o||i,F=!!(o&&h&&h.includes(o));if(R&&B.onFocus){var pe={focused:R,label:N(R),isDisabled:w(R,h),isSelected:F,options:d,context:R===o?"menu":"value",selectValue:h,isAppleDevice:x};re=B.onFocus(pe)}return re},[o,i,N,w,B,d,h,x]),W=b.useMemo(function(){var re="";if(j&&O.length&&!_&&B.onFilter){var R=D({count:d.length});re=B.onFilter({inputValue:k,resultsMessage:R})}return re},[d,k,j,B,O,D,_]),ne=s?.action==="initial-input-focus",ve=b.useMemo(function(){var re="";if(B.guidance){var R=i?"value":j?"menu":"input";re=B.guidance({"aria-label":A,context:R,isDisabled:o&&w(o,h),isMulti:S,isSearchable:M,tabSelectsValue:z,isInitialFocus:ne})}return re},[A,o,i,S,w,M,j,B,h,z,ne]),ae=Ve(b.Fragment,null,Ve("span",{id:"aria-selection"},G),Ve("span",{id:"aria-focused"},U),Ve("span",{id:"aria-results"},W),Ve("span",{id:"aria-guidance"},ve));return Ve(b.Fragment,null,Ve($g,{id:g},ne&&ae),Ve($g,{"aria-live":L,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},p&&!ne&&ae))},u3=i3,Hd=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],c3=new RegExp("["+Hd.map(function(r){return r.letters}).join("")+"]","g"),hx={};for(var ud=0;ud<Hd.length;ud++)for(var cd=Hd[ud],dd=0;dd<cd.letters.length;dd++)hx[cd.letters[dd]]=cd.base;var gx=function(l){return l.replace(c3,function(s){return hx[s]})},d3=l3(gx),Yg=function(l){return l.replace(/^\s+|\s+$/g,"")},f3=function(l){return"".concat(l.label," ").concat(l.value)},Vd=function(l){return function(s,o){if(s.data.__isNew__)return!0;var i=Ue({ignoreCase:!0,ignoreAccents:!0,stringify:f3,trim:!0,matchFrom:"any"},l),d=i.ignoreCase,p=i.ignoreAccents,h=i.stringify,m=i.trim,g=i.matchFrom,x=m?Yg(o):o,y=m?Yg(h(s)):h(s);return d&&(x=x.toLowerCase(),y=y.toLowerCase()),p&&(x=d3(x),y=gx(y)),g==="start"?y.substr(0,x.length)===x:y.indexOf(x)>-1}},p3=["innerRef"];function m3(r){var l=r.innerRef,s=Fr(r,p3),o=Gw(s,"onExited","in","enter","exit","appear");return Ve("input",We({ref:l},o,{css:af({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var h3=function(l){l.cancelable&&l.preventDefault(),l.stopPropagation()};function g3(r){var l=r.isEnabled,s=r.onBottomArrive,o=r.onBottomLeave,i=r.onTopArrive,d=r.onTopLeave,p=b.useRef(!1),h=b.useRef(!1),m=b.useRef(0),g=b.useRef(null),x=b.useCallback(function(M,j){if(g.current!==null){var O=g.current,D=O.scrollTop,z=O.scrollHeight,_=O.clientHeight,A=g.current,L=j>0,B=z-_-D,G=!1;B>j&&p.current&&(o&&o(M),p.current=!1),L&&h.current&&(d&&d(M),h.current=!1),L&&j>B?(s&&!p.current&&s(M),A.scrollTop=z,G=!0,p.current=!0):!L&&-j>D&&(i&&!h.current&&i(M),A.scrollTop=0,G=!0,h.current=!0),G&&h3(M)}},[s,o,i,d]),y=b.useCallback(function(M){x(M,M.deltaY)},[x]),N=b.useCallback(function(M){m.current=M.changedTouches[0].clientY},[]),k=b.useCallback(function(M){var j=m.current-M.changedTouches[0].clientY;x(M,j)},[x]),S=b.useCallback(function(M){if(M){var j=Hw?{passive:!1}:!1;M.addEventListener("wheel",y,j),M.addEventListener("touchstart",N,j),M.addEventListener("touchmove",k,j)}},[k,N,y]),w=b.useCallback(function(M){M&&(M.removeEventListener("wheel",y,!1),M.removeEventListener("touchstart",N,!1),M.removeEventListener("touchmove",k,!1))},[k,N,y]);return b.useEffect(function(){if(l){var M=g.current;return S(M),function(){w(M)}}},[l,S,w]),function(M){g.current=M}}var Qg=["boxSizing","height","overflow","paddingRight","position"],Xg={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Pg(r){r.cancelable&&r.preventDefault()}function Zg(r){r.stopPropagation()}function Kg(){var r=this.scrollTop,l=this.scrollHeight,s=r+this.offsetHeight;r===0?this.scrollTop=1:s===l&&(this.scrollTop=r-1)}function Jg(){return"ontouchstart"in window||navigator.maxTouchPoints}var e0=!!(typeof window<"u"&&window.document&&window.document.createElement),No=0,ba={capture:!1,passive:!1};function x3(r){var l=r.isEnabled,s=r.accountForScrollbars,o=s===void 0?!0:s,i=b.useRef({}),d=b.useRef(null),p=b.useCallback(function(m){if(e0){var g=document.body,x=g&&g.style;if(o&&Qg.forEach(function(S){var w=x&&x[S];i.current[S]=w}),o&&No<1){var y=parseInt(i.current.paddingRight,10)||0,N=document.body?document.body.clientWidth:0,k=window.innerWidth-N+y||0;Object.keys(Xg).forEach(function(S){var w=Xg[S];x&&(x[S]=w)}),x&&(x.paddingRight="".concat(k,"px"))}g&&Jg()&&(g.addEventListener("touchmove",Pg,ba),m&&(m.addEventListener("touchstart",Kg,ba),m.addEventListener("touchmove",Zg,ba))),No+=1}},[o]),h=b.useCallback(function(m){if(e0){var g=document.body,x=g&&g.style;No=Math.max(No-1,0),o&&No<1&&Qg.forEach(function(y){var N=i.current[y];x&&(x[y]=N)}),g&&Jg()&&(g.removeEventListener("touchmove",Pg,ba),m&&(m.removeEventListener("touchstart",Kg,ba),m.removeEventListener("touchmove",Zg,ba)))}},[o]);return b.useEffect(function(){if(l){var m=d.current;return p(m),function(){h(m)}}},[l,p,h]),function(m){d.current=m}}var v3=function(l){var s=l.target;return s.ownerDocument.activeElement&&s.ownerDocument.activeElement.blur()},y3={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function b3(r){var l=r.children,s=r.lockEnabled,o=r.captureEnabled,i=o===void 0?!0:o,d=r.onBottomArrive,p=r.onBottomLeave,h=r.onTopArrive,m=r.onTopLeave,g=g3({isEnabled:i,onBottomArrive:d,onBottomLeave:p,onTopArrive:h,onTopLeave:m}),x=x3({isEnabled:s}),y=function(k){g(k),x(k)};return Ve(b.Fragment,null,s&&Ve("div",{onClick:v3,css:y3}),l(y))}var w3={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},S3=function(l){var s=l.name,o=l.onFocus;return Ve("input",{required:!0,name:s,tabIndex:-1,"aria-hidden":"true",onFocus:o,css:w3,value:"",onChange:function(){}})},N3=S3;function df(r){var l;return typeof window<"u"&&window.navigator!=null?r.test(((l=window.navigator.userAgentData)===null||l===void 0?void 0:l.platform)||window.navigator.platform):!1}function j3(){return df(/^iPhone/i)}function xx(){return df(/^Mac/i)}function C3(){return df(/^iPad/i)||xx()&&navigator.maxTouchPoints>1}function k3(){return j3()||C3()}function M3(){return xx()||k3()}var O3=function(l){return l.label},E3=function(l){return l.label},T3=function(l){return l.value},_3=function(l){return!!l.isDisabled},L3={clearIndicator:gS,container:aS,control:NS,dropdownIndicator:mS,group:MS,groupHeading:ES,indicatorsContainer:uS,indicatorSeparator:vS,input:AS,loadingIndicator:wS,loadingMessage:eS,menu:Yw,menuList:Zw,menuPortal:rS,multiValue:IS,multiValueLabel:HS,multiValueRemove:VS,noOptionsMessage:Jw,option:$S,placeholder:XS,singleValue:KS,valueContainer:sS},A3={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},R3=4,vx=4,D3=38,z3=vx*2,B3={baseUnit:vx,controlHeight:D3,menuGutter:z3},fd={borderRadius:R3,colors:A3,spacing:B3},I3={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:qg(),captureMenuScroll:!qg(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Vd(),formatGroupLabel:O3,getOptionLabel:E3,getOptionValue:T3,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:_3,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Bw(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(l){var s=l.count;return"".concat(s," result").concat(s!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function t0(r,l,s,o){var i=wx(r,l,s),d=Sx(r,l,s),p=bx(r,l),h=Ti(r,l);return{type:"option",data:l,isDisabled:i,isSelected:d,label:p,value:h,index:o}}function pi(r,l){return r.options.map(function(s,o){if("options"in s){var i=s.options.map(function(p,h){return t0(r,p,l,h)}).filter(function(p){return r0(r,p)});return i.length>0?{type:"group",data:s,options:i,index:o}:void 0}var d=t0(r,s,l,o);return r0(r,d)?d:void 0}).filter(Vw)}function yx(r){return r.reduce(function(l,s){return s.type==="group"?l.push.apply(l,ef(s.options.map(function(o){return o.data}))):l.push(s.data),l},[])}function n0(r,l){return r.reduce(function(s,o){return o.type==="group"?s.push.apply(s,ef(o.options.map(function(i){return{data:i.data,id:"".concat(l,"-").concat(o.index,"-").concat(i.index)}}))):s.push({data:o.data,id:"".concat(l,"-").concat(o.index)}),s},[])}function H3(r,l){return yx(pi(r,l))}function r0(r,l){var s=r.inputValue,o=s===void 0?"":s,i=l.data,d=l.isSelected,p=l.label,h=l.value;return(!jx(r)||!d)&&Nx(r,{label:p,value:h,data:i},o)}function V3(r,l){var s=r.focusedValue,o=r.selectValue,i=o.indexOf(s);if(i>-1){var d=l.indexOf(s);if(d>-1)return s;if(i<l.length)return l[i]}return null}function U3(r,l){var s=r.focusedOption;return s&&l.indexOf(s)>-1?s:l[0]}var pd=function(l,s){var o,i=(o=l.find(function(d){return d.data===s}))===null||o===void 0?void 0:o.id;return i||null},bx=function(l,s){return l.getOptionLabel(s)},Ti=function(l,s){return l.getOptionValue(s)};function wx(r,l,s){return typeof r.isOptionDisabled=="function"?r.isOptionDisabled(l,s):!1}function Sx(r,l,s){if(s.indexOf(l)>-1)return!0;if(typeof r.isOptionSelected=="function")return r.isOptionSelected(l,s);var o=Ti(r,l);return s.some(function(i){return Ti(r,i)===o})}function Nx(r,l,s){return r.filterOption?r.filterOption(l,s):!0}var jx=function(l){var s=l.hideSelectedOptions,o=l.isMulti;return s===void 0?o:s},G3=1,Cx=(function(r){c2(s,r);var l=p2(s);function s(o){var i;if(i2(this,s),i=l.call(this,o),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(m){i.controlRef=m},i.focusedOptionRef=null,i.getFocusedOptionRef=function(m){i.focusedOptionRef=m},i.menuListRef=null,i.getMenuListRef=function(m){i.menuListRef=m},i.inputRef=null,i.getInputRef=function(m){i.inputRef=m},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(m,g){var x=i.props,y=x.onChange,N=x.name;g.name=N,i.ariaOnChange(m,g),y(m,g)},i.setValue=function(m,g,x){var y=i.props,N=y.closeMenuOnSelect,k=y.isMulti,S=y.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:S}),N&&(i.setState({inputIsHiddenAfterUpdate:!k}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(m,{action:g,option:x})},i.selectOption=function(m){var g=i.props,x=g.blurInputOnSelect,y=g.isMulti,N=g.name,k=i.state.selectValue,S=y&&i.isOptionSelected(m,k),w=i.isOptionDisabled(m,k);if(S){var M=i.getOptionValue(m);i.setValue(k.filter(function(j){return i.getOptionValue(j)!==M}),"deselect-option",m)}else if(!w)y?i.setValue([].concat(ef(k),[m]),"select-option",m):i.setValue(m,"select-option");else{i.ariaOnChange(m,{action:"select-option",option:m,name:N});return}x&&i.blurInput()},i.removeValue=function(m){var g=i.props.isMulti,x=i.state.selectValue,y=i.getOptionValue(m),N=x.filter(function(S){return i.getOptionValue(S)!==y}),k=si(g,N,N[0]||null);i.onChange(k,{action:"remove-value",removedValue:m}),i.focusInput()},i.clearValue=function(){var m=i.state.selectValue;i.onChange(si(i.props.isMulti,[],null),{action:"clear",removedValues:m})},i.popValue=function(){var m=i.props.isMulti,g=i.state.selectValue,x=g[g.length-1],y=g.slice(0,g.length-1),N=si(m,y,y[0]||null);x&&i.onChange(N,{action:"pop-value",removedValue:x})},i.getFocusedOptionId=function(m){return pd(i.state.focusableOptionsWithIds,m)},i.getFocusableOptionsWithIds=function(){return n0(pi(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];return Lw.apply(void 0,[i.props.classNamePrefix].concat(g))},i.getOptionLabel=function(m){return bx(i.props,m)},i.getOptionValue=function(m){return Ti(i.props,m)},i.getStyles=function(m,g){var x=i.props.unstyled,y=L3[m](g,x);y.boxSizing="border-box";var N=i.props.styles[m];return N?N(y,g):y},i.getClassNames=function(m,g){var x,y;return(x=(y=i.props.classNames)[m])===null||x===void 0?void 0:x.call(y,g)},i.getElementId=function(m){return"".concat(i.state.instancePrefix,"-").concat(m)},i.getComponents=function(){return t3(i.props)},i.buildCategorizedOptions=function(){return pi(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return yx(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(m,g){i.setState({ariaSelection:Ue({value:m},g)})},i.onMenuMouseDown=function(m){m.button===0&&(m.stopPropagation(),m.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(m){i.blockOptionHover=!1},i.onControlMouseDown=function(m){if(!m.defaultPrevented){var g=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&i.onMenuClose():g&&i.openMenu("first"):(g&&(i.openAfterFocus=!0),i.focusInput()),m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&m.preventDefault()}},i.onDropdownIndicatorMouseDown=function(m){if(!(m&&m.type==="mousedown"&&m.button!==0)&&!i.props.isDisabled){var g=i.props,x=g.isMulti,y=g.menuIsOpen;i.focusInput(),y?(i.setState({inputIsHiddenAfterUpdate:!x}),i.onMenuClose()):i.openMenu("first"),m.preventDefault()}},i.onClearIndicatorMouseDown=function(m){m&&m.type==="mousedown"&&m.button!==0||(i.clearValue(),m.preventDefault(),i.openAfterFocus=!1,m.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(m){typeof i.props.closeMenuOnScroll=="boolean"?m.target instanceof HTMLElement&&Vi(m.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(m)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(m){var g=m.touches,x=g&&g.item(0);x&&(i.initialTouchX=x.clientX,i.initialTouchY=x.clientY,i.userIsDragging=!1)},i.onTouchMove=function(m){var g=m.touches,x=g&&g.item(0);if(x){var y=Math.abs(x.clientX-i.initialTouchX),N=Math.abs(x.clientY-i.initialTouchY),k=5;i.userIsDragging=y>k||N>k}},i.onTouchEnd=function(m){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(m.target)&&i.menuListRef&&!i.menuListRef.contains(m.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(m){i.userIsDragging||i.onControlMouseDown(m)},i.onClearIndicatorTouchEnd=function(m){i.userIsDragging||i.onClearIndicatorMouseDown(m)},i.onDropdownIndicatorTouchEnd=function(m){i.userIsDragging||i.onDropdownIndicatorMouseDown(m)},i.handleInputChange=function(m){var g=i.props.inputValue,x=m.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(x,{action:"input-change",prevInputValue:g}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(m){i.props.onFocus&&i.props.onFocus(m),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(m){var g=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(m),i.onInputChange("",{action:"input-blur",prevInputValue:g}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(m){if(!(i.blockOptionHover||i.state.focusedOption===m)){var g=i.getFocusableOptions(),x=g.indexOf(m);i.setState({focusedOption:m,focusedOptionId:x>-1?i.getFocusedOptionId(m):null})}},i.shouldHideSelectedOptions=function(){return jx(i.props)},i.onValueInputFocus=function(m){m.preventDefault(),m.stopPropagation(),i.focus()},i.onKeyDown=function(m){var g=i.props,x=g.isMulti,y=g.backspaceRemovesValue,N=g.escapeClearsValue,k=g.inputValue,S=g.isClearable,w=g.isDisabled,M=g.menuIsOpen,j=g.onKeyDown,O=g.tabSelectsValue,D=g.openMenuOnFocus,z=i.state,_=z.focusedOption,A=z.focusedValue,L=z.selectValue;if(!w&&!(typeof j=="function"&&(j(m),m.defaultPrevented))){switch(i.blockOptionHover=!0,m.key){case"ArrowLeft":if(!x||k)return;i.focusValue("previous");break;case"ArrowRight":if(!x||k)return;i.focusValue("next");break;case"Delete":case"Backspace":if(k)return;if(A)i.removeValue(A);else{if(!y)return;x?i.popValue():S&&i.clearValue()}break;case"Tab":if(i.isComposing||m.shiftKey||!M||!O||!_||D&&i.isOptionSelected(_,L))return;i.selectOption(_);break;case"Enter":if(m.keyCode===229)break;if(M){if(!_||i.isComposing)return;i.selectOption(_);break}return;case"Escape":M?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:k}),i.onMenuClose()):S&&N&&i.clearValue();break;case" ":if(k)return;if(!M){i.openMenu("first");break}if(!_)return;i.selectOption(_);break;case"ArrowUp":M?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":M?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!M)return;i.focusOption("pageup");break;case"PageDown":if(!M)return;i.focusOption("pagedown");break;case"Home":if(!M)return;i.focusOption("first");break;case"End":if(!M)return;i.focusOption("last");break;default:return}m.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++G3),i.state.selectValue=Ug(o.value),o.menuIsOpen&&i.state.selectValue.length){var d=i.getFocusableOptionsWithIds(),p=i.buildFocusableOptions(),h=p.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=d,i.state.focusedOption=p[h],i.state.focusedOptionId=pd(d,p[h])}return i}return u2(s,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Gg(this.menuListRef,this.focusedOptionRef),M3()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var d=this.props,p=d.isDisabled,h=d.menuIsOpen,m=this.state.isFocused;(m&&!p&&i.isDisabled||m&&h&&!i.menuIsOpen)&&this.focusInput(),m&&p&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!m&&!p&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Gg(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,d){this.props.onInputChange(i,d)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var d=this,p=this.state,h=p.selectValue,m=p.isFocused,g=this.buildFocusableOptions(),x=i==="first"?0:g.length-1;if(!this.props.isMulti){var y=g.indexOf(h[0]);y>-1&&(x=y)}this.scrollToFocusedOptionOnUpdate=!(m&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:g[x],focusedOptionId:this.getFocusedOptionId(g[x])},function(){return d.onMenuOpen()})}},{key:"focusValue",value:function(i){var d=this.state,p=d.selectValue,h=d.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var m=p.indexOf(h);h||(m=-1);var g=p.length-1,x=-1;if(p.length){switch(i){case"previous":m===0?x=0:m===-1?x=g:x=m-1;break;case"next":m>-1&&m<g&&(x=m+1);break}this.setState({inputIsHidden:x!==-1,focusedValue:p[x]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",d=this.props.pageSize,p=this.state.focusedOption,h=this.getFocusableOptions();if(h.length){var m=0,g=h.indexOf(p);p||(g=-1),i==="up"?m=g>0?g-1:h.length-1:i==="down"?m=(g+1)%h.length:i==="pageup"?(m=g-d,m<0&&(m=0)):i==="pagedown"?(m=g+d,m>h.length-1&&(m=h.length-1)):i==="last"&&(m=h.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:h[m],focusedValue:null,focusedOptionId:this.getFocusedOptionId(h[m])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(fd):Ue(Ue({},fd),this.props.theme):fd})},{key:"getCommonProps",value:function(){var i=this.clearValue,d=this.cx,p=this.getStyles,h=this.getClassNames,m=this.getValue,g=this.selectOption,x=this.setValue,y=this.props,N=y.isMulti,k=y.isRtl,S=y.options,w=this.hasValue();return{clearValue:i,cx:d,getStyles:p,getClassNames:h,getValue:m,hasValue:w,isMulti:N,isRtl:k,options:S,selectOption:g,selectProps:y,setValue:x,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,d=i.isClearable,p=i.isMulti;return d===void 0?p:d}},{key:"isOptionDisabled",value:function(i,d){return wx(this.props,i,d)}},{key:"isOptionSelected",value:function(i,d){return Sx(this.props,i,d)}},{key:"filterOption",value:function(i,d){return Nx(this.props,i,d)}},{key:"formatOptionLabel",value:function(i,d){if(typeof this.props.formatOptionLabel=="function"){var p=this.props.inputValue,h=this.state.selectValue;return this.props.formatOptionLabel(i,{context:d,inputValue:p,selectValue:h})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var i=this.props,d=i.isDisabled,p=i.isSearchable,h=i.inputId,m=i.inputValue,g=i.tabIndex,x=i.form,y=i.menuIsOpen,N=i.required,k=this.getComponents(),S=k.Input,w=this.state,M=w.inputIsHidden,j=w.ariaSelection,O=this.commonProps,D=h||this.getElementId("input"),z=Ue(Ue(Ue({"aria-autocomplete":"list","aria-expanded":y,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":N,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},y&&{"aria-controls":this.getElementId("listbox")}),!p&&{"aria-readonly":!0}),this.hasValue()?j?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return p?b.createElement(S,We({},O,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:D,innerRef:this.getInputRef,isDisabled:d,isHidden:M,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:g,form:x,type:"text",value:m},z)):b.createElement(m3,We({id:D,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Oi,onFocus:this.onInputFocus,disabled:d,tabIndex:g,inputMode:"none",form:x,value:""},z))})},{key:"renderPlaceholderOrValue",value:function(){var i=this,d=this.getComponents(),p=d.MultiValue,h=d.MultiValueContainer,m=d.MultiValueLabel,g=d.MultiValueRemove,x=d.SingleValue,y=d.Placeholder,N=this.commonProps,k=this.props,S=k.controlShouldRenderValue,w=k.isDisabled,M=k.isMulti,j=k.inputValue,O=k.placeholder,D=this.state,z=D.selectValue,_=D.focusedValue,A=D.isFocused;if(!this.hasValue()||!S)return j?null:b.createElement(y,We({},N,{key:"placeholder",isDisabled:w,isFocused:A,innerProps:{id:this.getElementId("placeholder")}}),O);if(M)return z.map(function(B,G){var U=B===_,W="".concat(i.getOptionLabel(B),"-").concat(i.getOptionValue(B));return b.createElement(p,We({},N,{components:{Container:h,Label:m,Remove:g},isFocused:U,isDisabled:w,key:W,index:G,removeProps:{onClick:function(){return i.removeValue(B)},onTouchEnd:function(){return i.removeValue(B)},onMouseDown:function(ve){ve.preventDefault()}},data:B}),i.formatOptionLabel(B,"value"))});if(j)return null;var L=z[0];return b.createElement(x,We({},N,{data:L,isDisabled:w}),this.formatOptionLabel(L,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),d=i.ClearIndicator,p=this.commonProps,h=this.props,m=h.isDisabled,g=h.isLoading,x=this.state.isFocused;if(!this.isClearable()||!d||m||!this.hasValue()||g)return null;var y={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(d,We({},p,{innerProps:y,isFocused:x}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),d=i.LoadingIndicator,p=this.commonProps,h=this.props,m=h.isDisabled,g=h.isLoading,x=this.state.isFocused;if(!d||!g)return null;var y={"aria-hidden":"true"};return b.createElement(d,We({},p,{innerProps:y,isDisabled:m,isFocused:x}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),d=i.DropdownIndicator,p=i.IndicatorSeparator;if(!d||!p)return null;var h=this.commonProps,m=this.props.isDisabled,g=this.state.isFocused;return b.createElement(p,We({},h,{isDisabled:m,isFocused:g}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),d=i.DropdownIndicator;if(!d)return null;var p=this.commonProps,h=this.props.isDisabled,m=this.state.isFocused,g={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(d,We({},p,{innerProps:g,isDisabled:h,isFocused:m}))}},{key:"renderMenu",value:function(){var i=this,d=this.getComponents(),p=d.Group,h=d.GroupHeading,m=d.Menu,g=d.MenuList,x=d.MenuPortal,y=d.LoadingMessage,N=d.NoOptionsMessage,k=d.Option,S=this.commonProps,w=this.state.focusedOption,M=this.props,j=M.captureMenuScroll,O=M.inputValue,D=M.isLoading,z=M.loadingMessage,_=M.minMenuHeight,A=M.maxMenuHeight,L=M.menuIsOpen,B=M.menuPlacement,G=M.menuPosition,U=M.menuPortalTarget,W=M.menuShouldBlockScroll,ne=M.menuShouldScrollIntoView,ve=M.noOptionsMessage,ae=M.onMenuScrollToTop,re=M.onMenuScrollToBottom;if(!L)return null;var R=function(E,$){var Q=E.type,fe=E.data,te=E.isDisabled,le=E.isSelected,be=E.label,Oe=E.value,qe=w===fe,ee=te?void 0:function(){return i.onOptionHover(fe)},Te=te?void 0:function(){return i.selectOption(fe)},Ne="".concat(i.getElementId("option"),"-").concat($),_e={id:Ne,onClick:Te,onMouseMove:ee,onMouseOver:ee,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:le};return b.createElement(k,We({},S,{innerProps:_e,data:fe,isDisabled:te,isSelected:le,key:Ne,label:be,type:Q,value:Oe,isFocused:qe,innerRef:qe?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(E.data,"menu"))},F;if(this.hasOptions())F=this.getCategorizedOptions().map(function(I){if(I.type==="group"){var E=I.data,$=I.options,Q=I.index,fe="".concat(i.getElementId("group"),"-").concat(Q),te="".concat(fe,"-heading");return b.createElement(p,We({},S,{key:fe,data:E,options:$,Heading:h,headingProps:{id:te,data:I.data},label:i.formatGroupLabel(I.data)}),I.options.map(function(le){return R(le,"".concat(Q,"-").concat(le.index))}))}else if(I.type==="option")return R(I,"".concat(I.index))});else if(D){var pe=z({inputValue:O});if(pe===null)return null;F=b.createElement(y,S,pe)}else{var xe=ve({inputValue:O});if(xe===null)return null;F=b.createElement(N,S,xe)}var he={minMenuHeight:_,maxMenuHeight:A,menuPlacement:B,menuPosition:G,menuShouldScrollIntoView:ne},T=b.createElement(Qw,We({},S,he),function(I){var E=I.ref,$=I.placerProps,Q=$.placement,fe=$.maxHeight;return b.createElement(m,We({},S,he,{innerRef:E,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:D,placement:Q}),b.createElement(b3,{captureEnabled:j,onTopArrive:ae,onBottomArrive:re,lockEnabled:W},function(te){return b.createElement(g,We({},S,{innerRef:function(be){i.getMenuListRef(be),te(be)},innerProps:{role:"listbox","aria-multiselectable":S.isMulti,id:i.getElementId("listbox")},isLoading:D,maxHeight:fe,focusedOption:w}),F)}))});return U||G==="fixed"?b.createElement(x,We({},S,{appendTo:U,controlElement:this.controlRef,menuPlacement:B,menuPosition:G}),T):T}},{key:"renderFormField",value:function(){var i=this,d=this.props,p=d.delimiter,h=d.isDisabled,m=d.isMulti,g=d.name,x=d.required,y=this.state.selectValue;if(x&&!this.hasValue()&&!h)return b.createElement(N3,{name:g,onFocus:this.onValueInputFocus});if(!(!g||h))if(m)if(p){var N=y.map(function(w){return i.getOptionValue(w)}).join(p);return b.createElement("input",{name:g,type:"hidden",value:N})}else{var k=y.length>0?y.map(function(w,M){return b.createElement("input",{key:"i-".concat(M),name:g,type:"hidden",value:i.getOptionValue(w)})}):b.createElement("input",{name:g,type:"hidden",value:""});return b.createElement("div",null,k)}else{var S=y[0]?this.getOptionValue(y[0]):"";return b.createElement("input",{name:g,type:"hidden",value:S})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,d=this.state,p=d.ariaSelection,h=d.focusedOption,m=d.focusedValue,g=d.isFocused,x=d.selectValue,y=this.getFocusableOptions();return b.createElement(u3,We({},i,{id:this.getElementId("live-region"),ariaSelection:p,focusedOption:h,focusedValue:m,isFocused:g,selectValue:x,focusableOptions:y,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),d=i.Control,p=i.IndicatorsContainer,h=i.SelectContainer,m=i.ValueContainer,g=this.props,x=g.className,y=g.id,N=g.isDisabled,k=g.menuIsOpen,S=this.state.isFocused,w=this.commonProps=this.getCommonProps();return b.createElement(h,We({},w,{className:x,innerProps:{id:y,onKeyDown:this.onKeyDown},isDisabled:N,isFocused:S}),this.renderLiveRegion(),b.createElement(d,We({},w,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:N,isFocused:S,menuIsOpen:k}),b.createElement(m,We({},w,{isDisabled:N}),this.renderPlaceholderOrValue(),this.renderInput()),b.createElement(p,We({},w,{isDisabled:N}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,d){var p=d.prevProps,h=d.clearFocusValueOnUpdate,m=d.inputIsHiddenAfterUpdate,g=d.ariaSelection,x=d.isFocused,y=d.prevWasFocused,N=d.instancePrefix,k=i.options,S=i.value,w=i.menuIsOpen,M=i.inputValue,j=i.isMulti,O=Ug(S),D={};if(p&&(S!==p.value||k!==p.options||w!==p.menuIsOpen||M!==p.inputValue)){var z=w?H3(i,O):[],_=w?n0(pi(i,O),"".concat(N,"-option")):[],A=h?V3(d,O):null,L=U3(d,z),B=pd(_,L);D={selectValue:O,focusedOption:L,focusedOptionId:B,focusableOptionsWithIds:_,focusedValue:A,clearFocusValueOnUpdate:!1}}var G=m!=null&&i!==p?{inputIsHidden:m,inputIsHiddenAfterUpdate:void 0}:{},U=g,W=x&&y;return x&&!W&&(U={value:si(j,O,O[0]||null),options:O,action:"initial-input-focus"},W=!y),g?.action==="initial-input-focus"&&(U=null),Ue(Ue(Ue({},D),G),{},{prevProps:i,ariaSelection:U,prevWasFocused:W})}}]),s})(b.Component);Cx.defaultProps=I3;var q3=b.forwardRef(function(r,l){var s=s2(r);return b.createElement(Cx,We({ref:l},s))}),l0=q3;function md({containerClass:r,name:l,value:s,options:o,onChange:i,disabled:d=!1,hideLabel:p=!1,hasPin:h,isPinned:m=!1,onTogglePin:g,hasError:x=!1,forceModalOpen:y=!1,onModalClose:N}){const S=Si(ye=>ye.theme)==="dark",[w,M]=b.useState(!1),j=b.useRef(null),O=b.useRef(null),[D,z]=b.useState([]),[_,A]=b.useState(!1),L=y||w,B=z0(),G=ye=>{if(!Array.isArray(o))return o?.[ye]},U=Array.isArray(o)?o:G("options")??[],W=!!G("image_upload"),ne=G("image_folder")??"input",ve="__null__",ae=U.some(ye=>ye===null),re=U.filter(ye=>ye!==null).map(ye=>String(ye)),R=Array.from(new Set([...re,...D])),F=s===null?ve:String(s??""),pe=F.split(/[\\/]/).pop()??F,xe=R.includes(F)||R.includes(pe),he=s!=null&&F!==""&&!xe,T=xe?R.includes(F)?F:pe:F,I=[];(s===null||ae)&&I.push({value:ve,label:"None"}),he&&I.push({value:F,label:F,isMissing:!0}),I.push(...R.map(ye=>({value:ye,label:ye})));const E=I.find(ye=>ye.value===T)??null,$=U.filter(ye=>ye!==null).length,Q=y?!0:B&&!($>0&&$<5),fe=W&&ne==="input",te=ye=>{const Me=ye.replace(/\\/g,"/"),Le=Me.lastIndexOf("/"),it=Le>=0?Me.slice(Le+1):Me,ht=Le>=0?Me.slice(0,Le):"";return qn(it,ht,"input")},le=b.useMemo(()=>fe?{DropdownIndicator:null,IndicatorSeparator:null,Option:Me=>{const{data:Le}=Me,ht=Le.value!==ve&&!Le.isMissing&&!!Le.value?te(Le.value):null;return u.jsx(mx.Option,{...Me,children:u.jsxs("div",{className:"flex items-center gap-2",children:[ht&&u.jsx("img",{src:ht,alt:"",className:"w-[72px] h-[72px] rounded-sm object-cover bg-gray-100 shrink-0",loading:"lazy",decoding:"async"}),u.jsx("span",{className:"truncate",children:Le.label})]})})}}:{DropdownIndicator:null,IndicatorSeparator:null},[fe]),be=["rs-container",h?"rs-has-pin":"rs-no-pin",x?"rs-error":"",he?"rs-missing":"",d?"rs-disabled":""].filter(Boolean).join(" "),Oe=typeof document>"u"?null:document.body,qe=()=>{M(!1),N?.()},ee=ye=>{ye&&i(ye.value===ve?null:ye.value)},Te=ye=>{ee(ye),qe()},Ne=()=>{d||_||O.current?.click()},_e=async ye=>{const Me=ye.target.files?.[0];if(Me){A(!0);try{const Le=await j0(Me,{type:ne}),it=Le.subfolder?`${Le.subfolder}/${Le.name}`:Le.name;z(ht=>ht.includes(it)?ht:[...ht,it]),i(it)}catch(Le){console.error("Failed to upload image:",Le)}finally{A(!1),ye.target.value=""}}},lt=W?u.jsx("button",{type:"button",className:`w-full py-2 px-3 rounded-lg border text-sm font-medium transition-colors ${d||_?"opacity-60 cursor-not-allowed border-gray-200 text-gray-400 bg-white":"border-gray-200 text-gray-700 bg-white hover:border-gray-300 hover:text-gray-900"}`,onClick:Ne,disabled:d||_,children:u.jsxs("span",{className:"inline-flex items-center justify-center gap-2",children:[u.jsx(Pd,{className:"w-4 h-4"}),_?"Uploading...":"Load from camera roll"]})}):null,Fe="#111827",we="#6b7280";return Q?u.jsxs("div",{className:`${r} combo-control-root combo-control-modal`,children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),u.jsxs("div",{className:`combo-control-trigger relative w-full p-3 comfy-input text-base flex items-center justify-between min-h-[46px] ${d?"opacity-60 cursor-not-allowed":""} ${x?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&M(!0),children:[u.jsx("span",{className:`combo-control-trigger-label truncate min-w-0 flex-1 ${E?"text-gray-900 dark:text-[#e5e7eb]":"text-gray-400 dark:text-gray-500"} ${h?"pr-16":"pr-6"}`,children:E?E.label:"Select..."}),u.jsxs("div",{className:"combo-control-trigger-icons flex items-center absolute right-0 top-0 bottom-0 pointer-events-none",children:[u.jsx("div",{className:"combo-control-chevron px-2 text-gray-400",children:u.jsx(yi,{className:"w-5 h-5"})}),h&&u.jsx("div",{className:"combo-control-pin pointer-events-auto px-2",children:u.jsx(Na,{isPinned:m,onToggle:g})})]})]}),he&&u.jsx("div",{className:"mt-1 text-xs text-red-700",children:"Missing on ComfyUI server"}),W&&u.jsxs("div",{className:"combo-control-upload mt-2",children:[lt,u.jsx("input",{ref:O,type:"file",accept:"image/*",className:"hidden",onChange:_e})]}),u.jsx(Jd,{title:l,isOpen:L,onClose:qe,children:u.jsx(l0,{className:be,classNamePrefix:"rs",options:I,value:E,onChange:Te,isSearchable:!0,autoFocus:!y,menuIsOpen:y?void 0:!0,controlShouldRenderValue:!0,placeholder:"Search...",filterOption:Vd({ignoreAccents:!0,ignoreCase:!0,trim:!0,matchFrom:"any"}),styles:{menu:ye=>({...ye,position:"static",boxShadow:"none",border:"none",marginTop:"0.5rem",borderRadius:0,backgroundColor:S?"transparent":"#ffffff"}),menuList:ye=>({...ye,maxHeight:"calc(100vh - 160px)",height:"auto",paddingBottom:"2rem",overflowY:"auto",overflowX:"auto",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",touchAction:"pan-y"}),option:(ye,Me)=>S?ye:{...ye,color:Fe,backgroundColor:Me.isSelected?"#e5e7eb":Me.isFocused?"#f3f4f6":"transparent"},singleValue:ye=>({...ye,color:S?ye.color:Fe}),input:ye=>({...ye,color:S?ye.color:Fe}),placeholder:ye=>({...ye,color:S?ye.color:we}),control:ye=>({...ye,borderColor:"#3b82f6",boxShadow:"0 0 0 1px #3b82f6",backgroundColor:S?ye.backgroundColor:"#ffffff",color:S?ye.color:Fe})},components:le,noOptionsMessage:()=>"No matches"})})]}):u.jsxs("div",{className:`${r} combo-control-root combo-control-inline`,children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),u.jsxs("div",{className:"combo-control-input-wrapper relative rs-scroll-target",ref:j,children:[u.jsx(l0,{className:be,classNamePrefix:"rs",options:I,value:E,onChange:ee,isSearchable:!0,isDisabled:d,filterOption:Vd({ignoreAccents:!0,ignoreCase:!0,trim:!0,matchFrom:"any"}),menuPortalTarget:Oe,menuPosition:"fixed",menuPlacement:"bottom",menuShouldScrollIntoView:!1,styles:{menuPortal:ye=>({...ye,zIndex:200}),menuList:ye=>({...ye,overflowY:"auto",overflowX:"auto",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",touchAction:"pan-y"}),option:(ye,Me)=>S?ye:{...ye,color:Fe,backgroundColor:Me.isSelected?"#e5e7eb":Me.isFocused?"#f3f4f6":"transparent"},singleValue:ye=>({...ye,color:S?ye.color:Fe}),input:ye=>({...ye,color:S?ye.color:Fe}),placeholder:ye=>({...ye,color:S?ye.color:we})},components:le,noOptionsMessage:()=>"No matches"}),u.jsxs("div",{className:"combo-control-icons absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:[u.jsx("div",{className:"combo-control-chevron px-2 text-gray-400",children:u.jsx(yi,{className:"w-5 h-5"})}),h&&u.jsx("div",{className:"combo-control-pin pointer-events-auto px-2",children:u.jsx(Na,{isPinned:m,onToggle:g})}),!h&&u.jsx("div",{className:"w-3"})]})]}),he&&u.jsx("div",{className:"mt-1 text-xs text-red-700",children:"Missing on ComfyUI server"}),W&&u.jsxs("div",{className:"mt-2",children:[lt,u.jsx("input",{ref:O,type:"file",accept:"image/*",className:"hidden",onChange:_e})]})]})}function ir({name:r,type:l,value:s,options:o,onChange:i,disabled:d=!1,hasError:p=!1,hideLabel:h=!1,compact:m=!1,forceModalOpen:g=!1,onModalClose:x,seedMode:y,onSeedModeChange:N,hasPin:k,isPinned:S=!1,onTogglePin:w,containerClass:M}){const[j,O]=b.useState(!1),D=()=>{d||O(!0)},z=()=>{O(!1),x?.()},_=l==="COMBO"||Array.isArray(o?.options),A=["INT","FLOAT"].includes(l.toUpperCase()),L=l.toUpperCase()==="STRING",B=r.replace(/_/g," "),G=k??(!!w||S),U=M??"space-y-2 w-full",W=M??(m?"mb-0":"mb-3"),ne={name:r,value:s,options:o,onChange:i,disabled:d,hideLabel:h,hasError:p,forceModalOpen:g,onModalClose:x,containerClass:U,hasPin:G,isPinned:S,onTogglePin:w},ve=()=>_?u.jsx(md,{...ne}):A?u.jsx(_d,{...ne,type:l,seedMode:y,onSeedModeChange:N}):L?u.jsx(kg,{...ne}):u.jsxs("div",{className:"unsupported-widget-type text-xs text-gray-400 italic",children:["Unsupported: ",l]}),ae=g||j;if(l==="POWER_LORA_HEADER")return u.jsx("div",{className:`${W} power-lora-header flex items-center justify-between p-3 bg-blue-50/50 dark:bg-blue-900/20 rounded-lg`,children:u.jsxs("div",{className:"power-lora-header-content flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",onChange:re=>i(re.target.checked),className:"w-5 h-5 rounded cursor-pointer",disabled:d}),u.jsx("span",{className:"power-lora-header-label text-sm font-semibold text-blue-900 dark:text-blue-100 uppercase tracking-wider",children:"Toggle All Loras"})]})});if(l==="POWER_LORA"){const re=s||{on:!0,lora:"",strength:1},R=o||{},F=R.choices,pe=R.showSeparate,xe=(he,T)=>{i({...re,[he]:T})};return u.jsxs("div",{className:`${W} power-lora-row flex flex-col gap-2 p-3 border border-gray-200 dark:border-gray-800 rounded-lg bg-gray-50/50 dark:bg-gray-900/50 ${re.on?"":"opacity-60"}`,children:[u.jsxs("div",{className:"power-lora-row-actions flex items-center gap-2",children:[u.jsx("button",{type:"button",onClick:()=>xe("on",!re.on),className:`power-lora-enabled-button flex-1 py-2 rounded-lg text-sm font-semibold transition-colors ${re.on?"bg-blue-600 text-white":"bg-gray-700 text-white"} ${d?"opacity-60 cursor-not-allowed":""}`,disabled:d,children:re.on?"Enabled":"Disabled"}),u.jsx("button",{type:"button",onClick:()=>i(null),className:`power-lora-remove-button flex-1 py-2 rounded-lg text-sm font-semibold bg-red-600 text-white hover:bg-red-700 transition-colors ${d?"opacity-60 cursor-not-allowed":""}`,disabled:d,children:"Remove"})]}),u.jsx("div",{className:"power-lora-row-header flex items-center gap-3",children:u.jsx("div",{className:"power-lora-select flex-grow min-w-0",children:u.jsx(ir,{name:"",hideLabel:!0,compact:!0,type:"COMBO",value:re.lora,options:F,onChange:he=>xe("lora",he),disabled:d})})}),u.jsxs("div",{className:"power-lora-strengths flex flex-col",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 ml-1",children:pe?"Model strength":"Strength"}),u.jsx("div",{className:"power-lora-strength-row flex items-center gap-3",children:u.jsx("div",{className:"power-lora-strength-input flex-grow",children:u.jsx(ir,{name:"",hideLabel:!0,compact:!0,type:"FLOAT",value:re.strength,options:{min:-10,max:10,step:.01},onChange:he=>xe("strength",he),disabled:d})})}),pe&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 ml-1",children:"Clip strength"}),pe&&u.jsx("div",{className:"power-lora-strength-row flex items-center gap-3",children:u.jsx("div",{className:"power-lora-strength-input flex-grow",children:u.jsx(ir,{name:"",hideLabel:!0,compact:!0,type:"FLOAT",value:re.strengthTwo??re.strength,options:{min:-10,max:10,step:.01},onChange:he=>xe("strengthTwo",he),disabled:d})})})]})]})}if(l==="POWER_LORA_ADD"){const re=()=>{i({on:!0,lora:"None",strength:1,model_strength:1,clip_strength:1})};return u.jsx("div",{className:`${W} power-lora-add`,children:u.jsxs("button",{onClick:re,className:"w-full py-2 px-4 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg text-sm font-medium text-gray-500 hover:text-blue-500 hover:border-blue-500 transition-all flex items-center justify-center gap-2",disabled:d,children:[u.jsx(Pd,{className:"w-5 h-5"}),"Add Lora"]})})}return L?u.jsx(kg,{...ne}):_?u.jsx(md,{...ne}):A?u.jsx(_d,{...ne,type:l,seedMode:y,onSeedModeChange:N}):l.toUpperCase()==="BOOLEAN"?u.jsx(md,{...ne,value:String(!!s),options:["true","false"],onChange:re=>i(String(re).toLowerCase()==="true")}):u.jsxs("div",{id:`widget-control-${r}`,className:`widget-control-root ${m?"compact-control":""}`,children:[!h&&u.jsxs("div",{id:`widget-label-container-${r}`,className:"flex items-center justify-between mb-1.5 px-1",children:[u.jsx("label",{id:`widget-label-${r}`,className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider truncate mr-2",children:B}),p&&u.jsx("div",{id:`widget-error-icon-${r}`,className:"text-red-500",title:"Error in this input",children:u.jsx(L0,{className:"w-3.5 h-3.5"})})]}),u.jsxs("div",{id:`widget-trigger-${r}`,className:`
          control-trigger
          relative flex items-center justify-between
          bg-gray-50 border border-gray-200 rounded-xl px-3 py-2.5
          active:bg-gray-100 active:border-gray-300 transition-all
          ${d?"opacity-50 grayscale pointer-events-none":"cursor-pointer"}
          ${p?"border-red-300 bg-red-50/30":""}
        `,onClick:D,children:[u.jsx("div",{id:`widget-value-display-${r}`,className:"value-display flex-1 truncate text-sm font-medium text-gray-900",children:_?s||"Select...":s!=null?String(s):"Empty"}),u.jsx("div",{id:`widget-icon-container-${r}`,className:"icon-container ml-2 text-gray-400"})]}),u.jsx(Jd,{isOpen:ae,title:B,onClose:z,children:u.jsx("div",{id:`modal-control-wrapper-${r}`,className:"p-2",children:ve()})})]})}function W3({node:r,isBypassed:l,isKSampler:s,workflowExists:o,nodeTypesExists:i,visibleInputWidgets:d,visibleWidgets:p,errorInputNames:h,onUpdateNodeWidget:m,onUpdateNodeWidgets:g,getWidgetIndexForInput:x,findSeedWidgetIndex:y,setSeedMode:N,isWidgetPinned:k,toggleWidgetPin:S}){const w=Array.isArray(r.widgets_values)?r.widgets_values:[],M=J(E=>E.nodeTypes),j=J(E=>E.workflow),O=J(E=>E.bypassAllInGroup),D=jn(E=>E.seedModes[r.id]),z=jn(E=>E.seedLastValues[r.id]??null),_=r.type==="Fast Groups Bypasser (rgthree)",A=!s&&o&&i?y():null,L=A!==null?A+1:null,B=L!==null?w[L]:void 0,G=typeof B=="string",U=!s&&A!==null&&!G,W=U?d.filter(E=>E.name!=="seed"&&E.name!=="noise_seed"):d,ne=U?p.filter(E=>E.name!=="seed"&&E.name!=="noise_seed"):p,ve=p.length>0||d.length>0,ae=b.useMemo(()=>{if(!_||!j)return[];const E=r.properties??{},$=typeof E.matchColors=="string"?E.matchColors:"",Q=typeof E.matchTitle=="string"?E.matchTitle:"",fe=E.showAllGraphs!==!1,te=typeof E.sort=="string"?E.sort:"position",le=typeof E.customSortAlphabet=="string"?E.customSortAlphabet:"",be=Se=>{const Ae=Se.replace("#","").trim();return/^[0-9a-f]{3}$/i.test(Ae)?`#${Ae.replace(/(.)/g,"$1$1").toLowerCase()}`:/^[0-9a-f]{6}$/i.test(Ae)?`#${Ae.toLowerCase()}`:null},Oe=Se=>{if(typeof document>"u")return null;const Ae=document.createElement("span");if(Ae.style.color=Se,!document.body)return null;document.body.appendChild(Ae);const Ke=getComputedStyle(Ae).color;document.body.removeChild(Ae);const $e=Ke.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(!$e)return null;const[,Qe,Xe,vt]=$e.map(Number);return[Qe,Xe,vt].some(oe=>Number.isNaN(oe))?null:`#${[Qe,Xe,vt].map(oe=>oe.toString(16).padStart(2,"0")).join("")}`},qe={nocolor:"#353535",red:"#553333",brown:"#593930",green:"#335533",blue:"#333355",pale_blue:"#3f5159",cyan:"#335555",purple:"#553355",yellow:"#665533",black:"#000000"},ee=Se=>{const Ae=[],Ke=Se.trim().toLowerCase();if(Ke){Ae.push(Ke);const Xe=qe[Ke.replace(/\s+/g,"")]??qe[Ke];Xe&&Ae.push(Xe)}const $e=be(Se);if($e)return Ae.push($e),Ae;const Qe=Oe(Se);return Qe&&Ae.push(Qe),Ae},Te=Se=>{const Ae=Se.replace("#","").trim();if(!/^[0-9a-f]{6}$/i.test(Ae))return null;const Ke=parseInt(Ae.slice(0,2),16)/255,$e=parseInt(Ae.slice(2,4),16)/255,Qe=parseInt(Ae.slice(4,6),16)/255,Xe=Math.max(Ke,$e,Qe),vt=Math.min(Ke,$e,Qe),oe=Xe-vt;let Pe=0;oe!==0&&(Xe===Ke?Pe=($e-Qe)/oe%6:Xe===$e?Pe=(Qe-Ke)/oe+2:Pe=(Ke-$e)/oe+4,Pe=Math.round(Pe*60),Pe<0&&(Pe+=360));const et=(Xe+vt)/2,gt=oe===0?0:oe/(1-Math.abs(2*et-1));return{h:Pe,s:gt,l:et}},Ne=$.split(",").map(Se=>Se.trim()).filter(Boolean).flatMap(ee),_e=new Set(Ne),lt=Ne.map(Se=>be(Se)??Oe(Se)).filter(Se=>!!Se).map(Se=>Te(Se)).filter(Se=>!!Se);let Fe=null;if(Q.trim())try{Fe=new RegExp(Q,"i")}catch(Se){return console.error(Se),[]}let we=null;if(te==="custom alphabet"){const Se=le.replace(/\n/g,"").trim().toLowerCase();Se&&(we=Se.includes(",")?Se.split(",").map(Ae=>Ae.trim()).filter(Boolean):Se.split("")),we?.length||(we=null)}const ye=new Map(j.nodes.map(Se=>[Se.id,Se])),Me=[],Le=Se=>{if(_e.size>0){const Ae=Se.color?ee(Se.color):[],Ke=Se.color?be(Se.color):null,$e=Ke?Te(Ke):null,Qe=Ae.some(vt=>_e.has(vt))||(Ke?_e.has(Ke):!1),Xe=!!($e&&lt.some(vt=>{const oe=Math.abs(vt.h-$e.h);return Math.min(oe,360-oe)<=25}));if(!Qe&&!Xe)return!1}return!(Fe&&!Fe.test(Se.title||""))},it=(Se,Ae)=>{if(!Le(Se))return;const Ke=O0(j,Se.id,Ae);let $e=!1;for(const Qe of Ke){const Xe=ye.get(Qe);if(!(!Xe||Xe.mode===4)){$e=!0;break}}Me.push({key:`${Ae??"root"}-${Se.id}`,label:Se.title?.trim()||`Group ${Se.id}`,groupId:Se.id,subgraphId:Ae,color:Se.color,isEngaged:$e,isDisabled:Ke.size===0,group:Se})},ht=r.properties?.__mobile_origin,Ze=ht?.scope==="subgraph"?ht.subgraphId:null;if(fe){for(const Se of j.groups??[])it(Se,null);for(const Se of j.definitions?.subgraphs??[])for(const Ae of Se.groups??[])it(Ae,Se.id)}else if(Ze){const Se=j.definitions?.subgraphs?.find(Ae=>Ae.id===Ze);for(const Ae of Se?.groups??[])it(Ae,Ze)}else for(const Se of j.groups??[])it(Se,null);return te==="alphanumeric"?Me.sort((Se,Ae)=>Se.label.localeCompare(Ae.label)):we?.length?Me.sort((Se,Ae)=>{const Ke=Se.label.toLowerCase(),$e=Ae.label.toLowerCase();let Qe=-1,Xe=-1;for(const[vt,oe]of we.entries())if(Qe<0&&Ke.startsWith(oe)&&(Qe=vt),Xe<0&&$e.startsWith(oe)&&(Xe=vt),Qe>-1&&Xe>-1)break;if(Qe>-1&&Xe>-1){const vt=Qe-Xe;return vt===0?Ke.localeCompare($e):vt}return Qe>-1?-1:Xe>-1?1:Ke.localeCompare($e)}):Me.sort((Se,Ae)=>{const Ke=Se.group.bounding,$e=Ae.group.bounding;return Ke[1]!==$e[1]?Ke[1]-$e[1]:Ke[0]-$e[0]}),Me},[_,r.properties,j]),re=E=>()=>{E.isDisabled||O(E.groupId,E.isEngaged,E.subgraphId??void 0)},R=E=>{typeof E=="string"&&["fixed","randomize","increment","decrement"].includes(E)&&N(r.id,E)},F=E=>$=>{m(r.id,E,$),R($)},pe=E=>$=>{m(r.id,E,$,"seed"),N(r.id,"fixed")},xe=E=>()=>{if(!M)return;const $=Mo(M,r);m(r.id,E,$,"seed"),N(r.id,"fixed")},he=E=>()=>{typeof z=="number"&&(m(r.id,E,z,"seed"),N(r.id,"fixed"))},T=E=>$=>{m(r.id,E.widgetIndex,$,E.name)},I=E=>$=>{if(E.type==="POWER_LORA_HEADER"&&typeof $=="boolean"){const{loraIndices:Q}=E.options||{};if(Q){const fe={},te=r.widgets_values;Array.isArray(te)&&(Q.forEach(le=>{const be=te[le];fe[le]={...be,on:$}}),g(r.id,fe))}}else m(r.id,E.widgetIndex,$,E.name)};return!ve&&ae.length===0?null:u.jsxs("div",{className:"mb-3",children:[ae.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-300 mb-1.5 uppercase tracking-wide",children:"Groups"}),u.jsx("div",{className:"space-y-2",children:ae.map(E=>u.jsxs("div",{className:`flex items-center justify-between gap-3 rounded-lg border px-3 py-2 bg-gray-50/40 dark:bg-gray-900/60 ${E.isDisabled?"border-gray-200 dark:border-white/10 opacity-60":"border-gray-200 dark:border-white/15"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[u.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:E.color||"#9ca3af"}}),u.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-100 truncate",children:E.label})]}),u.jsx("button",{type:"button",role:"switch","aria-checked":E.isEngaged,onClick:re(E),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${E.isEngaged?"bg-emerald-500":"bg-gray-300"} ${E.isDisabled?"cursor-not-allowed":"cursor-pointer"}`,children:u.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition ${E.isEngaged?"translate-x-5":"translate-x-1"}`})})]},E.key))})]}),ve&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Parameters"}),s&&o&&i&&(()=>{const E=x("seed");if(E===null)return null;const $=w[E],Q=E+1,fe=w[Q],te=["fixed","increment","decrement","randomize"],be=!!r.inputs.find(Oe=>Oe.name==="noise_seed")?.link;return u.jsxs("div",{className:"mb-3",children:[u.jsx(ir,{name:"seed",type:"INT",value:$,onChange:Oe=>m(r.id,E,Oe,"seed"),disabled:l,hasError:h.has("seed")}),Q<w.length&&!be&&u.jsx(ir,{name:"Control mode",type:"COMBO",value:fe,options:te,onChange:F(Q)})]})})(),!s&&o&&i&&(()=>{const E=A;if(E===null)return null;const $=["fixed","randomize","increment","decrement"],Q=typeof B=="string"&&!$.includes(B)?[...$,B]:$;if(r.inputs.find(Fe=>Fe.name==="seed"||Fe.name==="noise_seed")?.link!=null)return null;if(G){const Fe=E+1;return u.jsx("div",{className:"mb-3",children:u.jsx(ir,{name:"Seed control",type:"COMBO",value:B,options:Q,onChange:F(Fe)})})}const le=d.find(Fe=>Fe.name==="seed"||Fe.name==="noise_seed")?.options??{},be=typeof le.min=="number"?le.min:void 0,Oe=typeof le.max=="number"?le.max:void 0,qe=typeof le.step=="number"?le.step:void 0,ee=Number(w[E]??0),Te=C0(ee),Ne=D??Te??"fixed",_e=$d(ee)?typeof z=="number"?z:0:ee,lt=h.has("seed")||h.has("noise_seed");return u.jsxs("div",{className:"mb-3",children:[u.jsx(_d,{name:"seed",value:_e,onChange:pe(E),disabled:l,min:be,max:Oe,step:qe,hasError:lt}),u.jsx(ir,{name:"Seed control",type:"COMBO",value:Ne,options:$,onChange:R}),u.jsxs("div",{className:"grid gap-2 mt-2",children:[u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:()=>N(r.id,"randomize"),disabled:l,children:"Randomize each time"}),u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:xe(E),disabled:l,children:"New fixed random"}),u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:he(E),disabled:l||typeof z!="number",children:"Use last queued seed"})]})]})})(),W.map(E=>u.jsx("div",{className:l?"opacity-80":"",children:u.jsx(ir,{name:E.name,type:E.type,value:E.value,options:E.options,onChange:T(E),disabled:l,isPinned:k(E.widgetIndex),onTogglePin:()=>S(E.widgetIndex,E.name,E.type,E.options),hasError:h.has(E.name)})},`input-widget-${E.name}`)),ne.map(E=>u.jsx("div",{className:l?"opacity-80":"",children:u.jsx(ir,{name:E.name,type:E.type,value:E.value,options:E.options,onChange:I(E),disabled:l,isPinned:k(E.widgetIndex),onTogglePin:()=>S(E.widgetIndex,E.name,E.type,E.options),hasError:h.has(E.name)})},`widget-${E.widgetIndex}`)),r.type==="PrimitiveNode"&&(()=>{const E=r.outputs?.[0]?.type,$=String(E).toUpperCase();if($!=="INT"&&$!=="FLOAT"||w.length<2)return null;const Q=w[1],fe=["fixed","increment","decrement","randomize"];return u.jsx("div",{className:"mb-3",children:u.jsx(ir,{name:"Control mode",type:"COMBO",value:Q,options:fe,onChange:te=>m(r.id,1,te),disabled:l})})})()]})]})}const F3=[],$3=b.memo(function({node:l,isExecuting:s,isConnectionHighlighted:o=!1,errorBadgeLabel:i,onImageClick:d,inGroup:p=!1}){const h=J(ie=>ie.nodeTypes),m=J(ie=>ie.workflow),g=J(ie=>ie.updateNodeWidget),x=J(ie=>ie.updateNodeWidgets),y=J(ie=>ie.updateNodeTitle),N=J(ie=>ie.toggleBypass),k=J(ie=>ie.toggleNodeFold),S=J(ie=>ie.hideNode),w=J(ie=>ie.setConnectionHighlightMode),M=J(ie=>ie.connectionHighlightModes[l.id]??"off"),j=jn(ie=>ie.setSeedMode),O=J(ie=>ie.currentWorkflowKey),D=Gn(ie=>ie.pinnedWidget?.nodeId===l.id?ie.pinnedWidget:null),z=Gn(ie=>ie.setPinnedWidget),_=yn(ie=>ie.bookmarkedNodeIds),A=yn(ie=>ie.toggleNodeBookmark),L=J(ie=>ie.nodeOutputs[String(l.id)]),B=Zt(ie=>ie.nodeErrors[String(l.id)]),G=J(ie=>ie.progress),U=J(ie=>ie.executingPromptId),W=J(ie=>ie.workflowDurationStats),ne=J(ie=>ie.isExecuting),ve=rt(ie=>ie.running),ae=U||(ve[0]?.prompt_id??null),re=Ho({workflow:m,runKey:ae,isRunning:ne||ve.length>0,workflowDurationStats:W}),R=re===100?100:G,F=b.useCallback((ie,tt)=>{j(ie,tt,{workflow:m,nodeTypes:h,updateNodeWidgets:x})},[h,j,x,m]),pe=b.useCallback(ie=>{z(ie,O)},[O,z]),xe=L??F3,[he,T]=b.useState(null),[I,E]=b.useState(!1),$=b.useRef(null),[Q,fe]=b.useState(!1),[te,le]=b.useState(!1),[be,Oe]=b.useState(""),qe=b.useRef(null),ee=b.useRef(0),Te=b.useRef(null),[Ne,_e]=b.useState(null);b.useEffect(()=>{const ie=tt=>{const It=tt.detail;if(It.nodeId===l.id){_e(It.label);const Ht=setTimeout(()=>_e(null),1e3);return()=>clearTimeout(Ht)}};return window.addEventListener("node-show-label",ie),()=>window.removeEventListener("node-show-label",ie)},[l.id]);const lt=B&&B.length>0,Fe=b.useMemo(()=>B?new Set(B.map(ie=>ie.inputName).filter(ie=>!!ie)):new Set,[B]),we=xe.length>0?xe[xe.length-1]:null,ye=we?`${we.filename}|${we.subfolder}|${we.type}`:null,Me=he?`${he.filename}|${he.subfolder}|${he.type}`:null;b.useEffect(()=>{if(!we||ye===Me)return;const ie=qn(we.filename,we.subfolder,we.type),tt=new Image;tt.onload=()=>T(we),tt.src=ie},[ye,Me,we]);const Le=h?.[l.type],it=b.useMemo(()=>{const ie=l.title;return typeof ie=="string"&&ie.trim()?ie.trim():null},[l]),ht=it||Le?.display_name||l.type,Ze=l.type==="KSampler",Se=l.mode===4,Ae=!!l.flags?.collapsed,Ke=/LoadImage/i.test(l.type),Qe=b.useMemo(()=>!Ke||!m||!h?null:Y3(m,h,l),[Ke,l,h,m])??he,Xe=b.useMemo(()=>{const ie=Yd(h,l);return Ze?ie.filter(tt=>tt.name!=="seed"):ie},[h,l,Ze]),vt=b.useMemo(()=>Qd(h,l),[h,l]),oe=b.useMemo(()=>vt.filter(ie=>!ie.connected),[vt]),Pe=b.useMemo(()=>Xe.filter(ie=>!ie.connected),[Xe]),et=b.useMemo(()=>{const ie=l.properties,tt=["text","note","description","label","title"];if(ie)for(const Ht of tt){const an=ie[Ht];if(typeof an=="string"&&an.trim())return an}if(/note|comment|sticky|label/i.test(l.type)&&Array.isArray(l.widgets_values)){const Ht=l.widgets_values.find(an=>typeof an=="string"&&an.trim());if(typeof Ht=="string"&&Ht.trim())return Ht}return null},[l.properties,l.widgets_values,l.type]),gt=b.useMemo(()=>{if(!/note|comment|sticky|label/i.test(l.type)||!Array.isArray(l.widgets_values))return null;const tt=l.widgets_values.findIndex(It=>typeof It=="string"&&It.trim());return tt>=0?tt:null},[l.type,l.widgets_values]),Gt=ie=>!m||!h?null:xl(m,h,l,ie),cr=()=>!m||!h?null:Ca(m,h,l),dr=ie=>{gt!==null&&g(l.id,gt,ie)},fr=b.useMemo(()=>{if(!et)return null;const ie=[],tt=/(https?:\/\/[^\s]+)/g;let It=0,Ht,an=0;for(;(Ht=tt.exec(et))!==null;){const[un]=Ht,Yn=Ht.index;Yn>It&&ie.push(et.slice(It,Yn)),ie.push(u.jsx("a",{href:un,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline break-all",children:un},`note-link-${an++}`)),It=Yn+un.length}return It<et.length&&ie.push(et.slice(It)),ie},[et]),bn=()=>{const ie=Date.now();ie-ee.current<300&&fe(!0),ee.current=ie},sn=b.useMemo(()=>{const ie=[];return oe.forEach(tt=>{ie.push({widgetIndex:tt.widgetIndex,name:tt.name,type:tt.type,options:tt.options})}),Pe.forEach(tt=>{ie.push({widgetIndex:tt.widgetIndex,name:tt.name,type:tt.type,options:tt.options})}),ie},[oe,Pe]),hn=b.useCallback(ie=>{if(ie.link!=null)return!1;if(ie.widget)return!0;const tt=Le?.input?.required?.[ie.name]||Le?.input?.optional?.[ie.name];if(!tt)return!1;const[It,Ht]=tt;if(Array.isArray(It))return!0;const an=String(It).toUpperCase(),un=Object.prototype.hasOwnProperty.call(Ht??{},"default");return["INT","FLOAT","BOOLEAN","STRING"].includes(an)||un},[Le]),gn=b.useMemo(()=>l.inputs.filter(ie=>!(hn(ie)||String(ie.type).toUpperCase()==="OPT_CONNECTION"&&ie.link==null)),[l.inputs,hn]),$n=b.useMemo(()=>l.outputs.filter(ie=>!((ie.name||"").toLowerCase().replace(/[_\s]/g,"")==="showhelp"||String(ie.type).toUpperCase()==="OPT_CONNECTION"&&!ie.links?.length)),[l.outputs]),ke=l.outputs.some(ie=>String(ie.type).toUpperCase()==="IMAGE"),ze=!!(Le?.output_node||/PreviewImage|SaveImage|SaveAnimatedPNG|SaveAnimatedWEBP|SaveVideo/i.test(l.type)),V=ie=>D?.widgetIndex===ie,ue=(ie,tt,It,Ht)=>{V(ie)?pe(null):pe({nodeId:l.id,widgetIndex:ie,widgetName:tt,widgetType:It,options:Ht})},ce=sn.length===1?sn[0]:null,Ce=ce?V(ce.widgetIndex):!1,Be=!!D,Ye=_.includes(l.id),Re=_.length<5||Ye,st=(ke||ze)&&!!Qe,pt=l.inputs?.filter(ie=>ie.link!=null).length??0,yt=l.outputs?.reduce((ie,tt)=>ie+(tt.links?.length??0),0)??0,bt=Math.min(3,pt),wt=Math.min(3,yt),xt=Qe?(()=>{const{filename:ie,subfolder:tt,type:It}=Qe,Ht=qn(ie,tt,It),an=tt?`${tt}/${ie}`:ie,un=Vo(ie);return[{src:Ht,alt:ht,filename:ie,mediaType:un,file:{id:`${It}/${an}`,name:ie,type:un==="video"?"video":"image",fullUrl:Ht}}]})():[];b.useEffect(()=>{if(!te)return;const ie=qe.current;ie&&(ie.focus(),ie.select())},[te]);const Dt=()=>{Oe(ht),le(!0)},qt=()=>{const ie=be.trim();y(l.id,ie.length>0?ie:null),le(!1)},wn=!!(Ne&&!/^error\b/i.test(Ne));return u.jsxs("div",{id:`node-card-wrapper-${l.id}`,className:"relative node-card-outer",children:[u.jsx("div",{id:`node-anchor-${l.id}`,className:"absolute -top-3 left-0 right-0 h-0 node-scroll-anchor"}),wn&&u.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 z-[100] animate-in fade-in slide-in-from-bottom-2 duration-200",children:u.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg whitespace-nowrap uppercase tracking-tighter ring-2 ring-white",children:Ne})}),i&&u.jsx("div",{className:"absolute top-2 right-2 z-[110] animate-in fade-in duration-150",children:u.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg whitespace-nowrap uppercase tracking-tighter ring-2 ring-white",children:i})}),u.jsxs("div",{id:`node-card-${l.id}`,className:`
        node-card-inner
        ${p?"rounded-lg shadow-sm py-1":"rounded-xl shadow-md px-3 py-1 mb-3"}
        border-2
        ${lt?"border-red-700 shadow-red-200":o?"border-orange-500 shadow-orange-200":s?"border-green-500 shadow-green-200":Se?"border-purple-300":"border-transparent"}
        ${Se?Ae?"bg-purple-200":"bg-purple-100/50":"bg-white"}
      `,style:{overflow:"visible"},children:[u.jsx(e2,{nodeId:l.id,displayName:ht,isEditingLabel:te,labelValue:be,labelInputRef:qe,onLabelChange:Oe,onLabelBlur:qt,isCollapsed:Ae,isBypassed:Se,isExecuting:s,overallProgress:re,hasErrors:lt,errorIconRef:Te,errorPopoverOpen:I,setErrorPopoverOpen:E,toggleNodeFold:k,rightSlot:u.jsx(Pb,{nodeId:l.id,isBypassed:Se,onEditLabel:Dt,pinnableWidgets:sn,singlePinnableWidget:ce,isSingleWidgetPinned:Ce,hasPinnedWidget:Be,toggleWidgetPin:ue,setPinnedWidget:pe,isNodeBookmarked:Ye,canAddNodeBookmark:Re,onToggleNodeBookmark:()=>A(l.id),toggleBypass:N,hideNode:S,connectionHighlightMode:M,setConnectionHighlightMode:w,leftLineCount:bt,rightLineCount:wt})}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${Ae?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden transition-opacity duration-200 ease-out ${Ae?"opacity-0":"opacity-100"}`,children:[it&&u.jsx("div",{className:"node-card-subtitle text-[10px] text-center font-semibold uppercase tracking-wider text-gray-400 mb-2 px-1",children:Le?.display_name||l.type}),u.jsxs("div",{id:`node-content-${l.id}`,className:`node-expanded-content ${Se?"opacity-60 grayscale":""}`,children:[u.jsx(Xb,{nodeId:l.id,inputs:gn,outputs:$n,allInputs:l.inputs,allOutputs:l.outputs}),u.jsx(W3,{node:l,isBypassed:Se,isKSampler:Ze,workflowExists:!!m,nodeTypesExists:!!h,visibleInputWidgets:oe,visibleWidgets:Pe,errorInputNames:Fe,onUpdateNodeWidget:g,onUpdateNodeWidgets:x,getWidgetIndexForInput:Gt,findSeedWidgetIndex:cr,setSeedMode:F,isWidgetPinned:V,toggleWidgetPin:ue}),et&&u.jsx(Kb,{noteText:et,noteLinkified:fr,noteWidgetIndex:gt,isEditingNote:Q,setIsEditingNote:fe,onUpdateNote:dr,noteTextareaRef:$,onNoteTap:bn}),u.jsx(Jb,{show:st,previewImage:Qe,displayName:ht,onImageClick:()=>d?.(xt,0),isExecuting:!!s,overallProgress:re,displayNodeProgress:R})]})]})})]}),u.jsx(Zb,{nodeId:l.id,open:I&&lt,errors:B??[],anchorRef:Te,onClose:()=>E(!1)})]})});function Y3(r,l,s){if(!l)return null;const o=xl(r,l,s,"image")??xl(r,l,s,"filename")??xl(r,l,s,"file");if(o==null||!Array.isArray(s.widgets_values))return null;const i=s.widgets_values[o];return Q3(i)}function Q3(r){if(typeof r=="string"&&r.trim()){const{filename:h,subfolder:m}=a0(r.trim());return{filename:h,subfolder:m,type:"input"}}if(!r||typeof r!="object")return null;const l=r,s=typeof l.filename=="string"?l.filename:typeof l.name=="string"?l.name:null;if(!s||!s.trim())return null;const o=typeof l.subfolder=="string"?l.subfolder:"",i=typeof l.type=="string"?l.type:"input",{filename:d,subfolder:p}=a0(s.trim());return{filename:d,subfolder:o||p,type:i}}function a0(r){const l=r.replace(/^\/+/,""),s=l.split("/").filter(Boolean);return s.length<=1?{filename:l,subfolder:""}:{filename:s.pop()??l,subfolder:s.join("/")}}function X3({group:r,nodeCount:l,isCollapsed:s,subgraphId:o=null,bookmarkNodeId:i=null,hiddenNodeCount:d=0,foldAllLabel:p,onToggleCollapse:h,onToggleFoldAll:m,onBypassAll:g,onHideGroup:x,onShowHiddenNodes:y}){const N=J(Q=>Q.updateGroupTitle),k=yn(Q=>Q.bookmarkedNodeIds),S=yn(Q=>Q.toggleNodeBookmark),[w,M]=b.useState(!1),[j,O]=b.useState(!1),[D,z]=b.useState(""),_=b.useRef(null),A=b.useRef(null),L=b.useRef(null),[B,G]=b.useState(null);b.useEffect(()=>{if(!w)return;const Q=()=>{const le=L.current;if(!le)return;const be=le.getBoundingClientRect();G({top:be.bottom+6,left:be.right-160})};Q();const fe=le=>{!A.current||!le.target||L.current?.contains(le.target)||A.current.contains(le.target)||M(!1)},te=le=>{const be=le.target;A.current&&be&&A.current.contains(be)||M(!1)};return document.addEventListener("mousedown",fe),document.addEventListener("scroll",te,!0),window.addEventListener("resize",Q),()=>{document.removeEventListener("mousedown",fe),document.removeEventListener("scroll",te,!0),window.removeEventListener("resize",Q)}},[w]);const U=Vr(r.color,.22),W=Vr(r.color,.4),ne=r.title?.trim()||`Group ${r.id}`;b.useEffect(()=>{if(!j)return;const Q=_.current;Q&&(Q.focus(),Q.select())},[j]);const ve=()=>{j||h()},ae=Q=>{Q.stopPropagation(),h()},re=()=>{N(r.id,D,o),O(!1)},R=Q=>{Q.stopPropagation(),M(fe=>!fe)},F=Q=>{Q.stopPropagation(),z(ne),O(!0),M(!1)},pe=Q=>{Q.stopPropagation(),m(),M(!1)},xe=Q=>fe=>{fe.stopPropagation(),g(Q),M(!1)},he=Q=>{Q.stopPropagation(),x(),M(!1)},T=Q=>{Q.stopPropagation(),y?.(),M(!1)},I=i!=null&&k.includes(i),E=i!=null&&(k.length<5||I),$=d>0&&!!y;return u.jsxs("div",{id:`group-header-${r.id}`,className:`group-header flex items-center justify-between cursor-pointer gap-3 px-3 py-2 ${s?"rounded-xl":"rounded-t-xl mb-2"}`,style:{backgroundColor:U,borderColor:W},onClick:ve,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[u.jsx("button",{onClick:ae,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-500 hover:text-gray-700 shrink-0",children:s?u.jsx(Bl,{className:"w-6 h-6"}):u.jsx(Wn,{className:"w-6 h-6"})}),j?u.jsx("input",{ref:_,value:D,onChange:Q=>z(Q.target.value),onBlur:re,onKeyDown:Q=>{(Q.key==="Enter"||Q.key==="Escape")&&Q.currentTarget.blur()},onClick:Q=>Q.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{className:"font-semibold text-gray-900 select-none flex-1 min-w-0 whitespace-nowrap overflow-hidden text-ellipsis",children:ne}),s&&u.jsxs("span",{className:"text-sm text-gray-500 shrink-0",children:["(",l," node",l!==1?"s":"",")"]})]}),u.jsxs("div",{className:"flex items-center gap-1",onClick:Q=>Q.stopPropagation(),children:[u.jsx("button",{onClick:R,className:"w-8 h-8 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent","aria-label":"Group options",ref:L,children:u.jsx(vl,{className:"w-5 h-5 -rotate-90"})}),w&&B&&rr.createPortal(u.jsxs("div",{ref:A,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:B.top,left:B.left},children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:F,children:[u.jsx(Xd,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",onClick:Q=>{Q.stopPropagation(),i!=null&&(S(i),M(!1))},disabled:!E,children:[I?u.jsx(bi,{className:"w-4 h-4 text-gray-500"}):u.jsx(Hl,{className:"w-4 h-4 text-yellow-500"}),I?"Remove bookmark":"Bookmark node"]}),u.jsx("div",{className:"border-t border-gray-200 my-1"}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:pe,children:[p==="Fold all"?u.jsx(Bl,{className:"w-4 h-4 text-gray-500"}):u.jsx(Wn,{className:"w-4 h-4 text-gray-500"}),p]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:xe(!0),children:[u.jsx(Ed,{className:"w-4 h-4 text-gray-500",isBypassed:!0}),"Bypass all nodes"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:xe(!1),children:[u.jsx(Ed,{className:"w-4 h-4 text-gray-500",isBypassed:!1}),"Engage all nodes"]}),$&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:T,children:[u.jsx(ur,{className:"w-4 h-4 text-gray-500"}),"Show hidden nodes"]}),u.jsx("div",{className:"border-t border-gray-200 my-1"}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:he,children:[u.jsx(ur,{className:"w-4 h-4 text-gray-500"}),"Hide group"]})]}),document.body)]})]})}function P3({group:r}){const l=Vr(r.color,.15),s=Vr(r.color,.3),o=()=>{document.getElementById(`group-header-${r.id}`)?.scrollIntoView({behavior:"smooth",block:"start"})};return u.jsx("div",{id:`group-footer-${r.id}`,className:"group-footer px-3 py-1.5 -mx-1 rounded-b-xl cursor-pointer",onClick:o,style:{backgroundColor:l,borderColor:s},children:u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 select-none",children:r.title})})}function Z3({group:r}){const l=Vr(r.color,.05),s=Vr(r.color,.3),o=Vr(r.color,.4);return u.jsx("div",{id:`group-placeholder-${r.id}`,className:"group-placeholder flex items-center justify-center px-4 py-6 border-l border-r",style:{backgroundColor:l,borderColor:s},children:u.jsx("div",{className:"w-full rounded-lg border-2 border-dashed flex items-center justify-center py-4",style:{borderColor:o},children:u.jsx("span",{className:"text-sm text-gray-400 select-none",children:"No nodes in group"})})})}const o0="rgba(59, 130, 246, 0.14)",s0="rgba(59, 130, 246, 0.25)";function K3({subgraph:r,nodeCount:l,isCollapsed:s,onToggleCollapse:o}){const i=J(G=>G.updateSubgraphTitle),d=J(G=>G.setSubgraphHidden),[p,h]=b.useState(!1),[m,g]=b.useState(!1),[x,y]=b.useState(""),N=b.useRef(null),k=b.useRef(null),S=b.useRef(null),[w,M]=b.useState(null),O=(r.name||r.id).trim()||r.id;b.useEffect(()=>{if(!p)return;const G=()=>{const ne=S.current;if(!ne)return;const ve=ne.getBoundingClientRect();M({top:ve.bottom+6,left:ve.right-160})};G();const U=ne=>{!k.current||!ne.target||S.current?.contains(ne.target)||k.current.contains(ne.target)||h(!1)},W=ne=>{const ve=ne.target;k.current&&ve&&k.current.contains(ve)||h(!1)};return document.addEventListener("mousedown",U),document.addEventListener("scroll",W,!0),window.addEventListener("resize",G),()=>{document.removeEventListener("mousedown",U),document.removeEventListener("scroll",W,!0),window.removeEventListener("resize",G)}},[p]),b.useEffect(()=>{if(!m)return;const G=N.current;G&&(G.focus(),G.select())},[m]);const D=()=>{m||o()},z=G=>{G.stopPropagation(),o()},_=()=>{i(r.id,x),g(!1)},A=G=>{G.stopPropagation(),h(U=>!U)},L=G=>{G.stopPropagation(),y(O),g(!0),h(!1)},B=G=>{G.stopPropagation(),d(r.id,!0),h(!1)};return u.jsxs("div",{id:`subgraph-header-${r.id}`,className:`subgraph-header flex items-center justify-between cursor-pointer gap-3 px-3 py-2 ${s?"rounded-xl":"rounded-t-xl mb-3"}`,style:{backgroundColor:`var(--subgraph-bg, ${o0})`,borderColor:`var(--subgraph-border, ${s0})`,"--subgraph-bg":o0,"--subgraph-border":s0},onClick:D,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[u.jsx("button",{onClick:z,className:"w-8 h-8 -ml-2 flex items-center justify-center text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 shrink-0",children:s?u.jsx(Bl,{className:"w-6 h-6"}):u.jsx(Wn,{className:"w-6 h-6"})}),m?u.jsx("input",{ref:N,value:x,onChange:G=>y(G.target.value),onBlur:_,onKeyDown:G=>{(G.key==="Enter"||G.key==="Escape")&&G.currentTarget.blur()},onClick:G=>G.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 select-none flex-1 min-w-0 whitespace-nowrap overflow-hidden text-ellipsis",children:O}),s&&u.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400 shrink-0",children:["(",l," node",l!==1?"s":"",")"]})]}),u.jsx("button",{onClick:A,className:"flex items-center text-blue-400 dark:text-blue-500 opacity-60 hover:opacity-100","aria-label":"Subgraph options",ref:S,children:u.jsx(Oa,{className:"w-5 h-5"})}),p&&w&&rr.createPortal(u.jsxs("div",{ref:k,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:w.top,left:w.left},children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:L,children:[u.jsx(Xd,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:B,children:[u.jsx(ur,{className:"w-4 h-4 text-gray-500"}),"Hide subgraph"]})]}),document.body)]})}const J3="rgba(59, 130, 246, 0.1)",e5="rgba(59, 130, 246, 0.2)";function t5({subgraph:r}){const l=r.name||r.id,s=()=>{document.getElementById(`subgraph-header-${r.id}`)?.scrollIntoView({behavior:"smooth",block:"start"})};return u.jsx("div",{id:`subgraph-footer-${r.id}`,className:"subgraph-footer px-3 py-1.5 -mx-1 rounded-b-xl cursor-pointer",onClick:s,style:{backgroundColor:J3,borderColor:e5},children:u.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-500 select-none",children:l})})}function ii(r){return String(r).split(",").map(l=>l.trim().toUpperCase()).filter(Boolean)}function i0(r){return r.toLowerCase().replace(/[_-]+/g," ").replace(/\s+/g," ").trim()}function n5(r,l){let s=0;for(const o of l)if(o===r[s]&&(s+=1,s>=r.length))return!0;return r.length===0}function u0(r,l){if(!r.trim())return!0;const s=i0(l);return i0(r).split(" ").filter(Boolean).every(o=>s.includes(o)||n5(o,s))}function r5({visible:r,onImageClick:l}){const s=J(V=>V.workflow),o=J(V=>V.executingNodeId),i=J(V=>V.connectionHighlightModes),d=J(V=>V.manuallyHiddenNodes),p=yn(V=>V.bookmarkBarSide),h=yn(V=>V.bookmarkBarTop),m=yn(V=>V.setBookmarkBarPosition),g=yn(V=>V.setBookmarkRepositioningActive),x=J(V=>V.ensureNodeExpanded),y=J(V=>V.scrollToNode),N=J(V=>V.revealNodeWithParents),k=J(V=>V.nodeTypes),S=Zt(V=>V.nodeErrors),w=J(V=>V.searchOpen),M=J(V=>V.searchQuery),j=J(V=>V.setSearchQuery),O=J(V=>V.setSearchOpen),D=J(V=>V.collapsedGroups),z=J(V=>V.hiddenGroups),_=J(V=>V.hiddenSubgraphs),A=J(V=>V.toggleGroupCollapse),L=J(V=>V.setGroupCollapsed),B=J(V=>V.setGroupHidden),G=J(V=>V.bypassAllInGroup),U=J(V=>V.collapsedSubgraphs),W=J(V=>V.toggleSubgraphCollapse),ne=J(V=>V.setSubgraphCollapsed),ve=J(V=>V.setNodeFold),ae=yn(V=>V.bookmarkedNodeIds),re=b.useRef(null),R=b.useRef(null),F=b.useRef(null),pe=b.useRef(null),[xe,he]=b.useState(0),[T,I]=b.useState(!1),[E,$]=b.useState(!1),[Q,fe]=b.useState(null),[te,le]=b.useState({}),be=b.useRef(new Map),Oe=b.useRef(null),qe=b.useRef(null),ee=b.useRef(null),Te=()=>{j(""),O(!1)},Ne=b.useCallback((V,ue)=>{N(V),window.dispatchEvent(new CustomEvent("workflow-scroll-to-node",{detail:{nodeId:V,label:ue}})),y(V,ue)},[N,y]),_e=b.useCallback((V,ue)=>()=>{if(T){I(!1),$(!1),fe(null);return}he(ue),Ne(V)},[T,Ne]),lt=b.useCallback(()=>{if(T){I(!1),$(!1),fe(null);return}const V=(xe+1)%ae.length;he(V),Ne(ae[V])},[ae,xe,T,Ne]),Fe=b.useCallback(()=>{Oe.current!=null&&(window.clearTimeout(Oe.current),Oe.current=null)},[]),we=b.useCallback(()=>{const V=getComputedStyle(document.documentElement).getPropertyValue("--bottom-bar-offset"),ue=Number.parseFloat(V);return Number.isFinite(ue)?ue:0},[]),ye=b.useCallback(()=>{const V=re.current,ue=R.current;if(!V||!ue)return null;const ce=V.getBoundingClientRect().height,Ce=ue.getBoundingClientRect().height,Be=16,Ye=we()+8,Re=Math.max(Be,ce-Ce-Ye);return{minTop:Be,maxTop:Re}},[we]),Me=b.useCallback(V=>{const ue=ye();return ue?Math.min(Math.max(V,ue.minTop),ue.maxTop):V},[ye]),Le=b.useCallback((V,ue)=>{const ce=re.current,Ce=ee.current;if(!ce||!Ce)return;const Be=ce.getBoundingClientRect(),Ye=V-Be.left-Ce.x,Re=Me(ue-Be.top-Ce.y);fe({x:Ye,y:Re})},[Me]),it=b.useCallback((V,ue)=>{const ce=re.current,Ce=R.current;if(!ce||!Ce)return;const Be=Ce.getBoundingClientRect(),Ye=ce.getBoundingClientRect();ee.current={x:V-Be.left,y:ue-Be.top};const Re=Be.left-Ye.left,st=Me(Be.top-Ye.top);fe({x:Re,y:st}),$(!0)},[Me]),ht=b.useCallback(V=>{V.pointerType==="mouse"&&V.button!==0||(V.preventDefault(),qe.current={startX:V.clientX,startY:V.clientY,startTime:Date.now(),pointerId:V.pointerId},T?it(V.clientX,V.clientY):Oe.current=window.setTimeout(()=>{I(!0),it(V.clientX,V.clientY)},500),V.currentTarget.setPointerCapture(V.pointerId))},[T,it]),Ze=b.useCallback(V=>{if(E){Le(V.clientX,V.clientY);return}const ue=qe.current;if(!ue)return;const ce=V.clientX-ue.startX,Ce=V.clientY-ue.startY;Math.hypot(ce,Ce)>8&&Fe()},[Fe,E,Le]),Se=b.useCallback(()=>{const V=re.current,ue=R.current;if(!V||!ue||!Q)return;const ce=V.getBoundingClientRect(),Ce=ue.getBoundingClientRect().width,Ye=Q.x+Ce/2<ce.width/2?"left":"right",Re=Me(Q.y);m({side:Ye,top:Re}),fe(null)},[Q,Me,m]),Ae=b.useCallback(V=>{Fe();const ue=qe.current;if(qe.current=null,E){Se(),$(!1);return}if(T||!ue)return;const ce=V.clientX-ue.startX,Ce=V.clientY-ue.startY,Be=Date.now()-ue.startTime;Math.abs(ce)>40&&Math.abs(ce)>Math.abs(Ce)&&Be<500&&m({side:p==="left"?"right":"left"})},[p,Fe,Se,E,T,m]),Ke=b.useCallback(()=>{Fe(),qe.current=null,$(!1),fe(null)},[Fe]),$e=b.useMemo(()=>{if(!s)return[];const V=z1(s);return Object.keys(d).length===0?V:V.filter(ue=>!d[ue.id])},[s,d]),Qe=M.trim(),Xe=w&&Qe.length>0,vt=b.useMemo(()=>s?Fb(s):new Map,[s]),oe=b.useMemo(()=>{if(!Xe||!s)return new Set;const V=s.groups??[],ue=new Set;for(const ce of V)u0(Qe,ce.title)&&ue.add(ce.id);return ue},[s,Xe,Qe]),Pe=b.useMemo(()=>Xe?$e.filter(V=>{const ue=vt.get(V.id);if(ue!==void 0&&oe.has(ue))return!0;const ce=k?.[V.type],Ce=V.title,Be=[typeof Ce=="string"?Ce:"",ce?.display_name??"",V.type,String(V.id)];return u0(Qe,Be.join(" "))}):$e,[$e,Xe,Qe,k,vt,oe]),et=b.useMemo(()=>s?Xe?Pe.map(V=>({type:"node",node:V,groupId:null,subgraphId:null})):Yb(Pe,s,D,z,U,_):[],[s,Pe,D,z,U,_,Xe]),gt=b.useMemo(()=>{const V=new Map;let ue=0;for(const ce of $e){const Ce=S[String(ce.id)];Ce&&Ce.length>0&&(ue+=1,V.set(ce.id,ue))}return V},[$e,S]),Gt=b.useMemo(()=>{if(!s)return new Set;const V=Object.entries(i).filter(([,Re])=>Re!=="off").map(([Re,st])=>({id:Number(Re),mode:st}));if(V.length===0)return new Set;const ue=new Map(s.nodes.map(Re=>[Re.id,Re])),ce=new Set,Ce=Re=>!!d[Re.id],Be=(Re,st,pt)=>{if(st.has(Re))return[];st.add(Re);const yt=ue.get(Re);if(!yt)return[];const bt=[];return yt.outputs?.forEach((wt,xt)=>{const Dt=ii(wt.type);if(pt.size>0&&!Dt.some(wn=>pt.has(wn)))return;gi(s,Re,xt).forEach(wn=>{const ie=wn.node;Ce(ie)?bt.push(...Be(ie.id,st,pt)):bt.push(ie)})}),bt},Ye=(Re,st,pt)=>{if(st.has(Re))return[];st.add(Re);const yt=ue.get(Re);if(!yt)return[];const bt=[];return yt.inputs?.forEach((wt,xt)=>{if(wt.link===null)return;const Dt=ii(wt.type);if(pt.size>0&&!Dt.some(wn=>pt.has(wn)))return;const qt=Oo(s,Re,xt);qt&&(Ce(qt.node)?bt.push(...Ye(qt.node.id,st,pt)):bt.push(qt.node))}),bt};return V.forEach(({id:Re,mode:st})=>{const pt=ue.get(Re);pt&&((st==="inputs"||st==="both")&&pt.inputs?.forEach((yt,bt)=>{if(yt.link===null)return;const wt=Oo(s,pt.id,bt);if(!wt)return;if(!Ce(wt.node)){ce.add(wt.node.id);return}const xt=new Set(ii(yt.type));Ye(wt.node.id,new Set,xt).forEach(qt=>ce.add(qt.id))}),(st==="outputs"||st==="both")&&pt.outputs?.forEach((yt,bt)=>{const wt=new Set(ii(yt.type));gi(s,pt.id,bt).forEach(Dt=>{const qt=Dt.node;if(!Ce(qt)){ce.add(qt.id);return}Be(qt.id,new Set,wt).forEach(ie=>ce.add(ie.id))})}))}),ce},[s,i,d]);b.useEffect(()=>{const V=ue=>{const ce=ue.detail,Ce=typeof ce=="number"?ce:ce.nodeId,Be=typeof ce=="object"?ce.label:void 0;if(typeof Ce!="number"||!Pe.some(bt=>bt.id===Ce))return;const Re=gt.get(Ce),st=Be??(Re?`Error #${Re}`:"Error");le(bt=>({...bt,[Ce]:st}));const pt=be.current.get(Ce);pt&&window.clearTimeout(pt);const yt=window.setTimeout(()=>{le(bt=>{const wt={...bt};return delete wt[Ce],wt}),be.current.delete(Ce)},2e3);be.current.set(Ce,yt)};return window.addEventListener("workflow-label-error-node",V),()=>window.removeEventListener("workflow-label-error-node",V)},[Pe,gt]),b.useEffect(()=>{const V=be.current;return()=>{V.forEach(ue=>window.clearTimeout(ue)),V.clear()}},[]),b.useEffect(()=>{const V=ue=>{const ce=ue.detail,Ce=typeof ce=="number"?ce:ce.nodeId,Be=typeof ce=="object"?ce.label:void 0;if(typeof Ce!="number")return;x(Ce);const Ye=document.getElementById(`node-card-${Ce}`);Ye&&Ye.scrollIntoView({behavior:"smooth",block:"start"}),requestAnimationFrame(()=>y(Ce,Be))};return window.addEventListener("workflow-scroll-to-node",V),()=>window.removeEventListener("workflow-scroll-to-node",V)},[x,y]),b.useEffect(()=>{w&&(F.current&&F.current.scrollTo({top:0,behavior:"auto"}),requestAnimationFrame(()=>pe.current?.focus()))},[w]),b.useEffect(()=>(g(T),()=>g(!1)),[T,g]),b.useEffect(()=>{if(!ae.length)return;const V=window.requestAnimationFrame(()=>{const ue=ye();if(!ue)return;const{minTop:ce,maxTop:Ce}=ue;if(h==null)m({top:Ce});else{const Be=Math.min(Math.max(h,ce),Ce);Be!==h&&m({top:Be})}});return()=>window.cancelAnimationFrame(V)},[ae.length,h,ye,m]),b.useEffect(()=>{if(!T)return;const V=ue=>{const ce=R.current;!ce||!ue.target||ce.contains(ue.target)||(I(!1),$(!1),fe(null),Fe())};return document.addEventListener("pointerdown",V),()=>{document.removeEventListener("pointerdown",V)}},[Fe,T]);const cr=V=>{for(const ue of V){if(ue.type==="node")return ue.node.id;if(ue.type==="group"||ue.type==="subgraph"){const ce=cr(ue.children);if(ce!=null)return ce}}return null},dr=V=>{for(const ue of V){if(ue.type==="node"){if(!ue.node.flags?.collapsed)return!0;continue}if(!ue.isCollapsed||dr(ue.children))return!0}return!1},fr=b.useCallback((V,ue)=>{const ce=Ce=>{for(const Be of Ce){if(Be.type==="node"){ve(Be.node.id,ue);continue}if(Be.type==="group"){L(Be.group.id,ue),ce(Be.children);continue}ne(Be.subgraph.id,ue),ce(Be.children)}};ce(V)},[L,ve,ne]),bn=b.useCallback((V,ue)=>()=>{fr(V,ue)},[fr]),sn=(V,ue)=>V.map((ce,Ce)=>{const Be=`${ue}-${Ce}`;if(ce.type==="group"){const Ye=ce.group,Re=Vr(Ye.color,.15),st=Vr(Ye.color,.4),pt=cr(ce.children),yt=dr(ce.children),bt=yt?"Fold all":"Unfold all",wt=bn(ce.children,yt);return u.jsxs("div",{id:`group-wrapper-${ce.group.id}`,className:"group-wrapper shadow-md rounded-xl border mb-3",style:{backgroundColor:Re,borderColor:st},children:[u.jsx(X3,{group:Ye,nodeCount:ce.nodeCount,isCollapsed:ce.isCollapsed,subgraphId:ce.subgraphId,bookmarkNodeId:pt,foldAllLabel:bt,onToggleCollapse:()=>A(ce.group.id),onToggleFoldAll:wt,onBypassAll:xt=>G(ce.group.id,xt,ce.subgraphId),onHideGroup:()=>B(ce.group.id,!0)}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${ce.isCollapsed?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden px-1 transition-opacity duration-200 ease-out ${ce.isCollapsed?"opacity-0":"opacity-100"}`,children:[ce.children.length>0?sn(ce.children,Be):u.jsx(Z3,{group:ce.group}),u.jsx(P3,{group:ce.group})]})})]},`group-${ce.group.id}-${Be}`)}if(ce.type==="subgraph"){const Ye="rgba(59, 130, 246, 0.08)",Re="rgba(59, 130, 246, 0.25)";return u.jsxs("div",{className:"subgraph-wrapper shadow-md rounded-xl border mb-3",style:{backgroundColor:`var(--subgraph-bg, ${Ye})`,borderColor:`var(--subgraph-border, ${Re})`,"--subgraph-bg":Ye,"--subgraph-border":Re},children:[u.jsx(K3,{subgraph:ce.subgraph,nodeCount:ce.nodeCount,isCollapsed:ce.isCollapsed,onToggleCollapse:()=>W(ce.subgraph.id)}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${ce.isCollapsed?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden px-1 transition-opacity duration-200 ease-out ${ce.isCollapsed?"opacity-0":"opacity-100"}`,children:[ce.children.length>0&&sn(ce.children,Be),u.jsx(t5,{subgraph:ce.subgraph})]})})]},`subgraph-${ce.subgraph.id}-${Be}`)}return u.jsx("div",{id:`node-card-${ce.node.id}`,children:u.jsx($3,{node:ce.node,isExecuting:o===String(ce.node.id),isConnectionHighlighted:Gt.has(ce.node.id),errorBadgeLabel:te[ce.node.id]??null,onImageClick:l})},`node-${ce.node.id}-${Be}`)});let hn;s?$e.length===0?hn=u.jsx("div",{id:"node-list-empty",className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{id:"empty-workflow-content",className:"text-center p-8",children:[u.jsx("div",{id:"empty-workflow-icon-container",className:"flex items-center justify-center mb-4",children:u.jsx($1,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{id:"empty-workflow-title",className:"text-lg font-medium",children:"Empty workflow"}),u.jsx("p",{id:"empty-workflow-description",className:"text-sm mt-2",children:"This workflow has no nodes"})]})}):hn=u.jsxs("div",{id:"node-list-shell",className:"h-full flex flex-col",children:[w&&u.jsx("div",{className:"node-search-bar px-1 pt-3",children:u.jsxs("div",{className:"flex items-center gap-2 bg-white border border-gray-200 rounded-xl px-3 py-2 shadow-sm",children:[u.jsx("input",{ref:pe,value:M,onChange:V=>j(V.target.value),placeholder:"Search nodes...",className:"comfy-input p-3 flex-1 text-sm text-gray-900 outline-none placeholder:text-gray-400"}),u.jsx("button",{type:"button",onClick:Te,className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:u.jsx(zo,{className:"w-4 h-4"})})]})}),u.jsx("div",{id:"node-list-container",ref:F,className:"flex-1 overflow-auto px-4 pt-4 overscroll-contain scroll-container",style:{paddingBottom:"10rem"},"data-node-list":"true",children:et.length===0?u.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{className:"text-center p-8",children:[u.jsx("p",{className:"text-sm font-medium",children:"No matching nodes"}),u.jsx("p",{className:"text-xs mt-2",children:"Try a different search."})]})}):u.jsx("div",{id:"node-list-inner",children:sn(et,"root")})})]}):hn=u.jsx("div",{id:"node-list-no-workflow",className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{id:"no-workflow-content",className:"text-center p-8",children:[u.jsx("div",{id:"no-workflow-icon-container",className:"flex items-center justify-center mb-4",children:u.jsx(W1,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{id:"no-workflow-title",className:"text-lg font-medium",children:"No workflow loaded"}),u.jsx("p",{id:"no-workflow-description",className:"text-sm mt-2",children:"Open the menu to load a workflow"})]})});const gn=Q?.y??h??0,$n=Q?`${Q.x}px`:p==="left"?"0.75rem":void 0,ke=Q?void 0:p==="right"?"0.75rem":void 0,ze={top:`${gn}px`,left:$n,right:ke,opacity:h==null&&Q==null?0:1,touchAction:T?"none":"pan-y",pointerEvents:h==null&&Q==null?"none":"auto"};return u.jsxs("div",{id:"node-list-wrapper",ref:re,className:"absolute inset-x-0 top-[60px] bottom-0 bg-gray-100",style:{display:r?"block":"none"},children:[hn,ae.length>0&&u.jsx("div",{ref:R,className:`absolute z-[200] flex flex-col items-center gap-2 pointer-events-auto ${T?"rounded-2xl ring-2 ring-blue-400/70 bg-white/30 shadow-lg":""}`,style:ze,onPointerDown:ht,onPointerMove:Ze,onPointerUp:Ae,onPointerCancel:Ke,children:u.jsxs("div",{className:`flex flex-col items-center gap-2 ${T?"p-2 cursor-grab":""}`,children:[ae.map((V,ue)=>u.jsx("button",{type:"button",className:"w-10 h-10 rounded-full border border-transparent bg-gray-900/10 text-[11px] font-bold text-gray-800 shadow-sm backdrop-blur-sm dark:bg-white/10 dark:text-gray-100 select-none",onClick:_e(V,ue),children:V},V)),ae.length>1&&u.jsx("button",{type:"button",className:"w-10 h-10 rounded-full border border-transparent bg-gray-900/10 text-gray-600 shadow-sm backdrop-blur-sm flex items-center justify-center dark:bg-white/10 dark:text-gray-200 select-none","aria-label":"Cycle bookmarks",onClick:lt,children:u.jsx(Wn,{className:"w-4 h-4"})})]})})]})}function l5(){const r=Ln(E=>E.currentPanel),l=Un(E=>E.viewerOpen),s=J(E=>E.workflow),o=J(E=>E.isExecuting),i=J(E=>E.progress),d=J(E=>E.executingNodeId),p=J(E=>E.executingPromptId),h=J(E=>E.workflowDurationStats),m=Zt(E=>E.error),g=Zt(E=>E.nodeErrors),x=Zt(E=>E.errorsDismissed),y=Zt(E=>E.setErrorsDismissed),N=J(E=>E.scrollToNode),k=Zt(E=>E.errorCycleIndex),S=Zt(E=>E.setErrorCycleIndex),w=J(E=>E.revealNodeWithParents),M=J(E=>E.nodeTypes),j=rt(E=>E.running),[O,D]=b.useState(null),A=!(r==="queue")&&!(r==="outputs")&&!l,L=Object.values(g).reduce((E,$)=>E+$.length,0),B=L>0,G=!!m?.startsWith("Workflow load error")||B,U=G?"Workflow load error":"Prompt error",W=G&&m?m.replace(/^Workflow load error:\s*/i,""):m??(B?`${L} inputs reference missing options.`:null),ne=(!!m||B)&&!x,ve=b.useMemo(()=>{if(!s||!d)return null;const E=s.nodes.find(Q=>String(Q.id)===d);return E?M?.[E.type]?.display_name||E.type:`Node ${d}`},[s,d,M]),ae=p||(j[0]?.prompt_id??null),re=Ho({workflow:s,runKey:ae,isRunning:o||j.length>0,workflowDurationStats:h}),R=re===100?100:i,F=()=>{if(!s||!B)return;const E=s.nodes.filter(te=>g[String(te.id)]?.length).map(te=>te.id);if(E.length===0)return;const $=k%E.length,Q=E[$],fe=`Error #${$+1}`;w(Q),S(($+1)%E.length),window.dispatchEvent(new CustomEvent("workflow-label-error-node",{detail:{nodeId:Q,label:fe}})),window.dispatchEvent(new CustomEvent("workflow-scroll-to-node",{detail:{nodeId:Q,label:fe}})),N(Q,fe)},pe=E=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),F())},xe=E=>{E.stopPropagation()},he=E=>{E.stopPropagation(),y(!0)},T=()=>{ae&&D(ae)},I=O!==null&&O===ae;return A?u.jsxs("div",{id:"bottom-status-overlay",className:"fixed inset-x-0 bottom-20 z-[2000] flex flex-col items-center gap-3 pointer-events-none",children:[ne&&u.jsxs("div",{id:"error-notification-wrapper",className:"relative pointer-events-auto",children:[u.jsx("div",{id:"error-notification-toast",className:"bg-red-100 text-red-900 rounded-xl shadow-lg px-4 py-3 w-[70vw] max-w-sm",role:"button",tabIndex:0,onClick:F,onKeyDown:pe,children:u.jsx("div",{className:"error-toast-content flex items-start justify-between gap-3",children:u.jsxs("div",{className:"error-text-container pr-16",children:[u.jsx("div",{className:"error-title text-sm font-semibold text-red-800",children:U}),u.jsx("div",{className:"error-message mt-1 text-xs text-red-800 break-words",children:W})]})})}),u.jsx("button",{id:"error-dismiss-button",type:"button","aria-label":"Dismiss error",className:"absolute top-3 right-3 shrink-0 px-3 py-1 text-xs font-semibold bg-red-700 text-white rounded-full z-10",onPointerDown:xe,onClick:he,children:"Dismiss"})]}),re!==null&&!I&&u.jsxs("div",{id:"execution-progress-card",className:"relative bg-white border border-gray-200 rounded-xl shadow-lg px-4 py-2 w-[70vw] max-w-sm pointer-events-auto",children:[u.jsx("button",{type:"button","aria-label":"Dismiss progress",className:"absolute top-2 right-2 w-7 h-7 rounded-full flex items-center justify-center text-gray-400 hover:text-gray-600",onClick:T,children:u.jsx(zo,{className:"w-4 h-4"})}),u.jsx("div",{className:"executing-node-name text-sm font-semibold text-gray-900",children:ve||"Running"}),u.jsxs("div",{className:"node-progress-info mt-2 flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[R,"%"]})]}),u.jsx("div",{className:"node-progress-track mt-1 h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"node-progress-bar h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,R))}%`}})}),re!==null&&u.jsxs("div",{className:"overall-progress-container",children:[u.jsxs("div",{className:"overall-progress-info mt-3 flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[re,"%"]})]}),u.jsx("div",{className:"overall-progress-track mt-1 h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"overall-progress-bar h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,re))}%`}})})]})]})]}):null}function a5({viewerOpen:r,followQueue:l,queueSize:s,overallProgress:o,onToggleFollowQueue:i,onOpenFollowQueue:d}){const p=b.useCallback(()=>{r?i?.():d?.()},[r,i,d]),h=b.useMemo(()=>r?l?"Disable follow queue":"Enable follow queue":"Open image viewer",[r,l]),m=b.useMemo(()=>r&&l?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200",[r,l]);return u.jsxs("button",{onClick:p,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${m}`,"aria-label":h,children:[u.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx(_0,{className:"w-6 h-6",showSlash:r&&!l})}),s>0&&u.jsxs("div",{className:`queue-badge absolute top-0 right-0 translate-x-[18px] -translate-y-[18px] w-6 h-6 rounded-full bg-blue-500 text-white
                     flex items-center justify-center font-bold text-xs border-2 border-white relative z-20`,children:[o!==null&&u.jsx(nb,{className:"absolute z-10 pointer-events-none",width:"24",height:"24",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-90deg)"},progress:o}),s]})]})}function o5(){const r=J(p=>p.workflow),l=Gn(p=>p.pinnedWidget),s=Gn(p=>p.pinOverlayOpen),o=Gn(p=>p.togglePinOverlay),i=J(p=>p.updateNodeWidget),d=b.useMemo(()=>{if(!l||!r)return;const p=r.nodes.find(h=>h.id===l.nodeId);if(p)return ko(p,l.widgetName,l.widgetIndex)},[l,r]);return!s||!l?null:u.jsx("div",{id:"pin-overlay-hidden-anchor",className:"hidden",children:u.jsx(ir,{name:l.widgetName,type:l.widgetType,value:d,options:l.options,onChange:p=>i(l.nodeId,l.widgetIndex,p,l.widgetName),hideLabel:!0,compact:!0,forceModalOpen:!0,onModalClose:o})})}function s5(){const r=_t(l=>l.setFilterModalOpen);return u.jsx("button",{onClick:()=>r(!0),className:"relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors bg-gray-100 text-gray-700 hover:bg-gray-200","aria-label":"Filter and sort",children:u.jsx(q1,{className:"w-6 h-6"})})}function i5(){const r=_t(o=>o.selectedIds.length),l=_t(o=>o.setSelectionActionOpen),s=r===0;return u.jsx("button",{onClick:()=>l(!0),disabled:s,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,"aria-label":"Selection actions",children:u.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shadow-sm ${s?"border-gray-300 bg-transparent":"bg-blue-600 border-blue-600 text-white"}`,children:!s&&u.jsx(Il,{className:"w-4 h-4"})})})}function u5(){return _t(l=>l.selectionMode)?u.jsx(i5,{}):u.jsx(s5,{})}function c5(){const r=Gn(o=>o.pinnedWidget),l=Gn(o=>o.pinOverlayOpen),s=Gn(o=>o.togglePinOverlay);return r?u.jsx("button",{onClick:s,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${l?"bg-fuchsia-500 text-white":"bg-gray-100 text-fuchsia-500 hover:bg-gray-200"}`,"aria-label":l?"Close pin editor":"Open pin editor",children:u.jsx(To,{className:"w-6 h-6"})}):null}function d5(){const r=J(d=>d.workflow),l=J(d=>d.runCount),s=J(d=>d.queueWorkflow),o=r!==null,i=()=>{o&&(s(l),"vibrate"in navigator&&navigator.vibrate(20))};return u.jsx("button",{onClick:i,disabled:!o,className:"flex-1 py-3 px-6 rounded-xl font-semibold text-lg min-h-[48px] transition-all "+(o?"bg-blue-500 text-white active:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Run"})}function f5(){const r=J(i=>i.runCount),l=J(i=>i.setRunCount),s=()=>{l(r-1)},o=()=>{l(r+1)};return u.jsxs("div",{id:"run-count-selector",className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[u.jsx("button",{onClick:s,disabled:r<=1,className:`w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center
                   text-lg font-medium text-gray-700 disabled:opacity-40 disabled:shadow-none`,children:""}),u.jsx("span",{className:"w-8 text-center font-semibold text-gray-900",children:r}),u.jsx("button",{onClick:o,className:`w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center
                   text-lg font-medium text-gray-700`,children:"+"})]})}function p5(r){const{currentPanel:l,viewerOpen:s=!1,followQueue:o=!1,onToggleFollowQueue:i,onOpenFollowQueue:d}=r,p=l==="outputs",h=J(j=>j.workflow),m=J(j=>j.isExecuting),g=J(j=>j.executingPromptId),x=J(j=>j.workflowDurationStats),y=rt(j=>j.pending),N=rt(j=>j.running),k=b.useRef(null),S=y.length+N.length,w=g||(N[0]?.prompt_id??null),M=Ho({workflow:h,runKey:w,isRunning:m||N.length>0,workflowDurationStats:x});return b.useEffect(()=>{const j=k.current;if(!j)return;const O=()=>{const D=j.getBoundingClientRect();document.documentElement.style.setProperty("--bottom-bar-offset",`${D.height}px`)};return O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]),u.jsxs("div",{id:"bottom-bar-root",ref:k,className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg safe-area-bottom z-[2200]",children:[u.jsxs("div",{id:"bottom-bar-content",className:"flex items-center gap-3 px-3 py-2 max-w-lg mx-auto",children:[u.jsx(f5,{}),u.jsx(d5,{}),p&&u.jsx(u5,{}),!p&&u.jsx(c5,{}),u.jsx(a5,{viewerOpen:s,followQueue:o,queueSize:S,overallProgress:M,onToggleFollowQueue:i,onOpenFollowQueue:d})]}),u.jsx(o5,{}),u.jsx(l5,{})]})}const c0=r=>Symbol.iterator in r,d0=r=>"entries"in r,f0=(r,l)=>{const s=r instanceof Map?r:new Map(r.entries()),o=l instanceof Map?l:new Map(l.entries());if(s.size!==o.size)return!1;for(const[i,d]of s)if(!o.has(i)||!Object.is(d,o.get(i)))return!1;return!0},m5=(r,l)=>{const s=r[Symbol.iterator](),o=l[Symbol.iterator]();let i=s.next(),d=o.next();for(;!i.done&&!d.done;){if(!Object.is(i.value,d.value))return!1;i=s.next(),d=o.next()}return!!i.done&&!!d.done};function h5(r,l){return Object.is(r,l)?!0:typeof r!="object"||r===null||typeof l!="object"||l===null||Object.getPrototypeOf(r)!==Object.getPrototypeOf(l)?!1:c0(r)&&c0(l)?d0(r)&&d0(l)?f0(r,l):m5(r,l):f0({entries:()=>Object.entries(r)},{entries:()=>Object.entries(l)})}function g5(r){const l=Sa.useRef(void 0);return s=>{const o=r(s);return h5(l.current,o)?l.current:l.current=o}}function hd(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}function kx(r){return Array.isArray(r)&&r.length>=2&&(typeof r[0]=="string"||typeof r[0]=="number")&&typeof r[1]=="number"}function Ui(r){return r.class_type??r.type??null}function ff(r,l){for(const s of l){const o=r.inputs?.[s];if(!kx(o)&&o!==void 0)return o}}function ja(r,l){const s=ff(r,l);if(s!=null)return typeof s=="string"?s:String(s)}function gd(r,l){if(!kx(l))return null;const s=String(l[0]);return r[s]??null}function x5(r){if(!r)return;const l=ja(r,["sampler_name","sampler","name"]);if(l)return l;if(Ui(r)==="KSamplerSelect"&&Array.isArray(r.widgets_values)){const o=r.widgets_values[0];return o==null?void 0:String(o)}}function v5(r){if(!r)return;const l=ja(r,["scheduler","scheduler_name","name"]);if(l)return l;if(Ui(r)==="BasicScheduler"&&Array.isArray(r.widgets_values)){const o=r.widgets_values[0];return o==null?void 0:String(o)}}function y5(r){if(!r)return;const l=ff(r,["steps","step_count"]);if(l!==void 0)return l;if(Ui(r)==="BasicScheduler"&&Array.isArray(r.widgets_values)){const o=r.widgets_values[1];return o??void 0}}function b5(r){if(!r)return;const l=ff(r,["cfg","guidance","guidance_scale"]);if(l!==void 0)return l;if(Array.isArray(r.widgets_values)){const s=r.widgets_values[0];return s??void 0}}function pf(r){const l={};if(!hd(r)&&!Array.isArray(r))return l;let s=null;if(Array.isArray(r)&&r.length>=3&&hd(r[2])?s=r[2]:hd(r)&&(s=r),!s)return l;const i=Object.entries(s).sort((d,p)=>Number(d[0])-Number(p[0])).map(([,d])=>d);for(const d of i){const p=Ui(d);if(p){if(p==="CheckpointLoaderSimple"||p==="CheckpointLoader"){const h=d.inputs?.ckpt_name;typeof h=="string"?l.model=h.replace(/\.(safetensors|ckpt|pt)$/i,""):h!=null&&(l.model=String(h).replace(/\.(safetensors|ckpt|pt)$/i,""))}if(p==="KSampler"||p==="KSamplerAdvanced"){if(l.steps===void 0&&d.inputs?.steps!==void 0&&(l.steps=d.inputs.steps),l.cfg===void 0&&d.inputs?.cfg!==void 0&&(l.cfg=d.inputs.cfg),l.sampler===void 0){const h=ja(d,["sampler_name"]);h&&(l.sampler=h)}if(l.scheduler===void 0){const h=ja(d,["scheduler"]);h&&(l.scheduler=h)}}if(p==="SamplerCustom"||p==="SamplerCustomAdvanced"){if(l.steps===void 0&&d.inputs?.steps!==void 0&&(l.steps=d.inputs.steps),l.cfg===void 0&&d.inputs?.cfg!==void 0&&(l.cfg=d.inputs.cfg),l.sampler===void 0){const h=ja(d,["sampler","sampler_name"]),m=gd(s,d.inputs?.sampler),g=h??x5(m);g&&(l.sampler=g)}if(l.scheduler===void 0){const h=ja(d,["scheduler","scheduler_name"]),m=gd(s,d.inputs?.sigmas??d.inputs?.scheduler),g=h??v5(m);g&&(l.scheduler=g)}if(l.steps===void 0){const h=gd(s,d.inputs?.sigmas??d.inputs?.scheduler),m=y5(h);m!==void 0&&(l.steps=m)}}if(p==="FluxGuidance"&&l.cfg===void 0){const h=b5(d);h!==void 0&&(l.cfg=h)}}}return l}function mf(r,l={}){const{onlyOutput:s=!1,alt:o}=l,i=[];return r.forEach((d,p)=>{const h=d.outputs?.images??[],m=pf(d.prompt),g=d.durationSeconds,x=d.success!==!1;h.forEach((y,N)=>{if(s&&y.type!=="output")return;const k=typeof o=="function"?o(N,p):o,S=y.subfolder?`${y.subfolder}/${y.filename}`:y.filename,w=Vo(y.filename),M=w==="video"?"video":"image";i.push({src:qn(y.filename,y.subfolder,y.type),alt:k,mediaType:w,metadata:m,durationSeconds:g,success:x,filename:y.filename,file:{id:`${y.type}/${S}`,name:y.filename,type:M,fullUrl:qn(y.filename,y.subfolder,y.type)}})})}),i}function w5({menuState:r,unifiedList:l,onClose:s,onLoadWorkflow:o,onCopyWorkflow:i,onDownload:d,onBatchDownload:p,onDeleteHistory:h,getBatchSources:m}){const g=r?.promptId??"",x=rt(j=>j.queueItemHideImages[g]),y=rt(j=>j.toggleQueueItemHideImages),N=()=>{r?.workflow&&r.promptId&&o(r.workflow,r.promptId),s()},k=()=>{i(r?.workflow),s()},S=async()=>{const j=r?.promptId?m(r.promptId,l):[];j.length>1?await p(j):r&&await d(r.imageSrc),s()},w=()=>{y(g),s()},M=()=>{r?.promptId&&h(r.promptId),s()};return r?.open?rr.createPortal(u.jsxs("div",{id:"queue-image-menu",className:"fixed z-[1200] bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden w-44",style:{top:r.top,right:r.right},children:[u.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${r.workflow?"":"opacity-50 cursor-not-allowed"}`,onClick:N,disabled:!r.workflow,children:[u.jsx(Oa,{className:"w-4 h-4 text-gray-500"}),"Load workflow"]}),u.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${r.workflow?"":"opacity-50 cursor-not-allowed"}`,onClick:k,disabled:!r.workflow,children:[u.jsx(K1,{className:"w-4 h-4 text-gray-500"}),"Copy workflow"]}),u.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:S,children:[u.jsx(J1,{className:"w-4 h-4 text-gray-500"}),r.promptId&&m(r.promptId,l).length>1?"Download batch":"Download"]}),r.hasVideoOutputs&&r.hasImageOutputs&&r.promptId&&u.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:w,children:[x?u.jsx(zl,{className:"w-4 h-4 text-gray-500"}):u.jsx(ur,{className:"w-4 h-4 text-gray-500"}),x?"Show images":"Hide images"]}),u.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50",onClick:M,children:[u.jsx(Hr,{className:"w-4 h-4"}),"Delete"]})]}),document.body):null}function S5({message:r}){return r?rr.createPortal(u.jsx("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-[1300] bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg text-sm font-medium animate-in fade-in slide-in-from-top-2 duration-200",children:r}),document.body):null}function Mx(r){return"outputs"in r}function N5(r,l){const s=l.find(i=>i.id===r);return!s||s.status!=="done"?[]:Mx(s.data)?(s.data.outputs.images??[]).filter(i=>i.type==="output").map(i=>qn(i.filename,i.subfolder,i.type)):[]}async function Ox(r,l="image.png",s){try{const i=await(await fetch(r)).blob(),d=URL.createObjectURL(i),p=document.createElement("a");p.href=d,p.download=l,document.body.appendChild(p),p.click(),p.remove(),URL.revokeObjectURL(d),s?.(r)}catch(o){console.error("Failed to download image:",o)}}async function j5(r,l){for(const s of r)await Ox(s,"image.png",l)}async function C5(r){try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(r);else{const l=document.createElement("textarea");l.value=r,l.style.position="fixed",l.style.opacity="0",document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l)}return!0}catch(l){return console.error("Failed to copy to clipboard:",l),!1}}function k5({item:r,isActuallyRunning:l,progress:s,overallProgress:o,executingNodeLabel:i,onDelete:d,onStop:p,onImageClick:h,viewerImages:m,runningImages:g,onOpenMenu:x,downloaded:y,isTopDoneItem:N}){const k=rt(we=>we.previewVisibility),S=rt(we=>we.previewVisibilityDefault),w=rt(we=>we.showQueueMetadata),M=rt(we=>we.queueItemExpanded[r.id]),j=rt(we=>we.setQueueItemExpanded),O=rt(we=>we.queueItemHideImages[r.id]),D=b.useRef(new Map),z=b.useRef(new Set),[_,A]=b.useState(new Set),L=r.status==="pending"&&!l,B=r.status==="running"||l,G=r.status==="done",U=M!==void 0,W=U?M:!1,ne=b.useRef(G);b.useEffect(()=>{U||j(r.id,!1)},[U,r.id,j]),b.useEffect(()=>{!ne.current&&G&&j(r.id,!0),ne.current=G},[G,r.id,j]),b.useEffect(()=>{z.current.clear(),A(new Set)},[r.id]);const ve=()=>{j(r.id,!W)},ae=G&&Mx(r.data)?r.data:null,re=b.useMemo(()=>ae?ae.outputs.images:B?g:[],[ae,B,g]),R=!!(r.data.prompt_id?k[r.data.prompt_id]??S:S),{savedImages:F,displayImages:pe}=b.useMemo(()=>{const we=re.filter(Le=>Le.type==="output"),ye=re.filter(Le=>Le.type!=="output"),Me=R||we.length===0&&ye.length>0;return{savedImages:we,displayImages:Me?[...we,...ye]:we}},[R,re]),xe=b.useMemo(()=>re.some(we=>wa(we.filename)),[re]),he=b.useMemo(()=>re.some(we=>!wa(we.filename)),[re]),T=b.useMemo(()=>!O||!xe?pe:pe.filter(we=>wa(we.filename)),[pe,xe,O]),I=F.map(we=>({src:qn(we.filename,we.subfolder,we.type),alt:"Generation"})),E="aspect-square w-full bg-gray-100 flex flex-col items-center justify-center text-gray-400",$=ae?.durationSeconds,Q=ae?ae.success!==!1:!0,fe=M5($),te=o===100?100:s,le=b.useMemo(()=>!w||!r.data.prompt?null:pf(r.data.prompt),[w,r.data.prompt]),be=b.useMemo(()=>B?T.map(we=>({src:qn(we.filename,we.subfolder,we.type),alt:"Generation",mediaType:Vo(we.filename)})):m,[B,m,T]);b.useEffect(()=>{W&&T.forEach(we=>{if(!wa(we.filename))return;const ye=qn(we.filename,we.subfolder,we.type);if(z.current.has(ye))return;z.current.add(ye);const Me=D.current.get(ye);if(!Me)return;Me.currentTime=0,A(it=>{const ht=new Set(it);return ht.delete(ye),ht});const Le=Me.play();Le&&typeof Le.catch=="function"&&Le.catch(()=>{})})},[W,T]);const Oe=we=>{we.stopPropagation(),ve()},qe=we=>{we.stopPropagation(),p()},ee=we=>{we.stopPropagation(),d()},Te=we=>{we.stopPropagation();const ye=we.currentTarget.getBoundingClientRect(),Me=Math.max(8,window.innerWidth-ye.right),Le=I[0]?.src||"";x({top:ye.bottom+6,right:Me,imageSrc:Le,workflow:ae?.workflow,promptId:r.data.prompt_id||r.id,hasVideoOutputs:xe,hasImageOutputs:he})},Ne=we=>()=>{A(ye=>new Set(ye).add(we))},_e=we=>()=>{A(ye=>{const Me=new Set(ye);return Me.delete(we),Me})},lt=(we,ye,Me)=>()=>{const Le=be.findIndex(it=>it.src===we);h?.(be,Le>=0?Le:ye,Me)},Fe=we=>ye=>{ye.stopPropagation();const Me=D.current.get(we);if(!Me)return;Me.currentTime=0;const Le=Me.play();Le&&typeof Le.catch=="function"&&Le.catch(()=>{})};return u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden transition-all duration-300",children:[u.jsxs("div",{onClick:ve,className:`px-3 py-2 border-b flex justify-between items-center cursor-pointer select-none ${B?"bg-blue-50 border-blue-100":"bg-gray-50 border-gray-100"}`,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[u.jsx("button",{onClick:Oe,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-400 hover:text-gray-600 shrink-0",children:W?u.jsx(Wn,{className:"w-6 h-6"}):u.jsx(Bl,{className:"w-6 h-6"})}),B&&u.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),L&&u.jsx("span",{className:"text-xs font-bold text-gray-400",children:"PENDING"}),B&&u.jsx("span",{className:"text-xs font-bold text-blue-600",children:"GENERATING"}),G&&u.jsx("span",{className:"text-xs font-bold text-gray-500",children:new Date(r.timestamp||0).toLocaleTimeString()}),B&&!W&&l&&o!=null&&u.jsxs("span",{className:"ml-1 text-xs font-semibold text-blue-600",children:[Math.min(100,Math.max(0,o)),"%"]})]}),u.jsx("div",{className:"flex items-center gap-2",children:B?u.jsx("button",{onClick:qe,className:"px-2 py-1 text-xs font-semibold text-white bg-red-600 rounded hover:bg-red-700",children:"Stop"}):G?u.jsx("button",{className:"w-7 h-7 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent",onClick:Te,"aria-label":"Image options",children:u.jsx(vl,{className:"w-4 h-4 -rotate-90"})}):u.jsx("button",{onClick:ee,className:"text-gray-400 hover:text-red-500 px-2",title:L?"Remove from Queue":"Delete from History","aria-label":L?"Remove from Queue":"Delete from History",children:u.jsx(zo,{className:"w-4 h-4"})})})]}),W&&u.jsx("div",{className:"relative w-full animate-in fade-in duration-200",children:T.length>0?u.jsx("div",{className:"flex flex-col",children:(()=>{let we=0,ye=0;return T.map((Me,Le)=>{const it=Me.type!=="output",ht=it?++ye:++we,Ze=`${it?"Preview":"Save"} #${ht}`,Se=qn(Me.filename,Me.subfolder,Me.type),Ae=y[Se],Ke=T.length>1;return u.jsxs("div",{className:"relative",children:[fe&&u.jsxs("div",{className:`absolute top-2 left-2 flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold ${Q?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:[Q?u.jsx(Il,{className:"w-3.5 h-3.5"}):u.jsx(Q1,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:fe})]}),wa(Me.filename)?u.jsxs(u.Fragment,{children:[u.jsx("video",{src:Se,className:"w-full h-auto block",muted:!0,playsInline:!0,preload:"metadata",ref:$e=>{$e?D.current.set(Se,$e):D.current.delete(Se)},onEnded:Ne(Se),onPlay:_e(Se),onClick:lt(Se,Le,N)}),_.has(Se)&&u.jsx("button",{type:"button",className:"absolute inset-0 flex items-center justify-center bg-black/35 text-white",onClick:Fe(Se),"aria-label":"Replay video",children:u.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-black/60 text-2xl",children:""})})]}):u.jsx("img",{src:Se,alt:"Generation",className:"w-full h-auto block",loading:"lazy",onClick:lt(Se,Le,N)}),Ae&&u.jsx("div",{className:"absolute bottom-2 right-2 w-7 h-7 rounded-full bg-black/60 text-white flex items-center justify-center",children:u.jsx(X1,{className:"w-4 h-4"})}),Ke&&u.jsx("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/60 text-white text-xs font-medium rounded backdrop-blur-sm shadow-sm pointer-events-none",children:Ze}),le&&u.jsxs("div",{className:`absolute right-2 flex flex-col-reverse items-end gap-1 pointer-events-none ${Ae?"bottom-10":"bottom-2"}`,children:[le.model&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["model: ",le.model]}),le.sampler&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["sampler: ",le.sampler]}),le.steps&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["steps: ",le.steps]}),le.cfg&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["cfg: ",le.cfg]})]})]},Le)})})()}):G?u.jsx("div",{className:E,children:u.jsx("span",{className:"text-sm",children:"No images saved"})}):B?u.jsx("div",{className:E,style:{minHeight:"300px"},children:l&&o!=null?u.jsxs("div",{className:"w-full max-w-xs px-4",children:[u.jsxs("p",{className:"font-semibold text-base text-gray-900 mb-3",children:["Executing: ",i||"Running"]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[te,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,te))}%`}})}),u.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500 mb-1",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[o,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,o))}%`}})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),u.jsx("p",{className:"font-medium text-lg text-blue-600",children:"Generating..."})]})}):u.jsxs("div",{className:E,style:{minHeight:"100px"},children:[u.jsx(vb,{className:"w-8 h-8 text-gray-300"}),u.jsx("span",{className:"text-xs mt-2 opacity-40",children:"Waiting to start..."})]})})]})}function M5(r){const l=r===void 0||Number.isNaN(r)?0:r;return l<10?`${l.toFixed(1)}s`:`${Math.round(l)}s`}function O5({listRef:r,unifiedList:l,visibleCount:s,hasLoadedOnce:o,effectiveExecutingId:i,progress:d,overallProgress:p,executingNodeLabel:h,onDeleteItem:m,onStop:g,onImageClick:x,viewerImages:y,promptOutputs:N,onOpenMenu:k,downloaded:S,firstDoneItemId:w,onScroll:M}){return u.jsxs("div",{ref:r,className:"flex-1 overflow-y-auto p-4 space-y-4 overscroll-contain scroll-container","data-queue-list":"true",onScroll:M,children:[l.length===0&&!o&&u.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-180px)] text-gray-400",children:u.jsxs("div",{className:"text-center",children:[u.jsx(Kd,{size:"lg",color:"gray",className:"mx-auto mb-4"}),u.jsx("p",{className:"text-lg",children:"Loading..."})]})}),l.length===0&&o&&u.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-180px)] text-gray-500",children:u.jsxs("div",{className:"text-center p-8",children:[u.jsx("div",{className:"flex items-center justify-center mb-4",children:u.jsx(Y1,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{className:"text-lg font-medium",children:"Queue is empty"}),u.jsx("p",{className:"text-sm mt-2",children:"Run a workflow to see items here"})]})}),l.slice(0,s).map(j=>u.jsx(k5,{item:j,isActuallyRunning:j.id===i,progress:d,overallProgress:p,executingNodeLabel:h,onDelete:()=>m(j),onStop:g,onImageClick:x,viewerImages:y,runningImages:N[j.id]??[],onOpenMenu:k,downloaded:S,isTopDoneItem:j.id===w},j.id)),u.jsx("div",{className:"h-20"})]})}function E5(r,l,s){b.useEffect(()=>{if(!r)return;const o=()=>l(),i=d=>{const p=d.target,h=document.getElementById(s);h&&p&&h.contains(p)||l()};return document.addEventListener("scroll",o,!0),document.addEventListener("mousedown",i),()=>{document.removeEventListener("scroll",o,!0),document.removeEventListener("mousedown",i)}},[r,l,s])}function T5({visible:r,onImageClick:l}){const s=rt(ee=>ee.running),o=rt(ee=>ee.pending),i=rt(ee=>ee.fetchQueue),d=rt(ee=>ee.deleteItem),p=rt(ee=>ee.interrupt),h=J(ee=>ee.loadWorkflow),m=Ln(ee=>ee.setCurrentPanel),g=J(ee=>ee.workflow),x=J(ee=>ee.nodeTypes),y=J(ee=>ee.executingNodeId),N=J(ee=>ee.workflowDurationStats),k=J(ee=>ee.promptOutputs),S=_n(ee=>ee.history),w=_n(ee=>ee.fetchHistory),M=_n(ee=>ee.deleteItem),{isExecuting:j,progress:O,executingPromptId:D}=J(g5(ee=>({isExecuting:ee.isExecuting,progress:ee.progress,executingPromptId:ee.executingPromptId}))),z=D||(s.length===1?s[0].prompt_id:null),_=b.useMemo(()=>{if(!g||!y)return null;const ee=g.nodes.find(Ne=>String(Ne.id)===y);return ee?x?.[ee.type]?.display_name||ee.type:`Node ${y}`},[g,y,x]),A=Ho({workflow:g,runKey:D||z,isRunning:j||!!z,workflowDurationStats:N}),[L,B]=b.useState(null),[G,U]=b.useState({}),[W,ne]=b.useState(null),[ve,ae]=b.useState(!1),[re,R]=b.useState(0),F=b.useRef(null),pe=b.useRef(0),xe=b.useRef(!1),he=b.useRef(!1);b.useEffect(()=>{r&&(xe.current||he.current&&F.current&&(F.current.scrollTop=0),Promise.all([i(),w()]).then(()=>{ae(!0)})),xe.current=r,he.current||(he.current=!0)},[r,i,w]),b.useEffect(()=>{!j&&r&&w()},[j,r,w]),E5(!!L?.open,()=>B(null),"queue-image-menu");const T=async ee=>{if(!ee)return;const Te=JSON.stringify(ee,null,2),Ne=await C5(Te);ne(Ne?"Copied to clipboard":"Failed to copy"),setTimeout(()=>ne(null),2e3)},I=async ee=>{await Ox(ee,"image.png",Te=>{U(Ne=>({...Ne,[Te]:!0}))})},E=b.useMemo(()=>{const ee={};S.forEach(Ne=>{ee[Ne.prompt_id]={id:Ne.prompt_id,status:"done",data:Ne,timestamp:Ne.timestamp}}),s.forEach(Ne=>{ee[Ne.prompt_id]||(ee[Ne.prompt_id]={id:Ne.prompt_id,status:"running",data:Ne})}),o.forEach(Ne=>{ee[Ne.prompt_id]||(ee[Ne.prompt_id]={id:Ne.prompt_id,status:"pending",data:Ne})}),D&&ee[D]&&(ee[D].status="running");const Te=Object.values(ee);return Te.sort((Ne,_e)=>{const lt={pending:0,running:1,done:2};if(lt[Ne.status]!==lt[_e.status])return lt[Ne.status]-lt[_e.status];if(Ne.status==="pending"){const Fe=Ne.data.number;return _e.data.number-Fe}return Ne.status==="done"?(_e.timestamp||0)-(Ne.timestamp||0):0}),Te},[o,s,S,D]),$=b.useMemo(()=>{if(E.length===0)return 0;const ee=E.filter(lt=>lt.status==="pending").length,Te=E.filter(lt=>lt.status==="running").length,_e=E.filter(lt=>lt.status==="done").length>0?1:0;return Math.min(E.length,ee+Te+_e)},[E]),Q=b.useMemo(()=>{const ee=E.filter(Te=>Te.status==="done").map(Te=>Te.data);return mf(ee,{onlyOutput:!0,alt:"Generation"})},[E]),fe=b.useMemo(()=>E.find(Te=>Te.status==="done")?.id??null,[E]);b.useEffect(()=>{r&&(pe.current=E.length,queueMicrotask(()=>{R(ee=>Math.max(ee,$))}))},[r,E.length,$]),b.useEffect(()=>{if(!r)return;const ee=F.current;ee&&(re>=E.length||ee.scrollHeight<=ee.clientHeight+20&&queueMicrotask(()=>{R(Te=>Math.min(E.length,Te+10))}))},[r,re,E.length]);const te=ee=>{ee.status==="pending"&&d(ee.id),ee.status==="done"&&M(ee.id)},le=ee=>{const{top:Te,right:Ne,imageSrc:_e,workflow:lt,promptId:Fe,hasVideoOutputs:we,hasImageOutputs:ye}=ee;B({open:!0,top:Te,right:Ne,imageSrc:_e,workflow:lt,promptId:Fe,hasVideoOutputs:we,hasImageOutputs:ye})},be=()=>{const ee=F.current;if(!ee)return;ee.scrollHeight-ee.scrollTop-ee.clientHeight<400&&R(Ne=>Math.min(pe.current,Ne+10))},Oe=(ee,Te)=>{h(ee,`history-${Te}.json`,{source:{type:"history",promptId:Te}}),m("workflow")},qe=async ee=>{await j5(ee,Te=>{U(Ne=>({...Ne,[Te]:!0}))})};return u.jsx("div",{id:"queue-panel-wrapper",className:"absolute inset-x-0 top-[60px] bottom-0",style:{display:r?"block":"none"},children:u.jsxs("div",{className:"flex flex-col bg-gray-100 min-h-full",children:[u.jsx(O5,{listRef:F,unifiedList:E,visibleCount:re,hasLoadedOnce:ve,effectiveExecutingId:z,progress:O,overallProgress:A,executingNodeLabel:_,onDeleteItem:te,onStop:p,onImageClick:l,viewerImages:Q,promptOutputs:k,onOpenMenu:le,downloaded:G,firstDoneItemId:fe,onScroll:be}),u.jsx(w5,{menuState:L,unifiedList:E,onClose:()=>B(null),onLoadWorkflow:Oe,onCopyWorkflow:T,onDownload:ee=>I(ee),onBatchDownload:qe,onDeleteHistory:ee=>M(ee),getBatchSources:N5}),u.jsx(S5,{message:W})]})})}let xd=null,mi=[];function p0(r){return encodeURIComponent(r)}async function _5(){if(mi.length===0)return;const r=[...mi];mi=[];const l=r.map(s=>{const o=new Date(s.timestamp).toISOString(),i=s.data!==void 0?` | ${JSON.stringify(s.data)}`:"";return`${o} ${s.message}${i}`}).join(`
`)+`
`;try{let s="";try{const i=await fetch(`${Bt}/api/userdata/${p0("mobile-debug.log")}`);i.ok&&(s=await i.text())}catch{}const o=s+l;await fetch(`${Bt}/api/userdata/${p0("mobile-debug.log")}?overwrite=true`,{method:"POST",headers:{"Content-Type":"text/plain"},body:o})}catch(s){console.error("[debugLog] Failed to write to server:",s)}}function L5(){xd||(xd=setTimeout(()=>{xd=null,_5()},500))}function Ud(r,l){const s={timestamp:Date.now(),message:r,data:l};mi.push(s),l!==void 0?console.log(`[DEBUG] ${r}`,l):console.log(`[DEBUG] ${r}`),L5()}function A5(r,l,s){const o=r.closest("[data-textarea-root]")?.querySelector("[data-textarea-header]"),i=getComputedStyle(document.documentElement),d=parseFloat(i.getPropertyValue("--top-bar-offset"))||0,p=window.visualViewport?.offsetTop??0,h=window.visualViewport?.height??window.innerHeight,m=d+8,g=Ex(r),x=o?.getBoundingClientRect(),y=g===window?{type:"window",scrollY:window.scrollY}:(()=>{const A=g;return{type:"element",tag:A.tagName.toLowerCase(),scrollTop:A.scrollTop,height:A.clientHeight}})();Ud("textarea-scroll: start",{reason:s,behavior:l,headerTop:x?.top??null,layoutTopEdge:m,viewportTopEdge:p+d+8,viewportTop:p,viewportHeight:h,topBarOffset:d,container:y,selectionStart:r.selectionStart});const N=D5(r),k=p+d+h*.25,S=p+h-24,w=x?x.top-m:null,M=N-k,j=N>S?N-S:0;let O=0;const D=w!==null&&w>2,z=D?N-w:N,_=z<=S;D&&_?O=w??0:!D&&N<=S?O=0:(O=M,j>O&&(O=j)),O<0&&(O=0),x&&w!==null&&x.top>m+2&&O>w&&(O=w),Ud("textarea-scroll: align",{caretTop:N,targetTop:k,visibilityBottom:S,deltaHeader:w,deltaCaret:M,deltaCaretMin:j,caretAfterHeader:z,caretVisibleAfterHeader:_,canAlignHeader:D,delta:O}),Math.abs(O)>8&&Tx(g,O,l)}function R5(r){const l=r.closest("[data-textarea-root]")?.querySelector("[data-textarea-header]");if(!l)return;const s=getComputedStyle(document.documentElement),i=(parseFloat(s.getPropertyValue("--top-bar-offset"))||0)+8,d=l.getBoundingClientRect(),p=d.top-i;if(Math.abs(p)<2)return;const h=Ex(r);Ud("textarea-scroll: align-header-request",{headerTop:d.top,layoutTopEdge:i,delta:p}),Tx(h,p,"auto")}function D5(r){const l=r.getBoundingClientRect(),s=z5(r);return l.top+s-r.scrollTop}function z5(r){const l=r.selectionStart??0,s=r.value,o=document.createElement("div"),i=getComputedStyle(r),d=o.style;d.position="absolute",d.top="0",d.left="-9999px",d.visibility="hidden",d.whiteSpace="pre-wrap",d.wordWrap="break-word",d.overflowWrap="break-word",d.boxSizing=i.boxSizing,d.width=`${r.clientWidth}px`,d.padding=i.padding,d.border=i.border,d.fontFamily=i.fontFamily,d.fontSize=i.fontSize,d.fontWeight=i.fontWeight,d.fontStyle=i.fontStyle,d.letterSpacing=i.letterSpacing,d.lineHeight=i.lineHeight,d.textTransform=i.textTransform,d.textIndent=i.textIndent,d.tabSize=i.tabSize;const p=document.createTextNode(s.slice(0,l)),h=document.createElement("span");h.textContent=s.slice(l,l+1)||" ",h.style.display="inline-block",h.style.width="1px",o.appendChild(p),o.appendChild(h),document.body.appendChild(o);const m=o.getBoundingClientRect(),x=h.getBoundingClientRect().top-m.top;return document.body.removeChild(o),x}function vd(r){r?document.body.dataset.textareaFocus="true":delete document.body.dataset.textareaFocus}function Ex(r){let l=r?.parentElement??null;for(;l;){const o=getComputedStyle(l).overflowY;if((o==="auto"||o==="scroll")&&l.scrollHeight>l.clientHeight)return l;l=l.parentElement}return window}function Tx(r,l,s="smooth"){if(Math.abs(l)<1)return;if(r===window){window.scrollBy({top:l,behavior:s});return}const o=r;o.scrollTo({top:o.scrollTop+l,behavior:s})}function _x(){const[r,l]=b.useState(!1),s=b.useRef(null),o=b.useRef(null),i=b.useRef(null);return b.useEffect(()=>{const d=h=>{const m=h.target;if(!(m instanceof HTMLElement))return;const g=m.tagName.toLowerCase();if((m.isContentEditable||g==="input"||g==="textarea"||g==="select")&&l(!0),m instanceof HTMLTextAreaElement){vd(!0);const x=()=>A5(m,"smooth","focus");s.current&&clearTimeout(s.current),o.current&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",o.current),o.current=null),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null);const y=()=>{document.activeElement===m&&(x(),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null))};if(i.current=y,document.addEventListener("selectionchange",y),setTimeout(()=>{i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null)},1200),window.visualViewport){let N=!1;const k=()=>{N=!0,x(),o.current&&(window.visualViewport?.removeEventListener("resize",o.current),o.current=null)};o.current=k,window.visualViewport.addEventListener("resize",k),s.current=setTimeout(()=>{N||x(),setTimeout(x,300),o.current&&(window.visualViewport?.removeEventListener("resize",o.current),o.current=null)},600)}else requestAnimationFrame(x)}},p=()=>{const h=document.activeElement;if(!(h instanceof HTMLElement)){l(!1),vd(!1),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null);return}const m=h.tagName.toLowerCase(),g=h.isContentEditable||m==="input"||m==="textarea"||m==="select";l(g),vd(h instanceof HTMLTextAreaElement)};return document.addEventListener("focusin",d),document.addEventListener("focusout",p),()=>{document.removeEventListener("focusin",d),document.removeEventListener("focusout",p),s.current&&clearTimeout(s.current),o.current&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",o.current),o.current=null),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null)}},[]),b.useEffect(()=>{const d=p=>{const m=p.detail?.textarea;m&&R5(m)};return document.addEventListener("textarea-align-header",d),()=>{document.removeEventListener("textarea-align-header",d)}},[]),{isInputFocused:r}}function B5({index:r,total:l,displayName:s}){return u.jsx("div",{id:"media-viewer-header",className:"absolute top-0 inset-x-0 px-3 pt-3 pb-4 bg-gradient-to-b from-black/50 to-transparent",children:u.jsxs("div",{className:"grid grid-cols-3 items-center",children:[u.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[r+1," / ",l]}),u.jsx("div",{className:"justify-self-center text-white/90 text-sm font-medium max-w-[70vw] truncate",children:s}),u.jsx("div",{})]})})}function I5({index:r,total:l,onPrev:s,onNext:o}){return u.jsxs("div",{id:"media-viewer-navigation",className:"hidden sm:block",children:[u.jsx("button",{onClick:s,disabled:r===0,className:"absolute left-3 top-1/2 -translate-y-1/2 p-2 text-white/50 hover:text-white disabled:opacity-0 transition-all pointer-events-auto",children:u.jsx(A0,{className:"w-8 h-8"})}),u.jsx("button",{onClick:o,disabled:r===l-1,className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 text-white/50 hover:text-white disabled:opacity-0 transition-all pointer-events-auto",children:u.jsx(wi,{className:"w-8 h-8"})})]})}function H5({isVideo:r,onDelete:l,onLoadWorkflow:s,onLoadInWorkflow:o,showMetadataToggle:i,canToggleMetadata:d,onDeleteClick:p,onLoadWorkflowClick:h,onLoadInWorkflowClick:m,onToggleMetadata:g}){return u.jsxs("div",{className:"absolute inset-x-0 px-3 pb-2 pt-2 flex items-center justify-between",style:{bottom:"calc(var(--bottom-bar-offset, 0px) + 4px)"},children:[u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-red-500 flex items-center justify-center hover:bg-black/60 transition-colors ${l?"":"opacity-40 pointer-events-none"}`,onClick:p,"aria-label":"Delete output",children:u.jsx(Hr,{className:"w-5 h-5"})}),!r&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${s?"":"opacity-40 pointer-events-none"}`,onClick:h,"aria-label":"Load workflow",children:u.jsx(Oa,{className:"w-5 h-5"})}),u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${o?"":"opacity-40 pointer-events-none"}`,onClick:m,"aria-label":"Use in workflow",children:u.jsx(T0,{className:"w-5 h-5"})}),i&&u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${d?"":"opacity-40 pointer-events-none"}`,onClick:g,"aria-label":"Toggle metadata",children:u.jsx(E0,{className:"w-5 h-5"})})]})]})}function V5({isVideo:r,showMetadataToggle:l,showMetadataOverlay:s,metadataIsLoading:o,metadata:i,durationLabel:d}){return l?u.jsx("div",{className:`absolute right-3 flex flex-col items-end gap-1 pointer-events-none transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,style:{bottom:r?"calc(var(--bottom-bar-offset, 0px) + 120px)":"calc(var(--bottom-bar-offset, 0px) + 64px)"},children:o?u.jsx("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:"Loading metadata..."}):i?u.jsxs(u.Fragment,{children:[i.model&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["model: ",i.model]}),i.sampler&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["sampler: ",i.sampler]}),i.steps&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["steps: ",i.steps]}),i.cfg&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["cfg: ",i.cfg]}),d&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["time: ",d]})]}):u.jsx("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:"No metadata found"})}):null}const U5={x:0,y:0};function Lx({open:r,items:l,index:s,onIndexChange:o,onClose:i,onDelete:d,onLoadWorkflow:p,onLoadInWorkflow:h,showMetadataToggle:m=!1,showLoadingPlaceholder:g=!1,loadingProgress:x=0,loadingLabel:y,initialScale:N=1,initialTranslate:k=U5,onTransformChange:S,zoomResetKey:w,overlayZIndex:M=2100}){const j=b.useRef(null),O=b.useRef(null),D=b.useRef(null),z=b.useRef(null),[_,A]=b.useState(1),[L,B]=b.useState({x:0,y:0}),G=b.useRef(1),U=b.useRef({x:0,y:0}),W=b.useRef(null),ne=b.useRef(null),ve=b.useRef(null),ae=b.useRef(null),[re,R]=b.useState(null),[F,pe]=b.useState(null),[xe,he]=b.useState(!1),[T,I]=b.useState(!1),E=b.useRef(null),$=b.useRef("fit"),[Q,fe]=b.useState({}),[te,le]=b.useState({}),[be,Oe]=b.useState(!1),{isInputFocused:qe}=_x(),ee=s>=0?l[s]??l[0]??null:null,Te=ee?.filename??ee?.file?.name??ee?.alt??ee?.src??"",Ne=!!(ee?.mediaType==="video"||ee?.file?.type==="video"||Te&&wa(Te)),_e=ee?.file?.id??null,lt=_e?Q[_e]:void 0,Fe=ee?.metadata??(lt===void 0?void 0:lt),we=G5(ee?.durationSeconds),ye=ee?.filename||ee?.alt||"Output",Me=T&&!xe,Le=m,it=M+10,ht=_e?!!te[_e]:!1,Ze=b.useCallback(()=>{he(!1),E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{he(!0)},3e3)},[]),Se=b.useCallback(()=>{Ze(),I(ke=>!ke)},[Ze]),Ae=b.useCallback(()=>{!ee||!d||(Ze(),d(ee))},[ee,d,Ze]),Ke=b.useCallback(()=>{!ee||!p||(Ze(),p(ee))},[ee,p,Ze]),$e=b.useCallback(()=>{!ee||!h||(Ze(),h(ee))},[ee,h,Ze]);b.useEffect(()=>(r?queueMicrotask(Ze):E.current&&clearTimeout(E.current),()=>{E.current&&clearTimeout(E.current)}),[r,Ze]),b.useLayoutEffect(()=>{r&&(A(N),B(k),G.current=N,U.current=k,W.current=null,ne.current=null,ve.current=null,ae.current=null,$.current="fit")},[r,s,N,k]),b.useEffect(()=>{z.current=null,R(null),Oe(!1)},[ee?.src]),b.useEffect(()=>{if(r)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[r]),b.useEffect(()=>{r&&S&&S(_,L)},[r,_,L,S]),b.useEffect(()=>{if(!r)return;const ke=ze=>{ze.key==="Escape"&&i()};return document.addEventListener("keydown",ke),()=>document.removeEventListener("keydown",ke)},[r,i]),b.useEffect(()=>{if(!r||!m||!ee?.file||ee.metadata||!_e||Fe!==void 0||ht)return;const ke=_e.startsWith("input/")?"input":"output",ze=_e.startsWith(`${ke}/`)?_e.slice(ke.length+1):_e;le(V=>({...V,[_e]:!0})),b1(ze,ke).then(V=>{const ue=V?.prompt?pf(V.prompt):null,ce=ue&&Object.keys(ue).length>0?ue:null;fe(Ce=>({...Ce,[_e]:ce}))}).catch(()=>{fe(V=>({...V,[_e]:null}))}).finally(()=>{le(V=>({...V,[_e]:!1}))})},[r,m,ee,_e,Fe,ht]);const Qe=b.useMemo(()=>!re||!F?null:F.height/re.height,[re,F]),Xe=b.useMemo(()=>Qe===null?1:Math.min(1,Qe),[Qe]),vt=b.useMemo(()=>Qe===null?1:Math.max(1,Qe),[Qe]),oe=(ke=_,ze=re)=>{if(!ze||!F)return{x:0,y:0};const V=ze.width*ke,ue=ze.height*ke;return{x:V<F.width?(F.width-V)/2:0,y:ue<F.height?(F.height-ue)/2:0}},Pe=b.useCallback((ke,ze=_)=>{if(!re||!F)return ke;const V=F.width,ue=F.height,ce=re.width*ze,Ce=re.height*ze,Be=ce<=V?0:Math.max(V-ce,Math.min(0,ke.x)),Ye=Ce<=ue?0:Math.max(ue-Ce,Math.min(0,ke.y));return{x:Be,y:Ye}},[re,F,_]),et=b.useRef(Pe),gt=b.useCallback(ke=>{let ze=Xe;if(ke==="cover"?ze=vt:ze=Xe,$.current=ke,G.current=ze,A(ze),!re||!F)U.current={x:0,y:0},B({x:0,y:0});else{const V=re.width*ze,ue=re.height*ze,ce={x:(F.width-V)/2,y:(F.height-ue)/2},Ce=Pe(ce,ze);U.current=Ce,B(Ce)}},[re,Pe,F,vt,Xe]),Gt=b.useRef(gt);b.useEffect(()=>{et.current=Pe},[Pe]),b.useEffect(()=>{Gt.current=gt},[gt]);const cr=ke=>{const ze=ke.currentTarget;z.current={width:ze.naturalWidth,height:ze.naturalHeight};const V=j.current;if(!V||ze.naturalWidth===0)return;const ue=V.clientWidth,ce=V.clientHeight,Ce=ue/ze.naturalWidth;R({width:ue,height:ze.naturalHeight*Ce}),pe({width:ue,height:ce})};b.useEffect(()=>{if(Ne||!r)return;const ke=O.current,ze=j.current;if(!ke||!ze)return;const V=()=>{const ce=z.current,Ce=ze.clientWidth,Be=ze.clientHeight;if(pe({width:Ce,height:Be}),!ce||ce.width===0)return;const Ye=Ce/ce.width,Re=ce.height*Ye;R({width:Ce,height:Re});const st=et.current(U.current);U.current=st,B(st)};V();const ue=new ResizeObserver(V);return ue.observe(ze),()=>ue.disconnect()},[r,ee?.src,Ne]),b.useEffect(()=>{Ne||!r||!re||!F||Gt.current($.current)},[r,ee?.src,re,F,Ne]),b.useEffect(()=>{r&&w!==void 0&&Gt.current($.current)},[r,w]);const dr=()=>{Ze(),s>0&&o(s-1)},fr=()=>{Ze(),s<l.length-1&&o(s+1)},bn=()=>{const ke=O.current;if(!ke)return;const ze=G.current,V=U.current,ue=oe(ze);ke.style.transform=`translate3d(${ue.x+V.x}px, ${ue.y+V.y}px, 0) scale(${ze})`},sn=ke=>{if(Ne){const V=D.current;if(V&&ke.target===V){const ue=V.getBoundingClientRect();if(ke.clientY>ue.bottom-60)return}}ke.currentTarget.setPointerCapture(ke.pointerId);const ze=yd(j.current);if(ze.set(ke.pointerId,{x:ke.clientX,y:ke.clientY}),ze.size===1){if(ne.current={x:ke.clientX,y:ke.clientY,time:Date.now()},!Ne){W.current={x:ke.clientX-U.current.x,y:ke.clientY-U.current.y};const V=O.current;V&&(V.style.transition="none")}}else if(ze.size===2&&!Ne){const[V,ue]=Array.from(ze.values()),ce=Math.hypot(ue.x-V.x,ue.y-V.y),Ce=(V.x+ue.x)/2,Be=(V.y+ue.y)/2,Ye=j.current?.getBoundingClientRect(),Re=G.current,st=U.current,pt=oe(Re),yt=Ye?{x:(Ce-Ye.left-pt.x-st.x)/Re,y:(Be-Ye.top-pt.y-st.y)/Re}:void 0;ve.current={distance:ce,scale:Re,centerX:Ce,centerY:Be,imagePoint:yt}}},hn=ke=>{const ze=yd(j.current);if(ze.has(ke.pointerId)){if(ze.set(ke.pointerId,{x:ke.clientX,y:ke.clientY}),ze.size===2&&ve.current&&!Ne){const V=ve.current,[ue,ce]=Array.from(ze.values()),Ce=Math.hypot(ce.x-ue.x,ce.y-ue.y),Ye=Math.max(Xe,Math.min(5,V.scale*(Ce/V.distance)));G.current=Ye;const Re=j.current?.getBoundingClientRect(),st=(ue.x+ce.x)/2,pt=(ue.y+ce.y)/2;if(Re&&V.imagePoint){const yt=oe(Ye),bt={x:st-Re.left-yt.x-V.imagePoint.x*Ye,y:pt-Re.top-yt.y-V.imagePoint.y*Ye};U.current=Pe(bt,Ye)}else U.current=Pe(U.current,Ye);bn();return}if(ze.size===1&&!Ne){const V=G.current;(V>1||re&&j.current&&re.height*V>j.current.clientHeight+1)&&W.current&&(U.current=Pe({x:ke.clientX-W.current.x,y:ke.clientY-W.current.y},V),bn())}}},gn=ke=>{const ze=yd(j.current);if(ze.delete(ke.pointerId),ze.size<2){if(ze.size===1&&ve.current){const[V]=Array.from(ze.values());W.current={x:V.x-U.current.x,y:V.y-U.current.y}}ve.current=null}if(ze.size===0){const V=O.current;V&&(V.style.transition="transform 0.05s linear");const ue=Date.now(),ce=ae.current,Ce=ce?ke.clientX-ce.x:0,Be=ce?ke.clientY-ce.y:0,Ye=!!(ce&&ue-ce.time<300&&Math.hypot(Ce,Be)<24);if(!Ne&&Ye){ae.current=null;const Re=$.current;gt(Re==="fit"?"cover":"fit"),Ze()}else{ae.current={time:ue,x:ke.clientX,y:ke.clientY};const Re=ne.current;if(!qe&&Re){const st=ke.clientX-Re.x,pt=ke.clientY-Re.y,yt=Date.now()-Re.time,bt=Math.abs(st),wt=Math.abs(pt),xt=G.current,Dt=Math.abs(xt-Xe)<.05||Math.abs(xt-vt)<.05,qt=yt<250&&bt<10&&wt<10;yt<=350&&bt>60&&bt>wt&&Dt?st<0?s<l.length-1&&o(s+1):st>0&&s>0&&o(s-1):qt&&Ze()}A(G.current),B(U.current)}W.current=null}},$n=ke=>{if(Ne||!ke.ctrlKey)return;ke.preventDefault();const ze=-ke.deltaY*.005,V=Math.max(Xe,Math.min(5,G.current+ze));G.current=V,A(V);const ue=Pe(U.current,V);U.current=ue,B(ue)};return r?!ee&&!g?rr.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[2000] bg-black flex flex-col items-center justify-center text-white",role:"dialog","aria-modal":"true",children:[u.jsx("button",{className:"absolute top-4 right-4 z-[2010] w-10 h-10 rounded-full bg-black/60 text-white text-xl flex items-center justify-center",onClick:i,"aria-label":"Close viewer",children:""}),u.jsx("p",{className:"text-gray-400 mb-2",children:"No images to display"}),u.jsxs("p",{className:"text-gray-500 text-sm",children:["images: ",l.length,", index: ",s]})]}),document.body):rr.createPortal(u.jsxs("div",{id:"media-viewer-overlay",className:"fixed inset-0 bg-black",style:{zIndex:M},onWheel:$n,children:[u.jsx("div",{ref:j,className:`absolute inset-x-0 top-0 overflow-hidden ${Ne?"":"touch-none"}`,style:{overscrollBehavior:"contain",height:"calc(100vh - var(--bottom-bar-offset, 0px))",zIndex:1},onPointerDown:sn,onPointerMove:hn,onPointerUp:gn,onPointerCancel:gn,children:g?u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-gray-600 border-t-white rounded-full animate-spin"}),u.jsx("div",{className:"mt-4 w-48 h-2 rounded-full bg-gray-700 overflow-hidden",children:u.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,x))}%`}})}),u.jsx("div",{className:"mt-2 text-sm text-gray-300",children:y??`${Math.min(100,Math.max(0,x))}%`})]}):ee&&u.jsx(u.Fragment,{children:Ne?u.jsxs(u.Fragment,{children:[u.jsx("video",{ref:D,src:ee.src,controls:!0,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-contain select-none",onDragStart:ke=>ke.preventDefault(),onError:()=>Oe(!0)}),be&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-sm bg-black/60",children:"Unable to play this video."})]}):u.jsx("img",{ref:O,src:ee.src,alt:ee.alt||"Generation",className:"w-full h-auto block select-none relative",draggable:!1,onLoad:cr,style:{transform:`translate3d(${oe(_).x+L.x}px, ${oe(_).y+L.y}px, 0) scale(${_})`,transformOrigin:"top left",willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"}})})}),u.jsx("button",{onClick:i,className:`absolute top-3 right-3 w-9 h-9 rounded-full flex items-center justify-center transition-colors ${xe?"bg-transparent text-white":"bg-black/60 text-white"}`,style:{zIndex:it},"aria-label":"Close viewer",children:u.jsx(zo,{className:"w-6 h-6"})}),u.jsx("div",{className:`absolute inset-0 pointer-events-none transition-opacity duration-300 ${xe?"opacity-0":"opacity-100"}`,style:{zIndex:it},children:ee&&u.jsxs(u.Fragment,{children:[u.jsx(B5,{index:s,total:l.length,displayName:ye}),u.jsx(I5,{index:s,total:l.length,onPrev:dr,onNext:fr}),u.jsx(H5,{isVideo:Ne,onDelete:d,onLoadWorkflow:p,onLoadInWorkflow:h,showMetadataToggle:m,canToggleMetadata:Le,onDeleteClick:Ae,onLoadWorkflowClick:Ke,onLoadInWorkflowClick:$e,onToggleMetadata:Se}),u.jsx(V5,{isVideo:Ne,showMetadataToggle:m,showMetadataOverlay:Me,metadataIsLoading:ht,metadata:Fe,durationLabel:we})]})})]}),document.body):null}function yd(r){const l=r;return l?(l.__activePointers||(l.__activePointers=new Map),l.__activePointers):new Map}function G5(r){const l=r===void 0||Number.isNaN(r)?0:r;return l===0?"":l<10?`${l.toFixed(1)}s`:`${Math.round(l)}s`}function Ax({file:r,onCancel:l,onConfirm:s}){return r?u.jsx("div",{id:"outputs-load-workflow-confirm-overlay",className:"fixed inset-0 z-[2200] bg-black/50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-load-workflow-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:o=>o.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Unsaved changes"}),u.jsx("div",{className:"text-gray-600 text-sm mt-1",children:"Are you sure you want to load this workflow? You have unsaved changes."}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:l,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:()=>s(r),children:"Continue"})]})]})}):null}function _i(r){return r.id.startsWith("input/")?"input":"output"}function Do(r,l){const o=`${l??_i(r)}/`;return r.id.startsWith(o)?r.id.slice(o.length):r.id}function q5(r){return`output-${r.replace(/[\\/]/g,"_")}.json`}async function Rx(r){const{file:l,source:s,loadWorkflow:o,onLoaded:i,onError:d}=r;try{const p=s??_i(l),h=Do(l,p),m=await y1(h,p);o(m,q5(h),{source:{type:"other"}}),i?.()}catch(p){throw d?.(p),p}}function W5(r){const{workflow:l,nodeTypes:s,nodeId:o}=r;if(!l||!s)return null;const i=l.nodes.find(p=>p.id===o);if(!i)return null;const d=["image","filename","file"];for(const p of d){const h=xl(l,s,i,p);if(h!==null)return{node:i,index:h,name:p}}return null}function m0(r,l){const s=r.title,o=typeof s=="string"&&s.trim()?s.trim():null,i=l?.[r.type];return o||i?.display_name||r.type}function F5(r){const l=r.replace(/^\/+/,""),s=l.split("/").filter(Boolean);return s.length<=1?{filename:l,subfolder:""}:{filename:s.pop()??l,subfolder:s.join("/")}}async function $5(r,l){if(l==="input")return Do(r,l);const s=Do(r,l),{filename:o,subfolder:i}=F5(s),d=r.fullUrl||qn(o,i,l),p=await fetch(d);if(!p.ok)throw new Error("Failed to fetch image data.");const h=await p.blob(),m=o||r.name||"image.png",g=new File([h],m,{type:h.type||"image/png"}),x=await j0(g,{type:"input",overwrite:!0}),y=x.subfolder?`${x.subfolder}/${x.name}`:x.name;if(!(await fetch(qn(x.name,x.subfolder??"","input"))).ok)throw new Error("Uploaded image was not found in inputs.");return y}function Dx({open:r,file:l,source:s,onClose:o,onLoaded:i}){const d=J(O=>O.workflow),p=J(O=>O.nodeTypes),h=J(O=>O.setNodeTypes),m=J(O=>O.updateNodeWidget),g=Zt(O=>O.clearNodeError),x=J(O=>O.scrollToNode),y=Ln(O=>O.setCurrentPanel),[N,k]=b.useState(null),[S,w]=b.useState(null),M=b.useMemo(()=>d?d.nodes.filter(O=>/loadimage/i.test(O.type)):[],[d]);b.useEffect(()=>{r||(k(null),w(null))},[r]);const j=async O=>{if(!(!l||!d)){w(O),k(null);try{const D=W5({workflow:d,nodeTypes:p,nodeId:O});if(!D)throw new Error("Selected node does not accept image inputs.");const z=await $5(l,s);if(s!=="input")try{const _=await b0();h(_)}catch(_){console.warn("Failed to refresh node types after upload:",_)}m(D.node.id,D.index,z,D.name),g(D.node.id),y("workflow"),i?.(),setTimeout(()=>{x(D.node.id,m0(D.node,p))},150)}catch(D){console.error("Failed to load image into node:",D),k(D instanceof Error?D.message:"Failed to load image.")}finally{w(null)}}};return!r||!l?null:u.jsx("div",{id:"outputs-load-node-overlay",className:"fixed inset-0 z-[2150] bg-black/50 flex items-center justify-center p-4",onClick:o,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-load-node-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:O=>O.stopPropagation(),children:[u.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:"Load image into node"}),u.jsx("div",{className:"px-4 pt-3 text-xs text-gray-500",children:l.name}),u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[M.length===0&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"No Load Image nodes found in the current workflow."}),M.map(O=>{const D=m0(O,p),z=S===O.id;return u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed",onClick:()=>j(O.id),disabled:S!==null,children:[u.jsxs("span",{className:"text-gray-500 dark:text-gray-300",children:["#",O.id]}),u.jsx("span",{className:"flex-1 text-gray-900 dark:text-gray-100 truncate",children:D}),z&&u.jsx("span",{className:"text-xs text-gray-400",children:"Loading"})]},`load-node-${O.id}`)})]}),N&&u.jsx("div",{className:"px-4 py-2 text-xs text-red-600 border-t border-gray-100",children:N}),u.jsx("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end",children:u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg disabled:opacity-60",onClick:o,disabled:S!==null,children:"Close"})})]})})}function Y5({file:r,onCancel:l,onConfirm:s}){return u.jsx("div",{id:"viewer-delete-confirm-overlay",className:"fixed inset-0 z-[2200] bg-black/50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"viewer-delete-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:o=>o.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Delete file?"}),u.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:['This will permanently delete "',r.name,'" from the server. This cannot be undone.']}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:l,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:s,children:"Delete"})]})]})})}function Q5({onClose:r}){const l=Un(te=>te.viewerOpen),s=Un(te=>te.viewerImages),o=Un(te=>te.viewerIndex),i=Un(te=>te.viewerScale),d=Un(te=>te.viewerTranslate),p=J(te=>te.followQueue),h=Un(te=>te.setViewerState),m=J(te=>te.workflow),g=J(te=>te.originalWorkflow),x=J(te=>te.workflowDurationStats),y=J(te=>te.isExecuting),N=J(te=>te.executingPromptId),k=Ln(te=>te.setCurrentPanel),S=J(te=>te.loadWorkflow),w=rt(te=>te.running),M=_n(te=>te.history),[j,O]=b.useState(null),[D,z]=b.useState(null),[_,A]=b.useState(null),[L,B]=b.useState(!1),G=b.useRef(null),U=b.useMemo(()=>!!(m&&g&&JSON.stringify(m)!==JSON.stringify(g)),[m,g]),W=b.useMemo(()=>!l||!p?null:M[0]?.prompt_id??null,[l,p,M]),ne=N||(w.length===1?w[0].prompt_id:null),ve=Ho({workflow:m,runKey:ne,isRunning:y||w.length>0,workflowDurationStats:x}),ae=y||w.length>0,re=Math.min(100,Math.max(0,ve??0)),F=!(o>=0?s[o]??s[0]??null:null)&&(p||ae)||o<0&&ae;b.useEffect(()=>{if(!l||!p){G.current=null;return}!G.current&&M[0]?.prompt_id&&(G.current=M[0]?.prompt_id??null)},[l,p,M]),b.useEffect(()=>{if(!l||!p||M.length===0)return;const te=M[0];if(G.current===te.prompt_id||te.outputs.images.filter(Oe=>Oe.type==="output").length===0)return;const be=mf(M,{onlyOutput:!0,alt:"Generation"});be.length!==0&&(G.current=te.prompt_id,h({viewerImages:be,viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}}))},[l,p,M,h]);const pe=te=>{h({viewerIndex:te})},xe=(te,le)=>{h({viewerScale:te,viewerTranslate:le})},he=te=>{te.file&&O(te.file)},T=async()=>{if(!j)return;const te=j;try{const le=Do(te);await jd(le,_i(te));const be=s.filter(ee=>ee.file?.id!==te.id),Oe=s.findIndex(ee=>ee.file?.id===te.id),qe=be.length===0?0:Oe<0?o:Oe<o?o-1:Oe===o?Math.min(o,be.length-1):o;h({viewerImages:be,viewerIndex:qe}),be.length===0&&r()}catch(le){console.error("Failed to delete file:",le),window.alert("Failed to delete file.")}finally{O(null)}},I=te=>{if(te.file){if(U){z(te.file);return}E(te.file)}},E=async te=>{try{await Rx({file:te,loadWorkflow:S,onLoaded:()=>{r(),queueMicrotask(()=>k("workflow"))}})}catch(le){console.error("Failed to load workflow from file:",le),window.alert("Failed to load workflow from file.")}finally{z(null)}},$=te=>{!te.file||te.file.type!=="image"||(A(te.file),B(!0))},Q=()=>{B(!1),A(null)},fe=()=>{Q(),r(),queueMicrotask(()=>k("workflow"))};return l?u.jsxs(u.Fragment,{children:[u.jsx(Lx,{open:l,items:s,index:o,onIndexChange:pe,onClose:r,onDelete:he,onLoadWorkflow:I,onLoadInWorkflow:$,showMetadataToggle:!0,showLoadingPlaceholder:F,loadingProgress:re,loadingLabel:ae?`${re}%`:"Waiting for output",initialScale:i,initialTranslate:d,onTransformChange:xe,zoomResetKey:W,overlayZIndex:2100}),u.jsx(Ax,{file:D,onCancel:()=>z(null),onConfirm:E}),u.jsx(Dx,{open:L,file:_,source:_?_i(_):"output",onClose:Q,onLoaded:fe}),j&&u.jsx(Y5,{file:j,onCancel:()=>O(null),onConfirm:T})]}):null}function X5(){const[r,l]=b.useState(!1),s=b.useRef(null),o=b.useRef(null),i=b.useRef({}),d=b.useRef({setExecutionState:J.getState().setExecutionState,setNodeOutput:J.getState().setNodeOutput,clearNodeOutputs:J.getState().clearNodeOutputs,addPromptOutputs:J.getState().addPromptOutputs,clearPromptOutputs:J.getState().clearPromptOutputs,applyControlAfterGenerate:J.getState().applyControlAfterGenerate,updateFromStatus:rt.getState().updateFromStatus,fetchQueue:rt.getState().fetchQueue,addHistoryEntry:_n.getState().addHistoryEntry,fetchHistory:_n.getState().fetchHistory});b.useEffect(()=>{d.current={setExecutionState:J.getState().setExecutionState,setNodeOutput:J.getState().setNodeOutput,clearNodeOutputs:J.getState().clearNodeOutputs,addPromptOutputs:J.getState().addPromptOutputs,clearPromptOutputs:J.getState().clearPromptOutputs,applyControlAfterGenerate:J.getState().applyControlAfterGenerate,updateFromStatus:rt.getState().updateFromStatus,fetchQueue:rt.getState().fetchQueue,addHistoryEntry:_n.getState().addHistoryEntry,fetchHistory:_n.getState().fetchHistory}},[]);const p=b.useRef(null);return b.useEffect(()=>{const h=x=>{const{setExecutionState:y,setNodeOutput:N,addPromptOutputs:k,clearPromptOutputs:S,updateFromStatus:w,fetchQueue:M,addHistoryEntry:j,fetchHistory:O}=d.current,D=x;switch(D.type){case"status":{const _=D.data.status.exec_info.queue_remaining;w(_),_===0&&y(!1,null,null,0);break}case"progress":{const z=D,{value:_,max:A,node:L,prompt_id:B}=z.data,G=Math.round(_/A*100);y(!0,L||null,B||null,G);break}case"executing":{const z=D,_=z.data.node,A=z.data.prompt_id;if(_===null){if(y(!1,null,null,0),d.current.applyControlAfterGenerate(),A){const L=rt.getState().running.find(G=>G.prompt_id===A),B=i.current[A]||[];L&&j({prompt_id:A,timestamp:Date.now(),outputs:{images:B},prompt:L.prompt}),delete i.current[A],S(A)}M(),O()}else{A&&A!==p.current&&(p.current=A),y(!0,_,A||null,0);const L=rt.getState();A&&!L.running.some(B=>B.prompt_id===A)&&M()}break}case"executed":{const z=D,{node:_,prompt_id:A,output:L}=z.data;L.images&&(i.current[A]||(i.current[A]=[]),i.current[A].push(...L.images),k(A,L.images),N(_,L.images));break}case"execution_error":{y(!1,null,null,0),S(),M(),O();break}}},m=()=>{s.current?.readyState!==WebSocket.OPEN&&(s.current=x1(y0,h,async()=>{l(!0);const{fetchQueue:x,fetchHistory:y,setExecutionState:N}=d.current;await x(),y();const k=rt.getState(),S=J.getState();if(k.running.length>0&&!S.executingPromptId){const w=k.running[0];N(!0,null,w.prompt_id,0)}},()=>{l(!1),o.current=setTimeout(m,2e3)},()=>{l(!1)}))};m();const g=setInterval(()=>{const{fetchQueue:x,fetchHistory:y}=d.current;rt.getState().running.length>0&&(x(),y())},2e3);return()=>{o.current&&clearTimeout(o.current),s.current&&s.current.close(),clearInterval(g)}},[]),{isConnected:r}}function P5({onSwipeLeft:r,onSwipeRight:l,onSwipeUp:s,onSwipeDown:o,enabled:i=!0,threshold:d=50,preventScroll:p=!0,deferResetOnSwipe:h=!1,deferResetDurationMs:m=350}){const[g,x]=b.useState(0),[y,N]=b.useState(!1),[k,S]=b.useState(i),w=b.useRef(null),M=b.useRef(null);b.useEffect(()=>{S(i)},[i]);const j=b.useCallback(()=>{w.current=null,N(!1),x(0)},[]),O=b.useCallback(D=>{S(D)},[]);return b.useEffect(()=>{if(!k)return;const D=L=>{if(!(L instanceof HTMLElement))return!1;if(L.isContentEditable)return!0;const B=L.tagName.toLowerCase();return B==="input"||B==="textarea"||B==="select"},z=L=>{if(D(L.target)||D(document.activeElement))return;M.current!==null&&(window.clearTimeout(M.current),M.current=null);const B=L.touches[0];w.current={startX:B.clientX,startY:B.clientY,currentX:B.clientX,currentY:B.clientY,isHorizontal:null,isTracking:!0}},_=L=>{const B=w.current;if(!B?.isTracking)return;const G=L.touches[0],U=G.clientX-B.startX,W=G.clientY-B.startY;if(B.isHorizontal===null){if(Math.abs(U)>20||Math.abs(W)>20){const ne=Math.abs(U)>Math.abs(W);B.isHorizontal=ne,ne?(U>0?!!l:!!r)?N(!0):B.isTracking=!1:(W>0?o:s)||(B.isTracking=!1)}return}B.isHorizontal?(p&&L.cancelable&&L.preventDefault(),B.currentX=G.clientX,x(G.clientX-B.startX)):B.currentY=G.clientY},A=()=>{const L=w.current;if(!L?.isTracking){j();return}const B=L.currentX-L.startX,G=L.currentY-L.startY,U=d||window.innerWidth*.25;let W=!1;L.isHorizontal===!0?B<-U&&r?(r(),W=!0):B>U&&l&&(l(),W=!0):L.isHorizontal===!1&&(G<-U&&s?(s(),W=!0):G>U&&o&&(o(),W=!0)),W?h?(w.current=null,N(!1),M.current!==null&&window.clearTimeout(M.current),M.current=window.setTimeout(()=>{j(),M.current=null},m)):requestAnimationFrame(()=>{j()}):j()};return document.addEventListener("touchstart",z,{passive:!0}),document.addEventListener("touchmove",_,{passive:!1}),document.addEventListener("touchend",A,{passive:!0}),document.addEventListener("touchcancel",A,{passive:!0}),()=>{document.removeEventListener("touchstart",z),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",A),document.removeEventListener("touchcancel",A),M.current!==null&&(window.clearTimeout(M.current),M.current=null),j()}},[k,r,l,s,o,d,p,h,m,j]),{swipeOffset:g,isSwiping:y,setSwipeEnabled:O,resetSwipeState:j}}function Z5({open:r,onClose:l,filter:s,sort:o,onChangeFilter:i,onChangeSort:d}){if(!r)return null;const p=o?.mode||"modified",h=p.includes("name")?"name":p.includes("size")?"size":"date",m=(()=>{const x=p.endsWith("reverse");return h==="date"?x?"asc":"desc":x?"desc":"asc"})(),g=(x,y)=>{let N;x==="name"?N=y==="asc"?"name":"name-reverse":x==="size"?N=y==="asc"?"size":"size-reverse":N=y==="desc"?"modified":"modified-reverse",d({mode:N})};return u.jsx("div",{id:"filter-modal-root",className:"fixed inset-0 z-[1600] bg-black/50 flex items-center justify-center p-4",onClick:l,children:u.jsxs("div",{id:"filter-modal-content",className:"bg-white rounded-xl shadow-lg w-full max-w-sm max-h-[90vh] overflow-y-auto",onClick:x=>x.stopPropagation(),children:[u.jsxs("div",{id:"filter-modal-header",className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[u.jsx("h3",{id:"filter-modal-title",className:"font-semibold text-gray-900",children:"Filter & Sort"}),u.jsx("button",{onClick:l,children:u.jsx(zo,{className:"w-6 h-6 text-gray-500"})})]}),u.jsxs("div",{id:"filter-modal-body",className:"p-4 space-y-6",children:[u.jsxs("div",{id:"sort-group-container",children:[u.jsx("h4",{id:"sort-group-label",className:"text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),u.jsx("div",{id:"sort-options-grid",className:"grid grid-cols-2 gap-2",children:["name","date","size"].map(x=>{const y=h===x,N=y?m==="asc"?"desc":"asc":x==="name"?"asc":"desc";return u.jsxs("button",{className:`sort-option-button px-3 py-2 rounded-lg text-sm border ${y?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,onClick:()=>g(x,N),children:[x==="name"?"Name":x==="size"?"Size":"Date",y&&(m==="asc"?" ":" ")]},x)})})]}),u.jsxs("div",{id:"filter-type-group-container",children:[u.jsx("h4",{id:"filter-type-label",className:"text-sm font-medium text-gray-700 mb-2",children:"File Type"}),u.jsx("div",{id:"filter-type-options",className:"flex gap-2",children:["all","image","video"].map(x=>u.jsx("button",{className:`filter-type-button flex-1 px-3 py-2 rounded-lg text-sm border ${s.type===x?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,onClick:()=>i({type:x}),children:x.charAt(0).toUpperCase()+x.slice(1)},x))})]}),u.jsxs("div",{id:"search-input-container",children:[u.jsx("label",{id:"search-input-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),u.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Search by filename...",value:s.search,onChange:x=>i({search:x.target.value})})]}),u.jsxs("div",{id:"favorites-toggle-container",className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"favOnly",checked:s.favoritesOnly,onChange:x=>i({favoritesOnly:x.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500"}),u.jsx("label",{htmlFor:"favOnly",className:"text-sm text-gray-700",children:"Show Favorites Only"})]})]}),u.jsx("div",{id:"filter-modal-footer",className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-end",children:u.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",onClick:l,children:"Apply"})})]})})}const h0="outputs-folders-collapsed",K5=1440*60*1e3;function J5(r){if(!r)return"Unknown date";const l=new Date,s=new Date(l.getFullYear(),l.getMonth(),l.getDate()),o=new Date(r),i=new Date(o.getFullYear(),o.getMonth(),o.getDate()),d=Math.round((s.getTime()-i.getTime())/K5);return d===0?"Today":d===1?"Yesterday":o.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function bd({file:r,viewMode:l,selectionMode:s,isSelected:o,isFavorited:i,onNavigateFolder:d,onOpen:p,onMenu:h,onToggleSelection:m}){const g=r.type==="folder",[x,y]=b.useState(!1);b.useEffect(()=>{y(!1)},[r.previewUrl,r.id]);const N=()=>{g?d(r.name):s?m(r.id):p(r)},k=S=>{S.stopPropagation(),h(r,S)};return l==="list"?u.jsxs("div",{className:`file-card-list-item flex items-center gap-3 p-2 hover:bg-gray-50 border-b border-gray-100 last:border-0 ${o?"bg-blue-50":""}`,onClick:N,children:[s&&!g&&u.jsx("div",{className:`selection-checkbox w-5 h-5 rounded border flex items-center justify-center flex-shrink-0 ${o?"bg-blue-600 border-blue-600 text-white":"border-gray-300 bg-white"}`,children:o&&u.jsx(Il,{className:"w-3.5 h-3.5"})}),u.jsx("div",{className:"file-preview-container w-10 h-10 flex-shrink-0 flex items-center justify-center bg-gray-100 rounded text-gray-500 overflow-hidden relative",children:g?u.jsx(_o,{className:"w-6 h-6 text-amber-500"}):r.previewUrl&&!x?u.jsx("img",{src:r.previewUrl,className:"w-full h-full object-cover",loading:"lazy",onError:()=>y(!0)}):r.type==="video"?u.jsx(vg,{className:"w-5 h-5 text-gray-500"}):u.jsx("span",{className:"text-xs font-bold",children:"IMG"})}),u.jsx("div",{className:"file-info-container flex-1 min-w-0",children:u.jsx("div",{className:"file-name text-sm font-medium text-gray-900 truncate",children:r.name})}),u.jsxs("div",{className:"file-actions-container flex items-center gap-2",children:[i&&u.jsx(Hl,{className:"w-4 h-4 text-yellow-500"}),u.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-700",onClick:k,children:u.jsx(vl,{className:"w-5 h-5 -rotate-90"})})]})]}):u.jsxs("div",{className:"file-card-grid-item flex flex-col gap-1",children:[u.jsxs("div",{className:`relative aspect-square bg-gray-100 rounded-lg overflow-hidden transition-all ${o?"ring-4 ring-blue-500 ring-offset-2":""}`,onClick:N,children:[g?u.jsx("div",{className:"folder-grid-content w-full h-full flex flex-col items-center justify-center text-gray-500",children:u.jsx(_o,{className:"w-12 h-12 mb-2 text-amber-500"})}):r.previewUrl&&!x?u.jsx("img",{src:r.previewUrl,className:"w-full h-full object-cover",loading:"lazy",onError:()=>y(!0)}):u.jsx("div",{className:"media-placeholder w-full h-full flex items-center justify-center bg-gray-800 text-white font-bold",children:r.type==="video"?u.jsx(vg,{className:"w-10 h-10 text-white/80"}):"IMG"}),s&&!g?u.jsx("div",{className:"selection-badge-container absolute top-2 left-2",children:u.jsx("div",{className:`selection-badge w-6 h-6 rounded-full border-2 flex items-center justify-center shadow-sm ${o?"bg-blue-600 border-blue-600 text-white":"border-white bg-black/20"}`,children:o&&u.jsx(Il,{className:"w-4 h-4"})})}):u.jsxs("div",{className:"file-menu-trigger-container absolute top-1 right-1 flex flex-col items-center gap-1",children:[u.jsx("button",{className:"p-1 bg-gray-500/40 rounded-full text-white hover:bg-gray-500/60",onClick:k,children:u.jsx(vl,{className:"w-4 h-4 -rotate-90"})}),i&&u.jsx(Hl,{className:"w-4 h-4 text-yellow-400 drop-shadow"})]}),r.type==="video"&&u.jsx("div",{className:"video-label absolute top-1 left-1 bg-black/50 px-1 rounded text-[10px] text-white",children:"VID"})]}),u.jsx("div",{className:"file-name text-xs text-gray-700 truncate px-1",children:r.name})]})}function e4({visible:r}){const{source:l,currentFolder:s,isLoading:o,viewMode:i,filter:d,sort:p,favorites:h,selectionMode:m,selectedIds:g,setCurrentFolder:x,navigateToPath:y,fetchFolders:N,fetchFiles:k,toggleFavorite:S,toggleSelection:w,getDisplayedFiles:M,refresh:j,selectIds:O,toggleSelectionMode:D,setFilter:z,setSort:_}=_t(),A=_t(Z=>Z.selectionActionOpen),L=_t(Z=>Z.setSelectionActionOpen),B=_t(Z=>Z.filterModalOpen),G=_t(Z=>Z.setFilterModalOpen),U=_t(Z=>Z.setOutputsViewerOpen),W=_t(Z=>Z.addFavorites),ne=_t(Z=>Z.removeFavorites),ve=_t(Z=>Z.clearSelection),ae=J(Z=>Z.loadWorkflow),re=Ln(Z=>Z.setCurrentPanel),R=J(Z=>Z.workflow),F=J(Z=>Z.originalWorkflow),pe=b.useMemo(()=>!!(R&&F&&JSON.stringify(R)!==JSON.stringify(F)),[R,F]),[xe,he]=b.useState(null),[T,I]=b.useState(null),[E,$]=b.useState(null),[Q,fe]=b.useState(null),[te,le]=b.useState(!1),[be,Oe]=b.useState(!1),[qe,ee]=b.useState(!1),[Te,Ne]=b.useState(null),[_e,lt]=b.useState([]),[Fe,we]=b.useState(!1),[ye,Me]=b.useState(""),[Le,it]=b.useState(!1),[ht,Ze]=b.useState([]),[Se,Ae]=b.useState(0),Ke=b.useRef(null),$e=b.useRef(!1),[Qe,Xe]=b.useState(()=>localStorage.getItem(h0)==="true"),[vt,oe]=b.useState({}),Pe=b.useRef(null),et=b.useRef(null),gt=b.useRef(!1),Gt=()=>{I(null),Pe.current=null},cr=()=>{le(!1),$(null),et.current=null},dr=(Z,je)=>{Pe.current=je?.onDeleted??null,I(Z)},fr=(Z,je)=>{Z.type==="image"&&(et.current=je?.onLoaded??null,$(Z),le(!0))};Di({open:!!xe,onDismiss:()=>he(null),triggerRef:{current:null},contentRef:Ke}),b.useEffect(()=>{$e.current=!1},[l]),b.useEffect(()=>{r&&!$e.current&&!o&&($e.current=!0,N(),k())},[r,N,k,o]),b.useEffect(()=>{!r&&Le&&(it(!1),U(!1))},[r,Le,U]),b.useEffect(()=>{!r&&B&&G(!1)},[r,B,G]);const bn=M(),sn=_t(Z=>Z.sort.mode),hn=Z=>{const Ie=M().filter(at=>(at.type==="image"||at.type==="video")&&at.fullUrl),Mt=Ie.map(at=>({src:at.fullUrl,alt:at.name,mediaType:Vo(at.name),file:at,filename:at.name})),Ft=Ie.findIndex(at=>at.id===Z.id);Ft>=0&&(Ze(Mt),Ae(Ft),it(!0),U(!0))},gn=()=>{it(!1),U(!1)},$n=Z=>{Z.file&&dr(Z.file,{onDeleted:je=>{Ze(Ie=>{const Mt=Ie.findIndex(at=>at.file?.id===je.id),Ft=Ie.filter(at=>at.file?.id!==je.id);return Ae(at=>Ft.length===0?0:Mt===-1?at:Mt<at?at-1:Mt===at?Math.min(at,Ft.length-1):at),Ft.length===0&&(it(!1),U(!1)),Ft})}})},ke=Z=>{!Z.file||Z.file.type!=="image"||fr(Z.file,{onLoaded:()=>{it(!1),U(!1)}})},ze=Z=>{Z.file&&ie(Z.file,{closeViewer:!0})},{folders:V,nonFolders:ue}=b.useMemo(()=>{const Z=[],je=[];for(const Ie of bn)Ie.type==="folder"?Z.push(Ie):je.push(Ie);return{folders:Z,nonFolders:je}},[bn]),ce=sn.startsWith("name"),Ce=sn.startsWith("size"),Be=d.favoritesOnly||!ce&&!Ce,Ye=b.useMemo(()=>{if(ce){const je=[];for(const Ie of ue){const Mt=Ie.name?.trim()?.charAt(0).toUpperCase()||"#",Ft=`Starting with ${Mt}`,at=je[je.length-1];at&&at.key===Mt?at.files.push(Ie):je.push({key:Mt,label:Ft,files:[Ie]})}return je}if(Ce){const je=[];for(const Ie of ue){const Ft=(Ie.size??0)/(1024*1024),at=Ft<1?0:Math.round(Ft),Sn=at===0?"<1MB":`${at}MB`,qo=at===0?"<1MB":`${at}MB`,Ta=je[je.length-1];Ta&&Ta.key===Sn?Ta.files.push(Ie):je.push({key:Sn,label:qo,files:[Ie]})}return je}if(!Be)return[{key:"all",label:"All files",files:ue}];const Z=[];for(const je of ue){const Ie=je.date?new Date(je.date).toISOString().slice(0,10):"unknown",Mt=J5(je.date),Ft=Z[Z.length-1];Ft&&Ft.key===Ie?Ft.files.push(je):Z.push({key:Ie,label:Mt,files:[je]})}return Z},[ue,Be,ce,Ce]),Re=()=>{const Z=!Qe;Xe(Z),localStorage.setItem(h0,String(Z))},st=Z=>{oe(je=>({...je,[Z]:!je[Z]}))},pt=Z=>{hn(Z)},yt=(Z,je)=>{je.preventDefault();const Ie=Math.min(je.clientX,window.innerWidth-200),Mt=Math.min(je.clientY,window.innerHeight-200);he({file:Z,x:Ie,y:Mt})},bt=()=>{xe&&(S(xe.file.id),he(null))},wt=()=>{xe&&xe.file.type!=="folder"&&(m||D(),O([xe.file.id],"replace"),he(null))},xt=()=>{xe&&xe.file.type==="image"&&($(xe.file),le(!0),he(null))},Dt=()=>{xe&&(I(xe.file),he(null))},qt=()=>{g.length!==0&&(L(!1),Oe(!0))},wn=async(Z,je)=>{try{await Rx({file:Z,source:l,loadWorkflow:ae,onLoaded:()=>{re("workflow"),je?.closeViewer&&(it(!1),U(!1))}})}catch(Ie){console.error("Failed to load workflow from file:",Ie),window.alert("Failed to load workflow from file.")}},ie=(Z,je)=>{if(Z.type==="folder"){window.alert("Workflow metadata is not available for folders.");return}if(pe){gt.current=!!je?.closeViewer,fe(Z);return}wn(Z,je)},tt=()=>{if(!xe)return;const Z=xe.file;he(null),ie(Z,{closeViewer:!1})},It=async()=>{if(!Q)return;const Z=Q,je=gt.current;gt.current=!1,fe(null),await wn(Z,{closeViewer:je})},Ht=()=>{gt.current=!1,fe(null)},an=async()=>{if(!T)return;const Z=T;try{const je=Do(T,l);await jd(je,l),j(),Pe.current?.(Z),Pe.current=null}catch(je){console.error("Failed to delete file:",je),window.alert("Failed to delete file.")}finally{I(null)}},un=async()=>{if(g.length===0){Oe(!1);return}try{const Z=`${l}/`,je=g.map(Ie=>Ie.startsWith(Z)?Ie.slice(Z.length):Ie);await Promise.all(je.map(Ie=>jd(Ie,l))),j(),ve()}catch(Z){console.error("Failed to delete selected files:",Z),window.alert("Failed to delete selected files.")}finally{Oe(!1)}},Yn=()=>{if(g.length===0)return;g.every(je=>h.includes(je))?ne(g):W(g),L(!1)},yl=()=>{g.length!==0&&(L(!1),Ne(s),ee(!0))},$r=async()=>{if(g.length!==0)try{const Z=`${l}/`,je=g.map(Ie=>Ie.startsWith(Z)?Ie.slice(Z.length):Ie);await w1(je,Te,l),j()}catch(Z){console.error("Failed to move selected files:",Z),window.alert("Failed to move selected files.")}finally{ee(!1)}},Kt=async()=>{const Z=ye.trim();if(!Z)return;const je=Te?`${Te}/${Z}`:Z;try{await S1(je,l),Me(""),we(!0);const Ie=await Nd(l,1e3,0,"modified",!1,Te);lt(Ie.filter(Mt=>Mt.type==="folder"))}catch(Ie){console.error("Failed to create folder:",Ie),window.alert("Failed to create folder.")}finally{we(!1)}},br=b.useMemo(()=>{const je=[{name:l==="output"?"Outputs":"Inputs",path:null}];if(s){const Ie=s.split("/");Ie.forEach((Mt,Ft)=>{je.push({name:Mt,path:Ie.slice(0,Ft+1).join("/")})})}return je},[l,s]),Go=()=>{const Z=br.length,je=[];return Z<=3?br.forEach((Ie,Mt)=>{je.push({...Ie,isClickable:Mt<Z-1})}):(je.push({...br[0],isClickable:!0}),je.push({name:"...",path:br[Z-3].path,isEllipsis:!0,isClickable:!0}),je.push({...br[Z-2],isClickable:!0}),je.push({...br[Z-1],isClickable:!1})),u.jsx("div",{id:"outputs-breadcrumb-trail",className:"flex items-center text-sm overflow-hidden whitespace-nowrap",children:je.map((Ie,Mt)=>u.jsxs("div",{className:"flex items-center min-w-0",children:[Mt>0&&u.jsx("span",{className:"mx-1.5 text-gray-400 shrink-0",children:"/"}),u.jsx("button",{onClick:()=>Ie.isClickable&&y(Ie.path),disabled:!Ie.isClickable,className:`
                truncate transition-colors
                ${Ie.isClickable?"text-blue-600 hover:text-blue-700 active:opacity-70":"text-gray-700 font-medium"}
                ${Ie.isEllipsis?"px-1 bg-gray-100 rounded":""}
              `,title:Ie.name,children:Ie.name})]},Mt))})};b.useEffect(()=>{if(!qe)return;let Z=!1;return(async()=>{we(!0);try{const Ie=await Nd(l,1e3,0,"modified",!1,Te);if(Z)return;lt(Ie.filter(Mt=>Mt.type==="folder"))}catch(Ie){if(Z)return;console.error("Failed to load folders:",Ie),lt([])}finally{Z||we(!1)}})(),()=>{Z=!0}},[qe,Te,l]),b.useEffect(()=>{A&&g.length===0&&L(!1)},[A,g.length,L]);const wr=()=>{const Z=_t.getState();Z.clearSelection(),Z.toggleSelectionMode()},Yr=()=>{if(!Te)return;const Z=Te.split("/");Z.pop(),Ne(Z.length?Z.join("/"):null)},Gi=Z=>()=>{Ne(Te?`${Te}/${Z}`:Z)};return u.jsx("div",{id:"outputs-panel-wrapper",className:"absolute inset-x-0 top-[60px] bottom-0",style:{display:r?"block":"none"},children:u.jsxs("div",{id:"outputs-panel-root",className:"h-full bg-white flex flex-col pt-[4px] pb-[80px]",children:[u.jsx("div",{id:"outputs-panel-header",className:"px-4 py-3 flex flex-col gap-3 border-b border-gray-100",children:u.jsxs("div",{id:"outputs-header-top-row",className:"flex items-center justify-between min-h-[24px]",children:[Go(),m&&u.jsxs("div",{className:"selection-status-container flex items-center gap-2 shrink-0 ml-2",children:[u.jsxs("span",{className:"text-[10px] font-bold text-blue-600 uppercase",children:[g.length," selected"]}),u.jsx("button",{onClick:wr,className:"text-[10px] text-gray-500 underline uppercase font-bold",children:"Clear"})]})]})}),u.jsxs("div",{id:"outputs-content-container",className:"flex-1 overflow-y-auto p-4",children:[V.length>0&&u.jsxs("div",{id:"outputs-folders-section",className:"mb-4",children:[u.jsxs("button",{onClick:Re,className:"flex items-center gap-2 w-full text-left mb-2 py-1 text-sm font-medium text-gray-600 hover:text-gray-900",children:[Qe?u.jsx(wi,{className:"w-4 h-4"}):u.jsx(yi,{className:"w-4 h-4"}),u.jsxs("span",{children:["Folders (",V.length,")"]})]}),!Qe&&u.jsx("div",{className:"flex flex-col border border-gray-200 rounded-lg overflow-hidden",children:V.map(Z=>u.jsx(bd,{file:Z,viewMode:"list",selectionMode:m,isSelected:g.includes(Z.id),isFavorited:h.includes(Z.id),onNavigateFolder:x,onOpen:pt,onMenu:yt,onToggleSelection:w},Z.id))})]}),u.jsx("div",{id:"outputs-files-section",className:"flex flex-col gap-4",children:Ye.map(Z=>u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center justify-between gap-3",children:[u.jsxs("button",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wide text-gray-500 hover:text-gray-800",onClick:()=>st(Z.key),children:[vt[Z.key]?u.jsx(wi,{className:"w-3.5 h-3.5"}):u.jsx(yi,{className:"w-3.5 h-3.5"}),u.jsxs("span",{children:[Z.label," (",Z.files.length,")"]})]}),m&&u.jsx("button",{className:"text-[10px] font-bold uppercase text-blue-600 hover:text-blue-700",onClick:()=>O(Z.files.map(je=>je.id)),children:"Select all"})]}),!vt[Z.key]&&(i==="grid"?u.jsx("div",{className:"grid grid-cols-2 gap-4 auto-rows-min",children:Z.files.map(je=>u.jsx(bd,{file:je,viewMode:i,selectionMode:m,isSelected:g.includes(je.id),isFavorited:h.includes(je.id),onNavigateFolder:x,onOpen:pt,onMenu:yt,onToggleSelection:w},je.id))}):u.jsx("div",{className:"flex flex-col",children:Z.files.map(je=>u.jsx(bd,{file:je,viewMode:i,selectionMode:m,isSelected:g.includes(je.id),isFavorited:h.includes(je.id),onNavigateFolder:x,onOpen:pt,onMenu:yt,onToggleSelection:w},je.id))}))]},Z.key))}),o&&u.jsx("div",{id:"outputs-loading-indicator",className:"py-4 flex justify-center",children:u.jsx("span",{className:"text-gray-400 text-sm",children:"Loading..."})}),!o&&bn.length===0&&u.jsx("div",{id:"outputs-empty-message",className:"text-center text-gray-400 py-8",children:s?"No images in this folder":l==="output"?"No generated images yet":"No imported images"})]}),xe&&u.jsxs(u.Fragment,{children:[u.jsx("div",{id:"outputs-context-menu-overlay",className:"fixed inset-0 z-[1690]",onClick:()=>he(null),onPointerDown:Z=>Z.stopPropagation()}),u.jsxs("div",{id:"outputs-context-menu",ref:Ke,className:"fixed z-[1700] bg-white shadow-xl rounded-lg border border-gray-200 w-52 py-1",style:{top:xe.y,left:xe.x},onPointerDown:Z=>Z.stopPropagation(),onClick:Z=>Z.stopPropagation(),children:[u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:bt,children:[h.includes(xe.file.id)?u.jsx(Hl,{className:"w-4 h-4"}):u.jsx(bi,{className:"w-4 h-4"}),h.includes(xe.file.id)?"Unfavorite":"Favorite"]}),xe.file.type!=="folder"&&u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:wt,children:[u.jsx(Il,{className:"w-4 h-4 text-gray-500"}),"Select"]}),xe.file.type==="image"&&u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:tt,children:[u.jsx(Oa,{className:"w-4 h-4 text-gray-500"}),"Load workflow"]}),xe.file.type==="image"&&u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:xt,children:[u.jsx(T0,{className:"w-4 h-4 text-gray-500"}),"Use in workflow"]}),u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:Dt,children:[u.jsx(Hr,{className:"w-4 h-4"}),"Delete"]})]})]}),A&&u.jsx("div",{id:"outputs-selection-actions",className:"fixed inset-0 z-[1800] bg-black/40 flex items-center justify-center p-4",onClick:()=>L(!1),role:"dialog","aria-modal":"true",children:u.jsxs("div",{className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:Z=>Z.stopPropagation(),children:[u.jsxs("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:[g.length," selected"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Yn,children:[g.every(Z=>h.includes(Z))?u.jsx(bi,{className:"w-4 h-4"}):u.jsx(Hl,{className:"w-4 h-4"}),g.every(Z=>h.includes(Z))?"Unfavorite":"Favorite"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:yl,children:[u.jsx(_o,{className:"w-4 h-4 text-gray-500"}),"Move"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:qt,children:[u.jsx(Hr,{className:"w-4 h-4"}),"Delete"]}),u.jsx("button",{className:"w-full text-left px-4 py-3 text-sm text-gray-600 hover:bg-gray-50",onClick:()=>L(!1),children:"Cancel"})]})}),qe&&u.jsx("div",{id:"outputs-move-picker-overlay",className:"fixed inset-0 z-[1850] bg-black/50 flex items-center justify-center p-4",onClick:()=>ee(!1),role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-move-picker",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:Z=>Z.stopPropagation(),children:[u.jsxs("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:["Move to ",Te||"root"]}),u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[Fe&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"Loading folders..."}),!Fe&&Te&&Te.includes("/")&&u.jsx("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Yr,children:u.jsx("span",{className:"text-gray-500",children:".."})}),!Fe&&_e.length===0&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"No folders"}),!Fe&&_e.map(Z=>u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Gi(Z.name),children:[u.jsx(_o,{className:"w-4 h-4 text-amber-500"}),Z.name]},Z.id)),u.jsx("div",{className:"px-4 py-3 border-t border-gray-100",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{value:ye,onChange:Z=>Me(Z.target.value),placeholder:"New folder",className:"flex-1 border border-gray-200 rounded-lg px-3 py-2 text-sm"}),u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-blue-600 hover:text-blue-700",onClick:Kt,children:"Create"})]})})]}),u.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg",onClick:()=>ee(!1),children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg",onClick:$r,children:"Submit"})]})]})}),T&&u.jsx("div",{id:"outputs-delete-confirm-overlay",className:"fixed inset-0 z-[2100] bg-black/50 flex items-center justify-center p-4",onClick:Gt,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-delete-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:Z=>Z.stopPropagation(),children:[u.jsx("div",{id:"outputs-delete-confirm-title",className:"text-gray-900 text-base font-semibold",children:"Delete file?"}),u.jsx("div",{id:"outputs-delete-confirm-description",className:"text-gray-600 text-sm mt-1",children:T.type==="folder"?`This will permanently delete the folder "${T.name}" and all of its contents from the server. This cannot be undone.`:`This will permanently delete "${T.name}" from the server. This cannot be undone.`}),u.jsxs("div",{id:"outputs-delete-confirm-actions",className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:Gt,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:an,children:"Delete"})]})]})}),be&&u.jsx("div",{id:"outputs-delete-selection-overlay",className:"fixed inset-0 z-[1800] bg-black/50 flex items-center justify-center p-4",onClick:()=>Oe(!1),role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-delete-selection-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:Z=>Z.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Delete selected files?"}),u.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:["This will permanently delete ",g.length," selected file",g.length===1?"":"s"," from the server. This cannot be undone."]}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:()=>Oe(!1),children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:un,children:"Delete"})]})]})}),u.jsx(Dx,{open:te,file:E,source:l,onClose:cr,onLoaded:()=>{le(!1),$(null),et.current?.(),et.current=null}}),u.jsx(Z5,{open:B,onClose:()=>G(!1),filter:d,sort:p,onChangeFilter:z,onChangeSort:_}),u.jsx(Ax,{file:Q,onCancel:Ht,onConfirm:It}),u.jsx(Lx,{open:Le,items:ht,index:Se,onClose:gn,onIndexChange:Ae,onDelete:$n,onLoadInWorkflow:ke,onLoadWorkflow:ze,showMetadataToggle:!0})]})})}function t4(){const r=Ln(R=>R.currentPanel),l=Ln(R=>R.setCurrentPanel),s=Md(R=>R.appMenuOpen),o=Un(R=>R.viewerOpen),i=Un(R=>R.setViewerState),d=J(R=>R.followQueue),p=J(R=>R.setFollowQueue),h=yn(R=>R.bookmarkRepositioningActive),m=b.useRef(null),{isInputFocused:g}=_x(),x=_t(R=>R.outputsViewerOpen),y=_t(R=>R.selectionMode),N=_t(R=>R.filterModalOpen),k=_t(R=>R.selectionActionOpen),S=_t(R=>R.currentFolder),w=_t(R=>R.navigateUp);X5();const M=b.useCallback(()=>{r==="workflow"?l("queue"):r==="outputs"&&l("workflow")},[r,l]),j=b.useCallback(()=>{r==="outputs"&&S?w():r==="workflow"?l("outputs"):r==="queue"&&l("workflow")},[r,S,w,l]),O=r==="workflow"||r==="outputs",D=r==="workflow"||r==="queue"||r==="outputs"&&!!S,{swipeOffset:z,isSwiping:_,setSwipeEnabled:A,resetSwipeState:L}=P5({onSwipeLeft:O?M:void 0,onSwipeRight:D?j:void 0,enabled:!g&&!o&&!s&&!x&&!h&&!y&&!N&&!k}),B=J(R=>R.setNodeTypes),G=Si(R=>R.theme),U=J(R=>R.workflowLoadedAt),W=rt(R=>R.fetchQueue),ne=_n(R=>R.history);b.useEffect(()=>{!_&&z!==0&&L()},[_,z,L]),b.useEffect(()=>{x&&L()},[x,L]);const ve=()=>{i({viewerOpen:!1}),p(!1),A(!0),L()};b.useEffect(()=>{b0().then(R=>{B(R)}).catch(R=>{console.error("Failed to load node types:",R)})},[B]),b.useEffect(()=>{W()},[W]);const ae=(R,F,pe=!0)=>{A(!1),L(),i({viewerImages:R,viewerIndex:F,viewerScale:1,viewerTranslate:{x:0,y:0},viewerOpen:!0}),p(pe)},re=()=>{const R=mf(ne,{onlyOutput:!0,alt:"Generation"});A(!1),L();const F=R.length>0?0:-1;i({viewerImages:R,viewerIndex:F,viewerScale:1,viewerTranslate:{x:0,y:0},viewerOpen:!0}),p(!0)};return b.useEffect(()=>{const R=document.documentElement;R.classList.toggle("dark",G==="dark"),R.style.colorScheme=G},[G]),b.useEffect(()=>{U&&queueMicrotask(()=>{p(!1)})},[U,p]),u.jsxs("div",{id:"app-root",className:"min-h-screen bg-gray-100",children:[u.jsx(Wb,{mode:r}),u.jsxs("main",{id:"main-content",ref:m,className:"pt-[60px] pb-[80px] min-h-screen relative",children:[u.jsxs(u.Fragment,{children:[u.jsx(e4,{visible:r==="outputs"}),u.jsx(r5,{visible:r==="workflow",onImageClick:ae}),u.jsx(T5,{visible:r==="queue",onImageClick:ae})]}),u.jsx("div",{id:"bottom-bar-spacer",className:"fixed inset-x-0 bottom-0 bg-gray-100 pointer-events-none z-[1500]",style:{height:"var(--bottom-bar-offset, 80px)"}})]}),u.jsx(p5,{currentPanel:r,viewerOpen:o,followQueue:d,onToggleFollowQueue:()=>p(!d),onOpenFollowQueue:re}),u.jsx(Q5,{onClose:ve})]})}Ky.createRoot(document.getElementById("root")).render(u.jsx(b.StrictMode,{children:u.jsx(t4,{})}));
//# sourceMappingURL=index-BE416CjH.js.map
