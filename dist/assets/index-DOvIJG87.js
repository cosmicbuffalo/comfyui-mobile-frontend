function qv(r,l){for(var o=0;o<l.length;o++){const s=l[o];if(typeof s!="string"&&!Array.isArray(s)){for(const u in s)if(u!=="default"&&!(u in r)){const d=Object.getOwnPropertyDescriptor(s,u);d&&Object.defineProperty(r,u,d.get?d:{enumerable:!0,get:()=>s[u]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function o(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(u){if(u.ep)return;u.ep=!0;const d=o(u);fetch(u.href,d)}})();function Wv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var td={exports:{}},jo={};var tg;function Fv(){if(tg)return jo;tg=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function o(s,u,d){var p=null;if(d!==void 0&&(p=""+d),u.key!==void 0&&(p=""+u.key),"key"in u){d={};for(var h in u)h!=="key"&&(d[h]=u[h])}else d=u;return u=d.ref,{$$typeof:r,type:s,key:p,ref:u!==void 0?u:null,props:d}}return jo.Fragment=l,jo.jsx=o,jo.jsxs=o,jo}var ng;function $v(){return ng||(ng=1,td.exports=Fv()),td.exports}var i=$v(),nd={exports:{}},et={};var rg;function Yv(){if(rg)return et;rg=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),p=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),N=Symbol.iterator;function C(T){return T===null||typeof T!="object"?null:(T=N&&T[N]||T["@@iterator"],typeof T=="function"?T:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,M={};function j(T,I,O){this.props=T,this.context=I,this.refs=M,this.updater=O||S}j.prototype.isReactComponent={},j.prototype.setState=function(T,I){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,I,"setState")},j.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function E(){}E.prototype=j.prototype;function D(T,I,O){this.props=T,this.context=I,this.refs=M,this.updater=O||S}var _=D.prototype=new E;_.constructor=D,w(_,j.prototype),_.isPureReactComponent=!0;var L=Array.isArray;function R(){}var A={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function G(T,I,O){var F=O.ref;return{$$typeof:r,type:T,key:I,ref:F!==void 0?F:null,props:O}}function U(T,I){return G(T.type,I,T.props)}function W(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function J(T){var I={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(O){return I[O]})}var xe=/\/+/g;function ae(T,I){return typeof T=="object"&&T!==null&&T.key!=null?J(""+T.key):I.toString(36)}function le(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(R,R):(T.status="pending",T.then(function(I){T.status==="pending"&&(T.status="fulfilled",T.value=I)},function(I){T.status==="pending"&&(T.status="rejected",T.reason=I)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function z(T,I,O,F,X){var pe=typeof T;(pe==="undefined"||pe==="boolean")&&(T=null);var ee=!1;if(T===null)ee=!0;else switch(pe){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(T.$$typeof){case r:case l:ee=!0;break;case x:return ee=T._init,z(ee(T._payload),I,O,F,X)}}if(ee)return X=X(T),ee=F===""?"."+ae(T,0):F,L(X)?(O="",ee!=null&&(O=ee.replace(xe,"$&/")+"/"),z(X,I,O,"",function(Oe){return Oe})):X!=null&&(W(X)&&(X=U(X,O+(X.key==null||T&&T.key===X.key?"":(""+X.key).replace(xe,"$&/")+"/")+ee)),I.push(X)),1;ee=0;var oe=F===""?".":F+":";if(L(T))for(var ve=0;ve<T.length;ve++)F=T[ve],pe=oe+ae(F,ve),ee+=z(F,I,O,pe,X);else if(ve=C(T),typeof ve=="function")for(T=ve.call(T),ve=0;!(F=T.next()).done;)F=F.value,pe=oe+ae(F,ve++),ee+=z(F,I,O,pe,X);else if(pe==="object"){if(typeof T.then=="function")return z(le(T),I,O,F,X);throw I=String(T),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return ee}function Y(T,I,O){if(T==null)return T;var F=[],X=0;return z(T,F,"","",function(pe){return I.call(O,pe,X++)}),F}function de(T){if(T._status===-1){var I=T._result;I=I(),I.then(function(O){(T._status===0||T._status===-1)&&(T._status=1,T._result=O)},function(O){(T._status===0||T._status===-1)&&(T._status=2,T._result=O)}),T._status===-1&&(T._status=0,T._result=I)}if(T._status===1)return T._result.default;throw T._result}var be=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},ye={map:Y,forEach:function(T,I,O){Y(T,function(){I.apply(this,arguments)},O)},count:function(T){var I=0;return Y(T,function(){I++}),I},toArray:function(T){return Y(T,function(I){return I})||[]},only:function(T){if(!W(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return et.Activity=v,et.Children=ye,et.Component=j,et.Fragment=o,et.Profiler=u,et.PureComponent=D,et.StrictMode=s,et.Suspense=m,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,et.__COMPILER_RUNTIME={__proto__:null,c:function(T){return A.H.useMemoCache(T)}},et.cache=function(T){return function(){return T.apply(null,arguments)}},et.cacheSignal=function(){return null},et.cloneElement=function(T,I,O){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var F=w({},T.props),X=T.key;if(I!=null)for(pe in I.key!==void 0&&(X=""+I.key),I)!B.call(I,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&I.ref===void 0||(F[pe]=I[pe]);var pe=arguments.length-2;if(pe===1)F.children=O;else if(1<pe){for(var ee=Array(pe),oe=0;oe<pe;oe++)ee[oe]=arguments[oe+2];F.children=ee}return G(T.type,X,F)},et.createContext=function(T){return T={$$typeof:p,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:d,_context:T},T},et.createElement=function(T,I,O){var F,X={},pe=null;if(I!=null)for(F in I.key!==void 0&&(pe=""+I.key),I)B.call(I,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(X[F]=I[F]);var ee=arguments.length-2;if(ee===1)X.children=O;else if(1<ee){for(var oe=Array(ee),ve=0;ve<ee;ve++)oe[ve]=arguments[ve+2];X.children=oe}if(T&&T.defaultProps)for(F in ee=T.defaultProps,ee)X[F]===void 0&&(X[F]=ee[F]);return G(T,pe,X)},et.createRef=function(){return{current:null}},et.forwardRef=function(T){return{$$typeof:h,render:T}},et.isValidElement=W,et.lazy=function(T){return{$$typeof:x,_payload:{_status:-1,_result:T},_init:de}},et.memo=function(T,I){return{$$typeof:g,type:T,compare:I===void 0?null:I}},et.startTransition=function(T){var I=A.T,O={};A.T=O;try{var F=T(),X=A.S;X!==null&&X(O,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(R,be)}catch(pe){be(pe)}finally{I!==null&&O.types!==null&&(I.types=O.types),A.T=I}},et.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},et.use=function(T){return A.H.use(T)},et.useActionState=function(T,I,O){return A.H.useActionState(T,I,O)},et.useCallback=function(T,I){return A.H.useCallback(T,I)},et.useContext=function(T){return A.H.useContext(T)},et.useDebugValue=function(){},et.useDeferredValue=function(T,I){return A.H.useDeferredValue(T,I)},et.useEffect=function(T,I){return A.H.useEffect(T,I)},et.useEffectEvent=function(T){return A.H.useEffectEvent(T)},et.useId=function(){return A.H.useId()},et.useImperativeHandle=function(T,I,O){return A.H.useImperativeHandle(T,I,O)},et.useInsertionEffect=function(T,I){return A.H.useInsertionEffect(T,I)},et.useLayoutEffect=function(T,I){return A.H.useLayoutEffect(T,I)},et.useMemo=function(T,I){return A.H.useMemo(T,I)},et.useOptimistic=function(T,I){return A.H.useOptimistic(T,I)},et.useReducer=function(T,I,O){return A.H.useReducer(T,I,O)},et.useRef=function(T){return A.H.useRef(T)},et.useState=function(T){return A.H.useState(T)},et.useSyncExternalStore=function(T,I,O){return A.H.useSyncExternalStore(T,I,O)},et.useTransition=function(){return A.H.useTransition()},et.version="19.2.3",et}var lg;function Yd(){return lg||(lg=1,nd.exports=Yv()),nd.exports}var b=Yd();const ka=Wv(b),ag=qv({__proto__:null,default:ka},[b]);var rd={exports:{}},Co={},ld={exports:{}},ad={};var og;function Qv(){return og||(og=1,(function(r){function l(z,Y){var de=z.length;z.push(Y);e:for(;0<de;){var be=de-1>>>1,ye=z[be];if(0<u(ye,Y))z[be]=Y,z[de]=ye,de=be;else break e}}function o(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var Y=z[0],de=z.pop();if(de!==Y){z[0]=de;e:for(var be=0,ye=z.length,T=ye>>>1;be<T;){var I=2*(be+1)-1,O=z[I],F=I+1,X=z[F];if(0>u(O,de))F<ye&&0>u(X,O)?(z[be]=X,z[F]=de,be=F):(z[be]=O,z[I]=de,be=I);else if(F<ye&&0>u(X,de))z[be]=X,z[F]=de,be=F;else break e}}return Y}function u(z,Y){var de=z.sortIndex-Y.sortIndex;return de!==0?de:z.id-Y.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var p=Date,h=p.now();r.unstable_now=function(){return p.now()-h}}var m=[],g=[],x=1,v=null,N=3,C=!1,S=!1,w=!1,M=!1,j=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function _(z){for(var Y=o(g);Y!==null;){if(Y.callback===null)s(g);else if(Y.startTime<=z)s(g),Y.sortIndex=Y.expirationTime,l(m,Y);else break;Y=o(g)}}function L(z){if(w=!1,_(z),!S)if(o(m)!==null)S=!0,R||(R=!0,J());else{var Y=o(g);Y!==null&&le(L,Y.startTime-z)}}var R=!1,A=-1,B=5,G=-1;function U(){return M?!0:!(r.unstable_now()-G<B)}function W(){if(M=!1,R){var z=r.unstable_now();G=z;var Y=!0;try{e:{S=!1,w&&(w=!1,E(A),A=-1),C=!0;var de=N;try{t:{for(_(z),v=o(m);v!==null&&!(v.expirationTime>z&&U());){var be=v.callback;if(typeof be=="function"){v.callback=null,N=v.priorityLevel;var ye=be(v.expirationTime<=z);if(z=r.unstable_now(),typeof ye=="function"){v.callback=ye,_(z),Y=!0;break t}v===o(m)&&s(m),_(z)}else s(m);v=o(m)}if(v!==null)Y=!0;else{var T=o(g);T!==null&&le(L,T.startTime-z),Y=!1}}break e}finally{v=null,N=de,C=!1}Y=void 0}}finally{Y?J():R=!1}}}var J;if(typeof D=="function")J=function(){D(W)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,ae=xe.port2;xe.port1.onmessage=W,J=function(){ae.postMessage(null)}}else J=function(){j(W,0)};function le(z,Y){A=j(function(){z(r.unstable_now())},Y)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(z){z.callback=null},r.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<z?Math.floor(1e3/z):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(z){switch(N){case 1:case 2:case 3:var Y=3;break;default:Y=N}var de=N;N=Y;try{return z()}finally{N=de}},r.unstable_requestPaint=function(){M=!0},r.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var de=N;N=z;try{return Y()}finally{N=de}},r.unstable_scheduleCallback=function(z,Y,de){var be=r.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?be+de:be):de=be,z){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=de+ye,z={id:x++,callback:Y,priorityLevel:z,startTime:de,expirationTime:ye,sortIndex:-1},de>be?(z.sortIndex=de,l(g,z),o(m)===null&&z===o(g)&&(w?(E(A),A=-1):w=!0,le(L,de-be))):(z.sortIndex=ye,l(m,z),S||C||(S=!0,R||(R=!0,J()))),z},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(z){var Y=N;return function(){var de=N;N=Y;try{return z.apply(this,arguments)}finally{N=de}}}})(ad)),ad}var sg;function Xv(){return sg||(sg=1,ld.exports=Qv()),ld.exports}var od={exports:{}},yn={};var ig;function Pv(){if(ig)return yn;ig=1;var r=Yd();function l(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(l(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(m,g,x){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:v==null?null:""+v,children:m,containerInfo:g,implementation:x}}var p=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,yn.createPortal=function(m,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(l(299));return d(m,g,null,x)},yn.flushSync=function(m){var g=p.T,x=s.p;try{if(p.T=null,s.p=2,m)return m()}finally{p.T=g,s.p=x,s.d.f()}},yn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},yn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},yn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var x=g.as,v=h(x,g.crossOrigin),N=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:N,fetchPriority:C}):x==="script"&&s.d.X(m,{crossOrigin:v,integrity:N,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},yn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=h(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},yn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,v=h(x,g.crossOrigin);s.d.L(m,x,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},yn.preloadModule=function(m,g){if(typeof m=="string")if(g){var x=h(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},yn.requestFormReset=function(m){s.d.r(m)},yn.unstable_batchedUpdates=function(m,g){return m(g)},yn.useFormState=function(m,g,x){return p.H.useFormState(m,g,x)},yn.useFormStatus=function(){return p.H.useHostTransitionStatus()},yn.version="19.2.3",yn}var ug;function v0(){if(ug)return od.exports;ug=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),od.exports=Pv(),od.exports}var cg;function Zv(){if(cg)return Co;cg=1;var r=Xv(),l=Yd(),o=v0();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(d(e)!==e)throw Error(s(188))}function g(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,a=t;;){var c=n.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){n=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===n)return m(c),e;if(f===a)return m(c),t;f=f.sibling}throw Error(s(188))}if(n.return!==a.return)n=c,a=f;else{for(var y=!1,k=c.child;k;){if(k===n){y=!0,n=c,a=f;break}if(k===a){y=!0,a=c,n=f;break}k=k.sibling}if(!y){for(k=f.child;k;){if(k===n){y=!0,n=f,a=c;break}if(k===a){y=!0,a=f,n=c;break}k=k.sibling}if(!y)throw Error(s(189))}}if(n.alternate!==a)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,N=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),D=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Symbol.for("react.client.reference");function ae(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case j:return"Profiler";case M:return"StrictMode";case L:return"Suspense";case R:return"SuspenseList";case G:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case D:return e.displayName||"Context";case E:return(e._context.displayName||"Context")+".Consumer";case _:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case A:return t=e.displayName||null,t!==null?t:ae(e.type)||"Memo";case B:t=e._payload,e=e._init;try{return ae(e(t))}catch{}}return null}var le=Array.isArray,z=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},be=[],ye=-1;function T(e){return{current:e}}function I(e){0>ye||(e.current=be[ye],be[ye]=null,ye--)}function O(e,t){ye++,be[ye]=e.current,e.current=t}var F=T(null),X=T(null),pe=T(null),ee=T(null);function oe(e,t){switch(O(pe,t),O(X,e),O(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?jh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=jh(t),e=Ch(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(F),O(F,e)}function ve(){I(F),I(X),I(pe)}function Oe(e){e.memoizedState!==null&&O(ee,e);var t=F.current,n=Ch(t,e.type);t!==n&&(O(X,e),O(F,n))}function Qe(e){X.current===e&&(I(F),I(X)),ee.current===e&&(I(ee),bo._currentValue=de)}var ne,Ve;function Ne(e){if(ne===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ne=t&&t[1]||"",Ve=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ne+e+Ve}var Le=!1;function Ke(e,t){if(!e||Le)return"";Le=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(ie){var re=ie}Reflect.construct(e,[],ge)}else{try{ge.call()}catch(ie){re=ie}e.call(ge.prototype)}}else{try{throw Error()}catch(ie){re=ie}(ge=e())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(ie){if(ie&&re&&typeof ie.stack=="string")return[ie.stack,re.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=a.DetermineComponentFrameRoot(),y=f[0],k=f[1];if(y&&k){var H=y.split(`
`),K=k.split(`
`);for(c=a=0;a<H.length&&!H[a].includes("DetermineComponentFrameRoot");)a++;for(;c<K.length&&!K[c].includes("DetermineComponentFrameRoot");)c++;if(a===H.length||c===K.length)for(a=H.length-1,c=K.length-1;1<=a&&0<=c&&H[a]!==K[c];)c--;for(;1<=a&&0<=c;a--,c--)if(H[a]!==K[c]){if(a!==1||c!==1)do if(a--,c--,0>c||H[a]!==K[c]){var fe=`
`+H[a].replace(" at new "," at ");return e.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",e.displayName)),fe}while(1<=a&&0<=c);break}}}finally{Le=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ne(n):""}function Ge(e,t){switch(e.tag){case 26:case 27:case 5:return Ne(e.type);case 16:return Ne("Lazy");case 13:return e.child!==t&&t!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return Ke(e.type,!1);case 11:return Ke(e.type.render,!1);case 1:return Ke(e.type,!0);case 31:return Ne("Activity");default:return""}}function we(e){try{var t="",n=null;do t+=Ge(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Ye=Object.prototype.hasOwnProperty,he=r.unstable_scheduleCallback,Re=r.unstable_cancelCallback,Ze=r.unstable_shouldYield,gt=r.unstable_requestPaint,Be=r.unstable_now,Se=r.unstable_getCurrentPriorityLevel,_e=r.unstable_ImmediatePriority,Xe=r.unstable_UserBlockingPriority,We=r.unstable_NormalPriority,Pe=r.unstable_LowPriority,P=r.unstable_IdlePriority,ft=r.log,ot=r.unstable_setDisableYieldValue,tt=null,pt=null;function Ht(e){if(typeof ft=="function"&&ot(e),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(tt,e)}catch{}}var Vt=Math.clz32?Math.clz32:or,$n=Math.log,fr=Math.LN2;function or(e){return e>>>=0,e===0?32:31-($n(e)/fr|0)|0}var An=256,ln=262144,an=4194304;function on(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Rn(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var c=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var k=a&134217727;return k!==0?(a=k&~f,a!==0?c=on(a):(y&=k,y!==0?c=on(y):n||(n=k&~e,n!==0&&(c=on(n))))):(k=a&~f,k!==0?c=on(k):y!==0?c=on(y):n||(n=a&~e,n!==0&&(c=on(n)))),c===0?0:t!==0&&t!==c&&(t&f)===0&&(f=c&-c,n=t&-t,f>=n||f===32&&(n&4194048)!==0)?t:c}function ke(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function De(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V(){var e=an;return an<<=1,(an&62914560)===0&&(an=4194304),e}function ce(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ue(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n,a,c,f){var y=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var k=e.entanglements,H=e.expirationTimes,K=e.hiddenUpdates;for(n=y&~n;0<n;){var fe=31-Vt(n),ge=1<<fe;k[fe]=0,H[fe]=-1;var re=K[fe];if(re!==null)for(K[fe]=null,fe=0;fe<re.length;fe++){var ie=re[fe];ie!==null&&(ie.lane&=-536870913)}n&=~ge}a!==0&&ze(e,a,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~t))}function ze(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Vt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function Fe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Vt(n),c=1<<a;c&t|e[a]&t&&(e[a]|=t),n&=~c}}function Te(e,t){var n=t&-t;return n=(n&42)!==0?1:nt(n),(n&(e.suspendedLanes|t))!==0?0:n}function nt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function st(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function xt(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:Qh(e.type))}function yt(e,t){var n=Y.p;try{return Y.p=e,t()}finally{Y.p=n}}var vt=Math.random().toString(36).slice(2),bt="__reactFiber$"+vt,Rt="__reactProps$"+vt,qt="__reactContainer$"+vt,Nn="__reactEvents$"+vt,se="__reactListeners$"+vt,Je="__reactHandles$"+vt,Bt="__reactResources$"+vt,It="__reactMarker$"+vt;function cn(e){delete e[bt],delete e[Rt],delete e[Nn],delete e[se],delete e[Je]}function fn(e){var t=e[bt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qt]||n[bt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_h(e);e!==null;){if(n=e[bt])return n;e=_h(e)}return t}e=n,n=e.parentNode}return null}function Yn(e){if(e=e[bt]||e[qt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Xr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function br(e){var t=e[Bt];return t||(t=e[Bt]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Kt(e){e[It]=!0}var Fo=new Set,$o={};function wr(e,t){Pr(e,t),Pr(e+"Capture",t)}function Pr(e,t){for($o[e]=t,e=0;e<t.length;e++)Fo.add(t[e])}var Xi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yo={},Qo={};function Ra(e){return Ye.call(Qo,e)?!0:Ye.call(Yo,e)?!1:Xi.test(e)?Qo[e]=!0:(Yo[e]=!0,!1)}function ql(e,t,n){if(Ra(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Wl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Qn(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pi(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){n=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(y){n=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Da(e){if(!e._valueTracker){var t=Xo(e)?"checked":"value";e._valueTracker=Pi(e,t,""+e[t])}}function Po(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=Xo(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Q(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var je=/[\n"\\]/g;function Me(e){return e.replace(je,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ot(e,t,n,a,c,f,y,k){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+sn(t)):e.value!==""+sn(t)&&(e.value=""+sn(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?mt(e,y,sn(t)):n!=null?mt(e,y,sn(n)):a!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?e.name=""+sn(k):e.removeAttribute("name")}function Qt(e,t,n,a,c,f,y,k){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||n!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){Da(e);return}n=n!=null?""+sn(n):"",t=t!=null?""+sn(t):n,k||t===e.value||(e.value=t),e.defaultValue=t}a=a??c,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=k?e.checked:!!a,e.defaultChecked=!!a,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),Da(e)}function mt(e,t,n){t==="number"&&Q(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Sr(e,t,n,a){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&a&&(e[n].defaultSelected=!0)}else{for(n=""+sn(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Zo(e,t,n){if(t!=null&&(t=""+sn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+sn(n):""}function Fl(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(s(92));if(le(a)){if(1<a.length)throw Error(s(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=sn(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),Da(e)}function $l(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ix=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wf(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Ix.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Sf(e,t,n){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var c in t)a=t[c],t.hasOwnProperty(c)&&n[c]!==a&&wf(e,c,a)}else for(var f in t)t.hasOwnProperty(f)&&wf(e,f,t[f])}function Zi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(e){return Vx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Nr(){}var Ki=null;function Ji(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yl=null,Ql=null;function Nf(e){var t=Yn(e);if(t&&(e=t.stateNode)){var n=e[Rt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ot(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Me(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var c=a[Rt]||null;if(!c)throw Error(s(90));Ot(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Po(a)}break e;case"textarea":Zo(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Sr(e,!!n.multiple,t,!1)}}}var eu=!1;function jf(e,t,n){if(eu)return e(t,n);eu=!0;try{var a=e(t);return a}finally{if(eu=!1,(Yl!==null||Ql!==null)&&(Hs(),Yl&&(t=Yl,e=Ql,Ql=Yl=null,Nf(t),e)))for(t=0;t<e.length;t++)Nf(e[t])}}function za(e,t){var n=e.stateNode;if(n===null)return null;var a=n[Rt]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tu=!1;if(jr)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){tu=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{tu=!1}var Zr=null,nu=null,Jo=null;function Cf(){if(Jo)return Jo;var e,t=nu,n=t.length,a,c="value"in Zr?Zr.value:Zr.textContent,f=c.length;for(e=0;e<n&&t[e]===c[e];e++);var y=n-e;for(a=1;a<=y&&t[n-a]===c[f-a];a++);return Jo=c.slice(e,1<a?1-a:void 0)}function es(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ts(){return!0}function kf(){return!1}function jn(e){function t(n,a,c,f,y){this._reactName=n,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(n=e[k],this[k]=n?n(f):f[k]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ts:kf,this.isPropagationStopped=kf,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),t}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ns=jn(Sl),Ia=v({},Sl,{view:0,detail:0}),Ux=jn(Ia),ru,lu,Ha,rs=v({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ou,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ha&&(Ha&&e.type==="mousemove"?(ru=e.screenX-Ha.screenX,lu=e.screenY-Ha.screenY):lu=ru=0,Ha=e),ru)},movementY:function(e){return"movementY"in e?e.movementY:lu}}),Mf=jn(rs),Gx=v({},rs,{dataTransfer:0}),qx=jn(Gx),Wx=v({},Ia,{relatedTarget:0}),au=jn(Wx),Fx=v({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),$x=jn(Fx),Yx=v({},Sl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qx=jn(Yx),Xx=v({},Sl,{data:0}),Of=jn(Xx),Px={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kx[e])?!!t[e]:!1}function ou(){return Jx}var ey=v({},Ia,{key:function(e){if(e.key){var t=Px[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=es(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ou,charCode:function(e){return e.type==="keypress"?es(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?es(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ty=jn(ey),ny=v({},rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ef=jn(ny),ry=v({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ou}),ly=jn(ry),ay=v({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),oy=jn(ay),sy=v({},rs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iy=jn(sy),uy=v({},Sl,{newState:0,oldState:0}),cy=jn(uy),dy=[9,13,27,32],su=jr&&"CompositionEvent"in window,Va=null;jr&&"documentMode"in document&&(Va=document.documentMode);var fy=jr&&"TextEvent"in window&&!Va,Tf=jr&&(!su||Va&&8<Va&&11>=Va),Lf=" ",_f=!1;function Af(e,t){switch(e){case"keyup":return dy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xl=!1;function py(e,t){switch(e){case"compositionend":return Rf(t);case"keypress":return t.which!==32?null:(_f=!0,Lf);case"textInput":return e=t.data,e===Lf&&_f?null:e;default:return null}}function my(e,t){if(Xl)return e==="compositionend"||!su&&Af(e,t)?(e=Cf(),Jo=nu=Zr=null,Xl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tf&&t.locale!=="ko"?null:t.data;default:return null}}var hy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Df(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hy[e.type]:t==="textarea"}function zf(e,t,n,a){Yl?Ql?Ql.push(a):Ql=[a]:Yl=a,t=$s(t,"onChange"),0<t.length&&(n=new ns("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Ua=null,Ga=null;function gy(e){yh(e,0)}function ls(e){var t=Xr(e);if(Po(t))return e}function Bf(e,t){if(e==="change")return t}var If=!1;if(jr){var iu;if(jr){var uu="oninput"in document;if(!uu){var Hf=document.createElement("div");Hf.setAttribute("oninput","return;"),uu=typeof Hf.oninput=="function"}iu=uu}else iu=!1;If=iu&&(!document.documentMode||9<document.documentMode)}function Vf(){Ua&&(Ua.detachEvent("onpropertychange",Uf),Ga=Ua=null)}function Uf(e){if(e.propertyName==="value"&&ls(Ga)){var t=[];zf(t,Ga,e,Ji(e)),jf(gy,t)}}function xy(e,t,n){e==="focusin"?(Vf(),Ua=t,Ga=n,Ua.attachEvent("onpropertychange",Uf)):e==="focusout"&&Vf()}function yy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ls(Ga)}function vy(e,t){if(e==="click")return ls(t)}function by(e,t){if(e==="input"||e==="change")return ls(t)}function wy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dn=typeof Object.is=="function"?Object.is:wy;function qa(e,t){if(Dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var c=n[a];if(!Ye.call(t,c)||!Dn(e[c],t[c]))return!1}return!0}function Gf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qf(e,t){var n=Gf(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gf(n)}}function Wf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ff(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Q(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Q(e.document)}return t}function cu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Sy=jr&&"documentMode"in document&&11>=document.documentMode,Pl=null,du=null,Wa=null,fu=!1;function $f(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fu||Pl==null||Pl!==Q(a)||(a=Pl,"selectionStart"in a&&cu(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Wa&&qa(Wa,a)||(Wa=a,a=$s(du,"onSelect"),0<a.length&&(t=new ns("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=Pl)))}function Nl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zl={animationend:Nl("Animation","AnimationEnd"),animationiteration:Nl("Animation","AnimationIteration"),animationstart:Nl("Animation","AnimationStart"),transitionrun:Nl("Transition","TransitionRun"),transitionstart:Nl("Transition","TransitionStart"),transitioncancel:Nl("Transition","TransitionCancel"),transitionend:Nl("Transition","TransitionEnd")},pu={},Yf={};jr&&(Yf=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function jl(e){if(pu[e])return pu[e];if(!Zl[e])return e;var t=Zl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Yf)return pu[e]=t[n];return e}var Qf=jl("animationend"),Xf=jl("animationiteration"),Pf=jl("animationstart"),Ny=jl("transitionrun"),jy=jl("transitionstart"),Cy=jl("transitioncancel"),Zf=jl("transitionend"),Kf=new Map,mu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mu.push("scrollEnd");function sr(e,t){Kf.set(e,t),wr(t,[e])}var as=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Xn=[],Kl=0,hu=0;function os(){for(var e=Kl,t=hu=Kl=0;t<e;){var n=Xn[t];Xn[t++]=null;var a=Xn[t];Xn[t++]=null;var c=Xn[t];Xn[t++]=null;var f=Xn[t];if(Xn[t++]=null,a!==null&&c!==null){var y=a.pending;y===null?c.next=c:(c.next=y.next,y.next=c),a.pending=c}f!==0&&Jf(n,c,f)}}function ss(e,t,n,a){Xn[Kl++]=e,Xn[Kl++]=t,Xn[Kl++]=n,Xn[Kl++]=a,hu|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function gu(e,t,n,a){return ss(e,t,n,a),is(e)}function Cl(e,t){return ss(e,null,null,t),is(e)}function Jf(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var c=!1,f=e.return;f!==null;)f.childLanes|=n,a=f.alternate,a!==null&&(a.childLanes|=n),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&t!==null&&(c=31-Vt(n),e=f.hiddenUpdates,a=e[c],a===null?e[c]=[t]:a.push(t),t.lane=n|536870912),f):null}function is(e){if(50<po)throw po=0,Cc=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Jl={};function ky(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(e,t,n,a){return new ky(e,t,n,a)}function xu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cr(e,t){var n=e.alternate;return n===null?(n=zn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ep(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function us(e,t,n,a,c,f){var y=0;if(a=e,typeof e=="function")xu(e)&&(y=1);else if(typeof e=="string")y=Lv(e,n,F.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case G:return e=zn(31,n,t,c),e.elementType=G,e.lanes=f,e;case w:return kl(n.children,c,f,t);case M:y=8,c|=24;break;case j:return e=zn(12,n,t,c|2),e.elementType=j,e.lanes=f,e;case L:return e=zn(13,n,t,c),e.elementType=L,e.lanes=f,e;case R:return e=zn(19,n,t,c),e.elementType=R,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D:y=10;break e;case E:y=9;break e;case _:y=11;break e;case A:y=14;break e;case B:y=16,a=null;break e}y=29,n=Error(s(130,e===null?"null":typeof e,"")),a=null}return t=zn(y,n,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function kl(e,t,n,a){return e=zn(7,e,a,t),e.lanes=n,e}function yu(e,t,n){return e=zn(6,e,null,t),e.lanes=n,e}function tp(e){var t=zn(18,null,null,0);return t.stateNode=e,t}function vu(e,t,n){return t=zn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var np=new WeakMap;function Pn(e,t){if(typeof e=="object"&&e!==null){var n=np.get(e);return n!==void 0?n:(t={value:e,source:t,stack:we(t)},np.set(e,t),t)}return{value:e,source:t,stack:we(t)}}var ea=[],ta=0,cs=null,Fa=0,Zn=[],Kn=0,Kr=null,pr=1,mr="";function kr(e,t){ea[ta++]=Fa,ea[ta++]=cs,cs=e,Fa=t}function rp(e,t,n){Zn[Kn++]=pr,Zn[Kn++]=mr,Zn[Kn++]=Kr,Kr=e;var a=pr;e=mr;var c=32-Vt(a)-1;a&=~(1<<c),n+=1;var f=32-Vt(t)+c;if(30<f){var y=c-c%5;f=(a&(1<<y)-1).toString(32),a>>=y,c-=y,pr=1<<32-Vt(t)+c|n<<c|a,mr=f+e}else pr=1<<f|n<<c|a,mr=e}function bu(e){e.return!==null&&(kr(e,1),rp(e,1,0))}function wu(e){for(;e===cs;)cs=ea[--ta],ea[ta]=null,Fa=ea[--ta],ea[ta]=null;for(;e===Kr;)Kr=Zn[--Kn],Zn[Kn]=null,mr=Zn[--Kn],Zn[Kn]=null,pr=Zn[--Kn],Zn[Kn]=null}function lp(e,t){Zn[Kn++]=pr,Zn[Kn++]=mr,Zn[Kn++]=Kr,pr=t.id,mr=t.overflow,Kr=e}var pn=null,Ut=null,ht=!1,Jr=null,Jn=!1,Su=Error(s(519));function el(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $a(Pn(t,e)),Su}function ap(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[bt]=e,t[Rt]=a,n){case"dialog":ut("cancel",t),ut("close",t);break;case"iframe":case"object":case"embed":ut("load",t);break;case"video":case"audio":for(n=0;n<ho.length;n++)ut(ho[n],t);break;case"source":ut("error",t);break;case"img":case"image":case"link":ut("error",t),ut("load",t);break;case"details":ut("toggle",t);break;case"input":ut("invalid",t),Qt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":ut("invalid",t);break;case"textarea":ut("invalid",t),Fl(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||Sh(t.textContent,n)?(a.popover!=null&&(ut("beforetoggle",t),ut("toggle",t)),a.onScroll!=null&&ut("scroll",t),a.onScrollEnd!=null&&ut("scrollend",t),a.onClick!=null&&(t.onclick=Nr),t=!0):t=!1,t||el(e,!0)}function op(e){for(pn=e.return;pn;)switch(pn.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:pn=pn.return}}function na(e){if(e!==pn)return!1;if(!ht)return op(e),ht=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Vc(e.type,e.memoizedProps)),n=!n),n&&Ut&&el(e),op(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ut=Lh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ut=Lh(e)}else t===27?(t=Ut,ml(e.type)?(e=Fc,Fc=null,Ut=e):Ut=t):Ut=pn?tr(e.stateNode.nextSibling):null;return!0}function Ml(){Ut=pn=null,ht=!1}function Nu(){var e=Jr;return e!==null&&(On===null?On=e:On.push.apply(On,e),Jr=null),e}function $a(e){Jr===null?Jr=[e]:Jr.push(e)}var ju=T(null),Ol=null,Mr=null;function tl(e,t,n){O(ju,t._currentValue),t._currentValue=n}function Or(e){e._currentValue=ju.current,I(ju)}function Cu(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function ku(e,t,n,a){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var y=c.child;f=f.firstContext;e:for(;f!==null;){var k=f;f=c;for(var H=0;H<t.length;H++)if(k.context===t[H]){f.lanes|=n,k=f.alternate,k!==null&&(k.lanes|=n),Cu(f.return,n,e),a||(y=null);break e}f=k.next}}else if(c.tag===18){if(y=c.return,y===null)throw Error(s(341));y.lanes|=n,f=y.alternate,f!==null&&(f.lanes|=n),Cu(y,n,e),y=null}else y=c.child;if(y!==null)y.return=c;else for(y=c;y!==null;){if(y===e){y=null;break}if(c=y.sibling,c!==null){c.return=y.return,y=c;break}y=y.return}c=y}}function ra(e,t,n,a){e=null;for(var c=t,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var y=c.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var k=c.type;Dn(c.pendingProps.value,y.value)||(e!==null?e.push(k):e=[k])}}else if(c===ee.current){if(y=c.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(bo):e=[bo])}c=c.return}e!==null&&ku(t,e,n,a),t.flags|=262144}function ds(e){for(e=e.firstContext;e!==null;){if(!Dn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function El(e){Ol=e,Mr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function mn(e){return sp(Ol,e)}function fs(e,t){return Ol===null&&El(e),sp(e,t)}function sp(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Mr===null){if(e===null)throw Error(s(308));Mr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Mr=Mr.next=t;return n}var My=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Oy=r.unstable_scheduleCallback,Ey=r.unstable_NormalPriority,Jt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mu(){return{controller:new My,data:new Map,refCount:0}}function Ya(e){e.refCount--,e.refCount===0&&Oy(Ey,function(){e.controller.abort()})}var Qa=null,Ou=0,la=0,aa=null;function Ty(e,t){if(Qa===null){var n=Qa=[];Ou=0,la=Lc(),aa={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Ou++,t.then(ip,ip),t}function ip(){if(--Ou===0&&Qa!==null){aa!==null&&(aa.status="fulfilled");var e=Qa;Qa=null,la=0,aa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ly(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(c){n.push(c)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var c=0;c<n.length;c++)(0,n[c])(t)},function(c){for(a.status="rejected",a.reason=c,c=0;c<n.length;c++)(0,n[c])(void 0)}),a}var up=z.S;z.S=function(e,t){$m=Be(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Ty(e,t),up!==null&&up(e,t)};var Tl=T(null);function Eu(){var e=Tl.current;return e!==null?e:Dt.pooledCache}function ps(e,t){t===null?O(Tl,Tl.current):O(Tl,t.pool)}function cp(){var e=Eu();return e===null?null:{parent:Jt._currentValue,pool:e}}var oa=Error(s(460)),Tu=Error(s(474)),ms=Error(s(542)),hs={then:function(){}};function dp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function fp(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Nr,Nr),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mp(e),e;default:if(typeof t.status=="string")t.then(Nr,Nr);else{if(e=Dt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=a}},function(a){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mp(e),e}throw _l=t,oa}}function Ll(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(_l=n,oa):n}}var _l=null;function pp(){if(_l===null)throw Error(s(459));var e=_l;return _l=null,e}function mp(e){if(e===oa||e===ms)throw Error(s(483))}var sa=null,Xa=0;function gs(e){var t=Xa;return Xa+=1,sa===null&&(sa=[]),fp(sa,e,t)}function Pa(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function xs(e,t){throw t.$$typeof===N?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function hp(e){function t($,q){if(e){var Z=$.deletions;Z===null?($.deletions=[q],$.flags|=16):Z.push(q)}}function n($,q){if(!e)return null;for(;q!==null;)t($,q),q=q.sibling;return null}function a($){for(var q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function c($,q){return $=Cr($,q),$.index=0,$.sibling=null,$}function f($,q,Z){return $.index=Z,e?(Z=$.alternate,Z!==null?(Z=Z.index,Z<q?($.flags|=67108866,q):Z):($.flags|=67108866,q)):($.flags|=1048576,q)}function y($){return e&&$.alternate===null&&($.flags|=67108866),$}function k($,q,Z,me){return q===null||q.tag!==6?(q=yu(Z,$.mode,me),q.return=$,q):(q=c(q,Z),q.return=$,q)}function H($,q,Z,me){var Ie=Z.type;return Ie===w?fe($,q,Z.props.children,me,Z.key):q!==null&&(q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===B&&Ll(Ie)===q.type)?(q=c(q,Z.props),Pa(q,Z),q.return=$,q):(q=us(Z.type,Z.key,Z.props,null,$.mode,me),Pa(q,Z),q.return=$,q)}function K($,q,Z,me){return q===null||q.tag!==4||q.stateNode.containerInfo!==Z.containerInfo||q.stateNode.implementation!==Z.implementation?(q=vu(Z,$.mode,me),q.return=$,q):(q=c(q,Z.children||[]),q.return=$,q)}function fe($,q,Z,me,Ie){return q===null||q.tag!==7?(q=kl(Z,$.mode,me,Ie),q.return=$,q):(q=c(q,Z),q.return=$,q)}function ge($,q,Z){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=yu(""+q,$.mode,Z),q.return=$,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case C:return Z=us(q.type,q.key,q.props,null,$.mode,Z),Pa(Z,q),Z.return=$,Z;case S:return q=vu(q,$.mode,Z),q.return=$,q;case B:return q=Ll(q),ge($,q,Z)}if(le(q)||J(q))return q=kl(q,$.mode,Z,null),q.return=$,q;if(typeof q.then=="function")return ge($,gs(q),Z);if(q.$$typeof===D)return ge($,fs($,q),Z);xs($,q)}return null}function re($,q,Z,me){var Ie=q!==null?q.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ie!==null?null:k($,q,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case C:return Z.key===Ie?H($,q,Z,me):null;case S:return Z.key===Ie?K($,q,Z,me):null;case B:return Z=Ll(Z),re($,q,Z,me)}if(le(Z)||J(Z))return Ie!==null?null:fe($,q,Z,me,null);if(typeof Z.then=="function")return re($,q,gs(Z),me);if(Z.$$typeof===D)return re($,q,fs($,Z),me);xs($,Z)}return null}function ie($,q,Z,me,Ie){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return $=$.get(Z)||null,k(q,$,""+me,Ie);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case C:return $=$.get(me.key===null?Z:me.key)||null,H(q,$,me,Ie);case S:return $=$.get(me.key===null?Z:me.key)||null,K(q,$,me,Ie);case B:return me=Ll(me),ie($,q,Z,me,Ie)}if(le(me)||J(me))return $=$.get(Z)||null,fe(q,$,me,Ie,null);if(typeof me.then=="function")return ie($,q,Z,gs(me),Ie);if(me.$$typeof===D)return ie($,q,Z,fs(q,me),Ie);xs(q,me)}return null}function Ee($,q,Z,me){for(var Ie=null,wt=null,Ae=q,at=q=0,dt=null;Ae!==null&&at<Z.length;at++){Ae.index>at?(dt=Ae,Ae=null):dt=Ae.sibling;var St=re($,Ae,Z[at],me);if(St===null){Ae===null&&(Ae=dt);break}e&&Ae&&St.alternate===null&&t($,Ae),q=f(St,q,at),wt===null?Ie=St:wt.sibling=St,wt=St,Ae=dt}if(at===Z.length)return n($,Ae),ht&&kr($,at),Ie;if(Ae===null){for(;at<Z.length;at++)Ae=ge($,Z[at],me),Ae!==null&&(q=f(Ae,q,at),wt===null?Ie=Ae:wt.sibling=Ae,wt=Ae);return ht&&kr($,at),Ie}for(Ae=a(Ae);at<Z.length;at++)dt=ie(Ae,$,at,Z[at],me),dt!==null&&(e&&dt.alternate!==null&&Ae.delete(dt.key===null?at:dt.key),q=f(dt,q,at),wt===null?Ie=dt:wt.sibling=dt,wt=dt);return e&&Ae.forEach(function(vl){return t($,vl)}),ht&&kr($,at),Ie}function qe($,q,Z,me){if(Z==null)throw Error(s(151));for(var Ie=null,wt=null,Ae=q,at=q=0,dt=null,St=Z.next();Ae!==null&&!St.done;at++,St=Z.next()){Ae.index>at?(dt=Ae,Ae=null):dt=Ae.sibling;var vl=re($,Ae,St.value,me);if(vl===null){Ae===null&&(Ae=dt);break}e&&Ae&&vl.alternate===null&&t($,Ae),q=f(vl,q,at),wt===null?Ie=vl:wt.sibling=vl,wt=vl,Ae=dt}if(St.done)return n($,Ae),ht&&kr($,at),Ie;if(Ae===null){for(;!St.done;at++,St=Z.next())St=ge($,St.value,me),St!==null&&(q=f(St,q,at),wt===null?Ie=St:wt.sibling=St,wt=St);return ht&&kr($,at),Ie}for(Ae=a(Ae);!St.done;at++,St=Z.next())St=ie(Ae,$,at,St.value,me),St!==null&&(e&&St.alternate!==null&&Ae.delete(St.key===null?at:St.key),q=f(St,q,at),wt===null?Ie=St:wt.sibling=St,wt=St);return e&&Ae.forEach(function(Gv){return t($,Gv)}),ht&&kr($,at),Ie}function At($,q,Z,me){if(typeof Z=="object"&&Z!==null&&Z.type===w&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case C:e:{for(var Ie=Z.key;q!==null;){if(q.key===Ie){if(Ie=Z.type,Ie===w){if(q.tag===7){n($,q.sibling),me=c(q,Z.props.children),me.return=$,$=me;break e}}else if(q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===B&&Ll(Ie)===q.type){n($,q.sibling),me=c(q,Z.props),Pa(me,Z),me.return=$,$=me;break e}n($,q);break}else t($,q);q=q.sibling}Z.type===w?(me=kl(Z.props.children,$.mode,me,Z.key),me.return=$,$=me):(me=us(Z.type,Z.key,Z.props,null,$.mode,me),Pa(me,Z),me.return=$,$=me)}return y($);case S:e:{for(Ie=Z.key;q!==null;){if(q.key===Ie)if(q.tag===4&&q.stateNode.containerInfo===Z.containerInfo&&q.stateNode.implementation===Z.implementation){n($,q.sibling),me=c(q,Z.children||[]),me.return=$,$=me;break e}else{n($,q);break}else t($,q);q=q.sibling}me=vu(Z,$.mode,me),me.return=$,$=me}return y($);case B:return Z=Ll(Z),At($,q,Z,me)}if(le(Z))return Ee($,q,Z,me);if(J(Z)){if(Ie=J(Z),typeof Ie!="function")throw Error(s(150));return Z=Ie.call(Z),qe($,q,Z,me)}if(typeof Z.then=="function")return At($,q,gs(Z),me);if(Z.$$typeof===D)return At($,q,fs($,Z),me);xs($,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,q!==null&&q.tag===6?(n($,q.sibling),me=c(q,Z),me.return=$,$=me):(n($,q),me=yu(Z,$.mode,me),me.return=$,$=me),y($)):n($,q)}return function($,q,Z,me){try{Xa=0;var Ie=At($,q,Z,me);return sa=null,Ie}catch(Ae){if(Ae===oa||Ae===ms)throw Ae;var wt=zn(29,Ae,null,$.mode);return wt.lanes=me,wt.return=$,wt}}}var Al=hp(!0),gp=hp(!1),nl=!1;function Lu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _u(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function rl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ll(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(jt&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,t=is(e),Jf(e,null,n),t}return ss(e,a,t,n),is(e)}function Za(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Fe(e,n)}}function Au(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var c=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var y={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};f===null?c=f=y:f=f.next=y,n=n.next}while(n!==null);f===null?c=f=t:f=f.next=t}else c=f=t;n={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ru=!1;function Ka(){if(Ru){var e=aa;if(e!==null)throw e}}function Ja(e,t,n,a){Ru=!1;var c=e.updateQueue;nl=!1;var f=c.firstBaseUpdate,y=c.lastBaseUpdate,k=c.shared.pending;if(k!==null){c.shared.pending=null;var H=k,K=H.next;H.next=null,y===null?f=K:y.next=K,y=H;var fe=e.alternate;fe!==null&&(fe=fe.updateQueue,k=fe.lastBaseUpdate,k!==y&&(k===null?fe.firstBaseUpdate=K:k.next=K,fe.lastBaseUpdate=H))}if(f!==null){var ge=c.baseState;y=0,fe=K=H=null,k=f;do{var re=k.lane&-536870913,ie=re!==k.lane;if(ie?(ct&re)===re:(a&re)===re){re!==0&&re===la&&(Ru=!0),fe!==null&&(fe=fe.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ee=e,qe=k;re=t;var At=n;switch(qe.tag){case 1:if(Ee=qe.payload,typeof Ee=="function"){ge=Ee.call(At,ge,re);break e}ge=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=qe.payload,re=typeof Ee=="function"?Ee.call(At,ge,re):Ee,re==null)break e;ge=v({},ge,re);break e;case 2:nl=!0}}re=k.callback,re!==null&&(e.flags|=64,ie&&(e.flags|=8192),ie=c.callbacks,ie===null?c.callbacks=[re]:ie.push(re))}else ie={lane:re,tag:k.tag,payload:k.payload,callback:k.callback,next:null},fe===null?(K=fe=ie,H=ge):fe=fe.next=ie,y|=re;if(k=k.next,k===null){if(k=c.shared.pending,k===null)break;ie=k,k=ie.next,ie.next=null,c.lastBaseUpdate=ie,c.shared.pending=null}}while(!0);fe===null&&(H=ge),c.baseState=H,c.firstBaseUpdate=K,c.lastBaseUpdate=fe,f===null&&(c.shared.lanes=0),ul|=y,e.lanes=y,e.memoizedState=ge}}function xp(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function yp(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)xp(n[e],t)}var ia=T(null),ys=T(0);function vp(e,t){e=Br,O(ys,e),O(ia,t),Br=e|t.baseLanes}function Du(){O(ys,Br),O(ia,ia.current)}function zu(){Br=ys.current,I(ia),I(ys)}var Bn=T(null),er=null;function al(e){var t=e.alternate;O(Xt,Xt.current&1),O(Bn,e),er===null&&(t===null||ia.current!==null||t.memoizedState!==null)&&(er=e)}function Bu(e){O(Xt,Xt.current),O(Bn,e),er===null&&(er=e)}function bp(e){e.tag===22?(O(Xt,Xt.current),O(Bn,e),er===null&&(er=e)):ol()}function ol(){O(Xt,Xt.current),O(Bn,Bn.current)}function In(e){I(Bn),er===e&&(er=null),I(Xt)}var Xt=T(0);function vs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||qc(n)||Wc(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Er=0,rt=null,Lt=null,en=null,bs=!1,ua=!1,Rl=!1,ws=0,eo=0,ca=null,_y=0;function Ft(){throw Error(s(321))}function Iu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Dn(e[n],t[n]))return!1;return!0}function Hu(e,t,n,a,c,f){return Er=f,rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,z.H=e===null||e.memoizedState===null?rm:ec,Rl=!1,f=n(a,c),Rl=!1,ua&&(f=Sp(t,n,a,c)),wp(e),f}function wp(e){z.H=ro;var t=Lt!==null&&Lt.next!==null;if(Er=0,en=Lt=rt=null,bs=!1,eo=0,ca=null,t)throw Error(s(300));e===null||tn||(e=e.dependencies,e!==null&&ds(e)&&(tn=!0))}function Sp(e,t,n,a){rt=e;var c=0;do{if(ua&&(ca=null),eo=0,ua=!1,25<=c)throw Error(s(301));if(c+=1,en=Lt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}z.H=lm,f=t(n,a)}while(ua);return f}function Ay(){var e=z.H,t=e.useState()[0];return t=typeof t.then=="function"?to(t):t,e=e.useState()[0],(Lt!==null?Lt.memoizedState:null)!==e&&(rt.flags|=1024),t}function Vu(){var e=ws!==0;return ws=0,e}function Uu(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Gu(e){if(bs){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}bs=!1}Er=0,en=Lt=rt=null,ua=!1,eo=ws=0,ca=null}function wn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?rt.memoizedState=en=e:en=en.next=e,en}function Pt(){if(Lt===null){var e=rt.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var t=en===null?rt.memoizedState:en.next;if(t!==null)en=t,Lt=e;else{if(e===null)throw rt.alternate===null?Error(s(467)):Error(s(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},en===null?rt.memoizedState=en=e:en=en.next=e}return en}function Ss(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function to(e){var t=eo;return eo+=1,ca===null&&(ca=[]),e=fp(ca,e,t),t=rt,(en===null?t.memoizedState:en.next)===null&&(t=t.alternate,z.H=t===null||t.memoizedState===null?rm:ec),e}function Ns(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return to(e);if(e.$$typeof===D)return mn(e)}throw Error(s(438,String(e)))}function qu(e){var t=null,n=rt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=rt.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Ss(),rt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=U;return t.index++,n}function Tr(e,t){return typeof t=="function"?t(e):t}function js(e){var t=Pt();return Wu(t,Lt,e)}function Wu(e,t,n){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var c=e.baseQueue,f=a.pending;if(f!==null){if(c!==null){var y=c.next;c.next=f.next,f.next=y}t.baseQueue=c=f,a.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{t=c.next;var k=y=null,H=null,K=t,fe=!1;do{var ge=K.lane&-536870913;if(ge!==K.lane?(ct&ge)===ge:(Er&ge)===ge){var re=K.revertLane;if(re===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ge===la&&(fe=!0);else if((Er&re)===re){K=K.next,re===la&&(fe=!0);continue}else ge={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},H===null?(k=H=ge,y=f):H=H.next=ge,rt.lanes|=re,ul|=re;ge=K.action,Rl&&n(f,ge),f=K.hasEagerState?K.eagerState:n(f,ge)}else re={lane:ge,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},H===null?(k=H=re,y=f):H=H.next=re,rt.lanes|=ge,ul|=ge;K=K.next}while(K!==null&&K!==t);if(H===null?y=f:H.next=k,!Dn(f,e.memoizedState)&&(tn=!0,fe&&(n=aa,n!==null)))throw n;e.memoizedState=f,e.baseState=y,e.baseQueue=H,a.lastRenderedState=f}return c===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Fu(e){var t=Pt(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var a=n.dispatch,c=n.pending,f=t.memoizedState;if(c!==null){n.pending=null;var y=c=c.next;do f=e(f,y.action),y=y.next;while(y!==c);Dn(f,t.memoizedState)||(tn=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,a]}function Np(e,t,n){var a=rt,c=Pt(),f=ht;if(f){if(n===void 0)throw Error(s(407));n=n()}else n=t();var y=!Dn((Lt||c).memoizedState,n);if(y&&(c.memoizedState=n,tn=!0),c=c.queue,Qu(kp.bind(null,a,c,e),[e]),c.getSnapshot!==t||y||en!==null&&en.memoizedState.tag&1){if(a.flags|=2048,da(9,{destroy:void 0},Cp.bind(null,a,c,n,t),null),Dt===null)throw Error(s(349));f||(Er&127)!==0||jp(a,t,n)}return n}function jp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=rt.updateQueue,t===null?(t=Ss(),rt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Cp(e,t,n,a){t.value=n,t.getSnapshot=a,Mp(t)&&Op(e)}function kp(e,t,n){return n(function(){Mp(t)&&Op(e)})}function Mp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dn(e,n)}catch{return!0}}function Op(e){var t=Cl(e,2);t!==null&&En(t,e,2)}function $u(e){var t=wn();if(typeof e=="function"){var n=e;if(e=n(),Rl){Ht(!0);try{n()}finally{Ht(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:e},t}function Ep(e,t,n,a){return e.baseState=n,Wu(e,Lt,typeof a=="function"?a:Tr)}function Ry(e,t,n,a,c){if(Ms(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};z.T!==null?n(!0):f.isTransition=!1,a(f),n=t.pending,n===null?(f.next=t.pending=f,Tp(t,f)):(f.next=n.next,t.pending=n.next=f)}}function Tp(e,t){var n=t.action,a=t.payload,c=e.state;if(t.isTransition){var f=z.T,y={};z.T=y;try{var k=n(c,a),H=z.S;H!==null&&H(y,k),Lp(e,t,k)}catch(K){Yu(e,t,K)}finally{f!==null&&y.types!==null&&(f.types=y.types),z.T=f}}else try{f=n(c,a),Lp(e,t,f)}catch(K){Yu(e,t,K)}}function Lp(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){_p(e,t,a)},function(a){return Yu(e,t,a)}):_p(e,t,n)}function _p(e,t,n){t.status="fulfilled",t.value=n,Ap(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Tp(e,n)))}function Yu(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,Ap(t),t=t.next;while(t!==a)}e.action=null}function Ap(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Rp(e,t){return t}function Dp(e,t){if(ht){var n=Dt.formState;if(n!==null){e:{var a=rt;if(ht){if(Ut){t:{for(var c=Ut,f=Jn;c.nodeType!==8;){if(!f){c=null;break t}if(c=tr(c.nextSibling),c===null){c=null;break t}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){Ut=tr(c.nextSibling),a=c.data==="F!";break e}}el(a)}a=!1}a&&(t=n[0])}}return n=wn(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rp,lastRenderedState:t},n.queue=a,n=em.bind(null,rt,a),a.dispatch=n,a=$u(!1),f=Ju.bind(null,rt,!1,a.queue),a=wn(),c={state:t,dispatch:null,action:e,pending:null},a.queue=c,n=Ry.bind(null,rt,c,f,n),c.dispatch=n,a.memoizedState=e,[t,n,!1]}function zp(e){var t=Pt();return Bp(t,Lt,e)}function Bp(e,t,n){if(t=Wu(e,t,Rp)[0],e=js(Tr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=to(t)}catch(y){throw y===oa?ms:y}else a=t;t=Pt();var c=t.queue,f=c.dispatch;return n!==t.memoizedState&&(rt.flags|=2048,da(9,{destroy:void 0},Dy.bind(null,c,n),null)),[a,f,e]}function Dy(e,t){e.action=t}function Ip(e){var t=Pt(),n=Lt;if(n!==null)return Bp(t,n,e);Pt(),t=t.memoizedState,n=Pt();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function da(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=rt.updateQueue,t===null&&(t=Ss(),rt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Hp(){return Pt().memoizedState}function Cs(e,t,n,a){var c=wn();rt.flags|=e,c.memoizedState=da(1|t,{destroy:void 0},n,a===void 0?null:a)}function ks(e,t,n,a){var c=Pt();a=a===void 0?null:a;var f=c.memoizedState.inst;Lt!==null&&a!==null&&Iu(a,Lt.memoizedState.deps)?c.memoizedState=da(t,f,n,a):(rt.flags|=e,c.memoizedState=da(1|t,f,n,a))}function Vp(e,t){Cs(8390656,8,e,t)}function Qu(e,t){ks(2048,8,e,t)}function zy(e){rt.flags|=4;var t=rt.updateQueue;if(t===null)t=Ss(),rt.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Up(e){var t=Pt().memoizedState;return zy({ref:t,nextImpl:e}),function(){if((jt&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Gp(e,t){return ks(4,2,e,t)}function qp(e,t){return ks(4,4,e,t)}function Wp(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fp(e,t,n){n=n!=null?n.concat([e]):null,ks(4,4,Wp.bind(null,t,e),n)}function Xu(){}function $p(e,t){var n=Pt();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&Iu(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Yp(e,t){var n=Pt();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&Iu(t,a[1]))return a[0];if(a=e(),Rl){Ht(!0);try{e()}finally{Ht(!1)}}return n.memoizedState=[a,t],a}function Pu(e,t,n){return n===void 0||(Er&1073741824)!==0&&(ct&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Qm(),rt.lanes|=e,ul|=e,n)}function Qp(e,t,n,a){return Dn(n,t)?n:ia.current!==null?(e=Pu(e,n,a),Dn(e,t)||(tn=!0),e):(Er&42)===0||(Er&1073741824)!==0&&(ct&261930)===0?(tn=!0,e.memoizedState=n):(e=Qm(),rt.lanes|=e,ul|=e,t)}function Xp(e,t,n,a,c){var f=Y.p;Y.p=f!==0&&8>f?f:8;var y=z.T,k={};z.T=k,Ju(e,!1,t,n);try{var H=c(),K=z.S;if(K!==null&&K(k,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var fe=Ly(H,a);no(e,t,fe,Un(e))}else no(e,t,a,Un(e))}catch(ge){no(e,t,{then:function(){},status:"rejected",reason:ge},Un())}finally{Y.p=f,y!==null&&k.types!==null&&(y.types=k.types),z.T=y}}function By(){}function Zu(e,t,n,a){if(e.tag!==5)throw Error(s(476));var c=Pp(e).queue;Xp(e,c,t,de,n===null?By:function(){return Zp(e),n(a)})}function Pp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:de},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Zp(e){var t=Pp(e);t.next===null&&(t=e.alternate.memoizedState),no(e,t.next.queue,{},Un())}function Ku(){return mn(bo)}function Kp(){return Pt().memoizedState}function Jp(){return Pt().memoizedState}function Iy(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Un();e=rl(n);var a=ll(t,e,n);a!==null&&(En(a,t,n),Za(a,t,n)),t={cache:Mu()},e.payload=t;return}t=t.return}}function Hy(e,t,n){var a=Un();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ms(e)?tm(t,n):(n=gu(e,t,n,a),n!==null&&(En(n,e,a),nm(n,t,a)))}function em(e,t,n){var a=Un();no(e,t,n,a)}function no(e,t,n,a){var c={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ms(e))tm(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,k=f(y,n);if(c.hasEagerState=!0,c.eagerState=k,Dn(k,y))return ss(e,t,c,0),Dt===null&&os(),!1}catch{}if(n=gu(e,t,c,a),n!==null)return En(n,e,a),nm(n,t,a),!0}return!1}function Ju(e,t,n,a){if(a={lane:2,revertLane:Lc(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ms(e)){if(t)throw Error(s(479))}else t=gu(e,n,a,2),t!==null&&En(t,e,2)}function Ms(e){var t=e.alternate;return e===rt||t!==null&&t===rt}function tm(e,t){ua=bs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function nm(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Fe(e,n)}}var ro={readContext:mn,use:Ns,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};ro.useEffectEvent=Ft;var rm={readContext:mn,use:Ns,useCallback:function(e,t){return wn().memoizedState=[e,t===void 0?null:t],e},useContext:mn,useEffect:Vp,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Cs(4194308,4,Wp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Cs(4194308,4,e,t)},useInsertionEffect:function(e,t){Cs(4,2,e,t)},useMemo:function(e,t){var n=wn();t=t===void 0?null:t;var a=e();if(Rl){Ht(!0);try{e()}finally{Ht(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=wn();if(n!==void 0){var c=n(t);if(Rl){Ht(!0);try{n(t)}finally{Ht(!1)}}}else c=t;return a.memoizedState=a.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},a.queue=e,e=e.dispatch=Hy.bind(null,rt,e),[a.memoizedState,e]},useRef:function(e){var t=wn();return e={current:e},t.memoizedState=e},useState:function(e){e=$u(e);var t=e.queue,n=em.bind(null,rt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Xu,useDeferredValue:function(e,t){var n=wn();return Pu(n,e,t)},useTransition:function(){var e=$u(!1);return e=Xp.bind(null,rt,e.queue,!0,!1),wn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=rt,c=wn();if(ht){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),Dt===null)throw Error(s(349));(ct&127)!==0||jp(a,t,n)}c.memoizedState=n;var f={value:n,getSnapshot:t};return c.queue=f,Vp(kp.bind(null,a,f,e),[e]),a.flags|=2048,da(9,{destroy:void 0},Cp.bind(null,a,f,n,t),null),n},useId:function(){var e=wn(),t=Dt.identifierPrefix;if(ht){var n=mr,a=pr;n=(a&~(1<<32-Vt(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=ws++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=_y++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ku,useFormState:Dp,useActionState:Dp,useOptimistic:function(e){var t=wn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ju.bind(null,rt,!0,n),n.dispatch=t,[e,t]},useMemoCache:qu,useCacheRefresh:function(){return wn().memoizedState=Iy.bind(null,rt)},useEffectEvent:function(e){var t=wn(),n={impl:e};return t.memoizedState=n,function(){if((jt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},ec={readContext:mn,use:Ns,useCallback:$p,useContext:mn,useEffect:Qu,useImperativeHandle:Fp,useInsertionEffect:Gp,useLayoutEffect:qp,useMemo:Yp,useReducer:js,useRef:Hp,useState:function(){return js(Tr)},useDebugValue:Xu,useDeferredValue:function(e,t){var n=Pt();return Qp(n,Lt.memoizedState,e,t)},useTransition:function(){var e=js(Tr)[0],t=Pt().memoizedState;return[typeof e=="boolean"?e:to(e),t]},useSyncExternalStore:Np,useId:Kp,useHostTransitionStatus:Ku,useFormState:zp,useActionState:zp,useOptimistic:function(e,t){var n=Pt();return Ep(n,Lt,e,t)},useMemoCache:qu,useCacheRefresh:Jp};ec.useEffectEvent=Up;var lm={readContext:mn,use:Ns,useCallback:$p,useContext:mn,useEffect:Qu,useImperativeHandle:Fp,useInsertionEffect:Gp,useLayoutEffect:qp,useMemo:Yp,useReducer:Fu,useRef:Hp,useState:function(){return Fu(Tr)},useDebugValue:Xu,useDeferredValue:function(e,t){var n=Pt();return Lt===null?Pu(n,e,t):Qp(n,Lt.memoizedState,e,t)},useTransition:function(){var e=Fu(Tr)[0],t=Pt().memoizedState;return[typeof e=="boolean"?e:to(e),t]},useSyncExternalStore:Np,useId:Kp,useHostTransitionStatus:Ku,useFormState:Ip,useActionState:Ip,useOptimistic:function(e,t){var n=Pt();return Lt!==null?Ep(n,Lt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qu,useCacheRefresh:Jp};lm.useEffectEvent=Up;function tc(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:v({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var nc={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Un(),c=rl(a);c.payload=t,n!=null&&(c.callback=n),t=ll(e,c,a),t!==null&&(En(t,e,a),Za(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Un(),c=rl(a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=ll(e,c,a),t!==null&&(En(t,e,a),Za(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Un(),a=rl(n);a.tag=2,t!=null&&(a.callback=t),t=ll(e,a,n),t!==null&&(En(t,e,n),Za(t,e,n))}};function am(e,t,n,a,c,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,y):t.prototype&&t.prototype.isPureReactComponent?!qa(n,a)||!qa(c,f):!0}function om(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&nc.enqueueReplaceState(t,t.state,null)}function Dl(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=v({},n));for(var c in e)n[c]===void 0&&(n[c]=e[c])}return n}function sm(e){as(e)}function im(e){console.error(e)}function um(e){as(e)}function Os(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function cm(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function rc(e,t,n){return n=rl(n),n.tag=3,n.payload={element:null},n.callback=function(){Os(e,t)},n}function dm(e){return e=rl(e),e.tag=3,e}function fm(e,t,n,a){var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=a.value;e.payload=function(){return c(f)},e.callback=function(){cm(t,n,a)}}var y=n.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){cm(t,n,a),typeof c!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var k=a.stack;this.componentDidCatch(a.value,{componentStack:k!==null?k:""})})}function Vy(e,t,n,a,c){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&ra(t,n,c,!0),n=Bn.current,n!==null){switch(n.tag){case 31:case 13:return er===null?Vs():n.alternate===null&&$t===0&&($t=3),n.flags&=-257,n.flags|=65536,n.lanes=c,a===hs?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Oc(e,a,c)),!1;case 22:return n.flags|=65536,a===hs?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Oc(e,a,c)),!1}throw Error(s(435,n.tag))}return Oc(e,a,c),Vs(),!1}if(ht)return t=Bn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,a!==Su&&(e=Error(s(422),{cause:a}),$a(Pn(e,n)))):(a!==Su&&(t=Error(s(423),{cause:a}),$a(Pn(t,n))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,a=Pn(a,n),c=rc(e.stateNode,a,c),Au(e,c),$t!==4&&($t=2)),!1;var f=Error(s(520),{cause:a});if(f=Pn(f,n),fo===null?fo=[f]:fo.push(f),$t!==4&&($t=2),t===null)return!0;a=Pn(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=c&-c,n.lanes|=e,e=rc(n.stateNode,a,e),Au(n,e),!1;case 1:if(t=n.type,f=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(cl===null||!cl.has(f))))return n.flags|=65536,c&=-c,n.lanes|=c,c=dm(c),fm(c,e,n,a),Au(n,c),!1}n=n.return}while(n!==null);return!1}var lc=Error(s(461)),tn=!1;function hn(e,t,n,a){t.child=e===null?gp(t,null,n,a):Al(t,e.child,n,a)}function pm(e,t,n,a,c){n=n.render;var f=t.ref;if("ref"in a){var y={};for(var k in a)k!=="ref"&&(y[k]=a[k])}else y=a;return El(t),a=Hu(e,t,n,y,f,c),k=Vu(),e!==null&&!tn?(Uu(e,t,c),Lr(e,t,c)):(ht&&k&&bu(t),t.flags|=1,hn(e,t,a,c),t.child)}function mm(e,t,n,a,c){if(e===null){var f=n.type;return typeof f=="function"&&!xu(f)&&f.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=f,hm(e,t,f,a,c)):(e=us(n.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!fc(e,c)){var y=f.memoizedProps;if(n=n.compare,n=n!==null?n:qa,n(y,a)&&e.ref===t.ref)return Lr(e,t,c)}return t.flags|=1,e=Cr(f,a),e.ref=t.ref,e.return=t,t.child=e}function hm(e,t,n,a,c){if(e!==null){var f=e.memoizedProps;if(qa(f,a)&&e.ref===t.ref)if(tn=!1,t.pendingProps=a=f,fc(e,c))(e.flags&131072)!==0&&(tn=!0);else return t.lanes=e.lanes,Lr(e,t,c)}return ac(e,t,n,a,c)}function gm(e,t,n,a){var c=a.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|n:n,e!==null){for(a=t.child=e.child,c=0;a!==null;)c=c|a.lanes|a.childLanes,a=a.sibling;a=c&~f}else a=0,t.child=null;return xm(e,t,f,n,a)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ps(t,f!==null?f.cachePool:null),f!==null?vp(t,f):Du(),bp(t);else return a=t.lanes=536870912,xm(e,t,f!==null?f.baseLanes|n:n,n,a)}else f!==null?(ps(t,f.cachePool),vp(t,f),ol(),t.memoizedState=null):(e!==null&&ps(t,null),Du(),ol());return hn(e,t,c,n),t.child}function lo(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function xm(e,t,n,a,c){var f=Eu();return f=f===null?null:{parent:Jt._currentValue,pool:f},t.memoizedState={baseLanes:n,cachePool:f},e!==null&&ps(t,null),Du(),bp(t),e!==null&&ra(e,t,a,!0),t.childLanes=c,null}function Es(e,t){return t=Ls({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ym(e,t,n){return Al(t,e.child,null,n),e=Es(t,t.pendingProps),e.flags|=2,In(t),t.memoizedState=null,e}function Uy(e,t,n){var a=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ht){if(a.mode==="hidden")return e=Es(t,a),t.lanes=536870912,lo(null,e);if(Bu(t),(e=Ut)?(e=Th(e,Jn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Kr!==null?{id:pr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},n=tp(e),n.return=t,t.child=n,pn=t,Ut=null)):e=null,e===null)throw el(t);return t.lanes=536870912,null}return Es(t,a)}var f=e.memoizedState;if(f!==null){var y=f.dehydrated;if(Bu(t),c)if(t.flags&256)t.flags&=-257,t=ym(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(tn||ra(e,t,n,!1),c=(n&e.childLanes)!==0,tn||c){if(a=Dt,a!==null&&(y=Te(a,n),y!==0&&y!==f.retryLane))throw f.retryLane=y,Cl(e,y),En(a,e,y),lc;Vs(),t=ym(e,t,n)}else e=f.treeContext,Ut=tr(y.nextSibling),pn=t,ht=!0,Jr=null,Jn=!1,e!==null&&lp(t,e),t=Es(t,a),t.flags|=4096;return t}return e=Cr(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ts(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function ac(e,t,n,a,c){return El(t),n=Hu(e,t,n,a,void 0,c),a=Vu(),e!==null&&!tn?(Uu(e,t,c),Lr(e,t,c)):(ht&&a&&bu(t),t.flags|=1,hn(e,t,n,c),t.child)}function vm(e,t,n,a,c,f){return El(t),t.updateQueue=null,n=Sp(t,a,n,c),wp(e),a=Vu(),e!==null&&!tn?(Uu(e,t,f),Lr(e,t,f)):(ht&&a&&bu(t),t.flags|=1,hn(e,t,n,f),t.child)}function bm(e,t,n,a,c){if(El(t),t.stateNode===null){var f=Jl,y=n.contextType;typeof y=="object"&&y!==null&&(f=mn(y)),f=new n(a,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=nc,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=a,f.state=t.memoizedState,f.refs={},Lu(t),y=n.contextType,f.context=typeof y=="object"&&y!==null?mn(y):Jl,f.state=t.memoizedState,y=n.getDerivedStateFromProps,typeof y=="function"&&(tc(t,n,y,a),f.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&nc.enqueueReplaceState(f,f.state,null),Ja(t,a,f,c),Ka(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){f=t.stateNode;var k=t.memoizedProps,H=Dl(n,k);f.props=H;var K=f.context,fe=n.contextType;y=Jl,typeof fe=="object"&&fe!==null&&(y=mn(fe));var ge=n.getDerivedStateFromProps;fe=typeof ge=="function"||typeof f.getSnapshotBeforeUpdate=="function",k=t.pendingProps!==k,fe||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(k||K!==y)&&om(t,f,a,y),nl=!1;var re=t.memoizedState;f.state=re,Ja(t,a,f,c),Ka(),K=t.memoizedState,k||re!==K||nl?(typeof ge=="function"&&(tc(t,n,ge,a),K=t.memoizedState),(H=nl||am(t,n,H,a,re,K,y))?(fe||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=K),f.props=a,f.state=K,f.context=y,a=H):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,_u(e,t),y=t.memoizedProps,fe=Dl(n,y),f.props=fe,ge=t.pendingProps,re=f.context,K=n.contextType,H=Jl,typeof K=="object"&&K!==null&&(H=mn(K)),k=n.getDerivedStateFromProps,(K=typeof k=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==ge||re!==H)&&om(t,f,a,H),nl=!1,re=t.memoizedState,f.state=re,Ja(t,a,f,c),Ka();var ie=t.memoizedState;y!==ge||re!==ie||nl||e!==null&&e.dependencies!==null&&ds(e.dependencies)?(typeof k=="function"&&(tc(t,n,k,a),ie=t.memoizedState),(fe=nl||am(t,n,fe,a,re,ie,H)||e!==null&&e.dependencies!==null&&ds(e.dependencies))?(K||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,ie,H),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,ie,H)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&re===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&re===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ie),f.props=a,f.state=ie,f.context=H,a=fe):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&re===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&re===e.memoizedState||(t.flags|=1024),a=!1)}return f=a,Ts(e,t),a=(t.flags&128)!==0,f||a?(f=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&a?(t.child=Al(t,e.child,null,c),t.child=Al(t,null,n,c)):hn(e,t,n,c),t.memoizedState=f.state,e=t.child):e=Lr(e,t,c),e}function wm(e,t,n,a){return Ml(),t.flags|=256,hn(e,t,n,a),t.child}var oc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sc(e){return{baseLanes:e,cachePool:cp()}}function ic(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Vn),e}function Sm(e,t,n){var a=t.pendingProps,c=!1,f=(t.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(Xt.current&2)!==0),y&&(c=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(ht){if(c?al(t):ol(),(e=Ut)?(e=Th(e,Jn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Kr!==null?{id:pr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},n=tp(e),n.return=t,t.child=n,pn=t,Ut=null)):e=null,e===null)throw el(t);return Wc(e)?t.lanes=32:t.lanes=536870912,null}var k=a.children;return a=a.fallback,c?(ol(),c=t.mode,k=Ls({mode:"hidden",children:k},c),a=kl(a,c,n,null),k.return=t,a.return=t,k.sibling=a,t.child=k,a=t.child,a.memoizedState=sc(n),a.childLanes=ic(e,y,n),t.memoizedState=oc,lo(null,a)):(al(t),uc(t,k))}var H=e.memoizedState;if(H!==null&&(k=H.dehydrated,k!==null)){if(f)t.flags&256?(al(t),t.flags&=-257,t=cc(e,t,n)):t.memoizedState!==null?(ol(),t.child=e.child,t.flags|=128,t=null):(ol(),k=a.fallback,c=t.mode,a=Ls({mode:"visible",children:a.children},c),k=kl(k,c,n,null),k.flags|=2,a.return=t,k.return=t,a.sibling=k,t.child=a,Al(t,e.child,null,n),a=t.child,a.memoizedState=sc(n),a.childLanes=ic(e,y,n),t.memoizedState=oc,t=lo(null,a));else if(al(t),Wc(k)){if(y=k.nextSibling&&k.nextSibling.dataset,y)var K=y.dgst;y=K,a=Error(s(419)),a.stack="",a.digest=y,$a({value:a,source:null,stack:null}),t=cc(e,t,n)}else if(tn||ra(e,t,n,!1),y=(n&e.childLanes)!==0,tn||y){if(y=Dt,y!==null&&(a=Te(y,n),a!==0&&a!==H.retryLane))throw H.retryLane=a,Cl(e,a),En(y,e,a),lc;qc(k)||Vs(),t=cc(e,t,n)}else qc(k)?(t.flags|=192,t.child=e.child,t=null):(e=H.treeContext,Ut=tr(k.nextSibling),pn=t,ht=!0,Jr=null,Jn=!1,e!==null&&lp(t,e),t=uc(t,a.children),t.flags|=4096);return t}return c?(ol(),k=a.fallback,c=t.mode,H=e.child,K=H.sibling,a=Cr(H,{mode:"hidden",children:a.children}),a.subtreeFlags=H.subtreeFlags&65011712,K!==null?k=Cr(K,k):(k=kl(k,c,n,null),k.flags|=2),k.return=t,a.return=t,a.sibling=k,t.child=a,lo(null,a),a=t.child,k=e.child.memoizedState,k===null?k=sc(n):(c=k.cachePool,c!==null?(H=Jt._currentValue,c=c.parent!==H?{parent:H,pool:H}:c):c=cp(),k={baseLanes:k.baseLanes|n,cachePool:c}),a.memoizedState=k,a.childLanes=ic(e,y,n),t.memoizedState=oc,lo(e.child,a)):(al(t),n=e.child,e=n.sibling,n=Cr(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=n,t.memoizedState=null,n)}function uc(e,t){return t=Ls({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ls(e,t){return e=zn(22,e,null,t),e.lanes=0,e}function cc(e,t,n){return Al(t,e.child,null,n),e=uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Nm(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Cu(e.return,t,n)}function dc(e,t,n,a,c,f){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:c,treeForkCount:f}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=a,y.tail=n,y.tailMode=c,y.treeForkCount=f)}function jm(e,t,n){var a=t.pendingProps,c=a.revealOrder,f=a.tail;a=a.children;var y=Xt.current,k=(y&2)!==0;if(k?(y=y&1|2,t.flags|=128):y&=1,O(Xt,y),hn(e,t,a,n),a=ht?Fa:0,!k&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nm(e,n,t);else if(e.tag===19)Nm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&vs(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),dc(t,!1,c,n,f,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&vs(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}dc(t,!0,n,null,f,a);break;case"together":dc(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function Lr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ul|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(ra(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=Cr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Cr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function fc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ds(e)))}function Gy(e,t,n){switch(t.tag){case 3:oe(t,t.stateNode.containerInfo),tl(t,Jt,e.memoizedState.cache),Ml();break;case 27:case 5:Oe(t);break;case 4:oe(t,t.stateNode.containerInfo);break;case 10:tl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Bu(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(al(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Sm(e,t,n):(al(t),e=Lr(e,t,n),e!==null?e.sibling:null);al(t);break;case 19:var c=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(ra(e,t,n,!1),a=(n&t.childLanes)!==0),c){if(a)return jm(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),O(Xt,Xt.current),a)break;return null;case 22:return t.lanes=0,gm(e,t,n,t.pendingProps);case 24:tl(t,Jt,e.memoizedState.cache)}return Lr(e,t,n)}function Cm(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)tn=!0;else{if(!fc(e,n)&&(t.flags&128)===0)return tn=!1,Gy(e,t,n);tn=(e.flags&131072)!==0}else tn=!1,ht&&(t.flags&1048576)!==0&&rp(t,Fa,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=Ll(t.elementType),t.type=e,typeof e=="function")xu(e)?(a=Dl(e,a),t.tag=1,t=bm(null,t,e,a,n)):(t.tag=0,t=ac(null,t,e,a,n));else{if(e!=null){var c=e.$$typeof;if(c===_){t.tag=11,t=pm(null,t,e,a,n);break e}else if(c===A){t.tag=14,t=mm(null,t,e,a,n);break e}}throw t=ae(e)||e,Error(s(306,t,""))}}return t;case 0:return ac(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,c=Dl(a,t.pendingProps),bm(e,t,a,c,n);case 3:e:{if(oe(t,t.stateNode.containerInfo),e===null)throw Error(s(387));a=t.pendingProps;var f=t.memoizedState;c=f.element,_u(e,t),Ja(t,a,null,n);var y=t.memoizedState;if(a=y.cache,tl(t,Jt,a),a!==f.cache&&ku(t,[Jt],n,!0),Ka(),a=y.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=wm(e,t,a,n);break e}else if(a!==c){c=Pn(Error(s(424)),t),$a(c),t=wm(e,t,a,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ut=tr(e.firstChild),pn=t,ht=!0,Jr=null,Jn=!0,n=gp(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ml(),a===c){t=Lr(e,t,n);break e}hn(e,t,a,n)}t=t.child}return t;case 26:return Ts(e,t),e===null?(n=zh(t.type,null,t.pendingProps,null))?t.memoizedState=n:ht||(n=t.type,e=t.pendingProps,a=Ys(pe.current).createElement(n),a[bt]=t,a[Rt]=e,gn(a,n,e),Kt(a),t.stateNode=a):t.memoizedState=zh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Oe(t),e===null&&ht&&(a=t.stateNode=Ah(t.type,t.pendingProps,pe.current),pn=t,Jn=!0,c=Ut,ml(t.type)?(Fc=c,Ut=tr(a.firstChild)):Ut=c),hn(e,t,t.pendingProps.children,n),Ts(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ht&&((c=a=Ut)&&(a=yv(a,t.type,t.pendingProps,Jn),a!==null?(t.stateNode=a,pn=t,Ut=tr(a.firstChild),Jn=!1,c=!0):c=!1),c||el(t)),Oe(t),c=t.type,f=t.pendingProps,y=e!==null?e.memoizedProps:null,a=f.children,Vc(c,f)?a=null:y!==null&&Vc(c,y)&&(t.flags|=32),t.memoizedState!==null&&(c=Hu(e,t,Ay,null,null,n),bo._currentValue=c),Ts(e,t),hn(e,t,a,n),t.child;case 6:return e===null&&ht&&((e=n=Ut)&&(n=vv(n,t.pendingProps,Jn),n!==null?(t.stateNode=n,pn=t,Ut=null,e=!0):e=!1),e||el(t)),null;case 13:return Sm(e,t,n);case 4:return oe(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Al(t,null,a,n):hn(e,t,a,n),t.child;case 11:return pm(e,t,t.type,t.pendingProps,n);case 7:return hn(e,t,t.pendingProps,n),t.child;case 8:return hn(e,t,t.pendingProps.children,n),t.child;case 12:return hn(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,tl(t,t.type,a.value),hn(e,t,a.children,n),t.child;case 9:return c=t.type._context,a=t.pendingProps.children,El(t),c=mn(c),a=a(c),t.flags|=1,hn(e,t,a,n),t.child;case 14:return mm(e,t,t.type,t.pendingProps,n);case 15:return hm(e,t,t.type,t.pendingProps,n);case 19:return jm(e,t,n);case 31:return Uy(e,t,n);case 22:return gm(e,t,n,t.pendingProps);case 24:return El(t),a=mn(Jt),e===null?(c=Eu(),c===null&&(c=Dt,f=Mu(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=n),c=f),t.memoizedState={parent:a,cache:c},Lu(t),tl(t,Jt,c)):((e.lanes&n)!==0&&(_u(e,t),Ja(t,null,null,n),Ka()),c=e.memoizedState,f=t.memoizedState,c.parent!==a?(c={parent:a,cache:a},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),tl(t,Jt,a)):(a=f.cache,tl(t,Jt,a),a!==c.cache&&ku(t,[Jt],n,!0))),hn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function _r(e){e.flags|=4}function pc(e,t,n,a,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Km())e.flags|=8192;else throw _l=hs,Tu}else e.flags&=-16777217}function km(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Uh(t))if(Km())e.flags|=8192;else throw _l=hs,Tu}function _s(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?V():536870912,e.lanes|=t,ha|=t)}function ao(e,t){if(!ht)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags&65011712,a|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function qy(e,t,n){var a=t.pendingProps;switch(wu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(t),null;case 1:return Gt(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Or(Jt),ve(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(na(t)?_r(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Nu())),Gt(t),null;case 26:var c=t.type,f=t.memoizedState;return e===null?(_r(t),f!==null?(Gt(t),km(t,f)):(Gt(t),pc(t,c,null,a,n))):f?f!==e.memoizedState?(_r(t),Gt(t),km(t,f)):(Gt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&_r(t),Gt(t),pc(t,c,e,a,n)),null;case 27:if(Qe(t),n=pe.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&_r(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Gt(t),null}e=F.current,na(t)?ap(t):(e=Ah(c,a,n),t.stateNode=e,_r(t))}return Gt(t),null;case 5:if(Qe(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&_r(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Gt(t),null}if(f=F.current,na(t))ap(t);else{var y=Ys(pe.current);switch(f){case 1:f=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:f=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":f=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":f=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":f=y.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof a.is=="string"?y.createElement("select",{is:a.is}):y.createElement("select"),a.multiple?f.multiple=!0:a.size&&(f.size=a.size);break;default:f=typeof a.is=="string"?y.createElement(c,{is:a.is}):y.createElement(c)}}f[bt]=t,f[Rt]=a;e:for(y=t.child;y!==null;){if(y.tag===5||y.tag===6)f.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}t.stateNode=f;e:switch(gn(f,c,a),c){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&_r(t)}}return Gt(t),pc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&_r(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(e=pe.current,na(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,c=pn,c!==null)switch(c.tag){case 27:case 5:a=c.memoizedProps}e[bt]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||Sh(e.nodeValue,n)),e||el(t,!0)}else e=Ys(e).createTextNode(a),e[bt]=t,t.stateNode=e}return Gt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=na(t),n!==null){if(e===null){if(!a)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[bt]=t}else Ml(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Gt(t),e=!1}else n=Nu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(In(t),t):(In(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Gt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=na(t),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(s(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));c[bt]=t}else Ml(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Gt(t),c=!1}else c=Nu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(In(t),t):(In(t),null)}return In(t),(t.flags&128)!==0?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,c=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(c=a.alternate.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),_s(t,t.updateQueue),Gt(t),null);case 4:return ve(),e===null&&Dc(t.stateNode.containerInfo),Gt(t),null;case 10:return Or(t.type),Gt(t),null;case 19:if(I(Xt),a=t.memoizedState,a===null)return Gt(t),null;if(c=(t.flags&128)!==0,f=a.rendering,f===null)if(c)ao(a,!1);else{if($t!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=vs(e),f!==null){for(t.flags|=128,ao(a,!1),e=f.updateQueue,t.updateQueue=e,_s(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ep(n,e),n=n.sibling;return O(Xt,Xt.current&1|2),ht&&kr(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&Be()>Bs&&(t.flags|=128,c=!0,ao(a,!1),t.lanes=4194304)}else{if(!c)if(e=vs(f),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,_s(t,e),ao(a,!0),a.tail===null&&a.tailMode==="hidden"&&!f.alternate&&!ht)return Gt(t),null}else 2*Be()-a.renderingStartTime>Bs&&n!==536870912&&(t.flags|=128,c=!0,ao(a,!1),t.lanes=4194304);a.isBackwards?(f.sibling=t.child,t.child=f):(e=a.last,e!==null?e.sibling=f:t.child=f,a.last=f)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Be(),e.sibling=null,n=Xt.current,O(Xt,c?n&1|2:n&1),ht&&kr(t,a.treeForkCount),e):(Gt(t),null);case 22:case 23:return In(t),zu(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(Gt(t),t.subtreeFlags&6&&(t.flags|=8192)):Gt(t),n=t.updateQueue,n!==null&&_s(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&I(Tl),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Or(Jt),Gt(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Wy(e,t){switch(wu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Or(Jt),ve(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Qe(t),null;case 31:if(t.memoizedState!==null){if(In(t),t.alternate===null)throw Error(s(340));Ml()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(In(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Ml()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(Xt),null;case 4:return ve(),null;case 10:return Or(t.type),null;case 22:case 23:return In(t),zu(),e!==null&&I(Tl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Or(Jt),null;case 25:return null;default:return null}}function Mm(e,t){switch(wu(t),t.tag){case 3:Or(Jt),ve();break;case 26:case 27:case 5:Qe(t);break;case 4:ve();break;case 31:t.memoizedState!==null&&In(t);break;case 13:In(t);break;case 19:I(Xt);break;case 10:Or(t.type);break;case 22:case 23:In(t),zu(),e!==null&&I(Tl);break;case 24:Or(Jt)}}function oo(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var c=a.next;n=c;do{if((n.tag&e)===e){a=void 0;var f=n.create,y=n.inst;a=f(),y.destroy=a}n=n.next}while(n!==c)}}catch(k){Tt(t,t.return,k)}}function sl(e,t,n){try{var a=t.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&e)===e){var y=a.inst,k=y.destroy;if(k!==void 0){y.destroy=void 0,c=t;var H=n,K=k;try{K()}catch(fe){Tt(c,H,fe)}}}a=a.next}while(a!==f)}}catch(fe){Tt(t,t.return,fe)}}function Om(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{yp(t,n)}catch(a){Tt(e,e.return,a)}}}function Em(e,t,n){n.props=Dl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Tt(e,t,a)}}function so(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(c){Tt(e,t,c)}}function hr(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(c){Tt(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(c){Tt(e,t,c)}else n.current=null}function Tm(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(c){Tt(e,e.return,c)}}function mc(e,t,n){try{var a=e.stateNode;fv(a,e.type,n,t),a[Rt]=t}catch(c){Tt(e,e.return,c)}}function Lm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ml(e.type)||e.tag===4}function hc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ml(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gc(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Nr));else if(a!==4&&(a===27&&ml(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(gc(e,t,n),e=e.sibling;e!==null;)gc(e,t,n),e=e.sibling}function As(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&ml(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(As(e,t,n),e=e.sibling;e!==null;)As(e,t,n),e=e.sibling}function _m(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);gn(t,a,n),t[bt]=e,t[Rt]=n}catch(f){Tt(e,e.return,f)}}var Ar=!1,nn=!1,xc=!1,Am=typeof WeakSet=="function"?WeakSet:Set,dn=null;function Fy(e,t){if(e=e.containerInfo,Ic=ei,e=Ff(e),cu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var y=0,k=-1,H=-1,K=0,fe=0,ge=e,re=null;t:for(;;){for(var ie;ge!==n||c!==0&&ge.nodeType!==3||(k=y+c),ge!==f||a!==0&&ge.nodeType!==3||(H=y+a),ge.nodeType===3&&(y+=ge.nodeValue.length),(ie=ge.firstChild)!==null;)re=ge,ge=ie;for(;;){if(ge===e)break t;if(re===n&&++K===c&&(k=y),re===f&&++fe===a&&(H=y),(ie=ge.nextSibling)!==null)break;ge=re,re=ge.parentNode}ge=ie}n=k===-1||H===-1?null:{start:k,end:H}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hc={focusedElem:e,selectionRange:n},ei=!1,dn=t;dn!==null;)if(t=dn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,dn=e;else for(;dn!==null;){switch(t=dn,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)c=e[n],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,n=t,c=f.memoizedProps,f=f.memoizedState,a=n.stateNode;try{var Ee=Dl(n.type,c);e=a.getSnapshotBeforeUpdate(Ee,f),a.__reactInternalSnapshotBeforeUpdate=e}catch(qe){Tt(n,n.return,qe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Gc(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Gc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,dn=e;break}dn=t.return}}function Rm(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Dr(e,n),a&4&&oo(5,n);break;case 1:if(Dr(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(y){Tt(n,n.return,y)}else{var c=Dl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Tt(n,n.return,y)}}a&64&&Om(n),a&512&&so(n,n.return);break;case 3:if(Dr(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{yp(e,t)}catch(y){Tt(n,n.return,y)}}break;case 27:t===null&&a&4&&_m(n);case 26:case 5:Dr(e,n),t===null&&a&4&&Tm(n),a&512&&so(n,n.return);break;case 12:Dr(e,n);break;case 31:Dr(e,n),a&4&&Bm(e,n);break;case 13:Dr(e,n),a&4&&Im(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=ev.bind(null,n),bv(e,n))));break;case 22:if(a=n.memoizedState!==null||Ar,!a){t=t!==null&&t.memoizedState!==null||nn,c=Ar;var f=nn;Ar=a,(nn=t)&&!f?zr(e,n,(n.subtreeFlags&8772)!==0):Dr(e,n),Ar=c,nn=f}break;case 30:break;default:Dr(e,n)}}function Dm(e){var t=e.alternate;t!==null&&(e.alternate=null,Dm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&cn(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Wt=null,Cn=!1;function Rr(e,t,n){for(n=n.child;n!==null;)zm(e,t,n),n=n.sibling}function zm(e,t,n){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(tt,n)}catch{}switch(n.tag){case 26:nn||hr(n,t),Rr(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:nn||hr(n,t);var a=Wt,c=Cn;ml(n.type)&&(Wt=n.stateNode,Cn=!1),Rr(e,t,n),xo(n.stateNode),Wt=a,Cn=c;break;case 5:nn||hr(n,t);case 6:if(a=Wt,c=Cn,Wt=null,Rr(e,t,n),Wt=a,Cn=c,Wt!==null)if(Cn)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(n.stateNode)}catch(f){Tt(n,t,f)}else try{Wt.removeChild(n.stateNode)}catch(f){Tt(n,t,f)}break;case 18:Wt!==null&&(Cn?(e=Wt,Oh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Na(e)):Oh(Wt,n.stateNode));break;case 4:a=Wt,c=Cn,Wt=n.stateNode.containerInfo,Cn=!0,Rr(e,t,n),Wt=a,Cn=c;break;case 0:case 11:case 14:case 15:sl(2,n,t),nn||sl(4,n,t),Rr(e,t,n);break;case 1:nn||(hr(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&Em(n,t,a)),Rr(e,t,n);break;case 21:Rr(e,t,n);break;case 22:nn=(a=nn)||n.memoizedState!==null,Rr(e,t,n),nn=a;break;default:Rr(e,t,n)}}function Bm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Na(e)}catch(n){Tt(t,t.return,n)}}}function Im(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Na(e)}catch(n){Tt(t,t.return,n)}}function $y(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Am),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Am),t;default:throw Error(s(435,e.tag))}}function Rs(e,t){var n=$y(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var c=tv.bind(null,e,a);a.then(c,c)}})}function kn(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var c=n[a],f=e,y=t,k=y;e:for(;k!==null;){switch(k.tag){case 27:if(ml(k.type)){Wt=k.stateNode,Cn=!1;break e}break;case 5:Wt=k.stateNode,Cn=!1;break e;case 3:case 4:Wt=k.stateNode.containerInfo,Cn=!0;break e}k=k.return}if(Wt===null)throw Error(s(160));zm(f,y,c),Wt=null,Cn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Hm(t,e),t=t.sibling}var ir=null;function Hm(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:kn(t,e),Mn(e),a&4&&(sl(3,e,e.return),oo(3,e),sl(5,e,e.return));break;case 1:kn(t,e),Mn(e),a&512&&(nn||n===null||hr(n,n.return)),a&64&&Ar&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var c=ir;if(kn(t,e),Mn(e),a&512&&(nn||n===null||hr(n,n.return)),a&4){var f=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,c=c.ownerDocument||c;t:switch(a){case"title":f=c.getElementsByTagName("title")[0],(!f||f[It]||f[bt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(a),c.head.insertBefore(f,c.querySelector("head > title"))),gn(f,a,n),f[bt]=e,Kt(f),a=f;break e;case"link":var y=Hh("link","href",c).get(a+(n.href||""));if(y){for(var k=0;k<y.length;k++)if(f=y[k],f.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&f.getAttribute("rel")===(n.rel==null?null:n.rel)&&f.getAttribute("title")===(n.title==null?null:n.title)&&f.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){y.splice(k,1);break t}}f=c.createElement(a),gn(f,a,n),c.head.appendChild(f);break;case"meta":if(y=Hh("meta","content",c).get(a+(n.content||""))){for(k=0;k<y.length;k++)if(f=y[k],f.getAttribute("content")===(n.content==null?null:""+n.content)&&f.getAttribute("name")===(n.name==null?null:n.name)&&f.getAttribute("property")===(n.property==null?null:n.property)&&f.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&f.getAttribute("charset")===(n.charSet==null?null:n.charSet)){y.splice(k,1);break t}}f=c.createElement(a),gn(f,a,n),c.head.appendChild(f);break;default:throw Error(s(468,a))}f[bt]=e,Kt(f),a=f}e.stateNode=a}else Vh(c,e.type,e.stateNode);else e.stateNode=Ih(c,a,e.memoizedProps);else f!==a?(f===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):f.count--,a===null?Vh(c,e.type,e.stateNode):Ih(c,a,e.memoizedProps)):a===null&&e.stateNode!==null&&mc(e,e.memoizedProps,n.memoizedProps)}break;case 27:kn(t,e),Mn(e),a&512&&(nn||n===null||hr(n,n.return)),n!==null&&a&4&&mc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(kn(t,e),Mn(e),a&512&&(nn||n===null||hr(n,n.return)),e.flags&32){c=e.stateNode;try{$l(c,"")}catch(Ee){Tt(e,e.return,Ee)}}a&4&&e.stateNode!=null&&(c=e.memoizedProps,mc(e,c,n!==null?n.memoizedProps:c)),a&1024&&(xc=!0);break;case 6:if(kn(t,e),Mn(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(Ee){Tt(e,e.return,Ee)}}break;case 3:if(Ps=null,c=ir,ir=Qs(t.containerInfo),kn(t,e),ir=c,Mn(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Na(t.containerInfo)}catch(Ee){Tt(e,e.return,Ee)}xc&&(xc=!1,Vm(e));break;case 4:a=ir,ir=Qs(e.stateNode.containerInfo),kn(t,e),Mn(e),ir=a;break;case 12:kn(t,e),Mn(e);break;case 31:kn(t,e),Mn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Rs(e,a)));break;case 13:kn(t,e),Mn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(zs=Be()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Rs(e,a)));break;case 22:c=e.memoizedState!==null;var H=n!==null&&n.memoizedState!==null,K=Ar,fe=nn;if(Ar=K||c,nn=fe||H,kn(t,e),nn=fe,Ar=K,Mn(e),a&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(n===null||H||Ar||nn||zl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){H=n=t;try{if(f=H.stateNode,c)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{k=H.stateNode;var ge=H.memoizedProps.style,re=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;k.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Ee){Tt(H,H.return,Ee)}}}else if(t.tag===6){if(n===null){H=t;try{H.stateNode.nodeValue=c?"":H.memoizedProps}catch(Ee){Tt(H,H.return,Ee)}}}else if(t.tag===18){if(n===null){H=t;try{var ie=H.stateNode;c?Eh(ie,!0):Eh(H.stateNode,!1)}catch(Ee){Tt(H,H.return,Ee)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Rs(e,n))));break;case 19:kn(t,e),Mn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Rs(e,a)));break;case 30:break;case 21:break;default:kn(t,e),Mn(e)}}function Mn(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(Lm(a)){n=a;break}a=a.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var c=n.stateNode,f=hc(e);As(e,f,c);break;case 5:var y=n.stateNode;n.flags&32&&($l(y,""),n.flags&=-33);var k=hc(e);As(e,k,y);break;case 3:case 4:var H=n.stateNode.containerInfo,K=hc(e);gc(e,K,H);break;default:throw Error(s(161))}}catch(fe){Tt(e,e.return,fe)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Vm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Dr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Rm(e,t.alternate,t),t=t.sibling}function zl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sl(4,t,t.return),zl(t);break;case 1:hr(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Em(t,t.return,n),zl(t);break;case 27:xo(t.stateNode);case 26:case 5:hr(t,t.return),zl(t);break;case 22:t.memoizedState===null&&zl(t);break;case 30:zl(t);break;default:zl(t)}e=e.sibling}}function zr(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,c=e,f=t,y=f.flags;switch(f.tag){case 0:case 11:case 15:zr(c,f,n),oo(4,f);break;case 1:if(zr(c,f,n),a=f,c=a.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(K){Tt(a,a.return,K)}if(a=f,c=a.updateQueue,c!==null){var k=a.stateNode;try{var H=c.shared.hiddenCallbacks;if(H!==null)for(c.shared.hiddenCallbacks=null,c=0;c<H.length;c++)xp(H[c],k)}catch(K){Tt(a,a.return,K)}}n&&y&64&&Om(f),so(f,f.return);break;case 27:_m(f);case 26:case 5:zr(c,f,n),n&&a===null&&y&4&&Tm(f),so(f,f.return);break;case 12:zr(c,f,n);break;case 31:zr(c,f,n),n&&y&4&&Bm(c,f);break;case 13:zr(c,f,n),n&&y&4&&Im(c,f);break;case 22:f.memoizedState===null&&zr(c,f,n),so(f,f.return);break;case 30:break;default:zr(c,f,n)}t=t.sibling}}function yc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ya(n))}function vc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ya(e))}function ur(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Um(e,t,n,a),t=t.sibling}function Um(e,t,n,a){var c=t.flags;switch(t.tag){case 0:case 11:case 15:ur(e,t,n,a),c&2048&&oo(9,t);break;case 1:ur(e,t,n,a);break;case 3:ur(e,t,n,a),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ya(e)));break;case 12:if(c&2048){ur(e,t,n,a),e=t.stateNode;try{var f=t.memoizedProps,y=f.id,k=f.onPostCommit;typeof k=="function"&&k(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(H){Tt(t,t.return,H)}}else ur(e,t,n,a);break;case 31:ur(e,t,n,a);break;case 13:ur(e,t,n,a);break;case 23:break;case 22:f=t.stateNode,y=t.alternate,t.memoizedState!==null?f._visibility&2?ur(e,t,n,a):io(e,t):f._visibility&2?ur(e,t,n,a):(f._visibility|=2,fa(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),c&2048&&yc(y,t);break;case 24:ur(e,t,n,a),c&2048&&vc(t.alternate,t);break;default:ur(e,t,n,a)}}function fa(e,t,n,a,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,y=t,k=n,H=a,K=y.flags;switch(y.tag){case 0:case 11:case 15:fa(f,y,k,H,c),oo(8,y);break;case 23:break;case 22:var fe=y.stateNode;y.memoizedState!==null?fe._visibility&2?fa(f,y,k,H,c):io(f,y):(fe._visibility|=2,fa(f,y,k,H,c)),c&&K&2048&&yc(y.alternate,y);break;case 24:fa(f,y,k,H,c),c&&K&2048&&vc(y.alternate,y);break;default:fa(f,y,k,H,c)}t=t.sibling}}function io(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,c=a.flags;switch(a.tag){case 22:io(n,a),c&2048&&yc(a.alternate,a);break;case 24:io(n,a),c&2048&&vc(a.alternate,a);break;default:io(n,a)}t=t.sibling}}var uo=8192;function pa(e,t,n){if(e.subtreeFlags&uo)for(e=e.child;e!==null;)Gm(e,t,n),e=e.sibling}function Gm(e,t,n){switch(e.tag){case 26:pa(e,t,n),e.flags&uo&&e.memoizedState!==null&&_v(n,ir,e.memoizedState,e.memoizedProps);break;case 5:pa(e,t,n);break;case 3:case 4:var a=ir;ir=Qs(e.stateNode.containerInfo),pa(e,t,n),ir=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=uo,uo=16777216,pa(e,t,n),uo=a):pa(e,t,n));break;default:pa(e,t,n)}}function qm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function co(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];dn=a,Fm(a,e)}qm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Wm(e),e=e.sibling}function Wm(e){switch(e.tag){case 0:case 11:case 15:co(e),e.flags&2048&&sl(9,e,e.return);break;case 3:co(e);break;case 12:co(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ds(e)):co(e);break;default:co(e)}}function Ds(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];dn=a,Fm(a,e)}qm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:sl(8,t,t.return),Ds(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ds(t));break;default:Ds(t)}e=e.sibling}}function Fm(e,t){for(;dn!==null;){var n=dn;switch(n.tag){case 0:case 11:case 15:sl(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Ya(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,dn=a;else e:for(n=e;dn!==null;){a=dn;var c=a.sibling,f=a.return;if(Dm(a),a===n){dn=null;break e}if(c!==null){c.return=f,dn=c;break e}dn=f}}}var Yy={getCacheForType:function(e){var t=mn(Jt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return mn(Jt).controller.signal}},Qy=typeof WeakMap=="function"?WeakMap:Map,jt=0,Dt=null,it=null,ct=0,Et=0,Hn=null,il=!1,ma=!1,bc=!1,Br=0,$t=0,ul=0,Bl=0,wc=0,Vn=0,ha=0,fo=null,On=null,Sc=!1,zs=0,$m=0,Bs=1/0,Is=null,cl=null,un=0,dl=null,ga=null,Ir=0,Nc=0,jc=null,Ym=null,po=0,Cc=null;function Un(){return(jt&2)!==0&&ct!==0?ct&-ct:z.T!==null?Lc():xt()}function Qm(){if(Vn===0)if((ct&536870912)===0||ht){var e=ln;ln<<=1,(ln&3932160)===0&&(ln=262144),Vn=e}else Vn=536870912;return e=Bn.current,e!==null&&(e.flags|=32),Vn}function En(e,t,n){(e===Dt&&(Et===2||Et===9)||e.cancelPendingCommit!==null)&&(xa(e,0),fl(e,ct,Vn,!1)),ue(e,n),((jt&2)===0||e!==Dt)&&(e===Dt&&((jt&2)===0&&(Bl|=n),$t===4&&fl(e,ct,Vn,!1)),gr(e))}function Xm(e,t,n){if((jt&6)!==0)throw Error(s(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ke(e,t),c=a?Zy(e,t):Mc(e,t,!0),f=a;do{if(c===0){ma&&!a&&fl(e,t,0,!1);break}else{if(n=e.current.alternate,f&&!Xy(n)){c=Mc(e,t,!1),f=!1;continue}if(c===2){if(f=t,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var k=e;c=fo;var H=k.current.memoizedState.isDehydrated;if(H&&(xa(k,y).flags|=256),y=Mc(k,y,!1),y!==2){if(bc&&!H){k.errorRecoveryDisabledLanes|=f,Bl|=f,c=4;break e}f=On,On=c,f!==null&&(On===null?On=f:On.push.apply(On,f))}c=y}if(f=!1,c!==2)continue}}if(c===1){xa(e,0),fl(e,t,0,!0);break}e:{switch(a=e,f=c,f){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:fl(a,t,Vn,!il);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(c=zs+300-Be(),10<c)){if(fl(a,t,Vn,!il),Rn(a,0,!0)!==0)break e;Ir=t,a.timeoutHandle=kh(Pm.bind(null,a,n,On,Is,Sc,t,Vn,Bl,ha,il,f,"Throttled",-0,0),c);break e}Pm(a,n,On,Is,Sc,t,Vn,Bl,ha,il,f,null,-0,0)}}break}while(!0);gr(e)}function Pm(e,t,n,a,c,f,y,k,H,K,fe,ge,re,ie){if(e.timeoutHandle=-1,ge=t.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nr},Gm(t,f,ge);var Ee=(f&62914560)===f?zs-Be():(f&4194048)===f?$m-Be():0;if(Ee=Av(ge,Ee),Ee!==null){Ir=f,e.cancelPendingCommit=Ee(lh.bind(null,e,t,f,n,a,c,y,k,H,fe,ge,null,re,ie)),fl(e,f,y,!K);return}}lh(e,t,f,n,a,c,y,k,H)}function Xy(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var c=n[a],f=c.getSnapshot;c=c.value;try{if(!Dn(f(),c))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fl(e,t,n,a){t&=~wc,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var c=t;0<c;){var f=31-Vt(c),y=1<<f;a[f]=-1,c&=~y}n!==0&&ze(e,n,t)}function Hs(){return(jt&6)===0?(mo(0),!1):!0}function kc(){if(it!==null){if(Et===0)var e=it.return;else e=it,Mr=Ol=null,Gu(e),sa=null,Xa=0,e=it;for(;e!==null;)Mm(e.alternate,e),e=e.return;it=null}}function xa(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,hv(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Ir=0,kc(),Dt=e,it=n=Cr(e.current,null),ct=t,Et=0,Hn=null,il=!1,ma=ke(e,t),bc=!1,ha=Vn=wc=Bl=ul=$t=0,On=fo=null,Sc=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var c=31-Vt(a),f=1<<c;t|=e[c],a&=~f}return Br=t,os(),n}function Zm(e,t){rt=null,z.H=ro,t===oa||t===ms?(t=pp(),Et=3):t===Tu?(t=pp(),Et=4):Et=t===lc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Hn=t,it===null&&($t=1,Os(e,Pn(t,e.current)))}function Km(){var e=Bn.current;return e===null?!0:(ct&4194048)===ct?er===null:(ct&62914560)===ct||(ct&536870912)!==0?e===er:!1}function Jm(){var e=z.H;return z.H=ro,e===null?ro:e}function eh(){var e=z.A;return z.A=Yy,e}function Vs(){$t=4,il||(ct&4194048)!==ct&&Bn.current!==null||(ma=!0),(ul&134217727)===0&&(Bl&134217727)===0||Dt===null||fl(Dt,ct,Vn,!1)}function Mc(e,t,n){var a=jt;jt|=2;var c=Jm(),f=eh();(Dt!==e||ct!==t)&&(Is=null,xa(e,t)),t=!1;var y=$t;e:do try{if(Et!==0&&it!==null){var k=it,H=Hn;switch(Et){case 8:kc(),y=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(t=!0);var K=Et;if(Et=0,Hn=null,ya(e,k,H,K),n&&ma){y=0;break e}break;default:K=Et,Et=0,Hn=null,ya(e,k,H,K)}}Py(),y=$t;break}catch(fe){Zm(e,fe)}while(!0);return t&&e.shellSuspendCounter++,Mr=Ol=null,jt=a,z.H=c,z.A=f,it===null&&(Dt=null,ct=0,os()),y}function Py(){for(;it!==null;)th(it)}function Zy(e,t){var n=jt;jt|=2;var a=Jm(),c=eh();Dt!==e||ct!==t?(Is=null,Bs=Be()+500,xa(e,t)):ma=ke(e,t);e:do try{if(Et!==0&&it!==null){t=it;var f=Hn;t:switch(Et){case 1:Et=0,Hn=null,ya(e,t,f,1);break;case 2:case 9:if(dp(f)){Et=0,Hn=null,nh(t);break}t=function(){Et!==2&&Et!==9||Dt!==e||(Et=7),gr(e)},f.then(t,t);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:dp(f)?(Et=0,Hn=null,nh(t)):(Et=0,Hn=null,ya(e,t,f,7));break;case 5:var y=null;switch(it.tag){case 26:y=it.memoizedState;case 5:case 27:var k=it;if(y?Uh(y):k.stateNode.complete){Et=0,Hn=null;var H=k.sibling;if(H!==null)it=H;else{var K=k.return;K!==null?(it=K,Us(K)):it=null}break t}}Et=0,Hn=null,ya(e,t,f,5);break;case 6:Et=0,Hn=null,ya(e,t,f,6);break;case 8:kc(),$t=6;break e;default:throw Error(s(462))}}Ky();break}catch(fe){Zm(e,fe)}while(!0);return Mr=Ol=null,z.H=a,z.A=c,jt=n,it!==null?0:(Dt=null,ct=0,os(),$t)}function Ky(){for(;it!==null&&!Ze();)th(it)}function th(e){var t=Cm(e.alternate,e,Br);e.memoizedProps=e.pendingProps,t===null?Us(e):it=t}function nh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=vm(n,t,t.pendingProps,t.type,void 0,ct);break;case 11:t=vm(n,t,t.pendingProps,t.type.render,t.ref,ct);break;case 5:Gu(t);default:Mm(n,t),t=it=ep(t,Br),t=Cm(n,t,Br)}e.memoizedProps=e.pendingProps,t===null?Us(e):it=t}function ya(e,t,n,a){Mr=Ol=null,Gu(t),sa=null,Xa=0;var c=t.return;try{if(Vy(e,c,t,n,ct)){$t=1,Os(e,Pn(n,e.current)),it=null;return}}catch(f){if(c!==null)throw it=c,f;$t=1,Os(e,Pn(n,e.current)),it=null;return}t.flags&32768?(ht||a===1?e=!0:ma||(ct&536870912)!==0?e=!1:(il=e=!0,(a===2||a===9||a===3||a===6)&&(a=Bn.current,a!==null&&a.tag===13&&(a.flags|=16384))),rh(t,e)):Us(t)}function Us(e){var t=e;do{if((t.flags&32768)!==0){rh(t,il);return}e=t.return;var n=qy(t.alternate,t,Br);if(n!==null){it=n;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);$t===0&&($t=5)}function rh(e,t){do{var n=Wy(e.alternate,e);if(n!==null){n.flags&=32767,it=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){it=e;return}it=e=n}while(e!==null);$t=6,it=null}function lh(e,t,n,a,c,f,y,k,H){e.cancelPendingCommit=null;do Gs();while(un!==0);if((jt&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(f=t.lanes|t.childLanes,f|=hu,Ce(e,n,f,y,k,H),e===Dt&&(it=Dt=null,ct=0),ga=t,dl=e,Ir=n,Nc=f,jc=c,Ym=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,nv(We,function(){return uh(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=z.T,z.T=null,c=Y.p,Y.p=2,y=jt,jt|=4;try{Fy(e,t,n)}finally{jt=y,Y.p=c,z.T=a}}un=1,ah(),oh(),sh()}}function ah(){if(un===1){un=0;var e=dl,t=ga,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=z.T,z.T=null;var a=Y.p;Y.p=2;var c=jt;jt|=4;try{Hm(t,e);var f=Hc,y=Ff(e.containerInfo),k=f.focusedElem,H=f.selectionRange;if(y!==k&&k&&k.ownerDocument&&Wf(k.ownerDocument.documentElement,k)){if(H!==null&&cu(k)){var K=H.start,fe=H.end;if(fe===void 0&&(fe=K),"selectionStart"in k)k.selectionStart=K,k.selectionEnd=Math.min(fe,k.value.length);else{var ge=k.ownerDocument||document,re=ge&&ge.defaultView||window;if(re.getSelection){var ie=re.getSelection(),Ee=k.textContent.length,qe=Math.min(H.start,Ee),At=H.end===void 0?qe:Math.min(H.end,Ee);!ie.extend&&qe>At&&(y=At,At=qe,qe=y);var $=qf(k,qe),q=qf(k,At);if($&&q&&(ie.rangeCount!==1||ie.anchorNode!==$.node||ie.anchorOffset!==$.offset||ie.focusNode!==q.node||ie.focusOffset!==q.offset)){var Z=ge.createRange();Z.setStart($.node,$.offset),ie.removeAllRanges(),qe>At?(ie.addRange(Z),ie.extend(q.node,q.offset)):(Z.setEnd(q.node,q.offset),ie.addRange(Z))}}}}for(ge=[],ie=k;ie=ie.parentNode;)ie.nodeType===1&&ge.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ge.length;k++){var me=ge[k];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}ei=!!Ic,Hc=Ic=null}finally{jt=c,Y.p=a,z.T=n}}e.current=t,un=2}}function oh(){if(un===2){un=0;var e=dl,t=ga,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=z.T,z.T=null;var a=Y.p;Y.p=2;var c=jt;jt|=4;try{Rm(e,t.alternate,t)}finally{jt=c,Y.p=a,z.T=n}}un=3}}function sh(){if(un===4||un===3){un=0,gt();var e=dl,t=ga,n=Ir,a=Ym;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?un=5:(un=0,ga=dl=null,ih(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(cl=null),st(n),t=t.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(tt,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=z.T,c=Y.p,Y.p=2,z.T=null;try{for(var f=e.onRecoverableError,y=0;y<a.length;y++){var k=a[y];f(k.value,{componentStack:k.stack})}}finally{z.T=t,Y.p=c}}(Ir&3)!==0&&Gs(),gr(e),c=e.pendingLanes,(n&261930)!==0&&(c&42)!==0?e===Cc?po++:(po=0,Cc=e):po=0,mo(0)}}function ih(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ya(t)))}function Gs(){return ah(),oh(),sh(),uh()}function uh(){if(un!==5)return!1;var e=dl,t=Nc;Nc=0;var n=st(Ir),a=z.T,c=Y.p;try{Y.p=32>n?32:n,z.T=null,n=jc,jc=null;var f=dl,y=Ir;if(un=0,ga=dl=null,Ir=0,(jt&6)!==0)throw Error(s(331));var k=jt;if(jt|=4,Wm(f.current),Um(f,f.current,y,n),jt=k,mo(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(tt,f)}catch{}return!0}finally{Y.p=c,z.T=a,ih(e,t)}}function ch(e,t,n){t=Pn(n,t),t=rc(e.stateNode,t,2),e=ll(e,t,2),e!==null&&(ue(e,2),gr(e))}function Tt(e,t,n){if(e.tag===3)ch(e,e,n);else for(;t!==null;){if(t.tag===3){ch(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(cl===null||!cl.has(a))){e=Pn(n,e),n=dm(2),a=ll(t,n,2),a!==null&&(fm(n,a,t,e),ue(a,2),gr(a));break}}t=t.return}}function Oc(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Qy;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(n)||(bc=!0,c.add(n),e=Jy.bind(null,e,t,n),t.then(e,e))}function Jy(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Dt===e&&(ct&n)===n&&($t===4||$t===3&&(ct&62914560)===ct&&300>Be()-zs?(jt&2)===0&&xa(e,0):wc|=n,ha===ct&&(ha=0)),gr(e)}function dh(e,t){t===0&&(t=V()),e=Cl(e,t),e!==null&&(ue(e,t),gr(e))}function ev(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),dh(e,n)}function tv(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(t),dh(e,n)}function nv(e,t){return he(e,t)}var qs=null,va=null,Ec=!1,Ws=!1,Tc=!1,pl=0;function gr(e){e!==va&&e.next===null&&(va===null?qs=va=e:va=va.next=e),Ws=!0,Ec||(Ec=!0,lv())}function mo(e,t){if(!Tc&&Ws){Tc=!0;do for(var n=!1,a=qs;a!==null;){if(e!==0){var c=a.pendingLanes;if(c===0)var f=0;else{var y=a.suspendedLanes,k=a.pingedLanes;f=(1<<31-Vt(42|e)+1)-1,f&=c&~(y&~k),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(n=!0,hh(a,f))}else f=ct,f=Rn(a,a===Dt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(f&3)===0||ke(a,f)||(n=!0,hh(a,f));a=a.next}while(n);Tc=!1}}function rv(){fh()}function fh(){Ws=Ec=!1;var e=0;pl!==0&&mv()&&(e=pl);for(var t=Be(),n=null,a=qs;a!==null;){var c=a.next,f=ph(a,t);f===0?(a.next=null,n===null?qs=c:n.next=c,c===null&&(va=n)):(n=a,(e!==0||(f&3)!==0)&&(Ws=!0)),a=c}un!==0&&un!==5||mo(e),pl!==0&&(pl=0)}function ph(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-Vt(f),k=1<<y,H=c[y];H===-1?((k&n)===0||(k&a)!==0)&&(c[y]=De(k,t)):H<=t&&(e.expiredLanes|=k),f&=~k}if(t=Dt,n=ct,n=Rn(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Et===2||Et===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Re(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||ke(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&Re(a),st(n)){case 2:case 8:n=Xe;break;case 32:n=We;break;case 268435456:n=P;break;default:n=We}return a=mh.bind(null,e),n=he(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&Re(a),e.callbackPriority=2,e.callbackNode=null,2}function mh(e,t){if(un!==0&&un!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Gs()&&e.callbackNode!==n)return null;var a=ct;return a=Rn(e,e===Dt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Xm(e,a,t),ph(e,Be()),e.callbackNode!=null&&e.callbackNode===n?mh.bind(null,e):null)}function hh(e,t){if(Gs())return null;Xm(e,t,!0)}function lv(){gv(function(){(jt&6)!==0?he(_e,rv):fh()})}function Lc(){if(pl===0){var e=la;e===0&&(e=An,An<<=1,(An&261888)===0&&(An=256)),pl=e}return pl}function gh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ko(""+e)}function xh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function av(e,t,n,a,c){if(t==="submit"&&n&&n.stateNode===c){var f=gh((c[Rt]||null).action),y=a.submitter;y&&(t=(t=y[Rt]||null)?gh(t.formAction):y.getAttribute("formAction"),t!==null&&(f=t,y=null));var k=new ns("action","action",null,a,c);e.push({event:k,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(pl!==0){var H=y?xh(c,y):new FormData(c);Zu(n,{pending:!0,data:H,method:c.method,action:f},null,H)}}else typeof f=="function"&&(k.preventDefault(),H=y?xh(c,y):new FormData(c),Zu(n,{pending:!0,data:H,method:c.method,action:f},f,H))},currentTarget:c}]})}}for(var _c=0;_c<mu.length;_c++){var Ac=mu[_c],ov=Ac.toLowerCase(),sv=Ac[0].toUpperCase()+Ac.slice(1);sr(ov,"on"+sv)}sr(Qf,"onAnimationEnd"),sr(Xf,"onAnimationIteration"),sr(Pf,"onAnimationStart"),sr("dblclick","onDoubleClick"),sr("focusin","onFocus"),sr("focusout","onBlur"),sr(Ny,"onTransitionRun"),sr(jy,"onTransitionStart"),sr(Cy,"onTransitionCancel"),sr(Zf,"onTransitionEnd"),Pr("onMouseEnter",["mouseout","mouseover"]),Pr("onMouseLeave",["mouseout","mouseover"]),Pr("onPointerEnter",["pointerout","pointerover"]),Pr("onPointerLeave",["pointerout","pointerover"]),wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ho));function yh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var y=a.length-1;0<=y;y--){var k=a[y],H=k.instance,K=k.currentTarget;if(k=k.listener,H!==f&&c.isPropagationStopped())break e;f=k,c.currentTarget=K;try{f(c)}catch(fe){as(fe)}c.currentTarget=null,f=H}else for(y=0;y<a.length;y++){if(k=a[y],H=k.instance,K=k.currentTarget,k=k.listener,H!==f&&c.isPropagationStopped())break e;f=k,c.currentTarget=K;try{f(c)}catch(fe){as(fe)}c.currentTarget=null,f=H}}}}function ut(e,t){var n=t[Nn];n===void 0&&(n=t[Nn]=new Set);var a=e+"__bubble";n.has(a)||(vh(t,e,2,!1),n.add(a))}function Rc(e,t,n){var a=0;t&&(a|=4),vh(n,e,a,t)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function Dc(e){if(!e[Fs]){e[Fs]=!0,Fo.forEach(function(n){n!=="selectionchange"&&(iv.has(n)||Rc(n,!1,e),Rc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fs]||(t[Fs]=!0,Rc("selectionchange",!1,t))}}function vh(e,t,n,a){switch(Qh(t)){case 2:var c=zv;break;case 8:c=Bv;break;default:c=Pc}n=c.bind(null,t,n,e),c=void 0,!tu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function zc(e,t,n,a,c){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var y=a.tag;if(y===3||y===4){var k=a.stateNode.containerInfo;if(k===c)break;if(y===4)for(y=a.return;y!==null;){var H=y.tag;if((H===3||H===4)&&y.stateNode.containerInfo===c)return;y=y.return}for(;k!==null;){if(y=fn(k),y===null)return;if(H=y.tag,H===5||H===6||H===26||H===27){a=f=y;continue e}k=k.parentNode}}a=a.return}jf(function(){var K=f,fe=Ji(n),ge=[];e:{var re=Kf.get(e);if(re!==void 0){var ie=ns,Ee=e;switch(e){case"keypress":if(es(n)===0)break e;case"keydown":case"keyup":ie=ty;break;case"focusin":Ee="focus",ie=au;break;case"focusout":Ee="blur",ie=au;break;case"beforeblur":case"afterblur":ie=au;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Mf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=qx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=ly;break;case Qf:case Xf:case Pf:ie=$x;break;case Zf:ie=oy;break;case"scroll":case"scrollend":ie=Ux;break;case"wheel":ie=iy;break;case"copy":case"cut":case"paste":ie=Qx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Ef;break;case"toggle":case"beforetoggle":ie=cy}var qe=(t&4)!==0,At=!qe&&(e==="scroll"||e==="scrollend"),$=qe?re!==null?re+"Capture":null:re;qe=[];for(var q=K,Z;q!==null;){var me=q;if(Z=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||Z===null||$===null||(me=za(q,$),me!=null&&qe.push(go(q,me,Z))),At)break;q=q.return}0<qe.length&&(re=new ie(re,Ee,null,n,fe),ge.push({event:re,listeners:qe}))}}if((t&7)===0){e:{if(re=e==="mouseover"||e==="pointerover",ie=e==="mouseout"||e==="pointerout",re&&n!==Ki&&(Ee=n.relatedTarget||n.fromElement)&&(fn(Ee)||Ee[qt]))break e;if((ie||re)&&(re=fe.window===fe?fe:(re=fe.ownerDocument)?re.defaultView||re.parentWindow:window,ie?(Ee=n.relatedTarget||n.toElement,ie=K,Ee=Ee?fn(Ee):null,Ee!==null&&(At=d(Ee),qe=Ee.tag,Ee!==At||qe!==5&&qe!==27&&qe!==6)&&(Ee=null)):(ie=null,Ee=K),ie!==Ee)){if(qe=Mf,me="onMouseLeave",$="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(qe=Ef,me="onPointerLeave",$="onPointerEnter",q="pointer"),At=ie==null?re:Xr(ie),Z=Ee==null?re:Xr(Ee),re=new qe(me,q+"leave",ie,n,fe),re.target=At,re.relatedTarget=Z,me=null,fn(fe)===K&&(qe=new qe($,q+"enter",Ee,n,fe),qe.target=Z,qe.relatedTarget=At,me=qe),At=me,ie&&Ee)t:{for(qe=uv,$=ie,q=Ee,Z=0,me=$;me;me=qe(me))Z++;me=0;for(var Ie=q;Ie;Ie=qe(Ie))me++;for(;0<Z-me;)$=qe($),Z--;for(;0<me-Z;)q=qe(q),me--;for(;Z--;){if($===q||q!==null&&$===q.alternate){qe=$;break t}$=qe($),q=qe(q)}qe=null}else qe=null;ie!==null&&bh(ge,re,ie,qe,!1),Ee!==null&&At!==null&&bh(ge,At,Ee,qe,!0)}}e:{if(re=K?Xr(K):window,ie=re.nodeName&&re.nodeName.toLowerCase(),ie==="select"||ie==="input"&&re.type==="file")var wt=Bf;else if(Df(re))if(If)wt=by;else{wt=yy;var Ae=xy}else ie=re.nodeName,!ie||ie.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?K&&Zi(K.elementType)&&(wt=Bf):wt=vy;if(wt&&(wt=wt(e,K))){zf(ge,wt,n,fe);break e}Ae&&Ae(e,re,K),e==="focusout"&&K&&re.type==="number"&&K.memoizedProps.value!=null&&mt(re,"number",re.value)}switch(Ae=K?Xr(K):window,e){case"focusin":(Df(Ae)||Ae.contentEditable==="true")&&(Pl=Ae,du=K,Wa=null);break;case"focusout":Wa=du=Pl=null;break;case"mousedown":fu=!0;break;case"contextmenu":case"mouseup":case"dragend":fu=!1,$f(ge,n,fe);break;case"selectionchange":if(Sy)break;case"keydown":case"keyup":$f(ge,n,fe)}var at;if(su)e:{switch(e){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Xl?Af(e,n)&&(dt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(dt="onCompositionStart");dt&&(Tf&&n.locale!=="ko"&&(Xl||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Xl&&(at=Cf()):(Zr=fe,nu="value"in Zr?Zr.value:Zr.textContent,Xl=!0)),Ae=$s(K,dt),0<Ae.length&&(dt=new Of(dt,e,null,n,fe),ge.push({event:dt,listeners:Ae}),at?dt.data=at:(at=Rf(n),at!==null&&(dt.data=at)))),(at=fy?py(e,n):my(e,n))&&(dt=$s(K,"onBeforeInput"),0<dt.length&&(Ae=new Of("onBeforeInput","beforeinput",null,n,fe),ge.push({event:Ae,listeners:dt}),Ae.data=at)),av(ge,e,K,n,fe)}yh(ge,t)})}function go(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $s(e,t){for(var n=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=za(e,n),c!=null&&a.unshift(go(e,c,f)),c=za(e,t),c!=null&&a.push(go(e,c,f))),e.tag===3)return a;e=e.return}return[]}function uv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bh(e,t,n,a,c){for(var f=t._reactName,y=[];n!==null&&n!==a;){var k=n,H=k.alternate,K=k.stateNode;if(k=k.tag,H!==null&&H===a)break;k!==5&&k!==26&&k!==27||K===null||(H=K,c?(K=za(n,f),K!=null&&y.unshift(go(n,K,H))):c||(K=za(n,f),K!=null&&y.push(go(n,K,H)))),n=n.return}y.length!==0&&e.push({event:t,listeners:y})}var cv=/\r\n?/g,dv=/\u0000|\uFFFD/g;function wh(e){return(typeof e=="string"?e:""+e).replace(cv,`
`).replace(dv,"")}function Sh(e,t){return t=wh(t),wh(e)===t}function _t(e,t,n,a,c,f){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||$l(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&$l(e,""+a);break;case"className":Wl(e,"class",a);break;case"tabIndex":Wl(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Wl(e,n,a);break;case"style":Sf(e,a,f);break;case"data":if(t!=="object"){Wl(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Ko(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(n==="formAction"?(t!=="input"&&_t(e,t,"name",c.name,c,null),_t(e,t,"formEncType",c.formEncType,c,null),_t(e,t,"formMethod",c.formMethod,c,null),_t(e,t,"formTarget",c.formTarget,c,null)):(_t(e,t,"encType",c.encType,c,null),_t(e,t,"method",c.method,c,null),_t(e,t,"target",c.target,c,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Ko(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Nr);break;case"onScroll":a!=null&&ut("scroll",e);break;case"onScrollEnd":a!=null&&ut("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=Ko(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":ut("beforetoggle",e),ut("toggle",e),ql(e,"popover",a);break;case"xlinkActuate":Qn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Qn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Qn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Qn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Qn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Qn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ql(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Hx.get(n)||n,ql(e,n,a))}}function Bc(e,t,n,a,c,f){switch(n){case"style":Sf(e,a,f);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"children":typeof a=="string"?$l(e,a):(typeof a=="number"||typeof a=="bigint")&&$l(e,""+a);break;case"onScroll":a!=null&&ut("scroll",e);break;case"onScrollEnd":a!=null&&ut("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Nr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$o.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(c=n.endsWith("Capture"),t=n.slice(2,c?n.length-7:void 0),f=e[Rt]||null,f=f!=null?f[n]:null,typeof f=="function"&&e.removeEventListener(t,f,c),typeof a=="function")){typeof f!="function"&&f!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,c);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):ql(e,n,a)}}}function gn(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",e),ut("load",e);var a=!1,c=!1,f;for(f in n)if(n.hasOwnProperty(f)){var y=n[f];if(y!=null)switch(f){case"src":a=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:_t(e,t,f,y,n,null)}}c&&_t(e,t,"srcSet",n.srcSet,n,null),a&&_t(e,t,"src",n.src,n,null);return;case"input":ut("invalid",e);var k=f=y=c=null,H=null,K=null;for(a in n)if(n.hasOwnProperty(a)){var fe=n[a];if(fe!=null)switch(a){case"name":c=fe;break;case"type":y=fe;break;case"checked":H=fe;break;case"defaultChecked":K=fe;break;case"value":f=fe;break;case"defaultValue":k=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,t));break;default:_t(e,t,a,fe,n,null)}}Qt(e,f,k,H,K,y,c,!1);return;case"select":ut("invalid",e),a=y=f=null;for(c in n)if(n.hasOwnProperty(c)&&(k=n[c],k!=null))switch(c){case"value":f=k;break;case"defaultValue":y=k;break;case"multiple":a=k;default:_t(e,t,c,k,n,null)}t=f,n=y,e.multiple=!!a,t!=null?Sr(e,!!a,t,!1):n!=null&&Sr(e,!!a,n,!0);return;case"textarea":ut("invalid",e),f=c=a=null;for(y in n)if(n.hasOwnProperty(y)&&(k=n[y],k!=null))switch(y){case"value":a=k;break;case"defaultValue":c=k;break;case"children":f=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:_t(e,t,y,k,n,null)}Fl(e,a,c,f);return;case"option":for(H in n)n.hasOwnProperty(H)&&(a=n[H],a!=null)&&(H==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":_t(e,t,H,a,n,null));return;case"dialog":ut("beforetoggle",e),ut("toggle",e),ut("cancel",e),ut("close",e);break;case"iframe":case"object":ut("load",e);break;case"video":case"audio":for(a=0;a<ho.length;a++)ut(ho[a],e);break;case"image":ut("error",e),ut("load",e);break;case"details":ut("toggle",e);break;case"embed":case"source":case"link":ut("error",e),ut("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in n)if(n.hasOwnProperty(K)&&(a=n[K],a!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:_t(e,t,K,a,n,null)}return;default:if(Zi(t)){for(fe in n)n.hasOwnProperty(fe)&&(a=n[fe],a!==void 0&&Bc(e,t,fe,a,n,void 0));return}}for(k in n)n.hasOwnProperty(k)&&(a=n[k],a!=null&&_t(e,t,k,a,n,null))}function fv(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,y=null,k=null,H=null,K=null,fe=null;for(ie in n){var ge=n[ie];if(n.hasOwnProperty(ie)&&ge!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":H=ge;default:a.hasOwnProperty(ie)||_t(e,t,ie,null,a,ge)}}for(var re in a){var ie=a[re];if(ge=n[re],a.hasOwnProperty(re)&&(ie!=null||ge!=null))switch(re){case"type":f=ie;break;case"name":c=ie;break;case"checked":K=ie;break;case"defaultChecked":fe=ie;break;case"value":y=ie;break;case"defaultValue":k=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,t));break;default:ie!==ge&&_t(e,t,re,ie,a,ge)}}Ot(e,y,k,H,K,fe,f,c);return;case"select":ie=y=k=re=null;for(f in n)if(H=n[f],n.hasOwnProperty(f)&&H!=null)switch(f){case"value":break;case"multiple":ie=H;default:a.hasOwnProperty(f)||_t(e,t,f,null,a,H)}for(c in a)if(f=a[c],H=n[c],a.hasOwnProperty(c)&&(f!=null||H!=null))switch(c){case"value":re=f;break;case"defaultValue":k=f;break;case"multiple":y=f;default:f!==H&&_t(e,t,c,f,a,H)}t=k,n=y,a=ie,re!=null?Sr(e,!!n,re,!1):!!a!=!!n&&(t!=null?Sr(e,!!n,t,!0):Sr(e,!!n,n?[]:"",!1));return;case"textarea":ie=re=null;for(k in n)if(c=n[k],n.hasOwnProperty(k)&&c!=null&&!a.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:_t(e,t,k,null,a,c)}for(y in a)if(c=a[y],f=n[y],a.hasOwnProperty(y)&&(c!=null||f!=null))switch(y){case"value":re=c;break;case"defaultValue":ie=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:c!==f&&_t(e,t,y,c,a,f)}Zo(e,re,ie);return;case"option":for(var Ee in n)re=n[Ee],n.hasOwnProperty(Ee)&&re!=null&&!a.hasOwnProperty(Ee)&&(Ee==="selected"?e.selected=!1:_t(e,t,Ee,null,a,re));for(H in a)re=a[H],ie=n[H],a.hasOwnProperty(H)&&re!==ie&&(re!=null||ie!=null)&&(H==="selected"?e.selected=re&&typeof re!="function"&&typeof re!="symbol":_t(e,t,H,re,a,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in n)re=n[qe],n.hasOwnProperty(qe)&&re!=null&&!a.hasOwnProperty(qe)&&_t(e,t,qe,null,a,re);for(K in a)if(re=a[K],ie=n[K],a.hasOwnProperty(K)&&re!==ie&&(re!=null||ie!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,t));break;default:_t(e,t,K,re,a,ie)}return;default:if(Zi(t)){for(var At in n)re=n[At],n.hasOwnProperty(At)&&re!==void 0&&!a.hasOwnProperty(At)&&Bc(e,t,At,void 0,a,re);for(fe in a)re=a[fe],ie=n[fe],!a.hasOwnProperty(fe)||re===ie||re===void 0&&ie===void 0||Bc(e,t,fe,re,a,ie);return}}for(var $ in n)re=n[$],n.hasOwnProperty($)&&re!=null&&!a.hasOwnProperty($)&&_t(e,t,$,null,a,re);for(ge in a)re=a[ge],ie=n[ge],!a.hasOwnProperty(ge)||re===ie||re==null&&ie==null||_t(e,t,ge,re,a,ie)}function Nh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var c=n[a],f=c.transferSize,y=c.initiatorType,k=c.duration;if(f&&k&&Nh(y)){for(y=0,k=c.responseEnd,a+=1;a<n.length;a++){var H=n[a],K=H.startTime;if(K>k)break;var fe=H.transferSize,ge=H.initiatorType;fe&&Nh(ge)&&(H=H.responseEnd,y+=fe*(H<k?1:(k-K)/(H-K)))}if(--a,t+=8*(f+y)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ic=null,Hc=null;function Ys(e){return e.nodeType===9?e:e.ownerDocument}function jh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ch(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Vc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Uc=null;function mv(){var e=window.event;return e&&e.type==="popstate"?e===Uc?!1:(Uc=e,!0):(Uc=null,!1)}var kh=typeof setTimeout=="function"?setTimeout:void 0,hv=typeof clearTimeout=="function"?clearTimeout:void 0,Mh=typeof Promise=="function"?Promise:void 0,gv=typeof queueMicrotask=="function"?queueMicrotask:typeof Mh<"u"?function(e){return Mh.resolve(null).then(e).catch(xv)}:kh;function xv(e){setTimeout(function(){throw e})}function ml(e){return e==="head"}function Oh(e,t){var n=t,a=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(c),Na(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")xo(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,xo(n);for(var f=n.firstChild;f;){var y=f.nextSibling,k=f.nodeName;f[It]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&f.rel.toLowerCase()==="stylesheet"||n.removeChild(f),f=y}}else n==="body"&&xo(e.ownerDocument.body);n=c}while(n);Na(t)}function Eh(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function Gc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Gc(n),cn(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function yv(e,t,n,a){for(;e.nodeType===1;){var c=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[It])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=tr(e.nextSibling),e===null)break}return null}function vv(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=tr(e.nextSibling),e===null))return null;return e}function Th(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=tr(e.nextSibling),e===null))return null;return e}function qc(e){return e.data==="$?"||e.data==="$~"}function Wc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function bv(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Fc=null;function Lh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return tr(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function _h(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Ah(e,t,n){switch(t=Ys(n),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function xo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);cn(e)}var nr=new Map,Rh=new Set;function Qs(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Hr=Y.d;Y.d={f:wv,r:Sv,D:Nv,C:jv,L:Cv,m:kv,X:Ov,S:Mv,M:Ev};function wv(){var e=Hr.f(),t=Hs();return e||t}function Sv(e){var t=Yn(e);t!==null&&t.tag===5&&t.type==="form"?Zp(t):Hr.r(e)}var ba=typeof document>"u"?null:document;function Dh(e,t,n){var a=ba;if(a&&typeof t=="string"&&t){var c=Me(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof n=="string"&&(c+='[crossorigin="'+n+'"]'),Rh.has(c)||(Rh.add(c),e={rel:e,crossOrigin:n,href:t},a.querySelector(c)===null&&(t=a.createElement("link"),gn(t,"link",e),Kt(t),a.head.appendChild(t)))}}function Nv(e){Hr.D(e),Dh("dns-prefetch",e,null)}function jv(e,t){Hr.C(e,t),Dh("preconnect",e,t)}function Cv(e,t,n){Hr.L(e,t,n);var a=ba;if(a&&e&&t){var c='link[rel="preload"][as="'+Me(t)+'"]';t==="image"&&n&&n.imageSrcSet?(c+='[imagesrcset="'+Me(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(c+='[imagesizes="'+Me(n.imageSizes)+'"]')):c+='[href="'+Me(e)+'"]';var f=c;switch(t){case"style":f=wa(e);break;case"script":f=Sa(e)}nr.has(f)||(e=v({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),nr.set(f,e),a.querySelector(c)!==null||t==="style"&&a.querySelector(yo(f))||t==="script"&&a.querySelector(vo(f))||(t=a.createElement("link"),gn(t,"link",e),Kt(t),a.head.appendChild(t)))}}function kv(e,t){Hr.m(e,t);var n=ba;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Me(a)+'"][href="'+Me(e)+'"]',f=c;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Sa(e)}if(!nr.has(f)&&(e=v({rel:"modulepreload",href:e},t),nr.set(f,e),n.querySelector(c)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(vo(f)))return}a=n.createElement("link"),gn(a,"link",e),Kt(a),n.head.appendChild(a)}}}function Mv(e,t,n){Hr.S(e,t,n);var a=ba;if(a&&e){var c=br(a).hoistableStyles,f=wa(e);t=t||"default";var y=c.get(f);if(!y){var k={loading:0,preload:null};if(y=a.querySelector(yo(f)))k.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},n),(n=nr.get(f))&&$c(e,n);var H=y=a.createElement("link");Kt(H),gn(H,"link",e),H._p=new Promise(function(K,fe){H.onload=K,H.onerror=fe}),H.addEventListener("load",function(){k.loading|=1}),H.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Xs(y,t,a)}y={type:"stylesheet",instance:y,count:1,state:k},c.set(f,y)}}}function Ov(e,t){Hr.X(e,t);var n=ba;if(n&&e){var a=br(n).hoistableScripts,c=Sa(e),f=a.get(c);f||(f=n.querySelector(vo(c)),f||(e=v({src:e,async:!0},t),(t=nr.get(c))&&Yc(e,t),f=n.createElement("script"),Kt(f),gn(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(c,f))}}function Ev(e,t){Hr.M(e,t);var n=ba;if(n&&e){var a=br(n).hoistableScripts,c=Sa(e),f=a.get(c);f||(f=n.querySelector(vo(c)),f||(e=v({src:e,async:!0,type:"module"},t),(t=nr.get(c))&&Yc(e,t),f=n.createElement("script"),Kt(f),gn(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(c,f))}}function zh(e,t,n,a){var c=(c=pe.current)?Qs(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=wa(n.href),n=br(c).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=wa(n.href);var f=br(c).hoistableStyles,y=f.get(e);if(y||(c=c.ownerDocument||c,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=c.querySelector(yo(e)))&&!f._p&&(y.instance=f,y.state.loading=5),nr.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},nr.set(e,n),f||Tv(c,e,n,y.state))),t&&a===null)throw Error(s(528,""));return y}if(t&&a!==null)throw Error(s(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Sa(n),n=br(c).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function wa(e){return'href="'+Me(e)+'"'}function yo(e){return'link[rel="stylesheet"]['+e+"]"}function Bh(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Tv(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),gn(t,"link",n),Kt(t),e.head.appendChild(t))}function Sa(e){return'[src="'+Me(e)+'"]'}function vo(e){return"script[async]"+e}function Ih(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Me(n.href)+'"]');if(a)return t.instance=a,Kt(a),a;var c=v({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Kt(a),gn(a,"style",c),Xs(a,n.precedence,e),t.instance=a;case"stylesheet":c=wa(n.href);var f=e.querySelector(yo(c));if(f)return t.state.loading|=4,t.instance=f,Kt(f),f;a=Bh(n),(c=nr.get(c))&&$c(a,c),f=(e.ownerDocument||e).createElement("link"),Kt(f);var y=f;return y._p=new Promise(function(k,H){y.onload=k,y.onerror=H}),gn(f,"link",a),t.state.loading|=4,Xs(f,n.precedence,e),t.instance=f;case"script":return f=Sa(n.src),(c=e.querySelector(vo(f)))?(t.instance=c,Kt(c),c):(a=n,(c=nr.get(f))&&(a=v({},n),Yc(a,c)),e=e.ownerDocument||e,c=e.createElement("script"),Kt(c),gn(c,"link",a),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Xs(a,n.precedence,e));return t.instance}function Xs(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=a.length?a[a.length-1]:null,f=c,y=0;y<a.length;y++){var k=a[y];if(k.dataset.precedence===t)f=k;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function $c(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Yc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ps=null;function Hh(e,t,n){if(Ps===null){var a=new Map,c=Ps=new Map;c.set(n,a)}else c=Ps,a=c.get(n),a||(a=new Map,c.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),c=0;c<n.length;c++){var f=n[c];if(!(f[It]||f[bt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(t)||"";y=e+y;var k=a.get(y);k?k.push(f):a.set(y,[f])}}return a}function Vh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Lv(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Uh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function _v(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=wa(a.href),f=t.querySelector(yo(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Zs.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=f,Kt(f);return}f=t.ownerDocument||t,a=Bh(a),(c=nr.get(c))&&$c(a,c),f=f.createElement("link"),Kt(f);var y=f;y._p=new Promise(function(k,H){y.onload=k,y.onerror=H}),gn(f,"link",a),n.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Zs.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Qc=0;function Av(e,t){return e.stylesheets&&e.count===0&&Js(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&Js(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&Qc===0&&(Qc=62500*pv());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Js(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Qc?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(c)}}:null}function Zs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Js(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ks=null;function Js(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ks=new Map,t.forEach(Rv,e),Ks=null,Zs.call(e))}function Rv(e,t){if(!(t.state.loading&4)){var n=Ks.get(e);if(n)var a=n.get(null);else{n=new Map,Ks.set(e,n);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var y=c[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(n.set(y.dataset.precedence,y),a=y)}a&&n.set(null,a)}c=t.instance,y=c.getAttribute("data-precedence"),f=n.get(y)||a,f===a&&n.set(null,c),n.set(y,c),this.count++,a=Zs.bind(this),c.addEventListener("load",a),c.addEventListener("error",a),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var bo={$$typeof:D,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function Dv(e,t,n,a,c,f,y,k,H){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ce(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ce(0),this.hiddenUpdates=ce(null),this.identifierPrefix=a,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function Gh(e,t,n,a,c,f,y,k,H,K,fe,ge){return e=new Dv(e,t,n,y,H,K,fe,ge,k),t=1,f===!0&&(t|=24),f=zn(3,null,null,t),e.current=f,f.stateNode=e,t=Mu(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:a,isDehydrated:n,cache:t},Lu(f),e}function qh(e){return e?(e=Jl,e):Jl}function Wh(e,t,n,a,c,f){c=qh(c),a.context===null?a.context=c:a.pendingContext=c,a=rl(t),a.payload={element:n},f=f===void 0?null:f,f!==null&&(a.callback=f),n=ll(e,a,t),n!==null&&(En(n,e,t),Za(n,e,t))}function Fh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xc(e,t){Fh(e,t),(e=e.alternate)&&Fh(e,t)}function $h(e){if(e.tag===13||e.tag===31){var t=Cl(e,67108864);t!==null&&En(t,e,67108864),Xc(e,67108864)}}function Yh(e){if(e.tag===13||e.tag===31){var t=Un();t=nt(t);var n=Cl(e,t);n!==null&&En(n,e,t),Xc(e,t)}}var ei=!0;function zv(e,t,n,a){var c=z.T;z.T=null;var f=Y.p;try{Y.p=2,Pc(e,t,n,a)}finally{Y.p=f,z.T=c}}function Bv(e,t,n,a){var c=z.T;z.T=null;var f=Y.p;try{Y.p=8,Pc(e,t,n,a)}finally{Y.p=f,z.T=c}}function Pc(e,t,n,a){if(ei){var c=Zc(a);if(c===null)zc(e,t,a,ti,n),Xh(e,a);else if(Hv(c,e,t,n,a))a.stopPropagation();else if(Xh(e,a),t&4&&-1<Iv.indexOf(e)){for(;c!==null;){var f=Yn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=on(f.pendingLanes);if(y!==0){var k=f;for(k.pendingLanes|=2,k.entangledLanes|=2;y;){var H=1<<31-Vt(y);k.entanglements[1]|=H,y&=~H}gr(f),(jt&6)===0&&(Bs=Be()+500,mo(0))}}break;case 31:case 13:k=Cl(f,2),k!==null&&En(k,f,2),Hs(),Xc(f,2)}if(f=Zc(a),f===null&&zc(e,t,a,ti,n),f===c)break;c=f}c!==null&&a.stopPropagation()}else zc(e,t,a,null,n)}}function Zc(e){return e=Ji(e),Kc(e)}var ti=null;function Kc(e){if(ti=null,e=fn(e),e!==null){var t=d(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=p(t),e!==null)return e;e=null}else if(n===31){if(e=h(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ti=e,null}function Qh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case _e:return 2;case Xe:return 8;case We:case Pe:return 32;case P:return 268435456;default:return 32}default:return 32}}var Jc=!1,hl=null,gl=null,xl=null,wo=new Map,So=new Map,yl=[],Iv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xh(e,t){switch(e){case"focusin":case"focusout":hl=null;break;case"dragenter":case"dragleave":gl=null;break;case"mouseover":case"mouseout":xl=null;break;case"pointerover":case"pointerout":wo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(t.pointerId)}}function No(e,t,n,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},t!==null&&(t=Yn(t),t!==null&&$h(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Hv(e,t,n,a,c){switch(t){case"focusin":return hl=No(hl,e,t,n,a,c),!0;case"dragenter":return gl=No(gl,e,t,n,a,c),!0;case"mouseover":return xl=No(xl,e,t,n,a,c),!0;case"pointerover":var f=c.pointerId;return wo.set(f,No(wo.get(f)||null,e,t,n,a,c)),!0;case"gotpointercapture":return f=c.pointerId,So.set(f,No(So.get(f)||null,e,t,n,a,c)),!0}return!1}function Ph(e){var t=fn(e.target);if(t!==null){var n=d(t);if(n!==null){if(t=n.tag,t===13){if(t=p(n),t!==null){e.blockedOn=t,yt(e.priority,function(){Yh(n)});return}}else if(t===31){if(t=h(n),t!==null){e.blockedOn=t,yt(e.priority,function(){Yh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ni(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zc(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Ki=a,n.target.dispatchEvent(a),Ki=null}else return t=Yn(n),t!==null&&$h(t),e.blockedOn=n,!1;t.shift()}return!0}function Zh(e,t,n){ni(e)&&n.delete(t)}function Vv(){Jc=!1,hl!==null&&ni(hl)&&(hl=null),gl!==null&&ni(gl)&&(gl=null),xl!==null&&ni(xl)&&(xl=null),wo.forEach(Zh),So.forEach(Zh)}function ri(e,t){e.blockedOn===t&&(e.blockedOn=null,Jc||(Jc=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Vv)))}var li=null;function Kh(e){li!==e&&(li=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){li===e&&(li=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],c=e[t+2];if(typeof a!="function"){if(Kc(a||n)===null)continue;break}var f=Yn(n);f!==null&&(e.splice(t,3),t-=3,Zu(f,{pending:!0,data:c,method:n.method,action:a},a,c))}}))}function Na(e){function t(H){return ri(H,e)}hl!==null&&ri(hl,e),gl!==null&&ri(gl,e),xl!==null&&ri(xl,e),wo.forEach(t),So.forEach(t);for(var n=0;n<yl.length;n++){var a=yl[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<yl.length&&(n=yl[0],n.blockedOn===null);)Ph(n),n.blockedOn===null&&yl.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var c=n[a],f=n[a+1],y=c[Rt]||null;if(typeof f=="function")y||Kh(n);else if(y){var k=null;if(f&&f.hasAttribute("formAction")){if(c=f,y=f[Rt]||null)k=y.formAction;else if(Kc(c)!==null)continue}else k=y.action;typeof k=="function"?n[a+1]=k:(n.splice(a,3),a-=3),Kh(n)}}}function Jh(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(y){return c=y})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function ed(e){this._internalRoot=e}ai.prototype.render=ed.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current,a=Un();Wh(n,a,e,t,null,null)},ai.prototype.unmount=ed.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wh(e.current,2,null,e,null,null),Hs(),t[qt]=null}};function ai(e){this._internalRoot=e}ai.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yl.length&&t!==0&&t<yl[n].priority;n++);yl.splice(n,0,e),n===0&&Ph(e)}};var eg=l.version;if(eg!=="19.2.3")throw Error(s(527,eg,"19.2.3"));Y.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Uv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oi.isDisabled&&oi.supportsFiber)try{tt=oi.inject(Uv),pt=oi}catch{}}return Co.createRoot=function(e,t){if(!u(e))throw Error(s(299));var n=!1,a="",c=sm,f=im,y=um;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError)),t=Gh(e,1,!1,null,null,n,a,null,c,f,y,Jh),e[qt]=t.current,Dc(e),new ed(t)},Co.hydrateRoot=function(e,t,n){if(!u(e))throw Error(s(299));var a=!1,c="",f=sm,y=im,k=um,H=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(k=n.onRecoverableError),n.formState!==void 0&&(H=n.formState)),t=Gh(e,1,!0,t,n??null,a,c,H,f,y,k,Jh),t.context=qh(null),n=t.current,a=Un(),a=nt(a),c=rl(a),c.callback=null,ll(n,c,a),n=a,t.current.lanes=n,ue(t,n),gr(t),e[qt]=t.current,Dc(e),new ai(t)},Co.version="19.2.3",Co}var dg;function Kv(){if(dg)return rd.exports;dg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),rd.exports=Zv(),rd.exports}var Jv=Kv();const fg=r=>{let l;const o=new Set,s=(g,x)=>{const v=typeof g=="function"?g(l):g;if(!Object.is(v,l)){const N=l;l=x??(typeof v!="object"||v===null)?v:Object.assign({},l,v),o.forEach(C=>C(l,N))}},u=()=>l,h={setState:s,getState:u,getInitialState:()=>m,subscribe:g=>(o.add(g),()=>o.delete(g))},m=l=r(s,u,h);return h},e1=(r=>r?fg(r):fg),t1=r=>r;function n1(r,l=t1){const o=ka.useSyncExternalStore(r.subscribe,ka.useCallback(()=>l(r.getState()),[r,l]),ka.useCallback(()=>l(r.getInitialState()),[r,l]));return ka.useDebugValue(o),o}const pg=r=>{const l=e1(r),o=s=>n1(l,s);return Object.assign(o,l),o},ar=(r=>r?pg(r):pg);function $r(r,l){let o;try{o=r()}catch{return}return{getItem:u=>{var d;const p=m=>m===null?null:JSON.parse(m,void 0),h=(d=o.getItem(u))!=null?d:null;return h instanceof Promise?h.then(p):p(h)},setItem:(u,d)=>o.setItem(u,JSON.stringify(d,void 0)),removeItem:u=>o.removeItem(u)}}const kd=r=>l=>{try{const o=r(l);return o instanceof Promise?o:{then(s){return kd(s)(o)},catch(s){return this}}}catch(o){return{then(s){return this},catch(s){return kd(s)(o)}}}},r1=(r,l)=>(o,s,u)=>{let d={storage:$r(()=>localStorage),partialize:w=>w,version:0,merge:(w,M)=>({...M,...w}),...l},p=!1;const h=new Set,m=new Set;let g=d.storage;if(!g)return r((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),o(...w)},s,u);const x=()=>{const w=d.partialize({...s()});return g.setItem(d.name,{state:w,version:d.version})},v=u.setState;u.setState=(w,M)=>(v(w,M),x());const N=r((...w)=>(o(...w),x()),s,u);u.getInitialState=()=>N;let C;const S=()=>{var w,M;if(!g)return;p=!1,h.forEach(E=>{var D;return E((D=s())!=null?D:N)});const j=((M=d.onRehydrateStorage)==null?void 0:M.call(d,(w=s())!=null?w:N))||void 0;return kd(g.getItem.bind(g))(d.name).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==d.version){if(d.migrate){const D=d.migrate(E.state,E.version);return D instanceof Promise?D.then(_=>[!0,_]):[!0,D]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,E.state];return[!1,void 0]}).then(E=>{var D;const[_,L]=E;if(C=d.merge(L,(D=s())!=null?D:N),o(C,!0),_)return x()}).then(()=>{j?.(C,void 0),C=s(),p=!0,m.forEach(E=>E(C))}).catch(E=>{j?.(void 0,E)})};return u.persist={setOptions:w=>{d={...d,...w},w.storage&&(g=w.storage)},clearStorage:()=>{g?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>S(),hasHydrated:()=>p,onHydrate:w=>(h.add(w),()=>{h.delete(w)}),onFinishHydration:w=>(m.add(w),()=>{m.delete(w)})},d.skipHydration||S(),C||N},Yr=r1,rr=ar()(r=>({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0},setViewerState:l=>{r(o=>{const s={viewerOpen:l.viewerOpen??o.viewerOpen,viewerImages:l.viewerImages??o.viewerImages,viewerIndex:l.viewerIndex??o.viewerIndex,viewerScale:l.viewerScale??o.viewerScale,viewerTranslate:l.viewerTranslate??o.viewerTranslate};return s.viewerOpen===o.viewerOpen&&s.viewerIndex===o.viewerIndex&&s.viewerScale===o.viewerScale&&s.viewerTranslate.x===o.viewerTranslate.x&&s.viewerTranslate.y===o.viewerTranslate.y&&s.viewerImages===o.viewerImages?o:{...o,...s}})}})),Zt=ar()(Yr(r=>({error:null,nodeErrors:{},errorCycleIndex:0,errorsDismissed:!1,setError:l=>{r({error:l,errorsDismissed:!1})},setNodeErrors:l=>{r({nodeErrors:l,errorCycleIndex:0,errorsDismissed:!1})},clearNodeErrors:()=>{r({error:null,nodeErrors:{},errorCycleIndex:0,errorsDismissed:!1})},clearNodeError:l=>{r(o=>{const s={...o.nodeErrors};return delete s[String(l)],{nodeErrors:s}})},setErrorCycleIndex:l=>{r({errorCycleIndex:l})},setErrorsDismissed:l=>{r({errorsDismissed:l})}}),{name:"workflow-errors-storage",storage:$r(()=>localStorage),partialize:r=>({error:r.error,nodeErrors:r.nodeErrors,errorCycleIndex:r.errorCycleIndex,errorsDismissed:r.errorsDismissed}),onRehydrateStorage:()=>r=>{if(!r)return;const l=Object.values(r.nodeErrors||{}).reduce((o,s)=>o+s.length,0);l>0&&!r.error&&r.setError(`Workflow load error: ${l} input${l===1?"":"s"} reference missing options.`),l>0&&r.setErrorCycleIndex(0)}}));function b0(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}function l1(r){if(!(!String(r.type||"").startsWith("Primitive")&&r.type!=="PrimitiveNode")){if(Array.isArray(r.widgets_values))return r.widgets_values[0];if(b0(r.widgets_values)){const o=r.widgets_values.value;return o!==void 0?o:r.widgets_values[0]}}}function Lo(r,l,o){const s=r.widgets_values;if(Array.isArray(s))return o===void 0||o<0||o>=s.length?void 0:s[o];if(b0(s)){if(s[l]!==void 0)return s[l];if(r.type==="VHS_VideoCombine"&&l==="save_image"&&s.save_output!==void 0)return s.save_output}}function Qd(r,l){const o=r.widget_idx_map?.[String(l)];return o||(r.extra?.widget_idx_map?.[String(l)]??null)}function Hi(r){if(Array.isArray(r))return!0;const l=String(r).toUpperCase();return l==="INT"||l==="FLOAT"||l==="BOOLEAN"||l==="STRING"}function Xd(r,l,o){if(Array.isArray(l)){if(o?.comboIndexToValue&&typeof r=="number"&&Number.isFinite(r)){const s=Math.trunc(r);return l[s]??r}return r}if(l==="INT"&&typeof r=="string"&&r.trim()!==""&&!Number.isNaN(Number(r)))return Math.trunc(Number(r));if(l==="FLOAT"&&typeof r=="string"&&r.trim()!==""&&!Number.isNaN(Number(r)))return Number(r);if(l==="BOOLEAN"&&typeof r=="string"){if(r.toLowerCase()==="true")return!0;if(r.toLowerCase()==="false")return!1}return r}function a1(r,l,o){if(l.length===0)return r;const s=Xd(r,l,{comboIndexToValue:!0}),u=String(s),d=u.split(/[\\/]/).pop()??u,p=l.find(m=>String(m)===u);if(p!==void 0)return p;const h=l.find(m=>String(m)===d);return h!==void 0?h:o!==void 0&&l.some(m=>String(m)===String(o))?o:l[0]}function w0(r,l){const o=r.links.find(p=>p[0]===l);if(!o)return null;const s=o[1],u=o[2],d=r.nodes.find(p=>p.id===s);if(!d)return null;if(d.mode===4||d.type==="Reroute"){const p=d.outputs[u];if(!p)return null;const h=d.inputs.find(m=>{if(m.link===null)return!1;const g=String(m.type).toUpperCase(),x=String(p.type).toUpperCase();return g===x||g==="*"||x==="*"});return h?.link!=null?w0(r,h.link):null}return{nodeId:s,slotIndex:u}}function o1(r,l,o,s,u,d,p){const h={};for(const S of o.inputs)if(S.link!=null){const w=w0(r,S.link);if(w)if(u.has(w.nodeId))h[S.name]=[String(w.nodeId),w.slotIndex];else{const M=r.nodes.find(j=>j.id===w.nodeId);if(M){const j=l1(M);j!==void 0?h[S.name]=j:console.warn(`[workflowInputs] Missing source node for input '${S.name}' on node ${o.id} (${o.type}).`,{sourceNodeId:w.nodeId,sourceNodeType:M.type,sourceAllowed:!1})}}}const m=l[s];if(!m?.input)return h;const g=m.input_order?.required||Object.keys(m.input.required||{}),x=m.input_order?.optional||Object.keys(m.input.optional||{}),v=[...g,...x];let N=0;const C=Array.isArray(o.widgets_values)?o.widgets_values:null;for(const S of v)try{const w=m.input.required?.[S]||m.input.optional?.[S];if(!w)continue;const[M]=w,j=o.inputs.find(G=>G.name===S),E=j?.link!=null,D=!!j?.widget&&!E,_=!!j,L=w[1]?.default,R=Object.prototype.hasOwnProperty.call(w[1]??{},"default");if(Hi(M)||D||!_){let G=d?.[S];if(G===void 0&&(G=N),S==="seed"&&p?.[o.id]!==void 0&&!(S in h))h[S]=p[o.id];else if(G!==void 0&&!E&&!(S in h)){const U=Lo(o,S,G);U!==void 0&&(Array.isArray(M)?h[S]=a1(U,M,L):h[S]=Xd(U,M))}else!E&&R&&!(S in h)&&(h[S]=L);G!==void 0&&(N=Math.max(N,G+1)),String(M)==="INT"&&(S==="seed"||S==="noise_seed")&&(G!==void 0?N=Math.max(N,G+2):N=Math.max(N,N+1))}}catch(w){console.error(`Error processing input '${S}' for node ${o.id} (${o.type}):`,w)}if(d)for(const[S,w]of Object.entries(d)){if(!(S in h)&&C&&w<C.length){const M=C[w];M!=null&&(h[S]=M)}if(!(S in h)&&!C){const M=Lo(o,S,w);M!=null&&(h[S]=M)}}return(s==="Power Lora Loader (rgthree)"||o.type==="Power Lora Loader (rgthree)")&&C&&C.forEach((S,w)=>{if(typeof S=="object"&&S!==null&&"lora"in S&&!(Object.values(d||{}).some(j=>j===w)||d===null&&w<N)){const j=`lora_${w}`;j in h||(h[j]=S)}}),p?.[o.id]!==void 0&&!("seed"in h)&&!("noise_seed"in h)&&(h.seed=p[o.id]),h}const zt="";function s1(){const r="comfyui-mobile-client-id";let l=localStorage.getItem(r);return l||(l="mobile-"+Math.random().toString(36).substring(2,15),localStorage.setItem(r,l)),l}const S0=s1();async function Pd(){const r=await fetch(`${zt}/api/object_info`);if(!r.ok)throw new Error("Failed to fetch node types");return r.json()}async function i1(){const r=await fetch(`${zt}/api/queue`);if(!r.ok)throw new Error("Failed to fetch queue");return r.json()}async function u1(r){const l=`${zt}/api/history?max_items=${r}`,o=await fetch(l);if(!o.ok)throw new Error("Failed to fetch history");return o.json()}async function c1(){const r=await fetch(`${zt}/api/v2/userdata?path=workflows`);if(!r.ok){if(r.status===404)return[];throw new Error("Failed to list user workflows")}return(await r.json()).filter(o=>o.type==="file"&&o.name.endsWith(".json"))}function N0(r){return encodeURIComponent(r)}async function j0(r){const l=await fetch(`${zt}/api/userdata/${N0("workflows/"+r)}`);if(!l.ok)throw new Error("Failed to load workflow");return l.json()}async function d1(r,l){if(!(await fetch(`${zt}/api/userdata/${N0("workflows/"+r)}?overwrite=true`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)throw new Error("Failed to save workflow")}async function f1(){const r=await fetch(`${zt}/api/workflow_templates`);if(!r.ok)throw new Error("Failed to fetch templates");return r.json()}async function C0(r,l){const o=await fetch(`${zt}/api/workflow_templates/${encodeURIComponent(r)}/${encodeURIComponent(l)}`);if(!o.ok)throw new Error("Failed to load template");return o.json()}async function p1(){await fetch(`${zt}/api/interrupt`,{method:"POST"})}async function m1(){await fetch(`${zt}/api/queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clear:!0})})}async function h1(r){await fetch(`${zt}/api/queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:[r]})})}async function k0(r,l){const o=new FormData;o.append("image",r),l?.type&&o.append("type",l.type),l?.subfolder&&o.append("subfolder",l.subfolder),l?.overwrite!==void 0&&o.append("overwrite",l.overwrite?"true":"false");const s=await fetch(`${zt}/upload/image`,{method:"POST",body:o});if(!s.ok)throw new Error("Failed to upload image");return s.json()}async function g1(r){await fetch(`${zt}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:[r]})})}async function mg(r){r.length!==0&&await fetch(`${zt}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:r})})}async function x1(){await fetch(`${zt}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clear:!0})})}function qn(r,l,o){return`${zt}/view?filename=${encodeURIComponent(r)}&subfolder=${encodeURIComponent(l)}&type=${encodeURIComponent(o)}`}function y1(r,l,o,s,u){const p=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws?clientId=${r}`,h=new WebSocket(p);return h.onopen=()=>{o?.()},h.onmessage=m=>{try{const g=JSON.parse(m.data);l(g)}catch(g){console.error("[WS] Failed to parse message:",g)}},h.onclose=()=>{s?.()},h.onerror=m=>{console.error("[WS] Error:",m),u?.(m)},h}async function Md(r="",l=!1,o="output",s){const u=new URLSearchParams;r&&u.set("path",r),l&&u.set("recursive","true"),o&&u.set("source",o),s&&u.set("showHidden","true");const d=await fetch(`${zt}/mobile/api/files?${u}`);if(!d.ok)throw new Error("Failed to fetch files");return d.json()}async function v1(r){const l=await Md("",!1,"output",r),o=await Md("",!1,"input",r),s=l.files.filter(d=>d.type==="dir").map(d=>d.name);return{input:o.files.filter(d=>d.type==="dir").map(d=>d.name),output:s}}async function Od(r,l=1e3,o=0,s="modified",u=!1,d=null,p){return(await Md(d||"",u,r,p)).files.map(m=>{if(m.type==="dir")return{id:`${r}/${m.path}`,name:m.name,type:"folder",date:m.date,size:m.size};const g=m.folder||(m.path.includes("/")?m.path.substring(0,m.path.lastIndexOf("/")):"");return{id:`${r}/${m.path}`,name:m.name,type:m.type,previewUrl:`${zt}/mobile/api/thumbnail?filename=${encodeURIComponent(m.name)}&subfolder=${encodeURIComponent(g)}&source=${r}`,fullUrl:`${zt}/view?filename=${encodeURIComponent(m.name)}&type=${r}&subfolder=${encodeURIComponent(g)}`,date:m.date,size:m.size}})}async function Ed(r,l="output"){const o=await fetch(`${zt}/mobile/api/files`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:r,source:l})});if(!o.ok){const s=await o.json();throw new Error(s.error||"Failed to delete file")}}async function b1(r,l="output"){const o=new URLSearchParams({path:r,source:l}),s=await fetch(`${zt}/mobile/api/file-metadata?${o.toString()}`);if(!s.ok){const d=await s.json().catch(()=>({}));throw new Error(d.error||"Failed to load file metadata")}const u=await s.json();if(!u.workflow)throw new Error("No workflow metadata found");return u.workflow}async function w1(r,l="output"){const o=new URLSearchParams({path:r,source:l}),s=await fetch(`${zt}/mobile/api/image-metadata?${o.toString()}`);if(!s.ok){const u=await s.json().catch(()=>({}));throw new Error(u.error||"Failed to load image metadata")}return s.json()}async function S1(r,l,o="output"){const s=await fetch(`${zt}/mobile/api/files/move`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sources:r,destination:l??"",source:o})});if(!s.ok){const u=await s.json().catch(()=>({}));throw new Error(u.error||"Failed to move files")}}async function hg(r,l="output"){const o=await fetch(`${zt}/mobile/api/files/mkdir`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:r,source:l})});if(!o.ok){const s=await o.json().catch(()=>({}));throw new Error(s.error||"Failed to create folder")}}const lt=ar()(Yr((r,l)=>({running:[],pending:[],isLoading:!1,lastExecutedId:null,queueItemExpanded:{},queueItemUserToggled:{},queueItemHideImages:{},showQueueMetadata:!1,previewVisibility:{},previewVisibilityDefault:!1,fetchQueue:async()=>{const{running:o}=l();r({isLoading:!0});try{const s=await i1(),u=s.queue_running.map(p=>({number:p[0],prompt_id:p[1],prompt:p[2],extra:p[3],outputs_to_execute:p[4]})),d=s.queue_pending.map(p=>({number:p[0],prompt_id:p[1],prompt:p[2],extra:p[3],outputs_to_execute:p[4]}));o.length>0&&u.length===0&&(r({lastExecutedId:o[0].prompt_id}),setTimeout(()=>r({lastExecutedId:null}),100)),r({running:u,pending:d})}catch(s){console.error("Failed to fetch queue:",s)}finally{r({isLoading:!1})}},clearQueue:async()=>{try{await m1(),r({pending:[]})}catch(o){console.error("Failed to clear queue:",o)}},deleteItem:async o=>{try{await h1(o),r(s=>({pending:s.pending.filter(u=>u.prompt_id!==o)}))}catch(s){console.error("Failed to delete queue item:",s)}},interrupt:async()=>{try{await p1()}catch(o){console.error("Failed to interrupt execution:",o)}},updateFromStatus:o=>{const{pending:s}=l();o!==s.length&&l().fetchQueue()},setQueueItemExpanded:(o,s)=>{r(u=>({queueItemExpanded:{...u.queueItemExpanded,[o]:s}}))},setQueueItemUserToggled:(o,s)=>{r(u=>({queueItemUserToggled:{...u.queueItemUserToggled,[o]:s}}))},setQueueItemHideImages:(o,s)=>{r(u=>({queueItemHideImages:{...u.queueItemHideImages,[o]:s}}))},toggleQueueItemHideImages:o=>{r(s=>({queueItemHideImages:{...s.queueItemHideImages,[o]:!s.queueItemHideImages[o]}}))},setShowQueueMetadata:o=>{r({showQueueMetadata:o})},toggleShowQueueMetadata:()=>{r(o=>({showQueueMetadata:!o.showQueueMetadata}))},setPreviewVisibility:(o,s)=>{r(u=>({previewVisibility:{...u.previewVisibility,[o]:s}}))},togglePreviewVisibility:o=>{r(s=>({previewVisibility:{...s.previewVisibility,[o]:!s.previewVisibility[o]}}))},setPreviewVisibilityDefault:o=>{r({previewVisibilityDefault:o})}}),{name:"queue-storage",storage:$r(()=>localStorage),partialize:r=>({queueItemExpanded:r.queueItemExpanded,queueItemUserToggled:r.queueItemUserToggled,queueItemHideImages:r.queueItemHideImages,showQueueMetadata:r.showQueueMetadata,previewVisibility:r.previewVisibility,previewVisibilityDefault:r.previewVisibilityDefault})})),Ln=ar()(Yr(r=>({currentPanel:"workflow",setCurrentPanel:l=>{r({currentPanel:l})}}),{name:"navigation-storage",storage:$r(()=>localStorage),partialize:r=>({currentPanel:r.currentPanel})})),Gn=ar()(Yr((r,l)=>({pinnedWidgets:{},pinnedWidget:null,pinOverlayOpen:!1,setPinnedWidget:(o,s)=>{const{pinnedWidgets:u}=l();if(s&&o)r({pinnedWidget:o,pinnedWidgets:{...u,[s]:o}});else if(s&&!o){const d={...u};delete d[s],r({pinnedWidget:null,pinnedWidgets:d})}else r({pinnedWidget:o})},setPinOverlayOpen:o=>{r({pinOverlayOpen:o})},togglePinOverlay:()=>{r(o=>({pinOverlayOpen:!o.pinOverlayOpen}))},clearPinnedWidgetForKey:o=>{if(!o){r({pinnedWidget:null,pinOverlayOpen:!1});return}r(s=>{const u={...s.pinnedWidgets};return delete u[o],{pinnedWidgets:u,pinnedWidget:null,pinOverlayOpen:!1}})},restorePinnedWidgetForWorkflow:(o,s)=>{if(!o){r({pinnedWidget:null,pinOverlayOpen:!1});return}const u=l().pinnedWidgets[o];if(!u){r({pinnedWidget:null,pinOverlayOpen:!1});return}const d=s.nodes.some(p=>p.id===u.nodeId);r({pinnedWidget:d?u:null,pinOverlayOpen:!1})},clearCurrentPin:()=>{r({pinnedWidget:null,pinOverlayOpen:!1})}}),{name:"pinned-widget-storage",storage:$r(()=>localStorage),partialize:r=>({pinnedWidgets:r.pinnedWidgets,pinnedWidget:r.pinnedWidget,pinOverlayOpen:r.pinOverlayOpen})})),Zd=-1,Vi=-2,Ui=-3,si=0x4000000000000,Si=new Set([Zd,Vi,Ui]);function Kd(r){return Si.has(r)}function M0(r){return r===Zd?"randomize":r===Vi?"increment":r===Ui?"decrement":null}function N1(r){return r==="randomize"?Zd:r==="increment"?Vi:r==="decrement"?Ui:null}function bl(r,l,o,s){if(!l)return null;const d=Qd(r,o.id)?.[s];if(d!==void 0)return d;const p=l[o.type];if(!p?.input)return null;const h=p.input_order?.required||Object.keys(p.input.required||{}),m=p.input_order?.optional||Object.keys(p.input.optional||{}),g=[...h,...m];let x=0;for(const v of g){const N=p.input.required?.[v]||p.input.optional?.[v];if(!N)continue;const[C]=N,S=o.inputs.find(_=>_.name===v),w=S?.link!=null,M=!!S?.widget&&!w,j=!!S;if(Hi(C)||M||!j){if(v===s)return x;x+=1,String(C)==="INT"&&(v==="seed"||v==="noise_seed")&&(x+=1)}}return null}function Ea(r,l,o){const s=bl(r,l,o,"seed")??bl(r,l,o,"noise_seed");if(s!==null)return s;if(!l)return o.outputs?.some(v=>String(v.name||"").toLowerCase().includes("seed")&&String(v.type||"").toUpperCase().includes("INT"))&&Array.isArray(o.widgets_values)&&o.widgets_values.length>0?0:null;const u=l[o.type];if(!u?.input)return o.outputs?.some(v=>String(v.name||"").toLowerCase().includes("seed")&&String(v.type||"").toUpperCase().includes("INT"))&&Array.isArray(o.widgets_values)&&o.widgets_values.length>0?0:null;const d=Qd(r,o.id),p=u.input_order?.required||Object.keys(u.input.required||{}),h=u.input_order?.optional||Object.keys(u.input.optional||{}),m=[...p,...h];let g=0;for(const x of m){const v=u.input.required?.[x]||u.input.optional?.[x];if(!v)continue;const[N]=v,C=o.inputs.find(E=>E.name===x),S=C?.link!=null,w=!!C?.widget&&!S,M=!!C;if(Hi(N)||w||!M){const D=d?.[x]??g;if(String(N)==="INT"&&x.toLowerCase().includes("seed"))return D;g+=1,String(N)==="INT"&&(x==="seed"||x==="noise_seed")&&(g+=1)}}return null}function j1(r,l){const o=r[l.type];if(!o?.input)return 1;const u=(o.input.required?.seed||o.input.optional?.seed)?.[1],d=typeof u?.step=="number"?u.step:1;return d>0?d:1}function C1(r){const l=Number(r.properties?.randomMin??0),o=Number(r.properties?.randomMax??si),s=Number.isFinite(l)?Math.max(-si,l):0,u=Number.isFinite(o)?Math.min(si,o):si;return s<=u?{min:s,max:u}:{min:u,max:s}}function _o(r,l){const o=j1(r,l),{min:s,max:u}=C1(l),d=o>0?o/10:1,p=u-s;let h=s+Math.random()*p;return d>0&&(h=Math.round((h-s)/d)*d+s),h>u&&(h=u),h<s&&(h=s),Si.has(h)&&(h=0),h}function k1(r,l,o,s){if(Si.has(r)){if(typeof l=="number"&&!Si.has(l)){if(r===Vi)return l+1;if(r===Ui)return l-1}return _o(o,s)}return Number.isFinite(r)?r:0}const Sn=ar()(Yr((r,l)=>({seedModes:{},seedLastValues:{},setSeedMode:(o,s,u)=>{const{seedModes:d,seedLastValues:p}=l();if(u?.workflow&&u.nodeTypes){const{workflow:h,nodeTypes:m,updateNodeWidgets:g}=u,x=h.nodes.find(v=>v.id===o);if(x){const v=Ea(h,m,x);if(v!==null&&Array.isArray(x.widgets_values)){const N=v+1,C=typeof x.widgets_values[N]=="string",S={};if(C)S[N]=s;else{const w=N1(s);if(w!==null&&s!=="fixed")S[v]=w;else if(s==="fixed"){const M=Number(x.widgets_values[v]);if(Kd(M)){const j=p[o],E=typeof j=="number"?j:_o(m,x);S[v]=E}}}Object.keys(S).length>0&&g(o,S)}}}r({seedModes:{...d,[o]:s}})},setSeedModes:o=>{r({seedModes:o})},setSeedLastValues:o=>{r({seedLastValues:o})},clearSeedState:()=>{r({seedModes:{},seedLastValues:{}})}}),{name:"seed-storage",storage:$r(()=>localStorage),partialize:r=>({seedModes:r.seedModes,seedLastValues:r.seedLastValues})}));function gg(r,l){return r&&r[l]||null}function O0(r,l){try{if(l.type==="PrimitiveNode"){const m=l.outputs?.[0]?.type;if(!m)return[];const g=String(m).toUpperCase(),x=Array.isArray(l.widgets_values)?l.widgets_values[0]:void 0;return[{name:l.outputs?.[0]?.name||"value",type:g,options:void 0,value:x,widgetIndex:0,isCombo:!1,connected:!1,inputIndex:-1}]}if(l.type==="Power Lora Loader (rgthree)"){const m=[],g=l.properties?.["Show Strengths"]==="Separate Model & Clip";let x=[];if(r){const v=gg(r,"LoraLoader");if(v?.input?.required?.lora_name){const[N]=v.input.required.lora_name;Array.isArray(N)&&(x=N)}}if(Array.isArray(l.widgets_values)){const v=l.widgets_values,N=[];v.forEach((C,S)=>{typeof C=="object"&&C!==null&&"lora"in C&&"strength"in C&&N.push(S)}),N.length>0&&(m.push({name:"Loras",type:"POWER_LORA_HEADER",options:{loraIndices:N},value:null,widgetIndex:-1,isCombo:!1,connected:!1,inputIndex:-1}),N.forEach(C=>{const S=v[C];m.push({name:"Lora",type:"POWER_LORA",options:{choices:x.length>0?x:void 0,showSeparate:g},value:S,widgetIndex:C,isCombo:!1,connected:!1,inputIndex:-1})})),m.push({name:"Add Lora",type:"POWER_LORA_ADD",options:void 0,value:null,widgetIndex:l.widgets_values.length,isCombo:!1,connected:!1,inputIndex:-1})}return m}const o=gg(r,l.type);if(!o?.input)return l.outputs?.some(g=>String(g.name||"").toLowerCase().includes("seed")&&String(g.type||"").toUpperCase().includes("INT"))&&Array.isArray(l.widgets_values)&&l.widgets_values.length>0?[{name:"seed",type:"INT",options:void 0,value:l.widgets_values[0],widgetIndex:0,isCombo:!1,connected:!1,inputIndex:-1}]:[];const s=o.input_order?.required||Object.keys(o.input.required||{}),u=o.input_order?.optional||Object.keys(o.input.optional||{}),d=[];let p=0;const h=(m,g)=>{if(!g)return;const[x,v]=g,N=l.inputs.findIndex(L=>L.name===m),C=N>=0?l.inputs[N]:void 0,S=C?.link!=null,w=!!C?.widget&&!S,M=!!C,j=Object.prototype.hasOwnProperty.call(v??{},"default"),E=Hi(x)||w||!M||j,D=Array.isArray(x),_=D?{...v??{},options:x}:v;if(E){const L=Lo(l,m,p);d.push({name:m,type:D?"COMBO":String(x),options:_,value:L,widgetIndex:p,isCombo:D,connected:!!S,inputIndex:N})}E&&(p+=1,String(x)==="INT"&&(m==="seed"||m==="noise_seed")&&(p+=1))};for(const m of s){const g=o.input.required?.[m];g&&h(m,g)}for(const m of u){const g=o.input.optional?.[m];g&&h(m,g)}return d}catch(o){return console.error(`Error collecting widget definitions for node ${l.id} (${l.type}):`,o),[]}}function Jd(r,l){return O0(r,l).filter(o=>!o.isCombo).map(o=>({name:o.name,type:o.type,options:o.options,value:o.value,widgetIndex:o.widgetIndex,connected:o.connected,inputIndex:o.inputIndex}))}function ef(r,l){return O0(r,l).filter(o=>o.isCombo).map(o=>({name:o.name,type:o.type,value:o.value,options:o.options,widgetIndex:o.widgetIndex,connected:o.connected,inputIndex:o.inputIndex}))}function M1(r){let l=5381;for(let o=0;o<r.length;o+=1)l=(l<<5)+l+r.charCodeAt(o),l&=4294967295;return(l>>>0).toString(16).padStart(8,"0")}function O1(r,l){if(!r)return!1;const o=Jd(r,l).filter(u=>!u.connected),s=ef(r,l).filter(u=>!u.connected);return o.length===0&&s.length===0}function E1(r){const l=r.nodes??[],o=r.definitions?.subgraphs?.flatMap(s=>s.nodes??[])??[];return[...l,...o]}function sd(r,l){const u=E1(r).filter(d=>!O1(l,d)).map(d=>d.type).sort().join("|");return`wf_${M1(u)}`}const xg="__mobile_origin",ii="__mobile_subgraph_group_map";function id(r,l,o){const s={...r.properties??{}};return o&&s[xg]===void 0&&(s[xg]=o),{...r,id:l,inputs:(r.inputs??[]).map(u=>({...u,link:null})),outputs:(r.outputs??[]).map(u=>({...u,links:[]})),widgets_values:r.widgets_values??[],flags:r.flags??{},properties:s,mode:r.mode??0,order:r.order??0}}function T1(r,l){if(!l||l.length===0)return null;const o=[...l].sort((g,x)=>g.id-x.id),[s,u]=r.pos,[d,p]=r.size,h=s+d/2,m=u+p/2;for(const g of o){const[x,v,N,C]=g.bounding;if(h>=x&&h<=x+N&&m>=v&&m<=v+C)return g.id}return null}function yg(r,l){const o=new Map,s=new Map;return l.forEach((u,d)=>{u?.name&&s.set(u.name,d)}),r.forEach((u,d)=>{const p=u?.name;if(p&&s.has(p)){o.set(d,s.get(p));return}d<l.length&&o.set(d,d)}),o}function L1(r,l){const o=new Map;for(const s of r)s.inputs=(s.inputs??[]).map(u=>({...u,link:null})),s.outputs=(s.outputs??[]).map(u=>({...u,links:[]})),o.set(s.id,s);for(const s of l){const[u,d,p,h,m]=s,g=o.get(d),x=o.get(h),v=g?.outputs?.[p],N=x?.inputs?.[m];v&&(v.links||(v.links=[]),v.links.push(u)),N&&(N.link=u)}return r}function _1(r,l){const o=r.nodes.filter(S=>l.has(S.type));if(o.length===0)return{workflow:r,changed:!1};const s=new Set(o.map(S=>S.id));let u=Math.max(0,...r.nodes.map(S=>S.id))+1;const d=[],p=r.groups??[],h=r.extra??{},m=typeof h[ii]=="object"&&h[ii]!==null?h[ii]:{},g={};for(const[S,w]of Object.entries(m))(typeof w=="number"||w===null)&&(g[S]=w);const x=new Map;for(const S of r.nodes){if(!s.has(S.id)){d.push(id(S,S.id,{scope:"root",nodeId:S.id}));continue}const w=l.get(S.type);if(!w){d.push(id(S,S.id,{scope:"root",nodeId:S.id}));continue}const M=T1(S,p);g[w.id]=M??null;const j=yg(S.inputs??[],w.inputs??[]),E=yg(S.outputs??[],w.outputs??[]),D=new Map,_=new Map,L=new Map,R=[];for(const A of w.nodes??[]){const B=u++;D.set(A.id,B),d.push(id(A,B,{scope:"subgraph",subgraphId:w.id,nodeId:A.id}))}for(const A of w.links??[]){const B=A.origin_id,G=A.target_id;if(B===-10){const J=D.get(G);if(J!==void 0){const xe=_.get(A.origin_slot)??[];xe.push({origin_id:-10,origin_slot:A.origin_slot,target_id:J,target_slot:A.target_slot,type:A.type}),_.set(A.origin_slot,xe)}continue}if(G===-20){const J=D.get(B);if(J!==void 0){const xe=L.get(A.target_slot)??[];xe.push({origin_id:J,origin_slot:A.origin_slot,target_id:-20,target_slot:A.target_slot,type:A.type}),L.set(A.target_slot,xe)}continue}const U=D.get(B),W=D.get(G);U!==void 0&&W!==void 0&&R.push({origin_id:U,origin_slot:A.origin_slot,target_id:W,target_slot:A.target_slot,type:A.type})}x.set(S.id,{inputSlotMap:j,outputSlotMap:E,inputTargets:_,outputSources:L,internalLinks:R})}const v=[],N=r.links??[];for(const S of N){const[,w,M,j,E,D]=S,_=s.has(w),L=s.has(j);if(!_&&!L){v.push({origin_id:w,origin_slot:M,target_id:j,target_slot:E,type:D});continue}if(_&&L){const R=x.get(w),A=x.get(j),B=R?.outputSlotMap.get(M),G=A?.inputSlotMap.get(E);if(B===void 0||G===void 0)continue;const U=R?.outputSources.get(B)??[],W=A?.inputTargets.get(G)??[];for(const J of U)for(const xe of W)v.push({origin_id:J.origin_id,origin_slot:J.origin_slot,target_id:xe.target_id,target_slot:xe.target_slot,type:J.type});continue}if(_){const R=x.get(w),A=R?.outputSlotMap.get(M);if(A===void 0)continue;const B=R?.outputSources.get(A)??[];for(const G of B)v.push({origin_id:G.origin_id,origin_slot:G.origin_slot,target_id:j,target_slot:E,type:G.type});continue}if(L){const R=x.get(j),A=R?.inputSlotMap.get(E);if(A===void 0)continue;const B=R?.inputTargets.get(A)??[];for(const G of B)v.push({origin_id:w,origin_slot:M,target_id:G.target_id,target_slot:G.target_slot,type:G.type})}}for(const S of x.values())v.push(...S.internalLinks);const C=v.map((S,w)=>[w+1,S.origin_id,S.origin_slot,S.target_id,S.target_slot,S.type]);return L1(d,C),{workflow:{...r,extra:{...h,[ii]:g},nodes:d,links:C,last_node_id:Math.max(0,...d.map(S=>S.id)),last_link_id:C.length},changed:!0}}function A1(r){const l=r.definitions?.subgraphs??[];if(l.length===0)return r;const o=new Map;for(const u of l)u?.id&&o.set(u.id,u);let s=r;for(let u=0;u<l.length+4;u+=1){const{workflow:d,changed:p}=_1(s,o);if(!p)break;s=d}return s}function R1(r){const l=new Map,o=new Map,s=new Map;for(const u of r.nodes)l.set(u.id,u),o.set(u.id,[]),s.set(u.id,[]);for(const u of r.links){const[,d,,p]=u,h=o.get(p);h&&!h.includes(d)&&h.push(d);const m=s.get(d);m&&!m.includes(p)&&m.push(p)}return{nodes:l,dependencies:o,dependents:s}}function D1(r){return["SaveImage","PreviewImage","SaveAnimatedWEBP","SaveAnimatedPNG","SaveVideo","SaveAudio"].some(o=>r.type.includes(o))||r.outputs.length===0||r.outputs.every(o=>!o.links||o.links.length===0)}function z1(r){if(r.nodes.length===0)return[];const l=R1(r),o=new Set,s=[];function u(p){if(o.has(p))return;o.add(p);const h=l.nodes.get(p);if(!h)return;const m=l.dependencies.get(p)||[];for(const g of m)u(g);s.push(h)}const d=r.nodes.filter(D1);if(d.length===0)for(const p of r.nodes)(l.dependents.get(p.id)||[]).length===0&&d.push(p);for(const p of d)u(p.id);for(const p of r.nodes)o.has(p.id)||u(p.id);return s}function Ao(r,l,o){const s=r.nodes.find(g=>g.id===l);if(!s||!s.inputs[o])return null;const u=s.inputs[o].link;if(u===null)return null;const d=r.links.find(g=>g[0]===u);if(!d)return null;const[,p,h]=d,m=r.nodes.find(g=>g.id===p);return m?{node:m,outputIndex:h}:null}function Ni(r,l,o){const s=r.nodes.find(p=>p.id===l);if(!s||!s.outputs[o])return[];const u=s.outputs[o].links||[],d=[];for(const p of u){const h=r.links.find(v=>v[0]===p);if(!h)continue;const[,,,m,g]=h,x=r.nodes.find(v=>v.id===m);x&&d.push({node:x,inputIndex:g})}return d}const B1="__mobile_origin",E0="__mobile_subgraph_group_map";function Td(r){return r.map(l=>({...l,widgets_values:l.widgets_values??[],inputs:l.inputs??[],outputs:l.outputs??[],flags:l.flags??{},properties:l.properties??{},mode:l.mode??0,order:l.order??0}))}function vg(r){const l=JSON.parse(JSON.stringify(r));return l.nodes=Td(l.nodes??[]),l.links=l.links??[],l.groups=l.groups??[],l.config=l.config??{},l.definitions?.subgraphs&&(l.definitions.subgraphs=l.definitions.subgraphs.map(o=>({...o,nodes:Td(o.nodes??[]),links:o.links??[]}))),l.last_node_id=l.last_node_id??Math.max(0,...l.nodes.map(o=>o.id)),l.last_link_id=l.last_link_id??0,l.version=l.version??.4,l}function Ro(r){if(!r)return null;const o=r.properties?.[B1];if(!o||typeof o!="object")return null;const s=o.scope;if(s==="root"){const u=o.nodeId;return typeof u=="number"?{scope:"root",nodeId:u}:null}if(s==="subgraph"){const u=o.nodeId,d=o.subgraphId;if(typeof u=="number"&&typeof d=="string")return{scope:"subgraph",subgraphId:d,nodeId:u}}return null}function Ld(r,l){const o=new Map;if(!l||l.length===0)return o;const s=[...l].sort((u,d)=>u.id-d.id);for(const u of r){const[d,p]=u.pos,[h,m]=u.size,g=d+h/2,x=p+m/2;for(const v of s){const[N,C,S,w]=v.bounding;if(g>=N&&g<=N+S&&x>=C&&x<=C+w){o.set(u.id,v.id);break}}}return o}function bg(r,l){const o=new Set,s=Array.from(r);for(;s.length>0;){const u=s.pop();if(!u||o.has(u))continue;o.add(u);const d=l.get(u);if(d)for(const p of d)o.has(p)||s.push(p)}return o}function I1(r){const l=new Set(r.map(s=>s.id)),o=new Map;for(const s of r)for(const u of s.nodes??[]){if(!l.has(u.type))continue;const d=o.get(u.type)??[];d.push({parentId:s.id,nodeId:u.id}),o.set(u.type,d)}return o}function ko(r,l,o){return!o||o.length===0?null:Ld(l,o).get(r)??null}function T0(r,l,o=null){const s=r.nodes??[],u=r.groups??[],d=r.definitions?.subgraphs??[],p=new Map(d.map(N=>[N.id,N])),h=new Set(d.map(N=>N.id)),m=new Map,g=[];for(const N of s){const C=Ro(N);if(C?.scope==="subgraph"){const S=m.get(C.subgraphId);S?S.push(N):m.set(C.subgraphId,[N])}else g.push(N)}const x=new Map;for(const N of d){const C=new Set;for(const S of N.nodes??[])h.has(S.type)&&C.add(S.type);C.size>0&&x.set(N.id,C)}const v=new Set;if(o){const N=p.get(o);if(!N)return v;const C=N.groups??[];if(!C.find(L=>L.id===l))return v;const w=N.nodes??[],M=Ld(w,C),j=new Set,E=new Set;for(const L of w)M.get(L.id)===l&&(h.has(L.type)?j.add(L.type):E.add(L.id));const D=m.get(o)??[];for(const L of D){const R=Ro(L);R?.scope==="subgraph"&&E.has(R.nodeId)&&v.add(L.id)}const _=bg(j,x);for(const L of _){const R=m.get(L)??[];for(const A of R)v.add(A.id)}}else{if(!u.find(j=>j.id===l))return v;const C=Ld(g,u);for(const j of g)C.get(j.id)===l&&v.add(j.id);const S=r.extra?.[E0],w=new Set;if(S&&typeof S=="object")for(const[j,E]of Object.entries(S))E===l&&w.add(j);const M=bg(w,x);for(const j of M){const E=m.get(j)??[];for(const D of E)v.add(D.id)}}return v}function H1(r,l,o,s){if(!Array.isArray(r.widgets_values)){const d={...r.widgets_values||{}};return s?(d[s]=o,r.type==="VHS_VideoCombine"&&s==="save_image"&&"save_output"in d&&(d.save_output=o)):l>=0&&(d[String(l)]=o),{...r,widgets_values:d}}let u=[...r.widgets_values];return l>=u.length?u.push(o):u[l]=o,r.type==="Power Lora Loader (rgthree)"&&(u=u.filter(d=>d!==null)),{...r,widgets_values:u}}function V1(r,l){if(!Array.isArray(r.widgets_values))return r;const o=[...r.widgets_values];for(const[s,u]of Object.entries(l)){const d=parseInt(s,10);o[d]=u}return{...r,widgets_values:o}}function ui(r,l){const o=Ro(l)??{scope:"root",nodeId:l.id};if(o.scope==="root"){const d=r.nodes.map(p=>p.id===o.nodeId?{...p,widgets_values:l.widgets_values??[]}:p);return{...r,nodes:d}}const s=r.definitions?.subgraphs;if(!s)return r;const u=s.map(d=>{if(d.id!==o.subgraphId)return d;const p=d.nodes.map(h=>h.id===o.nodeId?{...h,widgets_values:l.widgets_values??[]}:h);return{...d,nodes:p}});return{...r,definitions:{...r.definitions,subgraphs:u}}}function ud(r,l,o){const s=["fixed","randomize","increment","decrement"];if(Array.isArray(o.widgets_values)){const d=o.widgets_values.find(p=>typeof p=="string"&&s.includes(p.toLowerCase()));if(typeof d=="string"){const p=d.toLowerCase();if(s.includes(p))return p}}const u=Ea(r,l,o);if(u!==null&&Array.isArray(o.widgets_values)){const d=Number(o.widgets_values[u]),p=M0(d);if(p)return p;const m=(o.outputs??[]).some(N=>String(N.name||"").toLowerCase().includes("seed")&&String(N.type||"").toUpperCase().includes("INT")),g=o.widgets_values.slice(u+1),x=g.length>0&&g.every(N=>N===""||N===null||N===void 0),v=o.properties&&("randomMin"in o.properties||"randomMax"in o.properties);if(m&&x&&v)return"randomize"}return"fixed"}function U1(r,l){const o={};for(const s of r.nodes){const u=l[s.type];if(!u?.input)continue;const d=u.input_order?.required||Object.keys(u.input.required||{}),p=u.input_order?.optional||Object.keys(u.input.optional||{}),h=[...d,...p];for(const m of h){const g=u.input.required?.[m]||u.input.optional?.[m];if(!g)continue;const[x]=g;if(!Array.isArray(x)||x.length===0||s.inputs.find(E=>E.name===m)?.link!=null)continue;const N=bl(r,l,s,m);if(N===null)continue;const C=Lo(s,m,N);if(C==null)continue;const S=Xd(C,x,{comboIndexToValue:!0}),w=String(S),M=w.split(/[\\/]/).pop()??w;if(!x.some(E=>{const D=String(E);return D===w||D===M})){const E=String(s.id);o[E]||(o[E]=[]),o[E].push({type:"workflow_load",message:`Missing value: ${w}`,details:"Not found on server.",inputName:m})}}}return o}const te=ar()(Yr((r,l)=>{const o=s=>{const{manuallyHiddenNodes:u}=l(),p=Object.keys(s).filter(h=>u[Number(h)]);if(p.length>0){const h={...u};for(const m of p)delete h[Number(m)];r({manuallyHiddenNodes:h})}Zt.getState().setNodeErrors(s)};return{workflowSource:null,workflow:null,embedWorkflow:null,originalWorkflow:null,currentFilename:null,currentWorkflowKey:null,nodeTypes:null,isLoading:!1,savedWorkflowStates:{},isExecuting:!1,executingNodeId:null,executingPromptId:null,progress:0,executionStartTime:null,currentNodeStartTime:null,nodeDurationStats:{},workflowDurationStats:{},nodeOutputs:{},promptOutputs:{},runCount:1,followQueue:!1,workflowLoadedAt:0,connectionHighlightModes:{},connectionButtonsVisible:!0,manuallyHiddenNodes:{},searchQuery:"",searchOpen:!1,collapsedGroups:{},hiddenGroups:{},collapsedSubgraphs:{},hiddenSubgraphs:{},setNodeOutput:(s,u)=>{r(d=>({nodeOutputs:{...d.nodeOutputs,[s]:u}}))},clearNodeOutputs:()=>{r({nodeOutputs:{}})},addPromptOutputs:(s,u)=>{!s||u.length===0||r(d=>({promptOutputs:{...d.promptOutputs,[s]:[...d.promptOutputs[s]??[],...u]}}))},clearPromptOutputs:s=>{if(!s){r({promptOutputs:{}});return}r(u=>{if(!u.promptOutputs[s])return u;const d={...u.promptOutputs};return delete d[s],{promptOutputs:d}})},setRunCount:s=>{r({runCount:Math.max(1,Math.floor(s))})},setFollowQueue:s=>{r({followQueue:s})},cycleConnectionHighlight:s=>{r(u=>{const d=u.connectionHighlightModes[s]??"off",p=d==="off"?"inputs":d==="inputs"?"outputs":d==="outputs"?"both":"off";return{connectionHighlightModes:{...u.connectionHighlightModes,[s]:p}}})},setConnectionHighlightMode:(s,u)=>{r(d=>({connectionHighlightModes:{...d.connectionHighlightModes,[s]:u}}))},toggleConnectionButtonsVisible:()=>{r(s=>({connectionButtonsVisible:!s.connectionButtonsVisible}))},setConnectionButtonsVisible:s=>{r({connectionButtonsVisible:s})},hideNode:s=>{r(u=>({manuallyHiddenNodes:{...u.manuallyHiddenNodes,[s]:!0}}))},setNodeHidden:(s,u)=>{r(d=>{const p={...d.manuallyHiddenNodes};return u?p[s]=!0:delete p[s],{manuallyHiddenNodes:p}})},revealNodeWithParents:s=>{const{workflow:u}=l();if(!u)return;const d=u.definitions?.subgraphs??[];console.log("[revealNodeWithParents] start",{nodeId:s,rootNodeCount:u.nodes?.length??0,subgraphCount:d.length});let p=u.nodes.find(S=>S.id===s);if(!p)for(const S of d){const w=S.nodes?.find(M=>M.id===s);if(w){p=w;break}}if(!p){console.log("[revealNodeWithParents] node not found",{nodeId:s,rootIds:u.nodes?.slice(0,5).map(S=>S.id),subgraphSummaries:d.map(S=>({id:S.id,nodeCount:S.nodes?.length??0,sampleIds:S.nodes?.slice(0,5).map(w=>w.id)??[]}))});return}const h=new Map(d.map(S=>[S.id,S])),m=I1(d),g=Ro(p),x=u.nodes.filter(S=>Ro(S)?.scope!=="subgraph"),v=g?.scope==="subgraph"?g.nodeId:p.id,C=(()=>{const S=new Set,w=[v];if(g?.scope==="subgraph"){const M=h.get(g.subgraphId),j=new Map;for(M?.links?.forEach(E=>{const D=j.get(E.target_id)??[];D.push(E.origin_id),j.set(E.target_id,D)});w.length>0;){const E=w.pop();if(E===void 0)continue;(j.get(E)??[]).forEach(_=>{S.has(_)||(S.add(_),w.push(_))})}return S}for(;w.length>0;){const M=w.pop();if(M===void 0)continue;const j=u.nodes.find(E=>E.id===M);j&&j.inputs?.forEach((E,D)=>{if(E.link===null)return;const _=Ao(u,M,D);if(!_)return;const L=_.node.id;S.has(L)||(S.add(L),w.push(L))})}return S})();console.log("[revealNodeWithParents] parents",{nodeId:s,parentCount:C.size,parents:Array.from(C).slice(0,20)}),console.log("[revealNodeWithParents] found node",{nodeId:p.id,origin:g,hasGroups:(u.groups?.length??0)>0,hiddenNodeCount:Object.keys(l().manuallyHiddenNodes??{}).length}),r(S=>{const w={...S.manuallyHiddenNodes};delete w[s],C.forEach(R=>{delete w[R]});const M={...S.hiddenGroups},j={...S.hiddenSubgraphs},E={...S.collapsedGroups},D={...S.collapsedSubgraphs},_=R=>{R!=null&&(delete M[R],E[R]=!1)},L=R=>{R&&(D[R]=!1,delete j[R])};if(!g||g.scope==="root"){const R=ko(p.id,x,u.groups??[]);console.log("[revealNodeWithParents] root origin",{nodeId:s,groupId:R}),_(R),C.forEach(A=>{const B=ko(A,x,u.groups??[]);_(B)})}else{L(g.subgraphId);const R=h.get(g.subgraphId);if(R){const W=ko(g.nodeId,R.nodes??[],R.groups??[]);console.log("[revealNodeWithParents] subgraph origin",{nodeId:s,subgraphId:g.subgraphId,groupId:W}),_(W)}const A=u.extra?.[E0],B=A&&typeof A=="object"?A[g.subgraphId]:void 0;typeof B=="number"&&(console.log("[revealNodeWithParents] root group mapping",{subgraphId:g.subgraphId,rootGroupId:B}),_(B)),R&&C.forEach(W=>{const J=ko(W,R.nodes??[],R.groups??[]);_(J)});const G=[g.subgraphId],U=new Set;for(;G.length>0;){const W=G.pop();if(!W||U.has(W))continue;U.add(W);const J=m.get(W)??[];console.log("[revealNodeWithParents] parent chain",{current:W,parentCount:J.length});for(const xe of J){L(xe.parentId);const ae=h.get(xe.parentId);if(ae){const le=ko(xe.nodeId,ae.nodes??[],ae.groups??[]);console.log("[revealNodeWithParents] parent expand",{parentId:xe.parentId,parentNodeId:xe.nodeId,parentGroupId:le}),_(le)}U.has(xe.parentId)||G.push(xe.parentId)}}}return{manuallyHiddenNodes:w,hiddenGroups:M,hiddenSubgraphs:j,collapsedGroups:E,collapsedSubgraphs:D}})},showAllHiddenNodes:()=>{r({manuallyHiddenNodes:{},hiddenGroups:{},hiddenSubgraphs:{}})},toggleGroupCollapse:s=>{r(u=>{const d=u.collapsedGroups[s]??!0;return{collapsedGroups:{...u.collapsedGroups,[s]:!d}}})},setGroupCollapsed:(s,u)=>{r(d=>{const p={...d.collapsedGroups};return u?p[s]=!0:delete p[s],{collapsedGroups:p}})},toggleGroupHidden:s=>{r(u=>({hiddenGroups:{...u.hiddenGroups,[s]:!u.hiddenGroups[s]}}))},setGroupHidden:(s,u)=>{r(d=>{const p={...d.hiddenGroups};return u?p[s]=!0:delete p[s],{hiddenGroups:p}})},toggleSubgraphHidden:s=>{r(u=>({hiddenSubgraphs:{...u.hiddenSubgraphs,[s]:!u.hiddenSubgraphs[s]}}))},setSubgraphHidden:(s,u)=>{r(d=>{const p={...d.hiddenSubgraphs};return u?p[s]=!0:delete p[s],{hiddenSubgraphs:p}})},updateGroupTitle:(s,u,d)=>{const{workflow:p}=l();if(!p)return;const h=u.trim();if(d){const x=(p.definitions?.subgraphs??[]).map(v=>{if(v.id!==d)return v;const C=(v.groups??[]).map(S=>S.id===s?{...S,title:h}:S);return{...v,groups:C}});Zt.getState().setError(null),r({workflow:{...p,definitions:{...p.definitions??{},subgraphs:x}}});return}const m=(p.groups??[]).map(g=>g.id===s?{...g,title:h}:g);r({workflow:{...p,groups:m}})},updateSubgraphTitle:(s,u)=>{const{workflow:d}=l();if(!d)return;const p=u.trim(),m=(d.definitions?.subgraphs??[]).map(g=>g.id===s?{...g,name:p}:g);r({workflow:{...d,definitions:{...d.definitions??{},subgraphs:m}}})},bypassAllInGroup:(s,u,d=null)=>{const{workflow:p}=l();if(!p)return;const h=T0(p,s,d);if(h.size===0)return;const m=u?4:0,g=(p.nodes??[]).map(x=>h.has(x.id)?{...x,mode:m}:x);r({workflow:{...p,nodes:g}})},showAllHiddenGroups:()=>{r({hiddenGroups:{}})},toggleSubgraphCollapse:s=>{r(u=>({collapsedSubgraphs:{...u.collapsedSubgraphs,[s]:!(u.collapsedSubgraphs[s]??!0)}}))},setSubgraphCollapsed:(s,u)=>{r(d=>({collapsedSubgraphs:{...d.collapsedSubgraphs,[s]:u}}))},setSearchQuery:s=>{r({searchQuery:s})},setSearchOpen:s=>{r({searchOpen:s})},updateWorkflowDuration:(s,u)=>{!s||u<=0||r(d=>{const p=d.workflowDurationStats[s],h=(p?.count??0)+1,m=p?(p.avgMs*p.count+u)/h:u;return{workflowDurationStats:{...d.workflowDurationStats,[s]:{avgMs:m,count:h}}}})},clearWorkflowCache:()=>{const{currentWorkflowKey:s,savedWorkflowStates:u,originalWorkflow:d,nodeTypes:p}=l(),h={...u};if(s?(delete h[s],Gn.getState().clearPinnedWidgetForKey(s)):Gn.getState().clearCurrentPin(),!d){Sn.getState().setSeedModes({}),Sn.getState().setSeedLastValues({}),r({savedWorkflowStates:h});return}const m={};if(p)for(const g of d.nodes)Ea(d,p,g)!==null&&(m[g.id]=ud(d,p,g));Sn.getState().setSeedModes(m),Sn.getState().setSeedLastValues({}),Zt.getState().setError(null),r({workflow:JSON.parse(JSON.stringify(d)),savedWorkflowStates:h,runCount:1,workflowLoadedAt:Date.now()})},saveCurrentWorkflowState:()=>{const{workflow:s,currentWorkflowKey:u,savedWorkflowStates:d,collapsedGroups:p,hiddenGroups:h,collapsedSubgraphs:m,hiddenSubgraphs:g}=l(),x=Sn.getState().seedModes;if(!s||!u)return;const v=d[u]?.bookmarkedNodeIds??[],N={};for(const C of s.nodes)N[C.id]={mode:C.mode,flags:C.flags?{collapsed:!!C.flags.collapsed}:void 0,widgets_values:C.widgets_values};r({savedWorkflowStates:{...d,[u]:{nodes:N,seedModes:{...x},collapsedGroups:{...p},hiddenGroups:{...h},collapsedSubgraphs:{...m},hiddenSubgraphs:{...g},bookmarkedNodeIds:[...v]}}})},loadWorkflow:(s,u,d)=>{const{currentFilename:p,savedWorkflowStates:h,nodeTypes:m}=l(),g=d?.fresh??!1,x=d?.source??{type:"other"},v=A1(s),N=vg(s),C=Td(v.nodes),S={...v,nodes:C,links:v.links??[],groups:v.groups??[],config:v.config??{},last_node_id:v.last_node_id??Math.max(0,...C.map(B=>B.id)),last_link_id:v.last_link_id??0,version:v.version??.4},w=sd(S,m),M=Gn.getState(),j=u?M.pinnedWidgets[u]:void 0;if(j&&!M.pinnedWidgets[w]&&M.setPinnedWidget(j,w),M.restorePinnedWidgetForWorkflow(w,S),p&&l().saveCurrentWorkflowState(),g&&h[w]){const B={...h};delete B[w],r({savedWorkflowStates:B})}const E={};if(m)for(const B of S.nodes)Ea(S,m,B)!==null&&(E[B.id]=ud(S,m,B));let D=g?null:h[w];!D&&!g&&u&&h[u]&&(D=h[u],r({savedWorkflowStates:{...h,[w]:h[u]}}));const _=s.definitions?.subgraphs??[],L={};for(const B of _)L[B.id]=!0;const R={};for(const B of S.groups??[])R[B.id]=!0;for(const B of _)for(const G of B.groups??[])R[G.id]=!0;let A=S;if(D){const B=S.nodes.map(W=>{const J=D.nodes[W.id];return J?{...W,mode:J.mode??W.mode,flags:J.flags??W.flags,widgets_values:J.widgets_values??W.widgets_values}:W}),G={...S,nodes:B};A=G;let U=N;if(U)for(const W of B)U=ui(U,W);r({workflowSource:x,workflow:G,embedWorkflow:U,originalWorkflow:JSON.parse(JSON.stringify(S)),currentFilename:u||null,currentWorkflowKey:w,collapsedGroups:{...R,...D.collapsedGroups??{}},hiddenGroups:D.hiddenGroups??{},collapsedSubgraphs:{...L,...D.collapsedSubgraphs??{}},hiddenSubgraphs:D.hiddenSubgraphs??{},runCount:1,followQueue:!1,workflowLoadedAt:Date.now()}),Sn.getState().setSeedModes({...E,...D.seedModes}),Sn.getState().setSeedLastValues({}),Ln.getState().setCurrentPanel("workflow"),rr.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}})}else Zt.getState().setError(null),r({workflowSource:x,workflow:S,embedWorkflow:N,originalWorkflow:JSON.parse(JSON.stringify(S)),currentFilename:u||null,currentWorkflowKey:w,collapsedGroups:R,hiddenGroups:{},collapsedSubgraphs:L,hiddenSubgraphs:{},runCount:1,followQueue:!1,workflowLoadedAt:Date.now()}),Sn.getState().setSeedModes(E),Sn.getState().setSeedLastValues({}),Ln.getState().setCurrentPanel("workflow"),rr.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}});if(m){const B=U1(A,m),G=Object.values(B).reduce((U,W)=>U+W.length,0);G>0?(o(B),Zt.getState().setError(`Workflow load error: ${G} input${G===1?"":"s"} reference missing options.`)):Zt.getState().clearNodeErrors()}},unloadWorkflow:()=>{const{currentWorkflowKey:s,savedWorkflowStates:u}=l();if(s){const d={...u};delete d[s],r({savedWorkflowStates:d})}Zt.getState().setError(null),r({workflowSource:null,workflow:null,embedWorkflow:null,originalWorkflow:null,currentFilename:null,currentWorkflowKey:null,collapsedGroups:{},hiddenGroups:{},collapsedSubgraphs:{},hiddenSubgraphs:{},runCount:1,nodeOutputs:{},promptOutputs:{},followQueue:!1,workflowLoadedAt:Date.now(),connectionHighlightModes:{},manuallyHiddenNodes:{}}),Sn.getState().clearSeedState(),Gn.getState().clearCurrentPin(),Ln.getState().setCurrentPanel("workflow"),rr.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}})},setSavedWorkflow:(s,u)=>{Zt.getState().setError(null);const d=sd(s,l().nodeTypes);r({workflow:s,embedWorkflow:vg(s),originalWorkflow:JSON.parse(JSON.stringify(s)),currentFilename:u,currentWorkflowKey:d})},updateNodeWidget:(s,u,d,p)=>{const{workflow:h,embedWorkflow:m}=l();if(!h)return;const g=h.nodes.map(N=>N.id===s?H1(N,u,d,p):N),x=g.find(N=>N.id===s),v=m&&x?ui(m,x):m;r({workflow:{...h,nodes:g},embedWorkflow:v})},updateNodeWidgets:(s,u)=>{const{workflow:d,embedWorkflow:p}=l();if(!d)return;const h=d.nodes.map(x=>x.id===s?V1(x,u):x),m=h.find(x=>x.id===s),g=p&&m?ui(p,m):p;r({workflow:{...d,nodes:h},embedWorkflow:g})},updateNodeTitle:(s,u)=>{const{workflow:d}=l();if(!d)return;const p=u?.trim()??"",h=d.nodes.map(m=>{if(m.id!==s)return m;const g={...m.properties??{}},x={...m,properties:g};return p?(x.title=p,g.title=p):(delete x.title,delete g.title),x});r({workflow:{...d,nodes:h}})},toggleBypass:s=>{const{workflow:u}=l();if(!u)return;const d=u.nodes.map(p=>{if(p.id===s){const m=(p.mode||0)===4?0:4;return{...p,mode:m}}return p});r({workflow:{...u,nodes:d}})},toggleNodeFold:s=>{const{workflow:u}=l();if(!u)return;const d=u.nodes.map(p=>{if(p.id===s){const h=p.flags||{},m=h.collapsed;return{...p,flags:{...h,collapsed:!m}}}return p});r({workflow:{...u,nodes:d}})},setNodeFold:(s,u)=>{const{workflow:d}=l();if(!d)return;const p=d.nodes.map(h=>{if(h.id===s){const m=h.flags||{};return{...h,flags:{...m,collapsed:u}}}return h});r({workflow:{...d,nodes:p}})},ensureNodeExpanded:s=>{const{workflow:u}=l();if(!u||!u.nodes.find(h=>h.id===s)?.flags?.collapsed)return;const p=u.nodes.map(h=>h.id===s?{...h,flags:{...h.flags,collapsed:!1}}:h);r({workflow:{...u,nodes:p}})},scrollToNode:(s,u)=>{const{manuallyHiddenNodes:d}=l(),{searchOpen:p,searchQuery:h,collapsedGroups:m,hiddenGroups:g,collapsedSubgraphs:x,hiddenSubgraphs:v}=l();if(console.log("[scrollToNode] start",{nodeId:s,hidden:!!d[s],searchOpen:p,searchQuery:h,collapsedGroups:Object.keys(m??{}).length,hiddenGroups:Object.keys(g??{}).length,collapsedSubgraphs:Object.keys(x??{}).length,hiddenSubgraphs:Object.keys(v??{}).length}),d[s]&&l().setNodeHidden(s,!1),document.body.dataset.textareaFocus==="true")return;l().ensureNodeExpanded(s);const N=(C,S)=>{const w=document.getElementById(`node-anchor-${s}`)??document.getElementById(`node-${s}`),M=document.getElementById(`node-card-${s}`)??document.getElementById(`node-${s}`);if(!w||!M){console.log("[scrollToNode] missing elements",{nodeId:s,attemptsLeft:C,hasAnchor:!!w,hasNode:!!M}),C>0?requestAnimationFrame(()=>N(C-1,S)):S>0&&setTimeout(()=>N(10,S-1),200);return}const j=w.closest('[data-node-list="true"]');if(console.log("[scrollToNode] found elements",{nodeId:s,hasContainer:!!j}),j){const A=w.getBoundingClientRect(),B=j.getBoundingClientRect(),G=A.top-B.top,U=Math.max(0,j.scrollTop+G);j.scrollTo({top:U,behavior:"smooth"})}else w.scrollIntoView({behavior:"smooth",block:"start"});const E=j||window;let D=null;const _=()=>{document.querySelectorAll(".highlight-pulse").forEach(A=>A.classList.remove("highlight-pulse")),M.classList.add("highlight-pulse"),setTimeout(()=>M.classList.remove("highlight-pulse"),1200),"vibrate"in navigator&&navigator.vibrate(10),u&&window.dispatchEvent(new CustomEvent("node-show-label",{detail:{nodeId:s,label:u}}))},L=()=>{D&&clearTimeout(D),D=setTimeout(()=>{R(),_()},120)},R=()=>{D&&(clearTimeout(D),D=null),E.removeEventListener("scroll",L)};E.addEventListener("scroll",L,{passive:!0}),D=setTimeout(()=>{R(),_()},200)};N(10,2)},setNodeTypes:s=>{r({nodeTypes:s});const{workflow:u,currentWorkflowKey:d,currentFilename:p,savedWorkflowStates:h}=l();if(!u)return;const m=sd(u,s);if(d===m)return;const g={...h};d&&g[d]&&!g[m]?(g[m]=g[d],delete g[d]):!d&&p&&g[p]&&!g[m]&&(g[m]=g[p]);const x=Gn.getState(),v=p?x.pinnedWidgets[p]:void 0,N=d?x.pinnedWidgets[d]:void 0;v&&!x.pinnedWidgets[m]?x.setPinnedWidget(v,m):N&&!x.pinnedWidgets[m]&&x.setPinnedWidget(N,m),r({currentWorkflowKey:m,savedWorkflowStates:g}),x.restorePinnedWidgetForWorkflow(m,u)},setExecutionState:(s,u,d,p)=>{r(h=>{const m=Date.now(),g=s?d??h.executingPromptId:null,x=s?u??h.executingNodeId:null,v={isExecuting:s,executingNodeId:x,executingPromptId:g,progress:p},N=(w,M)=>{if(!w||M<=0||h.workflow?.nodes.find(R=>String(R.id)===w)?.mode===4)return h.nodeDurationStats;const E=String(w),D=h.nodeDurationStats[E],_=(D?.count??0)+1,L=D?(D.avgMs*D.count+M)/_:M;return{...h.nodeDurationStats,[E]:{avgMs:L,count:_}}};if(!s){if(h.currentNodeStartTime&&h.executingNodeId){const w=m-h.currentNodeStartTime;v.nodeDurationStats=N(h.executingNodeId,w)}if(h.executionStartTime&&h.workflow){const w=m-h.executionStartTime,M=ji(h.workflow),j=h.workflowDurationStats[M],E=(j?.count??0)+1,D=j?(j.avgMs*j.count+w)/E:w;v.workflowDurationStats={...h.workflowDurationStats,[M]:{avgMs:D,count:E}}}return v.executionStartTime=null,v.currentNodeStartTime=null,v}const C=g&&g!==h.executingPromptId,S=x&&x!==h.executingNodeId;if(C&&(v.executionStartTime=m,v.currentNodeStartTime=m),S&&h.currentNodeStartTime&&h.executingNodeId){const w=m-h.currentNodeStartTime;v.nodeDurationStats=N(h.executingNodeId,w),v.currentNodeStartTime=m}else h.currentNodeStartTime||(v.currentNodeStartTime=m);return v})},queueWorkflow:async s=>{const u=Sn.getState(),d=u.seedModes,p=u.seedLastValues,{workflow:h,nodeTypes:m,embedWorkflow:g}=l();if(!h||!m){Zt.getState().setError("Node types are still loading. Try again in a moment.");return}Zt.getState().setError(null),r({isLoading:!0});try{let x=h,v=g,N={...p};for(let C=0;C<s;C++){const S={},w=x.nodes.map(_=>{const L=Ea(x,m,_);if(L===null||!Array.isArray(_.widgets_values))return _;const R=d[_.id]??ud(x,m,_),A=L+1;if(typeof _.widgets_values[A]=="string"){if(!R||R==="fixed")return _;const xe=Number(_.widgets_values[L])||0;let ae;switch(R){case"randomize":ae=_o(m,_);break;case"increment":ae=xe+1;break;case"decrement":ae=xe-1;break;default:return _}const le=[..._.widgets_values];return le[L]=ae,{..._,widgets_values:le}}const U=Number(_.widgets_values[L]),W=N[_.id]??null;let J=null;return Kd(U)?J=k1(U,W,m,_):R&&R!=="fixed"&&(R==="randomize"?J=_o(m,_):R==="increment"?J=(typeof W=="number"?W:U)+1:R==="decrement"&&(J=(typeof W=="number"?W:U)-1)),J===null||(S[_.id]=J,N={...N,[_.id]:J}),_});if(x={...x,nodes:w},v){let _=v;for(const L of w)_=ui(_,L);v=_}u.setSeedLastValues(N),r({workflow:x,embedWorkflow:v});const M={},j=new Set,E=new Map;for(const _ of x.nodes){if(_.mode===4)continue;let L=null;if(m[_.type])L=_.type;else{const R=Object.entries(m).find(([,A])=>A.display_name===_.type||A.name===_.type);R&&(L=R[0])}L&&(j.add(_.id),E.set(_.id,L))}for(const _ of x.nodes){if(_.mode===4)continue;const L=E.get(_.id);if(!L)continue;const R=o1(x,m,_,L,j,Qd(x,_.id),S);M[String(_.id)]={class_type:L,inputs:R}}const D=await fetch(`${zt}/api/prompt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:M,client_id:S0,extra_data:{extra_pnginfo:{workflow:v??x}}})});if(!D.ok){const _=await D.json(),L={};if(_.node_errors)for(const[R,A]of Object.entries(_.node_errors)){const B=A.errors;B&&B.length>0&&(L[R]=B.map(G=>({type:G.type,message:G.message,details:G.details,inputName:G.extra_info?.input_name})))}throw Object.keys(L).length>0&&o(L),new Error(_.error?.message||"Failed to queue prompt")}Zt.getState().clearNodeErrors()}}catch(x){Zt.getState().setError(x instanceof Error?x.message:"Failed to queue workflow")}finally{lt.getState().fetchQueue(),r({isLoading:!1})}},applyControlAfterGenerate:()=>{const{workflow:s}=l();if(!s)return;let u=!1;const d=s.nodes.map(p=>{if(p.type==="PrimitiveNode"){if(!Array.isArray(p.widgets_values))return p;const h=p.outputs?.[0]?.type,m=String(h).toUpperCase();if(m!=="INT"&&m!=="FLOAT")return p;const g=p.widgets_values?.[1];if(!g||g==="fixed")return p;const x=p.widgets_values?.[0];if(typeof x!="number")return p;let v=x;if(g==="increment"?v=m==="INT"?x+1:x+.01:g==="decrement"?v=m==="INT"?x-1:x-.01:g==="randomize"&&(v=m==="INT"?Math.floor(Math.random()*0xffffffffffff):Math.random()),v!==x){u=!0;const N=[...p.widgets_values];return N[0]=v,{...p,widgets_values:N}}}return p});u&&r({workflow:{...s,nodes:d}})}}},{name:"workflow-storage",storage:$r(()=>localStorage),partialize:r=>({workflow:r.workflow,embedWorkflow:r.embedWorkflow,originalWorkflow:r.originalWorkflow,currentFilename:r.currentFilename,currentWorkflowKey:r.currentWorkflowKey,savedWorkflowStates:r.savedWorkflowStates,runCount:r.runCount,manuallyHiddenNodes:r.manuallyHiddenNodes,collapsedGroups:r.collapsedGroups,hiddenGroups:r.hiddenGroups,collapsedSubgraphs:r.collapsedSubgraphs,hiddenSubgraphs:r.hiddenSubgraphs,connectionButtonsVisible:r.connectionButtonsVisible,isExecuting:r.isExecuting,executingNodeId:r.executingNodeId,executingPromptId:r.executingPromptId,progress:r.progress,executionStartTime:r.executionStartTime,currentNodeStartTime:r.currentNodeStartTime,nodeDurationStats:r.nodeDurationStats,workflowDurationStats:r.workflowDurationStats}),onRehydrateStorage:()=>r=>{}}));function ji(r){const l=[...r.nodes].sort((o,s)=>o.id-s.id).map(o=>({id:o.id,type:o.type,mode:o.mode,inputs:o.inputs?.map(s=>s.link??null)??[],outputs:o.outputs?.map(s=>s.links??[])??[]}));return JSON.stringify({nodes:l,links:r.links??[]})}const _d=ar(r=>({appMenuOpen:!1,setAppMenuOpen:l=>r({appMenuOpen:l})})),Tn=ar((r,l)=>({history:[],isLoading:!1,addHistoryEntry:o=>{r(u=>u.history.some(d=>d.prompt_id===o.prompt_id)?u:{history:[o,...u.history]});const s=lt.getState();if(s.queueItemExpanded[o.prompt_id]===void 0&&s.setQueueItemExpanded(o.prompt_id,!0),o.workflow&&o.durationSeconds){const u=ji(o.workflow);te.getState().updateWorkflowDuration(u,o.durationSeconds*1e3)}},fetchHistory:async()=>{r({isLoading:!0});try{const o=await u1(50),s=Object.entries(o).map(([d,p])=>{const h=[];for(const M of Object.values(p.outputs))M.images&&h.push(...M.images),M.gifs&&h.push(...M.gifs),M.videos&&h.push(...M.videos);let m=Date.now(),g=null,x=null,v=!1;if(p.status?.messages)for(const[M,j]of p.status.messages)M==="execution_start"&&j.timestamp&&(m=j.timestamp,g=j.timestamp),(M==="execution_end"||M==="execution_success")&&j.timestamp&&(x=j.timestamp),M==="execution_error"&&(v=!0);g===null&&m&&(g=m);const N=g!==null&&x!==null&&x>=g?(x-g)/1e3:void 0,C=p.status?.status_str?.toLowerCase()||"",S=!v&&p.status?.completed!==!1&&!C.includes("error"),w=p.prompt?.[3]?.extra_pnginfo?.workflow;return{prompt_id:d,timestamp:m,durationSeconds:N,success:S,outputs:{images:h},prompt:p.prompt[2],workflow:w}});s.sort((d,p)=>p.timestamp-d.timestamp),r({history:s});const u=lt.getState();for(const d of s)if(u.queueItemExpanded[d.prompt_id]===void 0&&u.setQueueItemExpanded(d.prompt_id,!0),d.workflow&&d.durationSeconds){const p=ji(d.workflow);te.getState().updateWorkflowDuration(p,d.durationSeconds*1e3)}}catch(o){console.error("Failed to fetch history:",o)}finally{r({isLoading:!1})}},deleteItem:async o=>{try{await g1(o),r(s=>({history:s.history.filter(u=>u.prompt_id!==o)}))}catch(s){console.error("Failed to delete history item:",s)}},clearHistory:async()=>{try{await x1()}catch(o){console.error("Failed to clear history:",o);try{const s=l().history.map(u=>u.prompt_id);await mg(s)}catch(s){console.error("Failed to delete history items:",s)}}finally{r({history:[]})}},clearEmptyItems:async()=>{const o=l().history.filter(s=>s.outputs.images.length===0).map(s=>s.prompt_id);if(o.length!==0)try{await mg(o),r(s=>({history:s.history.filter(u=>!o.includes(u.prompt_id))}))}catch(s){console.error("Failed to delete empty history items:",s)}}})),Nt=ar()(Yr((r,l)=>({source:"output",currentFolder:null,folders:[],files:[],isLoading:!1,error:null,viewMode:"grid",showHidden:!1,filter:{search:"",favoritesOnly:!1,type:"all"},sort:{mode:"modified"},favorites:[],selectionMode:!1,selectedIds:[],selectionActionOpen:!1,filterModalOpen:!1,newFolderModalOpen:!1,outputsViewerOpen:!1,setSource:o=>{r({source:o,currentFolder:null,files:[],folders:[],selectionMode:!1,selectedIds:[]}),l().fetchFolders(),l().fetchFiles()},setCurrentFolder:o=>{const{currentFolder:s}=l(),u=s?`${s}/${o}`:o;r({currentFolder:u,files:[],selectionMode:!1,selectedIds:[]}),l().fetchFiles()},navigateToPath:o=>{r({currentFolder:o,files:[],selectionMode:!1,selectedIds:[]}),l().fetchFiles()},navigateUp:()=>{const{currentFolder:o}=l();if(!o)return;const s=o.split("/");s.pop();const u=s.length>0?s.join("/"):null;r({currentFolder:u,files:[],selectionMode:!1,selectedIds:[]}),l().fetchFiles()},fetchFolders:async()=>{try{const{showHidden:o}=l(),s=await v1(o),{source:u}=l();r({folders:u==="output"?s.output:s.input})}catch(o){console.error("Failed to fetch folders:",o)}},fetchFiles:async()=>{const{source:o,currentFolder:s,sort:u,showHidden:d}=l();r({isLoading:!0,error:null});try{const p=await Od(o,1e3,0,u.mode,!1,s,d);r({files:p,isLoading:!1})}catch(p){r({error:p.message,isLoading:!1})}},setFilter:o=>{r(s=>({filter:{...s.filter,...o}}))},setSort:o=>{r({sort:o}),l().fetchFiles()},setViewMode:o=>{r({viewMode:o})},toggleShowHidden:()=>{r(o=>({showHidden:!o.showHidden})),l().fetchFolders(),l().fetchFiles()},toggleFavorite:o=>{r(s=>({favorites:s.favorites.includes(o)?s.favorites.filter(d=>d!==o):[...s.favorites,o]}))},toggleSelectionMode:()=>{r(o=>({selectionMode:!o.selectionMode,selectedIds:[],selectionActionOpen:!1}))},toggleSelection:o=>{r(s=>({selectedIds:s.selectedIds.includes(o)?s.selectedIds.filter(d=>d!==o):[...s.selectedIds,o]}))},selectAll:()=>{const o=l().getDisplayedFiles();r({selectedIds:o.map(s=>s.id)})},selectIds:(o,s="add")=>{r(u=>{if(s==="replace")return{selectedIds:[...o]};const d=new Set(u.selectedIds);return o.forEach(p=>d.add(p)),{selectedIds:Array.from(d)}})},clearSelection:()=>{r({selectedIds:[],selectionActionOpen:!1})},setSelectionActionOpen:o=>{r({selectionActionOpen:o})},setFilterModalOpen:o=>{r({filterModalOpen:o})},setNewFolderModalOpen:o=>{r({newFolderModalOpen:o})},setOutputsViewerOpen:o=>{r({outputsViewerOpen:o})},addFavorites:o=>{r(s=>{const u=new Set(s.favorites);return o.forEach(d=>u.add(d)),{favorites:Array.from(u)}})},removeFavorites:o=>{r(s=>({favorites:s.favorites.filter(u=>!o.includes(u))}))},refresh:()=>{l().fetchFolders(),l().fetchFiles()},getDisplayedFiles:()=>{const{files:o,filter:s,favorites:u,showHidden:d,sort:p}=l();let h=[...o];if(d||(h=h.filter(g=>!g.name.startsWith("."))),s.search){const g=s.search.toLowerCase();h=h.filter(x=>x.name.toLowerCase().includes(g))}s.favoritesOnly&&(h=h.filter(g=>u.includes(g.id))),s.type!=="all"&&(h=h.filter(g=>g.type==="folder"||g.type===s.type));const m=p.mode.endsWith("-reverse")?-1:1;return p.mode.startsWith("name")?h.sort((g,x)=>g.name.localeCompare(x.name)*m):p.mode.startsWith("size")?h.sort((g,x)=>((g.size??0)-(x.size??0))*m):h.sort((g,x)=>((g.date??0)-(x.date??0))*m),h}}),{name:"outputs-storage",version:1,migrate:(r,l)=>{if(l===0){if(r.sort&&!r.sort.mode){const{field:o,order:s}=r.sort;o==="name"?r.sort={mode:s==="asc"?"name":"name-reverse"}:r.sort={mode:s==="desc"?"modified":"modified-reverse"}}r.filter&&!r.filter.type&&(r.filter.type="all")}return r},partialize:r=>({source:r.source,viewMode:r.viewMode,showHidden:r.showHidden,sort:r.sort,filter:r.filter,favorites:r.favorites})}));function G1(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:i.jsx("path",{d:"M12 11V16M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21ZM12.0498 8V8.1L11.9502 8.1002V8H12.0498Z"})})}function L0({className:r}){return i.jsx(G1,{className:r})}function q1(r){return i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M19 4H5L10.5 10.5V17L13.5 19V10.5L19 4Z"}),i.jsx("path",{d:"M2.5 9L4.5 7L6.5 9"}),i.jsx("path",{d:"M4.5 7V17"}),i.jsx("path",{d:"M2.5 15L4.5 17L6.5 15"})]})}function W1(r){return i.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M6 4h9l3 3v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),i.jsx("path",{d:"M9 10h6M9 14h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function F1(r){return i.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M6 4h9l3 3v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),i.jsx("path",{d:"M9 10h6M9 14h6M9 18h4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function $1(r){return i.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:i.jsx("path",{d:"M4 20h16M6 16l4-4m0 0l4-4m-4 4l4 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function Y1(r){return i.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M3 7h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),i.jsx("path",{d:"M3 7l9 6 9-6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]})}function wl(r){return i.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[i.jsx("circle",{cx:"12",cy:"5",r:"2",fill:"currentColor"}),i.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"}),i.jsx("circle",{cx:"12",cy:"19",r:"2",fill:"currentColor"})]})}function Il(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:i.jsx("path",{d:"M10 17l5-5-5-5v10z"})})}function Wn(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:i.jsx("path",{d:"M7 10l5 5 5-5H7z"})})}function Ci(r){return i.jsx("svg",{viewBox:"0 0 20 20","aria-hidden":"true",...r,children:i.jsx("g",{transform:"translate(-164 -6319)",fill:"currentColor",children:i.jsx("path",{d:"M170.673,6324.726 L170.669,6324.729 C170.266,6325.104 170.244,6325.735 170.62,6326.137 L171.577,6327.158 C171.876,6327.478 171.649,6328 171.212,6328 L165,6328 C164.447,6328 164,6328.448 164,6329 C164,6329.552 164.447,6330 165,6330 L171.197,6330 C171.637,6330 171.862,6330.527 171.558,6330.845 L170.63,6331.819 C170.248,6332.218 170.266,6332.852 170.669,6333.229 C171.068,6333.603 171.695,6333.584 172.071,6333.186 L174.76,6330.338 C175.49,6329.564 175.487,6328.354 174.753,6327.585 L172.067,6324.769 C171.692,6324.376 171.071,6324.357 170.673,6324.726 M182.222,6319 L175.777,6319 C174.8,6319 174,6319.68 174,6321.111 L174,6322.007 C174,6322.555 174.444,6323 174.993,6323 L175.006,6323 C175.555,6323 176,6322.555 176,6322.007 L176,6321.993 C176,6321.445 176.444,6321 176.993,6321 L181.006,6321 C181.555,6321 182,6321.445 182,6321.993 L182,6336.007 C182,6336.555 181.555,6337 181.006,6337 L176.993,6337 C176.444,6337 176,6336.555 176,6336.007 L176,6335.993 C176,6335.445 175.555,6335 175.006,6335 L174.993,6335 C174.444,6335 174,6335.445 174,6335.993 L174,6337.111 C174,6338.293 174.847,6339 175.777,6339 L182.222,6339 C183.204,6339 184,6338.204 184,6337.222 L184,6337.111 L184,6320.778 C184,6319.796 183.204,6319 182.222,6319"})})})}function tf(r){return i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M18.4101 3.6512L20.5315 5.77252C21.4101 6.6512 21.4101 8.07582 20.5315 8.9545L9.54019 19.9458C9.17774 20.3082 8.70239 20.536 8.19281 20.5915L4.57509 20.9856C3.78097 21.072 3.11061 20.4017 3.1971 19.6076L3.59111 15.9898C3.64661 15.4803 3.87444 15.0049 4.23689 14.6425L15.2282 3.6512C16.1068 2.77252 17.5315 2.77252 18.4101 3.6512Z",stroke:"currentColor",strokeWidth:"1.5"}),i.jsx("path",{d:"M15.2282 3.6512C16.1068 2.77252 17.5315 2.77252 18.4101 3.6512L20.5315 5.77252C21.4101 6.6512 21.4101 8.07582 20.5315 8.9545L18.7283 10.7576L13.425 5.45432L15.2282 3.6512Z",stroke:"currentColor",strokeWidth:"1.5"})]})}function Gl(r){return i.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:i.jsx("path",{d:"M6 6l12 12M18 6l-12 12",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})})}function Hl(r){return i.jsx("svg",{viewBox:"0 0 16 16","aria-hidden":"true",...r,children:i.jsx("path",{d:"M6.4 11.2L3.2 8l1.1-1.1 2.1 2.1 5-5L12.5 5l-6.1 6.2Z",fill:"currentColor"})})}function Q1(r){return i.jsx("svg",{viewBox:"0 0 16 16","aria-hidden":"true",...r,children:i.jsx("path",{d:"M4.2 4.2l7.6 7.6m0-7.6l-7.6 7.6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function X1(r){return i.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M7 18a4 4 0 0 1 0-8 6 6 0 0 1 11.3-2.2A4.5 4.5 0 0 1 18 18H7Z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),i.jsx("path",{d:"M12 10v7m0 0l-3-3m3 3l3-3",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Vr(r){return i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function dr(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:i.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24M1 1l22 22"})})}function Gr(r){return i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M3 6h18M8 6V4h8v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),i.jsx("path",{d:"M10 11v6M14 11v6"})]})}function P1(r){return i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M15 9l-6 6M9 9l6 6"})]})}function gi(r){return i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M23 4v6h-6M1 20v-6h6"}),i.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}function Z1(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:i.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"})})}function _a(r){return i.jsx("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.3",d:"M9.18613 3.09999H6.81377M9.18613 12.9H7.55288c-3.08678 0-5.35171-2.99581-4.60305-6.08843l.3054-1.26158M14.7486 2.1721l-.5931 2.45c-.132.54533-.6065.92789-1.1508.92789h-2.2993c-.77173 0-1.33797-.74895-1.1508-1.5221l.5931-2.45c.132-.54533.6065-.9279 1.1508-.9279h2.2993c.7717 0 1.3379.74896 1.1508 1.52211Zm-8.3033 0-.59309 2.45c-.13201.54533-.60646.92789-1.15076.92789H2.4021c-.7717 0-1.33793-.74895-1.15077-1.5221l.59309-2.45c.13201-.54533.60647-.9279 1.15077-.9279h2.29935c.77169 0 1.33792.74896 1.15076 1.52211Zm8.3033 9.8-.5931 2.45c-.132.5453-.6065.9279-1.1508.9279h-2.2993c-.77173 0-1.33797-.749-1.1508-1.5221l.5931-2.45c.132-.5453.6065-.9279 1.1508-.9279h2.2993c.7717 0 1.3379.7489 1.1508 1.5221Z"})})}function _0(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...r,children:i.jsx("path",{d:"M13 20.74C12.9039 20.7541 12.8062 20.7541 12.71 20.74C12.5724 20.6823 12.4551 20.5849 12.3732 20.4602C12.2912 20.3355 12.2484 20.1892 12.25 20.04V16.7H3.00001C2.81189 16.6956 2.63208 16.6216 2.49538 16.4923C2.35868 16.363 2.27481 16.1876 2.26001 16V8.00002C2.25463 7.89856 2.26965 7.79706 2.30417 7.7015C2.3387 7.60595 2.39204 7.51829 2.46103 7.44371C2.53002 7.36913 2.61326 7.30913 2.70584 7.26727C2.79841 7.22542 2.89844 7.20255 3.00001 7.20002H12.25V4.01002C12.2498 3.86106 12.2946 3.71551 12.3784 3.59241C12.4623 3.4693 12.5813 3.37436 12.72 3.32002C12.8551 3.26039 13.0053 3.24376 13.1502 3.27238C13.2951 3.301 13.4277 3.37349 13.53 3.48002L21.53 11.48C21.6705 11.6206 21.7493 11.8113 21.7493 12.01C21.7493 12.2088 21.6705 12.3994 21.53 12.54L13.53 20.54C13.4601 20.6079 13.377 20.6608 13.2858 20.6952C13.1946 20.7296 13.0973 20.7448 13 20.74ZM3.76001 15.2H13C13.1981 15.2026 13.3874 15.2825 13.5275 15.4226C13.6676 15.5626 13.7474 15.7519 13.75 15.95V18.18L19.93 12L13.75 5.83002V8.00002C13.7477 8.19843 13.6689 8.3883 13.53 8.53002C13.3817 8.65257 13.1919 8.71343 13 8.70002H3.76001V15.2Z",fill:"currentColor"})})}function K1(r){return i.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M10.667 2.667c1.45.008 2.235.072 2.748.585C14 3.837 14 4.78 14 6.666v4c0 1.885 0 2.828-.585 3.414-.586.585-1.529.585-3.415.585H6c-1.886 0-2.829 0-3.414-.585C2 13.494 2 12.55 2 10.666v-4c0-1.886 0-2.829.586-3.414.512-.513 1.297-.577 2.747-.585",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),i.jsx("path",{d:"M5.333 2.333c0-.552.448-1 1-1h3.334c.552 0 1 .448 1 1v.667c0 .553-.448 1-1 1H6.333c-.552 0-1-.447-1-1v-.667Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"})]})}function J1(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:i.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})})}function eb(r){return i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[i.jsx("rect",{x:"9",y:"9",width:"10",height:"12",rx:"2"}),i.jsx("path",{d:"M5 15V5a2 2 0 0 1 2-2h8"})]})}function tb(r){return i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[i.jsx("circle",{cx:"12",cy:"12",r:"9"}),i.jsx("path",{d:"M7 12h10"})]})}function ki(r){return i.jsx("svg",{viewBox:"0 0 20 20",fill:"none","aria-hidden":"true",...r,children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})})}function Vl(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:i.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}function A0({showSlash:r=!1,...l}){return i.jsxs("svg",{viewBox:"0 0 32 32","aria-hidden":"true",overflow:"visible",...l,children:[i.jsx("path",{d:"M28 28H4a2.002 2.002 0 0 1-2-2V21h2v5h24v-5h2v5a2.002 2.002 0 0 1-2 2Z",fill:"currentColor"}),i.jsx("rect",{x:"7",y:"21",width:"18",height:"2",fill:"currentColor"}),i.jsx("rect",{x:"7",y:"16",width:"18",height:"2",fill:"currentColor"}),i.jsx("rect",{x:"7",y:"11",width:"18",height:"2",fill:"currentColor"}),i.jsx("rect",{x:"7",y:"6",width:"18",height:"2",fill:"currentColor"}),i.jsx("path",{d:"M16 -3l5 4H11l5-4Z",fill:"currentColor"}),r&&i.jsx("line",{x1:"2",y1:"30",x2:"28",y2:"4",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})]})}function nb({progress:r,radius:l=11,...o}){const s=Math.min(100,Math.max(0,r)),u=2*Math.PI*l,d=u*(1-s/100);return i.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...o,children:i.jsx("circle",{cx:"12",cy:"12",r:l,fill:"none",stroke:"rgba(34,197,94,0.9)",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:u,strokeDashoffset:d})})}function rb(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}function nf(r){return i.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...r,children:i.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})}function lb(r){return i.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...r,children:i.jsx("path",{fillRule:"evenodd",d:"M4 10a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1z",clipRule:"evenodd"})})}function ab(r){return i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[i.jsx("circle",{cx:"11",cy:"11",r:"7"}),i.jsx("path",{d:"M20 20l-3.5-3.5"})]})}function ob(r){return i.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"3",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),i.jsx("circle",{cx:"9",cy:"9",r:"1.5",fill:"currentColor"}),i.jsx("circle",{cx:"15",cy:"15",r:"1.5",fill:"currentColor"}),i.jsx("circle",{cx:"15",cy:"9",r:"1.5",fill:"currentColor"}),i.jsx("circle",{cx:"9",cy:"15",r:"1.5",fill:"currentColor"}),i.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"})]})}function rf(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}function R0(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:i.jsx("path",{d:"M12 2L1 21h22L12 2zm0 3.5L19.5 19h-15L12 5.5zM11 10v4h2v-4h-2zm0 6v2h2v-2h-2z"})})}function Mi(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:i.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}function wg(r){return i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[i.jsx("rect",{x:"3",y:"7",width:"12",height:"10",rx:"2"}),i.jsx("path",{d:"M15 10l5-3v10l-5-3z"})]})}function Do(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:i.jsx("path",{d:"M19.1835 7.80516L16.2188 4.83755C14.1921 2.8089 13.1788 1.79457 12.0904 2.03468C11.0021 2.2748 10.5086 3.62155 9.5217 6.31506L8.85373 8.1381C8.59063 8.85617 8.45908 9.2152 8.22239 9.49292C8.11619 9.61754 7.99536 9.72887 7.86251 9.82451C7.56644 10.0377 7.19811 10.1392 6.46145 10.3423C4.80107 10.8 3.97088 11.0289 3.65804 11.5721C3.5228 11.8069 3.45242 12.0735 3.45413 12.3446C3.45809 12.9715 4.06698 13.581 5.28476 14.8L6.69935 16.2163L2.22345 20.6964C1.92552 20.9946 1.92552 21.4782 2.22345 21.7764C2.52138 22.0746 3.00443 22.0746 3.30236 21.7764L7.77841 17.2961L9.24441 18.7635C10.4699 19.9902 11.0827 20.6036 11.7134 20.6045C11.9792 20.6049 12.2404 20.5358 12.4713 20.4041C13.0192 20.0914 13.2493 19.2551 13.7095 17.5825C13.9119 16.8472 14.013 16.4795 14.2254 16.1835C14.3184 16.054 14.4262 15.9358 14.5468 15.8314C14.8221 15.593 15.1788 15.459 15.8922 15.191L17.7362 14.4981C20.4 13.4973 21.7319 12.9969 21.9667 11.9115C22.2014 10.826 21.1954 9.81905 19.1835 7.80516Z"})})}function Ad(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:i.jsx("path",{d:"M15.9894 4.9502L16.52 4.42014L15.9894 4.9502ZM19.0716 8.03562L18.541 8.56568L19.0716 8.03562ZM8.73837 19.429L8.20777 19.9591L8.73837 19.429ZM4.62169 15.3081L5.15229 14.7781L4.62169 15.3081ZM17.5669 14.9943L17.3032 14.2922L17.5669 14.9943ZM15.6498 15.7146L15.9136 16.4167H15.9136L15.6498 15.7146ZM8.3322 8.38177L7.62798 8.12375L8.3322 8.38177ZM9.02665 6.48636L9.73087 6.74438V6.74438L9.02665 6.48636ZM5.84504 10.6735L6.04438 11.3965L5.84504 10.6735ZM7.30167 10.1351L6.86346 9.52646L6.86346 9.52646L7.30167 10.1351ZM7.67582 9.79038L8.24665 10.2768H8.24665L7.67582 9.79038ZM14.251 16.3805L14.742 16.9475L14.742 16.9475L14.251 16.3805ZM13.3806 18.2012L12.6574 18.0022V18.0022L13.3806 18.2012ZM13.9169 16.7466L13.3075 16.3094L13.3075 16.3094L13.9169 16.7466ZM2.71846 12.7552L1.96848 12.76L1.96848 12.76L2.71846 12.7552ZM2.93045 11.9521L2.28053 11.5778H2.28053L2.93045 11.9521ZM11.3052 21.3431L11.3064 20.5931H11.3064L11.3052 21.3431ZM12.0933 21.1347L11.7215 20.4833L11.7215 20.4833L12.0933 21.1347ZM11.6973 2.03606L11.8588 2.76845L11.6973 2.03606ZM1.4694 21.4699C1.17666 21.763 1.1769 22.2379 1.46994 22.5306C1.76298 22.8233 2.23786 22.8231 2.5306 22.5301L1.4694 21.4699ZM7.18383 17.8721C7.47657 17.5791 7.47633 17.1042 7.18329 16.8114C6.89024 16.5187 6.41537 16.5189 6.12263 16.812L7.18383 17.8721ZM15.4588 5.48026L18.541 8.56568L19.6022 7.50556L16.52 4.42014L15.4588 5.48026ZM9.26897 18.8989L5.15229 14.7781L4.09109 15.8382L8.20777 19.9591L9.26897 18.8989ZM17.3032 14.2922L15.386 15.0125L15.9136 16.4167L17.8307 15.6964L17.3032 14.2922ZM9.03642 8.63979L9.73087 6.74438L8.32243 6.22834L7.62798 8.12375L9.03642 8.63979ZM6.04438 11.3965C6.75583 11.2003 7.29719 11.0625 7.73987 10.7438L6.86346 9.52646C6.69053 9.65097 6.46601 9.72428 5.6457 9.95044L6.04438 11.3965ZM7.62798 8.12375C7.33502 8.92332 7.24338 9.14153 7.10499 9.30391L8.24665 10.2768C8.60041 9.86175 8.7823 9.33337 9.03642 8.63979L7.62798 8.12375ZM7.73987 10.7438C7.92696 10.6091 8.09712 10.4523 8.24665 10.2768L7.10499 9.30391C7.0337 9.38757 6.9526 9.46229 6.86346 9.52646L7.73987 10.7438ZM15.386 15.0125C14.697 15.2714 14.1716 15.4571 13.76 15.8135L14.742 16.9475C14.9028 16.8082 15.1192 16.7152 15.9136 16.4167L15.386 15.0125ZM14.1037 18.4001C14.329 17.5813 14.4021 17.3569 14.5263 17.1838L13.3075 16.3094C12.9902 16.7517 12.8529 17.2919 12.6574 18.0022L14.1037 18.4001ZM13.76 15.8135C13.5903 15.9605 13.4384 16.1269 13.3075 16.3094L14.5263 17.1838C14.5887 17.0968 14.6611 17.0175 14.742 16.9475L13.76 15.8135ZM5.15229 14.7781C4.50615 14.1313 4.06799 13.691 3.78366 13.3338C3.49835 12.9753 3.46889 12.8201 3.46845 12.7505L1.96848 12.76C1.97215 13.3422 2.26127 13.8297 2.61002 14.2679C2.95976 14.7073 3.47115 15.2176 4.09109 15.8382L5.15229 14.7781ZM5.6457 9.95044C4.80048 10.1835 4.10396 10.3743 3.58296 10.5835C3.06341 10.792 2.57116 11.0732 2.28053 11.5778L3.58038 12.3264C3.615 12.2663 3.71693 12.146 4.1418 11.9755C4.56523 11.8055 5.16337 11.6394 6.04438 11.3965L5.6457 9.95044ZM3.46845 12.7505C3.46751 12.6016 3.50616 12.4553 3.58038 12.3264L2.28053 11.5778C2.07354 11.9372 1.96586 12.3452 1.96848 12.76L3.46845 12.7505ZM8.20777 19.9591C8.83164 20.5836 9.34464 21.0987 9.78647 21.4506C10.227 21.8015 10.7179 22.0922 11.3041 22.0931L11.3064 20.5931C11.2369 20.593 11.0814 20.5644 10.721 20.2773C10.3618 19.9912 9.91923 19.5499 9.26897 18.8989L8.20777 19.9591ZM12.6574 18.0022C12.4133 18.8897 12.2462 19.4924 12.0751 19.9188C11.9033 20.3467 11.7821 20.4487 11.7215 20.4833L12.465 21.7861C12.974 21.4956 13.2573 21.0004 13.4671 20.4775C13.6776 19.9532 13.8694 19.2516 14.1037 18.4001L12.6574 18.0022ZM11.3041 22.0931C11.7112 22.0937 12.1114 21.9879 12.465 21.7861L11.7215 20.4833C11.595 20.5555 11.4519 20.5933 11.3064 20.5931L11.3041 22.0931ZM18.541 8.56568C19.6045 9.63022 20.3403 10.3695 20.7917 10.9788C21.2353 11.5774 21.2863 11.8959 21.2321 12.1464L22.6982 12.4634C22.8881 11.5854 22.5382 10.8162 21.9969 10.0857C21.4635 9.36592 20.6305 8.53486 19.6022 7.50556L18.541 8.56568ZM17.8307 15.6964C19.1921 15.1849 20.294 14.773 21.0771 14.3384C21.8718 13.8973 22.5083 13.3416 22.6982 12.4634L21.2321 12.1464C21.178 12.3968 21.0001 12.6655 20.3491 13.0268C19.6865 13.3946 18.7112 13.7632 17.3032 14.2922L17.8307 15.6964ZM16.52 4.42014C15.4841 3.3832 14.6481 2.54353 13.9246 2.00638C13.1908 1.46165 12.4175 1.10912 11.5357 1.30367L11.8588 2.76845C12.1086 2.71335 12.4277 2.7633 13.0304 3.21075C13.6433 3.66579 14.3876 4.40801 15.4588 5.48026L16.52 4.42014ZM9.73087 6.74438C10.2525 5.32075 10.6161 4.33403 10.9812 3.66315C11.3402 3.00338 11.609 2.82357 11.8588 2.76845L11.5357 1.30367C10.654 1.49819 10.1005 2.14332 9.66362 2.94618C9.23278 3.73793 8.82688 4.85154 8.32243 6.22834L9.73087 6.74438ZM2.5306 22.5301L7.18383 17.8721L6.12263 16.812L1.4694 21.4699L2.5306 22.5301Z"})})}function Oi(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:i.jsx("path",{d:"M9 6l6 6-6 6"})})}function D0(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:i.jsx("path",{d:"M15 19l-7-7 7-7"})})}function Rd({isBypassed:r,...l}){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:r?i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M5 12h14"}),i.jsx("path",{d:"M12 5l7 7-7 7"})]}):i.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}function sb({nodeId:r,connectionHighlightMode:l,leftLineCount:o,rightLineCount:s,...u}){return i.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...u,children:[i.jsxs("defs",{children:[i.jsx("clipPath",{id:`node-rect-left-${r}`,children:i.jsx("rect",{x:"0",y:"0",width:"12",height:"24"})}),i.jsx("clipPath",{id:`node-rect-right-${r}`,children:i.jsx("rect",{x:"12",y:"0",width:"12",height:"24"})})]}),l==="off"?i.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",className:"text-gray-500"}):i.jsxs(i.Fragment,{children:[i.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",strokeLinejoin:"round",clipPath:`url(#node-rect-left-${r})`,className:l==="inputs"||l==="both"?"text-orange-500":"text-gray-500"}),i.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",strokeLinejoin:"round",clipPath:`url(#node-rect-right-${r})`,className:l==="outputs"||l==="both"?"text-orange-500":"text-gray-500"})]}),i.jsxs("g",{className:l==="inputs"||l==="both"?"text-orange-500":"text-gray-500",children:[o===1&&i.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),o===2&&i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"8.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),i.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"15.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),o>=3&&i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),i.jsx("line",{x1:"7",y1:"12",x2:"-2.743",y2:"6.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),i.jsx("line",{x1:"7",y1:"12",x2:"-2.743",y2:"17.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})]}),i.jsxs("g",{className:l==="outputs"||l==="both"?"text-orange-500":"text-gray-500",children:[s===1&&i.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),s===2&&i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"8.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),i.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"15.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),s>=3&&i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),i.jsx("line",{x1:"17",y1:"12",x2:"26.743",y2:"6.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),i.jsx("line",{x1:"17",y1:"12",x2:"26.743",y2:"17.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})]})]})}function ib(r){return i.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[i.jsxs("defs",{children:[i.jsx("clipPath",{id:"legend-trace-left",children:i.jsx("rect",{x:"0",y:"0",width:"12",height:"24"})}),i.jsx("clipPath",{id:"legend-trace-right",children:i.jsx("rect",{x:"12",y:"0",width:"12",height:"24"})})]}),i.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",clipPath:"url(#legend-trace-left)",className:"text-gray-400"}),i.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",clipPath:"url(#legend-trace-right)",className:"text-orange-500"}),i.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",className:"text-gray-400"}),i.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",className:"text-orange-500"})]})}function z0(r){return i.jsx("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.3",d:"m14.6685 5.7416.6425-2.57c.2028-.811-.4106-1.5967-1.2466-1.5967H2.5782a1.285 1.285 0 0 0-1.2467.9733l-.6425 2.57c-.2027.8111.4107 1.5968 1.2467 1.5968h11.4861a1.285 1.285 0 0 0 1.2467-.9734Zm0 7.7102.6425-2.5701c.2028-.811-.4106-1.5967-1.2466-1.5967h-5.061a1.285 1.285 0 0 0-1.2467.9734l-.6425 2.5701c-.2028.811.4106 1.5966 1.2466 1.5966h5.061a1.285 1.285 0 0 0 1.2467-.9733Zm-10.2802 0 .6425-2.5701c.2027-.811-.4107-1.5967-1.2467-1.5967H2.5782a1.285 1.285 0 0 0-1.2467.9734L.689 12.8285c-.2027.811.4107 1.5966 1.2467 1.5966h1.206a1.285 1.285 0 0 0 1.2466-.9733Z"})})}function ub(r){return i.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:i.jsx("path",{d:"M12 3v10m0 0l-4-4m4 4l4-4M5 19h14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function cb(r){return i.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M10.667 2.667c1.45.008 2.235.072 2.748.585C14 3.837 14 4.78 14 6.666v4c0 1.885 0 2.828-.585 3.414-.586.585-1.529.585-3.415.585H6c-1.886 0-2.829 0-3.414-.585C2 13.494 2 12.55 2 10.666v-4c0-1.886 0-2.829.586-3.414.512-.513 1.297-.577 2.747-.585",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),i.jsx("path",{d:"M5.333 2.333c0-.552.448-1 1-1h3.334c.552 0 1 .448 1 1v.667c0 .553-.448 1-1 1H6.333c-.552 0-1-.447-1-1v-.667Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),i.jsx("path",{d:"M8 6.667v4.666m0 0L5.667 9m2.333 2.333L10.333 9",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Ur(r){return i.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M3 7a2 2 0 0 1 2-2h4l2 2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),i.jsx("path",{d:"M3 9h18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function db(r){return i.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M5 4h12l3 3v13H4V5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),i.jsx("rect",{x:"7",y:"4",width:"8",height:"4",fill:"currentColor"}),i.jsx("rect",{x:"7",y:"13",width:"10",height:"6",rx:"1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]})}function fb(r){return i.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:[i.jsx("path",{d:"M12.667 14H3.333C2.597 14 2 13.403 2 12.667V3.333C2 2.597 2.597 2 3.333 2h7.334L14 5.333v7.334c0 .736-.597 1.333-1.333 1.333Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M11.333 14v-4H4.667v4M4.667 2v3.333h5.333",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function pb(r){return i.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[i.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),i.jsx("path",{d:"M12 2v3M12 19v3M4.22 4.22l2.12 2.12M17.66 17.66l2.12 2.12M2 12h3M19 12h3M4.22 19.78l2.12-2.12M17.66 6.34l2.12-2.12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"})]})}function mb(r){return i.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:i.jsx("path",{d:"M21 14.5A9 9 0 0 1 9.5 3a7 7 0 1 0 11.5 11.5Z",fill:"currentColor"})})}function hb(r){return i.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",fill:"currentColor",...r,children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"})})}function Sg(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}function gb(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function xb(r){return i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function yb(r){return i.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:i.jsx("path",{d:"M8 4h8M8 20h8M9 6h6l-1 4 1 4H9l1-4-1-4Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function vb({progress:r,radius:l=10,trackColor:o="#e5e7eb",progressColor:s="#3b82f6",...u}){const d=Math.min(100,Math.max(0,r)),p=2*Math.PI*l,h=p*(1-d/100);return i.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...u,children:[i.jsx("circle",{cx:"12",cy:"12",r:l,fill:"none",stroke:o,strokeWidth:"2"}),i.jsx("circle",{cx:"12",cy:"12",r:l,fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeDasharray:p,strokeDashoffset:h})]})}var lr=v0();function bb({open:r,onClose:l,side:o,title:s,children:u}){const d=b.useRef(null);return b.useEffect(()=>{if(!r)return;const p=h=>{h.key==="Escape"&&l()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[r,l]),b.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]),r?lr.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[2300]",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:l}),i.jsxs("div",{ref:d,className:`
          absolute top-0 bottom-0 w-[85%] max-w-sm bg-white shadow-xl
          flex flex-col overflow-hidden
          ${o==="left"?"left-0 animate-slide-in-left":"right-0 animate-slide-in-right"}
        `,style:{animation:`${o==="left"?"slideInLeft":"slideInRight"} 0.2s ease-out`},children:[s&&i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s}),i.jsx("button",{onClick:l,className:`w-10 h-10 flex items-center justify-center rounded-full
                         text-gray-500 hover:bg-gray-100 text-2xl`,children:""})]}),i.jsx("div",{className:"flex-1 overflow-auto p-4 overscroll-contain scroll-container",children:u})]}),i.jsx("style",{children:`
        @keyframes slideInLeft {
          from { transform: translateX(-100%); }
          to { transform: translateX(0); }
        }
        @keyframes slideInRight {
          from { transform: translateX(100%); }
          to { transform: translateX(0); }
        }
      `})]}),document.body):null}function Vo({title:r,onBack:l,rightElement:o}){return i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-sm font-semibold text-gray-500 uppercase tracking-wide",children:[i.jsx(D0,{className:"w-5 h-5 text-gray-400"}),i.jsx("span",{children:r})]}),o&&i.jsx("div",{className:"ml-auto",children:o})]})}function wb({onBack:r}){return i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx(Vo,{title:"Icon Legend",onBack:r}),i.jsxs("div",{className:"space-y-3 overflow-y-auto flex-1 pb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[i.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-500 text-white rounded-lg font-bold text-xs shadow-sm",children:"Run"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Run"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Execute current workflow"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[i.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-white border border-gray-200 rounded-lg text-gray-700 shadow-sm overflow-hidden",children:i.jsx(A0,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Queue / Follow"}),i.jsx("p",{className:"text-xs text-gray-500",children:"View queue & follow execution"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[i.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-yellow-500 text-white rounded-lg shadow-sm",children:i.jsx(Do,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Pinned Widget"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Quick access to pinned parameter"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[i.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full border border-gray-200 text-gray-700 font-bold",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Input"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Node input connection point"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[i.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full border border-gray-200 text-gray-700 font-bold",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Output"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Node output connection point"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[i.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:i.jsx(ib,{className:"w-6 h-6 overflow-visible"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Trace Connections"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Highlight connected nodes"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[i.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-500",children:i.jsx(Wn,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Fold / Unfold"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Collapse or expand node card"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[i.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:i.jsx(rf,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Bypass"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Skip node execution"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[i.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:i.jsx(dr,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Hide"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Hide node from view"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[i.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:i.jsx(Vr,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Show"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Make node visible again"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[i.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:i.jsx(Ad,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Pin widget"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Pin widget to bottom bar"})]})]})]})]})}function Uo({error:r,onDismiss:l}){return r?i.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[r,i.jsx("button",{onClick:l,className:"ml-2 text-red-500 font-medium",children:"Dismiss"})]}):null}function Sb({error:r,workflow:l,currentFilename:o,isDirty:s,loading:u,theme:d,menuSectionsOpen:p,fileInputRef:h,loadSectionRef:m,saveSectionRef:g,appearanceSectionRef:x,infoSectionRef:v,onDismissError:N,onFileChange:C,onLoadFromFile:S,onToggleSection:w,onOpenUserWorkflows:M,onOpenTemplates:j,onOpenPasteJson:E,onSave:D,onOpenSaveAs:_,onToggleTheme:L,onOpenLegend:R}){return i.jsxs(i.Fragment,{children:[i.jsx("input",{ref:h,type:"file",accept:".json",onChange:C,className:"hidden"}),i.jsx(Uo,{error:r,onDismiss:N}),i.jsxs("section",{ref:m,className:"mb-6",children:[i.jsxs("button",{type:"button",onClick:()=>w("load"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.load,children:[i.jsx("span",{children:"Load Workflow"}),i.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.load?"rotate-0":"-rotate-90"}`})]}),p.load&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("button",{onClick:M,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[i.jsx(_a,{className:"w-6 h-6 text-gray-600"}),i.jsx("span",{className:"font-medium text-gray-900",children:"My Workflows"}),i.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),i.jsxs("button",{onClick:j,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[i.jsx(z0,{className:"w-6 h-6 text-gray-600"}),i.jsx("span",{className:"font-medium text-gray-900",children:"Templates"}),i.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),i.jsxs("button",{onClick:E,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[i.jsx(cb,{className:"w-6 h-6 text-gray-600"}),i.jsx("span",{className:"font-medium text-gray-900",children:"Paste JSON"}),i.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),i.jsxs("button",{onClick:S,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[i.jsx(Ur,{className:"w-6 h-6 text-gray-600"}),i.jsx("span",{className:"font-medium text-gray-900",children:"From Device"})]})]})]}),i.jsxs("section",{ref:g,className:"mb-6",children:[i.jsxs("button",{type:"button",onClick:()=>w("save"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.save,children:[i.jsx("span",{children:"Save Workflow"}),i.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.save?"rotate-0":"-rotate-90"}`})]}),p.save&&i.jsxs("div",{className:"space-y-2",children:[o&&i.jsxs("button",{onClick:D,disabled:!l||!s||u,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                           rounded-xl text-left hover:bg-gray-50 min-h-[56px]
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[i.jsx(db,{className:"w-6 h-6 text-gray-600 shrink-0"}),i.jsxs("span",{className:"font-medium text-gray-900 truncate",children:["Save ",o.replace(".json","")]})]}),i.jsxs("button",{onClick:_,disabled:!l,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[i.jsx(fb,{className:"w-6 h-6 text-gray-600"}),i.jsx("span",{className:"font-medium text-gray-900",children:"Save As..."}),i.jsx("span",{className:"ml-auto text-gray-400",children:""})]})]})]}),i.jsx("div",{className:"border-t border-gray-200 mb-6"}),i.jsxs("section",{ref:x,className:"mb-6",children:[i.jsxs("button",{type:"button",onClick:()=>w("appearance"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.appearance,children:[i.jsx("span",{children:"Appearance"}),i.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.appearance?"rotate-0":"-rotate-90"}`})]}),p.appearance&&i.jsx("div",{className:"space-y-2",children:i.jsxs("button",{onClick:L,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[d==="dark"?i.jsx(mb,{className:"w-6 h-6 text-gray-600"}):i.jsx(pb,{className:"w-6 h-6 text-gray-600"}),i.jsx("span",{className:"font-medium text-gray-900",children:d==="dark"?"Dark mode":"Light mode"})]})})]}),i.jsxs("section",{ref:v,className:"mt-auto pt-6 border-t border-gray-200",children:[i.jsxs("button",{type:"button",onClick:()=>w("info"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.info,children:[i.jsx("span",{children:"About"}),i.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.info?"rotate-0":"-rotate-90"}`})]}),p.info&&i.jsxs("div",{className:"space-y-2 pb-4",children:[i.jsxs("a",{href:"https://github.com/cosmicbuffalo/comfyui-mobile-frontend",target:"_blank",rel:"noopener noreferrer",className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[i.jsx(hb,{className:"w-6 h-6 text-gray-600"}),i.jsx("span",{className:"font-medium text-gray-900",children:"Open in GitHub"}),i.jsx(Sg,{className:"w-4 h-4 ml-auto text-gray-400"})]}),i.jsxs("button",{onClick:R,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[i.jsx(gb,{className:"w-6 h-6 text-gray-600"}),i.jsx("span",{className:"font-medium text-gray-900",children:"Icon Legend"}),i.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),i.jsxs("a",{href:"https://github.com/cosmicbuffalo/comfyui-mobile-frontend/blob/main/USER_GUIDE.md",target:"_blank",rel:"noopener noreferrer",className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[i.jsx(xb,{className:"w-6 h-6 text-gray-600"}),i.jsx("span",{className:"font-medium text-gray-900",children:"User Manual"}),i.jsx(Sg,{className:"w-4 h-4 ml-auto text-gray-400"})]})]})]})]})}async function Nb(r){if(navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(r);return}catch{}const l=document.createElement("textarea");l.value=r,l.readOnly=!0,l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.opacity="0",document.body.appendChild(l),l.focus(),l.select(),l.setSelectionRange(0,l.value.length),document.execCommand("copy"),document.body.removeChild(l)}function Ng(r,l,o){const s=r.current;if(s){if(s.focus(),l)s.setSelectionRange(l.start,l.end);else if(o!==void 0){const u=o.length;s.setSelectionRange(u,u)}}}function jb(r){const l=r.current;if(!l)return;const s=l.closest('[data-textarea-root="true"]')?.querySelector('[data-textarea-header="true"]');s?s.scrollIntoView({block:"nearest",behavior:"auto"}):l.scrollIntoView({block:"nearest",behavior:"auto"})}function To({value:r,onChange:l,textareaRef:o,className:s=""}){const[u,d]=b.useState(!1),p=b.useRef(null),h=b.useRef(null),m=()=>{d(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>d(!1),900)},g=N=>{N.preventDefault()},x=async()=>{const N=o.current;N&&(h.current={start:N.selectionStart??0,end:N.selectionEnd??0});const C=o.current?.value??r;await Nb(C),requestAnimationFrame(()=>Ng(o,h.current||void 0)),m()},v=()=>{l(""),requestAnimationFrame(()=>{Ng(o,void 0,""),jb(o)})};return i.jsxs("div",{className:`flex items-center text-[11px] text-gray-500 ${s}`,children:[i.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-1 py-0.5 text-gray-600",onMouseDown:g,onClick:x,"aria-label":"Copy to clipboard",children:[u?i.jsx(Hl,{className:"w-3.5 h-3.5 text-green-500"}):i.jsx(eb,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Copy"})]}),i.jsx("span",{className:"text-gray-500/50",children:"|"}),i.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-1 py-0.5 text-red-600",onMouseDown:g,onClick:v,"aria-label":"Clear text",children:[i.jsx(tb,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Clear"})]})]})}function Cb({error:r,pastedJson:l,pasteTextareaRef:o,onBack:s,onDismissError:u,onChangeJson:d,onLoad:p}){return i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx(Vo,{title:"Paste JSON",onBack:s}),i.jsx(Uo,{error:r,onDismiss:u}),i.jsxs("div",{className:"flex-1 flex flex-col space-y-4 overflow-hidden",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Paste your workflow JSON below."}),i.jsxs("div",{className:"group","data-textarea-root":"true",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1","data-textarea-header":"true",children:[i.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Workflow JSON"}),i.jsx(To,{value:l,onChange:d,textareaRef:o,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),i.jsx("textarea",{ref:o,value:l,onChange:h=>d(h.target.value),placeholder:'{"last_node_id": ...}',className:"w-full flex-1 p-3 border border-gray-300 rounded-lg font-mono text-xs resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{onClick:s,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 min-h-[48px]",children:"Cancel"}),i.jsx("button",{onClick:p,disabled:!l.trim(),className:`flex-1 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600
                       disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px]`,children:"Load"})]})]})]})}function kb({error:r,loading:l,workflow:o,saveFilenameInput:s,onBack:u,onDismissError:d,onSaveFilenameChange:p,onSaveAs:h,onDownload:m}){return i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx(Vo,{title:"Save Workflow",onBack:u}),i.jsx(Uo,{error:r,onDismiss:d}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-xl",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Save to ComfyUI server:"}),i.jsx("input",{type:"text",value:s,onChange:g=>p(g.target.value),placeholder:"Enter filename (e.g., my_workflow.json)",className:"w-full p-3 border border-gray-300 rounded-lg mb-3"}),i.jsx("button",{onClick:h,disabled:!o||!s.trim()||l,className:`w-full py-3 bg-blue-500 text-white rounded-lg font-medium
                       disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px]`,children:l?"Saving...":"Save As"})]}),i.jsxs("button",{onClick:m,disabled:!o,className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                     rounded-xl text-left hover:bg-gray-50 min-h-[56px]
                     disabled:opacity-50 disabled:cursor-not-allowed`,children:[i.jsx(ub,{className:"w-6 h-6 text-gray-600"}),i.jsx("span",{className:"font-medium text-gray-900",children:"Download to Device"})]})]})]})}const Mb={sm:"w-4 h-4 border-2",md:"w-6 h-6 border-2",lg:"w-10 h-10 border-4"},Ob={blue:"border-blue-500 border-t-transparent",gray:"border-gray-200 border-t-gray-500"};function lf({size:r="md",color:l="blue",className:o=""}){return i.jsx("div",{className:`animate-spin rounded-full ${Mb[r]} ${Ob[l]} ${o}`})}function Eb({error:r,loading:l,templates:o,onBack:s,onDismissError:u,onLoadTemplate:d}){const[p,h]=b.useState(""),m=Object.entries(o),g=p.toLowerCase(),x=m.map(([N,C])=>[N,C.filter(S=>S.toLowerCase().includes(g))]).filter(([,N])=>N.length>0),v=m.length>0;return i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx(Vo,{title:"Templates",onBack:s}),i.jsx(Uo,{error:r,onDismiss:u}),!l&&v&&i.jsxs("div",{className:"relative py-2",children:[i.jsx("input",{type:"text",value:p,onChange:N=>h(N.target.value),placeholder:"Search",className:`w-full px-3 py-2 pr-9 bg-white border border-gray-200 rounded-lg
                       text-sm text-gray-900 placeholder-gray-400
                       focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`}),p&&i.jsx("button",{onClick:()=>h(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",children:i.jsx(Gl,{className:"w-4 h-4"})})]}),l?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(lf,{})}):v?x.length===0?i.jsx("p",{className:"text-gray-500 text-center py-8",children:"No matching templates"}):i.jsx("div",{className:"space-y-4 overflow-y-auto flex-1",children:x.map(([N,C])=>i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-2",children:N}),i.jsx("div",{className:"space-y-2",children:C.map(S=>i.jsxs("button",{onClick:()=>d(N,S),className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                               rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[i.jsx(z0,{className:"w-5 h-5 text-gray-600"}),i.jsx("span",{className:"font-medium text-gray-900 truncate",children:S.replace(/\.json$/,"")})]},S))})]},N))}):i.jsx("p",{className:"text-gray-500 text-center py-8",children:"No templates available"})]})}function Tb(r){const l=new Date,o=new Date(r*1e3),s=l.getTime()-o.getTime(),u=Math.floor(s/(1e3*60*60*24)),d=String(o.getMonth()+1),p=String(o.getDate()),h=String(o.getFullYear()).slice(-2),m=`${d}/${p}/${h}`;return u===0?`${m} (Today)`:u===1?`${m} (Yesterday)`:`${m} (${u} days ago)`}function Lb({error:r,loading:l,userWorkflows:o,onBack:s,onDismissError:u,onLoadWorkflow:d}){const[p,h]=b.useState(""),[m,g]=b.useState("name"),x=o.filter(N=>N.name.toLowerCase().includes(p.toLowerCase())).sort((N,C)=>m==="name"?N.name.localeCompare(C.name):(C.modified??0)-(N.modified??0)),v=i.jsxs("button",{onClick:()=>g(m==="name"?"date":"name"),className:"flex items-center gap-0.5 text-xs font-semibold text-blue-500",children:[i.jsx("span",{children:m==="name"?"NAME":"DATE"}),i.jsx("span",{children:""})]});return i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx(Vo,{title:"My Workflows",onBack:s,rightElement:v}),i.jsx(Uo,{error:r,onDismiss:u}),!l&&o.length>0&&i.jsxs("div",{className:"relative py-2",children:[i.jsx("input",{type:"text",value:p,onChange:N=>h(N.target.value),placeholder:"Search",className:`w-full px-3 py-2 pr-9 bg-white border border-gray-200 rounded-lg
                       text-sm text-gray-900 placeholder-gray-400
                       focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`}),p&&i.jsx("button",{onClick:()=>h(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",children:i.jsx(Gl,{className:"w-4 h-4"})})]}),l?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(lf,{})}):o.length===0?i.jsx("p",{className:"text-gray-500 text-center py-8",children:"No saved workflows yet"}):x.length===0?i.jsx("p",{className:"text-gray-500 text-center py-8",children:"No matching workflows"}):i.jsx("div",{className:"space-y-2 overflow-y-auto flex-1",children:x.map(N=>i.jsxs("button",{onClick:()=>d(N.name),className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[i.jsx(_a,{className:"w-5 h-5 text-gray-600"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-gray-900 truncate",children:N.name.replace(/\.json$/,"")}),N.modified&&i.jsx("p",{className:"text-xs text-gray-500",children:Tb(N.modified)})]})]},N.path))})]})}const Ei=ar()(Yr(r=>({theme:"dark",setTheme:l=>{r({theme:l})},toggleTheme:()=>{r(l=>({theme:l.theme==="dark"?"light":"dark"}))}}),{name:"theme-storage",storage:$r(()=>localStorage)}));function _b({open:r,onClose:l}){const o=te(oe=>oe.loadWorkflow),s=te(oe=>oe.workflow),u=te(oe=>oe.currentFilename),d=te(oe=>oe.originalWorkflow),p=te(oe=>oe.setSavedWorkflow),h=Ei(oe=>oe.theme),m=Ei(oe=>oe.toggleTheme),g=b.useRef(null),x=!!(s&&d&&JSON.stringify(s)!==JSON.stringify(d)),v=b.useRef(null),[N,C]=b.useState(null),[S,w]=b.useState("menu"),[M,j]=b.useState([]),[E,D]=b.useState({}),[_,L]=b.useState(!1),[R,A]=b.useState(u||""),[B,G]=b.useState(""),[U,W]=b.useState({load:!0,save:!0,appearance:!0,info:!0}),J=b.useRef(null),xe=b.useRef(null),ae=b.useRef(null),le=b.useRef(null),z=b.useRef(U);b.useEffect(()=>{const oe=z.current,ve=U;!oe.load&&ve.load?setTimeout(()=>J.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!oe.save&&ve.save?setTimeout(()=>xe.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!oe.appearance&&ve.appearance?setTimeout(()=>ae.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!oe.info&&ve.info&&setTimeout(()=>le.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100),z.current=ve},[U]),b.useEffect(()=>{r||(w("menu"),C(null),A(u||""),G(""),W({load:!0,save:!0,appearance:!0,info:!0}))},[r,u]),b.useEffect(()=>{S==="userWorkflows"&&(L(!0),c1().then(j).catch(oe=>C(oe.message)).finally(()=>L(!1)))},[S]),b.useEffect(()=>{S==="templates"&&(L(!0),f1().then(D).catch(oe=>C(oe.message)).finally(()=>L(!1)))},[S]);const Y=oe=>{"vibrate"in navigator&&navigator.vibrate(oe)},de=()=>{v.current?.click()},be=async oe=>{const ve=oe.target.files?.[0];if(ve){try{const Oe=await ve.text(),Qe=JSON.parse(Oe);if(!Qe.nodes||!Array.isArray(Qe.nodes))throw new Error("Invalid workflow: missing nodes array");o(Qe,ve.name),C(null),l(),Y(10)}catch(Oe){C(Oe instanceof Error?Oe.message:"Failed to load workflow")}v.current&&(v.current.value="")}},ye=async oe=>{try{L(!0);const ve=await j0(oe);o(ve,oe,{fresh:!0,source:{type:"user",filename:oe}}),C(null),l(),Y(10)}catch(ve){C(ve instanceof Error?ve.message:"Failed to load workflow")}finally{L(!1)}},T=async(oe,ve)=>{try{L(!0);const Oe=await C0(oe,ve);o(Oe,`${oe}/${ve}`,{fresh:!0,source:{type:"template",moduleName:oe,templateName:ve}}),C(null),l(),Y(10)}catch(Oe){C(Oe instanceof Error?Oe.message:"Failed to load template")}finally{L(!1)}},I=async oe=>{if(!s)return;const ve=oe.endsWith(".json")?oe:`${oe}.json`;try{L(!0),await d1(ve,s),p(s,ve),C(null),l(),Y(10)}catch(Oe){C(Oe instanceof Error?Oe.message:"Failed to save workflow")}finally{L(!1)}},O=()=>{u?I(u):w("save")},F=()=>{A(u||""),w("save")},X=()=>{R.trim()?I(R):C("Please enter a filename.")},pe=()=>{if(!s)return;const oe=JSON.stringify(s,null,2),ve=new Blob([oe],{type:"application/json"}),Oe=URL.createObjectURL(ve),Qe=document.createElement("a");Qe.href=Oe,Qe.download=`${u||`workflow-${Date.now()}`}.json`,Qe.click(),URL.revokeObjectURL(Oe),Y(10),l()},ee=()=>{try{const oe=JSON.parse(B);if(!oe.nodes||!Array.isArray(oe.nodes))throw new Error("Invalid workflow: missing nodes array");const ve=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});o(oe,`Pasted workflow (${ve})`),C(null),l(),Y(10),G("")}catch(oe){C(oe instanceof Error?oe.message:"Failed to parse JSON")}};return i.jsxs(bb,{open:r,onClose:l,side:"left",title:"ComfyUI Mobile",children:[S==="menu"&&i.jsx(Sb,{error:N,workflow:s,currentFilename:u,isDirty:x,loading:_,theme:h,menuSectionsOpen:U,fileInputRef:v,loadSectionRef:J,saveSectionRef:xe,appearanceSectionRef:ae,infoSectionRef:le,onDismissError:()=>C(null),onFileChange:be,onLoadFromFile:de,onToggleSection:oe=>W(ve=>({...ve,[oe]:!ve[oe]})),onOpenUserWorkflows:()=>w("userWorkflows"),onOpenTemplates:()=>w("templates"),onOpenPasteJson:()=>w("pasteJson"),onSave:O,onOpenSaveAs:F,onToggleTheme:m,onOpenLegend:()=>w("aboutLegend")}),S==="userWorkflows"&&i.jsx(Lb,{error:N,loading:_,userWorkflows:M,onBack:()=>w("menu"),onDismissError:()=>C(null),onLoadWorkflow:ye}),S==="templates"&&i.jsx(Eb,{error:N,loading:_,templates:E,onBack:()=>w("menu"),onDismissError:()=>C(null),onLoadTemplate:T}),S==="save"&&i.jsx(kb,{error:N,loading:_,workflow:s,saveFilenameInput:R,onBack:()=>w("menu"),onDismissError:()=>C(null),onSaveFilenameChange:A,onSaveAs:X,onDownload:pe}),S==="pasteJson"&&i.jsx(Cb,{error:N,pastedJson:B,pasteTextareaRef:g,onBack:()=>w("menu"),onDismissError:()=>C(null),onChangeJson:G,onLoad:ee}),S==="aboutLegend"&&i.jsx(wb,{onBack:()=>w("menu")})]})}function Gi({open:r,onDismiss:l,triggerRef:o,contentRef:s,closeOnScroll:u=!0}){b.useEffect(()=>{if(!r)return;const d=h=>{const m=h.target;o.current&&m&&o.current.contains(m)||s.current&&m&&s.current.contains(m)||l()},p=()=>{u&&l()};return document.addEventListener("mousedown",d),u&&document.addEventListener("scroll",p,!0),()=>{document.removeEventListener("mousedown",d),u&&document.removeEventListener("scroll",p,!0)}},[r,l,o,s,u])}function Ab({open:r,onClose:l,onConfirm:o}){if(!r)return null;const s=async()=>{await o(),l()};return i.jsx("div",{id:"clear-history-confirm-overlay",className:"fixed inset-0 z-[1500] bg-black/50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true",children:i.jsxs("div",{id:"clear-history-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:u=>u.stopPropagation(),children:[i.jsx("div",{id:"clear-history-title",className:"text-gray-900 text-base font-semibold",children:"Clear history?"}),i.jsx("div",{id:"clear-history-description",className:"text-gray-600 text-sm mt-1",children:"This will permanently remove all completed generations from history. Generated files will still be present in your server's output folder."}),i.jsxs("div",{id:"clear-history-actions",className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:l,children:"Cancel"}),i.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:s,children:"Clear history"})]})]})})}function Rb({open:r,buttonRef:l,menuRef:o,onToggle:s,onClose:u,onGoToWorkflow:d,onOpenClearHistoryConfirm:p}){const h=lt(I=>I.setQueueItemExpanded),m=lt(I=>I.queueItemExpanded),g=lt(I=>I.showQueueMetadata),x=lt(I=>I.toggleShowQueueMetadata),v=lt(I=>I.previewVisibility),N=lt(I=>I.setPreviewVisibility),C=lt(I=>I.previewVisibilityDefault),S=lt(I=>I.setPreviewVisibilityDefault),w=lt(I=>I.pending),M=lt(I=>I.running),j=lt(I=>I.clearQueue),E=Tn(I=>I.history),D=Tn(I=>I.clearEmptyItems),_=w.length>0,L=E.length>0,R=E.some(I=>I.outputs.images.length===0),A=w.length+M.length+E.length>0,B=b.useMemo(()=>{const I=new Set;return w.forEach(O=>I.add(O.prompt_id)),M.forEach(O=>I.add(O.prompt_id)),E.forEach(O=>{O.prompt_id&&I.add(String(O.prompt_id))}),Array.from(I)},[w,M,E]),G=b.useMemo(()=>B.some(I=>m[I]===!1),[B,m]),U=b.useMemo(()=>B.some(I=>m[I]!==!1),[B,m]),W=b.useMemo(()=>{const I=new Set;return E.forEach(O=>{(O.outputs?.images??[]).some(pe=>pe.type!=="output")&&O.prompt_id&&I.add(String(O.prompt_id))}),Array.from(I)},[E]),J=A||W.length>0||C,xe=W.length>0?W.every(I=>v[I]??C):C,ae=()=>{d(),u()},le=async()=>{await j(),u()},z=()=>{B.forEach(I=>h(I,!1)),u()},Y=()=>{B.forEach(I=>h(I,!0)),u()},de=()=>{x(),u()},be=()=>{const I=!xe;S(I),W.forEach(O=>N(O,I)),u()},ye=async()=>{await D(),u()},T=()=>{u(),p()};return i.jsxs("div",{id:"queue-menu-container",className:"relative",children:[i.jsx("button",{ref:l,onClick:s,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Queue options",children:i.jsx(wl,{className:"w-5 h-5 -rotate-90"})}),r?i.jsxs("div",{id:"queue-options-dropdown",ref:o,className:"absolute right-0 top-11 z-50 w-48 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ae,children:[i.jsx(Ci,{className:"w-3 h-3 text-gray-500 rotate-180"}),"Go to workflow"]}),_&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:le,children:[i.jsx(P1,{className:"w-4 h-4 text-gray-500"}),"Cancel all pending"]}),U&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:z,children:[i.jsx(Il,{className:"w-7 h-7 -ml-1 text-gray-500"}),"Fold all"]}),G&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Y,children:[i.jsx(Wn,{className:"w-7 h-7 -ml-1 text-gray-500"}),"Unfold all"]}),L&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:de,children:[i.jsx(L0,{className:"w-4 h-4 text-gray-500"}),g?"Hide metadata":"Show metadata"]}),J&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:be,children:[xe?i.jsx(dr,{className:"w-4 h-4 text-gray-500"}):i.jsx(Vr,{className:"w-4 h-4 text-gray-500"}),xe?"Hide previews":"Show previews"]}),R&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-gray-600",onClick:ye,children:[i.jsx(Gr,{className:"w-4 h-4"}),"Clear empty items"]}),L&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:T,children:[i.jsx(Gr,{className:"w-4 h-4"}),"Clear history"]})]}):null]})}function Db(){const[r,l]=b.useState(!1),[o,s]=b.useState(!1),u=Ln(m=>m.setCurrentPanel),d=Tn(m=>m.clearHistory),p=b.useRef(null),h=b.useRef(null);return Gi({open:r,onDismiss:()=>l(!1),triggerRef:p,contentRef:h,closeOnScroll:!1}),i.jsxs(i.Fragment,{children:[i.jsx(Rb,{open:r,buttonRef:p,menuRef:h,onToggle:()=>l(m=>!m),onClose:()=>l(!1),onGoToWorkflow:()=>u("workflow"),onOpenClearHistoryConfirm:()=>s(!0)}),i.jsx(Ab,{open:o,onClose:()=>s(!1),onConfirm:d})]})}function zb({open:r,buttonRef:l,menuRef:o,onToggle:s,onClose:u,onGoToWorkflow:d}){const p=Nt(_=>_.source),h=Nt(_=>_.viewMode),m=Nt(_=>_.showHidden),g=Nt(_=>_.setSource),x=Nt(_=>_.setViewMode),v=Nt(_=>_.toggleShowHidden),N=Nt(_=>_.toggleSelectionMode),C=Nt(_=>_.setNewFolderModalOpen),S=()=>{C(!0),u()},w=()=>{g(p==="output"?"input":"output"),u()},M=()=>{d(),u()},j=()=>{N(),u()},E=()=>{v(),u()},D=()=>{x(h==="grid"?"list":"grid"),u()};return i.jsxs("div",{id:"outputs-topbar-actions",className:"relative flex items-center gap-1",children:[i.jsx("button",{ref:l,onClick:s,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Outputs options",children:i.jsx(wl,{className:"w-5 h-5 -rotate-90"})}),r?i.jsxs("div",{id:"outputs-options-dropdown",ref:o,className:"absolute right-0 top-11 z-50 w-48 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:w,children:[i.jsx(gi,{className:"w-4 h-4 text-gray-500"}),p==="output"?"Switch to inputs":"Switch to outputs"]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:M,children:[i.jsx(Ci,{className:"w-3 h-3 text-gray-500"}),"Go to workflow"]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:j,children:[i.jsx(Hl,{className:"w-4 h-4 text-gray-500"}),"Select"]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:S,children:[i.jsx(Ur,{className:"w-4 h-4 text-gray-500"}),"New folder"]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:E,children:[m?i.jsx(dr,{className:"w-4 h-4 text-gray-500"}):i.jsx(Vr,{className:"w-4 h-4 text-gray-500"}),m?"Hide hidden files":"Show hidden files"]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:D,children:[h==="grid"?i.jsx(F1,{className:"w-4 h-4 text-gray-500"}):i.jsx(ob,{className:"w-4 h-4 text-gray-500"}),h==="grid"?"List view":"Grid view"]})]}):null]})}function Bb(){const[r,l]=b.useState(!1),o=Ln(d=>d.setCurrentPanel),s=b.useRef(null),u=b.useRef(null);return Gi({open:r,onDismiss:()=>l(!1),triggerRef:s,contentRef:u,closeOnScroll:!1}),i.jsx(zb,{open:r,buttonRef:s,menuRef:u,onToggle:()=>l(d=>!d),onClose:()=>l(!1),onGoToWorkflow:()=>o("workflow")})}function Ib({action:r,onCancel:l,onContinue:o}){return r?i.jsx("div",{id:"dirty-confirm-overlay",className:"fixed inset-0 z-[1500] bg-black/50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true",children:i.jsxs("div",{id:"dirty-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:s=>s.stopPropagation(),children:[i.jsx("div",{id:"dirty-confirm-title",className:"text-gray-900 text-base font-semibold",children:"Unsaved changes"}),i.jsx("div",{id:"dirty-confirm-description",className:"text-gray-600 text-sm mt-1",children:"You have unsaved changes in the current workflow. Continue without saving?"}),i.jsxs("div",{id:"dirty-confirm-actions",className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:l,children:"Cancel"}),i.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:()=>o(r),children:"Continue"})]})]})}):null}const Hb=5;function Vb(r){const l={};for(const o of r)l[o.id]={mode:o.mode,flags:o.flags?{collapsed:!!o.flags.collapsed}:void 0,widgets_values:o.widgets_values};return l}function Ub(r,l,o,s,u,d){return{nodes:Vb(r.nodes),seedModes:{...l},collapsedGroups:{...o},hiddenGroups:{...s},collapsedSubgraphs:{...u},hiddenSubgraphs:{...d}}}function jg(r,l){if(!r)return[];if(!l.length)return[];const o=new Set(r.nodes.map(s=>s.id));return l.filter(s=>o.has(s))}function Cg(r,l){if(r===l)return!0;if(r.length!==l.length)return!1;for(let o=0;o<r.length;o+=1)if(r[o]!==l[o])return!1;return!0}const bn=ar()(Yr((r,l)=>({bookmarkedNodeIds:[],bookmarkBarSide:"right",bookmarkBarTop:null,bookmarkRepositioningActive:!1,toggleNodeBookmark:o=>{const{bookmarkedNodeIds:s}=l(),{currentWorkflowKey:u,savedWorkflowStates:d,workflow:p,collapsedGroups:h,hiddenGroups:m,collapsedSubgraphs:g,hiddenSubgraphs:x}=te.getState(),v=Sn.getState().seedModes,C=s.includes(o)?s.filter(S=>S!==o):s.length>=Hb?s:[...s,o];if(C!==s){if(u){let w=d[u];!w&&p&&(w=Ub(p,v,h,m,g,x)),w&&te.setState({savedWorkflowStates:{...d,[u]:{...w,bookmarkedNodeIds:[...C]}}})}r({bookmarkedNodeIds:C})}},clearNodeBookmarks:()=>{const{currentWorkflowKey:o,savedWorkflowStates:s}=te.getState();if(o&&s[o]){const u=s[o];te.setState({savedWorkflowStates:{...s,[o]:{...u,bookmarkedNodeIds:[]}}})}r({bookmarkedNodeIds:[]})},setBookmarkBarPosition:o=>{r(s=>({bookmarkBarSide:o.side??s.bookmarkBarSide,bookmarkBarTop:o.top??s.bookmarkBarTop}))},setBookmarkRepositioningActive:o=>{r({bookmarkRepositioningActive:o})}}),{name:"bookmark-bar-storage",storage:$r(()=>localStorage),partialize:r=>({bookmarkBarSide:r.bookmarkBarSide,bookmarkBarTop:r.bookmarkBarTop})}));function B0(){const{workflow:r,currentWorkflowKey:l,savedWorkflowStates:o}=te.getState(),{bookmarkedNodeIds:s}=bn.getState();if(!r){s.length>0&&bn.setState({bookmarkedNodeIds:[]});return}if(!l){const h=jg(r,s);Cg(s,h)||bn.setState({bookmarkedNodeIds:h});return}const d=o[l]?.bookmarkedNodeIds??[],p=jg(r,d);Cg(s,p)||bn.setState({bookmarkedNodeIds:p})}te.subscribe(()=>{B0()});B0();function Gb({open:r,buttonRef:l,menuRef:o,onToggle:s,onClose:u,onGoToQueue:d,onGoToOutputs:p,onHandleDirtyAction:h}){const m=te(P=>P.workflow),g=te(P=>P.nodeTypes),x=te(P=>P.setNodeFold),v=te(P=>P.setGroupCollapsed),N=te(P=>P.setSubgraphCollapsed),C=te(P=>P.setNodeHidden),S=te(P=>P.showAllHiddenNodes),w=te(P=>P.manuallyHiddenNodes),M=te(P=>P.hiddenGroups),j=te(P=>P.hiddenSubgraphs),E=bn(P=>P.bookmarkedNodeIds),D=bn(P=>P.clearNodeBookmarks),_=te(P=>P.collapsedGroups),L=te(P=>P.collapsedSubgraphs),R=te(P=>P.workflowSource),A=te(P=>P.loadWorkflow),B=te(P=>P.searchOpen),G=te(P=>P.setSearchOpen),U=te(P=>P.setSearchQuery),W=te(P=>P.connectionButtonsVisible),J=te(P=>P.toggleConnectionButtonsVisible),xe=Tn(P=>P.history),ae=!!m,le=b.useMemo(()=>m?.nodes.map(P=>P.id)??[],[m]),z=b.useMemo(()=>{if(!m)return[];const P=m.groups?.map(ot=>ot.id)??[],ft=m.definitions?.subgraphs?.flatMap(ot=>ot.groups?.map(tt=>tt.id)??[])??[];return[...P,...ft]},[m]),Y=b.useMemo(()=>m?.definitions?.subgraphs?.map(P=>P.id)??[],[m]),de=b.useMemo(()=>m?.nodes.filter(P=>P.mode===4).map(P=>P.id)??[],[m]),be=b.useMemo(()=>!m||!g?[]:m.nodes.filter(P=>{if(P.type==="Fast Groups Bypasser (rgthree)")return!1;const ft=Jd(g,P).filter(tt=>!tt.connected),ot=ef(g,P).filter(tt=>!tt.connected);return ft.length===0&&ot.length===0}).map(P=>P.id),[m,g]),ye=de.length,T=be.length,I=b.useMemo(()=>Object.values(w).filter(Boolean).length,[w]),O=b.useMemo(()=>de.filter(P=>w[P]).length,[de,w]),F=b.useMemo(()=>be.filter(P=>w[P]).length,[be,w]),X=b.useMemo(()=>m?m.nodes.filter(P=>!w[P.id]):[],[m,w]),pe=b.useMemo(()=>X.some(P=>P.flags?.collapsed),[X]),ee=b.useMemo(()=>X.some(P=>!P.flags?.collapsed),[X]),oe=b.useMemo(()=>z.some(P=>_[P]??!0),[z,_]),ve=b.useMemo(()=>z.some(P=>_[P]===!1),[z,_]),Oe=b.useMemo(()=>Y.some(P=>L[P]??!0),[Y,L]),Qe=b.useMemo(()=>Y.some(P=>L[P]===!1),[Y,L]),ne=pe||oe||Oe,Ve=ee||ve||Qe,Ne=b.useMemo(()=>I>0||Object.values(M).some(Boolean)?!0:Object.values(j).some(Boolean),[I,M,j]),[Le,Ke]=b.useState(!1),Ge=()=>{u()},we=()=>{d(),Ge()},Ye=()=>{p(),Ge()},he=()=>{U(""),G(!0),Ge()},Re=()=>{le.forEach(P=>x(P,!0)),z.forEach(P=>v(P,!0)),Y.forEach(P=>N(P,!0)),Ge()},Ze=()=>{le.forEach(P=>x(P,!1)),z.forEach(P=>v(P,!1)),Y.forEach(P=>N(P,!1)),Ge()},gt=()=>{D(),Ge()},Be=async()=>{if(!(!R||R.type!=="user")){try{const P=await j0(R.filename);A(P,R.filename,{fresh:!0,source:R})}catch(P){console.error("Failed to reload workflow:",P)}Ge()}},Se=async()=>{if(!(!R||R.type!=="template")){try{const P=await C0(R.moduleName,R.templateName);A(P,`${R.moduleName}/${R.templateName}`,{fresh:!0,source:R})}catch(P){console.error("Failed to reload template:",P)}Ge()}},_e=()=>{if(!R||R.type!=="history")return;const P=xe.find(ft=>ft.prompt_id===R.promptId);P?.workflow&&A(P.workflow,`history-${R.promptId}.json`,{source:R}),Ge()},Xe=()=>{h("clearWorkflowCache")},We=()=>{h("unload")},Pe=()=>{h("clearAllCache")};return i.jsxs("div",{id:"workflow-menu-container",className:"relative",children:[i.jsx("button",{ref:l,onClick:s,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Workflow options",children:i.jsx(wl,{className:"w-5 h-5 -rotate-90"})}),r?i.jsxs("div",{id:"workflow-options-dropdown",ref:o,className:"absolute right-0 top-11 z-50 w-52 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:we,children:[i.jsx(Ci,{className:"w-3 h-3 text-gray-500"}),"Go to queue"]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ye,children:[i.jsx(Ci,{className:"w-3 h-3 text-gray-500 rotate-180"}),"Go to outputs"]}),!B&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:he,children:[i.jsx(ab,{className:"w-4 h-4 text-gray-500"}),"Search"]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:()=>{Ke(!0),Ge()},children:[i.jsx(Vr,{className:"w-4 h-4 text-gray-500"}),"Hide / Show"]}),Ve&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Re,children:[i.jsx(Il,{className:"w-6 h-6 -ml-1 text-gray-500"}),"Fold all"]}),ne&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ze,children:[i.jsx(Wn,{className:"w-6 h-6 -ml-1 text-gray-500"}),"Unfold all"]}),E.length>0&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:gt,children:[i.jsx(Gr,{className:"w-4 h-4 text-gray-500"}),"Clear bookmarks"]}),R&&(R.type==="user"?i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Be,children:[i.jsx(gi,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):R.type==="template"?i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Se,children:[i.jsx(gi,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):R.type==="history"&&xe.find(P=>P.prompt_id===R.promptId)?.workflow?i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:_e,children:[i.jsx(gi,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):null),ae&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Xe,children:[i.jsx(Gr,{className:"w-4 h-4 text-gray-500"}),"Clear workflow cache"]}),ae&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:We,children:[i.jsx(Z1,{className:"w-4 h-4"}),"Unload workflow"]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:Pe,children:[i.jsx(Gr,{className:"w-4 h-4"}),"Clear all cache"]})]}):null,Le&&i.jsx("div",{className:"fixed inset-0 z-[2150] bg-black/50 flex items-center justify-center p-4",onClick:()=>Ke(!1),role:"dialog","aria-modal":"true",children:i.jsxs("div",{className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:P=>P.stopPropagation(),children:[i.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:"Hide / Show"}),i.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[T>0&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-4 py-3 text-sm hover:bg-gray-50",onClick:()=>{F<T?be.forEach(P=>C(P,!0)):be.forEach(P=>C(P,!1))},children:[F<T?i.jsx(dr,{className:"w-4 h-4 text-gray-500"}):i.jsx(Vr,{className:"w-4 h-4 text-gray-500"}),F<T?`Hide static nodes (${T})`:`Show static nodes (${T})`]}),ye>0&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-4 py-3 text-sm hover:bg-gray-50",onClick:()=>{O>0?de.forEach(P=>C(P,!1)):de.forEach(P=>C(P,!0))},children:[O>0?i.jsx(Vr,{className:"w-4 h-4 text-gray-500"}):i.jsx(dr,{className:"w-4 h-4 text-gray-500"}),O>0?`Show bypassed nodes (${ye})`:`Hide bypassed nodes (${ye})`]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-4 py-3 text-sm hover:bg-gray-50",onClick:J,children:[W?i.jsx(dr,{className:"w-4 h-4 text-gray-500"}):i.jsx(Vr,{className:"w-4 h-4 text-gray-500"}),W?"Hide connection buttons":"Show connection buttons"]}),Ne&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-4 py-3 text-sm hover:bg-gray-50",onClick:S,children:[i.jsx(Vr,{className:"w-4 h-4 text-gray-500"}),"Show all hidden nodes"]})]}),i.jsx("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end",children:i.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg",onClick:()=>Ke(!1),children:"Cancel"})})]})})]})}function qb(){const[r,l]=b.useState(null),[o,s]=b.useState(null),u=te(j=>j.workflow),d=te(j=>j.originalWorkflow),p=te(j=>j.clearWorkflowCache),h=te(j=>j.unloadWorkflow),m=Ln(j=>j.setCurrentPanel),g=te(j=>j.workflowLoadedAt),x=b.useRef(null),v=b.useRef(null),N=r!==null&&r===g,C=b.useMemo(()=>!!(u&&d&&JSON.stringify(u)!==JSON.stringify(d)),[u,d]);Gi({open:N,onDismiss:()=>l(null),triggerRef:x,contentRef:v,closeOnScroll:!1});const S=async()=>{if(localStorage.clear(),sessionStorage.clear(),"caches"in window){const j=await caches.keys();await Promise.all(j.map(E=>caches.delete(E)))}document.cookie.split(";").forEach(j=>{const[E]=j.split("=");document.cookie=`${E.trim()}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}),window.location.reload()},w=j=>{if(C){l(null),s(j);return}j==="unload"?h():j==="clearWorkflowCache"?p():S(),l(null)},M=async j=>{s(null),j==="unload"?h():j==="clearWorkflowCache"?p():j==="clearAllCache"&&await S()};return i.jsxs(i.Fragment,{children:[i.jsx(Gb,{open:N,buttonRef:x,menuRef:v,onToggle:()=>l(N?null:g),onClose:()=>l(null),onGoToQueue:()=>m("queue"),onGoToOutputs:()=>m("outputs"),onHandleDirtyAction:w}),i.jsx(Ib,{action:o,onCancel:()=>s(null),onContinue:M})]})}function Wb(r){return r==="queue"?['[data-queue-list="true"]','[data-node-list="true"]']:['[data-node-list="true"]','[data-queue-list="true"]']}function Fb({mode:r="workflow"}){const l=b.useRef(null),o=b.useRef(0),s=_d(E=>E.appMenuOpen),u=_d(E=>E.setAppMenuOpen),d=b.useCallback(()=>{const E=Date.now(),D=E-o.current;if(o.current=E,D<300){if(r==="workflow"){window.dispatchEvent(new Event("workflow-scroll-to-top")),"vibrate"in navigator&&navigator.vibrate(10);return}if(r==="outputs"){const L=document.querySelector("#outputs-content-container");L&&(L.scrollTo({top:0,behavior:"auto"}),"vibrate"in navigator&&navigator.vibrate(10));return}const _=Wb(r);for(const L of _){const R=document.querySelector(L);if(R&&R.scrollHeight>0&&!R.closest(".pointer-events-none")){R.scrollTo({top:0,behavior:"smooth"}),"vibrate"in navigator&&navigator.vibrate(10);break}}}},[r]),p=te(E=>E.workflow),h=te(E=>E.originalWorkflow),m=te(E=>E.currentFilename),g=te(E=>E.manuallyHiddenNodes),x=te(E=>E.hiddenSubgraphs),v=lt(E=>E.pending),N=Tn(E=>E.history),C=Nt(E=>E.source),S=p&&h&&JSON.stringify(p)!==JSON.stringify(h),w=b.useMemo(()=>{if(!p)return"";const E=p.nodes.length,D=Object.keys(g).length,_=Object.values(x).some(Boolean);if(D===0&&!_)return`${E} nodes ${S?"[Unsaved]":""}`.trim();const L=_?p.nodes.reduce((A,B)=>{const U=B.properties?.__mobile_origin;if(!U||typeof U!="object"||U.scope!=="subgraph")return A;const J=U.subgraphId;return J&&x[J]?A+1:A},0):0,R=D+L;return`${E} nodes (${R} hidden) ${S?"[Unsaved]":""}`.trim()},[p,g,x,S]);b.useEffect(()=>{const E=l.current;if(!E)return;const D=()=>{const L=E.getBoundingClientRect();document.documentElement.style.setProperty("--top-bar-offset",`${L.height}px`)};D();const _=new ResizeObserver(D);return _.observe(E),()=>_.disconnect()},[]);const M=b.useMemo(()=>{switch(r){case"queue":return"Queue";case"outputs":return C==="output"?"Outputs":"Inputs";default:return m?m.replace(".json",""):p?"Untitled":"ComfyUI Mobile"}},[r,C,m,p]),j=b.useMemo(()=>{switch(r){case"queue":return i.jsx(Db,{});case"outputs":return i.jsx(Bb,{});default:return i.jsx(qb,{})}},[r]);return i.jsxs("div",{id:"top-bar-root",ref:l,className:"fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-[2000] safe-area-top","data-top-bar":"true",children:[i.jsxs("div",{id:"top-bar-content",className:"flex items-center justify-between px-4 py-3",children:[i.jsx("button",{onClick:()=>u(!0),className:`w-10 h-10 flex items-center justify-center rounded-lg
                     text-gray-700 hover:bg-gray-100`,children:i.jsx(rb,{className:"w-6 h-6"})}),i.jsxs("div",{id:"top-bar-title-container",className:"flex-1 text-center min-w-0 px-2 cursor-pointer",onClick:d,children:[i.jsxs("h1",{id:"top-bar-title",className:"font-semibold text-gray-900 text-lg truncate flex items-center justify-center",children:[i.jsx("span",{className:"truncate",children:M}),r==="workflow"&&S&&i.jsx("span",{id:"dirty-indicator",className:"text-blue-500 ml-1 font-bold",children:"*"})]}),r==="workflow"&&p&&i.jsx("p",{className:"node-count-display text-xs text-gray-500",children:w}),r==="queue"&&i.jsxs("p",{className:"run-count-display text-xs text-gray-500",children:[N.length," ",N.length===1?"run":"runs",v.length>0&&` (${v.length} pending)`]})]}),i.jsx("div",{id:"top-bar-right-slot",className:"w-10 h-10 flex items-center justify-center",children:j})]}),i.jsx(_b,{open:s,onClose:()=>u(!1)})]})}function Dd(r,l){const o=new Map;if(l.length===0)return o;const s=[...l].sort((u,d)=>u.id-d.id);for(const u of r){const[d,p]=u.pos,[h,m]=u.size,g=d+h/2,x=p+m/2;for(const v of s){const[N,C,S,w]=v.bounding;if(g>=N&&g<=N+S&&x>=C&&x<=C+w){o.set(u.id,v.id);break}}}return o}function $b(r){const l=r.groups??[];return Dd(r.nodes,l)}function Yb(r){const o=r.properties?.__mobile_origin;if(!o||typeof o!="object")return null;const s=o.scope;if(s==="root"){const u=o.nodeId;return typeof u=="number"?{scope:"root",nodeId:u}:null}if(s==="subgraph"){const u=o.nodeId,d=o.subgraphId;if(typeof u=="number"&&typeof d=="string")return{scope:"subgraph",subgraphId:d,nodeId:u}}return null}function Qb(r,l,o,s,u={},d={}){const p=l.groups??[],h=l.definitions?.subgraphs??[],m=new Map(h.map(U=>[U.id,U])),g=l.extra?.__mobile_subgraph_group_map,x=new Map;if(g&&typeof g=="object")for(const[U,W]of Object.entries(g))(typeof W=="number"||W===null)&&x.set(U,W);for(const U of h)x.has(U.id)||x.set(U.id,null);const v=new Map;for(const U of r){const W=Yb(U);W?.scope==="subgraph"&&W.subgraphId&&v.set(U.id,W.subgraphId)}const N=new Map;for(const U of h)N.set(U.id,[]);for(const U of r){const W=v.get(U.id);W&&N.get(W)?.push(U)}const C=r.filter(U=>!v.has(U.id)),S=Dd(C,p),w=new Map(p.map(U=>[U.id,U])),M=[],j=new Set;for(const U of r){const W=v.get(U.id);if(W){j.has(W)||(M.push({kind:"subgraph",subgraphId:W}),j.add(W));continue}M.push({kind:"node",node:U})}const E=new Map;for(const U of M){const W=U.kind==="node"?S.get(U.node.id):x.get(U.subgraphId)??null;if(W==null)continue;const J=E.get(W);J?J.push(U):E.set(W,[U])}const D=U=>U.kind==="node"?1:d[U.subgraphId]?0:N.get(U.subgraphId)?.length??0,_=(U,W,J)=>({type:"node",node:U,groupId:W,subgraphId:J}),L=U=>{const W=m.get(U);if(!W)return[];const J=N.get(U)??[],xe=W.groups??[];if(xe.length===0)return J.map(ye=>_(ye,null,U));const ae=Dd(J,xe),le=new Map(xe.map(ye=>[ye.id,ye])),z=J.map(ye=>({kind:"node",node:ye})),Y=new Map;for(const ye of z){const T=ae.get(ye.node.id);if(T===void 0)continue;const I=Y.get(T);I?I.push(ye):Y.set(T,[ye])}const de=[],be=new Set;for(const ye of z){const T=ae.get(ye.node.id);if(T!==void 0){if(be.has(T))continue;const I=le.get(T),O=Y.get(T)??[];if(I&&!s[I.id]){const F=O.reduce((ee,oe)=>ee+D(oe),0),X=o[I.id]??!0,pe=X?[]:O.map(ee=>_(ee.node,I.id,U));de.push({type:"group",group:I,nodeCount:F,isCollapsed:X,subgraphId:U,children:pe})}be.add(T);continue}de.push(_(ye.node,null,U))}for(const ye of xe)s[ye.id]||be.has(ye.id)||de.push({type:"group",group:ye,nodeCount:0,isCollapsed:o[ye.id]??!0,subgraphId:U,children:[]});return de},R=(U,W)=>{if(d[U])return null;const J=m.get(U);if(!J)return null;const xe=N.get(U)??[],ae=u[U]??!0,le=ae?[]:L(U);return{type:"subgraph",subgraph:J,nodeCount:xe.length,isCollapsed:ae,groupId:W,children:le}},A=(U,W,J)=>{if(s[U.id])return null;const xe=W.reduce((z,Y)=>z+D(Y),0),ae=o[U.id]??!0,le=ae?[]:W.map(z=>z.kind==="node"?_(z.node,U.id,J):R(z.subgraphId,U.id)).filter(Boolean);return{type:"group",group:U,nodeCount:xe,isCollapsed:ae,subgraphId:J,children:le}},B=[],G=new Set;for(const U of M){const W=U.kind==="node"?S.get(U.node.id):x.get(U.subgraphId)??null;if(W!=null){if(G.has(W))continue;const J=w.get(W),xe=E.get(W)??[];if(J){const ae=A(J,xe,null);ae&&B.push(ae)}else for(const ae of xe)if(ae.kind==="node")B.push(_(ae.node,null,null));else{const le=R(ae.subgraphId,null);le&&B.push(le)}G.add(W);continue}if(U.kind==="node")B.push(_(U.node,null,null));else{const J=R(U.subgraphId,null);J&&B.push(J)}}for(const U of p){if(G.has(U.id))continue;const W=E.get(U.id)??[],J=A(U,W,null);J&&B.push(J),G.add(U.id)}return B}function qr(r,l){const o=r.replace("#","");let s,u,d;if(o.length===3)s=parseInt(o[0]+o[0],16),u=parseInt(o[1]+o[1],16),d=parseInt(o[2]+o[2],16);else if(o.length===6)s=parseInt(o.slice(0,2),16),u=parseInt(o.slice(2,4),16),d=parseInt(o.slice(4,6),16);else return"rgba(0, 0, 0, 0)";return`rgba(${s}, ${u}, ${d}, ${l})`}function Go({workflow:r,runKey:l,isRunning:o,workflowDurationStats:s}){const[u,d]=b.useState(null),p=b.useRef(null),h=b.useRef(null),m=b.useRef(null),g=b.useRef(null),x=b.useRef(null),v=b.useRef(0),N=b.useRef(null);return b.useEffect(()=>{let C=null,S=null;const w=()=>{if(!r){N.current!==null&&(N.current=null,d(null)),m.current=null,g.current=null,x.current=null,p.current=null,v.current=0,h.current=null;return}const M=250,j=Date.now();let E=null;if(!l)h.current?(m.current=j+M,h.current=null,v.current=100,E=100):m.current&&j<m.current?E=100:(m.current=null,g.current=null,x.current=null,p.current=null,v.current=0,E=null);else if(m.current&&j<m.current)g.current=l,E=100;else if(g.current&&j>=(m.current??0)&&(h.current=g.current,g.current=null,p.current=j-M,v.current=0,m.current=null),h.current&&l!==h.current)x.current!==l&&(x.current=l,m.current=j+M,v.current=100),E=100;else{h.current!==l&&(p.current=j,h.current=l,v.current=0,m.current=null);const D=Math.max(0,j-(p.current??j)),_=ji(r),L=s[_]?.avgMs??null;let R;if(L){const B=D/L*100;R=Math.min(99,Math.max(0,B))}else{const B=D/1e3;B<=50?R=B:R=50+(B-50)*.5,R=Math.min(90,R)}const A=Math.max(v.current,R);v.current=A,E=Math.round(A)}N.current!==E&&(N.current=E,d(E))};return r?(C=setTimeout(w,0),(o||m.current||l)&&(S=setInterval(w,200))):C=setTimeout(w,0),()=>{C&&clearTimeout(C),S&&clearInterval(S)}},[r,l,o,s]),u}const Xb=new Set(["mp4","webm","mkv","mov","avi","m4v"]);function qo(r){const l=r.split(".").pop()?.toLowerCase()??"";return Xb.has(l)?"video":"image"}function Ca(r){return qo(r)==="video"}function kg(r){const l=String(r).split(",")[0].trim();return["IMAGE","LATENT","MODEL","CLIP","VAE","CONDITIONING","INT","FLOAT","STRING","BOOLEAN","MASK"].includes(l)?`type-${l}`:"type-default"}function Mg(r){return String(r).split(",").map(l=>l.trim().toUpperCase()).filter(Boolean)}const Og=b.memo(function({slot:l,nodeId:o,direction:s,slotIndex:u,compact:d=!1,hideLabel:p=!1}){const h=te(ae=>ae.workflow),m=te(ae=>ae.scrollToNode),g=te(ae=>ae.revealNodeWithParents),x=te(ae=>ae.nodeTypes),v=te(ae=>ae.manuallyHiddenNodes),[N,C]=b.useState(!1),S=b.useRef(null),w=b.useRef(null),[M,j]=b.useState(null),E=b.useRef(null),D=b.useMemo(()=>{if(!h)return[];const ae=[];if(s==="input"){if(l.link!=null){const z=Ao(h,o,u);z&&ae.push(z.node)}}else{const le=Ni(h,o,u);for(const z of le)ae.push(z.node)}return ae},[h,o,s,l,u]),{effectiveNodes:_,directNodes:L,bypassedTargets:R}=b.useMemo(()=>{if(!h)return{effectiveNodes:[],directNodes:[],bypassedTargets:[]};if(Object.keys(v).length===0)return{effectiveNodes:D,directNodes:D,bypassedTargets:[]};const ae=new Map(h.nodes.map(F=>[F.id,F])),le=F=>!!v[F.id],z=new Set,Y=F=>{if(z.has(F))return[];z.add(F);const X=ae.get(F);if(!X)return[];const pe=[];return X.outputs?.forEach((ee,oe)=>{Ni(h,F,oe).forEach(Oe=>{const Qe=Oe.node;le(Qe)?pe.push(...Y(Qe.id)):pe.push(Qe)})}),pe},de=F=>{if(z.has(F))return[];z.add(F);const X=ae.get(F);if(!X)return[];const pe=[];return X.inputs?.forEach((ee,oe)=>{if(ee.link===null)return;const ve=Ao(h,F,oe);ve&&(le(ve.node)?pe.push(...de(ve.node.id)):pe.push(ve.node))}),pe},be=[],ye=[];D.forEach(F=>{le(F)?s==="input"?ye.push(...de(F.id)):ye.push(...Y(F.id)):be.push(F)});const T=new Set(be.map(F=>F.id));let O=(F=>{const X=[],pe=new Set;return F.forEach(ee=>{T.has(ee.id)||pe.has(ee.id)||(pe.add(ee.id),X.push(ee))}),X})(ye);if(s==="input"&&O.length>1){const F=new Set(Mg(l.type)),X=O.filter(pe=>pe.outputs?.some(ee=>Mg(ee.type).some(oe=>F.has(oe))));X.length>0&&(O=X)}return{effectiveNodes:[...be,...O],directNodes:be,bypassedTargets:O}},[D,h,s,l.type,v]),A=_.length,B=A===1?_[0].id:null,G=A>0,U=()=>{if(G){if(A===1&&B!==null){g(B),m(B);return}C(ae=>!ae)}},W=ae=>le=>{le.stopPropagation(),g(ae),m(ae),C(!1)};b.useLayoutEffect(()=>{if(!N)return;const ae=()=>{const le=w.current;if(!le)return;const z=le.getBoundingClientRect(),Y=8;j({top:z.bottom+6,...s==="input"?{left:Math.min(z.left,window.innerWidth-Y)}:{right:Math.max(Y,window.innerWidth-z.right)}})};return E.current=ae,ae(),()=>{}},[N,A,s]),b.useEffect(()=>{if(!N)return;const ae=()=>E.current?.(),le=Y=>{!S.current||!Y.target||w.current?.contains(Y.target)||S.current.contains(Y.target)||C(!1)},z=Y=>{const de=Y.target;S.current&&de&&S.current.contains(de)||C(!1)};return document.addEventListener("mousedown",le),document.addEventListener("scroll",z,!0),window.addEventListener("resize",ae),()=>{document.removeEventListener("mousedown",le),document.removeEventListener("scroll",z,!0),window.removeEventListener("resize",ae)}},[N]);const J=d?"w-7 h-7":"w-10 h-10",xe=d?"text-sm":"text-base";return h?i.jsxs("div",{className:"flex items-center gap-2",children:[s==="input"?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:U,disabled:!G,ref:w,className:`
              flex items-center justify-center rounded-full font-medium
              ${J} flex-shrink-0
              transition-opacity
              ${kg(l.type)}
              ${G?"opacity-100 cursor-pointer active:scale-95":"opacity-40 cursor-not-allowed"}
            `,children:G&&i.jsx("span",{className:xe,children:""})}),!p&&i.jsx("span",{className:"text-sm text-gray-700 truncate",children:l.localized_name||l.name})]}):i.jsxs(i.Fragment,{children:[!p&&i.jsx("span",{className:"text-sm text-gray-700 truncate",children:l.localized_name||l.name}),A>1&&i.jsx("span",{className:"bg-gray-200 text-gray-700 rounded-full px-2 py-0.5 text-xs font-medium flex-shrink-0",children:A}),i.jsx("button",{onClick:U,disabled:!G,ref:w,className:`
              flex items-center justify-center rounded-full font-medium
              ${J} flex-shrink-0
              transition-opacity
              ${kg(l.type)}
              ${G?"opacity-100 cursor-pointer active:scale-95":"opacity-40 cursor-not-allowed"}
            `,children:G&&i.jsx("span",{className:xe,children:""})})]}),N&&M&&lr.createPortal(i.jsxs("div",{ref:S,className:"fixed z-[1000] bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:M.top,right:M.right,left:M.left,maxWidth:"calc(100vw - 16px)"},children:[L.map(ae=>{const z=x?.[ae.type]?.display_name||ae.type;return i.jsxs("button",{className:"block text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:W(ae.id),children:[z," #",ae.id]},ae.id)}),L.length>0&&R.length>0&&i.jsx("div",{className:"px-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-px flex-1 bg-gray-200"}),i.jsx("span",{className:"text-[10px] text-gray-400",children:"(via bypassed)"}),i.jsx("div",{className:"h-px flex-1 bg-gray-200"})]})}),R.map(ae=>{const z=x?.[ae.type]?.display_name||ae.type;return i.jsxs("button",{className:"block text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:W(ae.id),children:[z," #",ae.id]},`bypassed-${ae.id}`)})]}),document.body)]}):null});function Pb({nodeId:r,inputs:l,outputs:o,allInputs:s,allOutputs:u}){return!te(p=>p.connectionButtonsVisible)||l.length===0&&o.length===0?null:i.jsxs("div",{className:"mb-3 grid grid-cols-2 gap-3",children:[i.jsx("div",{children:l.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Inputs"}),i.jsx("div",{className:"flex flex-col gap-1.5",children:l.map(p=>{const h=s.findIndex(m=>m.name===p.name);return i.jsx(Og,{slot:p,nodeId:r,direction:"input",slotIndex:h},`input-${p.name}`)})})]})}),i.jsx("div",{className:"flex flex-col items-end",children:o.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide text-right w-full",children:"Outputs"}),i.jsx("div",{className:"flex flex-col gap-1.5 w-full items-end",children:o.map(p=>{const h=u.findIndex(m=>m.name===p.name);return i.jsx(Og,{slot:p,nodeId:r,direction:"output",slotIndex:h},`output-${h}`)})})]})})]})}function Zb({nodeId:r,isBypassed:l,onEditLabel:o,pinnableWidgets:s,singlePinnableWidget:u,isSingleWidgetPinned:d,hasPinnedWidget:p,toggleWidgetPin:h,setPinnedWidget:m,isNodeBookmarked:g,canAddNodeBookmark:x,onToggleNodeBookmark:v,toggleBypass:N,hideNode:C,connectionHighlightMode:S,setConnectionHighlightMode:w,leftLineCount:M,rightLineCount:j}){const[E,D]=b.useState(!1),[_,L]=b.useState(!1),R=b.useRef(null),A=b.useRef(null),[B,G]=b.useState(null);b.useEffect(()=>{if(!E)return;const T=()=>{const F=A.current;if(!F)return;const X=F.getBoundingClientRect();G({top:X.bottom+6,left:X.right-160})};T();const I=F=>{!R.current||!F.target||A.current?.contains(F.target)||R.current.contains(F.target)||(D(!1),L(!1))},O=F=>{const X=F.target;R.current&&X&&R.current.contains(X)||(D(!1),L(!1))};return document.addEventListener("mousedown",I),document.addEventListener("scroll",O,!0),window.addEventListener("resize",T),()=>{document.removeEventListener("mousedown",I),document.removeEventListener("scroll",O,!0),window.removeEventListener("resize",T)}},[E]);const U=M>0||j>0,W=()=>{D(!1),L(!1)},J=T=>{T.stopPropagation();const I=M>0,O=j>0;if(!I&&!O)return;const F=I&&O?["off","inputs","outputs","both"]:I?["off","inputs"]:["off","outputs"],X=F.indexOf(S),pe=F[(X+1)%F.length];w(r,pe)},xe=T=>{T.stopPropagation(),D(I=>!I)},ae=T=>{T.stopPropagation(),o(),W()},le=T=>{T.stopPropagation(),N(r),W()},z=T=>{T.stopPropagation(),C(r),W()},Y=T=>{T.stopPropagation(),u&&(h(u.widgetIndex,u.name,u.type,u.options),W())},de=T=>{T.stopPropagation(),m(null),W()},be=T=>{T.stopPropagation(),L(!_)},ye=T=>I=>{I.stopPropagation(),m({nodeId:r,widgetIndex:T.widgetIndex,widgetName:T.name,widgetType:T.type,options:T.options}),W()};return i.jsxs("div",{className:"flex items-center gap-1 relative",onClick:T=>T.stopPropagation(),children:[U&&i.jsx("button",{type:"button",className:"w-8 h-8 flex items-center justify-center","aria-pressed":S!=="off","aria-label":"Highlight connected nodes",onClick:J,children:i.jsx(sb,{className:"w-6 h-6 overflow-visible",nodeId:r,connectionHighlightMode:S,leftLineCount:M,rightLineCount:j})}),i.jsx("button",{onClick:xe,className:"w-8 h-8 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent","aria-label":"Node options",ref:A,children:g?i.jsx(Vl,{className:"w-5 h-5 text-yellow-500"}):i.jsx(wl,{className:"w-5 h-5 -rotate-90"})}),E&&B&&lr.createPortal(i.jsxs("div",{ref:R,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:B.top,left:B.left},children:[i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ae,children:[i.jsx(tf,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),(g||x)&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:T=>{T.stopPropagation(),v(),W()},children:[g?i.jsx(Mi,{className:"w-4 h-4 text-gray-500"}):i.jsx(Vl,{className:"w-4 h-4 text-yellow-500"}),g?"Remove bookmark":"Bookmark node"]}),i.jsx("div",{className:"border-t border-gray-200 my-1"}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:le,children:[i.jsx(Rd,{className:"w-4 h-4 text-gray-500",isBypassed:l}),l?"Engage node":"Bypass node"]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:z,children:[i.jsx(dr,{className:"w-4 h-4 text-gray-500"}),"Hide node"]}),s.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-t border-gray-200 my-1"}),u?i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Y,children:[d?i.jsx(Do,{className:"w-4 h-4 text-fuchsia-500"}):i.jsx(Ad,{className:"w-4 h-4 text-gray-500"}),d?"Remove pin":"Pin widget"]}):i.jsxs(i.Fragment,{children:[p&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:de,children:[i.jsx(Do,{className:"w-4 h-4 text-fuchsia-500"}),"Remove pin"]}),i.jsxs("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex items-center justify-between",onClick:be,children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Ad,{className:"w-4 h-4 text-gray-500"}),"Pin widget"]}),i.jsx(Oi,{className:`w-4 h-4 text-gray-400 transition-transform ${_?"rotate-90":""}`})]}),_&&i.jsx("div",{className:"border-t border-gray-100 bg-gray-50 max-h-48 overflow-auto",children:s.map(T=>i.jsx("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 text-gray-700",onClick:ye(T),children:T.name},T.widgetIndex))})]})]})]}),document.body)]})}function Kb({nodeId:r,open:l,errors:o,anchorRef:s,onClose:u}){const d=x=>{x.stopPropagation(),u()},[p,h]=b.useState(null),m=b.useRef(null),g=Ln(x=>x.currentPanel);return b.useEffect(()=>{l&&g!=="workflow"&&u()},[l,g,u]),b.useEffect(()=>{if(!l)return;const x=()=>{const C=s.current;if(!C)return;const S=C.getBoundingClientRect();h({top:S.bottom+8,left:Math.max(16,Math.min(S.left+S.width/2-140,window.innerWidth-296))})};x();const v=C=>{C.target&&(s.current?.contains(C.target)||m.current?.contains(C.target)||u())},N=()=>{u()};return document.addEventListener("pointerdown",v),document.addEventListener("scroll",N,!0),window.addEventListener("resize",x),()=>{document.removeEventListener("pointerdown",v),document.removeEventListener("scroll",N,!0),window.removeEventListener("resize",x)}},[l,r,u,s]),!l||o.length===0||!p?null:lr.createPortal(i.jsxs("div",{ref:m,id:`error-popover-${r}`,className:"error-popover-root fixed z-[2000] bg-red-50 border border-red-700 rounded-lg shadow-lg w-72 max-h-64 overflow-auto",style:{top:p.top,left:p.left},children:[i.jsxs("div",{id:`error-popover-header-${r}`,className:"popover-header flex items-center justify-between px-3 py-2 border-b border-red-200 bg-red-700",children:[i.jsxs("span",{id:`error-popover-title-${r}`,className:"popover-title text-sm font-semibold text-white",children:[o.length," ",o.length===1?"Error":"Errors"]}),i.jsx("button",{type:"button",onClick:d,className:"w-6 h-6 flex items-center justify-center text-red-200 hover:text-white rounded","aria-label":"Close",children:i.jsx(rf,{className:"w-4 h-4"})})]}),i.jsx("div",{id:`error-popover-body-${r}`,className:"popover-body p-3 space-y-2 bg-red-100",children:o.map((x,v)=>{const N=x.details?.toLowerCase().replace(/[_\s]/g,"")||"",C=x.inputName?.toLowerCase().replace(/[_\s]/g,"")||"",S=!x.details||x.details===x.message||x.inputName&&N===C;return i.jsxs("div",{className:"error-item flex items-start gap-2 text-sm",children:[i.jsx("span",{className:"error-dot mt-1.5 h-1.5 w-1.5 rounded-full bg-red-700 shrink-0","aria-hidden":"true"}),i.jsxs("div",{className:"error-content-wrapper min-w-0",children:[x.inputName&&i.jsx("div",{className:"error-input-name font-medium text-red-900 mb-0.5",children:x.inputName}),i.jsx("div",{className:"error-message-text text-red-800",children:x.message}),!S&&i.jsx("div",{className:"error-details-text text-xs text-red-700 mt-0.5 break-words",children:x.details})]})]},v)})})]}),document.body)}function Jb({noteText:r,noteLinkified:l,noteWidgetIndex:o,isEditingNote:s,setIsEditingNote:u,onUpdateNote:d,noteTextareaRef:p,onNoteTap:h}){const m=x=>{o!==null&&d(x)},g=x=>{o!==null&&d(x.target.value)};return i.jsxs("div",{className:"mb-3 group","data-textarea-root":"true",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1.5","data-textarea-header":"true",children:[i.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Note"}),s&&i.jsx(To,{value:r,onChange:m,textareaRef:p,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),s?i.jsx("textarea",{ref:p,value:r,onChange:g,onBlur:()=>u(!1),className:"w-full p-3 border rounded-lg text-base resize-none note-display",rows:Math.min(8,Math.max(3,r.split(`
`).length))}):i.jsx("div",{className:"w-full p-3 border rounded-lg text-base whitespace-pre-wrap break-words note-display",onDoubleClick:()=>u(!0),onTouchEnd:h,children:l})]})}function e2({show:r,previewImage:l,displayName:o,onImageClick:s,isExecuting:u,overallProgress:d,displayNodeProgress:p}){return!r||!l?null:i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Output Preview"}),i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:qn(l.filename,l.subfolder,l.type),alt:`${o} output`,className:"w-full h-auto rounded-lg border border-gray-100",loading:"lazy",onClick:s},"preview"),u&&d!==null&&i.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-lg flex items-end p-3",children:i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs text-white/90 mb-1",children:[i.jsx("span",{children:"Progress"}),i.jsxs("span",{children:[p,"%"]})]}),i.jsx("div",{className:"h-2 rounded-full bg-white/30 overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,p))}%`}})}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-white/90 mt-2 mb-1",children:[i.jsx("span",{children:"Overall"}),i.jsxs("span",{children:[d,"%"]})]}),i.jsx("div",{className:"h-2 rounded-full bg-white/30 overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,d))}%`}})})]})})]})]})}function t2({nodeId:r,displayName:l,isEditingLabel:o,labelValue:s,labelInputRef:u,onLabelChange:d,onLabelBlur:p,isCollapsed:h,isBypassed:m,isExecuting:g,overallProgress:x,hasErrors:v,errorIconRef:N,errorPopoverOpen:C,setErrorPopoverOpen:S,toggleNodeFold:w,rightSlot:M}){const j=()=>{o||w(r)},E=_=>{_.stopPropagation(),w(r)},D=_=>{_.stopPropagation(),S(!C)};return i.jsxs("div",{id:`node-header-${r}`,className:`node-header flex items-center justify-between cursor-pointer gap-3 ${h?"":"mb-3 pb-2 border-b"} ${m?`bg-purple-200 border-purple-300 px-3 -mx-3 -mt-1 pt-1 rounded-t-xl ${h?"pb-1 -mb-1 rounded-b-xl":""}`:h?"":"border-gray-100"}`,onClick:j,children:[i.jsxs("div",{id:`node-title-container-${r}`,className:"flex items-center gap-1 min-w-0",children:[i.jsx("button",{onClick:E,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-400 hover:text-gray-600 shrink-0",children:h?i.jsx(Il,{className:"w-6 h-6"}):i.jsx(Wn,{className:"w-6 h-6"})}),o?i.jsx("input",{ref:u,value:s,onChange:_=>d(_.target.value),onBlur:p,onKeyDown:_=>{(_.key==="Enter"||_.key==="Escape")&&_.currentTarget.blur()},onClick:_=>_.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):i.jsx("h3",{id:`node-display-name-${r}`,className:`font-semibold text-gray-900 select-none flex-1 min-w-0 ${h?"whitespace-nowrap overflow-hidden text-ellipsis":"whitespace-normal break-words"}`,children:l}),i.jsxs("span",{id:`node-id-badge-${r}`,className:"text-xs text-gray-400 min-w-[2ch] text-right",children:["#",r]}),v&&i.jsx("button",{ref:N,type:"button",onClick:D,className:"w-5 h-5 flex items-center justify-center text-red-500 hover:text-red-600 shrink-0","aria-label":"View errors",children:i.jsx(R0,{className:"w-4 h-4"})}),g&&h&&x!==null?i.jsxs("div",{id:`node-progress-indicator-${r}`,className:"relative w-6 h-6 flex items-center justify-center",children:[i.jsx(vb,{className:"absolute",width:"24",height:"24",style:{transform:"rotate(-90deg)"},progress:x,radius:10}),i.jsx("span",{id:`node-progress-text-${r}`,className:"text-[8px] font-bold text-blue-600",children:x})]}):null,g&&!h?i.jsx("span",{id:`node-executing-pulse-${r}`,className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}):null]}),i.jsx("div",{id:`node-header-right-slot-${r}`,className:"header-right-slot",children:M})]})}function af({isOpen:r,title:l,onClose:o,children:s,headerActions:u}){return b.useEffect(()=>{if(r){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=d}}},[r]),r?lr.createPortal(i.jsx("div",{className:"fixed inset-0 z-[2100] bg-gray-400/40 dark:bg-black/50 backdrop-blur-sm safe-area-top",onClick:o,children:i.jsxs("div",{className:"w-full h-full flex flex-col",style:{paddingTop:"env(safe-area-inset-top, 0px)",paddingBottom:"var(--bottom-bar-offset, 0px)"},onClick:d=>d.stopPropagation(),children:[i.jsxs("div",{className:"bg-white dark:bg-[#151a23] p-4 border-b border-gray-200 dark:border-gray-800 shadow-sm relative z-50 min-h-0 overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200 truncate pr-4 pt-1 flex-1",children:l}),i.jsxs("div",{className:"flex items-center gap-2",children:[u,i.jsx("button",{onClick:o,className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Close",children:i.jsx(rf,{className:"w-6 h-6"})})]})]}),i.jsx("div",{className:"mt-2",children:s})]}),i.jsx("div",{className:"flex-1",onClick:o})]})}),document.body):null}function Ma({isPinned:r,onToggle:l}){if(!r||!l)return null;const o=s=>{s.preventDefault(),s.stopPropagation(),l()};return i.jsx("button",{type:"button",onClick:o,className:"flex items-center justify-center transition-colors text-fuchsia-500 hover:text-fuchsia-600","aria-label":"Remove pin",children:i.jsx(Do,{className:"w-5 h-5"})})}function I0(){return typeof window>"u"?!1:window.matchMedia("(pointer: coarse)").matches}function Eg({containerClass:r,name:l,value:o,options:s,onChange:u,disabled:d=!1,hideLabel:p=!1,hasPin:h,isPinned:m=!1,onTogglePin:g,maxHeight:x,hasError:v=!1,forceModalOpen:N=!1,onModalClose:C}){const S=W=>{if(!Array.isArray(s))return s?.[W]},w=S("multiline"),M=S("placeholder"),j=String(o??""),E=W=>{u(W.target.value)},[D,_]=b.useState(!1),L=N||D,R=I0(),A=N||R,B=b.useRef(null),G=b.useRef(null);b.useLayoutEffect(()=>{if(!w)return;const W=B.current;W&&(W.style.height="0px",W.style.height=`${W.scrollHeight}px`)},[o,L,w]);const U=()=>{_(!1),C?.()};return A?i.jsxs("div",{className:r,children:[w?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1 min-h-[18px]",children:[p?i.jsx("span",{className:"block text-sm font-medium text-gray-700"}):i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:l}),i.jsx(To,{value:j,onChange:u,textareaRef:B,className:"opacity-100"})]}),i.jsxs("div",{className:`relative w-full p-3 comfy-input min-h-[100px] text-base group cursor-text ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-10":""} ${v?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&_(!0),children:[i.jsx("div",{className:"whitespace-pre-wrap break-words text-gray-900 dark:text-[#e5e7eb]",children:j||i.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:M})}),h&&i.jsx("div",{className:"absolute right-2 top-2 pointer-events-none",children:i.jsx("div",{className:"pointer-events-auto",children:i.jsx(Ma,{isPinned:m,onToggle:g})})})]})]}):i.jsxs(i.Fragment,{children:[!p&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),i.jsxs("div",{className:`relative w-full p-3 comfy-input text-base min-h-[46px] flex items-center cursor-text ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-16":"pr-6"} ${v?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&_(!0),children:[i.jsx("div",{className:"truncate min-w-0 flex-1 text-gray-900 dark:text-[#e5e7eb]",children:j||i.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:M})}),h&&i.jsx("div",{className:"absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:i.jsx("div",{className:"pointer-events-auto px-3",children:i.jsx(Ma,{isPinned:m,onToggle:g})})})]})]}),i.jsx(af,{title:l,isOpen:L,onClose:U,headerActions:w?i.jsx(To,{value:j,onChange:u,textareaRef:B,className:"mr-2"}):null,children:w?i.jsx("textarea",{ref:B,value:j,onChange:W=>u(W.target.value),placeholder:M,className:"w-full p-3 border border-gray-300 rounded-lg min-h-[150px] text-base resize-none outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",autoFocus:!N,disabled:d}):i.jsx("input",{ref:G,type:"text",value:j,onChange:W=>u(W.target.value),placeholder:M,className:"w-full p-3 border border-gray-300 rounded-lg text-base outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",autoFocus:!N,disabled:d})})]}):w?i.jsxs("div",{className:`${r} group`,"data-textarea-root":"true",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1 min-h-[18px]","data-textarea-header":"true",children:[p?i.jsx("span",{className:"block text-sm font-medium text-gray-700"}):i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:l}),i.jsx(To,{value:j,onChange:u,textareaRef:B,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("textarea",{ref:B,value:j,onChange:E,placeholder:M,className:`w-full p-3 comfy-input min-h-[100px] text-base resize-none ${x?"overflow-auto":"overflow-hidden"} ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-10":""} ${v?"border-red-700 ring-1 ring-red-700":""}`,style:{overflowAnchor:"none",...x?{maxHeight:x}:{}},disabled:d}),h&&i.jsx("div",{className:"absolute right-2 top-2",children:i.jsx(Ma,{isPinned:m,onToggle:g})})]})]}):i.jsxs("div",{className:r,children:[!p&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:String(o??""),onChange:W=>u(W.target.value),placeholder:M,className:`w-full p-3 comfy-input text-base ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-16":""} ${v?"border-red-700 ring-1 ring-red-700":""}`,disabled:d}),h&&i.jsx("div",{className:"absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:i.jsx("div",{className:"pointer-events-auto px-3",children:i.jsx(Ma,{isPinned:m,onToggle:g})})})]})]})}function zd({containerClass:r,name:l,value:o,options:s,onChange:u,disabled:d,type:p,min:h,max:m,step:g,isInt:x,hasError:v=!1}){const[N,C]=b.useState(String(o||0)),S=x??(p?p.toUpperCase()==="INT":Number.isInteger(o)),w=g??s?.step??(S?1:.1),M=h??(s?.min!==void 0?s.min:-1/0),j=m??(s?.max!==void 0?s.max:1/0);b.useEffect(()=>{C(String(o))},[o]);const E=A=>{C(A.target.value)},D=()=>{let A=S?parseInt(N,10):parseFloat(N);isNaN(A)&&(A=o),A=Math.max(M,Math.min(j,A)),u(A),C(String(A))},_=A=>{const B=(S?parseInt(N,10):parseFloat(N))||0,G=Math.max(M,Math.min(j,B+A));u(G)},L=[`number-input-field-${l}`,"w-full p-3 comfy-input text-base text-gray-900",d?"opacity-60 cursor-not-allowed":"",v?"border-red-700 ring-1 ring-red-700":""].filter(Boolean).join(" "),R=["w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 text-gray-700 flex-shrink-0",d?"opacity-60 cursor-not-allowed":"active:scale-95 transition-all"].filter(Boolean).join(" ");return i.jsxs("div",{className:`${r??""} number-control-${l}`,children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),i.jsxs("div",{className:`number-stepper-container-${l} flex items-center gap-2`,children:[i.jsx("input",{className:L,type:"number",value:N,onChange:E,onBlur:D,disabled:d,"aria-label":p?`${l} ${p}`:l}),i.jsx("button",{type:"button",onClick:()=>_(-w),className:R,"aria-label":"Decrease value",disabled:d,children:i.jsx(lb,{className:"w-4 h-4"})}),i.jsx("button",{type:"button",onClick:()=>_(w),className:R,"aria-label":"Increase value",disabled:d,children:i.jsx(nf,{className:"w-4 h-4"})})]})]})}function Ul(r){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},Ul(r)}function n2(r,l){if(Ul(r)!="object"||!r)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var s=o.call(r,l);if(Ul(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(r)}function H0(r){var l=n2(r,"string");return Ul(l)=="symbol"?l:l+""}function Eo(r,l,o){return(l=H0(l))in r?Object.defineProperty(r,l,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[l]=o,r}function Tg(r,l){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);l&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),o.push.apply(o,s)}return o}function Ue(r){for(var l=1;l<arguments.length;l++){var o=arguments[l]!=null?arguments[l]:{};l%2?Tg(Object(o),!0).forEach(function(s){Eo(r,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):Tg(Object(o)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(o,s))})}return r}function r2(r){if(Array.isArray(r))return r}function l2(r,l){var o=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(o!=null){var s,u,d,p,h=[],m=!0,g=!1;try{if(d=(o=o.call(r)).next,l===0){if(Object(o)!==o)return;m=!1}else for(;!(m=(s=d.call(o)).done)&&(h.push(s.value),h.length!==l);m=!0);}catch(x){g=!0,u=x}finally{try{if(!m&&o.return!=null&&(p=o.return(),Object(p)!==p))return}finally{if(g)throw u}}return h}}function Bd(r,l){(l==null||l>r.length)&&(l=r.length);for(var o=0,s=Array(l);o<l;o++)s[o]=r[o];return s}function V0(r,l){if(r){if(typeof r=="string")return Bd(r,l);var o={}.toString.call(r).slice(8,-1);return o==="Object"&&r.constructor&&(o=r.constructor.name),o==="Map"||o==="Set"?Array.from(r):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Bd(r,l):void 0}}function a2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wr(r,l){return r2(r)||l2(r,l)||V0(r,l)||a2()}function o2(r,l){if(r==null)return{};var o={};for(var s in r)if({}.hasOwnProperty.call(r,s)){if(l.indexOf(s)!==-1)continue;o[s]=r[s]}return o}function Qr(r,l){if(r==null)return{};var o,s,u=o2(r,l);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);for(s=0;s<d.length;s++)o=d[s],l.indexOf(o)===-1&&{}.propertyIsEnumerable.call(r,o)&&(u[o]=r[o])}return u}var s2=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function i2(r){var l=r.defaultInputValue,o=l===void 0?"":l,s=r.defaultMenuIsOpen,u=s===void 0?!1:s,d=r.defaultValue,p=d===void 0?null:d,h=r.inputValue,m=r.menuIsOpen,g=r.onChange,x=r.onInputChange,v=r.onMenuClose,N=r.onMenuOpen,C=r.value,S=Qr(r,s2),w=b.useState(h!==void 0?h:o),M=Wr(w,2),j=M[0],E=M[1],D=b.useState(m!==void 0?m:u),_=Wr(D,2),L=_[0],R=_[1],A=b.useState(C!==void 0?C:p),B=Wr(A,2),G=B[0],U=B[1],W=b.useCallback(function(de,be){typeof g=="function"&&g(de,be),U(de)},[g]),J=b.useCallback(function(de,be){var ye;typeof x=="function"&&(ye=x(de,be)),E(ye!==void 0?ye:de)},[x]),xe=b.useCallback(function(){typeof N=="function"&&N(),R(!0)},[N]),ae=b.useCallback(function(){typeof v=="function"&&v(),R(!1)},[v]),le=h!==void 0?h:j,z=m!==void 0?m:L,Y=C!==void 0?C:G;return Ue(Ue({},S),{},{inputValue:le,menuIsOpen:z,onChange:W,onInputChange:J,onMenuClose:ae,onMenuOpen:xe,value:Y})}function $e(){return $e=Object.assign?Object.assign.bind():function(r){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var s in o)({}).hasOwnProperty.call(o,s)&&(r[s]=o[s])}return r},$e.apply(null,arguments)}function u2(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")}function Lg(r,l){for(var o=0;o<l.length;o++){var s=l[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,H0(s.key),s)}}function c2(r,l,o){return l&&Lg(r.prototype,l),o&&Lg(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}function Id(r,l){return Id=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},Id(r,l)}function d2(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(l&&l.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),l&&Id(r,l)}function Ti(r){return Ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},Ti(r)}function U0(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U0=function(){return!!r})()}function f2(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function p2(r,l){if(l&&(Ul(l)=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f2(r)}function m2(r){var l=U0();return function(){var o,s=Ti(r);if(l){var u=Ti(this).constructor;o=Reflect.construct(s,arguments,u)}else o=s.apply(this,arguments);return p2(this,o)}}function h2(r){if(Array.isArray(r))return Bd(r)}function g2(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function x2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function of(r){return h2(r)||g2(r)||V0(r)||x2()}function y2(r){if(r.sheet)return r.sheet;for(var l=0;l<document.styleSheets.length;l++)if(document.styleSheets[l].ownerNode===r)return document.styleSheets[l]}function v2(r){var l=document.createElement("style");return l.setAttribute("data-emotion",r.key),r.nonce!==void 0&&l.setAttribute("nonce",r.nonce),l.appendChild(document.createTextNode("")),l.setAttribute("data-s",""),l}var b2=(function(){function r(o){var s=this;this._insertTag=function(u){var d;s.tags.length===0?s.insertionPoint?d=s.insertionPoint.nextSibling:s.prepend?d=s.container.firstChild:d=s.before:d=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(u,d),s.tags.push(u)},this.isSpeedy=o.speedy===void 0?!0:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var l=r.prototype;return l.hydrate=function(s){s.forEach(this._insertTag)},l.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(v2(this));var u=this.tags[this.tags.length-1];if(this.isSpeedy){var d=y2(u);try{d.insertRule(s,d.cssRules.length)}catch{}}else u.appendChild(document.createTextNode(s));this.ctr++},l.flush=function(){this.tags.forEach(function(s){var u;return(u=s.parentNode)==null?void 0:u.removeChild(s)}),this.tags=[],this.ctr=0},r})(),vn="-ms-",Li="-moz-",Ct="-webkit-",G0="comm",sf="rule",uf="decl",w2="@import",q0="@keyframes",S2="@layer",N2=Math.abs,qi=String.fromCharCode,j2=Object.assign;function C2(r,l){return xn(r,0)^45?(((l<<2^xn(r,0))<<2^xn(r,1))<<2^xn(r,2))<<2^xn(r,3):0}function W0(r){return r.trim()}function k2(r,l){return(r=l.exec(r))?r[0]:r}function kt(r,l,o){return r.replace(l,o)}function Hd(r,l){return r.indexOf(l)}function xn(r,l){return r.charCodeAt(l)|0}function zo(r,l,o){return r.slice(l,o)}function xr(r){return r.length}function cf(r){return r.length}function ci(r,l){return l.push(r),r}function M2(r,l){return r.map(l).join("")}var Wi=1,La=1,F0=0,_n=0,rn=0,Aa="";function Fi(r,l,o,s,u,d,p){return{value:r,root:l,parent:o,type:s,props:u,children:d,line:Wi,column:La,length:p,return:""}}function Mo(r,l){return j2(Fi("",null,null,"",null,null,0),r,{length:-r.length},l)}function O2(){return rn}function E2(){return rn=_n>0?xn(Aa,--_n):0,La--,rn===10&&(La=1,Wi--),rn}function Fn(){return rn=_n<F0?xn(Aa,_n++):0,La++,rn===10&&(La=1,Wi++),rn}function vr(){return xn(Aa,_n)}function xi(){return _n}function Wo(r,l){return zo(Aa,r,l)}function Bo(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $0(r){return Wi=La=1,F0=xr(Aa=r),_n=0,[]}function Y0(r){return Aa="",r}function yi(r){return W0(Wo(_n-1,Vd(r===91?r+2:r===40?r+1:r)))}function T2(r){for(;(rn=vr())&&rn<33;)Fn();return Bo(r)>2||Bo(rn)>3?"":" "}function L2(r,l){for(;--l&&Fn()&&!(rn<48||rn>102||rn>57&&rn<65||rn>70&&rn<97););return Wo(r,xi()+(l<6&&vr()==32&&Fn()==32))}function Vd(r){for(;Fn();)switch(rn){case r:return _n;case 34:case 39:r!==34&&r!==39&&Vd(rn);break;case 40:r===41&&Vd(r);break;case 92:Fn();break}return _n}function _2(r,l){for(;Fn()&&r+rn!==57;)if(r+rn===84&&vr()===47)break;return"/*"+Wo(l,_n-1)+"*"+qi(r===47?r:Fn())}function A2(r){for(;!Bo(vr());)Fn();return Wo(r,_n)}function R2(r){return Y0(vi("",null,null,null,[""],r=$0(r),0,[0],r))}function vi(r,l,o,s,u,d,p,h,m){for(var g=0,x=0,v=p,N=0,C=0,S=0,w=1,M=1,j=1,E=0,D="",_=u,L=d,R=s,A=D;M;)switch(S=E,E=Fn()){case 40:if(S!=108&&xn(A,v-1)==58){Hd(A+=kt(yi(E),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:A+=yi(E);break;case 9:case 10:case 13:case 32:A+=T2(S);break;case 92:A+=L2(xi()-1,7);continue;case 47:switch(vr()){case 42:case 47:ci(D2(_2(Fn(),xi()),l,o),m);break;default:A+="/"}break;case 123*w:h[g++]=xr(A)*j;case 125*w:case 59:case 0:switch(E){case 0:case 125:M=0;case 59+x:j==-1&&(A=kt(A,/\f/g,"")),C>0&&xr(A)-v&&ci(C>32?Ag(A+";",s,o,v-1):Ag(kt(A," ","")+";",s,o,v-2),m);break;case 59:A+=";";default:if(ci(R=_g(A,l,o,g,x,u,h,D,_=[],L=[],v),d),E===123)if(x===0)vi(A,l,R,R,_,d,v,h,L);else switch(N===99&&xn(A,3)===110?100:N){case 100:case 108:case 109:case 115:vi(r,R,R,s&&ci(_g(r,R,R,0,0,u,h,D,u,_=[],v),L),u,L,v,h,s?_:L);break;default:vi(A,R,R,R,[""],L,0,h,L)}}g=x=C=0,w=j=1,D=A="",v=p;break;case 58:v=1+xr(A),C=S;default:if(w<1){if(E==123)--w;else if(E==125&&w++==0&&E2()==125)continue}switch(A+=qi(E),E*w){case 38:j=x>0?1:(A+="\f",-1);break;case 44:h[g++]=(xr(A)-1)*j,j=1;break;case 64:vr()===45&&(A+=yi(Fn())),N=vr(),x=v=xr(D=A+=A2(xi())),E++;break;case 45:S===45&&xr(A)==2&&(w=0)}}return d}function _g(r,l,o,s,u,d,p,h,m,g,x){for(var v=u-1,N=u===0?d:[""],C=cf(N),S=0,w=0,M=0;S<s;++S)for(var j=0,E=zo(r,v+1,v=N2(w=p[S])),D=r;j<C;++j)(D=W0(w>0?N[j]+" "+E:kt(E,/&\f/g,N[j])))&&(m[M++]=D);return Fi(r,l,o,u===0?sf:h,m,g,x)}function D2(r,l,o){return Fi(r,l,o,G0,qi(O2()),zo(r,2,-2),0)}function Ag(r,l,o,s){return Fi(r,l,o,uf,zo(r,0,s),zo(r,s+1,-1),s)}function Ta(r,l){for(var o="",s=cf(r),u=0;u<s;u++)o+=l(r[u],u,r,l)||"";return o}function z2(r,l,o,s){switch(r.type){case S2:if(r.children.length)break;case w2:case uf:return r.return=r.return||r.value;case G0:return"";case q0:return r.return=r.value+"{"+Ta(r.children,s)+"}";case sf:r.value=r.props.join(",")}return xr(o=Ta(r.children,s))?r.return=r.value+"{"+o+"}":""}function B2(r){var l=cf(r);return function(o,s,u,d){for(var p="",h=0;h<l;h++)p+=r[h](o,s,u,d)||"";return p}}function I2(r){return function(l){l.root||(l=l.return)&&r(l)}}function H2(r){var l=Object.create(null);return function(o){return l[o]===void 0&&(l[o]=r(o)),l[o]}}var V2=function(l,o,s){for(var u=0,d=0;u=d,d=vr(),u===38&&d===12&&(o[s]=1),!Bo(d);)Fn();return Wo(l,_n)},U2=function(l,o){var s=-1,u=44;do switch(Bo(u)){case 0:u===38&&vr()===12&&(o[s]=1),l[s]+=V2(_n-1,o,s);break;case 2:l[s]+=yi(u);break;case 4:if(u===44){l[++s]=vr()===58?"&\f":"",o[s]=l[s].length;break}default:l[s]+=qi(u)}while(u=Fn());return l},G2=function(l,o){return Y0(U2($0(l),o))},Rg=new WeakMap,q2=function(l){if(!(l.type!=="rule"||!l.parent||l.length<1)){for(var o=l.value,s=l.parent,u=l.column===s.column&&l.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(l.props.length===1&&o.charCodeAt(0)!==58&&!Rg.get(s))&&!u){Rg.set(l,!0);for(var d=[],p=G2(o,d),h=s.props,m=0,g=0;m<p.length;m++)for(var x=0;x<h.length;x++,g++)l.props[g]=d[m]?p[m].replace(/&\f/g,h[x]):h[x]+" "+p[m]}}},W2=function(l){if(l.type==="decl"){var o=l.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(l.return="",l.value="")}};function Q0(r,l){switch(C2(r,l)){case 5103:return Ct+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ct+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return Ct+r+Li+r+vn+r+r;case 6828:case 4268:return Ct+r+vn+r+r;case 6165:return Ct+r+vn+"flex-"+r+r;case 5187:return Ct+r+kt(r,/(\w+).+(:[^]+)/,Ct+"box-$1$2"+vn+"flex-$1$2")+r;case 5443:return Ct+r+vn+"flex-item-"+kt(r,/flex-|-self/,"")+r;case 4675:return Ct+r+vn+"flex-line-pack"+kt(r,/align-content|flex-|-self/,"")+r;case 5548:return Ct+r+vn+kt(r,"shrink","negative")+r;case 5292:return Ct+r+vn+kt(r,"basis","preferred-size")+r;case 6060:return Ct+"box-"+kt(r,"-grow","")+Ct+r+vn+kt(r,"grow","positive")+r;case 4554:return Ct+kt(r,/([^-])(transform)/g,"$1"+Ct+"$2")+r;case 6187:return kt(kt(kt(r,/(zoom-|grab)/,Ct+"$1"),/(image-set)/,Ct+"$1"),r,"")+r;case 5495:case 3959:return kt(r,/(image-set\([^]*)/,Ct+"$1$`$1");case 4968:return kt(kt(r,/(.+:)(flex-)?(.*)/,Ct+"box-pack:$3"+vn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ct+r+r;case 4095:case 3583:case 4068:case 2532:return kt(r,/(.+)-inline(.+)/,Ct+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xr(r)-1-l>6)switch(xn(r,l+1)){case 109:if(xn(r,l+4)!==45)break;case 102:return kt(r,/(.+:)(.+)-([^]+)/,"$1"+Ct+"$2-$3$1"+Li+(xn(r,l+3)==108?"$3":"$2-$3"))+r;case 115:return~Hd(r,"stretch")?Q0(kt(r,"stretch","fill-available"),l)+r:r}break;case 4949:if(xn(r,l+1)!==115)break;case 6444:switch(xn(r,xr(r)-3-(~Hd(r,"!important")&&10))){case 107:return kt(r,":",":"+Ct)+r;case 101:return kt(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ct+(xn(r,14)===45?"inline-":"")+"box$3$1"+Ct+"$2$3$1"+vn+"$2box$3")+r}break;case 5936:switch(xn(r,l+11)){case 114:return Ct+r+vn+kt(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return Ct+r+vn+kt(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return Ct+r+vn+kt(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return Ct+r+vn+r+r}return r}var F2=function(l,o,s,u){if(l.length>-1&&!l.return)switch(l.type){case uf:l.return=Q0(l.value,l.length);break;case q0:return Ta([Mo(l,{value:kt(l.value,"@","@"+Ct)})],u);case sf:if(l.length)return M2(l.props,function(d){switch(k2(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ta([Mo(l,{props:[kt(d,/:(read-\w+)/,":"+Li+"$1")]})],u);case"::placeholder":return Ta([Mo(l,{props:[kt(d,/:(plac\w+)/,":"+Ct+"input-$1")]}),Mo(l,{props:[kt(d,/:(plac\w+)/,":"+Li+"$1")]}),Mo(l,{props:[kt(d,/:(plac\w+)/,vn+"input-$1")]})],u)}return""})}},$2=[F2],Y2=function(l){var o=l.key;if(o==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(w){var M=w.getAttribute("data-emotion");M.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var u=l.stylisPlugins||$2,d={},p,h=[];p=l.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(w){for(var M=w.getAttribute("data-emotion").split(" "),j=1;j<M.length;j++)d[M[j]]=!0;h.push(w)});var m,g=[q2,W2];{var x,v=[z2,I2(function(w){x.insert(w)})],N=B2(g.concat(u,v)),C=function(M){return Ta(R2(M),N)};m=function(M,j,E,D){x=E,C(M?M+"{"+j.styles+"}":j.styles),D&&(S.inserted[j.name]=!0)}}var S={key:o,sheet:new b2({key:o,container:p,nonce:l.nonce,speedy:l.speedy,prepend:l.prepend,insertionPoint:l.insertionPoint}),nonce:l.nonce,inserted:d,registered:{},insert:m};return S.sheet.hydrate(h),S},cd={exports:{}},Mt={};var Dg;function Q2(){if(Dg)return Mt;Dg=1;var r=typeof Symbol=="function"&&Symbol.for,l=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,d=r?Symbol.for("react.profiler"):60114,p=r?Symbol.for("react.provider"):60109,h=r?Symbol.for("react.context"):60110,m=r?Symbol.for("react.async_mode"):60111,g=r?Symbol.for("react.concurrent_mode"):60111,x=r?Symbol.for("react.forward_ref"):60112,v=r?Symbol.for("react.suspense"):60113,N=r?Symbol.for("react.suspense_list"):60120,C=r?Symbol.for("react.memo"):60115,S=r?Symbol.for("react.lazy"):60116,w=r?Symbol.for("react.block"):60121,M=r?Symbol.for("react.fundamental"):60117,j=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function D(L){if(typeof L=="object"&&L!==null){var R=L.$$typeof;switch(R){case l:switch(L=L.type,L){case m:case g:case s:case d:case u:case v:return L;default:switch(L=L&&L.$$typeof,L){case h:case x:case S:case C:case p:return L;default:return R}}case o:return R}}}function _(L){return D(L)===g}return Mt.AsyncMode=m,Mt.ConcurrentMode=g,Mt.ContextConsumer=h,Mt.ContextProvider=p,Mt.Element=l,Mt.ForwardRef=x,Mt.Fragment=s,Mt.Lazy=S,Mt.Memo=C,Mt.Portal=o,Mt.Profiler=d,Mt.StrictMode=u,Mt.Suspense=v,Mt.isAsyncMode=function(L){return _(L)||D(L)===m},Mt.isConcurrentMode=_,Mt.isContextConsumer=function(L){return D(L)===h},Mt.isContextProvider=function(L){return D(L)===p},Mt.isElement=function(L){return typeof L=="object"&&L!==null&&L.$$typeof===l},Mt.isForwardRef=function(L){return D(L)===x},Mt.isFragment=function(L){return D(L)===s},Mt.isLazy=function(L){return D(L)===S},Mt.isMemo=function(L){return D(L)===C},Mt.isPortal=function(L){return D(L)===o},Mt.isProfiler=function(L){return D(L)===d},Mt.isStrictMode=function(L){return D(L)===u},Mt.isSuspense=function(L){return D(L)===v},Mt.isValidElementType=function(L){return typeof L=="string"||typeof L=="function"||L===s||L===g||L===d||L===u||L===v||L===N||typeof L=="object"&&L!==null&&(L.$$typeof===S||L.$$typeof===C||L.$$typeof===p||L.$$typeof===h||L.$$typeof===x||L.$$typeof===M||L.$$typeof===j||L.$$typeof===E||L.$$typeof===w)},Mt.typeOf=D,Mt}var zg;function X2(){return zg||(zg=1,cd.exports=Q2()),cd.exports}var dd,Bg;function P2(){if(Bg)return dd;Bg=1;var r=X2(),l={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},d={};d[r.ForwardRef]=s,d[r.Memo]=u;function p(S){return r.isMemo(S)?u:d[S.$$typeof]||l}var h=Object.defineProperty,m=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,x=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,N=Object.prototype;function C(S,w,M){if(typeof w!="string"){if(N){var j=v(w);j&&j!==N&&C(S,j,M)}var E=m(w);g&&(E=E.concat(g(w)));for(var D=p(S),_=p(w),L=0;L<E.length;++L){var R=E[L];if(!o[R]&&!(M&&M[R])&&!(_&&_[R])&&!(D&&D[R])){var A=x(w,R);try{h(S,R,A)}catch{}}}}return S}return dd=C,dd}P2();var Z2=!0;function K2(r,l,o){var s="";return o.split(" ").forEach(function(u){r[u]!==void 0?l.push(r[u]+";"):u&&(s+=u+" ")}),s}var X0=function(l,o,s){var u=l.key+"-"+o.name;(s===!1||Z2===!1)&&l.registered[u]===void 0&&(l.registered[u]=o.styles)},J2=function(l,o,s){X0(l,o,s);var u=l.key+"-"+o.name;if(l.inserted[o.name]===void 0){var d=o;do l.insert(o===d?"."+u:"",d,l.sheet,!0),d=d.next;while(d!==void 0)}};function ew(r){for(var l=0,o,s=0,u=r.length;u>=4;++s,u-=4)o=r.charCodeAt(s)&255|(r.charCodeAt(++s)&255)<<8|(r.charCodeAt(++s)&255)<<16|(r.charCodeAt(++s)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,l=(o&65535)*1540483477+((o>>>16)*59797<<16)^(l&65535)*1540483477+((l>>>16)*59797<<16);switch(u){case 3:l^=(r.charCodeAt(s+2)&255)<<16;case 2:l^=(r.charCodeAt(s+1)&255)<<8;case 1:l^=r.charCodeAt(s)&255,l=(l&65535)*1540483477+((l>>>16)*59797<<16)}return l^=l>>>13,l=(l&65535)*1540483477+((l>>>16)*59797<<16),((l^l>>>15)>>>0).toString(36)}var tw={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},nw=/[A-Z]|^ms/g,rw=/_EMO_([^_]+?)_([^]*?)_EMO_/g,P0=function(l){return l.charCodeAt(1)===45},Ig=function(l){return l!=null&&typeof l!="boolean"},fd=H2(function(r){return P0(r)?r:r.replace(nw,"-$&").toLowerCase()}),Hg=function(l,o){switch(l){case"animation":case"animationName":if(typeof o=="string")return o.replace(rw,function(s,u,d){return yr={name:u,styles:d,next:yr},u})}return tw[l]!==1&&!P0(l)&&typeof o=="number"&&o!==0?o+"px":o};function Io(r,l,o){if(o==null)return"";var s=o;if(s.__emotion_styles!==void 0)return s;switch(typeof o){case"boolean":return"";case"object":{var u=o;if(u.anim===1)return yr={name:u.name,styles:u.styles,next:yr},u.name;var d=o;if(d.styles!==void 0){var p=d.next;if(p!==void 0)for(;p!==void 0;)yr={name:p.name,styles:p.styles,next:yr},p=p.next;var h=d.styles+";";return h}return lw(r,l,o)}case"function":{if(r!==void 0){var m=yr,g=o(r);return yr=m,Io(r,l,g)}break}}var x=o;return x}function lw(r,l,o){var s="";if(Array.isArray(o))for(var u=0;u<o.length;u++)s+=Io(r,l,o[u])+";";else for(var d in o){var p=o[d];if(typeof p!="object"){var h=p;Ig(h)&&(s+=fd(d)+":"+Hg(d,h)+";")}else if(Array.isArray(p)&&typeof p[0]=="string"&&l==null)for(var m=0;m<p.length;m++)Ig(p[m])&&(s+=fd(d)+":"+Hg(d,p[m])+";");else{var g=Io(r,l,p);switch(d){case"animation":case"animationName":{s+=fd(d)+":"+g+";";break}default:s+=d+"{"+g+"}"}}}return s}var Vg=/label:\s*([^\s;{]+)\s*(;|$)/g,yr;function Z0(r,l,o){if(r.length===1&&typeof r[0]=="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var s=!0,u="";yr=void 0;var d=r[0];if(d==null||d.raw===void 0)s=!1,u+=Io(o,l,d);else{var p=d;u+=p[0]}for(var h=1;h<r.length;h++)if(u+=Io(o,l,r[h]),s){var m=d;u+=m[h]}Vg.lastIndex=0;for(var g="",x;(x=Vg.exec(u))!==null;)g+="-"+x[1];var v=ew(u)+g;return{name:v,styles:u,next:yr}}var aw=function(l){return l()},ow=ag.useInsertionEffect?ag.useInsertionEffect:!1,sw=ow||aw,K0=b.createContext(typeof HTMLElement<"u"?Y2({key:"css"}):null);K0.Provider;var iw=function(l){return b.forwardRef(function(o,s){var u=b.useContext(K0);return l(o,u,s)})},uw=b.createContext({}),df={}.hasOwnProperty,Ud="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",cw=function(l,o){var s={};for(var u in o)df.call(o,u)&&(s[u]=o[u]);return s[Ud]=l,s},dw=function(l){var o=l.cache,s=l.serialized,u=l.isStringTag;return X0(o,s,u),sw(function(){return J2(o,s,u)}),null},fw=iw(function(r,l,o){var s=r.css;typeof s=="string"&&l.registered[s]!==void 0&&(s=l.registered[s]);var u=r[Ud],d=[s],p="";typeof r.className=="string"?p=K2(l.registered,d,r.className):r.className!=null&&(p=r.className+" ");var h=Z0(d,void 0,b.useContext(uw));p+=l.key+"-"+h.name;var m={};for(var g in r)df.call(r,g)&&g!=="css"&&g!==Ud&&(m[g]=r[g]);return m.className=p,o&&(m.ref=o),b.createElement(b.Fragment,null,b.createElement(dw,{cache:l,serialized:h,isStringTag:typeof u=="string"}),b.createElement(u,m))}),pw=fw,He=function(l,o){var s=arguments;if(o==null||!df.call(o,"css"))return b.createElement.apply(void 0,s);var u=s.length,d=new Array(u);d[0]=pw,d[1]=cw(l,o);for(var p=2;p<u;p++)d[p]=s[p];return b.createElement.apply(null,d)};(function(r){var l;l||(l=r.JSX||(r.JSX={}))})(He||(He={}));function ff(){for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return Z0(l)}function mw(){var r=ff.apply(void 0,arguments),l="animation-"+r.name;return{name:l,styles:"@keyframes "+l+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function hw(r,l){return l||(l=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(l)}}))}const gw=Math.min,xw=Math.max,_i=Math.round,di=Math.floor,Ai=r=>({x:r,y:r});function yw(r){const{x:l,y:o,width:s,height:u}=r;return{width:s,height:u,top:o,left:l,right:l+s,bottom:o+u,x:l,y:o}}function $i(){return typeof window<"u"}function J0(r){return tx(r)?(r.nodeName||"").toLowerCase():"#document"}function Fr(r){var l;return(r==null||(l=r.ownerDocument)==null?void 0:l.defaultView)||window}function ex(r){var l;return(l=(tx(r)?r.ownerDocument:r.document)||window.document)==null?void 0:l.documentElement}function tx(r){return $i()?r instanceof Node||r instanceof Fr(r).Node:!1}function vw(r){return $i()?r instanceof Element||r instanceof Fr(r).Element:!1}function pf(r){return $i()?r instanceof HTMLElement||r instanceof Fr(r).HTMLElement:!1}function Ug(r){return!$i()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Fr(r).ShadowRoot}const bw=new Set(["inline","contents"]);function nx(r){const{overflow:l,overflowX:o,overflowY:s,display:u}=mf(r);return/auto|scroll|overlay|hidden|clip/.test(l+s+o)&&!bw.has(u)}function ww(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Sw=new Set(["html","body","#document"]);function Nw(r){return Sw.has(J0(r))}function mf(r){return Fr(r).getComputedStyle(r)}function jw(r){if(J0(r)==="html")return r;const l=r.assignedSlot||r.parentNode||Ug(r)&&r.host||ex(r);return Ug(l)?l.host:l}function rx(r){const l=jw(r);return Nw(l)?r.ownerDocument?r.ownerDocument.body:r.body:pf(l)&&nx(l)?l:rx(l)}function Ri(r,l,o){var s;l===void 0&&(l=[]),o===void 0&&(o=!0);const u=rx(r),d=u===((s=r.ownerDocument)==null?void 0:s.body),p=Fr(u);if(d){const h=Gd(p);return l.concat(p,p.visualViewport||[],nx(u)?u:[],h&&o?Ri(h):[])}return l.concat(u,Ri(u,[],o))}function Gd(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function Cw(r){const l=mf(r);let o=parseFloat(l.width)||0,s=parseFloat(l.height)||0;const u=pf(r),d=u?r.offsetWidth:o,p=u?r.offsetHeight:s,h=_i(o)!==d||_i(s)!==p;return h&&(o=d,s=p),{width:o,height:s,$:h}}function hf(r){return vw(r)?r:r.contextElement}function Gg(r){const l=hf(r);if(!pf(l))return Ai(1);const o=l.getBoundingClientRect(),{width:s,height:u,$:d}=Cw(l);let p=(d?_i(o.width):o.width)/s,h=(d?_i(o.height):o.height)/u;return(!p||!Number.isFinite(p))&&(p=1),(!h||!Number.isFinite(h))&&(h=1),{x:p,y:h}}const kw=Ai(0);function Mw(r){const l=Fr(r);return!ww()||!l.visualViewport?kw:{x:l.visualViewport.offsetLeft,y:l.visualViewport.offsetTop}}function Ow(r,l,o){return!1}function qg(r,l,o,s){l===void 0&&(l=!1);const u=r.getBoundingClientRect(),d=hf(r);let p=Ai(1);l&&(p=Gg(r));const h=Ow()?Mw(d):Ai(0);let m=(u.left+h.x)/p.x,g=(u.top+h.y)/p.y,x=u.width/p.x,v=u.height/p.y;if(d){const N=Fr(d),C=s;let S=N,w=Gd(S);for(;w&&s&&C!==S;){const M=Gg(w),j=w.getBoundingClientRect(),E=mf(w),D=j.left+(w.clientLeft+parseFloat(E.paddingLeft))*M.x,_=j.top+(w.clientTop+parseFloat(E.paddingTop))*M.y;m*=M.x,g*=M.y,x*=M.x,v*=M.y,m+=D,g+=_,S=Fr(w),w=Gd(S)}}return yw({width:x,height:v,x:m,y:g})}function lx(r,l){return r.x===l.x&&r.y===l.y&&r.width===l.width&&r.height===l.height}function Ew(r,l){let o=null,s;const u=ex(r);function d(){var h;clearTimeout(s),(h=o)==null||h.disconnect(),o=null}function p(h,m){h===void 0&&(h=!1),m===void 0&&(m=1),d();const g=r.getBoundingClientRect(),{left:x,top:v,width:N,height:C}=g;if(h||l(),!N||!C)return;const S=di(v),w=di(u.clientWidth-(x+N)),M=di(u.clientHeight-(v+C)),j=di(x),D={rootMargin:-S+"px "+-w+"px "+-M+"px "+-j+"px",threshold:xw(0,gw(1,m))||1};let _=!0;function L(R){const A=R[0].intersectionRatio;if(A!==m){if(!_)return p();A?p(!1,A):s=setTimeout(()=>{p(!1,1e-7)},1e3)}A===1&&!lx(g,r.getBoundingClientRect())&&p(),_=!1}try{o=new IntersectionObserver(L,{...D,root:u.ownerDocument})}catch{o=new IntersectionObserver(L,D)}o.observe(r)}return p(!0),d}function Tw(r,l,o,s){s===void 0&&(s={});const{ancestorScroll:u=!0,ancestorResize:d=!0,elementResize:p=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:m=!1}=s,g=hf(r),x=u||d?[...g?Ri(g):[],...Ri(l)]:[];x.forEach(j=>{u&&j.addEventListener("scroll",o,{passive:!0}),d&&j.addEventListener("resize",o)});const v=g&&h?Ew(g,o):null;let N=-1,C=null;p&&(C=new ResizeObserver(j=>{let[E]=j;E&&E.target===g&&C&&(C.unobserve(l),cancelAnimationFrame(N),N=requestAnimationFrame(()=>{var D;(D=C)==null||D.observe(l)})),o()}),g&&!m&&C.observe(g),C.observe(l));let S,w=m?qg(r):null;m&&M();function M(){const j=qg(r);w&&!lx(w,j)&&o(),w=j,S=requestAnimationFrame(M)}return o(),()=>{var j;x.forEach(E=>{u&&E.removeEventListener("scroll",o),d&&E.removeEventListener("resize",o)}),v?.(),(j=C)==null||j.disconnect(),C=null,m&&cancelAnimationFrame(S)}}var qd=b.useLayoutEffect,Lw=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Di=function(){};function _w(r,l){return l?l[0]==="-"?r+l:r+"__"+l:r}function Aw(r,l){for(var o=arguments.length,s=new Array(o>2?o-2:0),u=2;u<o;u++)s[u-2]=arguments[u];var d=[].concat(s);if(l&&r)for(var p in l)l.hasOwnProperty(p)&&l[p]&&d.push("".concat(_w(r,p)));return d.filter(function(h){return h}).map(function(h){return String(h).trim()}).join(" ")}var Wg=function(l){return Gw(l)?l.filter(Boolean):Ul(l)==="object"&&l!==null?[l]:[]},ax=function(l){l.className,l.clearValue,l.cx,l.getStyles,l.getClassNames,l.getValue,l.hasValue,l.isMulti,l.isRtl,l.options,l.selectOption,l.selectProps,l.setValue,l.theme;var o=Qr(l,Lw);return Ue({},o)},Yt=function(l,o,s){var u=l.cx,d=l.getStyles,p=l.getClassNames,h=l.className;return{css:d(o,l),className:u(s??{},p(o,l),h)}};function Yi(r){return[document.documentElement,document.body,window].indexOf(r)>-1}function Rw(r){return Yi(r)?window.innerHeight:r.clientHeight}function ox(r){return Yi(r)?window.pageYOffset:r.scrollTop}function zi(r,l){if(Yi(r)){window.scrollTo(0,l);return}r.scrollTop=l}function Dw(r){var l=getComputedStyle(r),o=l.position==="absolute",s=/(auto|scroll)/;if(l.position==="fixed")return document.documentElement;for(var u=r;u=u.parentElement;)if(l=getComputedStyle(u),!(o&&l.position==="static")&&s.test(l.overflow+l.overflowY+l.overflowX))return u;return document.documentElement}function zw(r,l,o,s){return o*((r=r/s-1)*r*r+1)+l}function fi(r,l){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Di,u=ox(r),d=l-u,p=10,h=0;function m(){h+=p;var g=zw(h,u,d,o);zi(r,g),h<o?window.requestAnimationFrame(m):s(r)}m()}function Fg(r,l){var o=r.getBoundingClientRect(),s=l.getBoundingClientRect(),u=l.offsetHeight/3;s.bottom+u>o.bottom?zi(r,Math.min(l.offsetTop+l.clientHeight-r.offsetHeight+u,r.scrollHeight)):s.top-u<o.top&&zi(r,Math.max(l.offsetTop-u,0))}function Bw(r){var l=r.getBoundingClientRect();return{bottom:l.bottom,height:l.height,left:l.left,right:l.right,top:l.top,width:l.width}}function $g(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Iw(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var sx=!1,Hw={get passive(){return sx=!0}},pi=typeof window<"u"?window:{};pi.addEventListener&&pi.removeEventListener&&(pi.addEventListener("p",Di,Hw),pi.removeEventListener("p",Di,!1));var Vw=sx;function Uw(r){return r!=null}function Gw(r){return Array.isArray(r)}function mi(r,l,o){return r?l:o}var qw=function(l){for(var o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];var d=Object.entries(l).filter(function(p){var h=Wr(p,1),m=h[0];return!s.includes(m)});return d.reduce(function(p,h){var m=Wr(h,2),g=m[0],x=m[1];return p[g]=x,p},{})},Ww=["children","innerProps"],Fw=["children","innerProps"];function $w(r){var l=r.maxHeight,o=r.menuEl,s=r.minHeight,u=r.placement,d=r.shouldScroll,p=r.isFixedPosition,h=r.controlHeight,m=Dw(o),g={placement:"bottom",maxHeight:l};if(!o||!o.offsetParent)return g;var x=m.getBoundingClientRect(),v=x.height,N=o.getBoundingClientRect(),C=N.bottom,S=N.height,w=N.top,M=o.offsetParent.getBoundingClientRect(),j=M.top,E=p?window.innerHeight:Rw(m),D=ox(m),_=parseInt(getComputedStyle(o).marginBottom,10),L=parseInt(getComputedStyle(o).marginTop,10),R=j-L,A=E-w,B=R+D,G=v-D-w,U=C-E+D+_,W=D+w-L,J=160;switch(u){case"auto":case"bottom":if(A>=S)return{placement:"bottom",maxHeight:l};if(G>=S&&!p)return d&&fi(m,U,J),{placement:"bottom",maxHeight:l};if(!p&&G>=s||p&&A>=s){d&&fi(m,U,J);var xe=p?A-_:G-_;return{placement:"bottom",maxHeight:xe}}if(u==="auto"||p){var ae=l,le=p?R:B;return le>=s&&(ae=Math.min(le-_-h,l)),{placement:"top",maxHeight:ae}}if(u==="bottom")return d&&zi(m,U),{placement:"bottom",maxHeight:l};break;case"top":if(R>=S)return{placement:"top",maxHeight:l};if(B>=S&&!p)return d&&fi(m,W,J),{placement:"top",maxHeight:l};if(!p&&B>=s||p&&R>=s){var z=l;return(!p&&B>=s||p&&R>=s)&&(z=p?R-L:B-L),d&&fi(m,W,J),{placement:"top",maxHeight:z}}return{placement:"bottom",maxHeight:l};default:throw new Error('Invalid placement provided "'.concat(u,'".'))}return g}function Yw(r){var l={bottom:"top",top:"bottom"};return r?l[r]:"bottom"}var ix=function(l){return l==="auto"?"bottom":l},Qw=function(l,o){var s,u=l.placement,d=l.theme,p=d.borderRadius,h=d.spacing,m=d.colors;return Ue((s={label:"menu"},Eo(s,Yw(u),"100%"),Eo(s,"position","absolute"),Eo(s,"width","100%"),Eo(s,"zIndex",1),s),o?{}:{backgroundColor:m.neutral0,borderRadius:p,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:h.menuGutter,marginTop:h.menuGutter})},ux=b.createContext(null),Xw=function(l){var o=l.children,s=l.minMenuHeight,u=l.maxMenuHeight,d=l.menuPlacement,p=l.menuPosition,h=l.menuShouldScrollIntoView,m=l.theme,g=b.useContext(ux)||{},x=g.setPortalPlacement,v=b.useRef(null),N=b.useState(u),C=Wr(N,2),S=C[0],w=C[1],M=b.useState(null),j=Wr(M,2),E=j[0],D=j[1],_=m.spacing.controlHeight;return qd(function(){var L=v.current;if(L){var R=p==="fixed",A=h&&!R,B=$w({maxHeight:u,menuEl:L,minHeight:s,placement:d,shouldScroll:A,isFixedPosition:R,controlHeight:_});w(B.maxHeight),D(B.placement),x?.(B.placement)}},[u,d,p,h,s,x,_]),o({ref:v,placerProps:Ue(Ue({},l),{},{placement:E||ix(d),maxHeight:S})})},Pw=function(l){var o=l.children,s=l.innerRef,u=l.innerProps;return He("div",$e({},Yt(l,"menu",{menu:!0}),{ref:s},u),o)},Zw=Pw,Kw=function(l,o){var s=l.maxHeight,u=l.theme.spacing.baseUnit;return Ue({maxHeight:s,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},o?{}:{paddingBottom:u,paddingTop:u})},Jw=function(l){var o=l.children,s=l.innerProps,u=l.innerRef,d=l.isMulti;return He("div",$e({},Yt(l,"menuList",{"menu-list":!0,"menu-list--is-multi":d}),{ref:u},s),o)},cx=function(l,o){var s=l.theme,u=s.spacing.baseUnit,d=s.colors;return Ue({textAlign:"center"},o?{}:{color:d.neutral40,padding:"".concat(u*2,"px ").concat(u*3,"px")})},eS=cx,tS=cx,nS=function(l){var o=l.children,s=o===void 0?"No options":o,u=l.innerProps,d=Qr(l,Ww);return He("div",$e({},Yt(Ue(Ue({},d),{},{children:s,innerProps:u}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),u),s)},rS=function(l){var o=l.children,s=o===void 0?"Loading...":o,u=l.innerProps,d=Qr(l,Fw);return He("div",$e({},Yt(Ue(Ue({},d),{},{children:s,innerProps:u}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),u),s)},lS=function(l){var o=l.rect,s=l.offset,u=l.position;return{left:o.left,position:u,top:s,width:o.width,zIndex:1}},aS=function(l){var o=l.appendTo,s=l.children,u=l.controlElement,d=l.innerProps,p=l.menuPlacement,h=l.menuPosition,m=b.useRef(null),g=b.useRef(null),x=b.useState(ix(p)),v=Wr(x,2),N=v[0],C=v[1],S=b.useMemo(function(){return{setPortalPlacement:C}},[]),w=b.useState(null),M=Wr(w,2),j=M[0],E=M[1],D=b.useCallback(function(){if(u){var A=Bw(u),B=h==="fixed"?0:window.pageYOffset,G=A[N]+B;(G!==j?.offset||A.left!==j?.rect.left||A.width!==j?.rect.width)&&E({offset:G,rect:A})}},[u,h,N,j?.offset,j?.rect.left,j?.rect.width]);qd(function(){D()},[D]);var _=b.useCallback(function(){typeof g.current=="function"&&(g.current(),g.current=null),u&&m.current&&(g.current=Tw(u,m.current,D,{elementResize:"ResizeObserver"in window}))},[u,D]);qd(function(){_()},[_]);var L=b.useCallback(function(A){m.current=A,_()},[_]);if(!o&&h!=="fixed"||!j)return null;var R=He("div",$e({ref:L},Yt(Ue(Ue({},l),{},{offset:j.offset,position:h,rect:j.rect}),"menuPortal",{"menu-portal":!0}),d),s);return He(ux.Provider,{value:S},o?lr.createPortal(R,o):R)},oS=function(l){var o=l.isDisabled,s=l.isRtl;return{label:"container",direction:s?"rtl":void 0,pointerEvents:o?"none":void 0,position:"relative"}},sS=function(l){var o=l.children,s=l.innerProps,u=l.isDisabled,d=l.isRtl;return He("div",$e({},Yt(l,"container",{"--is-disabled":u,"--is-rtl":d}),s),o)},iS=function(l,o){var s=l.theme.spacing,u=l.isMulti,d=l.hasValue,p=l.selectProps.controlShouldRenderValue;return Ue({alignItems:"center",display:u&&d&&p?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},o?{}:{padding:"".concat(s.baseUnit/2,"px ").concat(s.baseUnit*2,"px")})},uS=function(l){var o=l.children,s=l.innerProps,u=l.isMulti,d=l.hasValue;return He("div",$e({},Yt(l,"valueContainer",{"value-container":!0,"value-container--is-multi":u,"value-container--has-value":d}),s),o)},cS=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},dS=function(l){var o=l.children,s=l.innerProps;return He("div",$e({},Yt(l,"indicatorsContainer",{indicators:!0}),s),o)},Yg,fS=["size"],pS=["innerProps","isRtl","size"],mS={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},dx=function(l){var o=l.size,s=Qr(l,fS);return He("svg",$e({height:o,width:o,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:mS},s))},gf=function(l){return He(dx,$e({size:20},l),He("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},fx=function(l){return He(dx,$e({size:20},l),He("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},px=function(l,o){var s=l.isFocused,u=l.theme,d=u.spacing.baseUnit,p=u.colors;return Ue({label:"indicatorContainer",display:"flex",transition:"color 150ms"},o?{}:{color:s?p.neutral60:p.neutral20,padding:d*2,":hover":{color:s?p.neutral80:p.neutral40}})},hS=px,gS=function(l){var o=l.children,s=l.innerProps;return He("div",$e({},Yt(l,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),s),o||He(fx,null))},xS=px,yS=function(l){var o=l.children,s=l.innerProps;return He("div",$e({},Yt(l,"clearIndicator",{indicator:!0,"clear-indicator":!0}),s),o||He(gf,null))},vS=function(l,o){var s=l.isDisabled,u=l.theme,d=u.spacing.baseUnit,p=u.colors;return Ue({label:"indicatorSeparator",alignSelf:"stretch",width:1},o?{}:{backgroundColor:s?p.neutral10:p.neutral20,marginBottom:d*2,marginTop:d*2})},bS=function(l){var o=l.innerProps;return He("span",$e({},o,Yt(l,"indicatorSeparator",{"indicator-separator":!0})))},wS=mw(Yg||(Yg=hw([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),SS=function(l,o){var s=l.isFocused,u=l.size,d=l.theme,p=d.colors,h=d.spacing.baseUnit;return Ue({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:u,lineHeight:1,marginRight:u,textAlign:"center",verticalAlign:"middle"},o?{}:{color:s?p.neutral60:p.neutral20,padding:h*2})},pd=function(l){var o=l.delay,s=l.offset;return He("span",{css:ff({animation:"".concat(wS," 1s ease-in-out ").concat(o,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},NS=function(l){var o=l.innerProps,s=l.isRtl,u=l.size,d=u===void 0?4:u,p=Qr(l,pS);return He("div",$e({},Yt(Ue(Ue({},p),{},{innerProps:o,isRtl:s,size:d}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),o),He(pd,{delay:0,offset:s}),He(pd,{delay:160,offset:!0}),He(pd,{delay:320,offset:!s}))},jS=function(l,o){var s=l.isDisabled,u=l.isFocused,d=l.theme,p=d.colors,h=d.borderRadius,m=d.spacing;return Ue({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:m.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},o?{}:{backgroundColor:s?p.neutral5:p.neutral0,borderColor:s?p.neutral10:u?p.primary:p.neutral20,borderRadius:h,borderStyle:"solid",borderWidth:1,boxShadow:u?"0 0 0 1px ".concat(p.primary):void 0,"&:hover":{borderColor:u?p.primary:p.neutral30}})},CS=function(l){var o=l.children,s=l.isDisabled,u=l.isFocused,d=l.innerRef,p=l.innerProps,h=l.menuIsOpen;return He("div",$e({ref:d},Yt(l,"control",{control:!0,"control--is-disabled":s,"control--is-focused":u,"control--menu-is-open":h}),p,{"aria-disabled":s||void 0}),o)},kS=CS,MS=["data"],OS=function(l,o){var s=l.theme.spacing;return o?{}:{paddingBottom:s.baseUnit*2,paddingTop:s.baseUnit*2}},ES=function(l){var o=l.children,s=l.cx,u=l.getStyles,d=l.getClassNames,p=l.Heading,h=l.headingProps,m=l.innerProps,g=l.label,x=l.theme,v=l.selectProps;return He("div",$e({},Yt(l,"group",{group:!0}),m),He(p,$e({},h,{selectProps:v,theme:x,getStyles:u,getClassNames:d,cx:s}),g),He("div",null,o))},TS=function(l,o){var s=l.theme,u=s.colors,d=s.spacing;return Ue({label:"group",cursor:"default",display:"block"},o?{}:{color:u.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:d.baseUnit*3,paddingRight:d.baseUnit*3,textTransform:"uppercase"})},LS=function(l){var o=ax(l);o.data;var s=Qr(o,MS);return He("div",$e({},Yt(l,"groupHeading",{"group-heading":!0}),s))},_S=ES,AS=["innerRef","isDisabled","isHidden","inputClassName"],RS=function(l,o){var s=l.isDisabled,u=l.value,d=l.theme,p=d.spacing,h=d.colors;return Ue(Ue({visibility:s?"hidden":"visible",transform:u?"translateZ(0)":""},DS),o?{}:{margin:p.baseUnit/2,paddingBottom:p.baseUnit/2,paddingTop:p.baseUnit/2,color:h.neutral80})},mx={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},DS={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ue({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},mx)},zS=function(l){return Ue({label:"input",color:"inherit",background:0,opacity:l?0:1,width:"100%"},mx)},BS=function(l){var o=l.cx,s=l.value,u=ax(l),d=u.innerRef,p=u.isDisabled,h=u.isHidden,m=u.inputClassName,g=Qr(u,AS);return He("div",$e({},Yt(l,"input",{"input-container":!0}),{"data-value":s||""}),He("input",$e({className:o({input:!0},m),ref:d,style:zS(h),disabled:p},g)))},IS=BS,HS=function(l,o){var s=l.theme,u=s.spacing,d=s.borderRadius,p=s.colors;return Ue({label:"multiValue",display:"flex",minWidth:0},o?{}:{backgroundColor:p.neutral10,borderRadius:d/2,margin:u.baseUnit/2})},VS=function(l,o){var s=l.theme,u=s.borderRadius,d=s.colors,p=l.cropWithEllipsis;return Ue({overflow:"hidden",textOverflow:p||p===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},o?{}:{borderRadius:u/2,color:d.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},US=function(l,o){var s=l.theme,u=s.spacing,d=s.borderRadius,p=s.colors,h=l.isFocused;return Ue({alignItems:"center",display:"flex"},o?{}:{borderRadius:d/2,backgroundColor:h?p.dangerLight:void 0,paddingLeft:u.baseUnit,paddingRight:u.baseUnit,":hover":{backgroundColor:p.dangerLight,color:p.danger}})},hx=function(l){var o=l.children,s=l.innerProps;return He("div",s,o)},GS=hx,qS=hx;function WS(r){var l=r.children,o=r.innerProps;return He("div",$e({role:"button"},o),l||He(gf,{size:14}))}var FS=function(l){var o=l.children,s=l.components,u=l.data,d=l.innerProps,p=l.isDisabled,h=l.removeProps,m=l.selectProps,g=s.Container,x=s.Label,v=s.Remove;return He(g,{data:u,innerProps:Ue(Ue({},Yt(l,"multiValue",{"multi-value":!0,"multi-value--is-disabled":p})),d),selectProps:m},He(x,{data:u,innerProps:Ue({},Yt(l,"multiValueLabel",{"multi-value__label":!0})),selectProps:m},o),He(v,{data:u,innerProps:Ue(Ue({},Yt(l,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(o||"option")},h),selectProps:m}))},$S=FS,YS=function(l,o){var s=l.isDisabled,u=l.isFocused,d=l.isSelected,p=l.theme,h=p.spacing,m=p.colors;return Ue({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},o?{}:{backgroundColor:d?m.primary:u?m.primary25:"transparent",color:s?m.neutral20:d?m.neutral0:"inherit",padding:"".concat(h.baseUnit*2,"px ").concat(h.baseUnit*3,"px"),":active":{backgroundColor:s?void 0:d?m.primary:m.primary50}})},QS=function(l){var o=l.children,s=l.isDisabled,u=l.isFocused,d=l.isSelected,p=l.innerRef,h=l.innerProps;return He("div",$e({},Yt(l,"option",{option:!0,"option--is-disabled":s,"option--is-focused":u,"option--is-selected":d}),{ref:p,"aria-disabled":s},h),o)},XS=QS,PS=function(l,o){var s=l.theme,u=s.spacing,d=s.colors;return Ue({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},o?{}:{color:d.neutral50,marginLeft:u.baseUnit/2,marginRight:u.baseUnit/2})},ZS=function(l){var o=l.children,s=l.innerProps;return He("div",$e({},Yt(l,"placeholder",{placeholder:!0}),s),o)},KS=ZS,JS=function(l,o){var s=l.isDisabled,u=l.theme,d=u.spacing,p=u.colors;return Ue({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o?{}:{color:s?p.neutral40:p.neutral80,marginLeft:d.baseUnit/2,marginRight:d.baseUnit/2})},e5=function(l){var o=l.children,s=l.isDisabled,u=l.innerProps;return He("div",$e({},Yt(l,"singleValue",{"single-value":!0,"single-value--is-disabled":s}),u),o)},t5=e5,gx={ClearIndicator:yS,Control:kS,DropdownIndicator:gS,DownChevron:fx,CrossIcon:gf,Group:_S,GroupHeading:LS,IndicatorsContainer:dS,IndicatorSeparator:bS,Input:IS,LoadingIndicator:NS,Menu:Zw,MenuList:Jw,MenuPortal:aS,LoadingMessage:rS,NoOptionsMessage:nS,MultiValue:$S,MultiValueContainer:GS,MultiValueLabel:qS,MultiValueRemove:WS,Option:XS,Placeholder:KS,SelectContainer:sS,SingleValue:t5,ValueContainer:uS},n5=function(l){return Ue(Ue({},gx),l.components)},Qg=Number.isNaN||function(l){return typeof l=="number"&&l!==l};function r5(r,l){return!!(r===l||Qg(r)&&Qg(l))}function l5(r,l){if(r.length!==l.length)return!1;for(var o=0;o<r.length;o++)if(!r5(r[o],l[o]))return!1;return!0}function a5(r,l){l===void 0&&(l=l5);var o=null;function s(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];if(o&&o.lastThis===this&&l(u,o.lastArgs))return o.lastResult;var p=r.apply(this,u);return o={lastResult:p,lastArgs:u,lastThis:this},p}return s.clear=function(){o=null},s}var o5={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},s5=function(l){return He("span",$e({css:o5},l))},Xg=s5,i5={guidance:function(l){var o=l.isSearchable,s=l.isMulti,u=l.tabSelectsValue,d=l.context,p=l.isInitialFocus;switch(d){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(u?", press Tab to select the option and exit the menu":"",".");case"input":return p?"".concat(l["aria-label"]||"Select"," is focused ").concat(o?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(l){var o=l.action,s=l.label,u=s===void 0?"":s,d=l.labels,p=l.isDisabled;switch(o){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(u,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(d.length>1?"s":""," ").concat(d.join(","),", selected.");case"select-option":return p?"option ".concat(u," is disabled. Select another option."):"option ".concat(u,", selected.");default:return""}},onFocus:function(l){var o=l.context,s=l.focused,u=l.options,d=l.label,p=d===void 0?"":d,h=l.selectValue,m=l.isDisabled,g=l.isSelected,x=l.isAppleDevice,v=function(w,M){return w&&w.length?"".concat(w.indexOf(M)+1," of ").concat(w.length):""};if(o==="value"&&h)return"value ".concat(p," focused, ").concat(v(h,s),".");if(o==="menu"&&x){var N=m?" disabled":"",C="".concat(g?" selected":"").concat(N);return"".concat(p).concat(C,", ").concat(v(u,s),".")}return""},onFilter:function(l){var o=l.inputValue,s=l.resultsMessage;return"".concat(s).concat(o?" for search term "+o:"",".")}},u5=function(l){var o=l.ariaSelection,s=l.focusedOption,u=l.focusedValue,d=l.focusableOptions,p=l.isFocused,h=l.selectValue,m=l.selectProps,g=l.id,x=l.isAppleDevice,v=m.ariaLiveMessages,N=m.getOptionLabel,C=m.inputValue,S=m.isMulti,w=m.isOptionDisabled,M=m.isSearchable,j=m.menuIsOpen,E=m.options,D=m.screenReaderStatus,_=m.tabSelectsValue,L=m.isLoading,R=m["aria-label"],A=m["aria-live"],B=b.useMemo(function(){return Ue(Ue({},i5),v||{})},[v]),G=b.useMemo(function(){var le="";if(o&&B.onChange){var z=o.option,Y=o.options,de=o.removedValue,be=o.removedValues,ye=o.value,T=function(oe){return Array.isArray(oe)?null:oe},I=de||z||T(ye),O=I?N(I):"",F=Y||be||void 0,X=F?F.map(N):[],pe=Ue({isDisabled:I&&w(I,h),label:O,labels:X},o);le=B.onChange(pe)}return le},[o,B,w,h,N]),U=b.useMemo(function(){var le="",z=s||u,Y=!!(s&&h&&h.includes(s));if(z&&B.onFocus){var de={focused:z,label:N(z),isDisabled:w(z,h),isSelected:Y,options:d,context:z===s?"menu":"value",selectValue:h,isAppleDevice:x};le=B.onFocus(de)}return le},[s,u,N,w,B,d,h,x]),W=b.useMemo(function(){var le="";if(j&&E.length&&!L&&B.onFilter){var z=D({count:d.length});le=B.onFilter({inputValue:C,resultsMessage:z})}return le},[d,C,j,B,E,D,L]),J=o?.action==="initial-input-focus",xe=b.useMemo(function(){var le="";if(B.guidance){var z=u?"value":j?"menu":"input";le=B.guidance({"aria-label":R,context:z,isDisabled:s&&w(s,h),isMulti:S,isSearchable:M,tabSelectsValue:_,isInitialFocus:J})}return le},[R,s,u,S,w,M,j,B,h,_,J]),ae=He(b.Fragment,null,He("span",{id:"aria-selection"},G),He("span",{id:"aria-focused"},U),He("span",{id:"aria-results"},W),He("span",{id:"aria-guidance"},xe));return He(b.Fragment,null,He(Xg,{id:g},J&&ae),He(Xg,{"aria-live":A,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},p&&!J&&ae))},c5=u5,Wd=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],d5=new RegExp("["+Wd.map(function(r){return r.letters}).join("")+"]","g"),xx={};for(var md=0;md<Wd.length;md++)for(var hd=Wd[md],gd=0;gd<hd.letters.length;gd++)xx[hd.letters[gd]]=hd.base;var yx=function(l){return l.replace(d5,function(o){return xx[o]})},f5=a5(yx),Pg=function(l){return l.replace(/^\s+|\s+$/g,"")},p5=function(l){return"".concat(l.label," ").concat(l.value)},Fd=function(l){return function(o,s){if(o.data.__isNew__)return!0;var u=Ue({ignoreCase:!0,ignoreAccents:!0,stringify:p5,trim:!0,matchFrom:"any"},l),d=u.ignoreCase,p=u.ignoreAccents,h=u.stringify,m=u.trim,g=u.matchFrom,x=m?Pg(s):s,v=m?Pg(h(o)):h(o);return d&&(x=x.toLowerCase(),v=v.toLowerCase()),p&&(x=f5(x),v=yx(v)),g==="start"?v.substr(0,x.length)===x:v.indexOf(x)>-1}},m5=["innerRef"];function h5(r){var l=r.innerRef,o=Qr(r,m5),s=qw(o,"onExited","in","enter","exit","appear");return He("input",$e({ref:l},s,{css:ff({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var g5=function(l){l.cancelable&&l.preventDefault(),l.stopPropagation()};function x5(r){var l=r.isEnabled,o=r.onBottomArrive,s=r.onBottomLeave,u=r.onTopArrive,d=r.onTopLeave,p=b.useRef(!1),h=b.useRef(!1),m=b.useRef(0),g=b.useRef(null),x=b.useCallback(function(M,j){if(g.current!==null){var E=g.current,D=E.scrollTop,_=E.scrollHeight,L=E.clientHeight,R=g.current,A=j>0,B=_-L-D,G=!1;B>j&&p.current&&(s&&s(M),p.current=!1),A&&h.current&&(d&&d(M),h.current=!1),A&&j>B?(o&&!p.current&&o(M),R.scrollTop=_,G=!0,p.current=!0):!A&&-j>D&&(u&&!h.current&&u(M),R.scrollTop=0,G=!0,h.current=!0),G&&g5(M)}},[o,s,u,d]),v=b.useCallback(function(M){x(M,M.deltaY)},[x]),N=b.useCallback(function(M){m.current=M.changedTouches[0].clientY},[]),C=b.useCallback(function(M){var j=m.current-M.changedTouches[0].clientY;x(M,j)},[x]),S=b.useCallback(function(M){if(M){var j=Vw?{passive:!1}:!1;M.addEventListener("wheel",v,j),M.addEventListener("touchstart",N,j),M.addEventListener("touchmove",C,j)}},[C,N,v]),w=b.useCallback(function(M){M&&(M.removeEventListener("wheel",v,!1),M.removeEventListener("touchstart",N,!1),M.removeEventListener("touchmove",C,!1))},[C,N,v]);return b.useEffect(function(){if(l){var M=g.current;return S(M),function(){w(M)}}},[l,S,w]),function(M){g.current=M}}var Zg=["boxSizing","height","overflow","paddingRight","position"],Kg={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Jg(r){r.cancelable&&r.preventDefault()}function e0(r){r.stopPropagation()}function t0(){var r=this.scrollTop,l=this.scrollHeight,o=r+this.offsetHeight;r===0?this.scrollTop=1:o===l&&(this.scrollTop=r-1)}function n0(){return"ontouchstart"in window||navigator.maxTouchPoints}var r0=!!(typeof window<"u"&&window.document&&window.document.createElement),Oo=0,ja={capture:!1,passive:!1};function y5(r){var l=r.isEnabled,o=r.accountForScrollbars,s=o===void 0?!0:o,u=b.useRef({}),d=b.useRef(null),p=b.useCallback(function(m){if(r0){var g=document.body,x=g&&g.style;if(s&&Zg.forEach(function(S){var w=x&&x[S];u.current[S]=w}),s&&Oo<1){var v=parseInt(u.current.paddingRight,10)||0,N=document.body?document.body.clientWidth:0,C=window.innerWidth-N+v||0;Object.keys(Kg).forEach(function(S){var w=Kg[S];x&&(x[S]=w)}),x&&(x.paddingRight="".concat(C,"px"))}g&&n0()&&(g.addEventListener("touchmove",Jg,ja),m&&(m.addEventListener("touchstart",t0,ja),m.addEventListener("touchmove",e0,ja))),Oo+=1}},[s]),h=b.useCallback(function(m){if(r0){var g=document.body,x=g&&g.style;Oo=Math.max(Oo-1,0),s&&Oo<1&&Zg.forEach(function(v){var N=u.current[v];x&&(x[v]=N)}),g&&n0()&&(g.removeEventListener("touchmove",Jg,ja),m&&(m.removeEventListener("touchstart",t0,ja),m.removeEventListener("touchmove",e0,ja)))}},[s]);return b.useEffect(function(){if(l){var m=d.current;return p(m),function(){h(m)}}},[l,p,h]),function(m){d.current=m}}var v5=function(l){var o=l.target;return o.ownerDocument.activeElement&&o.ownerDocument.activeElement.blur()},b5={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function w5(r){var l=r.children,o=r.lockEnabled,s=r.captureEnabled,u=s===void 0?!0:s,d=r.onBottomArrive,p=r.onBottomLeave,h=r.onTopArrive,m=r.onTopLeave,g=x5({isEnabled:u,onBottomArrive:d,onBottomLeave:p,onTopArrive:h,onTopLeave:m}),x=y5({isEnabled:o}),v=function(C){g(C),x(C)};return He(b.Fragment,null,o&&He("div",{onClick:v5,css:b5}),l(v))}var S5={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},N5=function(l){var o=l.name,s=l.onFocus;return He("input",{required:!0,name:o,tabIndex:-1,"aria-hidden":"true",onFocus:s,css:S5,value:"",onChange:function(){}})},j5=N5;function xf(r){var l;return typeof window<"u"&&window.navigator!=null?r.test(((l=window.navigator.userAgentData)===null||l===void 0?void 0:l.platform)||window.navigator.platform):!1}function C5(){return xf(/^iPhone/i)}function vx(){return xf(/^Mac/i)}function k5(){return xf(/^iPad/i)||vx()&&navigator.maxTouchPoints>1}function M5(){return C5()||k5()}function O5(){return vx()||M5()}var E5=function(l){return l.label},T5=function(l){return l.label},L5=function(l){return l.value},_5=function(l){return!!l.isDisabled},A5={clearIndicator:xS,container:oS,control:jS,dropdownIndicator:hS,group:OS,groupHeading:TS,indicatorsContainer:cS,indicatorSeparator:vS,input:RS,loadingIndicator:SS,loadingMessage:tS,menu:Qw,menuList:Kw,menuPortal:lS,multiValue:HS,multiValueLabel:VS,multiValueRemove:US,noOptionsMessage:eS,option:YS,placeholder:PS,singleValue:JS,valueContainer:iS},R5={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},D5=4,bx=4,z5=38,B5=bx*2,I5={baseUnit:bx,controlHeight:z5,menuGutter:B5},xd={borderRadius:D5,colors:R5,spacing:I5},H5={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:$g(),captureMenuScroll:!$g(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Fd(),formatGroupLabel:E5,getOptionLabel:T5,getOptionValue:L5,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:_5,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Iw(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(l){var o=l.count;return"".concat(o," result").concat(o!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function l0(r,l,o,s){var u=Nx(r,l,o),d=jx(r,l,o),p=Sx(r,l),h=Bi(r,l);return{type:"option",data:l,isDisabled:u,isSelected:d,label:p,value:h,index:s}}function bi(r,l){return r.options.map(function(o,s){if("options"in o){var u=o.options.map(function(p,h){return l0(r,p,l,h)}).filter(function(p){return o0(r,p)});return u.length>0?{type:"group",data:o,options:u,index:s}:void 0}var d=l0(r,o,l,s);return o0(r,d)?d:void 0}).filter(Uw)}function wx(r){return r.reduce(function(l,o){return o.type==="group"?l.push.apply(l,of(o.options.map(function(s){return s.data}))):l.push(o.data),l},[])}function a0(r,l){return r.reduce(function(o,s){return s.type==="group"?o.push.apply(o,of(s.options.map(function(u){return{data:u.data,id:"".concat(l,"-").concat(s.index,"-").concat(u.index)}}))):o.push({data:s.data,id:"".concat(l,"-").concat(s.index)}),o},[])}function V5(r,l){return wx(bi(r,l))}function o0(r,l){var o=r.inputValue,s=o===void 0?"":o,u=l.data,d=l.isSelected,p=l.label,h=l.value;return(!kx(r)||!d)&&Cx(r,{label:p,value:h,data:u},s)}function U5(r,l){var o=r.focusedValue,s=r.selectValue,u=s.indexOf(o);if(u>-1){var d=l.indexOf(o);if(d>-1)return o;if(u<l.length)return l[u]}return null}function G5(r,l){var o=r.focusedOption;return o&&l.indexOf(o)>-1?o:l[0]}var yd=function(l,o){var s,u=(s=l.find(function(d){return d.data===o}))===null||s===void 0?void 0:s.id;return u||null},Sx=function(l,o){return l.getOptionLabel(o)},Bi=function(l,o){return l.getOptionValue(o)};function Nx(r,l,o){return typeof r.isOptionDisabled=="function"?r.isOptionDisabled(l,o):!1}function jx(r,l,o){if(o.indexOf(l)>-1)return!0;if(typeof r.isOptionSelected=="function")return r.isOptionSelected(l,o);var s=Bi(r,l);return o.some(function(u){return Bi(r,u)===s})}function Cx(r,l,o){return r.filterOption?r.filterOption(l,o):!0}var kx=function(l){var o=l.hideSelectedOptions,s=l.isMulti;return o===void 0?s:o},q5=1,Mx=(function(r){d2(o,r);var l=m2(o);function o(s){var u;if(u2(this,o),u=l.call(this,s),u.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},u.blockOptionHover=!1,u.isComposing=!1,u.commonProps=void 0,u.initialTouchX=0,u.initialTouchY=0,u.openAfterFocus=!1,u.scrollToFocusedOptionOnUpdate=!1,u.userIsDragging=void 0,u.controlRef=null,u.getControlRef=function(m){u.controlRef=m},u.focusedOptionRef=null,u.getFocusedOptionRef=function(m){u.focusedOptionRef=m},u.menuListRef=null,u.getMenuListRef=function(m){u.menuListRef=m},u.inputRef=null,u.getInputRef=function(m){u.inputRef=m},u.focus=u.focusInput,u.blur=u.blurInput,u.onChange=function(m,g){var x=u.props,v=x.onChange,N=x.name;g.name=N,u.ariaOnChange(m,g),v(m,g)},u.setValue=function(m,g,x){var v=u.props,N=v.closeMenuOnSelect,C=v.isMulti,S=v.inputValue;u.onInputChange("",{action:"set-value",prevInputValue:S}),N&&(u.setState({inputIsHiddenAfterUpdate:!C}),u.onMenuClose()),u.setState({clearFocusValueOnUpdate:!0}),u.onChange(m,{action:g,option:x})},u.selectOption=function(m){var g=u.props,x=g.blurInputOnSelect,v=g.isMulti,N=g.name,C=u.state.selectValue,S=v&&u.isOptionSelected(m,C),w=u.isOptionDisabled(m,C);if(S){var M=u.getOptionValue(m);u.setValue(C.filter(function(j){return u.getOptionValue(j)!==M}),"deselect-option",m)}else if(!w)v?u.setValue([].concat(of(C),[m]),"select-option",m):u.setValue(m,"select-option");else{u.ariaOnChange(m,{action:"select-option",option:m,name:N});return}x&&u.blurInput()},u.removeValue=function(m){var g=u.props.isMulti,x=u.state.selectValue,v=u.getOptionValue(m),N=x.filter(function(S){return u.getOptionValue(S)!==v}),C=mi(g,N,N[0]||null);u.onChange(C,{action:"remove-value",removedValue:m}),u.focusInput()},u.clearValue=function(){var m=u.state.selectValue;u.onChange(mi(u.props.isMulti,[],null),{action:"clear",removedValues:m})},u.popValue=function(){var m=u.props.isMulti,g=u.state.selectValue,x=g[g.length-1],v=g.slice(0,g.length-1),N=mi(m,v,v[0]||null);x&&u.onChange(N,{action:"pop-value",removedValue:x})},u.getFocusedOptionId=function(m){return yd(u.state.focusableOptionsWithIds,m)},u.getFocusableOptionsWithIds=function(){return a0(bi(u.props,u.state.selectValue),u.getElementId("option"))},u.getValue=function(){return u.state.selectValue},u.cx=function(){for(var m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];return Aw.apply(void 0,[u.props.classNamePrefix].concat(g))},u.getOptionLabel=function(m){return Sx(u.props,m)},u.getOptionValue=function(m){return Bi(u.props,m)},u.getStyles=function(m,g){var x=u.props.unstyled,v=A5[m](g,x);v.boxSizing="border-box";var N=u.props.styles[m];return N?N(v,g):v},u.getClassNames=function(m,g){var x,v;return(x=(v=u.props.classNames)[m])===null||x===void 0?void 0:x.call(v,g)},u.getElementId=function(m){return"".concat(u.state.instancePrefix,"-").concat(m)},u.getComponents=function(){return n5(u.props)},u.buildCategorizedOptions=function(){return bi(u.props,u.state.selectValue)},u.getCategorizedOptions=function(){return u.props.menuIsOpen?u.buildCategorizedOptions():[]},u.buildFocusableOptions=function(){return wx(u.buildCategorizedOptions())},u.getFocusableOptions=function(){return u.props.menuIsOpen?u.buildFocusableOptions():[]},u.ariaOnChange=function(m,g){u.setState({ariaSelection:Ue({value:m},g)})},u.onMenuMouseDown=function(m){m.button===0&&(m.stopPropagation(),m.preventDefault(),u.focusInput())},u.onMenuMouseMove=function(m){u.blockOptionHover=!1},u.onControlMouseDown=function(m){if(!m.defaultPrevented){var g=u.props.openMenuOnClick;u.state.isFocused?u.props.menuIsOpen?m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&u.onMenuClose():g&&u.openMenu("first"):(g&&(u.openAfterFocus=!0),u.focusInput()),m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&m.preventDefault()}},u.onDropdownIndicatorMouseDown=function(m){if(!(m&&m.type==="mousedown"&&m.button!==0)&&!u.props.isDisabled){var g=u.props,x=g.isMulti,v=g.menuIsOpen;u.focusInput(),v?(u.setState({inputIsHiddenAfterUpdate:!x}),u.onMenuClose()):u.openMenu("first"),m.preventDefault()}},u.onClearIndicatorMouseDown=function(m){m&&m.type==="mousedown"&&m.button!==0||(u.clearValue(),m.preventDefault(),u.openAfterFocus=!1,m.type==="touchend"?u.focusInput():setTimeout(function(){return u.focusInput()}))},u.onScroll=function(m){typeof u.props.closeMenuOnScroll=="boolean"?m.target instanceof HTMLElement&&Yi(m.target)&&u.props.onMenuClose():typeof u.props.closeMenuOnScroll=="function"&&u.props.closeMenuOnScroll(m)&&u.props.onMenuClose()},u.onCompositionStart=function(){u.isComposing=!0},u.onCompositionEnd=function(){u.isComposing=!1},u.onTouchStart=function(m){var g=m.touches,x=g&&g.item(0);x&&(u.initialTouchX=x.clientX,u.initialTouchY=x.clientY,u.userIsDragging=!1)},u.onTouchMove=function(m){var g=m.touches,x=g&&g.item(0);if(x){var v=Math.abs(x.clientX-u.initialTouchX),N=Math.abs(x.clientY-u.initialTouchY),C=5;u.userIsDragging=v>C||N>C}},u.onTouchEnd=function(m){u.userIsDragging||(u.controlRef&&!u.controlRef.contains(m.target)&&u.menuListRef&&!u.menuListRef.contains(m.target)&&u.blurInput(),u.initialTouchX=0,u.initialTouchY=0)},u.onControlTouchEnd=function(m){u.userIsDragging||u.onControlMouseDown(m)},u.onClearIndicatorTouchEnd=function(m){u.userIsDragging||u.onClearIndicatorMouseDown(m)},u.onDropdownIndicatorTouchEnd=function(m){u.userIsDragging||u.onDropdownIndicatorMouseDown(m)},u.handleInputChange=function(m){var g=u.props.inputValue,x=m.currentTarget.value;u.setState({inputIsHiddenAfterUpdate:!1}),u.onInputChange(x,{action:"input-change",prevInputValue:g}),u.props.menuIsOpen||u.onMenuOpen()},u.onInputFocus=function(m){u.props.onFocus&&u.props.onFocus(m),u.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(u.openAfterFocus||u.props.openMenuOnFocus)&&u.openMenu("first"),u.openAfterFocus=!1},u.onInputBlur=function(m){var g=u.props.inputValue;if(u.menuListRef&&u.menuListRef.contains(document.activeElement)){u.inputRef.focus();return}u.props.onBlur&&u.props.onBlur(m),u.onInputChange("",{action:"input-blur",prevInputValue:g}),u.onMenuClose(),u.setState({focusedValue:null,isFocused:!1})},u.onOptionHover=function(m){if(!(u.blockOptionHover||u.state.focusedOption===m)){var g=u.getFocusableOptions(),x=g.indexOf(m);u.setState({focusedOption:m,focusedOptionId:x>-1?u.getFocusedOptionId(m):null})}},u.shouldHideSelectedOptions=function(){return kx(u.props)},u.onValueInputFocus=function(m){m.preventDefault(),m.stopPropagation(),u.focus()},u.onKeyDown=function(m){var g=u.props,x=g.isMulti,v=g.backspaceRemovesValue,N=g.escapeClearsValue,C=g.inputValue,S=g.isClearable,w=g.isDisabled,M=g.menuIsOpen,j=g.onKeyDown,E=g.tabSelectsValue,D=g.openMenuOnFocus,_=u.state,L=_.focusedOption,R=_.focusedValue,A=_.selectValue;if(!w&&!(typeof j=="function"&&(j(m),m.defaultPrevented))){switch(u.blockOptionHover=!0,m.key){case"ArrowLeft":if(!x||C)return;u.focusValue("previous");break;case"ArrowRight":if(!x||C)return;u.focusValue("next");break;case"Delete":case"Backspace":if(C)return;if(R)u.removeValue(R);else{if(!v)return;x?u.popValue():S&&u.clearValue()}break;case"Tab":if(u.isComposing||m.shiftKey||!M||!E||!L||D&&u.isOptionSelected(L,A))return;u.selectOption(L);break;case"Enter":if(m.keyCode===229)break;if(M){if(!L||u.isComposing)return;u.selectOption(L);break}return;case"Escape":M?(u.setState({inputIsHiddenAfterUpdate:!1}),u.onInputChange("",{action:"menu-close",prevInputValue:C}),u.onMenuClose()):S&&N&&u.clearValue();break;case" ":if(C)return;if(!M){u.openMenu("first");break}if(!L)return;u.selectOption(L);break;case"ArrowUp":M?u.focusOption("up"):u.openMenu("last");break;case"ArrowDown":M?u.focusOption("down"):u.openMenu("first");break;case"PageUp":if(!M)return;u.focusOption("pageup");break;case"PageDown":if(!M)return;u.focusOption("pagedown");break;case"Home":if(!M)return;u.focusOption("first");break;case"End":if(!M)return;u.focusOption("last");break;default:return}m.preventDefault()}},u.state.instancePrefix="react-select-"+(u.props.instanceId||++q5),u.state.selectValue=Wg(s.value),s.menuIsOpen&&u.state.selectValue.length){var d=u.getFocusableOptionsWithIds(),p=u.buildFocusableOptions(),h=p.indexOf(u.state.selectValue[0]);u.state.focusableOptionsWithIds=d,u.state.focusedOption=p[h],u.state.focusedOptionId=yd(d,p[h])}return u}return c2(o,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Fg(this.menuListRef,this.focusedOptionRef),O5()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(u){var d=this.props,p=d.isDisabled,h=d.menuIsOpen,m=this.state.isFocused;(m&&!p&&u.isDisabled||m&&h&&!u.menuIsOpen)&&this.focusInput(),m&&p&&!u.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!m&&!p&&u.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Fg(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(u,d){this.props.onInputChange(u,d)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(u){var d=this,p=this.state,h=p.selectValue,m=p.isFocused,g=this.buildFocusableOptions(),x=u==="first"?0:g.length-1;if(!this.props.isMulti){var v=g.indexOf(h[0]);v>-1&&(x=v)}this.scrollToFocusedOptionOnUpdate=!(m&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:g[x],focusedOptionId:this.getFocusedOptionId(g[x])},function(){return d.onMenuOpen()})}},{key:"focusValue",value:function(u){var d=this.state,p=d.selectValue,h=d.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var m=p.indexOf(h);h||(m=-1);var g=p.length-1,x=-1;if(p.length){switch(u){case"previous":m===0?x=0:m===-1?x=g:x=m-1;break;case"next":m>-1&&m<g&&(x=m+1);break}this.setState({inputIsHidden:x!==-1,focusedValue:p[x]})}}}},{key:"focusOption",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",d=this.props.pageSize,p=this.state.focusedOption,h=this.getFocusableOptions();if(h.length){var m=0,g=h.indexOf(p);p||(g=-1),u==="up"?m=g>0?g-1:h.length-1:u==="down"?m=(g+1)%h.length:u==="pageup"?(m=g-d,m<0&&(m=0)):u==="pagedown"?(m=g+d,m>h.length-1&&(m=h.length-1)):u==="last"&&(m=h.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:h[m],focusedValue:null,focusedOptionId:this.getFocusedOptionId(h[m])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(xd):Ue(Ue({},xd),this.props.theme):xd})},{key:"getCommonProps",value:function(){var u=this.clearValue,d=this.cx,p=this.getStyles,h=this.getClassNames,m=this.getValue,g=this.selectOption,x=this.setValue,v=this.props,N=v.isMulti,C=v.isRtl,S=v.options,w=this.hasValue();return{clearValue:u,cx:d,getStyles:p,getClassNames:h,getValue:m,hasValue:w,isMulti:N,isRtl:C,options:S,selectOption:g,selectProps:v,setValue:x,theme:this.getTheme()}}},{key:"hasValue",value:function(){var u=this.state.selectValue;return u.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var u=this.props,d=u.isClearable,p=u.isMulti;return d===void 0?p:d}},{key:"isOptionDisabled",value:function(u,d){return Nx(this.props,u,d)}},{key:"isOptionSelected",value:function(u,d){return jx(this.props,u,d)}},{key:"filterOption",value:function(u,d){return Cx(this.props,u,d)}},{key:"formatOptionLabel",value:function(u,d){if(typeof this.props.formatOptionLabel=="function"){var p=this.props.inputValue,h=this.state.selectValue;return this.props.formatOptionLabel(u,{context:d,inputValue:p,selectValue:h})}else return this.getOptionLabel(u)}},{key:"formatGroupLabel",value:function(u){return this.props.formatGroupLabel(u)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var u=this.props,d=u.isDisabled,p=u.isSearchable,h=u.inputId,m=u.inputValue,g=u.tabIndex,x=u.form,v=u.menuIsOpen,N=u.required,C=this.getComponents(),S=C.Input,w=this.state,M=w.inputIsHidden,j=w.ariaSelection,E=this.commonProps,D=h||this.getElementId("input"),_=Ue(Ue(Ue({"aria-autocomplete":"list","aria-expanded":v,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":N,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},v&&{"aria-controls":this.getElementId("listbox")}),!p&&{"aria-readonly":!0}),this.hasValue()?j?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return p?b.createElement(S,$e({},E,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:D,innerRef:this.getInputRef,isDisabled:d,isHidden:M,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:g,form:x,type:"text",value:m},_)):b.createElement(h5,$e({id:D,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Di,onFocus:this.onInputFocus,disabled:d,tabIndex:g,inputMode:"none",form:x,value:""},_))})},{key:"renderPlaceholderOrValue",value:function(){var u=this,d=this.getComponents(),p=d.MultiValue,h=d.MultiValueContainer,m=d.MultiValueLabel,g=d.MultiValueRemove,x=d.SingleValue,v=d.Placeholder,N=this.commonProps,C=this.props,S=C.controlShouldRenderValue,w=C.isDisabled,M=C.isMulti,j=C.inputValue,E=C.placeholder,D=this.state,_=D.selectValue,L=D.focusedValue,R=D.isFocused;if(!this.hasValue()||!S)return j?null:b.createElement(v,$e({},N,{key:"placeholder",isDisabled:w,isFocused:R,innerProps:{id:this.getElementId("placeholder")}}),E);if(M)return _.map(function(B,G){var U=B===L,W="".concat(u.getOptionLabel(B),"-").concat(u.getOptionValue(B));return b.createElement(p,$e({},N,{components:{Container:h,Label:m,Remove:g},isFocused:U,isDisabled:w,key:W,index:G,removeProps:{onClick:function(){return u.removeValue(B)},onTouchEnd:function(){return u.removeValue(B)},onMouseDown:function(xe){xe.preventDefault()}},data:B}),u.formatOptionLabel(B,"value"))});if(j)return null;var A=_[0];return b.createElement(x,$e({},N,{data:A,isDisabled:w}),this.formatOptionLabel(A,"value"))}},{key:"renderClearIndicator",value:function(){var u=this.getComponents(),d=u.ClearIndicator,p=this.commonProps,h=this.props,m=h.isDisabled,g=h.isLoading,x=this.state.isFocused;if(!this.isClearable()||!d||m||!this.hasValue()||g)return null;var v={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(d,$e({},p,{innerProps:v,isFocused:x}))}},{key:"renderLoadingIndicator",value:function(){var u=this.getComponents(),d=u.LoadingIndicator,p=this.commonProps,h=this.props,m=h.isDisabled,g=h.isLoading,x=this.state.isFocused;if(!d||!g)return null;var v={"aria-hidden":"true"};return b.createElement(d,$e({},p,{innerProps:v,isDisabled:m,isFocused:x}))}},{key:"renderIndicatorSeparator",value:function(){var u=this.getComponents(),d=u.DropdownIndicator,p=u.IndicatorSeparator;if(!d||!p)return null;var h=this.commonProps,m=this.props.isDisabled,g=this.state.isFocused;return b.createElement(p,$e({},h,{isDisabled:m,isFocused:g}))}},{key:"renderDropdownIndicator",value:function(){var u=this.getComponents(),d=u.DropdownIndicator;if(!d)return null;var p=this.commonProps,h=this.props.isDisabled,m=this.state.isFocused,g={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(d,$e({},p,{innerProps:g,isDisabled:h,isFocused:m}))}},{key:"renderMenu",value:function(){var u=this,d=this.getComponents(),p=d.Group,h=d.GroupHeading,m=d.Menu,g=d.MenuList,x=d.MenuPortal,v=d.LoadingMessage,N=d.NoOptionsMessage,C=d.Option,S=this.commonProps,w=this.state.focusedOption,M=this.props,j=M.captureMenuScroll,E=M.inputValue,D=M.isLoading,_=M.loadingMessage,L=M.minMenuHeight,R=M.maxMenuHeight,A=M.menuIsOpen,B=M.menuPlacement,G=M.menuPosition,U=M.menuPortalTarget,W=M.menuShouldBlockScroll,J=M.menuShouldScrollIntoView,xe=M.noOptionsMessage,ae=M.onMenuScrollToTop,le=M.onMenuScrollToBottom;if(!A)return null;var z=function(O,F){var X=O.type,pe=O.data,ee=O.isDisabled,oe=O.isSelected,ve=O.label,Oe=O.value,Qe=w===pe,ne=ee?void 0:function(){return u.onOptionHover(pe)},Ve=ee?void 0:function(){return u.selectOption(pe)},Ne="".concat(u.getElementId("option"),"-").concat(F),Le={id:Ne,onClick:Ve,onMouseMove:ne,onMouseOver:ne,tabIndex:-1,role:"option","aria-selected":u.state.isAppleDevice?void 0:oe};return b.createElement(C,$e({},S,{innerProps:Le,data:pe,isDisabled:ee,isSelected:oe,key:Ne,label:ve,type:X,value:Oe,isFocused:Qe,innerRef:Qe?u.getFocusedOptionRef:void 0}),u.formatOptionLabel(O.data,"menu"))},Y;if(this.hasOptions())Y=this.getCategorizedOptions().map(function(I){if(I.type==="group"){var O=I.data,F=I.options,X=I.index,pe="".concat(u.getElementId("group"),"-").concat(X),ee="".concat(pe,"-heading");return b.createElement(p,$e({},S,{key:pe,data:O,options:F,Heading:h,headingProps:{id:ee,data:I.data},label:u.formatGroupLabel(I.data)}),I.options.map(function(oe){return z(oe,"".concat(X,"-").concat(oe.index))}))}else if(I.type==="option")return z(I,"".concat(I.index))});else if(D){var de=_({inputValue:E});if(de===null)return null;Y=b.createElement(v,S,de)}else{var be=xe({inputValue:E});if(be===null)return null;Y=b.createElement(N,S,be)}var ye={minMenuHeight:L,maxMenuHeight:R,menuPlacement:B,menuPosition:G,menuShouldScrollIntoView:J},T=b.createElement(Xw,$e({},S,ye),function(I){var O=I.ref,F=I.placerProps,X=F.placement,pe=F.maxHeight;return b.createElement(m,$e({},S,ye,{innerRef:O,innerProps:{onMouseDown:u.onMenuMouseDown,onMouseMove:u.onMenuMouseMove},isLoading:D,placement:X}),b.createElement(w5,{captureEnabled:j,onTopArrive:ae,onBottomArrive:le,lockEnabled:W},function(ee){return b.createElement(g,$e({},S,{innerRef:function(ve){u.getMenuListRef(ve),ee(ve)},innerProps:{role:"listbox","aria-multiselectable":S.isMulti,id:u.getElementId("listbox")},isLoading:D,maxHeight:pe,focusedOption:w}),Y)}))});return U||G==="fixed"?b.createElement(x,$e({},S,{appendTo:U,controlElement:this.controlRef,menuPlacement:B,menuPosition:G}),T):T}},{key:"renderFormField",value:function(){var u=this,d=this.props,p=d.delimiter,h=d.isDisabled,m=d.isMulti,g=d.name,x=d.required,v=this.state.selectValue;if(x&&!this.hasValue()&&!h)return b.createElement(j5,{name:g,onFocus:this.onValueInputFocus});if(!(!g||h))if(m)if(p){var N=v.map(function(w){return u.getOptionValue(w)}).join(p);return b.createElement("input",{name:g,type:"hidden",value:N})}else{var C=v.length>0?v.map(function(w,M){return b.createElement("input",{key:"i-".concat(M),name:g,type:"hidden",value:u.getOptionValue(w)})}):b.createElement("input",{name:g,type:"hidden",value:""});return b.createElement("div",null,C)}else{var S=v[0]?this.getOptionValue(v[0]):"";return b.createElement("input",{name:g,type:"hidden",value:S})}}},{key:"renderLiveRegion",value:function(){var u=this.commonProps,d=this.state,p=d.ariaSelection,h=d.focusedOption,m=d.focusedValue,g=d.isFocused,x=d.selectValue,v=this.getFocusableOptions();return b.createElement(c5,$e({},u,{id:this.getElementId("live-region"),ariaSelection:p,focusedOption:h,focusedValue:m,isFocused:g,selectValue:x,focusableOptions:v,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var u=this.getComponents(),d=u.Control,p=u.IndicatorsContainer,h=u.SelectContainer,m=u.ValueContainer,g=this.props,x=g.className,v=g.id,N=g.isDisabled,C=g.menuIsOpen,S=this.state.isFocused,w=this.commonProps=this.getCommonProps();return b.createElement(h,$e({},w,{className:x,innerProps:{id:v,onKeyDown:this.onKeyDown},isDisabled:N,isFocused:S}),this.renderLiveRegion(),b.createElement(d,$e({},w,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:N,isFocused:S,menuIsOpen:C}),b.createElement(m,$e({},w,{isDisabled:N}),this.renderPlaceholderOrValue(),this.renderInput()),b.createElement(p,$e({},w,{isDisabled:N}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(u,d){var p=d.prevProps,h=d.clearFocusValueOnUpdate,m=d.inputIsHiddenAfterUpdate,g=d.ariaSelection,x=d.isFocused,v=d.prevWasFocused,N=d.instancePrefix,C=u.options,S=u.value,w=u.menuIsOpen,M=u.inputValue,j=u.isMulti,E=Wg(S),D={};if(p&&(S!==p.value||C!==p.options||w!==p.menuIsOpen||M!==p.inputValue)){var _=w?V5(u,E):[],L=w?a0(bi(u,E),"".concat(N,"-option")):[],R=h?U5(d,E):null,A=G5(d,_),B=yd(L,A);D={selectValue:E,focusedOption:A,focusedOptionId:B,focusableOptionsWithIds:L,focusedValue:R,clearFocusValueOnUpdate:!1}}var G=m!=null&&u!==p?{inputIsHidden:m,inputIsHiddenAfterUpdate:void 0}:{},U=g,W=x&&v;return x&&!W&&(U={value:mi(j,E,E[0]||null),options:E,action:"initial-input-focus"},W=!v),g?.action==="initial-input-focus"&&(U=null),Ue(Ue(Ue({},D),G),{},{prevProps:u,ariaSelection:U,prevWasFocused:W})}}]),o})(b.Component);Mx.defaultProps=H5;var W5=b.forwardRef(function(r,l){var o=i2(r);return b.createElement(Mx,$e({ref:l},o))}),s0=W5;function vd({containerClass:r,name:l,value:o,options:s,onChange:u,disabled:d=!1,hideLabel:p=!1,hasPin:h,isPinned:m=!1,onTogglePin:g,hasError:x=!1,forceModalOpen:v=!1,onModalClose:N}){const C=te(he=>he.setNodeTypes),w=Ei(he=>he.theme)==="dark",[M,j]=b.useState(!1),E=b.useRef(null),D=b.useRef(null),[_,L]=b.useState([]),[R,A]=b.useState(!1),B=v||M,G=I0(),U=he=>{if(!Array.isArray(s))return s?.[he]},W=Array.isArray(s)?s:U("options")??[],J=!!U("image_upload"),xe=U("image_folder")??"input",ae="__null__",le=W.some(he=>he===null),z=W.filter(he=>he!==null).map(he=>String(he)),Y=Array.from(new Set([...z,..._])),de=o===null?ae:String(o??""),be=de.split(/[\\/]/).pop()??de,ye=Y.includes(de)||Y.includes(be),T=o!=null&&de!==""&&!ye,I=ye?Y.includes(de)?de:be:de,O=[];(o===null||le)&&O.push({value:ae,label:"None"}),T&&O.push({value:de,label:de,isMissing:!0}),O.push(...Y.map(he=>({value:he,label:he})));const F=O.find(he=>he.value===I)??null,X=W.filter(he=>he!==null).length,pe=v?!0:G&&!(X>0&&X<5),ee=J&&xe==="input",oe=he=>{const Re=he.replace(/\\/g,"/"),Ze=Re.lastIndexOf("/"),gt=Ze>=0?Re.slice(Ze+1):Re,Be=Ze>=0?Re.slice(0,Ze):"";return qn(gt,Be,"input")},ve=b.useMemo(()=>ee?{DropdownIndicator:null,IndicatorSeparator:null,Option:Re=>{const{data:Ze}=Re,Be=Ze.value!==ae&&!Ze.isMissing&&!!Ze.value?oe(Ze.value):null;return i.jsx(gx.Option,{...Re,children:i.jsxs("div",{className:"flex items-center gap-2",children:[Be&&i.jsx("img",{src:Be,alt:"",className:"w-[72px] h-[72px] rounded-sm object-cover bg-gray-100 shrink-0",loading:"lazy",decoding:"async"}),i.jsx("span",{className:"truncate",children:Ze.label})]})})}}:{DropdownIndicator:null,IndicatorSeparator:null},[ee]),Oe=["rs-container",h?"rs-has-pin":"rs-no-pin",x?"rs-error":"",T?"rs-missing":"",d?"rs-disabled":""].filter(Boolean).join(" "),Qe=typeof document>"u"?null:document.body,ne=()=>{j(!1),N?.()},Ve=he=>{he&&u(he.value===ae?null:he.value)},Ne=he=>{Ve(he),ne()},Le=()=>{d||R||D.current?.click()},Ke=async he=>{const Re=he.target.files?.[0];if(Re){A(!0);try{const Ze=await k0(Re,{type:xe}),gt=Ze.subfolder?`${Ze.subfolder}/${Ze.name}`:Ze.name;L(Be=>Be.includes(gt)?Be:[...Be,gt]);try{const Be=await Pd();C(Be)}catch{}u(gt)}catch(Ze){console.error("Failed to upload image:",Ze)}finally{A(!1),he.target.value=""}}},Ge=J?i.jsx("button",{type:"button",className:`w-full py-2 px-3 rounded-lg border text-sm font-medium transition-colors ${d||R?"opacity-60 cursor-not-allowed border-gray-200 text-gray-400 bg-white":"border-gray-200 text-gray-700 bg-white hover:border-gray-300 hover:text-gray-900"}`,onClick:Le,disabled:d||R,children:i.jsxs("span",{className:"inline-flex items-center justify-center gap-2",children:[i.jsx(nf,{className:"w-4 h-4"}),R?"Uploading...":"Load from camera roll"]})}):null,we="#111827",Ye="#6b7280";return pe?i.jsxs("div",{className:`${r} combo-control-root combo-control-modal`,children:[!p&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),i.jsxs("div",{className:`combo-control-trigger relative w-full p-3 comfy-input text-base flex items-center justify-between min-h-[46px] ${d?"opacity-60 cursor-not-allowed":""} ${x?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&j(!0),children:[i.jsx("span",{className:`combo-control-trigger-label truncate min-w-0 flex-1 ${F?"text-gray-900 dark:text-[#e5e7eb]":"text-gray-400 dark:text-gray-500"} ${h?"pr-16":"pr-6"}`,children:F?F.label:"Select..."}),i.jsxs("div",{className:"combo-control-trigger-icons flex items-center absolute right-0 top-0 bottom-0 pointer-events-none",children:[i.jsx("div",{className:"combo-control-chevron px-2 text-gray-400",children:i.jsx(ki,{className:"w-5 h-5"})}),h&&i.jsx("div",{className:"combo-control-pin pointer-events-auto px-2",children:i.jsx(Ma,{isPinned:m,onToggle:g})})]})]}),T&&i.jsx("div",{className:"mt-1 text-xs text-red-700",children:"Missing on ComfyUI server"}),J&&i.jsxs("div",{className:"combo-control-upload mt-2",children:[Ge,i.jsx("input",{ref:D,type:"file",accept:"image/*",className:"hidden",onChange:Ke})]}),i.jsx(af,{title:l,isOpen:B,onClose:ne,children:i.jsx(s0,{className:Oe,classNamePrefix:"rs",options:O,value:F,onChange:Ne,isSearchable:!0,autoFocus:!v,menuIsOpen:v?void 0:!0,controlShouldRenderValue:!0,placeholder:"Search...",filterOption:Fd({ignoreAccents:!0,ignoreCase:!0,trim:!0,matchFrom:"any"}),styles:{menu:he=>({...he,position:"static",boxShadow:"none",border:"none",marginTop:"0.5rem",borderRadius:0,backgroundColor:w?"transparent":"#ffffff"}),menuList:he=>({...he,maxHeight:"calc(100vh - 160px)",height:"auto",paddingBottom:"2rem",overflowY:"auto",overflowX:"auto",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",touchAction:"pan-y"}),option:(he,Re)=>w?he:{...he,color:we,backgroundColor:Re.isSelected?"#e5e7eb":Re.isFocused?"#f3f4f6":"transparent"},singleValue:he=>({...he,color:w?he.color:we}),input:he=>({...he,color:w?he.color:we}),placeholder:he=>({...he,color:w?he.color:Ye}),control:he=>({...he,borderColor:"#3b82f6",boxShadow:"0 0 0 1px #3b82f6",backgroundColor:w?he.backgroundColor:"#ffffff",color:w?he.color:we})},components:ve,noOptionsMessage:()=>"No matches"})})]}):i.jsxs("div",{className:`${r} combo-control-root combo-control-inline`,children:[!p&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),i.jsxs("div",{className:"combo-control-input-wrapper relative rs-scroll-target",ref:E,children:[i.jsx(s0,{className:Oe,classNamePrefix:"rs",options:O,value:F,onChange:Ve,isSearchable:!0,isDisabled:d,filterOption:Fd({ignoreAccents:!0,ignoreCase:!0,trim:!0,matchFrom:"any"}),menuPortalTarget:Qe,menuPosition:"fixed",menuPlacement:"bottom",menuShouldScrollIntoView:!1,styles:{menuPortal:he=>({...he,zIndex:200}),menuList:he=>({...he,overflowY:"auto",overflowX:"auto",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",touchAction:"pan-y"}),option:(he,Re)=>w?he:{...he,color:we,backgroundColor:Re.isSelected?"#e5e7eb":Re.isFocused?"#f3f4f6":"transparent"},singleValue:he=>({...he,color:w?he.color:we}),input:he=>({...he,color:w?he.color:we}),placeholder:he=>({...he,color:w?he.color:Ye})},components:ve,noOptionsMessage:()=>"No matches"}),i.jsxs("div",{className:"combo-control-icons absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:[i.jsx("div",{className:"combo-control-chevron px-2 text-gray-400",children:i.jsx(ki,{className:"w-5 h-5"})}),h&&i.jsx("div",{className:"combo-control-pin pointer-events-auto px-2",children:i.jsx(Ma,{isPinned:m,onToggle:g})}),!h&&i.jsx("div",{className:"w-3"})]})]}),T&&i.jsx("div",{className:"mt-1 text-xs text-red-700",children:"Missing on ComfyUI server"}),J&&i.jsxs("div",{className:"mt-2",children:[Ge,i.jsx("input",{ref:D,type:"file",accept:"image/*",className:"hidden",onChange:Ke})]})]})}function cr({name:r,type:l,value:o,options:s,onChange:u,disabled:d=!1,hasError:p=!1,hideLabel:h=!1,compact:m=!1,forceModalOpen:g=!1,onModalClose:x,seedMode:v,onSeedModeChange:N,hasPin:C,isPinned:S=!1,onTogglePin:w,containerClass:M}){const[j,E]=b.useState(!1),D=()=>{d||E(!0)},_=()=>{E(!1),x?.()},L=l==="COMBO"||Array.isArray(s?.options),R=["INT","FLOAT"].includes(l.toUpperCase()),A=l.toUpperCase()==="STRING",B=r.replace(/_/g," "),G=C??(!!w||S),U=M??"space-y-2 w-full",W=M??(m?"mb-0":"mb-3"),J={name:r,value:o,options:s,onChange:u,disabled:d,hideLabel:h,hasError:p,forceModalOpen:g,onModalClose:x,containerClass:U,hasPin:G,isPinned:S,onTogglePin:w},xe=()=>L?i.jsx(vd,{...J}):R?i.jsx(zd,{...J,type:l,seedMode:v,onSeedModeChange:N}):A?i.jsx(Eg,{...J}):i.jsxs("div",{className:"unsupported-widget-type text-xs text-gray-400 italic",children:["Unsupported: ",l]}),ae=g||j;if(l==="POWER_LORA_HEADER")return i.jsx("div",{className:`${W} power-lora-header flex items-center justify-between p-3 bg-blue-50/50 dark:bg-blue-900/20 rounded-lg`,children:i.jsxs("div",{className:"power-lora-header-content flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",onChange:le=>u(le.target.checked),className:"w-5 h-5 rounded cursor-pointer",disabled:d}),i.jsx("span",{className:"power-lora-header-label text-sm font-semibold text-blue-900 dark:text-blue-100 uppercase tracking-wider",children:"Toggle All Loras"})]})});if(l==="POWER_LORA"){const le=o||{on:!0,lora:"",strength:1},z=s||{},Y=z.choices,de=z.showSeparate,be=(ye,T)=>{u({...le,[ye]:T})};return i.jsxs("div",{className:`${W} power-lora-row flex flex-col gap-2 p-3 border border-gray-200 dark:border-gray-800 rounded-lg bg-gray-50/50 dark:bg-gray-900/50 ${le.on?"":"opacity-60"}`,children:[i.jsxs("div",{className:"power-lora-row-actions flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>be("on",!le.on),className:`power-lora-enabled-button flex-1 py-2 rounded-lg text-sm font-semibold transition-colors ${le.on?"bg-blue-600 text-white":"bg-gray-700 text-white"} ${d?"opacity-60 cursor-not-allowed":""}`,disabled:d,children:le.on?"Enabled":"Disabled"}),i.jsx("button",{type:"button",onClick:()=>u(null),className:`power-lora-remove-button flex-1 py-2 rounded-lg text-sm font-semibold bg-red-600 text-white hover:bg-red-700 transition-colors ${d?"opacity-60 cursor-not-allowed":""}`,disabled:d,children:"Remove"})]}),i.jsx("div",{className:"power-lora-row-header flex items-center gap-3",children:i.jsx("div",{className:"power-lora-select flex-grow min-w-0",children:i.jsx(cr,{name:"",hideLabel:!0,compact:!0,type:"COMBO",value:le.lora,options:Y,onChange:ye=>be("lora",ye),disabled:d})})}),i.jsxs("div",{className:"power-lora-strengths flex flex-col",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 ml-1",children:de?"Model strength":"Strength"}),i.jsx("div",{className:"power-lora-strength-row flex items-center gap-3",children:i.jsx("div",{className:"power-lora-strength-input flex-grow",children:i.jsx(cr,{name:"",hideLabel:!0,compact:!0,type:"FLOAT",value:le.strength,options:{min:-10,max:10,step:.01},onChange:ye=>be("strength",ye),disabled:d})})}),de&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 ml-1",children:"Clip strength"}),de&&i.jsx("div",{className:"power-lora-strength-row flex items-center gap-3",children:i.jsx("div",{className:"power-lora-strength-input flex-grow",children:i.jsx(cr,{name:"",hideLabel:!0,compact:!0,type:"FLOAT",value:le.strengthTwo??le.strength,options:{min:-10,max:10,step:.01},onChange:ye=>be("strengthTwo",ye),disabled:d})})})]})]})}if(l==="POWER_LORA_ADD"){const le=()=>{u({on:!0,lora:"None",strength:1,model_strength:1,clip_strength:1})};return i.jsx("div",{className:`${W} power-lora-add`,children:i.jsxs("button",{onClick:le,className:"w-full py-2 px-4 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg text-sm font-medium text-gray-500 hover:text-blue-500 hover:border-blue-500 transition-all flex items-center justify-center gap-2",disabled:d,children:[i.jsx(nf,{className:"w-5 h-5"}),"Add Lora"]})})}return A?i.jsx(Eg,{...J}):L?i.jsx(vd,{...J}):R?i.jsx(zd,{...J,type:l,seedMode:v,onSeedModeChange:N}):l.toUpperCase()==="BOOLEAN"?i.jsx(vd,{...J,value:String(!!o),options:["true","false"],onChange:le=>u(String(le).toLowerCase()==="true")}):i.jsxs("div",{id:`widget-control-${r}`,className:`widget-control-root ${m?"compact-control":""}`,children:[!h&&i.jsxs("div",{id:`widget-label-container-${r}`,className:"flex items-center justify-between mb-1.5 px-1",children:[i.jsx("label",{id:`widget-label-${r}`,className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider truncate mr-2",children:B}),p&&i.jsx("div",{id:`widget-error-icon-${r}`,className:"text-red-500",title:"Error in this input",children:i.jsx(R0,{className:"w-3.5 h-3.5"})})]}),i.jsxs("div",{id:`widget-trigger-${r}`,className:`
          control-trigger
          relative flex items-center justify-between
          bg-gray-50 border border-gray-200 rounded-xl px-3 py-2.5
          active:bg-gray-100 active:border-gray-300 transition-all
          ${d?"opacity-50 grayscale pointer-events-none":"cursor-pointer"}
          ${p?"border-red-300 bg-red-50/30":""}
        `,onClick:D,children:[i.jsx("div",{id:`widget-value-display-${r}`,className:"value-display flex-1 truncate text-sm font-medium text-gray-900",children:L?o||"Select...":o!=null?String(o):"Empty"}),i.jsx("div",{id:`widget-icon-container-${r}`,className:"icon-container ml-2 text-gray-400"})]}),i.jsx(af,{isOpen:ae,title:B,onClose:_,children:i.jsx("div",{id:`modal-control-wrapper-${r}`,className:"p-2",children:xe()})})]})}function F5({node:r,isBypassed:l,isKSampler:o,workflowExists:s,nodeTypesExists:u,visibleInputWidgets:d,visibleWidgets:p,errorInputNames:h,onUpdateNodeWidget:m,onUpdateNodeWidgets:g,getWidgetIndexForInput:x,findSeedWidgetIndex:v,setSeedMode:N,isWidgetPinned:C,toggleWidgetPin:S}){const w=Array.isArray(r.widgets_values)?r.widgets_values:[],M=te(O=>O.nodeTypes),j=te(O=>O.workflow),E=te(O=>O.bypassAllInGroup),D=Sn(O=>O.seedModes[r.id]),_=Sn(O=>O.seedLastValues[r.id]??null),L=r.type==="Fast Groups Bypasser (rgthree)",R=!o&&s&&u?v():null,A=R!==null?R+1:null,B=A!==null?w[A]:void 0,G=typeof B=="string",U=!o&&R!==null&&!G,W=U?d.filter(O=>O.name!=="seed"&&O.name!=="noise_seed"):d,J=U?p.filter(O=>O.name!=="seed"&&O.name!=="noise_seed"):p,xe=p.length>0||d.length>0,ae=b.useMemo(()=>{if(!L||!j)return[];const O=r.properties??{},F=typeof O.matchColors=="string"?O.matchColors:"",X=typeof O.matchTitle=="string"?O.matchTitle:"",pe=O.showAllGraphs!==!1,ee=typeof O.sort=="string"?O.sort:"position",oe=typeof O.customSortAlphabet=="string"?O.customSortAlphabet:"",ve=Se=>{const _e=Se.replace("#","").trim();return/^[0-9a-f]{3}$/i.test(_e)?`#${_e.replace(/(.)/g,"$1$1").toLowerCase()}`:/^[0-9a-f]{6}$/i.test(_e)?`#${_e.toLowerCase()}`:null},Oe=Se=>{if(typeof document>"u")return null;const _e=document.createElement("span");if(_e.style.color=Se,!document.body)return null;document.body.appendChild(_e);const Xe=getComputedStyle(_e).color;document.body.removeChild(_e);const We=Xe.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(!We)return null;const[,Pe,P,ft]=We.map(Number);return[Pe,P,ft].some(ot=>Number.isNaN(ot))?null:`#${[Pe,P,ft].map(ot=>ot.toString(16).padStart(2,"0")).join("")}`},Qe={nocolor:"#353535",red:"#553333",brown:"#593930",green:"#335533",blue:"#333355",pale_blue:"#3f5159",cyan:"#335555",purple:"#553355",yellow:"#665533",black:"#000000"},ne=Se=>{const _e=[],Xe=Se.trim().toLowerCase();if(Xe){_e.push(Xe);const P=Qe[Xe.replace(/\s+/g,"")]??Qe[Xe];P&&_e.push(P)}const We=ve(Se);if(We)return _e.push(We),_e;const Pe=Oe(Se);return Pe&&_e.push(Pe),_e},Ve=Se=>{const _e=Se.replace("#","").trim();if(!/^[0-9a-f]{6}$/i.test(_e))return null;const Xe=parseInt(_e.slice(0,2),16)/255,We=parseInt(_e.slice(2,4),16)/255,Pe=parseInt(_e.slice(4,6),16)/255,P=Math.max(Xe,We,Pe),ft=Math.min(Xe,We,Pe),ot=P-ft;let tt=0;ot!==0&&(P===Xe?tt=(We-Pe)/ot%6:P===We?tt=(Pe-Xe)/ot+2:tt=(Xe-We)/ot+4,tt=Math.round(tt*60),tt<0&&(tt+=360));const pt=(P+ft)/2,Ht=ot===0?0:ot/(1-Math.abs(2*pt-1));return{h:tt,s:Ht,l:pt}},Ne=F.split(",").map(Se=>Se.trim()).filter(Boolean).flatMap(ne),Le=new Set(Ne),Ke=Ne.map(Se=>ve(Se)??Oe(Se)).filter(Se=>!!Se).map(Se=>Ve(Se)).filter(Se=>!!Se);let Ge=null;if(X.trim())try{Ge=new RegExp(X,"i")}catch(Se){return console.error(Se),[]}let we=null;if(ee==="custom alphabet"){const Se=oe.replace(/\n/g,"").trim().toLowerCase();Se&&(we=Se.includes(",")?Se.split(",").map(_e=>_e.trim()).filter(Boolean):Se.split("")),we?.length||(we=null)}const Ye=new Map(j.nodes.map(Se=>[Se.id,Se])),he=[],Re=Se=>{if(Le.size>0){const _e=Se.color?ne(Se.color):[],Xe=Se.color?ve(Se.color):null,We=Xe?Ve(Xe):null,Pe=_e.some(ft=>Le.has(ft))||(Xe?Le.has(Xe):!1),P=!!(We&&Ke.some(ft=>{const ot=Math.abs(ft.h-We.h);return Math.min(ot,360-ot)<=25}));if(!Pe&&!P)return!1}return!(Ge&&!Ge.test(Se.title||""))},Ze=(Se,_e)=>{if(!Re(Se))return;const Xe=T0(j,Se.id,_e);let We=!1;for(const Pe of Xe){const P=Ye.get(Pe);if(!(!P||P.mode===4)){We=!0;break}}he.push({key:`${_e??"root"}-${Se.id}`,label:Se.title?.trim()||`Group ${Se.id}`,groupId:Se.id,subgraphId:_e,color:Se.color,isEngaged:We,isDisabled:Xe.size===0,group:Se})},gt=r.properties?.__mobile_origin,Be=gt?.scope==="subgraph"?gt.subgraphId:null;if(pe){for(const Se of j.groups??[])Ze(Se,null);for(const Se of j.definitions?.subgraphs??[])for(const _e of Se.groups??[])Ze(_e,Se.id)}else if(Be){const Se=j.definitions?.subgraphs?.find(_e=>_e.id===Be);for(const _e of Se?.groups??[])Ze(_e,Be)}else for(const Se of j.groups??[])Ze(Se,null);return ee==="alphanumeric"?he.sort((Se,_e)=>Se.label.localeCompare(_e.label)):we?.length?he.sort((Se,_e)=>{const Xe=Se.label.toLowerCase(),We=_e.label.toLowerCase();let Pe=-1,P=-1;for(const[ft,ot]of we.entries())if(Pe<0&&Xe.startsWith(ot)&&(Pe=ft),P<0&&We.startsWith(ot)&&(P=ft),Pe>-1&&P>-1)break;if(Pe>-1&&P>-1){const ft=Pe-P;return ft===0?Xe.localeCompare(We):ft}return Pe>-1?-1:P>-1?1:Xe.localeCompare(We)}):he.sort((Se,_e)=>{const Xe=Se.group.bounding,We=_e.group.bounding;return Xe[1]!==We[1]?Xe[1]-We[1]:Xe[0]-We[0]}),he},[L,r.properties,j]),le=O=>()=>{O.isDisabled||E(O.groupId,O.isEngaged,O.subgraphId??void 0)},z=O=>{typeof O=="string"&&["fixed","randomize","increment","decrement"].includes(O)&&N(r.id,O)},Y=O=>F=>{m(r.id,O,F),z(F)},de=O=>F=>{m(r.id,O,F,"seed"),N(r.id,"fixed")},be=O=>()=>{if(!M)return;const F=_o(M,r);m(r.id,O,F,"seed"),N(r.id,"fixed")},ye=O=>()=>{typeof _=="number"&&(m(r.id,O,_,"seed"),N(r.id,"fixed"))},T=O=>F=>{m(r.id,O.widgetIndex,F,O.name)},I=O=>F=>{if(O.type==="POWER_LORA_HEADER"&&typeof F=="boolean"){const{loraIndices:X}=O.options||{};if(X){const pe={},ee=r.widgets_values;Array.isArray(ee)&&(X.forEach(oe=>{const ve=ee[oe];pe[oe]={...ve,on:F}}),g(r.id,pe))}}else m(r.id,O.widgetIndex,F,O.name)};return!xe&&ae.length===0?null:i.jsxs("div",{className:"mb-3",children:[ae.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-300 mb-1.5 uppercase tracking-wide",children:"Groups"}),i.jsx("div",{className:"space-y-2",children:ae.map(O=>i.jsxs("div",{className:`flex items-center justify-between gap-3 rounded-lg border px-3 py-2 bg-gray-50/40 dark:bg-gray-900/60 ${O.isDisabled?"border-gray-200 dark:border-white/10 opacity-60":"border-gray-200 dark:border-white/15"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[i.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:O.color||"#9ca3af"}}),i.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-100 truncate",children:O.label})]}),i.jsx("button",{type:"button",role:"switch","aria-checked":O.isEngaged,onClick:le(O),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${O.isEngaged?"bg-emerald-500":"bg-gray-300"} ${O.isDisabled?"cursor-not-allowed":"cursor-pointer"}`,children:i.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition ${O.isEngaged?"translate-x-5":"translate-x-1"}`})})]},O.key))})]}),xe&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Parameters"}),o&&s&&u&&(()=>{const O=x("seed");if(O===null)return null;const F=w[O],X=O+1,pe=w[X],ee=["fixed","increment","decrement","randomize"],ve=!!r.inputs.find(Oe=>Oe.name==="noise_seed")?.link;return i.jsxs("div",{className:"mb-3",children:[i.jsx(cr,{name:"seed",type:"INT",value:F,onChange:Oe=>m(r.id,O,Oe,"seed"),disabled:l,hasError:h.has("seed")}),X<w.length&&!ve&&i.jsx(cr,{name:"Control mode",type:"COMBO",value:pe,options:ee,onChange:Y(X)})]})})(),!o&&s&&u&&(()=>{const O=R;if(O===null)return null;const F=["fixed","randomize","increment","decrement"],X=typeof B=="string"&&!F.includes(B)?[...F,B]:F;if(r.inputs.find(Ge=>Ge.name==="seed"||Ge.name==="noise_seed")?.link!=null)return null;if(G){const Ge=O+1;return i.jsx("div",{className:"mb-3",children:i.jsx(cr,{name:"Seed control",type:"COMBO",value:B,options:X,onChange:Y(Ge)})})}const oe=d.find(Ge=>Ge.name==="seed"||Ge.name==="noise_seed")?.options??{},ve=typeof oe.min=="number"?oe.min:void 0,Oe=typeof oe.max=="number"?oe.max:void 0,Qe=typeof oe.step=="number"?oe.step:void 0,ne=Number(w[O]??0),Ve=M0(ne),Ne=D??Ve??"fixed",Le=Kd(ne)?typeof _=="number"?_:0:ne,Ke=h.has("seed")||h.has("noise_seed");return i.jsxs("div",{className:"mb-3",children:[i.jsx(zd,{name:"seed",value:Le,onChange:de(O),disabled:l,min:ve,max:Oe,step:Qe,hasError:Ke}),i.jsx(cr,{name:"Seed control",type:"COMBO",value:Ne,options:F,onChange:z}),i.jsxs("div",{className:"grid gap-2 mt-2",children:[i.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:()=>N(r.id,"randomize"),disabled:l,children:"Randomize each time"}),i.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:be(O),disabled:l,children:"New fixed random"}),i.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:ye(O),disabled:l||typeof _!="number",children:"Use last queued seed"})]})]})})(),W.map(O=>i.jsx("div",{className:l?"opacity-80":"",children:i.jsx(cr,{name:O.name,type:O.type,value:O.value,options:O.options,onChange:T(O),disabled:l,isPinned:C(O.widgetIndex),onTogglePin:()=>S(O.widgetIndex,O.name,O.type,O.options),hasError:h.has(O.name)})},`input-widget-${O.name}`)),J.map(O=>i.jsx("div",{className:l?"opacity-80":"",children:i.jsx(cr,{name:O.name,type:O.type,value:O.value,options:O.options,onChange:I(O),disabled:l,isPinned:C(O.widgetIndex),onTogglePin:()=>S(O.widgetIndex,O.name,O.type,O.options),hasError:h.has(O.name)})},`widget-${O.widgetIndex}`)),r.type==="PrimitiveNode"&&(()=>{const O=r.outputs?.[0]?.type,F=String(O).toUpperCase();if(F!=="INT"&&F!=="FLOAT"||w.length<2)return null;const X=w[1],pe=["fixed","increment","decrement","randomize"];return i.jsx("div",{className:"mb-3",children:i.jsx(cr,{name:"Control mode",type:"COMBO",value:X,options:pe,onChange:ee=>m(r.id,1,ee),disabled:l})})})()]})]})}const $5=[],Y5=b.memo(function({node:l,isExecuting:o,isConnectionHighlighted:s=!1,errorBadgeLabel:u,onImageClick:d,inGroup:p=!1}){const h=te(se=>se.nodeTypes),m=te(se=>se.workflow),g=te(se=>se.updateNodeWidget),x=te(se=>se.updateNodeWidgets),v=te(se=>se.updateNodeTitle),N=te(se=>se.toggleBypass),C=te(se=>se.toggleNodeFold),S=te(se=>se.hideNode),w=te(se=>se.setConnectionHighlightMode),M=te(se=>se.connectionHighlightModes[l.id]??"off"),j=Sn(se=>se.setSeedMode),E=te(se=>se.currentWorkflowKey),D=Gn(se=>se.pinnedWidget?.nodeId===l.id?se.pinnedWidget:null),_=Gn(se=>se.setPinnedWidget),L=bn(se=>se.bookmarkedNodeIds),R=bn(se=>se.toggleNodeBookmark),A=te(se=>se.nodeOutputs[String(l.id)]),B=Zt(se=>se.nodeErrors[String(l.id)]),G=te(se=>se.progress),U=te(se=>se.executingPromptId),W=te(se=>se.workflowDurationStats),J=te(se=>se.isExecuting),xe=lt(se=>se.running),ae=U||(xe[0]?.prompt_id??null),le=Go({workflow:m,runKey:ae,isRunning:J||xe.length>0,workflowDurationStats:W}),z=le===100?100:G,Y=b.useCallback((se,Je)=>{j(se,Je,{workflow:m,nodeTypes:h,updateNodeWidgets:x})},[h,j,x,m]),de=b.useCallback(se=>{_(se,E)},[E,_]),be=A??$5,[ye,T]=b.useState(null),[I,O]=b.useState(!1),F=b.useRef(null),[X,pe]=b.useState(!1),[ee,oe]=b.useState(!1),[ve,Oe]=b.useState(""),Qe=b.useRef(null),ne=b.useRef(0),Ve=b.useRef(null),[Ne,Le]=b.useState(null);b.useEffect(()=>{const se=Je=>{const Bt=Je.detail;if(Bt.nodeId===l.id){Le(Bt.label);const It=setTimeout(()=>Le(null),1e3);return()=>clearTimeout(It)}};return window.addEventListener("node-show-label",se),()=>window.removeEventListener("node-show-label",se)},[l.id]);const Ke=B&&B.length>0,Ge=b.useMemo(()=>B?new Set(B.map(se=>se.inputName).filter(se=>!!se)):new Set,[B]),we=be.length>0?be[be.length-1]:null,Ye=we?`${we.filename}|${we.subfolder}|${we.type}`:null,he=ye?`${ye.filename}|${ye.subfolder}|${ye.type}`:null;b.useEffect(()=>{if(!we||Ye===he)return;const se=qn(we.filename,we.subfolder,we.type),Je=new Image;Je.onload=()=>T(we),Je.src=se},[Ye,he,we]);const Re=h?.[l.type],Ze=b.useMemo(()=>{const se=l.title;return typeof se=="string"&&se.trim()?se.trim():null},[l]),gt=Ze||Re?.display_name||l.type,Be=l.type==="KSampler",Se=l.mode===4,_e=!!l.flags?.collapsed,Xe=/LoadImage/i.test(l.type),Pe=b.useMemo(()=>!Xe||!m||!h?null:Q5(m,h,l),[Xe,l,h,m])??ye,P=b.useMemo(()=>{const se=Jd(h,l);return Be?se.filter(Je=>Je.name!=="seed"):se},[h,l,Be]),ft=b.useMemo(()=>ef(h,l),[h,l]),ot=b.useMemo(()=>ft.filter(se=>!se.connected),[ft]),tt=b.useMemo(()=>P.filter(se=>!se.connected),[P]),pt=b.useMemo(()=>{const se=l.properties,Je=["text","note","description","label","title"];if(se)for(const It of Je){const cn=se[It];if(typeof cn=="string"&&cn.trim())return cn}if(/note|comment|sticky|label/i.test(l.type)&&Array.isArray(l.widgets_values)){const It=l.widgets_values.find(cn=>typeof cn=="string"&&cn.trim());if(typeof It=="string"&&It.trim())return It}return null},[l.properties,l.widgets_values,l.type]),Ht=b.useMemo(()=>{if(!/note|comment|sticky|label/i.test(l.type)||!Array.isArray(l.widgets_values))return null;const Je=l.widgets_values.findIndex(Bt=>typeof Bt=="string"&&Bt.trim());return Je>=0?Je:null},[l.type,l.widgets_values]),Vt=se=>!m||!h?null:bl(m,h,l,se),$n=()=>!m||!h?null:Ea(m,h,l),fr=se=>{Ht!==null&&g(l.id,Ht,se)},or=b.useMemo(()=>{if(!pt)return null;const se=[],Je=/(https?:\/\/[^\s]+)/g;let Bt=0,It,cn=0;for(;(It=Je.exec(pt))!==null;){const[fn]=It,Yn=It.index;Yn>Bt&&se.push(pt.slice(Bt,Yn)),se.push(i.jsx("a",{href:fn,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline break-all",children:fn},`note-link-${cn++}`)),Bt=Yn+fn.length}return Bt<pt.length&&se.push(pt.slice(Bt)),se},[pt]),An=()=>{const se=Date.now();se-ne.current<300&&pe(!0),ne.current=se},ln=b.useMemo(()=>{const se=[];return ot.forEach(Je=>{se.push({widgetIndex:Je.widgetIndex,name:Je.name,type:Je.type,options:Je.options})}),tt.forEach(Je=>{se.push({widgetIndex:Je.widgetIndex,name:Je.name,type:Je.type,options:Je.options})}),se},[ot,tt]),an=b.useCallback(se=>{if(se.link!=null)return!1;if(se.widget)return!0;const Je=Re?.input?.required?.[se.name]||Re?.input?.optional?.[se.name];if(!Je)return!1;const[Bt,It]=Je;if(Array.isArray(Bt))return!0;const cn=String(Bt).toUpperCase(),fn=Object.prototype.hasOwnProperty.call(It??{},"default");return["INT","FLOAT","BOOLEAN","STRING"].includes(cn)||fn},[Re]),on=b.useMemo(()=>l.inputs.filter(se=>!(an(se)||String(se.type).toUpperCase()==="OPT_CONNECTION"&&se.link==null)),[l.inputs,an]),Rn=b.useMemo(()=>l.outputs.filter(se=>!((se.name||"").toLowerCase().replace(/[_\s]/g,"")==="showhelp"||String(se.type).toUpperCase()==="OPT_CONNECTION"&&!se.links?.length)),[l.outputs]),ke=l.outputs.some(se=>String(se.type).toUpperCase()==="IMAGE"),De=!!(Re?.output_node||/PreviewImage|SaveImage|SaveAnimatedPNG|SaveAnimatedWEBP|SaveVideo/i.test(l.type)),V=se=>D?.widgetIndex===se,ce=(se,Je,Bt,It)=>{V(se)?de(null):de({nodeId:l.id,widgetIndex:se,widgetName:Je,widgetType:Bt,options:It})},ue=ln.length===1?ln[0]:null,Ce=ue?V(ue.widgetIndex):!1,ze=!!D,Fe=L.includes(l.id),Te=L.length<5||Fe,nt=(ke||De)&&!!Pe,st=l.inputs?.filter(se=>se.link!=null).length??0,xt=l.outputs?.reduce((se,Je)=>se+(Je.links?.length??0),0)??0,yt=Math.min(3,st),vt=Math.min(3,xt),bt=Pe?(()=>{const{filename:se,subfolder:Je,type:Bt}=Pe,It=qn(se,Je,Bt),cn=Je?`${Je}/${se}`:se,fn=qo(se);return[{src:It,alt:gt,filename:se,mediaType:fn,file:{id:`${Bt}/${cn}`,name:se,type:fn==="video"?"video":"image",fullUrl:It}}]})():[];b.useEffect(()=>{if(!ee)return;const se=Qe.current;se&&(se.focus(),se.select())},[ee]);const Rt=()=>{Oe(gt),oe(!0)},qt=()=>{const se=ve.trim();v(l.id,se.length>0?se:null),oe(!1)},Nn=!!(Ne&&!/^error\b/i.test(Ne));return i.jsxs("div",{id:`node-card-wrapper-${l.id}`,className:"relative node-card-outer",children:[i.jsx("div",{id:`node-anchor-${l.id}`,className:"absolute -top-3 left-0 right-0 h-0 node-scroll-anchor"}),Nn&&i.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 z-[100] animate-in fade-in slide-in-from-bottom-2 duration-200",children:i.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg whitespace-nowrap uppercase tracking-tighter ring-2 ring-white",children:Ne})}),u&&i.jsx("div",{className:"absolute top-2 right-2 z-[110] animate-in fade-in duration-150",children:i.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg whitespace-nowrap uppercase tracking-tighter ring-2 ring-white",children:u})}),i.jsxs("div",{id:`node-card-${l.id}`,className:`
        node-card-inner
        ${p?"rounded-lg shadow-sm py-1":"rounded-xl shadow-md px-3 py-1 mb-3"}
        border-2
        ${Ke?"border-red-700 shadow-red-200":s?"border-orange-500 shadow-orange-200":o?"border-green-500 shadow-green-200":Se?"border-purple-300":"border-transparent"}
        ${Se?_e?"bg-purple-200":"bg-purple-100/50":"bg-white"}
      `,style:{overflow:"visible"},children:[i.jsx(t2,{nodeId:l.id,displayName:gt,isEditingLabel:ee,labelValue:ve,labelInputRef:Qe,onLabelChange:Oe,onLabelBlur:qt,isCollapsed:_e,isBypassed:Se,isExecuting:o,overallProgress:le,hasErrors:Ke,errorIconRef:Ve,errorPopoverOpen:I,setErrorPopoverOpen:O,toggleNodeFold:C,rightSlot:i.jsx(Zb,{nodeId:l.id,isBypassed:Se,onEditLabel:Rt,pinnableWidgets:ln,singlePinnableWidget:ue,isSingleWidgetPinned:Ce,hasPinnedWidget:ze,toggleWidgetPin:ce,setPinnedWidget:de,isNodeBookmarked:Fe,canAddNodeBookmark:Te,onToggleNodeBookmark:()=>R(l.id),toggleBypass:N,hideNode:S,connectionHighlightMode:M,setConnectionHighlightMode:w,leftLineCount:yt,rightLineCount:vt})}),i.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${_e?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:i.jsxs("div",{className:`overflow-hidden transition-opacity duration-200 ease-out ${_e?"opacity-0":"opacity-100"}`,children:[Ze&&i.jsx("div",{className:"node-card-subtitle text-[10px] text-center font-semibold uppercase tracking-wider text-gray-400 mb-2 px-1",children:Re?.display_name||l.type}),i.jsxs("div",{id:`node-content-${l.id}`,className:`node-expanded-content ${Se?"opacity-60 grayscale":""}`,children:[i.jsx(Pb,{nodeId:l.id,inputs:on,outputs:Rn,allInputs:l.inputs,allOutputs:l.outputs}),i.jsx(F5,{node:l,isBypassed:Se,isKSampler:Be,workflowExists:!!m,nodeTypesExists:!!h,visibleInputWidgets:ot,visibleWidgets:tt,errorInputNames:Ge,onUpdateNodeWidget:g,onUpdateNodeWidgets:x,getWidgetIndexForInput:Vt,findSeedWidgetIndex:$n,setSeedMode:Y,isWidgetPinned:V,toggleWidgetPin:ce}),pt&&i.jsx(Jb,{noteText:pt,noteLinkified:or,noteWidgetIndex:Ht,isEditingNote:X,setIsEditingNote:pe,onUpdateNote:fr,noteTextareaRef:F,onNoteTap:An}),i.jsx(e2,{show:nt,previewImage:Pe,displayName:gt,onImageClick:()=>d?.(bt,0),isExecuting:!!o,overallProgress:le,displayNodeProgress:z})]})]})})]}),i.jsx(Kb,{nodeId:l.id,open:I&&Ke,errors:B??[],anchorRef:Ve,onClose:()=>O(!1)})]})});function Q5(r,l,o){if(!l)return null;const s=bl(r,l,o,"image")??bl(r,l,o,"filename")??bl(r,l,o,"file");if(s==null||!Array.isArray(o.widgets_values))return null;const u=o.widgets_values[s];return X5(u)}function X5(r){if(typeof r=="string"&&r.trim()){const{filename:h,subfolder:m}=i0(r.trim());return{filename:h,subfolder:m,type:"input"}}if(!r||typeof r!="object")return null;const l=r,o=typeof l.filename=="string"?l.filename:typeof l.name=="string"?l.name:null;if(!o||!o.trim())return null;const s=typeof l.subfolder=="string"?l.subfolder:"",u=typeof l.type=="string"?l.type:"input",{filename:d,subfolder:p}=i0(o.trim());return{filename:d,subfolder:s||p,type:u}}function i0(r){const l=r.replace(/^\/+/,""),o=l.split("/").filter(Boolean);return o.length<=1?{filename:l,subfolder:""}:{filename:o.pop()??l,subfolder:o.join("/")}}function P5({group:r,nodeCount:l,isCollapsed:o,subgraphId:s=null,bookmarkNodeId:u=null,hiddenNodeCount:d=0,foldAllLabel:p,onToggleCollapse:h,onToggleFoldAll:m,onBypassAll:g,onHideGroup:x,onShowHiddenNodes:v}){const N=te(X=>X.updateGroupTitle),C=bn(X=>X.bookmarkedNodeIds),S=bn(X=>X.toggleNodeBookmark),[w,M]=b.useState(!1),[j,E]=b.useState(!1),[D,_]=b.useState(""),L=b.useRef(null),R=b.useRef(null),A=b.useRef(null),[B,G]=b.useState(null);b.useEffect(()=>{if(!w)return;const X=()=>{const oe=A.current;if(!oe)return;const ve=oe.getBoundingClientRect();G({top:ve.bottom+6,left:ve.right-160})};X();const pe=oe=>{!R.current||!oe.target||A.current?.contains(oe.target)||R.current.contains(oe.target)||M(!1)},ee=oe=>{const ve=oe.target;R.current&&ve&&R.current.contains(ve)||M(!1)};return document.addEventListener("mousedown",pe),document.addEventListener("scroll",ee,!0),window.addEventListener("resize",X),()=>{document.removeEventListener("mousedown",pe),document.removeEventListener("scroll",ee,!0),window.removeEventListener("resize",X)}},[w]);const U=qr(r.color,.22),W=qr(r.color,.4),J=r.title?.trim()||`Group ${r.id}`;b.useEffect(()=>{if(!j)return;const X=L.current;X&&(X.focus(),X.select())},[j]);const xe=()=>{j||h()},ae=X=>{X.stopPropagation(),h()},le=()=>{N(r.id,D,s),E(!1)},z=X=>{X.stopPropagation(),M(pe=>!pe)},Y=X=>{X.stopPropagation(),_(J),E(!0),M(!1)},de=X=>{X.stopPropagation(),m(),M(!1)},be=X=>pe=>{pe.stopPropagation(),g(X),M(!1)},ye=X=>{X.stopPropagation(),x(),M(!1)},T=X=>{X.stopPropagation(),v?.(),M(!1)},I=u!=null&&C.includes(u),O=u!=null&&(C.length<5||I),F=d>0&&!!v;return i.jsxs("div",{id:`group-header-${r.id}`,className:`group-header flex items-center justify-between cursor-pointer gap-3 px-3 py-2 ${o?"rounded-xl":"rounded-t-xl mb-2"}`,style:{backgroundColor:U,borderColor:W},onClick:xe,children:[i.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[i.jsx("button",{onClick:ae,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-500 hover:text-gray-700 shrink-0",children:o?i.jsx(Il,{className:"w-6 h-6"}):i.jsx(Wn,{className:"w-6 h-6"})}),j?i.jsx("input",{ref:L,value:D,onChange:X=>_(X.target.value),onBlur:le,onKeyDown:X=>{(X.key==="Enter"||X.key==="Escape")&&X.currentTarget.blur()},onClick:X=>X.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):i.jsx("h3",{className:"font-semibold text-gray-900 select-none flex-1 min-w-0 whitespace-nowrap overflow-hidden text-ellipsis",children:J}),o&&i.jsxs("span",{className:"text-sm text-gray-500 shrink-0",children:["(",l," node",l!==1?"s":"",")"]})]}),i.jsxs("div",{className:"flex items-center gap-1",onClick:X=>X.stopPropagation(),children:[i.jsx("button",{onClick:z,className:"w-8 h-8 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent","aria-label":"Group options",ref:A,children:i.jsx(wl,{className:"w-5 h-5 -rotate-90"})}),w&&B&&lr.createPortal(i.jsxs("div",{ref:R,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:B.top,left:B.left},children:[i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Y,children:[i.jsx(tf,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",onClick:X=>{X.stopPropagation(),u!=null&&(S(u),M(!1))},disabled:!O,children:[I?i.jsx(Mi,{className:"w-4 h-4 text-gray-500"}):i.jsx(Vl,{className:"w-4 h-4 text-yellow-500"}),I?"Remove bookmark":"Bookmark node"]}),i.jsx("div",{className:"border-t border-gray-200 my-1"}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:de,children:[p==="Fold all"?i.jsx(Il,{className:"w-4 h-4 text-gray-500"}):i.jsx(Wn,{className:"w-4 h-4 text-gray-500"}),p]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:be(!0),children:[i.jsx(Rd,{className:"w-4 h-4 text-gray-500",isBypassed:!0}),"Bypass all nodes"]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:be(!1),children:[i.jsx(Rd,{className:"w-4 h-4 text-gray-500",isBypassed:!1}),"Engage all nodes"]}),F&&i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:T,children:[i.jsx(dr,{className:"w-4 h-4 text-gray-500"}),"Show hidden nodes"]}),i.jsx("div",{className:"border-t border-gray-200 my-1"}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ye,children:[i.jsx(dr,{className:"w-4 h-4 text-gray-500"}),"Hide group"]})]}),document.body)]})]})}function Z5({group:r}){const l=qr(r.color,.15),o=qr(r.color,.3),s=()=>{document.getElementById(`group-header-${r.id}`)?.scrollIntoView({behavior:"smooth",block:"start"})};return i.jsx("div",{id:`group-footer-${r.id}`,className:"group-footer px-3 py-1.5 -mx-1 rounded-b-xl cursor-pointer",onClick:s,style:{backgroundColor:l,borderColor:o},children:i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 select-none",children:r.title})})}function K5({group:r}){const l=qr(r.color,.05),o=qr(r.color,.3),s=qr(r.color,.4);return i.jsx("div",{id:`group-placeholder-${r.id}`,className:"group-placeholder flex items-center justify-center px-4 py-6 border-l border-r",style:{backgroundColor:l,borderColor:o},children:i.jsx("div",{className:"w-full rounded-lg border-2 border-dashed flex items-center justify-center py-4",style:{borderColor:s},children:i.jsx("span",{className:"text-sm text-gray-400 select-none",children:"No nodes in group"})})})}const u0="rgba(59, 130, 246, 0.14)",c0="rgba(59, 130, 246, 0.25)";function J5({subgraph:r,nodeCount:l,isCollapsed:o,onToggleCollapse:s}){const u=te(G=>G.updateSubgraphTitle),d=te(G=>G.setSubgraphHidden),[p,h]=b.useState(!1),[m,g]=b.useState(!1),[x,v]=b.useState(""),N=b.useRef(null),C=b.useRef(null),S=b.useRef(null),[w,M]=b.useState(null),E=(r.name||r.id).trim()||r.id;b.useEffect(()=>{if(!p)return;const G=()=>{const J=S.current;if(!J)return;const xe=J.getBoundingClientRect();M({top:xe.bottom+6,left:xe.right-160})};G();const U=J=>{!C.current||!J.target||S.current?.contains(J.target)||C.current.contains(J.target)||h(!1)},W=J=>{const xe=J.target;C.current&&xe&&C.current.contains(xe)||h(!1)};return document.addEventListener("mousedown",U),document.addEventListener("scroll",W,!0),window.addEventListener("resize",G),()=>{document.removeEventListener("mousedown",U),document.removeEventListener("scroll",W,!0),window.removeEventListener("resize",G)}},[p]),b.useEffect(()=>{if(!m)return;const G=N.current;G&&(G.focus(),G.select())},[m]);const D=()=>{m||s()},_=G=>{G.stopPropagation(),s()},L=()=>{u(r.id,x),g(!1)},R=G=>{G.stopPropagation(),h(U=>!U)},A=G=>{G.stopPropagation(),v(E),g(!0),h(!1)},B=G=>{G.stopPropagation(),d(r.id,!0),h(!1)};return i.jsxs("div",{id:`subgraph-header-${r.id}`,className:`subgraph-header flex items-center justify-between cursor-pointer gap-3 px-3 py-2 ${o?"rounded-xl":"rounded-t-xl mb-3"}`,style:{backgroundColor:`var(--subgraph-bg, ${u0})`,borderColor:`var(--subgraph-border, ${c0})`,"--subgraph-bg":u0,"--subgraph-border":c0},onClick:D,children:[i.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[i.jsx("button",{onClick:_,className:"w-8 h-8 -ml-2 flex items-center justify-center text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 shrink-0",children:o?i.jsx(Il,{className:"w-6 h-6"}):i.jsx(Wn,{className:"w-6 h-6"})}),m?i.jsx("input",{ref:N,value:x,onChange:G=>v(G.target.value),onBlur:L,onKeyDown:G=>{(G.key==="Enter"||G.key==="Escape")&&G.currentTarget.blur()},onClick:G=>G.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 select-none flex-1 min-w-0 whitespace-nowrap overflow-hidden text-ellipsis",children:E}),o&&i.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400 shrink-0",children:["(",l," node",l!==1?"s":"",")"]})]}),i.jsx("button",{onClick:R,className:"flex items-center text-blue-400 dark:text-blue-500 opacity-60 hover:opacity-100","aria-label":"Subgraph options",ref:S,children:i.jsx(_a,{className:"w-5 h-5"})}),p&&w&&lr.createPortal(i.jsxs("div",{ref:C,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:w.top,left:w.left},children:[i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:A,children:[i.jsx(tf,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),i.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:B,children:[i.jsx(dr,{className:"w-4 h-4 text-gray-500"}),"Hide subgraph"]})]}),document.body)]})}const e3="rgba(59, 130, 246, 0.1)",t3="rgba(59, 130, 246, 0.2)";function n3({subgraph:r}){const l=r.name||r.id,o=()=>{document.getElementById(`subgraph-header-${r.id}`)?.scrollIntoView({behavior:"smooth",block:"start"})};return i.jsx("div",{id:`subgraph-footer-${r.id}`,className:"subgraph-footer px-3 py-1.5 -mx-1 rounded-b-xl cursor-pointer",onClick:o,style:{backgroundColor:e3,borderColor:t3},children:i.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-500 select-none",children:l})})}function hi(r){return String(r).split(",").map(l=>l.trim().toUpperCase()).filter(Boolean)}function d0(r){return r.toLowerCase().replace(/[_-]+/g," ").replace(/\s+/g," ").trim()}function r3(r,l){let o=0;for(const s of l)if(s===r[o]&&(o+=1,o>=r.length))return!0;return r.length===0}function f0(r,l){if(!r.trim())return!0;const o=d0(l);return d0(r).split(" ").filter(Boolean).every(s=>o.includes(s)||r3(s,o))}function l3({visible:r,onImageClick:l}){const o=te(V=>V.workflow),s=te(V=>V.executingNodeId),u=te(V=>V.connectionHighlightModes),d=te(V=>V.manuallyHiddenNodes),p=bn(V=>V.bookmarkBarSide),h=bn(V=>V.bookmarkBarTop),m=bn(V=>V.setBookmarkBarPosition),g=bn(V=>V.setBookmarkRepositioningActive),x=te(V=>V.ensureNodeExpanded),v=te(V=>V.scrollToNode),N=te(V=>V.revealNodeWithParents),C=te(V=>V.nodeTypes),S=Zt(V=>V.nodeErrors),w=te(V=>V.searchOpen),M=te(V=>V.searchQuery),j=te(V=>V.setSearchQuery),E=te(V=>V.setSearchOpen),D=te(V=>V.collapsedGroups),_=te(V=>V.hiddenGroups),L=te(V=>V.hiddenSubgraphs),R=te(V=>V.toggleGroupCollapse),A=te(V=>V.setGroupCollapsed),B=te(V=>V.setGroupHidden),G=te(V=>V.bypassAllInGroup),U=te(V=>V.collapsedSubgraphs),W=te(V=>V.toggleSubgraphCollapse),J=te(V=>V.setSubgraphCollapsed),xe=te(V=>V.setNodeFold),ae=bn(V=>V.bookmarkedNodeIds),le=b.useRef(null),z=b.useRef(null),Y=b.useRef(null),de=b.useRef(null),[be,ye]=b.useState(0),[T,I]=b.useState(!1),[O,F]=b.useState(!1),[X,pe]=b.useState(null),[ee,oe]=b.useState({}),ve=b.useRef(new Map),Oe=b.useRef(null),Qe=b.useRef(null),ne=b.useRef(null),Ve=()=>{j(""),E(!1)},Ne=b.useCallback((V,ce)=>{N(V),window.dispatchEvent(new CustomEvent("workflow-scroll-to-node",{detail:{nodeId:V,label:ce}})),v(V,ce)},[N,v]),Le=b.useCallback((V,ce)=>()=>{if(T){I(!1),F(!1),pe(null);return}ye(ce),Ne(V)},[T,Ne]),Ke=b.useCallback(()=>{if(T){I(!1),F(!1),pe(null);return}const V=(be+1)%ae.length;ye(V),Ne(ae[V])},[ae,be,T,Ne]),Ge=b.useCallback(()=>{Oe.current!=null&&(window.clearTimeout(Oe.current),Oe.current=null)},[]),we=b.useCallback(()=>{const V=getComputedStyle(document.documentElement).getPropertyValue("--bottom-bar-offset"),ce=Number.parseFloat(V);return Number.isFinite(ce)?ce:0},[]),Ye=b.useCallback(()=>{const V=le.current,ce=z.current;if(!V||!ce)return null;const ue=V.getBoundingClientRect().height,Ce=ce.getBoundingClientRect().height,ze=16,Fe=we()+8,Te=Math.max(ze,ue-Ce-Fe);return{minTop:ze,maxTop:Te}},[we]),he=b.useCallback(V=>{const ce=Ye();return ce?Math.min(Math.max(V,ce.minTop),ce.maxTop):V},[Ye]),Re=b.useCallback((V,ce)=>{const ue=le.current,Ce=ne.current;if(!ue||!Ce)return;const ze=ue.getBoundingClientRect(),Fe=V-ze.left-Ce.x,Te=he(ce-ze.top-Ce.y);pe({x:Fe,y:Te})},[he]),Ze=b.useCallback((V,ce)=>{const ue=le.current,Ce=z.current;if(!ue||!Ce)return;const ze=Ce.getBoundingClientRect(),Fe=ue.getBoundingClientRect();ne.current={x:V-ze.left,y:ce-ze.top};const Te=ze.left-Fe.left,nt=he(ze.top-Fe.top);pe({x:Te,y:nt}),F(!0)},[he]),gt=b.useCallback(V=>{V.pointerType==="mouse"&&V.button!==0||(V.preventDefault(),Qe.current={startX:V.clientX,startY:V.clientY,startTime:Date.now(),pointerId:V.pointerId},T?Ze(V.clientX,V.clientY):Oe.current=window.setTimeout(()=>{I(!0),Ze(V.clientX,V.clientY)},500),V.currentTarget.setPointerCapture(V.pointerId))},[T,Ze]),Be=b.useCallback(V=>{if(O){Re(V.clientX,V.clientY);return}const ce=Qe.current;if(!ce)return;const ue=V.clientX-ce.startX,Ce=V.clientY-ce.startY;Math.hypot(ue,Ce)>8&&Ge()},[Ge,O,Re]),Se=b.useCallback(()=>{const V=le.current,ce=z.current;if(!V||!ce||!X)return;const ue=V.getBoundingClientRect(),Ce=ce.getBoundingClientRect().width,Fe=X.x+Ce/2<ue.width/2?"left":"right",Te=he(X.y);m({side:Fe,top:Te}),pe(null)},[X,he,m]),_e=b.useCallback(V=>{Ge();const ce=Qe.current;if(Qe.current=null,O){Se(),F(!1);return}if(T||!ce)return;const ue=V.clientX-ce.startX,Ce=V.clientY-ce.startY,ze=Date.now()-ce.startTime;Math.abs(ue)>40&&Math.abs(ue)>Math.abs(Ce)&&ze<500&&m({side:p==="left"?"right":"left"})},[p,Ge,Se,O,T,m]),Xe=b.useCallback(()=>{Ge(),Qe.current=null,F(!1),pe(null)},[Ge]),We=b.useMemo(()=>{if(!o)return[];const V=z1(o);return Object.keys(d).length===0?V:V.filter(ce=>!d[ce.id])},[o,d]),Pe=M.trim(),P=w&&Pe.length>0,ft=b.useMemo(()=>o?$b(o):new Map,[o]),ot=b.useMemo(()=>{if(!P||!o)return new Set;const V=o.groups??[],ce=new Set;for(const ue of V)f0(Pe,ue.title)&&ce.add(ue.id);return ce},[o,P,Pe]),tt=b.useMemo(()=>P?We.filter(V=>{const ce=ft.get(V.id);if(ce!==void 0&&ot.has(ce))return!0;const ue=C?.[V.type],Ce=V.title,ze=[typeof Ce=="string"?Ce:"",ue?.display_name??"",V.type,String(V.id)];return f0(Pe,ze.join(" "))}):We,[We,P,Pe,C,ft,ot]),pt=b.useMemo(()=>o?P?tt.map(V=>({type:"node",node:V,groupId:null,subgraphId:null})):Qb(tt,o,D,_,U,L):[],[o,tt,D,_,U,L,P]),Ht=b.useMemo(()=>{const V=new Map;let ce=0;for(const ue of We){const Ce=S[String(ue.id)];Ce&&Ce.length>0&&(ce+=1,V.set(ue.id,ce))}return V},[We,S]),Vt=b.useMemo(()=>{if(!o)return new Set;const V=Object.entries(u).filter(([,Te])=>Te!=="off").map(([Te,nt])=>({id:Number(Te),mode:nt}));if(V.length===0)return new Set;const ce=new Map(o.nodes.map(Te=>[Te.id,Te])),ue=new Set,Ce=Te=>!!d[Te.id],ze=(Te,nt,st)=>{if(nt.has(Te))return[];nt.add(Te);const xt=ce.get(Te);if(!xt)return[];const yt=[];return xt.outputs?.forEach((vt,bt)=>{const Rt=hi(vt.type);if(st.size>0&&!Rt.some(Nn=>st.has(Nn)))return;Ni(o,Te,bt).forEach(Nn=>{const se=Nn.node;Ce(se)?yt.push(...ze(se.id,nt,st)):yt.push(se)})}),yt},Fe=(Te,nt,st)=>{if(nt.has(Te))return[];nt.add(Te);const xt=ce.get(Te);if(!xt)return[];const yt=[];return xt.inputs?.forEach((vt,bt)=>{if(vt.link===null)return;const Rt=hi(vt.type);if(st.size>0&&!Rt.some(Nn=>st.has(Nn)))return;const qt=Ao(o,Te,bt);qt&&(Ce(qt.node)?yt.push(...Fe(qt.node.id,nt,st)):yt.push(qt.node))}),yt};return V.forEach(({id:Te,mode:nt})=>{const st=ce.get(Te);st&&((nt==="inputs"||nt==="both")&&st.inputs?.forEach((xt,yt)=>{if(xt.link===null)return;const vt=Ao(o,st.id,yt);if(!vt)return;if(!Ce(vt.node)){ue.add(vt.node.id);return}const bt=new Set(hi(xt.type));Fe(vt.node.id,new Set,bt).forEach(qt=>ue.add(qt.id))}),(nt==="outputs"||nt==="both")&&st.outputs?.forEach((xt,yt)=>{const vt=new Set(hi(xt.type));Ni(o,st.id,yt).forEach(Rt=>{const qt=Rt.node;if(!Ce(qt)){ue.add(qt.id);return}ze(qt.id,new Set,vt).forEach(se=>ue.add(se.id))})}))}),ue},[o,u,d]);b.useEffect(()=>{const V=ce=>{const ue=ce.detail,Ce=typeof ue=="number"?ue:ue.nodeId,ze=typeof ue=="object"?ue.label:void 0;if(typeof Ce!="number"||!tt.some(yt=>yt.id===Ce))return;const Te=Ht.get(Ce),nt=ze??(Te?`Error #${Te}`:"Error");oe(yt=>({...yt,[Ce]:nt}));const st=ve.current.get(Ce);st&&window.clearTimeout(st);const xt=window.setTimeout(()=>{oe(yt=>{const vt={...yt};return delete vt[Ce],vt}),ve.current.delete(Ce)},2e3);ve.current.set(Ce,xt)};return window.addEventListener("workflow-label-error-node",V),()=>window.removeEventListener("workflow-label-error-node",V)},[tt,Ht]),b.useEffect(()=>{const V=ve.current;return()=>{V.forEach(ce=>window.clearTimeout(ce)),V.clear()}},[]),b.useEffect(()=>{const V=ce=>{const ue=ce.detail,Ce=typeof ue=="number"?ue:ue.nodeId,ze=typeof ue=="object"?ue.label:void 0;if(typeof Ce!="number")return;x(Ce);const Fe=document.getElementById(`node-card-${Ce}`);Fe&&Fe.scrollIntoView({behavior:"smooth",block:"start"}),requestAnimationFrame(()=>v(Ce,ze))};return window.addEventListener("workflow-scroll-to-node",V),()=>window.removeEventListener("workflow-scroll-to-node",V)},[x,v]),b.useEffect(()=>{w&&(Y.current&&Y.current.scrollTo({top:0,behavior:"auto"}),requestAnimationFrame(()=>{de.current?.focus();const V=le.current,ce=z.current,ue=de.current?.closest(".node-search-bar");if(!V||!ce||!ue)return;const Ce=V.getBoundingClientRect(),ze=ue.getBoundingClientRect(),Fe=ce.getBoundingClientRect(),Te=ze.bottom-Ce.top,nt=Fe.top-Ce.top,st=8;nt<Te+st&&m({top:Te+st})}))},[w,m]),b.useEffect(()=>(g(T),()=>g(!1)),[T,g]),b.useEffect(()=>{if(!ae.length)return;const V=window.requestAnimationFrame(()=>{const ce=Ye();if(!ce)return;const{minTop:ue,maxTop:Ce}=ce;if(h==null)m({top:Ce});else{const ze=Math.min(Math.max(h,ue),Ce);ze!==h&&m({top:ze})}});return()=>window.cancelAnimationFrame(V)},[ae.length,h,Ye,m]),b.useEffect(()=>{if(!T)return;const V=ce=>{const ue=z.current;!ue||!ce.target||ue.contains(ce.target)||(I(!1),F(!1),pe(null),Ge())};return document.addEventListener("pointerdown",V),()=>{document.removeEventListener("pointerdown",V)}},[Ge,T]);const $n=V=>{for(const ce of V){if(ce.type==="node")return ce.node.id;if(ce.type==="group"||ce.type==="subgraph"){const ue=$n(ce.children);if(ue!=null)return ue}}return null},fr=V=>{for(const ce of V){if(ce.type==="node"){if(!ce.node.flags?.collapsed)return!0;continue}if(!ce.isCollapsed||fr(ce.children))return!0}return!1},or=b.useCallback((V,ce)=>{const ue=Ce=>{for(const ze of Ce){if(ze.type==="node"){xe(ze.node.id,ce);continue}if(ze.type==="group"){A(ze.group.id,ce),ue(ze.children);continue}J(ze.subgraph.id,ce),ue(ze.children)}};ue(V)},[A,xe,J]),An=b.useCallback((V,ce)=>()=>{or(V,ce)},[or]),ln=(V,ce)=>V.map((ue,Ce)=>{const ze=`${ce}-${Ce}`;if(ue.type==="group"){const Fe=ue.group,Te=qr(Fe.color,.15),nt=qr(Fe.color,.4),st=$n(ue.children),xt=fr(ue.children),yt=xt?"Fold all":"Unfold all",vt=An(ue.children,xt);return i.jsxs("div",{id:`group-wrapper-${ue.group.id}`,className:"group-wrapper shadow-md rounded-xl border mb-3",style:{backgroundColor:Te,borderColor:nt},children:[i.jsx(P5,{group:Fe,nodeCount:ue.nodeCount,isCollapsed:ue.isCollapsed,subgraphId:ue.subgraphId,bookmarkNodeId:st,foldAllLabel:yt,onToggleCollapse:()=>R(ue.group.id),onToggleFoldAll:vt,onBypassAll:bt=>G(ue.group.id,bt,ue.subgraphId),onHideGroup:()=>B(ue.group.id,!0)}),i.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${ue.isCollapsed?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:i.jsxs("div",{className:`overflow-hidden px-1 transition-opacity duration-200 ease-out ${ue.isCollapsed?"opacity-0":"opacity-100"}`,children:[ue.children.length>0?ln(ue.children,ze):i.jsx(K5,{group:ue.group}),i.jsx(Z5,{group:ue.group})]})})]},`group-${ue.group.id}-${ze}`)}if(ue.type==="subgraph"){const Fe="rgba(59, 130, 246, 0.08)",Te="rgba(59, 130, 246, 0.25)";return i.jsxs("div",{className:"subgraph-wrapper shadow-md rounded-xl border mb-3",style:{backgroundColor:`var(--subgraph-bg, ${Fe})`,borderColor:`var(--subgraph-border, ${Te})`,"--subgraph-bg":Fe,"--subgraph-border":Te},children:[i.jsx(J5,{subgraph:ue.subgraph,nodeCount:ue.nodeCount,isCollapsed:ue.isCollapsed,onToggleCollapse:()=>W(ue.subgraph.id)}),i.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${ue.isCollapsed?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:i.jsxs("div",{className:`overflow-hidden px-1 transition-opacity duration-200 ease-out ${ue.isCollapsed?"opacity-0":"opacity-100"}`,children:[ue.children.length>0&&ln(ue.children,ze),i.jsx(n3,{subgraph:ue.subgraph})]})})]},`subgraph-${ue.subgraph.id}-${ze}`)}return i.jsx("div",{id:`node-card-${ue.node.id}`,children:i.jsx(Y5,{node:ue.node,isExecuting:s===String(ue.node.id),isConnectionHighlighted:Vt.has(ue.node.id),errorBadgeLabel:ee[ue.node.id]??null,onImageClick:l})},`node-${ue.node.id}-${ze}`)});let an;o?We.length===0?an=i.jsx("div",{id:"node-list-empty",className:"flex items-center justify-center h-full text-gray-500",children:i.jsxs("div",{id:"empty-workflow-content",className:"text-center p-8",children:[i.jsx("div",{id:"empty-workflow-icon-container",className:"flex items-center justify-center mb-4",children:i.jsx($1,{className:"w-10 h-10 text-gray-300"})}),i.jsx("p",{id:"empty-workflow-title",className:"text-lg font-medium",children:"Empty workflow"}),i.jsx("p",{id:"empty-workflow-description",className:"text-sm mt-2",children:"This workflow has no nodes"})]})}):an=i.jsxs("div",{id:"node-list-shell",className:"h-full flex flex-col",children:[w&&i.jsx("div",{className:"node-search-bar bg-gray-100 px-4 py-2",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{ref:de,value:M,onChange:V=>j(V.target.value),placeholder:"Search nodes...",className:"comfy-input w-full rounded-lg border border-gray-300 px-3 py-2 pr-9 text-sm text-gray-900 outline-none placeholder:text-gray-400 focus:border-gray-400 focus:ring-1 focus:ring-gray-400"}),i.jsx("button",{type:"button",onClick:Ve,className:"absolute right-1.5 top-1/2 -translate-y-1/2 w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:i.jsx(Gl,{className:"w-4 h-4"})})]})}),i.jsx("div",{id:"node-list-container",ref:Y,className:"flex-1 overflow-auto px-4 pt-4 overscroll-contain scroll-container",style:{paddingBottom:"10rem"},"data-node-list":"true",children:pt.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:i.jsxs("div",{className:"text-center p-8",children:[i.jsx("p",{className:"text-sm font-medium",children:"No matching nodes"}),i.jsx("p",{className:"text-xs mt-2",children:"Try a different search."})]})}):i.jsx("div",{id:"node-list-inner",children:ln(pt,"root")})})]}):an=i.jsx("div",{id:"node-list-no-workflow",className:"flex items-center justify-center h-full text-gray-500",children:i.jsxs("div",{id:"no-workflow-content",className:"text-center p-8",children:[i.jsx("div",{id:"no-workflow-icon-container",className:"flex items-center justify-center mb-4",children:i.jsx(W1,{className:"w-10 h-10 text-gray-300"})}),i.jsx("p",{id:"no-workflow-title",className:"text-lg font-medium",children:"No workflow loaded"}),i.jsx("p",{id:"no-workflow-description",className:"text-sm mt-2",children:"Open the menu to load a workflow"})]})});const on=X?.y??h??0,Rn=X?`${X.x}px`:p==="left"?"0.75rem":void 0,ke=X?void 0:p==="right"?"0.75rem":void 0,De={top:`${on}px`,left:Rn,right:ke,opacity:h==null&&X==null?0:1,touchAction:T?"none":"pan-y",pointerEvents:h==null&&X==null?"none":"auto"};return i.jsxs("div",{id:"node-list-wrapper",ref:le,className:"absolute inset-x-0 top-[69px] bottom-0 bg-gray-100",style:{display:r?"block":"none"},children:[an,ae.length>0&&i.jsx("div",{ref:z,className:`absolute z-[200] flex flex-col items-center gap-2 pointer-events-auto ${T?"rounded-2xl ring-2 ring-blue-400/70 bg-white/30 shadow-lg":""}`,style:De,onPointerDown:gt,onPointerMove:Be,onPointerUp:_e,onPointerCancel:Xe,children:i.jsxs("div",{className:`flex flex-col items-center gap-2 ${T?"p-2 cursor-grab":""}`,children:[ae.map((V,ce)=>i.jsx("button",{type:"button",className:"w-10 h-10 rounded-full border border-transparent bg-gray-900/10 text-[11px] font-bold text-gray-800 shadow-sm backdrop-blur-sm dark:bg-white/10 dark:text-gray-100 select-none",onClick:Le(V,ce),children:V},V)),ae.length>1&&i.jsx("button",{type:"button",className:"w-10 h-10 rounded-full border border-transparent bg-gray-900/10 text-gray-600 shadow-sm backdrop-blur-sm flex items-center justify-center dark:bg-white/10 dark:text-gray-200 select-none","aria-label":"Cycle bookmarks",onClick:Ke,children:i.jsx(Wn,{className:"w-4 h-4"})})]})})]})}function a3(){const r=Ln(O=>O.currentPanel),l=rr(O=>O.viewerOpen),o=te(O=>O.workflow),s=te(O=>O.isExecuting),u=te(O=>O.progress),d=te(O=>O.executingNodeId),p=te(O=>O.executingPromptId),h=te(O=>O.workflowDurationStats),m=Zt(O=>O.error),g=Zt(O=>O.nodeErrors),x=Zt(O=>O.errorsDismissed),v=Zt(O=>O.setErrorsDismissed),N=te(O=>O.scrollToNode),C=Zt(O=>O.errorCycleIndex),S=Zt(O=>O.setErrorCycleIndex),w=te(O=>O.revealNodeWithParents),M=te(O=>O.nodeTypes),j=lt(O=>O.running),[E,D]=b.useState(null),R=!(r==="queue")&&!(r==="outputs")&&!l,A=Object.values(g).reduce((O,F)=>O+F.length,0),B=A>0,G=!!m?.startsWith("Workflow load error")||B,U=G?"Workflow load error":"Prompt error",W=G&&m?m.replace(/^Workflow load error:\s*/i,""):m??(B?`${A} inputs reference missing options.`:null),J=(!!m||B)&&!x,xe=b.useMemo(()=>{if(!o||!d)return null;const O=o.nodes.find(X=>String(X.id)===d);return O?M?.[O.type]?.display_name||O.type:`Node ${d}`},[o,d,M]),ae=p||(j[0]?.prompt_id??null),le=Go({workflow:o,runKey:ae,isRunning:s||j.length>0,workflowDurationStats:h}),z=le===100?100:u,Y=()=>{if(!o||!B)return;const O=o.nodes.filter(ee=>g[String(ee.id)]?.length).map(ee=>ee.id);if(O.length===0)return;const F=C%O.length,X=O[F],pe=`Error #${F+1}`;w(X),S((F+1)%O.length),window.dispatchEvent(new CustomEvent("workflow-label-error-node",{detail:{nodeId:X,label:pe}})),window.dispatchEvent(new CustomEvent("workflow-scroll-to-node",{detail:{nodeId:X,label:pe}})),N(X,pe)},de=O=>{(O.key==="Enter"||O.key===" ")&&(O.preventDefault(),Y())},be=O=>{O.stopPropagation()},ye=O=>{O.stopPropagation(),v(!0)},T=()=>{ae&&D(ae)},I=E!==null&&E===ae;return R?i.jsxs("div",{id:"bottom-status-overlay",className:"fixed inset-x-0 bottom-20 z-[2000] flex flex-col items-center gap-3 pointer-events-none",children:[J&&i.jsxs("div",{id:"error-notification-wrapper",className:"relative pointer-events-auto",children:[i.jsx("div",{id:"error-notification-toast",className:"bg-red-100 text-red-900 rounded-xl shadow-lg px-4 py-3 w-[70vw] max-w-sm",role:"button",tabIndex:0,onClick:Y,onKeyDown:de,children:i.jsx("div",{className:"error-toast-content flex items-start justify-between gap-3",children:i.jsxs("div",{className:"error-text-container pr-16",children:[i.jsx("div",{className:"error-title text-sm font-semibold text-red-800",children:U}),i.jsx("div",{className:"error-message mt-1 text-xs text-red-800 break-words",children:W})]})})}),i.jsx("button",{id:"error-dismiss-button",type:"button","aria-label":"Dismiss error",className:"absolute top-3 right-3 shrink-0 px-3 py-1 text-xs font-semibold bg-red-700 text-white rounded-full z-10",onPointerDown:be,onClick:ye,children:"Dismiss"})]}),le!==null&&!I&&i.jsxs("div",{id:"execution-progress-card",className:"relative bg-white border border-gray-200 rounded-xl shadow-lg px-4 py-2 w-[70vw] max-w-sm pointer-events-auto",children:[i.jsx("button",{type:"button","aria-label":"Dismiss progress",className:"absolute top-2 right-2 w-7 h-7 rounded-full flex items-center justify-center text-gray-400 hover:text-gray-600",onClick:T,children:i.jsx(Gl,{className:"w-4 h-4"})}),i.jsx("div",{className:"executing-node-name text-sm font-semibold text-gray-900",children:xe||"Running"}),i.jsxs("div",{className:"node-progress-info mt-2 flex items-center justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"Progress"}),i.jsxs("span",{children:[z,"%"]})]}),i.jsx("div",{className:"node-progress-track mt-1 h-2 rounded-full bg-gray-200 overflow-hidden",children:i.jsx("div",{className:"node-progress-bar h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,z))}%`}})}),le!==null&&i.jsxs("div",{className:"overall-progress-container",children:[i.jsxs("div",{className:"overall-progress-info mt-3 flex items-center justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"Overall"}),i.jsxs("span",{children:[le,"%"]})]}),i.jsx("div",{className:"overall-progress-track mt-1 h-2 rounded-full bg-gray-200 overflow-hidden",children:i.jsx("div",{className:"overall-progress-bar h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,le))}%`}})})]})]})]}):null}function o3({viewerOpen:r,followQueue:l,queueSize:o,overallProgress:s,onToggleFollowQueue:u,onOpenFollowQueue:d}){const p=b.useCallback(()=>{r?u?.():d?.()},[r,u,d]),h=b.useMemo(()=>r?l?"Disable follow queue":"Enable follow queue":"Open image viewer",[r,l]),m=b.useMemo(()=>r&&l?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200",[r,l]);return i.jsxs("button",{onClick:p,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${m}`,"aria-label":h,children:[i.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(A0,{className:"w-6 h-6",showSlash:r&&!l})}),o>0&&i.jsxs("div",{className:`queue-badge absolute top-0 right-0 translate-x-[18px] -translate-y-[18px] w-6 h-6 rounded-full bg-blue-500 text-white
                     flex items-center justify-center font-bold text-xs border-2 border-white relative z-20`,children:[s!==null&&i.jsx(nb,{className:"absolute z-10 pointer-events-none",width:"24",height:"24",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-90deg)"},progress:s}),o]})]})}function s3(){const r=te(p=>p.workflow),l=Gn(p=>p.pinnedWidget),o=Gn(p=>p.pinOverlayOpen),s=Gn(p=>p.togglePinOverlay),u=te(p=>p.updateNodeWidget),d=b.useMemo(()=>{if(!l||!r)return;const p=r.nodes.find(h=>h.id===l.nodeId);if(p)return Lo(p,l.widgetName,l.widgetIndex)},[l,r]);return!o||!l?null:i.jsx("div",{id:"pin-overlay-hidden-anchor",className:"hidden",children:i.jsx(cr,{name:l.widgetName,type:l.widgetType,value:d,options:l.options,onChange:p=>u(l.nodeId,l.widgetIndex,p,l.widgetName),hideLabel:!0,compact:!0,forceModalOpen:!0,onModalClose:s})})}function i3(){const r=Nt(l=>l.setFilterModalOpen);return i.jsx("button",{onClick:()=>r(!0),className:"relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors bg-gray-100 text-gray-700 hover:bg-gray-200","aria-label":"Filter and sort",children:i.jsx(q1,{className:"w-6 h-6"})})}function u3(){const r=Nt(s=>s.selectedIds.length),l=Nt(s=>s.setSelectionActionOpen),o=r===0;return i.jsx("button",{onClick:()=>l(!0),disabled:o,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${o?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,"aria-label":"Selection actions",children:i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shadow-sm ${o?"border-gray-300 bg-transparent":"bg-blue-600 border-blue-600 text-white"}`,children:!o&&i.jsx(Hl,{className:"w-4 h-4"})})})}function c3(){return Nt(l=>l.selectionMode)?i.jsx(u3,{}):i.jsx(i3,{})}function d3(){const r=Gn(s=>s.pinnedWidget),l=Gn(s=>s.pinOverlayOpen),o=Gn(s=>s.togglePinOverlay);return r?i.jsx("button",{onClick:o,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${l?"bg-fuchsia-500 text-white":"bg-gray-100 text-fuchsia-500 hover:bg-gray-200"}`,"aria-label":l?"Close pin editor":"Open pin editor",children:i.jsx(Do,{className:"w-6 h-6"})}):null}function f3(){const r=te(d=>d.workflow),l=te(d=>d.runCount),o=te(d=>d.queueWorkflow),s=r!==null,u=()=>{s&&(o(l),"vibrate"in navigator&&navigator.vibrate(20))};return i.jsx("button",{onClick:u,disabled:!s,className:"flex-1 py-3 px-6 rounded-xl font-semibold text-lg min-h-[48px] transition-all "+(s?"bg-blue-500 text-white active:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Run"})}function p3(){const r=te(u=>u.runCount),l=te(u=>u.setRunCount),o=()=>{l(r-1)},s=()=>{l(r+1)};return i.jsxs("div",{id:"run-count-selector",className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:o,disabled:r<=1,className:`w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center
                   text-lg font-medium text-gray-700 disabled:opacity-40 disabled:shadow-none`,children:""}),i.jsx("span",{className:"w-8 text-center font-semibold text-gray-900",children:r}),i.jsx("button",{onClick:s,className:`w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center
                   text-lg font-medium text-gray-700`,children:"+"})]})}function m3(r){const{currentPanel:l,viewerOpen:o=!1,followQueue:s=!1,onToggleFollowQueue:u,onOpenFollowQueue:d}=r,p=l==="outputs",h=te(j=>j.workflow),m=te(j=>j.isExecuting),g=te(j=>j.executingPromptId),x=te(j=>j.workflowDurationStats),v=lt(j=>j.pending),N=lt(j=>j.running),C=b.useRef(null),S=v.length+N.length,w=g||(N[0]?.prompt_id??null),M=Go({workflow:h,runKey:w,isRunning:m||N.length>0,workflowDurationStats:x});return b.useEffect(()=>{const j=C.current;if(!j)return;const E=()=>{const D=j.getBoundingClientRect();document.documentElement.style.setProperty("--bottom-bar-offset",`${D.height}px`)};return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),i.jsxs("div",{id:"bottom-bar-root",ref:C,className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg safe-area-bottom z-[2200]",children:[i.jsxs("div",{id:"bottom-bar-content",className:"flex items-center gap-3 px-3 py-2 max-w-lg mx-auto",children:[i.jsx(p3,{}),i.jsx(f3,{}),p&&i.jsx(c3,{}),!p&&i.jsx(d3,{}),i.jsx(o3,{viewerOpen:o,followQueue:s,queueSize:S,overallProgress:M,onToggleFollowQueue:u,onOpenFollowQueue:d})]}),i.jsx(s3,{}),i.jsx(a3,{})]})}const p0=r=>Symbol.iterator in r,m0=r=>"entries"in r,h0=(r,l)=>{const o=r instanceof Map?r:new Map(r.entries()),s=l instanceof Map?l:new Map(l.entries());if(o.size!==s.size)return!1;for(const[u,d]of o)if(!s.has(u)||!Object.is(d,s.get(u)))return!1;return!0},h3=(r,l)=>{const o=r[Symbol.iterator](),s=l[Symbol.iterator]();let u=o.next(),d=s.next();for(;!u.done&&!d.done;){if(!Object.is(u.value,d.value))return!1;u=o.next(),d=s.next()}return!!u.done&&!!d.done};function g3(r,l){return Object.is(r,l)?!0:typeof r!="object"||r===null||typeof l!="object"||l===null||Object.getPrototypeOf(r)!==Object.getPrototypeOf(l)?!1:p0(r)&&p0(l)?m0(r)&&m0(l)?h0(r,l):h3(r,l):h0({entries:()=>Object.entries(r)},{entries:()=>Object.entries(l)})}function x3(r){const l=ka.useRef(void 0);return o=>{const s=r(o);return g3(l.current,s)?l.current:l.current=s}}function bd(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}function Ox(r){return Array.isArray(r)&&r.length>=2&&(typeof r[0]=="string"||typeof r[0]=="number")&&typeof r[1]=="number"}function Qi(r){return r.class_type??r.type??null}function yf(r,l){for(const o of l){const s=r.inputs?.[o];if(!Ox(s)&&s!==void 0)return s}}function Oa(r,l){const o=yf(r,l);if(o!=null)return typeof o=="string"?o:String(o)}function wd(r,l){if(!Ox(l))return null;const o=String(l[0]);return r[o]??null}function y3(r){if(!r)return;const l=Oa(r,["sampler_name","sampler","name"]);if(l)return l;if(Qi(r)==="KSamplerSelect"&&Array.isArray(r.widgets_values)){const s=r.widgets_values[0];return s==null?void 0:String(s)}}function v3(r){if(!r)return;const l=Oa(r,["scheduler","scheduler_name","name"]);if(l)return l;if(Qi(r)==="BasicScheduler"&&Array.isArray(r.widgets_values)){const s=r.widgets_values[0];return s==null?void 0:String(s)}}function b3(r){if(!r)return;const l=yf(r,["steps","step_count"]);if(l!==void 0)return l;if(Qi(r)==="BasicScheduler"&&Array.isArray(r.widgets_values)){const s=r.widgets_values[1];return s??void 0}}function w3(r){if(!r)return;const l=yf(r,["cfg","guidance","guidance_scale"]);if(l!==void 0)return l;if(Array.isArray(r.widgets_values)){const o=r.widgets_values[0];return o??void 0}}function vf(r){const l={};if(!bd(r)&&!Array.isArray(r))return l;let o=null;if(Array.isArray(r)&&r.length>=3&&bd(r[2])?o=r[2]:bd(r)&&(o=r),!o)return l;const u=Object.entries(o).sort((d,p)=>Number(d[0])-Number(p[0])).map(([,d])=>d);for(const d of u){const p=Qi(d);if(p){if(p==="CheckpointLoaderSimple"||p==="CheckpointLoader"){const h=d.inputs?.ckpt_name;typeof h=="string"?l.model=h.replace(/\.(safetensors|ckpt|pt)$/i,""):h!=null&&(l.model=String(h).replace(/\.(safetensors|ckpt|pt)$/i,""))}if(p==="KSampler"||p==="KSamplerAdvanced"){if(l.steps===void 0&&d.inputs?.steps!==void 0&&(l.steps=d.inputs.steps),l.cfg===void 0&&d.inputs?.cfg!==void 0&&(l.cfg=d.inputs.cfg),l.sampler===void 0){const h=Oa(d,["sampler_name"]);h&&(l.sampler=h)}if(l.scheduler===void 0){const h=Oa(d,["scheduler"]);h&&(l.scheduler=h)}}if(p==="SamplerCustom"||p==="SamplerCustomAdvanced"){if(l.steps===void 0&&d.inputs?.steps!==void 0&&(l.steps=d.inputs.steps),l.cfg===void 0&&d.inputs?.cfg!==void 0&&(l.cfg=d.inputs.cfg),l.sampler===void 0){const h=Oa(d,["sampler","sampler_name"]),m=wd(o,d.inputs?.sampler),g=h??y3(m);g&&(l.sampler=g)}if(l.scheduler===void 0){const h=Oa(d,["scheduler","scheduler_name"]),m=wd(o,d.inputs?.sigmas??d.inputs?.scheduler),g=h??v3(m);g&&(l.scheduler=g)}if(l.steps===void 0){const h=wd(o,d.inputs?.sigmas??d.inputs?.scheduler),m=b3(h);m!==void 0&&(l.steps=m)}}if(p==="FluxGuidance"&&l.cfg===void 0){const h=w3(d);h!==void 0&&(l.cfg=h)}}}return l}function bf(r,l={}){const{onlyOutput:o=!1,alt:s}=l,u=[];return r.forEach((d,p)=>{const h=d.outputs?.images??[],m=vf(d.prompt),g=d.durationSeconds,x=d.success!==!1;h.forEach((v,N)=>{if(o&&v.type!=="output")return;const C=typeof s=="function"?s(N,p):s,S=v.subfolder?`${v.subfolder}/${v.filename}`:v.filename,w=qo(v.filename),M=w==="video"?"video":"image";u.push({src:qn(v.filename,v.subfolder,v.type),alt:C,mediaType:w,metadata:m,durationSeconds:g,success:x,filename:v.filename,file:{id:`${v.type}/${S}`,name:v.filename,type:M,fullUrl:qn(v.filename,v.subfolder,v.type)}})})}),u}function S3({menuState:r,unifiedList:l,onClose:o,onLoadWorkflow:s,onCopyWorkflow:u,onDownload:d,onBatchDownload:p,onDeleteHistory:h,getBatchSources:m}){const g=r?.promptId??"",x=lt(j=>j.queueItemHideImages[g]),v=lt(j=>j.toggleQueueItemHideImages),N=()=>{r?.workflow&&r.promptId&&s(r.workflow,r.promptId),o()},C=()=>{u(r?.workflow),o()},S=async()=>{const j=r?.promptId?m(r.promptId,l):[];j.length>1?await p(j):r&&await d(r.imageSrc),o()},w=()=>{v(g),o()},M=()=>{r?.promptId&&h(r.promptId),o()};return r?.open?lr.createPortal(i.jsxs("div",{id:"queue-image-menu",className:"fixed z-[1200] bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden w-44",style:{top:r.top,right:r.right},children:[i.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${r.workflow?"":"opacity-50 cursor-not-allowed"}`,onClick:N,disabled:!r.workflow,children:[i.jsx(_a,{className:"w-4 h-4 text-gray-500"}),"Load workflow"]}),i.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${r.workflow?"":"opacity-50 cursor-not-allowed"}`,onClick:C,disabled:!r.workflow,children:[i.jsx(K1,{className:"w-4 h-4 text-gray-500"}),"Copy workflow"]}),i.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:S,children:[i.jsx(J1,{className:"w-4 h-4 text-gray-500"}),r.promptId&&m(r.promptId,l).length>1?"Download batch":"Download"]}),r.hasVideoOutputs&&r.hasImageOutputs&&r.promptId&&i.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:w,children:[x?i.jsx(Vr,{className:"w-4 h-4 text-gray-500"}):i.jsx(dr,{className:"w-4 h-4 text-gray-500"}),x?"Show images":"Hide images"]}),i.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50",onClick:M,children:[i.jsx(Gr,{className:"w-4 h-4"}),"Delete"]})]}),document.body):null}function N3({message:r}){return r?lr.createPortal(i.jsx("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-[1300] bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg text-sm font-medium animate-in fade-in slide-in-from-top-2 duration-200",children:r}),document.body):null}function Ex(r){return"outputs"in r}function j3(r,l){const o=l.find(u=>u.id===r);return!o||o.status!=="done"?[]:Ex(o.data)?(o.data.outputs.images??[]).filter(u=>u.type==="output").map(u=>qn(u.filename,u.subfolder,u.type)):[]}async function Tx(r,l="image.png",o){try{const u=await(await fetch(r)).blob(),d=URL.createObjectURL(u),p=document.createElement("a");p.href=d,p.download=l,document.body.appendChild(p),p.click(),p.remove(),URL.revokeObjectURL(d),o?.(r)}catch(s){console.error("Failed to download image:",s)}}async function C3(r,l){for(const o of r)await Tx(o,"image.png",l)}async function k3(r){try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(r);else{const l=document.createElement("textarea");l.value=r,l.style.position="fixed",l.style.opacity="0",document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l)}return!0}catch(l){return console.error("Failed to copy to clipboard:",l),!1}}function M3({item:r,isActuallyRunning:l,progress:o,overallProgress:s,executingNodeLabel:u,onDelete:d,onStop:p,onImageClick:h,viewerImages:m,runningImages:g,onOpenMenu:x,downloaded:v,isTopDoneItem:N}){const C=lt(we=>we.previewVisibility),S=lt(we=>we.previewVisibilityDefault),w=lt(we=>we.showQueueMetadata),M=lt(we=>we.queueItemExpanded[r.id]),j=lt(we=>we.setQueueItemExpanded),E=lt(we=>we.queueItemHideImages[r.id]),D=b.useRef(new Map),_=b.useRef(new Set),[L,R]=b.useState(new Set),A=r.status==="pending"&&!l,B=r.status==="running"||l,G=r.status==="done",U=M!==void 0,W=U?M:!1,J=b.useRef(G);b.useEffect(()=>{U||j(r.id,!1)},[U,r.id,j]),b.useEffect(()=>{!J.current&&G&&j(r.id,!0),J.current=G},[G,r.id,j]),b.useEffect(()=>{_.current.clear(),R(new Set)},[r.id]);const xe=()=>{j(r.id,!W)},ae=G&&Ex(r.data)?r.data:null,le=b.useMemo(()=>ae?ae.outputs.images:B?g:[],[ae,B,g]),z=!!(r.data.prompt_id?C[r.data.prompt_id]??S:S),{savedImages:Y,displayImages:de}=b.useMemo(()=>{const we=le.filter(Re=>Re.type==="output"),Ye=le.filter(Re=>Re.type!=="output"),he=z||we.length===0&&Ye.length>0;return{savedImages:we,displayImages:he?[...we,...Ye]:we}},[z,le]),be=b.useMemo(()=>le.some(we=>Ca(we.filename)),[le]),ye=b.useMemo(()=>le.some(we=>!Ca(we.filename)),[le]),T=b.useMemo(()=>!E||!be?de:de.filter(we=>Ca(we.filename)),[de,be,E]),I=Y.map(we=>({src:qn(we.filename,we.subfolder,we.type),alt:"Generation"})),O="aspect-square w-full bg-gray-100 flex flex-col items-center justify-center text-gray-400",F=ae?.durationSeconds,X=ae?ae.success!==!1:!0,pe=O3(F),ee=s===100?100:o,oe=b.useMemo(()=>!w||!r.data.prompt?null:vf(r.data.prompt),[w,r.data.prompt]),ve=b.useMemo(()=>B?T.map(we=>({src:qn(we.filename,we.subfolder,we.type),alt:"Generation",mediaType:qo(we.filename)})):m,[B,m,T]);b.useEffect(()=>{W&&T.forEach(we=>{if(!Ca(we.filename))return;const Ye=qn(we.filename,we.subfolder,we.type);if(_.current.has(Ye))return;_.current.add(Ye);const he=D.current.get(Ye);if(!he)return;he.currentTime=0,R(Ze=>{const gt=new Set(Ze);return gt.delete(Ye),gt});const Re=he.play();Re&&typeof Re.catch=="function"&&Re.catch(()=>{})})},[W,T]);const Oe=we=>{we.stopPropagation(),xe()},Qe=we=>{we.stopPropagation(),p()},ne=we=>{we.stopPropagation(),d()},Ve=we=>{we.stopPropagation();const Ye=we.currentTarget.getBoundingClientRect(),he=Math.max(8,window.innerWidth-Ye.right),Re=I[0]?.src||"";x({top:Ye.bottom+6,right:he,imageSrc:Re,workflow:ae?.workflow,promptId:r.data.prompt_id||r.id,hasVideoOutputs:be,hasImageOutputs:ye})},Ne=we=>()=>{R(Ye=>new Set(Ye).add(we))},Le=we=>()=>{R(Ye=>{const he=new Set(Ye);return he.delete(we),he})},Ke=(we,Ye,he)=>()=>{const Re=ve.findIndex(Ze=>Ze.src===we);h?.(ve,Re>=0?Re:Ye,he)},Ge=we=>Ye=>{Ye.stopPropagation();const he=D.current.get(we);if(!he)return;he.currentTime=0;const Re=he.play();Re&&typeof Re.catch=="function"&&Re.catch(()=>{})};return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden transition-all duration-300",children:[i.jsxs("div",{onClick:xe,className:`px-3 py-2 border-b flex justify-between items-center cursor-pointer select-none ${B?"bg-blue-50 border-blue-100":"bg-gray-50 border-gray-100"}`,children:[i.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[i.jsx("button",{onClick:Oe,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-400 hover:text-gray-600 shrink-0",children:W?i.jsx(Wn,{className:"w-6 h-6"}):i.jsx(Il,{className:"w-6 h-6"})}),B&&i.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),A&&i.jsx("span",{className:"text-xs font-bold text-gray-400",children:"PENDING"}),B&&i.jsx("span",{className:"text-xs font-bold text-blue-600",children:"GENERATING"}),G&&i.jsx("span",{className:"text-xs font-bold text-gray-500",children:new Date(r.timestamp||0).toLocaleTimeString()}),B&&!W&&l&&s!=null&&i.jsxs("span",{className:"ml-1 text-xs font-semibold text-blue-600",children:[Math.min(100,Math.max(0,s)),"%"]})]}),i.jsx("div",{className:"flex items-center gap-2",children:B?i.jsx("button",{onClick:Qe,className:"px-2 py-1 text-xs font-semibold text-white bg-red-600 rounded hover:bg-red-700",children:"Stop"}):G?i.jsx("button",{className:"w-7 h-7 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent",onClick:Ve,"aria-label":"Image options",children:i.jsx(wl,{className:"w-4 h-4 -rotate-90"})}):i.jsx("button",{onClick:ne,className:"text-gray-400 hover:text-red-500 px-2",title:A?"Remove from Queue":"Delete from History","aria-label":A?"Remove from Queue":"Delete from History",children:i.jsx(Gl,{className:"w-4 h-4"})})})]}),W&&i.jsx("div",{className:"relative w-full animate-in fade-in duration-200",children:T.length>0?i.jsx("div",{className:"flex flex-col",children:(()=>{let we=0,Ye=0;return T.map((he,Re)=>{const Ze=he.type!=="output",gt=Ze?++Ye:++we,Be=`${Ze?"Preview":"Save"} #${gt}`,Se=qn(he.filename,he.subfolder,he.type),_e=v[Se],Xe=T.length>1;return i.jsxs("div",{className:"relative",children:[pe&&i.jsxs("div",{className:`absolute top-2 left-2 flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold ${X?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:[X?i.jsx(Hl,{className:"w-3.5 h-3.5"}):i.jsx(Q1,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:pe})]}),Ca(he.filename)?i.jsxs(i.Fragment,{children:[i.jsx("video",{src:Se,className:"w-full h-auto block",muted:!0,playsInline:!0,preload:"metadata",ref:We=>{We?D.current.set(Se,We):D.current.delete(Se)},onEnded:Ne(Se),onPlay:Le(Se),onClick:Ke(Se,Re,N)}),L.has(Se)&&i.jsx("button",{type:"button",className:"absolute inset-0 flex items-center justify-center bg-black/35 text-white",onClick:Ge(Se),"aria-label":"Replay video",children:i.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-black/60 text-2xl",children:""})})]}):i.jsx("img",{src:Se,alt:"Generation",className:"w-full h-auto block",loading:"lazy",onClick:Ke(Se,Re,N)}),_e&&i.jsx("div",{className:"absolute bottom-2 right-2 w-7 h-7 rounded-full bg-black/60 text-white flex items-center justify-center",children:i.jsx(X1,{className:"w-4 h-4"})}),Xe&&i.jsx("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/60 text-white text-xs font-medium rounded backdrop-blur-sm shadow-sm pointer-events-none",children:Be}),oe&&i.jsxs("div",{className:`absolute right-2 flex flex-col-reverse items-end gap-1 pointer-events-none ${_e?"bottom-10":"bottom-2"}`,children:[oe.model&&i.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["model: ",oe.model]}),oe.sampler&&i.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["sampler: ",oe.sampler]}),oe.steps&&i.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["steps: ",oe.steps]}),oe.cfg&&i.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["cfg: ",oe.cfg]})]})]},Re)})})()}):G?i.jsx("div",{className:O,children:i.jsx("span",{className:"text-sm",children:"No images saved"})}):B?i.jsx("div",{className:O,style:{minHeight:"300px"},children:l&&s!=null?i.jsxs("div",{className:"w-full max-w-xs px-4",children:[i.jsxs("p",{className:"font-semibold text-base text-gray-900 mb-3",children:["Executing: ",u||"Running"]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[i.jsx("span",{children:"Progress"}),i.jsxs("span",{children:[ee,"%"]})]}),i.jsx("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,ee))}%`}})}),i.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500 mb-1",children:[i.jsx("span",{children:"Overall"}),i.jsxs("span",{children:[s,"%"]})]}),i.jsx("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,s))}%`}})})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),i.jsx("p",{className:"font-medium text-lg text-blue-600",children:"Generating..."})]})}):i.jsxs("div",{className:O,style:{minHeight:"100px"},children:[i.jsx(yb,{className:"w-8 h-8 text-gray-300"}),i.jsx("span",{className:"text-xs mt-2 opacity-40",children:"Waiting to start..."})]})})]})}function O3(r){const l=r===void 0||Number.isNaN(r)?0:r;return l<10?`${l.toFixed(1)}s`:`${Math.round(l)}s`}function E3({listRef:r,unifiedList:l,visibleCount:o,hasLoadedOnce:s,effectiveExecutingId:u,progress:d,overallProgress:p,executingNodeLabel:h,onDeleteItem:m,onStop:g,onImageClick:x,viewerImages:v,promptOutputs:N,onOpenMenu:C,downloaded:S,firstDoneItemId:w,onScroll:M}){return i.jsxs("div",{ref:r,className:"flex-1 overflow-y-auto p-4 space-y-4 overscroll-contain scroll-container","data-queue-list":"true",onScroll:M,children:[l.length===0&&!s&&i.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-180px)] text-gray-400",children:i.jsxs("div",{className:"text-center",children:[i.jsx(lf,{size:"lg",color:"gray",className:"mx-auto mb-4"}),i.jsx("p",{className:"text-lg",children:"Loading..."})]})}),l.length===0&&s&&i.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-180px)] text-gray-500",children:i.jsxs("div",{className:"text-center p-8",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx(Y1,{className:"w-10 h-10 text-gray-300"})}),i.jsx("p",{className:"text-lg font-medium",children:"Queue is empty"}),i.jsx("p",{className:"text-sm mt-2",children:"Run a workflow to see items here"})]})}),l.slice(0,o).map(j=>i.jsx(M3,{item:j,isActuallyRunning:j.id===u,progress:d,overallProgress:p,executingNodeLabel:h,onDelete:()=>m(j),onStop:g,onImageClick:x,viewerImages:v,runningImages:N[j.id]??[],onOpenMenu:C,downloaded:S,isTopDoneItem:j.id===w},j.id)),i.jsx("div",{className:"h-20"})]})}function T3(r,l,o){b.useEffect(()=>{if(!r)return;const s=()=>l(),u=d=>{const p=d.target,h=document.getElementById(o);h&&p&&h.contains(p)||l()};return document.addEventListener("scroll",s,!0),document.addEventListener("mousedown",u),()=>{document.removeEventListener("scroll",s,!0),document.removeEventListener("mousedown",u)}},[r,l,o])}function L3({visible:r,onImageClick:l}){const o=lt(ne=>ne.running),s=lt(ne=>ne.pending),u=lt(ne=>ne.fetchQueue),d=lt(ne=>ne.deleteItem),p=lt(ne=>ne.interrupt),h=te(ne=>ne.loadWorkflow),m=Ln(ne=>ne.setCurrentPanel),g=te(ne=>ne.workflow),x=te(ne=>ne.nodeTypes),v=te(ne=>ne.executingNodeId),N=te(ne=>ne.workflowDurationStats),C=te(ne=>ne.promptOutputs),S=Tn(ne=>ne.history),w=Tn(ne=>ne.fetchHistory),M=Tn(ne=>ne.deleteItem),{isExecuting:j,progress:E,executingPromptId:D}=te(x3(ne=>({isExecuting:ne.isExecuting,progress:ne.progress,executingPromptId:ne.executingPromptId}))),_=D||(o.length===1?o[0].prompt_id:null),L=b.useMemo(()=>{if(!g||!v)return null;const ne=g.nodes.find(Ne=>String(Ne.id)===v);return ne?x?.[ne.type]?.display_name||ne.type:`Node ${v}`},[g,v,x]),R=Go({workflow:g,runKey:D||_,isRunning:j||!!_,workflowDurationStats:N}),[A,B]=b.useState(null),[G,U]=b.useState({}),[W,J]=b.useState(null),[xe,ae]=b.useState(!1),[le,z]=b.useState(0),Y=b.useRef(null),de=b.useRef(0),be=b.useRef(!1),ye=b.useRef(!1);b.useEffect(()=>{r&&(be.current||ye.current&&Y.current&&(Y.current.scrollTop=0),Promise.all([u(),w()]).then(()=>{ae(!0)})),be.current=r,ye.current||(ye.current=!0)},[r,u,w]),b.useEffect(()=>{!j&&r&&w()},[j,r,w]),T3(!!A?.open,()=>B(null),"queue-image-menu");const T=async ne=>{if(!ne)return;const Ve=JSON.stringify(ne,null,2),Ne=await k3(Ve);J(Ne?"Copied to clipboard":"Failed to copy"),setTimeout(()=>J(null),2e3)},I=async ne=>{await Tx(ne,"image.png",Ve=>{U(Ne=>({...Ne,[Ve]:!0}))})},O=b.useMemo(()=>{const ne={};S.forEach(Ne=>{ne[Ne.prompt_id]={id:Ne.prompt_id,status:"done",data:Ne,timestamp:Ne.timestamp}}),o.forEach(Ne=>{ne[Ne.prompt_id]||(ne[Ne.prompt_id]={id:Ne.prompt_id,status:"running",data:Ne})}),s.forEach(Ne=>{ne[Ne.prompt_id]||(ne[Ne.prompt_id]={id:Ne.prompt_id,status:"pending",data:Ne})}),D&&ne[D]&&(ne[D].status="running");const Ve=Object.values(ne);return Ve.sort((Ne,Le)=>{const Ke={pending:0,running:1,done:2};if(Ke[Ne.status]!==Ke[Le.status])return Ke[Ne.status]-Ke[Le.status];if(Ne.status==="pending"){const Ge=Ne.data.number;return Le.data.number-Ge}return Ne.status==="done"?(Le.timestamp||0)-(Ne.timestamp||0):0}),Ve},[s,o,S,D]),F=b.useMemo(()=>{if(O.length===0)return 0;const ne=O.filter(Ke=>Ke.status==="pending").length,Ve=O.filter(Ke=>Ke.status==="running").length,Le=O.filter(Ke=>Ke.status==="done").length>0?1:0;return Math.min(O.length,ne+Ve+Le)},[O]),X=b.useMemo(()=>{const ne=O.filter(Ve=>Ve.status==="done").map(Ve=>Ve.data);return bf(ne,{onlyOutput:!0,alt:"Generation"})},[O]),pe=b.useMemo(()=>O.find(Ve=>Ve.status==="done")?.id??null,[O]);b.useEffect(()=>{r&&(de.current=O.length,queueMicrotask(()=>{z(ne=>Math.max(ne,F))}))},[r,O.length,F]),b.useEffect(()=>{if(!r)return;const ne=Y.current;ne&&(le>=O.length||ne.scrollHeight<=ne.clientHeight+20&&queueMicrotask(()=>{z(Ve=>Math.min(O.length,Ve+10))}))},[r,le,O.length]);const ee=ne=>{ne.status==="pending"&&d(ne.id),ne.status==="done"&&M(ne.id)},oe=ne=>{const{top:Ve,right:Ne,imageSrc:Le,workflow:Ke,promptId:Ge,hasVideoOutputs:we,hasImageOutputs:Ye}=ne;B({open:!0,top:Ve,right:Ne,imageSrc:Le,workflow:Ke,promptId:Ge,hasVideoOutputs:we,hasImageOutputs:Ye})},ve=()=>{const ne=Y.current;if(!ne)return;ne.scrollHeight-ne.scrollTop-ne.clientHeight<400&&z(Ne=>Math.min(de.current,Ne+10))},Oe=(ne,Ve)=>{h(ne,`history-${Ve}.json`,{source:{type:"history",promptId:Ve}}),m("workflow")},Qe=async ne=>{await C3(ne,Ve=>{U(Ne=>({...Ne,[Ve]:!0}))})};return i.jsx("div",{id:"queue-panel-wrapper",className:"absolute inset-x-0 top-[69px] bottom-0",style:{display:r?"block":"none"},children:i.jsxs("div",{className:"flex flex-col bg-gray-100 min-h-full",children:[i.jsx(E3,{listRef:Y,unifiedList:O,visibleCount:le,hasLoadedOnce:xe,effectiveExecutingId:_,progress:E,overallProgress:R,executingNodeLabel:L,onDeleteItem:ee,onStop:p,onImageClick:l,viewerImages:X,promptOutputs:C,onOpenMenu:oe,downloaded:G,firstDoneItemId:pe,onScroll:ve}),i.jsx(S3,{menuState:A,unifiedList:O,onClose:()=>B(null),onLoadWorkflow:Oe,onCopyWorkflow:T,onDownload:ne=>I(ne),onBatchDownload:Qe,onDeleteHistory:ne=>M(ne),getBatchSources:j3}),i.jsx(N3,{message:W})]})})}let Sd=null,wi=[];function g0(r){return encodeURIComponent(r)}async function _3(){if(wi.length===0)return;const r=[...wi];wi=[];const l=r.map(o=>{const s=new Date(o.timestamp).toISOString(),u=o.data!==void 0?` | ${JSON.stringify(o.data)}`:"";return`${s} ${o.message}${u}`}).join(`
`)+`
`;try{let o="";try{const u=await fetch(`${zt}/api/userdata/${g0("mobile-debug.log")}`);u.ok&&(o=await u.text())}catch{}const s=o+l;await fetch(`${zt}/api/userdata/${g0("mobile-debug.log")}?overwrite=true`,{method:"POST",headers:{"Content-Type":"text/plain"},body:s})}catch(o){console.error("[debugLog] Failed to write to server:",o)}}function A3(){Sd||(Sd=setTimeout(()=>{Sd=null,_3()},500))}function $d(r,l){const o={timestamp:Date.now(),message:r,data:l};wi.push(o),l!==void 0?console.log(`[DEBUG] ${r}`,l):console.log(`[DEBUG] ${r}`),A3()}function R3(r,l,o){const s=r.closest("[data-textarea-root]")?.querySelector("[data-textarea-header]"),u=getComputedStyle(document.documentElement),d=parseFloat(u.getPropertyValue("--top-bar-offset"))||0,p=window.visualViewport?.offsetTop??0,h=window.visualViewport?.height??window.innerHeight,m=d+8,g=Lx(r),x=s?.getBoundingClientRect(),v=g===window?{type:"window",scrollY:window.scrollY}:(()=>{const R=g;return{type:"element",tag:R.tagName.toLowerCase(),scrollTop:R.scrollTop,height:R.clientHeight}})();$d("textarea-scroll: start",{reason:o,behavior:l,headerTop:x?.top??null,layoutTopEdge:m,viewportTopEdge:p+d+8,viewportTop:p,viewportHeight:h,topBarOffset:d,container:v,selectionStart:r.selectionStart});const N=z3(r),C=p+d+h*.25,S=p+h-24,w=x?x.top-m:null,M=N-C,j=N>S?N-S:0;let E=0;const D=w!==null&&w>2,_=D?N-w:N,L=_<=S;D&&L?E=w??0:!D&&N<=S?E=0:(E=M,j>E&&(E=j)),E<0&&(E=0),x&&w!==null&&x.top>m+2&&E>w&&(E=w),$d("textarea-scroll: align",{caretTop:N,targetTop:C,visibilityBottom:S,deltaHeader:w,deltaCaret:M,deltaCaretMin:j,caretAfterHeader:_,caretVisibleAfterHeader:L,canAlignHeader:D,delta:E}),Math.abs(E)>8&&_x(g,E,l)}function D3(r){const l=r.closest("[data-textarea-root]")?.querySelector("[data-textarea-header]");if(!l)return;const o=getComputedStyle(document.documentElement),u=(parseFloat(o.getPropertyValue("--top-bar-offset"))||0)+8,d=l.getBoundingClientRect(),p=d.top-u;if(Math.abs(p)<2)return;const h=Lx(r);$d("textarea-scroll: align-header-request",{headerTop:d.top,layoutTopEdge:u,delta:p}),_x(h,p,"auto")}function z3(r){const l=r.getBoundingClientRect(),o=B3(r);return l.top+o-r.scrollTop}function B3(r){const l=r.selectionStart??0,o=r.value,s=document.createElement("div"),u=getComputedStyle(r),d=s.style;d.position="absolute",d.top="0",d.left="-9999px",d.visibility="hidden",d.whiteSpace="pre-wrap",d.wordWrap="break-word",d.overflowWrap="break-word",d.boxSizing=u.boxSizing,d.width=`${r.clientWidth}px`,d.padding=u.padding,d.border=u.border,d.fontFamily=u.fontFamily,d.fontSize=u.fontSize,d.fontWeight=u.fontWeight,d.fontStyle=u.fontStyle,d.letterSpacing=u.letterSpacing,d.lineHeight=u.lineHeight,d.textTransform=u.textTransform,d.textIndent=u.textIndent,d.tabSize=u.tabSize;const p=document.createTextNode(o.slice(0,l)),h=document.createElement("span");h.textContent=o.slice(l,l+1)||" ",h.style.display="inline-block",h.style.width="1px",s.appendChild(p),s.appendChild(h),document.body.appendChild(s);const m=s.getBoundingClientRect(),x=h.getBoundingClientRect().top-m.top;return document.body.removeChild(s),x}function Nd(r){r?document.body.dataset.textareaFocus="true":delete document.body.dataset.textareaFocus}function Lx(r){let l=r?.parentElement??null;for(;l;){const s=getComputedStyle(l).overflowY;if((s==="auto"||s==="scroll")&&l.scrollHeight>l.clientHeight)return l;l=l.parentElement}return window}function _x(r,l,o="smooth"){if(Math.abs(l)<1)return;if(r===window){window.scrollBy({top:l,behavior:o});return}const s=r;s.scrollTo({top:s.scrollTop+l,behavior:o})}function Ax(){const[r,l]=b.useState(!1),o=b.useRef(null),s=b.useRef(null),u=b.useRef(null);return b.useEffect(()=>{const d=h=>{const m=h.target;if(!(m instanceof HTMLElement))return;const g=m.tagName.toLowerCase();if((m.isContentEditable||g==="input"||g==="textarea"||g==="select")&&l(!0),m instanceof HTMLTextAreaElement){Nd(!0);const x=()=>R3(m,"smooth","focus");o.current&&clearTimeout(o.current),s.current&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",s.current),s.current=null),u.current&&(document.removeEventListener("selectionchange",u.current),u.current=null);const v=()=>{document.activeElement===m&&(x(),u.current&&(document.removeEventListener("selectionchange",u.current),u.current=null))};if(u.current=v,document.addEventListener("selectionchange",v),setTimeout(()=>{u.current&&(document.removeEventListener("selectionchange",u.current),u.current=null)},1200),window.visualViewport){let N=!1;const C=()=>{N=!0,x(),s.current&&(window.visualViewport?.removeEventListener("resize",s.current),s.current=null)};s.current=C,window.visualViewport.addEventListener("resize",C),o.current=setTimeout(()=>{N||x(),setTimeout(x,300),s.current&&(window.visualViewport?.removeEventListener("resize",s.current),s.current=null)},600)}else requestAnimationFrame(x)}},p=()=>{const h=document.activeElement;if(!(h instanceof HTMLElement)){l(!1),Nd(!1),u.current&&(document.removeEventListener("selectionchange",u.current),u.current=null);return}const m=h.tagName.toLowerCase(),g=h.isContentEditable||m==="input"||m==="textarea"||m==="select";l(g),Nd(h instanceof HTMLTextAreaElement)};return document.addEventListener("focusin",d),document.addEventListener("focusout",p),()=>{document.removeEventListener("focusin",d),document.removeEventListener("focusout",p),o.current&&clearTimeout(o.current),s.current&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",s.current),s.current=null),u.current&&(document.removeEventListener("selectionchange",u.current),u.current=null)}},[]),b.useEffect(()=>{const d=p=>{const m=p.detail?.textarea;m&&D3(m)};return document.addEventListener("textarea-align-header",d),()=>{document.removeEventListener("textarea-align-header",d)}},[]),{isInputFocused:r}}function I3({index:r,total:l,displayName:o}){return i.jsx("div",{id:"media-viewer-header",className:"absolute top-0 inset-x-0 px-3 pt-3 pb-4 bg-gradient-to-b from-black/50 to-transparent",children:i.jsxs("div",{className:"grid grid-cols-3 items-center",children:[i.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[r+1," / ",l]}),i.jsx("div",{className:"justify-self-center text-white/90 text-sm font-medium max-w-[70vw] truncate",children:o}),i.jsx("div",{})]})})}function H3({index:r,total:l,onPrev:o,onNext:s}){return i.jsxs("div",{id:"media-viewer-navigation",className:"hidden sm:block",children:[i.jsx("button",{onClick:o,disabled:r===0,className:"absolute left-3 top-1/2 -translate-y-1/2 p-2 text-white/50 hover:text-white disabled:opacity-0 transition-all pointer-events-auto",children:i.jsx(D0,{className:"w-8 h-8"})}),i.jsx("button",{onClick:s,disabled:r===l-1,className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 text-white/50 hover:text-white disabled:opacity-0 transition-all pointer-events-auto",children:i.jsx(Oi,{className:"w-8 h-8"})})]})}function V3({isVideo:r,onDelete:l,onLoadWorkflow:o,onLoadInWorkflow:s,showMetadataToggle:u,canToggleMetadata:d,onDeleteClick:p,onLoadWorkflowClick:h,onLoadInWorkflowClick:m,onToggleMetadata:g}){return i.jsxs("div",{className:"absolute inset-x-0 px-3 pb-2 pt-2 flex items-center justify-between",style:{bottom:"calc(var(--bottom-bar-offset, 0px) + 4px)"},children:[i.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-red-500 flex items-center justify-center hover:bg-black/60 transition-colors ${l?"":"opacity-40 pointer-events-none"}`,onClick:p,"aria-label":"Delete output",children:i.jsx(Gr,{className:"w-5 h-5"})}),!r&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${o?"":"opacity-40 pointer-events-none"}`,onClick:h,"aria-label":"Load workflow",children:i.jsx(_a,{className:"w-5 h-5"})}),i.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${s?"":"opacity-40 pointer-events-none"}`,onClick:m,"aria-label":"Use in workflow",children:i.jsx(_0,{className:"w-5 h-5"})}),u&&i.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${d?"":"opacity-40 pointer-events-none"}`,onClick:g,"aria-label":"Toggle metadata",children:i.jsx(L0,{className:"w-5 h-5"})})]})]})}function U3({isVideo:r,showMetadataToggle:l,showMetadataOverlay:o,metadataIsLoading:s,metadata:u,durationLabel:d}){return l?i.jsx("div",{className:`absolute right-3 flex flex-col items-end gap-1 pointer-events-none transition-opacity duration-300 ${o?"opacity-100":"opacity-0"}`,style:{bottom:r?"calc(var(--bottom-bar-offset, 0px) + 120px)":"calc(var(--bottom-bar-offset, 0px) + 64px)"},children:s?i.jsx("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:"Loading metadata..."}):u?i.jsxs(i.Fragment,{children:[u.model&&i.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["model: ",u.model]}),u.sampler&&i.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["sampler: ",u.sampler]}),u.steps&&i.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["steps: ",u.steps]}),u.cfg&&i.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["cfg: ",u.cfg]}),d&&i.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["time: ",d]})]}):i.jsx("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:"No metadata found"})}):null}const G3={x:0,y:0};function Rx({open:r,items:l,index:o,onIndexChange:s,onClose:u,onDelete:d,onLoadWorkflow:p,onLoadInWorkflow:h,showMetadataToggle:m=!1,showLoadingPlaceholder:g=!1,loadingProgress:x=0,loadingLabel:v,initialScale:N=1,initialTranslate:C=G3,onTransformChange:S,zoomResetKey:w,overlayZIndex:M=2100}){const j=b.useRef(null),E=b.useRef(null),D=b.useRef(null),_=b.useRef(null),[L,R]=b.useState(1),[A,B]=b.useState({x:0,y:0}),G=b.useRef(1),U=b.useRef({x:0,y:0}),W=b.useRef(null),J=b.useRef(null),xe=b.useRef(null),ae=b.useRef(null),[le,z]=b.useState(null),[Y,de]=b.useState(null),[be,ye]=b.useState(!1),[T,I]=b.useState(!1),O=b.useRef(null),F=b.useRef("fit"),[X,pe]=b.useState({}),[ee,oe]=b.useState({}),[ve,Oe]=b.useState(!1),{isInputFocused:Qe}=Ax(),ne=o>=0?l[o]??l[0]??null:null,Ve=ne?.filename??ne?.file?.name??ne?.alt??ne?.src??"",Ne=!!(ne?.mediaType==="video"||ne?.file?.type==="video"||Ve&&Ca(Ve)),Le=ne?.file?.id??null,Ke=Le?X[Le]:void 0,Ge=ne?.metadata??(Ke===void 0?void 0:Ke),we=q3(ne?.durationSeconds),Ye=ne?.filename||ne?.alt||"Output",he=T&&!be,Re=m,Ze=M+10,gt=Le?!!ee[Le]:!1,Be=b.useCallback(()=>{ye(!1),O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{ye(!0)},3e3)},[]),Se=b.useCallback(()=>{Be(),I(ke=>!ke)},[Be]),_e=b.useCallback(()=>{!ne||!d||(Be(),d(ne))},[ne,d,Be]),Xe=b.useCallback(()=>{!ne||!p||(Be(),p(ne))},[ne,p,Be]),We=b.useCallback(()=>{!ne||!h||(Be(),h(ne))},[ne,h,Be]);b.useEffect(()=>(r?queueMicrotask(Be):O.current&&clearTimeout(O.current),()=>{O.current&&clearTimeout(O.current)}),[r,Be]),b.useLayoutEffect(()=>{r&&(R(N),B(C),G.current=N,U.current=C,W.current=null,J.current=null,xe.current=null,ae.current=null,F.current="fit")},[r,o,N,C]),b.useEffect(()=>{_.current=null,z(null),Oe(!1)},[ne?.src]),b.useEffect(()=>{if(r)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[r]),b.useEffect(()=>{r&&S&&S(L,A)},[r,L,A,S]),b.useEffect(()=>{if(!r)return;const ke=De=>{De.key==="Escape"&&u()};return document.addEventListener("keydown",ke),()=>document.removeEventListener("keydown",ke)},[r,u]),b.useEffect(()=>{if(!r||!m||!ne?.file||ne.metadata||!Le||Ge!==void 0||gt)return;const ke=Le.startsWith("input/")?"input":"output",De=Le.startsWith(`${ke}/`)?Le.slice(ke.length+1):Le;oe(V=>({...V,[Le]:!0})),w1(De,ke).then(V=>{const ce=V?.prompt?vf(V.prompt):null,ue=ce&&Object.keys(ce).length>0?ce:null;pe(Ce=>({...Ce,[Le]:ue}))}).catch(()=>{pe(V=>({...V,[Le]:null}))}).finally(()=>{oe(V=>({...V,[Le]:!1}))})},[r,m,ne,Le,Ge,gt]);const Pe=b.useMemo(()=>!le||!Y?null:Y.height/le.height,[le,Y]),P=b.useMemo(()=>Pe===null?1:Math.min(1,Pe),[Pe]),ft=b.useMemo(()=>Pe===null?1:Math.max(1,Pe),[Pe]),ot=(ke=L,De=le)=>{if(!De||!Y)return{x:0,y:0};const V=De.width*ke,ce=De.height*ke;return{x:V<Y.width?(Y.width-V)/2:0,y:ce<Y.height?(Y.height-ce)/2:0}},tt=b.useCallback((ke,De=L)=>{if(!le||!Y)return ke;const V=Y.width,ce=Y.height,ue=le.width*De,Ce=le.height*De,ze=ue<=V?0:Math.max(V-ue,Math.min(0,ke.x)),Fe=Ce<=ce?0:Math.max(ce-Ce,Math.min(0,ke.y));return{x:ze,y:Fe}},[le,Y,L]),pt=b.useRef(tt),Ht=b.useCallback(ke=>{let De=P;if(ke==="cover"?De=ft:De=P,F.current=ke,G.current=De,R(De),!le||!Y)U.current={x:0,y:0},B({x:0,y:0});else{const V=le.width*De,ce=le.height*De,ue={x:(Y.width-V)/2,y:(Y.height-ce)/2},Ce=tt(ue,De);U.current=Ce,B(Ce)}},[le,tt,Y,ft,P]),Vt=b.useRef(Ht);b.useEffect(()=>{pt.current=tt},[tt]),b.useEffect(()=>{Vt.current=Ht},[Ht]);const $n=ke=>{const De=ke.currentTarget;_.current={width:De.naturalWidth,height:De.naturalHeight};const V=j.current;if(!V||De.naturalWidth===0)return;const ce=V.clientWidth,ue=V.clientHeight,Ce=ce/De.naturalWidth;z({width:ce,height:De.naturalHeight*Ce}),de({width:ce,height:ue})};b.useEffect(()=>{if(Ne||!r)return;const ke=E.current,De=j.current;if(!ke||!De)return;const V=()=>{const ue=_.current,Ce=De.clientWidth,ze=De.clientHeight;if(de({width:Ce,height:ze}),!ue||ue.width===0)return;const Fe=Ce/ue.width,Te=ue.height*Fe;z({width:Ce,height:Te});const nt=pt.current(U.current);U.current=nt,B(nt)};V();const ce=new ResizeObserver(V);return ce.observe(De),()=>ce.disconnect()},[r,ne?.src,Ne]),b.useEffect(()=>{Ne||!r||!le||!Y||Vt.current(F.current)},[r,ne?.src,le,Y,Ne]),b.useEffect(()=>{r&&w!==void 0&&Vt.current(F.current)},[r,w]);const fr=()=>{Be(),o>0&&s(o-1)},or=()=>{Be(),o<l.length-1&&s(o+1)},An=()=>{const ke=E.current;if(!ke)return;const De=G.current,V=U.current,ce=ot(De);ke.style.transform=`translate3d(${ce.x+V.x}px, ${ce.y+V.y}px, 0) scale(${De})`},ln=ke=>{if(Ne){const V=D.current;if(V&&ke.target===V){const ce=V.getBoundingClientRect();if(ke.clientY>ce.bottom-60)return}}ke.currentTarget.setPointerCapture(ke.pointerId);const De=jd(j.current);if(De.set(ke.pointerId,{x:ke.clientX,y:ke.clientY}),De.size===1){if(J.current={x:ke.clientX,y:ke.clientY,time:Date.now()},!Ne){W.current={x:ke.clientX-U.current.x,y:ke.clientY-U.current.y};const V=E.current;V&&(V.style.transition="none")}}else if(De.size===2&&!Ne){const[V,ce]=Array.from(De.values()),ue=Math.hypot(ce.x-V.x,ce.y-V.y),Ce=(V.x+ce.x)/2,ze=(V.y+ce.y)/2,Fe=j.current?.getBoundingClientRect(),Te=G.current,nt=U.current,st=ot(Te),xt=Fe?{x:(Ce-Fe.left-st.x-nt.x)/Te,y:(ze-Fe.top-st.y-nt.y)/Te}:void 0;xe.current={distance:ue,scale:Te,centerX:Ce,centerY:ze,imagePoint:xt}}},an=ke=>{const De=jd(j.current);if(De.has(ke.pointerId)){if(De.set(ke.pointerId,{x:ke.clientX,y:ke.clientY}),De.size===2&&xe.current&&!Ne){const V=xe.current,[ce,ue]=Array.from(De.values()),Ce=Math.hypot(ue.x-ce.x,ue.y-ce.y),Fe=Math.max(P,Math.min(5,V.scale*(Ce/V.distance)));G.current=Fe;const Te=j.current?.getBoundingClientRect(),nt=(ce.x+ue.x)/2,st=(ce.y+ue.y)/2;if(Te&&V.imagePoint){const xt=ot(Fe),yt={x:nt-Te.left-xt.x-V.imagePoint.x*Fe,y:st-Te.top-xt.y-V.imagePoint.y*Fe};U.current=tt(yt,Fe)}else U.current=tt(U.current,Fe);An();return}if(De.size===1&&!Ne){const V=G.current;(V>1||le&&j.current&&le.height*V>j.current.clientHeight+1)&&W.current&&(U.current=tt({x:ke.clientX-W.current.x,y:ke.clientY-W.current.y},V),An())}}},on=ke=>{const De=jd(j.current);if(De.delete(ke.pointerId),De.size<2){if(De.size===1&&xe.current){const[V]=Array.from(De.values());W.current={x:V.x-U.current.x,y:V.y-U.current.y}}xe.current=null}if(De.size===0){const V=E.current;V&&(V.style.transition="transform 0.05s linear");const ce=Date.now(),ue=ae.current,Ce=ue?ke.clientX-ue.x:0,ze=ue?ke.clientY-ue.y:0,Fe=!!(ue&&ce-ue.time<300&&Math.hypot(Ce,ze)<24);if(!Ne&&Fe){ae.current=null;const Te=F.current;Ht(Te==="fit"?"cover":"fit"),Be()}else{ae.current={time:ce,x:ke.clientX,y:ke.clientY};const Te=J.current;if(!Qe&&Te){const nt=ke.clientX-Te.x,st=ke.clientY-Te.y,xt=Date.now()-Te.time,yt=Math.abs(nt),vt=Math.abs(st),bt=G.current,Rt=Math.abs(bt-P)<.05||Math.abs(bt-ft)<.05,qt=xt<250&&yt<10&&vt<10;xt<=350&&yt>60&&yt>vt&&Rt?nt<0?o<l.length-1&&s(o+1):nt>0&&o>0&&s(o-1):qt&&Be()}R(G.current),B(U.current)}W.current=null}},Rn=ke=>{if(Ne||!ke.ctrlKey)return;ke.preventDefault();const De=-ke.deltaY*.005,V=Math.max(P,Math.min(5,G.current+De));G.current=V,R(V);const ce=tt(U.current,V);U.current=ce,B(ce)};return r?!ne&&!g?lr.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[2000] bg-black flex flex-col items-center justify-center text-white",role:"dialog","aria-modal":"true",children:[i.jsx("button",{className:"absolute top-4 right-4 z-[2010] w-10 h-10 rounded-full bg-black/60 text-white text-xl flex items-center justify-center",onClick:u,"aria-label":"Close viewer",children:""}),i.jsx("p",{className:"text-gray-400 mb-2",children:"No images to display"}),i.jsxs("p",{className:"text-gray-500 text-sm",children:["images: ",l.length,", index: ",o]})]}),document.body):lr.createPortal(i.jsxs("div",{id:"media-viewer-overlay",className:"fixed inset-0 bg-black",style:{zIndex:M},onWheel:Rn,children:[i.jsx("div",{ref:j,className:`absolute inset-x-0 top-0 overflow-hidden ${Ne?"":"touch-none"}`,style:{overscrollBehavior:"contain",height:"calc(100vh - var(--bottom-bar-offset, 0px))",zIndex:1},onPointerDown:ln,onPointerMove:an,onPointerUp:on,onPointerCancel:on,children:g?i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-gray-600 border-t-white rounded-full animate-spin"}),i.jsx("div",{className:"mt-4 w-48 h-2 rounded-full bg-gray-700 overflow-hidden",children:i.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,x))}%`}})}),i.jsx("div",{className:"mt-2 text-sm text-gray-300",children:v??`${Math.min(100,Math.max(0,x))}%`})]}):ne&&i.jsx(i.Fragment,{children:Ne?i.jsxs(i.Fragment,{children:[i.jsx("video",{ref:D,src:ne.src,controls:!0,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-contain select-none",onDragStart:ke=>ke.preventDefault(),onError:()=>Oe(!0)}),ve&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-sm bg-black/60",children:"Unable to play this video."})]}):i.jsx("img",{ref:E,src:ne.src,alt:ne.alt||"Generation",className:"w-full h-auto block select-none relative",draggable:!1,onLoad:$n,style:{transform:`translate3d(${ot(L).x+A.x}px, ${ot(L).y+A.y}px, 0) scale(${L})`,transformOrigin:"top left",willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"}})})}),i.jsx("button",{onClick:u,className:`absolute top-3 right-3 w-9 h-9 rounded-full flex items-center justify-center transition-colors ${be?"bg-transparent text-white":"bg-black/60 text-white"}`,style:{zIndex:Ze},"aria-label":"Close viewer",children:i.jsx(Gl,{className:"w-6 h-6"})}),i.jsx("div",{className:`absolute inset-0 pointer-events-none transition-opacity duration-300 ${be?"opacity-0":"opacity-100"}`,style:{zIndex:Ze},children:ne&&i.jsxs(i.Fragment,{children:[i.jsx(I3,{index:o,total:l.length,displayName:Ye}),i.jsx(H3,{index:o,total:l.length,onPrev:fr,onNext:or}),i.jsx(V3,{isVideo:Ne,onDelete:d,onLoadWorkflow:p,onLoadInWorkflow:h,showMetadataToggle:m,canToggleMetadata:Re,onDeleteClick:_e,onLoadWorkflowClick:Xe,onLoadInWorkflowClick:We,onToggleMetadata:Se}),i.jsx(U3,{isVideo:Ne,showMetadataToggle:m,showMetadataOverlay:he,metadataIsLoading:gt,metadata:Ge,durationLabel:we})]})})]}),document.body):null}function jd(r){const l=r;return l?(l.__activePointers||(l.__activePointers=new Map),l.__activePointers):new Map}function q3(r){const l=r===void 0||Number.isNaN(r)?0:r;return l===0?"":l<10?`${l.toFixed(1)}s`:`${Math.round(l)}s`}function Dx({file:r,onCancel:l,onConfirm:o}){return r?i.jsx("div",{id:"outputs-load-workflow-confirm-overlay",className:"fixed inset-0 z-[2200] bg-black/50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true",children:i.jsxs("div",{id:"outputs-load-workflow-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:s=>s.stopPropagation(),children:[i.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Unsaved changes"}),i.jsx("div",{className:"text-gray-600 text-sm mt-1",children:"Are you sure you want to load this workflow? You have unsaved changes."}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:l,children:"Cancel"}),i.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:()=>o(r),children:"Continue"})]})]})}):null}function Ii(r){return r.id.startsWith("input/")?"input":"output"}function Ho(r,l){const s=`${l??Ii(r)}/`;return r.id.startsWith(s)?r.id.slice(s.length):r.id}function W3(r){return`output-${r.replace(/[\\/]/g,"_")}.json`}async function zx(r){const{file:l,source:o,loadWorkflow:s,onLoaded:u,onError:d}=r;try{const p=o??Ii(l),h=Ho(l,p),m=await b1(h,p);s(m,W3(h),{source:{type:"other"}}),u?.()}catch(p){throw d?.(p),p}}function F3(r){const{workflow:l,nodeTypes:o,nodeId:s}=r;if(!l||!o)return null;const u=l.nodes.find(p=>p.id===s);if(!u)return null;const d=["image","filename","file"];for(const p of d){const h=bl(l,o,u,p);if(h!==null)return{node:u,index:h,name:p}}return null}function x0(r,l){const o=r.title,s=typeof o=="string"&&o.trim()?o.trim():null,u=l?.[r.type];return s||u?.display_name||r.type}function $3(r){const l=r.replace(/^\/+/,""),o=l.split("/").filter(Boolean);return o.length<=1?{filename:l,subfolder:""}:{filename:o.pop()??l,subfolder:o.join("/")}}async function Y3(r,l){if(l==="input")return Ho(r,l);const o=Ho(r,l),{filename:s,subfolder:u}=$3(o),d=r.fullUrl||qn(s,u,l),p=await fetch(d);if(!p.ok)throw new Error("Failed to fetch image data.");const h=await p.blob(),m=s||r.name||"image.png",g=new File([h],m,{type:h.type||"image/png"}),x=await k0(g,{type:"input",overwrite:!0}),v=x.subfolder?`${x.subfolder}/${x.name}`:x.name;if(!(await fetch(qn(x.name,x.subfolder??"","input"))).ok)throw new Error("Uploaded image was not found in inputs.");return v}function Bx({open:r,file:l,source:o,onClose:s,onLoaded:u}){const d=te(E=>E.workflow),p=te(E=>E.nodeTypes),h=te(E=>E.setNodeTypes),m=te(E=>E.updateNodeWidget),g=Zt(E=>E.clearNodeError),x=te(E=>E.scrollToNode),v=Ln(E=>E.setCurrentPanel),[N,C]=b.useState(null),[S,w]=b.useState(null),M=b.useMemo(()=>d?d.nodes.filter(E=>/loadimage/i.test(E.type)):[],[d]);b.useEffect(()=>{r||(C(null),w(null))},[r]);const j=async E=>{if(!(!l||!d)){w(E),C(null);try{const D=F3({workflow:d,nodeTypes:p,nodeId:E});if(!D)throw new Error("Selected node does not accept image inputs.");const _=await Y3(l,o);if(o!=="input")try{const L=await Pd();h(L)}catch(L){console.warn("Failed to refresh node types after upload:",L)}m(D.node.id,D.index,_,D.name),g(D.node.id),v("workflow"),u?.(),setTimeout(()=>{x(D.node.id,x0(D.node,p))},150)}catch(D){console.error("Failed to load image into node:",D),C(D instanceof Error?D.message:"Failed to load image.")}finally{w(null)}}};return!r||!l?null:i.jsx("div",{id:"outputs-load-node-overlay",className:"fixed inset-0 z-[2150] bg-black/50 flex items-center justify-center p-4",onClick:s,role:"dialog","aria-modal":"true",children:i.jsxs("div",{id:"outputs-load-node-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:E=>E.stopPropagation(),children:[i.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:"Load image into node"}),i.jsx("div",{className:"px-4 pt-3 text-xs text-gray-500",children:l.name}),i.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[M.length===0&&i.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"No Load Image nodes found in the current workflow."}),M.map(E=>{const D=x0(E,p),_=S===E.id;return i.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed",onClick:()=>j(E.id),disabled:S!==null,children:[i.jsxs("span",{className:"text-gray-500 dark:text-gray-300",children:["#",E.id]}),i.jsx("span",{className:"flex-1 text-gray-900 dark:text-gray-100 truncate",children:D}),_&&i.jsx("span",{className:"text-xs text-gray-400",children:"Loading"})]},`load-node-${E.id}`)})]}),N&&i.jsx("div",{className:"px-4 py-2 text-xs text-red-600 border-t border-gray-100",children:N}),i.jsx("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end",children:i.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg disabled:opacity-60",onClick:s,disabled:S!==null,children:"Close"})})]})})}function Q3({file:r,onCancel:l,onConfirm:o}){return i.jsx("div",{id:"viewer-delete-confirm-overlay",className:"fixed inset-0 z-[2200] bg-black/50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true",children:i.jsxs("div",{id:"viewer-delete-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:s=>s.stopPropagation(),children:[i.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Delete file?"}),i.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:['This will permanently delete "',r.name,'" from the server. This cannot be undone.']}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:l,children:"Cancel"}),i.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:o,children:"Delete"})]})]})})}function X3({onClose:r}){const l=rr(ee=>ee.viewerOpen),o=rr(ee=>ee.viewerImages),s=rr(ee=>ee.viewerIndex),u=rr(ee=>ee.viewerScale),d=rr(ee=>ee.viewerTranslate),p=te(ee=>ee.followQueue),h=rr(ee=>ee.setViewerState),m=te(ee=>ee.workflow),g=te(ee=>ee.originalWorkflow),x=te(ee=>ee.workflowDurationStats),v=te(ee=>ee.isExecuting),N=te(ee=>ee.executingPromptId),C=Ln(ee=>ee.setCurrentPanel),S=te(ee=>ee.loadWorkflow),w=lt(ee=>ee.running),M=Tn(ee=>ee.history),[j,E]=b.useState(null),[D,_]=b.useState(null),[L,R]=b.useState(null),[A,B]=b.useState(!1),G=b.useRef(null),U=b.useMemo(()=>!!(m&&g&&JSON.stringify(m)!==JSON.stringify(g)),[m,g]),W=b.useMemo(()=>!l||!p?null:M[0]?.prompt_id??null,[l,p,M]),J=N||(w.length===1?w[0].prompt_id:null),xe=Go({workflow:m,runKey:J,isRunning:v||w.length>0,workflowDurationStats:x}),ae=v||w.length>0,le=Math.min(100,Math.max(0,xe??0)),Y=!(s>=0?o[s]??o[0]??null:null)&&(p||ae)||s<0&&ae;b.useEffect(()=>{if(!l||!p){G.current=null;return}!G.current&&M[0]?.prompt_id&&(G.current=M[0]?.prompt_id??null)},[l,p,M]),b.useEffect(()=>{if(!l||!p||M.length===0)return;const ee=M[0];if(G.current===ee.prompt_id||ee.outputs.images.filter(Oe=>Oe.type==="output").length===0)return;const ve=bf(M,{onlyOutput:!0,alt:"Generation"});ve.length!==0&&(G.current=ee.prompt_id,h({viewerImages:ve,viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}}))},[l,p,M,h]);const de=ee=>{h({viewerIndex:ee})},be=(ee,oe)=>{h({viewerScale:ee,viewerTranslate:oe})},ye=ee=>{ee.file&&E(ee.file)},T=async()=>{if(!j)return;const ee=j;try{const oe=Ho(ee);await Ed(oe,Ii(ee));const ve=o.filter(ne=>ne.file?.id!==ee.id),Oe=o.findIndex(ne=>ne.file?.id===ee.id),Qe=ve.length===0?0:Oe<0?s:Oe<s?s-1:Oe===s?Math.min(s,ve.length-1):s;h({viewerImages:ve,viewerIndex:Qe}),ve.length===0&&r()}catch(oe){console.error("Failed to delete file:",oe),window.alert("Failed to delete file.")}finally{E(null)}},I=ee=>{if(ee.file){if(U){_(ee.file);return}O(ee.file)}},O=async ee=>{try{await zx({file:ee,loadWorkflow:S,onLoaded:()=>{r(),queueMicrotask(()=>C("workflow"))}})}catch(oe){console.error("Failed to load workflow from file:",oe),window.alert("Failed to load workflow from file.")}finally{_(null)}},F=ee=>{!ee.file||ee.file.type!=="image"||(R(ee.file),B(!0))},X=()=>{B(!1),R(null)},pe=()=>{X(),r(),queueMicrotask(()=>C("workflow"))};return l?i.jsxs(i.Fragment,{children:[i.jsx(Rx,{open:l,items:o,index:s,onIndexChange:de,onClose:r,onDelete:ye,onLoadWorkflow:I,onLoadInWorkflow:F,showMetadataToggle:!0,showLoadingPlaceholder:Y,loadingProgress:le,loadingLabel:ae?`${le}%`:"Waiting for output",initialScale:u,initialTranslate:d,onTransformChange:be,zoomResetKey:W,overlayZIndex:2100}),i.jsx(Dx,{file:D,onCancel:()=>_(null),onConfirm:O}),i.jsx(Bx,{open:A,file:L,source:L?Ii(L):"output",onClose:X,onLoaded:pe}),j&&i.jsx(Q3,{file:j,onCancel:()=>E(null),onConfirm:T})]}):null}function P3(){const[r,l]=b.useState(!1),o=b.useRef(null),s=b.useRef(null),u=b.useRef({}),d=b.useRef({setExecutionState:te.getState().setExecutionState,setNodeOutput:te.getState().setNodeOutput,clearNodeOutputs:te.getState().clearNodeOutputs,addPromptOutputs:te.getState().addPromptOutputs,clearPromptOutputs:te.getState().clearPromptOutputs,applyControlAfterGenerate:te.getState().applyControlAfterGenerate,updateFromStatus:lt.getState().updateFromStatus,fetchQueue:lt.getState().fetchQueue,addHistoryEntry:Tn.getState().addHistoryEntry,fetchHistory:Tn.getState().fetchHistory});b.useEffect(()=>{d.current={setExecutionState:te.getState().setExecutionState,setNodeOutput:te.getState().setNodeOutput,clearNodeOutputs:te.getState().clearNodeOutputs,addPromptOutputs:te.getState().addPromptOutputs,clearPromptOutputs:te.getState().clearPromptOutputs,applyControlAfterGenerate:te.getState().applyControlAfterGenerate,updateFromStatus:lt.getState().updateFromStatus,fetchQueue:lt.getState().fetchQueue,addHistoryEntry:Tn.getState().addHistoryEntry,fetchHistory:Tn.getState().fetchHistory}},[]);const p=b.useRef(null);return b.useEffect(()=>{const h=x=>{const{setExecutionState:v,setNodeOutput:N,addPromptOutputs:C,clearPromptOutputs:S,updateFromStatus:w,fetchQueue:M,addHistoryEntry:j,fetchHistory:E}=d.current,D=x;switch(D.type){case"status":{const L=D.data.status.exec_info.queue_remaining;w(L),L===0&&v(!1,null,null,0);break}case"progress":{const _=D,{value:L,max:R,node:A,prompt_id:B}=_.data,G=Math.round(L/R*100);v(!0,A||null,B||null,G);break}case"executing":{const _=D,L=_.data.node,R=_.data.prompt_id;if(L===null){if(v(!1,null,null,0),d.current.applyControlAfterGenerate(),R){const A=lt.getState().running.find(G=>G.prompt_id===R),B=u.current[R]||[];A&&j({prompt_id:R,timestamp:Date.now(),outputs:{images:B},prompt:A.prompt}),delete u.current[R],S(R)}M(),E()}else{R&&R!==p.current&&(p.current=R),v(!0,L,R||null,0);const A=lt.getState();R&&!A.running.some(B=>B.prompt_id===R)&&M()}break}case"executed":{const _=D,{node:L,prompt_id:R,output:A}=_.data;A.images&&(u.current[R]||(u.current[R]=[]),u.current[R].push(...A.images),C(R,A.images),N(L,A.images));break}case"execution_error":{v(!1,null,null,0),S(),M(),E();break}}},m=()=>{o.current?.readyState!==WebSocket.OPEN&&(o.current=y1(S0,h,async()=>{l(!0);const{fetchQueue:x,fetchHistory:v,setExecutionState:N}=d.current;await x(),v();const C=lt.getState(),S=te.getState();if(C.running.length>0&&!S.executingPromptId){const w=C.running[0];N(!0,null,w.prompt_id,0)}},()=>{l(!1),s.current=setTimeout(m,2e3)},()=>{l(!1)}))};m();const g=setInterval(()=>{const{fetchQueue:x,fetchHistory:v}=d.current;lt.getState().running.length>0&&(x(),v())},2e3);return()=>{s.current&&clearTimeout(s.current),o.current&&o.current.close(),clearInterval(g)}},[]),{isConnected:r}}function Z3({onSwipeLeft:r,onSwipeRight:l,onSwipeUp:o,onSwipeDown:s,enabled:u=!0,threshold:d=50,preventScroll:p=!0,deferResetOnSwipe:h=!1,deferResetDurationMs:m=350}){const[g,x]=b.useState(0),[v,N]=b.useState(!1),[C,S]=b.useState(u),w=b.useRef(null),M=b.useRef(null);b.useEffect(()=>{S(u)},[u]);const j=b.useCallback(()=>{w.current=null,N(!1),x(0)},[]),E=b.useCallback(D=>{S(D)},[]);return b.useEffect(()=>{if(!C)return;const D=A=>{if(!(A instanceof HTMLElement))return!1;if(A.isContentEditable)return!0;const B=A.tagName.toLowerCase();return B==="input"||B==="textarea"||B==="select"},_=A=>{if(D(A.target)||D(document.activeElement))return;M.current!==null&&(window.clearTimeout(M.current),M.current=null);const B=A.touches[0];w.current={startX:B.clientX,startY:B.clientY,currentX:B.clientX,currentY:B.clientY,isHorizontal:null,isTracking:!0}},L=A=>{const B=w.current;if(!B?.isTracking)return;const G=A.touches[0],U=G.clientX-B.startX,W=G.clientY-B.startY;if(B.isHorizontal===null){if(Math.abs(U)>20||Math.abs(W)>20){const J=Math.abs(U)>Math.abs(W);B.isHorizontal=J,J?(U>0?!!l:!!r)?N(!0):B.isTracking=!1:(W>0?s:o)||(B.isTracking=!1)}return}B.isHorizontal?(p&&A.cancelable&&A.preventDefault(),B.currentX=G.clientX,x(G.clientX-B.startX)):B.currentY=G.clientY},R=()=>{const A=w.current;if(!A?.isTracking){j();return}const B=A.currentX-A.startX,G=A.currentY-A.startY,U=d||window.innerWidth*.25;let W=!1;A.isHorizontal===!0?B<-U&&r?(r(),W=!0):B>U&&l&&(l(),W=!0):A.isHorizontal===!1&&(G<-U&&o?(o(),W=!0):G>U&&s&&(s(),W=!0)),W?h?(w.current=null,N(!1),M.current!==null&&window.clearTimeout(M.current),M.current=window.setTimeout(()=>{j(),M.current=null},m)):requestAnimationFrame(()=>{j()}):j()};return document.addEventListener("touchstart",_,{passive:!0}),document.addEventListener("touchmove",L,{passive:!1}),document.addEventListener("touchend",R,{passive:!0}),document.addEventListener("touchcancel",R,{passive:!0}),()=>{document.removeEventListener("touchstart",_),document.removeEventListener("touchmove",L),document.removeEventListener("touchend",R),document.removeEventListener("touchcancel",R),M.current!==null&&(window.clearTimeout(M.current),M.current=null),j()}},[C,r,l,o,s,d,p,h,m,j]),{swipeOffset:g,isSwiping:v,setSwipeEnabled:E,resetSwipeState:j}}function K3({open:r,onClose:l,filter:o,sort:s,onChangeFilter:u,onChangeSort:d}){if(!r)return null;const p=s?.mode||"modified",h=p.includes("name")?"name":p.includes("size")?"size":"date",m=(()=>{const x=p.endsWith("reverse");return h==="date"?x?"asc":"desc":x?"desc":"asc"})(),g=(x,v)=>{let N;x==="name"?N=v==="asc"?"name":"name-reverse":x==="size"?N=v==="asc"?"size":"size-reverse":N=v==="desc"?"modified":"modified-reverse",d({mode:N})};return i.jsx("div",{id:"filter-modal-root",className:"fixed inset-0 z-[1600] bg-black/50 flex items-center justify-center p-4",onClick:l,children:i.jsxs("div",{id:"filter-modal-content",className:"bg-white rounded-xl shadow-lg w-full max-w-sm max-h-[90vh] overflow-y-auto",onClick:x=>x.stopPropagation(),children:[i.jsxs("div",{id:"filter-modal-header",className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[i.jsx("h3",{id:"filter-modal-title",className:"font-semibold text-gray-900",children:"Filter & Sort"}),i.jsx("button",{onClick:l,children:i.jsx(Gl,{className:"w-6 h-6 text-gray-500"})})]}),i.jsxs("div",{id:"filter-modal-body",className:"p-4 space-y-6",children:[i.jsxs("div",{id:"sort-group-container",children:[i.jsx("h4",{id:"sort-group-label",className:"text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),i.jsx("div",{id:"sort-options-grid",className:"grid grid-cols-2 gap-2",children:["name","date","size"].map(x=>{const v=h===x,N=v?m==="asc"?"desc":"asc":x==="name"?"asc":"desc";return i.jsxs("button",{className:`sort-option-button px-3 py-2 rounded-lg text-sm border ${v?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,onClick:()=>g(x,N),children:[x==="name"?"Name":x==="size"?"Size":"Date",v&&(m==="asc"?" ":" ")]},x)})})]}),i.jsxs("div",{id:"filter-type-group-container",children:[i.jsx("h4",{id:"filter-type-label",className:"text-sm font-medium text-gray-700 mb-2",children:"File Type"}),i.jsx("div",{id:"filter-type-options",className:"flex gap-2",children:["all","image","video"].map(x=>i.jsx("button",{className:`filter-type-button flex-1 px-3 py-2 rounded-lg text-sm border ${o.type===x?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,onClick:()=>u({type:x}),children:x.charAt(0).toUpperCase()+x.slice(1)},x))})]}),i.jsxs("div",{id:"search-input-container",children:[i.jsx("label",{id:"search-input-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),i.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Search by filename...",value:o.search,onChange:x=>u({search:x.target.value})})]}),i.jsxs("div",{id:"favorites-toggle-container",className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"favOnly",checked:o.favoritesOnly,onChange:x=>u({favoritesOnly:x.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"favOnly",className:"text-sm text-gray-700",children:"Show Favorites Only"})]})]}),i.jsx("div",{id:"filter-modal-footer",className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-end",children:i.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",onClick:l,children:"Apply"})})]})})}const y0="outputs-folders-collapsed",J3=1440*60*1e3;function e4(r){if(!r)return"Unknown date";const l=new Date,o=new Date(l.getFullYear(),l.getMonth(),l.getDate()),s=new Date(r),u=new Date(s.getFullYear(),s.getMonth(),s.getDate()),d=Math.round((o.getTime()-u.getTime())/J3);return d===0?"Today":d===1?"Yesterday":s.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function Cd({file:r,viewMode:l,selectionMode:o,isSelected:s,isFavorited:u,onNavigateFolder:d,onOpen:p,onMenu:h,onToggleSelection:m}){const g=r.type==="folder",[x,v]=b.useState(!1);b.useEffect(()=>{v(!1)},[r.previewUrl,r.id]);const N=()=>{o?m(r.id):g?d(r.name):p(r)},C=S=>{S.stopPropagation(),h(r,S)};return l==="list"?i.jsxs("div",{className:`file-card-list-item flex items-center gap-3 p-2 hover:bg-gray-50 border-b border-gray-100 last:border-0 ${s?"bg-blue-50":""}`,onClick:N,children:[o&&i.jsx("div",{className:`selection-checkbox w-5 h-5 rounded border flex items-center justify-center flex-shrink-0 ${s?"bg-blue-600 border-blue-600 text-white":"border-gray-300 bg-white"}`,children:s&&i.jsx(Hl,{className:"w-3.5 h-3.5"})}),i.jsx("div",{className:`file-preview-container w-10 h-10 flex-shrink-0 flex items-center justify-center rounded text-gray-500 overflow-hidden relative ${g?"":"bg-gray-100"}`,children:g?i.jsx(Ur,{className:"w-6 h-6 text-amber-500"}):r.previewUrl&&!x?i.jsx("img",{src:r.previewUrl,className:"w-full h-full object-cover",loading:"lazy",onError:()=>v(!0)}):r.type==="video"?i.jsx(wg,{className:"w-5 h-5 text-gray-500"}):i.jsx("span",{className:"text-xs font-bold",children:"IMG"})}),i.jsx("div",{className:"file-info-container flex-1 min-w-0",children:i.jsx("div",{className:"file-name text-sm font-medium text-gray-900 truncate",children:r.name})}),i.jsxs("div",{className:"file-actions-container flex items-center gap-2",children:[u&&i.jsx(Vl,{className:"w-4 h-4 text-yellow-500"}),i.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-700",onClick:C,children:i.jsx(wl,{className:"w-5 h-5 -rotate-90"})})]})]}):i.jsxs("div",{className:"file-card-grid-item flex flex-col gap-1",children:[i.jsxs("div",{className:`relative aspect-square bg-gray-100 rounded-lg overflow-hidden transition-all ${s?"ring-4 ring-blue-500 ring-offset-2":""}`,onClick:N,children:[g?i.jsx("div",{className:"folder-grid-content w-full h-full flex flex-col items-center justify-center text-gray-500",children:i.jsx(Ur,{className:"w-12 h-12 mb-2 text-amber-500"})}):r.previewUrl&&!x?i.jsx("img",{src:r.previewUrl,className:"w-full h-full object-cover",loading:"lazy",onError:()=>v(!0)}):i.jsx("div",{className:"media-placeholder w-full h-full flex items-center justify-center bg-gray-800 text-white font-bold",children:r.type==="video"?i.jsx(wg,{className:"w-10 h-10 text-white/80"}):"IMG"}),o?i.jsx("div",{className:"selection-badge-container absolute top-2 left-2",children:i.jsx("div",{className:`selection-badge w-6 h-6 rounded-full border-2 flex items-center justify-center shadow-sm ${s?"bg-blue-600 border-blue-600 text-white":"border-white bg-black/20"}`,children:s&&i.jsx(Hl,{className:"w-4 h-4"})})}):i.jsxs("div",{className:"file-menu-trigger-container absolute top-1 right-1 flex flex-col items-center gap-1",children:[i.jsx("button",{className:"p-1 bg-gray-500/40 rounded-full text-white hover:bg-gray-500/60",onClick:C,children:i.jsx(wl,{className:"w-4 h-4 -rotate-90"})}),u&&i.jsx(Vl,{className:"w-4 h-4 text-yellow-400 drop-shadow"})]}),r.type==="video"&&i.jsx("div",{className:"video-label absolute top-1 left-1 bg-black/50 px-1 rounded text-[10px] text-white",children:"VID"})]}),i.jsx("div",{className:"file-name text-xs text-gray-700 truncate px-1",children:r.name})]})}function t4({visible:r}){const{source:l,currentFolder:o,isLoading:s,viewMode:u,filter:d,sort:p,favorites:h,selectionMode:m,selectedIds:g,setCurrentFolder:x,navigateToPath:v,fetchFolders:N,fetchFiles:C,toggleFavorite:S,toggleSelection:w,getDisplayedFiles:M,refresh:j,selectIds:E,toggleSelectionMode:D,setFilter:_,setSort:L}=Nt(),R=Nt(Q=>Q.selectionActionOpen),A=Nt(Q=>Q.setSelectionActionOpen),B=Nt(Q=>Q.filterModalOpen),G=Nt(Q=>Q.setFilterModalOpen),U=Nt(Q=>Q.newFolderModalOpen),W=Nt(Q=>Q.setNewFolderModalOpen),J=Nt(Q=>Q.setOutputsViewerOpen),xe=Nt(Q=>Q.addFavorites),ae=Nt(Q=>Q.removeFavorites),le=Nt(Q=>Q.clearSelection),z=te(Q=>Q.loadWorkflow),Y=Ln(Q=>Q.setCurrentPanel),de=te(Q=>Q.workflow),be=te(Q=>Q.originalWorkflow),ye=b.useMemo(()=>!!(de&&be&&JSON.stringify(de)!==JSON.stringify(be)),[de,be]),[T,I]=b.useState(null),[O,F]=b.useState(null),[X,pe]=b.useState(null),[ee,oe]=b.useState(null),[ve,Oe]=b.useState(!1),[Qe,ne]=b.useState(!1),[Ve,Ne]=b.useState(!1),[Le,Ke]=b.useState(null),[Ge,we]=b.useState([]),[Ye,he]=b.useState(!1),[Re,Ze]=b.useState(""),[gt,Be]=b.useState([]),[Se,_e]=b.useState(null),[Xe,We]=b.useState(""),[Pe,P]=b.useState(!1),[ft,ot]=b.useState([]),[tt,pt]=b.useState(0),Ht=b.useRef(null),Vt=b.useRef(!1),[$n,fr]=b.useState(()=>localStorage.getItem(y0)==="true"),[or,An]=b.useState({}),ln=b.useRef(null),an=b.useRef(null),on=b.useRef(!1),Rn=()=>{F(null),ln.current=null},ke=()=>{Oe(!1),pe(null),an.current=null},De=(Q,je)=>{ln.current=je?.onDeleted??null,F(Q)},V=(Q,je)=>{Q.type==="image"&&(an.current=je?.onLoaded??null,pe(Q),Oe(!0))};Gi({open:!!T,onDismiss:()=>I(null),triggerRef:{current:null},contentRef:Ht}),b.useEffect(()=>{Vt.current=!1},[l]),b.useEffect(()=>{r&&!Vt.current&&!s&&(Vt.current=!0,N(),C())},[r,N,C,s]),b.useEffect(()=>{!r&&Pe&&(P(!1),J(!1))},[r,Pe,J]),b.useEffect(()=>{!r&&B&&G(!1)},[r,B,G]);const ce=M(),ue=Nt(Q=>Q.sort.mode),Ce=Q=>{const Me=M().filter(mt=>(mt.type==="image"||mt.type==="video")&&mt.fullUrl),Ot=Me.map(mt=>({src:mt.fullUrl,alt:mt.name,mediaType:qo(mt.name),file:mt,filename:mt.name})),Qt=Me.findIndex(mt=>mt.id===Q.id);Qt>=0&&(ot(Ot),pt(Qt),P(!0),J(!0))},ze=()=>{P(!1),J(!1)},Fe=Q=>{Q.file&&De(Q.file,{onDeleted:je=>{ot(Me=>{const Ot=Me.findIndex(mt=>mt.file?.id===je.id),Qt=Me.filter(mt=>mt.file?.id!==je.id);return pt(mt=>Qt.length===0?0:Ot===-1?mt:Ot<mt?mt-1:Ot===mt?Math.min(mt,Qt.length-1):mt),Qt.length===0&&(P(!1),J(!1)),Qt})}})},Te=Q=>{!Q.file||Q.file.type!=="image"||V(Q.file,{onLoaded:()=>{P(!1),J(!1)}})},nt=Q=>{Q.file&&br(Q.file,{closeViewer:!0})},{folders:st,nonFolders:xt}=b.useMemo(()=>{const Q=[],je=[];for(const Me of ce)Me.type==="folder"?Q.push(Me):je.push(Me);return{folders:Q,nonFolders:je}},[ce]),yt=ue.startsWith("name"),vt=ue.startsWith("size"),bt=d.favoritesOnly||!yt&&!vt,Rt=b.useMemo(()=>{if(yt){const je=[];for(const Me of xt){const Ot=Me.name?.trim()?.charAt(0).toUpperCase()||"#",Qt=`Starting with ${Ot}`,mt=je[je.length-1];mt&&mt.key===Ot?mt.files.push(Me):je.push({key:Ot,label:Qt,files:[Me]})}return je}if(vt){const je=[];for(const Me of xt){const Qt=(Me.size??0)/(1024*1024),mt=Qt<1?0:Math.round(Qt),Sr=mt===0?"<1MB":`${mt}MB`,Zo=mt===0?"<1MB":`${mt}MB`,Fl=je[je.length-1];Fl&&Fl.key===Sr?Fl.files.push(Me):je.push({key:Sr,label:Zo,files:[Me]})}return je}if(!bt)return[{key:"all",label:"All files",files:xt}];const Q=[];for(const je of xt){const Me=je.date?new Date(je.date).toISOString().slice(0,10):"unknown",Ot=e4(je.date),Qt=Q[Q.length-1];Qt&&Qt.key===Me?Qt.files.push(je):Q.push({key:Me,label:Ot,files:[je]})}return Q},[xt,bt,yt,vt]),qt=()=>{const Q=!$n;fr(Q),localStorage.setItem(y0,String(Q))},Nn=Q=>{An(je=>({...je,[Q]:!je[Q]}))},se=Q=>{Ce(Q)},Je=(Q,je)=>{je.preventDefault();const Me=Math.min(je.clientX,window.innerWidth-200),Ot=Math.min(je.clientY,window.innerHeight-200);I({file:Q,x:Me,y:Ot})},Bt=()=>{T&&(S(T.file.id),I(null))},It=()=>{T&&(m||D(),E([T.file.id],"replace"),I(null))},cn=()=>{T&&T.file.type==="image"&&(pe(T.file),Oe(!0),I(null))},fn=()=>{T&&(F(T.file),I(null))},Yn=()=>{g.length!==0&&(A(!1),ne(!0))},Xr=async(Q,je)=>{try{await zx({file:Q,source:l,loadWorkflow:z,onLoaded:()=>{Y("workflow"),je?.closeViewer&&(P(!1),J(!1))}})}catch(Me){console.error("Failed to load workflow from file:",Me),window.alert("Failed to load workflow from file.")}},br=(Q,je)=>{if(Q.type==="folder"){window.alert("Workflow metadata is not available for folders.");return}if(ye){on.current=!!je?.closeViewer,oe(Q);return}Xr(Q,je)},Kt=()=>{if(!T)return;const Q=T.file;I(null),br(Q,{closeViewer:!1})},Fo=async()=>{if(!ee)return;const Q=ee,je=on.current;on.current=!1,oe(null),await Xr(Q,{closeViewer:je})},$o=()=>{on.current=!1,oe(null)},wr=async()=>{if(!O)return;const Q=O;try{const je=Ho(O,l);await Ed(je,l),j(),ln.current?.(Q),ln.current=null}catch(je){console.error("Failed to delete file:",je),window.alert("Failed to delete file.")}finally{F(null)}},Pr=async()=>{if(g.length===0){ne(!1);return}try{const Q=`${l}/`,je=g.map(Me=>Me.startsWith(Q)?Me.slice(Q.length):Me);await Promise.all(je.map(Me=>Ed(Me,l))),j(),le()}catch(Q){console.error("Failed to delete selected files:",Q),window.alert("Failed to delete selected files.")}finally{ne(!1)}},Xi=()=>{if(g.length===0)return;g.every(je=>h.includes(je))?ae(g):xe(g),A(!1)},Yo=()=>{g.length!==0&&(A(!1),Be([...g]),_e(o),Ke(o),Ne(!0))},Qo=()=>{T&&(Be([T.file.id]),_e(o),Ke(o),Ne(!0),I(null))},Ra=()=>{Ne(!1),Be([]),_e(null)},ql=async()=>{if(gt.length!==0)try{const Q=`${l}/`,je=gt.map(Me=>Me.startsWith(Q)?Me.slice(Q.length):Me);await S1(je,Le,l),j(),m&&(le(),D())}catch(Q){console.error("Failed to move selected files:",Q),window.alert("Failed to move selected files.")}finally{Ra()}},Wl=async()=>{const Q=Re.trim();if(!Q)return;const je=Le?`${Le}/${Q}`:Q;try{await hg(je,l),Ze(""),he(!0);const Me=await Od(l,1e3,0,"modified",!1,Le);we(Me.filter(Ot=>Ot.type==="folder"))}catch(Me){console.error("Failed to create folder:",Me),window.alert("Failed to create folder.")}finally{he(!1)}},Qn=async()=>{const Q=Xe.trim();if(!Q)return;const je=o?`${o}/${Q}`:Q;try{await hg(je,l),We(""),W(!1),j()}catch(Me){console.error("Failed to create folder:",Me),window.alert("Failed to create folder.")}},sn=b.useMemo(()=>{const je=[{name:l==="output"?"Outputs":"Inputs",path:null}];if(o){const Me=o.split("/");Me.forEach((Ot,Qt)=>{je.push({name:Ot,path:Me.slice(0,Qt+1).join("/")})})}return je},[l,o]),Xo=()=>{const Q=sn.length,je=[];return Q<=3?sn.forEach((Me,Ot)=>{je.push({...Me,isClickable:Ot<Q-1})}):(je.push({...sn[0],isClickable:!0}),je.push({name:"...",path:sn[Q-3].path,isEllipsis:!0,isClickable:!0}),je.push({...sn[Q-2],isClickable:!0}),je.push({...sn[Q-1],isClickable:!1})),i.jsx("div",{id:"outputs-breadcrumb-trail",className:"flex items-center text-sm overflow-hidden whitespace-nowrap",children:je.map((Me,Ot)=>i.jsxs("div",{className:"flex items-center min-w-0",children:[Ot>0&&i.jsx("span",{className:"mx-1.5 text-gray-400 shrink-0",children:"/"}),i.jsx("button",{onClick:()=>Me.isClickable&&v(Me.path),disabled:!Me.isClickable,className:`
                truncate transition-colors
                ${Me.isClickable?"text-blue-600 hover:text-blue-700 active:opacity-70":"text-gray-700 font-medium"}
                ${Me.isEllipsis?"px-1 bg-gray-100 rounded":""}
              `,title:Me.name,children:Me.name})]},Ot))})};b.useEffect(()=>{if(!Ve)return;let Q=!1;return(async()=>{he(!0);try{const Me=await Od(l,1e3,0,"modified",!1,Le);if(Q)return;we(Me.filter(Ot=>Ot.type==="folder"))}catch(Me){if(Q)return;console.error("Failed to load folders:",Me),we([])}finally{Q||he(!1)}})(),()=>{Q=!0}},[Ve,Le,l]),b.useEffect(()=>{R&&g.length===0&&A(!1)},[R,g.length,A]);const Pi=()=>{const Q=Nt.getState();Q.clearSelection(),Q.toggleSelectionMode()},Da=()=>{if(!Le)return;const Q=Le.split("/");Q.pop(),Ke(Q.length?Q.join("/"):null)},Po=Q=>()=>{Ke(Le?`${Le}/${Q}`:Q)};return i.jsx("div",{id:"outputs-panel-wrapper",className:"absolute inset-x-0 top-[69px] bottom-0",style:{display:r?"block":"none"},children:i.jsxs("div",{id:"outputs-panel-root",className:"h-full bg-white flex flex-col pt-[4px] pb-[80px]",children:[i.jsx("div",{id:"outputs-panel-header",className:"px-4 py-3 flex flex-col gap-3 border-b border-gray-100",children:i.jsxs("div",{id:"outputs-header-top-row",className:"flex items-center justify-between min-h-[24px]",children:[Xo(),m&&i.jsxs("div",{className:"selection-status-container flex items-center gap-2 shrink-0 ml-2",children:[i.jsxs("span",{className:"text-[10px] font-bold text-blue-600 uppercase",children:[g.length," selected"]}),i.jsx("button",{onClick:Pi,className:"text-[10px] text-gray-500 underline uppercase font-bold",children:"Clear"})]})]})}),i.jsxs("div",{id:"outputs-content-container",className:"flex-1 overflow-y-auto p-4",children:[st.length>0&&i.jsxs("div",{id:"outputs-folders-section",className:"mb-4",children:[i.jsxs("button",{onClick:qt,className:"flex items-center gap-2 w-full text-left mb-2 py-1 text-sm font-medium text-gray-600 hover:text-gray-900",children:[$n?i.jsx(Oi,{className:"w-4 h-4"}):i.jsx(ki,{className:"w-4 h-4"}),i.jsxs("span",{children:["Folders (",st.length,")"]})]}),!$n&&i.jsx("div",{className:"flex flex-col border border-gray-200 rounded-lg overflow-hidden",children:st.map(Q=>i.jsx(Cd,{file:Q,viewMode:"list",selectionMode:m,isSelected:g.includes(Q.id),isFavorited:h.includes(Q.id),onNavigateFolder:x,onOpen:se,onMenu:Je,onToggleSelection:w},Q.id))})]}),i.jsx("div",{id:"outputs-files-section",className:"flex flex-col gap-4",children:Rt.map(Q=>i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("button",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wide text-gray-500 hover:text-gray-800",onClick:()=>Nn(Q.key),children:[or[Q.key]?i.jsx(Oi,{className:"w-3.5 h-3.5"}):i.jsx(ki,{className:"w-3.5 h-3.5"}),i.jsxs("span",{children:[Q.label," (",Q.files.length,")"]})]}),m&&i.jsx("button",{className:"text-[10px] font-bold uppercase text-blue-600 hover:text-blue-700",onClick:()=>E(Q.files.map(je=>je.id)),children:"Select all"})]}),!or[Q.key]&&(u==="grid"?i.jsx("div",{className:"grid grid-cols-2 gap-4 auto-rows-min",children:Q.files.map(je=>i.jsx(Cd,{file:je,viewMode:u,selectionMode:m,isSelected:g.includes(je.id),isFavorited:h.includes(je.id),onNavigateFolder:x,onOpen:se,onMenu:Je,onToggleSelection:w},je.id))}):i.jsx("div",{className:"flex flex-col",children:Q.files.map(je=>i.jsx(Cd,{file:je,viewMode:u,selectionMode:m,isSelected:g.includes(je.id),isFavorited:h.includes(je.id),onNavigateFolder:x,onOpen:se,onMenu:Je,onToggleSelection:w},je.id))}))]},Q.key))}),s&&i.jsx("div",{id:"outputs-loading-indicator",className:"py-4 flex justify-center",children:i.jsx("span",{className:"text-gray-400 text-sm",children:"Loading..."})}),!s&&ce.length===0&&i.jsx("div",{id:"outputs-empty-message",className:"text-center text-gray-400 py-8",children:o?"No images in this folder":l==="output"?"No generated images yet":"No imported images"})]}),T&&i.jsxs(i.Fragment,{children:[i.jsx("div",{id:"outputs-context-menu-overlay",className:"fixed inset-0 z-[1690]",onClick:()=>I(null),onPointerDown:Q=>Q.stopPropagation()}),i.jsxs("div",{id:"outputs-context-menu",ref:Ht,className:"fixed z-[1700] bg-white shadow-xl rounded-lg border border-gray-200 w-52 py-1",style:{top:T.y,left:T.x},onPointerDown:Q=>Q.stopPropagation(),onClick:Q=>Q.stopPropagation(),children:[i.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Bt,children:[h.includes(T.file.id)?i.jsx(Vl,{className:"w-4 h-4"}):i.jsx(Mi,{className:"w-4 h-4"}),h.includes(T.file.id)?"Unfavorite":"Favorite"]}),i.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:It,children:[i.jsx(Hl,{className:"w-4 h-4 text-gray-500"}),"Select"]}),i.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Qo,children:[i.jsx(Ur,{className:"w-4 h-4 text-gray-500"}),"Move"]}),T.file.type==="image"&&i.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Kt,children:[i.jsx(_a,{className:"w-4 h-4 text-gray-500"}),"Load workflow"]}),T.file.type==="image"&&i.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:cn,children:[i.jsx(_0,{className:"w-4 h-4 text-gray-500"}),"Use in workflow"]}),i.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:fn,children:[i.jsx(Gr,{className:"w-4 h-4"}),"Delete"]})]})]}),R&&i.jsx("div",{id:"outputs-selection-actions",className:"fixed inset-0 z-[1800] bg-black/40 flex items-center justify-center p-4",onClick:()=>A(!1),role:"dialog","aria-modal":"true",children:i.jsxs("div",{className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:Q=>Q.stopPropagation(),children:[i.jsxs("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:[g.length," selected"]}),i.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Xi,children:[g.every(Q=>h.includes(Q))?i.jsx(Mi,{className:"w-4 h-4"}):i.jsx(Vl,{className:"w-4 h-4"}),g.every(Q=>h.includes(Q))?"Unfavorite":"Favorite"]}),i.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Yo,children:[i.jsx(Ur,{className:"w-4 h-4 text-gray-500"}),"Move"]}),i.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:Yn,children:[i.jsx(Gr,{className:"w-4 h-4"}),"Delete"]}),i.jsx("button",{className:"w-full text-left px-4 py-3 text-sm text-gray-600 hover:bg-gray-50",onClick:()=>A(!1),children:"Cancel"})]})}),Ve&&i.jsx("div",{id:"outputs-move-picker-overlay",className:"fixed inset-0 z-[1850] bg-black/50 flex items-center justify-center p-4",onClick:Ra,role:"dialog","aria-modal":"true",children:i.jsxs("div",{id:"outputs-move-picker",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:Q=>Q.stopPropagation(),children:[i.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:Le!==Se?i.jsxs(i.Fragment,{children:["Move to ",i.jsx(Ur,{className:"w-4 h-4 text-amber-500 inline"})," ",Le||"root"]}):"Move to..."}),i.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[Ye&&i.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"Loading folders..."}),!Ye&&Le&&i.jsx("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Da,children:i.jsx("span",{className:"text-gray-500",children:".."})}),!Ye&&Ge.filter(Q=>!gt.includes(Q.id)).length===0&&i.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"No folders"}),!Ye&&Ge.filter(Q=>!gt.includes(Q.id)).map(Q=>i.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Po(Q.name),children:[i.jsx(Ur,{className:"w-4 h-4 text-amber-500"}),Q.name]},Q.id)),i.jsx("div",{className:"px-4 py-3 border-t border-gray-100",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{value:Re,onChange:Q=>Ze(Q.target.value),placeholder:"New folder",className:"flex-1 border border-gray-200 rounded-lg px-3 py-2 text-sm"}),i.jsx("button",{className:"px-3 py-2 text-sm font-medium text-blue-600 hover:text-blue-700",onClick:Wl,children:"Create"})]})})]}),i.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg",onClick:Ra,children:"Cancel"}),i.jsx("button",{className:`px-3 py-2 text-sm font-medium rounded-lg ${Le!==Se?"text-white bg-blue-600 hover:bg-blue-700":"text-gray-400 bg-gray-200 cursor-not-allowed"}`,onClick:ql,disabled:Le===Se,children:"Submit"})]})]})}),O&&i.jsx("div",{id:"outputs-delete-confirm-overlay",className:"fixed inset-0 z-[2100] bg-black/50 flex items-center justify-center p-4",onClick:Rn,role:"dialog","aria-modal":"true",children:i.jsxs("div",{id:"outputs-delete-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:Q=>Q.stopPropagation(),children:[i.jsx("div",{id:"outputs-delete-confirm-title",className:"text-gray-900 text-base font-semibold",children:"Delete file?"}),i.jsx("div",{id:"outputs-delete-confirm-description",className:"text-gray-600 text-sm mt-1",children:O.type==="folder"?`This will permanently delete the folder "${O.name}" and all of its contents from the server. This cannot be undone.`:`This will permanently delete "${O.name}" from the server. This cannot be undone.`}),i.jsxs("div",{id:"outputs-delete-confirm-actions",className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:Rn,children:"Cancel"}),i.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:wr,children:"Delete"})]})]})}),Qe&&i.jsx("div",{id:"outputs-delete-selection-overlay",className:"fixed inset-0 z-[1800] bg-black/50 flex items-center justify-center p-4",onClick:()=>ne(!1),role:"dialog","aria-modal":"true",children:i.jsxs("div",{id:"outputs-delete-selection-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:Q=>Q.stopPropagation(),children:[i.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Delete selected files?"}),i.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:["This will permanently delete ",g.length," selected file",g.length===1?"":"s"," from the server. This cannot be undone."]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:()=>ne(!1),children:"Cancel"}),i.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:Pr,children:"Delete"})]})]})}),U&&i.jsx("div",{id:"outputs-new-folder-overlay",className:"fixed inset-0 z-[1850] bg-black/50 flex items-center justify-center p-4",onClick:()=>{W(!1),We("")},role:"dialog","aria-modal":"true",children:i.jsxs("div",{id:"outputs-new-folder-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:Q=>Q.stopPropagation(),children:[i.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"New folder"}),i.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:["Create a new folder in ",o?i.jsxs(i.Fragment,{children:[i.jsx(Ur,{className:"w-3.5 h-3.5 text-amber-500 inline"})," ",o]}):"root"]}),i.jsx("input",{value:Xe,onChange:Q=>We(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Qn()},placeholder:"Folder name",className:"mt-3 w-full border border-gray-200 rounded-lg px-3 py-2 text-sm",autoFocus:!0}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:()=>{W(!1),We("")},children:"Cancel"}),i.jsx("button",{className:`px-3 py-2 rounded-lg text-sm font-medium ${Xe.trim()?"text-white bg-blue-600 hover:bg-blue-700":"text-gray-400 bg-gray-200 cursor-not-allowed"}`,onClick:Qn,disabled:!Xe.trim(),children:"Create"})]})]})}),i.jsx(Bx,{open:ve,file:X,source:l,onClose:ke,onLoaded:()=>{Oe(!1),pe(null),an.current?.(),an.current=null}}),i.jsx(K3,{open:B,onClose:()=>G(!1),filter:d,sort:p,onChangeFilter:_,onChangeSort:L}),i.jsx(Dx,{file:ee,onCancel:$o,onConfirm:Fo}),i.jsx(Rx,{open:Pe,items:ft,index:tt,onClose:ze,onIndexChange:pt,onDelete:Fe,onLoadInWorkflow:Te,onLoadWorkflow:nt,showMetadataToggle:!0})]})})}function n4(){const r=Ln(z=>z.currentPanel),l=Ln(z=>z.setCurrentPanel),o=_d(z=>z.appMenuOpen),s=rr(z=>z.viewerOpen),u=rr(z=>z.setViewerState),d=te(z=>z.followQueue),p=te(z=>z.setFollowQueue),h=bn(z=>z.bookmarkRepositioningActive),m=b.useRef(null),{isInputFocused:g}=Ax(),x=Nt(z=>z.outputsViewerOpen),v=Nt(z=>z.selectionMode),N=Nt(z=>z.filterModalOpen),C=Nt(z=>z.selectionActionOpen),S=Nt(z=>z.currentFolder),w=Nt(z=>z.navigateUp);P3();const M=b.useCallback(()=>{r==="workflow"?l("queue"):r==="outputs"&&l("workflow")},[r,l]),j=b.useCallback(()=>{r==="outputs"&&S?w():r==="workflow"?l("outputs"):r==="queue"&&l("workflow")},[r,S,w,l]),E=r==="workflow"||r==="outputs",D=r==="workflow"||r==="queue"||r==="outputs"&&!!S,{swipeOffset:_,isSwiping:L,setSwipeEnabled:R,resetSwipeState:A}=Z3({onSwipeLeft:E?M:void 0,onSwipeRight:D?j:void 0,enabled:!g&&!s&&!o&&!x&&!h&&!v&&!N&&!C}),B=te(z=>z.setNodeTypes),G=Ei(z=>z.theme),U=te(z=>z.workflowLoadedAt),W=lt(z=>z.fetchQueue),J=Tn(z=>z.history);b.useEffect(()=>{!L&&_!==0&&A()},[L,_,A]),b.useEffect(()=>{x&&A()},[x,A]);const xe=()=>{u({viewerOpen:!1}),p(!1),R(!0),A()};b.useEffect(()=>{Pd().then(z=>{B(z)}).catch(z=>{console.error("Failed to load node types:",z)})},[B]),b.useEffect(()=>{W()},[W]);const ae=(z,Y,de=!0)=>{R(!1),A(),u({viewerImages:z,viewerIndex:Y,viewerScale:1,viewerTranslate:{x:0,y:0},viewerOpen:!0}),p(de)},le=()=>{const z=bf(J,{onlyOutput:!0,alt:"Generation"});R(!1),A();const Y=z.length>0?0:-1;u({viewerImages:z,viewerIndex:Y,viewerScale:1,viewerTranslate:{x:0,y:0},viewerOpen:!0}),p(!0)};return b.useEffect(()=>{const z=document.documentElement;z.classList.toggle("dark",G==="dark"),z.style.colorScheme=G},[G]),b.useEffect(()=>{U&&queueMicrotask(()=>{p(!1)})},[U,p]),i.jsxs("div",{id:"app-root",className:"min-h-screen bg-gray-100",children:[i.jsx(Fb,{mode:r}),i.jsxs("main",{id:"main-content",ref:m,className:"pt-[69px] pb-[80px] min-h-screen relative",children:[i.jsxs(i.Fragment,{children:[i.jsx(t4,{visible:r==="outputs"}),i.jsx(l3,{visible:r==="workflow",onImageClick:ae}),i.jsx(L3,{visible:r==="queue",onImageClick:ae})]}),i.jsx("div",{id:"bottom-bar-spacer",className:"fixed inset-x-0 bottom-0 bg-gray-100 pointer-events-none z-[1500]",style:{height:"var(--bottom-bar-offset, 80px)"}})]}),i.jsx(m3,{currentPanel:r,viewerOpen:s,followQueue:d,onToggleFollowQueue:()=>p(!d),onOpenFollowQueue:le}),i.jsx(X3,{onClose:xe})]})}Jv.createRoot(document.getElementById("root")).render(i.jsx(b.StrictMode,{children:i.jsx(n4,{})}));
//# sourceMappingURL=index-DOvIJG87.js.map
