function qy(l,r){for(var o=0;o<r.length;o++){const s=r[o];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in l)){const d=Object.getOwnPropertyDescriptor(s,i);d&&Object.defineProperty(l,i,d.get?d:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function o(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(i){if(i.ep)return;i.ep=!0;const d=o(i);fetch(i.href,d)}})();function Wy(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var td={exports:{}},No={};var eg;function Fy(){if(eg)return No;eg=1;var l=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(s,i,d){var p=null;if(d!==void 0&&(p=""+d),i.key!==void 0&&(p=""+i.key),"key"in i){d={};for(var h in i)h!=="key"&&(d[h]=i[h])}else d=i;return i=d.ref,{$$typeof:l,type:s,key:p,ref:i!==void 0?i:null,props:d}}return No.Fragment=r,No.jsx=o,No.jsxs=o,No}var tg;function $y(){return tg||(tg=1,td.exports=Fy()),td.exports}var u=$y(),nd={exports:{}},Je={};var ng;function Yy(){if(ng)return Je;ng=1;var l=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),p=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),N=Symbol.iterator;function k(T){return T===null||typeof T!="object"?null:(T=N&&T[N]||T["@@iterator"],typeof T=="function"?T:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,M={};function j(T,I,O){this.props=T,this.context=I,this.refs=M,this.updater=O||S}j.prototype.isReactComponent={},j.prototype.setState=function(T,I){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,I,"setState")},j.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function E(){}E.prototype=j.prototype;function z(T,I,O){this.props=T,this.context=I,this.refs=M,this.updater=O||S}var L=z.prototype=new E;L.constructor=z,w(L,j.prototype),L.isPureReactComponent=!0;var _=Array.isArray;function R(){}var A={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function U(T,I,O){var F=O.ref;return{$$typeof:l,type:T,key:I,ref:F!==void 0?F:null,props:O}}function G(T,I){return U(T.type,I,T.props)}function W(T){return typeof T=="object"&&T!==null&&T.$$typeof===l}function K(T){var I={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(O){return I[O]})}var ge=/\/+/g;function ae(T,I){return typeof T=="object"&&T!==null&&T.key!=null?K(""+T.key):I.toString(36)}function le(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(R,R):(T.status="pending",T.then(function(I){T.status==="pending"&&(T.status="fulfilled",T.value=I)},function(I){T.status==="pending"&&(T.status="rejected",T.reason=I)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function D(T,I,O,F,X){var pe=typeof T;(pe==="undefined"||pe==="boolean")&&(T=null);var J=!1;if(T===null)J=!0;else switch(pe){case"bigint":case"string":case"number":J=!0;break;case"object":switch(T.$$typeof){case l:case r:J=!0;break;case x:return J=T._init,D(J(T._payload),I,O,F,X)}}if(J)return X=X(T),J=F===""?"."+ae(T,0):F,_(X)?(O="",J!=null&&(O=J.replace(ge,"$&/")+"/"),D(X,I,O,"",function(_e){return _e})):X!=null&&(W(X)&&(X=G(X,O+(X.key==null||T&&T.key===X.key?"":(""+X.key).replace(ge,"$&/")+"/")+J)),I.push(X)),1;J=0;var re=F===""?".":F+":";if(_(T))for(var ye=0;ye<T.length;ye++)F=T[ye],pe=re+ae(F,ye),J+=D(F,I,O,pe,X);else if(ye=k(T),typeof ye=="function")for(T=ye.call(T),ye=0;!(F=T.next()).done;)F=F.value,pe=re+ae(F,ye++),J+=D(F,I,O,pe,X);else if(pe==="object"){if(typeof T.then=="function")return D(le(T),I,O,F,X);throw I=String(T),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return J}function $(T,I,O){if(T==null)return T;var F=[],X=0;return D(T,F,"","",function(pe){return I.call(O,pe,X++)}),F}function fe(T){if(T._status===-1){var I=T._result;I=I(),I.then(function(O){(T._status===0||T._status===-1)&&(T._status=1,T._result=O)},function(O){(T._status===0||T._status===-1)&&(T._status=2,T._result=O)}),T._status===-1&&(T._status=0,T._result=I)}if(T._status===1)return T._result.default;throw T._result}var be=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},ve={map:$,forEach:function(T,I,O){$(T,function(){I.apply(this,arguments)},O)},count:function(T){var I=0;return $(T,function(){I++}),I},toArray:function(T){return $(T,function(I){return I})||[]},only:function(T){if(!W(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Je.Activity=y,Je.Children=ve,Je.Component=j,Je.Fragment=o,Je.Profiler=i,Je.PureComponent=z,Je.StrictMode=s,Je.Suspense=m,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Je.__COMPILER_RUNTIME={__proto__:null,c:function(T){return A.H.useMemoCache(T)}},Je.cache=function(T){return function(){return T.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(T,I,O){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var F=w({},T.props),X=T.key;if(I!=null)for(pe in I.key!==void 0&&(X=""+I.key),I)!B.call(I,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&I.ref===void 0||(F[pe]=I[pe]);var pe=arguments.length-2;if(pe===1)F.children=O;else if(1<pe){for(var J=Array(pe),re=0;re<pe;re++)J[re]=arguments[re+2];F.children=J}return U(T.type,X,F)},Je.createContext=function(T){return T={$$typeof:p,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:d,_context:T},T},Je.createElement=function(T,I,O){var F,X={},pe=null;if(I!=null)for(F in I.key!==void 0&&(pe=""+I.key),I)B.call(I,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(X[F]=I[F]);var J=arguments.length-2;if(J===1)X.children=O;else if(1<J){for(var re=Array(J),ye=0;ye<J;ye++)re[ye]=arguments[ye+2];X.children=re}if(T&&T.defaultProps)for(F in J=T.defaultProps,J)X[F]===void 0&&(X[F]=J[F]);return U(T,pe,X)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(T){return{$$typeof:h,render:T}},Je.isValidElement=W,Je.lazy=function(T){return{$$typeof:x,_payload:{_status:-1,_result:T},_init:fe}},Je.memo=function(T,I){return{$$typeof:g,type:T,compare:I===void 0?null:I}},Je.startTransition=function(T){var I=A.T,O={};A.T=O;try{var F=T(),X=A.S;X!==null&&X(O,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(R,be)}catch(pe){be(pe)}finally{I!==null&&O.types!==null&&(I.types=O.types),A.T=I}},Je.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Je.use=function(T){return A.H.use(T)},Je.useActionState=function(T,I,O){return A.H.useActionState(T,I,O)},Je.useCallback=function(T,I){return A.H.useCallback(T,I)},Je.useContext=function(T){return A.H.useContext(T)},Je.useDebugValue=function(){},Je.useDeferredValue=function(T,I){return A.H.useDeferredValue(T,I)},Je.useEffect=function(T,I){return A.H.useEffect(T,I)},Je.useEffectEvent=function(T){return A.H.useEffectEvent(T)},Je.useId=function(){return A.H.useId()},Je.useImperativeHandle=function(T,I,O){return A.H.useImperativeHandle(T,I,O)},Je.useInsertionEffect=function(T,I){return A.H.useInsertionEffect(T,I)},Je.useLayoutEffect=function(T,I){return A.H.useLayoutEffect(T,I)},Je.useMemo=function(T,I){return A.H.useMemo(T,I)},Je.useOptimistic=function(T,I){return A.H.useOptimistic(T,I)},Je.useReducer=function(T,I,O){return A.H.useReducer(T,I,O)},Je.useRef=function(T){return A.H.useRef(T)},Je.useState=function(T){return A.H.useState(T)},Je.useSyncExternalStore=function(T,I,O){return A.H.useSyncExternalStore(T,I,O)},Je.useTransition=function(){return A.H.useTransition()},Je.version="19.2.3",Je}var lg;function Yd(){return lg||(lg=1,nd.exports=Yy()),nd.exports}var b=Yd();const Ca=Wy(b),rg=qy({__proto__:null,default:Ca},[b]);var ld={exports:{}},jo={},rd={exports:{}},ad={};var ag;function Qy(){return ag||(ag=1,(function(l){function r(D,$){var fe=D.length;D.push($);e:for(;0<fe;){var be=fe-1>>>1,ve=D[be];if(0<i(ve,$))D[be]=$,D[fe]=ve,fe=be;else break e}}function o(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var $=D[0],fe=D.pop();if(fe!==$){D[0]=fe;e:for(var be=0,ve=D.length,T=ve>>>1;be<T;){var I=2*(be+1)-1,O=D[I],F=I+1,X=D[F];if(0>i(O,fe))F<ve&&0>i(X,O)?(D[be]=X,D[F]=fe,be=F):(D[be]=O,D[I]=fe,be=I);else if(F<ve&&0>i(X,fe))D[be]=X,D[F]=fe,be=F;else break e}}return $}function i(D,$){var fe=D.sortIndex-$.sortIndex;return fe!==0?fe:D.id-$.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var p=Date,h=p.now();l.unstable_now=function(){return p.now()-h}}var m=[],g=[],x=1,y=null,N=3,k=!1,S=!1,w=!1,M=!1,j=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function L(D){for(var $=o(g);$!==null;){if($.callback===null)s(g);else if($.startTime<=D)s(g),$.sortIndex=$.expirationTime,r(m,$);else break;$=o(g)}}function _(D){if(w=!1,L(D),!S)if(o(m)!==null)S=!0,R||(R=!0,K());else{var $=o(g);$!==null&&le(_,$.startTime-D)}}var R=!1,A=-1,B=5,U=-1;function G(){return M?!0:!(l.unstable_now()-U<B)}function W(){if(M=!1,R){var D=l.unstable_now();U=D;var $=!0;try{e:{S=!1,w&&(w=!1,E(A),A=-1),k=!0;var fe=N;try{t:{for(L(D),y=o(m);y!==null&&!(y.expirationTime>D&&G());){var be=y.callback;if(typeof be=="function"){y.callback=null,N=y.priorityLevel;var ve=be(y.expirationTime<=D);if(D=l.unstable_now(),typeof ve=="function"){y.callback=ve,L(D),$=!0;break t}y===o(m)&&s(m),L(D)}else s(m);y=o(m)}if(y!==null)$=!0;else{var T=o(g);T!==null&&le(_,T.startTime-D),$=!1}}break e}finally{y=null,N=fe,k=!1}$=void 0}}finally{$?K():R=!1}}}var K;if(typeof z=="function")K=function(){z(W)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,ae=ge.port2;ge.port1.onmessage=W,K=function(){ae.postMessage(null)}}else K=function(){j(W,0)};function le(D,$){A=j(function(){D(l.unstable_now())},$)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(D){D.callback=null},l.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<D?Math.floor(1e3/D):5},l.unstable_getCurrentPriorityLevel=function(){return N},l.unstable_next=function(D){switch(N){case 1:case 2:case 3:var $=3;break;default:$=N}var fe=N;N=$;try{return D()}finally{N=fe}},l.unstable_requestPaint=function(){M=!0},l.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var fe=N;N=D;try{return $()}finally{N=fe}},l.unstable_scheduleCallback=function(D,$,fe){var be=l.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?be+fe:be):fe=be,D){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=fe+ve,D={id:x++,callback:$,priorityLevel:D,startTime:fe,expirationTime:ve,sortIndex:-1},fe>be?(D.sortIndex=fe,r(g,D),o(m)===null&&D===o(g)&&(w?(E(A),A=-1):w=!0,le(_,fe-be))):(D.sortIndex=ve,r(m,D),S||k||(S=!0,R||(R=!0,K()))),D},l.unstable_shouldYield=G,l.unstable_wrapCallback=function(D){var $=N;return function(){var fe=N;N=$;try{return D.apply(this,arguments)}finally{N=fe}}}})(ad)),ad}var og;function Xy(){return og||(og=1,rd.exports=Qy()),rd.exports}var od={exports:{}},vn={};var sg;function Py(){if(sg)return vn;sg=1;var l=Yd();function r(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(r(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},i=Symbol.for("react.portal");function d(m,g,x){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:m,containerInfo:g,implementation:x}}var p=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,vn.createPortal=function(m,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(r(299));return d(m,g,null,x)},vn.flushSync=function(m){var g=p.T,x=s.p;try{if(p.T=null,s.p=2,m)return m()}finally{p.T=g,s.p=x,s.d.f()}},vn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},vn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},vn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var x=g.as,y=h(x,g.crossOrigin),N=typeof g.integrity=="string"?g.integrity:void 0,k=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:N,fetchPriority:k}):x==="script"&&s.d.X(m,{crossOrigin:y,integrity:N,fetchPriority:k,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},vn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=h(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},vn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,y=h(x,g.crossOrigin);s.d.L(m,x,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},vn.preloadModule=function(m,g){if(typeof m=="string")if(g){var x=h(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},vn.requestFormReset=function(m){s.d.r(m)},vn.unstable_batchedUpdates=function(m,g){return m(g)},vn.useFormState=function(m,g,x){return p.H.useFormState(m,g,x)},vn.useFormStatus=function(){return p.H.useHostTransitionStatus()},vn.version="19.2.3",vn}var ig;function v0(){if(ig)return od.exports;ig=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),od.exports=Py(),od.exports}var ug;function Zy(){if(ug)return jo;ug=1;var l=Xy(),r=Yd(),o=v0();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(d(e)!==e)throw Error(s(188))}function g(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,a=t;;){var c=n.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){n=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===n)return m(c),e;if(f===a)return m(c),t;f=f.sibling}throw Error(s(188))}if(n.return!==a.return)n=c,a=f;else{for(var v=!1,C=c.child;C;){if(C===n){v=!0,n=c,a=f;break}if(C===a){v=!0,a=c,n=f;break}C=C.sibling}if(!v){for(C=f.child;C;){if(C===n){v=!0,n=f,a=c;break}if(C===a){v=!0,a=f,n=c;break}C=C.sibling}if(!v)throw Error(s(189))}}if(n.alternate!==a)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,N=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),z=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function K(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Symbol.for("react.client.reference");function ae(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ge?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case j:return"Profiler";case M:return"StrictMode";case _:return"Suspense";case R:return"SuspenseList";case U:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case z:return e.displayName||"Context";case E:return(e._context.displayName||"Context")+".Consumer";case L:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case A:return t=e.displayName||null,t!==null?t:ae(e.type)||"Memo";case B:t=e._payload,e=e._init;try{return ae(e(t))}catch{}}return null}var le=Array.isArray,D=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},be=[],ve=-1;function T(e){return{current:e}}function I(e){0>ve||(e.current=be[ve],be[ve]=null,ve--)}function O(e,t){ve++,be[ve]=e.current,e.current=t}var F=T(null),X=T(null),pe=T(null),J=T(null);function re(e,t){switch(O(pe,t),O(X,e),O(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Nh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Nh(t),e=jh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(F),O(F,e)}function ye(){I(F),I(X),I(pe)}function _e(e){e.memoizedState!==null&&O(J,e);var t=F.current,n=jh(t,e.type);t!==n&&(O(X,e),O(F,n))}function $e(e){X.current===e&&(I(F),I(X)),J.current===e&&(I(J),yo._currentValue=fe)}var ee,Ve;function Ne(e){if(ee===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ee=t&&t[1]||"",Ve=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ee+e+Ve}var Ce=!1;function tt(e,t){if(!e||Ce)return"";Ce=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ie){var te=ie}Reflect.construct(e,[],he)}else{try{he.call()}catch(ie){te=ie}e.call(he.prototype)}}else{try{throw Error()}catch(ie){te=ie}(he=e())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=a.DetermineComponentFrameRoot(),v=f[0],C=f[1];if(v&&C){var H=v.split(`
`),Z=C.split(`
`);for(c=a=0;a<H.length&&!H[a].includes("DetermineComponentFrameRoot");)a++;for(;c<Z.length&&!Z[c].includes("DetermineComponentFrameRoot");)c++;if(a===H.length||c===Z.length)for(a=H.length-1,c=Z.length-1;1<=a&&0<=c&&H[a]!==Z[c];)c--;for(;1<=a&&0<=c;a--,c--)if(H[a]!==Z[c]){if(a!==1||c!==1)do if(a--,c--,0>c||H[a]!==Z[c]){var de=`
`+H[a].replace(" at new "," at ");return e.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",e.displayName)),de}while(1<=a&&0<=c);break}}}finally{Ce=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ne(n):""}function Qe(e,t){switch(e.tag){case 26:case 27:case 5:return Ne(e.type);case 16:return Ne("Lazy");case 13:return e.child!==t&&t!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return tt(e.type,!1);case 11:return tt(e.type.render,!1);case 1:return tt(e.type,!0);case 31:return Ne("Activity");default:return""}}function we(e){try{var t="",n=null;do t+=Qe(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var xe=Object.prototype.hasOwnProperty,Ee=l.unstable_scheduleCallback,Ae=l.unstable_cancelCallback,ft=l.unstable_shouldYield,ut=l.unstable_requestPaint,Ze=l.unstable_now,Se=l.unstable_getCurrentPriorityLevel,Le=l.unstable_ImmediatePriority,Xe=l.unstable_UserBlockingPriority,We=l.unstable_NormalPriority,Pe=l.unstable_LowPriority,Ge=l.unstable_IdlePriority,Nt=l.log,oe=l.unstable_setDisableYieldValue,et=null,rt=null;function jt(e){if(typeof Nt=="function"&&oe(e),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(et,e)}catch{}}var Vt=Math.clz32?Math.clz32:ol,$n=Math.log,fl=Math.LN2;function ol(e){return e>>>=0,e===0?32:31-($n(e)/fl|0)|0}var An=256,rn=262144,an=4194304;function on(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Rn(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var c=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var C=a&134217727;return C!==0?(a=C&~f,a!==0?c=on(a):(v&=C,v!==0?c=on(v):n||(n=C&~e,n!==0&&(c=on(n))))):(C=a&~f,C!==0?c=on(C):v!==0?c=on(v):n||(n=a&~e,n!==0&&(c=on(n)))),c===0?0:t!==0&&t!==c&&(t&f)===0&&(f=c&-c,n=t&-t,f>=n||f===32&&(n&4194048)!==0)?t:c}function Me(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ze(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V(){var e=an;return an<<=1,(an&62914560)===0&&(an=4194304),e}function ce(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ue(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,n,a,c,f){var v=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var C=e.entanglements,H=e.expirationTimes,Z=e.hiddenUpdates;for(n=v&~n;0<n;){var de=31-Vt(n),he=1<<de;C[de]=0,H[de]=-1;var te=Z[de];if(te!==null)for(Z[de]=null,de=0;de<te.length;de++){var ie=te[de];ie!==null&&(ie.lane&=-536870913)}n&=~he}a!==0&&Ie(e,a,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~t))}function Ie(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Vt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function Ye(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Vt(n),c=1<<a;c&t|e[a]&t&&(e[a]|=t),n&=~c}}function Re(e,t){var n=t&-t;return n=(n&42)!==0?1:ot(n),(n&(e.suspendedLanes|t))!==0?0:n}function ot(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function pt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function gt(){var e=$.p;return e!==0?e:(e=window.event,e===void 0?32:Yh(e.type))}function xt(e,t){var n=$.p;try{return $.p=e,t()}finally{$.p=n}}var vt=Math.random().toString(36).slice(2),yt="__reactFiber$"+vt,Dt="__reactProps$"+vt,qt="__reactContainer$"+vt,Nn="__reactEvents$"+vt,se="__reactListeners$"+vt,Ke="__reactHandles$"+vt,Bt="__reactResources$"+vt,Ht="__reactMarker$"+vt;function cn(e){delete e[yt],delete e[Dt],delete e[Nn],delete e[se],delete e[Ke]}function fn(e){var t=e[yt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qt]||n[yt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_h(e);e!==null;){if(n=e[yt])return n;e=_h(e)}return t}e=n,n=e.parentNode}return null}function Yn(e){if(e=e[yt]||e[qt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ql(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function bl(e){var t=e[Bt];return t||(t=e[Bt]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Kt(e){e[Ht]=!0}var Fo=new Set,$o={};function wl(e,t){Xl(e,t),Xl(e+"Capture",t)}function Xl(e,t){for($o[e]=t,e=0;e<t.length;e++)Fo.add(t[e])}var Xi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yo={},Qo={};function Aa(e){return xe.call(Qo,e)?!0:xe.call(Yo,e)?!1:Xi.test(e)?Qo[e]=!0:(Yo[e]=!0,!1)}function Gr(e,t,n){if(Aa(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function qr(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Qn(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pi(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(v){n=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(v){n=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ra(e){if(!e._valueTracker){var t=Xo(e)?"checked":"value";e._valueTracker=Pi(e,t,""+e[t])}}function Po(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=Xo(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Q(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var je=/[\n"\\]/g;function Oe(e){return e.replace(je,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Et(e,t,n,a,c,f,v,C){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+sn(t)):e.value!==""+sn(t)&&(e.value=""+sn(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?mt(e,v,sn(t)):n!=null?mt(e,v,sn(n)):a!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+sn(C):e.removeAttribute("name")}function Qt(e,t,n,a,c,f,v,C){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||n!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){Ra(e);return}n=n!=null?""+sn(n):"",t=t!=null?""+sn(t):n,C||t===e.value||(e.value=t),e.defaultValue=t}a=a??c,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=C?e.checked:!!a,e.defaultChecked=!!a,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Ra(e)}function mt(e,t,n){t==="number"&&Q(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Sl(e,t,n,a){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&a&&(e[n].defaultSelected=!0)}else{for(n=""+sn(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Zo(e,t,n){if(t!=null&&(t=""+sn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+sn(n):""}function Wr(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(s(92));if(le(a)){if(1<a.length)throw Error(s(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=sn(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),Ra(e)}function Fr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Bx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bf(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Bx.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function wf(e,t,n){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var c in t)a=t[c],t.hasOwnProperty(c)&&n[c]!==a&&bf(e,c,a)}else for(var f in t)t.hasOwnProperty(f)&&bf(e,f,t[f])}function Zi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(e){return Vx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Nl(){}var Ki=null;function Ji(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $r=null,Yr=null;function Sf(e){var t=Yn(e);if(t&&(e=t.stateNode)){var n=e[Dt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Et(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Oe(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var c=a[Dt]||null;if(!c)throw Error(s(90));Et(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Po(a)}break e;case"textarea":Zo(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Sl(e,!!n.multiple,t,!1)}}}var eu=!1;function Nf(e,t,n){if(eu)return e(t,n);eu=!0;try{var a=e(t);return a}finally{if(eu=!1,($r!==null||Yr!==null)&&(Hs(),$r&&(t=$r,e=Yr,Yr=$r=null,Sf(t),e)))for(t=0;t<e.length;t++)Sf(e[t])}}function Da(e,t){var n=e.stateNode;if(n===null)return null;var a=n[Dt]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var jl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tu=!1;if(jl)try{var za={};Object.defineProperty(za,"passive",{get:function(){tu=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{tu=!1}var Pl=null,nu=null,Jo=null;function jf(){if(Jo)return Jo;var e,t=nu,n=t.length,a,c="value"in Pl?Pl.value:Pl.textContent,f=c.length;for(e=0;e<n&&t[e]===c[e];e++);var v=n-e;for(a=1;a<=v&&t[n-a]===c[f-a];a++);return Jo=c.slice(e,1<a?1-a:void 0)}function es(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ts(){return!0}function Cf(){return!1}function jn(e){function t(n,a,c,f,v){this._reactName=n,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(n=e[C],this[C]=n?n(f):f[C]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ts:Cf,this.isPropagationStopped=Cf,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),t}var wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ns=jn(wr),Ia=y({},wr,{view:0,detail:0}),Ux=jn(Ia),lu,ru,Ba,ls=y({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ou,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ba&&(Ba&&e.type==="mousemove"?(lu=e.screenX-Ba.screenX,ru=e.screenY-Ba.screenY):ru=lu=0,Ba=e),lu)},movementY:function(e){return"movementY"in e?e.movementY:ru}}),kf=jn(ls),Gx=y({},ls,{dataTransfer:0}),qx=jn(Gx),Wx=y({},Ia,{relatedTarget:0}),au=jn(Wx),Fx=y({},wr,{animationName:0,elapsedTime:0,pseudoElement:0}),$x=jn(Fx),Yx=y({},wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qx=jn(Yx),Xx=y({},wr,{data:0}),Mf=jn(Xx),Px={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kx[e])?!!t[e]:!1}function ou(){return Jx}var ev=y({},Ia,{key:function(e){if(e.key){var t=Px[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=es(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ou,charCode:function(e){return e.type==="keypress"?es(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?es(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tv=jn(ev),nv=y({},ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Of=jn(nv),lv=y({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ou}),rv=jn(lv),av=y({},wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ov=jn(av),sv=y({},ls,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iv=jn(sv),uv=y({},wr,{newState:0,oldState:0}),cv=jn(uv),dv=[9,13,27,32],su=jl&&"CompositionEvent"in window,Ha=null;jl&&"documentMode"in document&&(Ha=document.documentMode);var fv=jl&&"TextEvent"in window&&!Ha,Ef=jl&&(!su||Ha&&8<Ha&&11>=Ha),Tf=" ",_f=!1;function Lf(e,t){switch(e){case"keyup":return dv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Af(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qr=!1;function pv(e,t){switch(e){case"compositionend":return Af(t);case"keypress":return t.which!==32?null:(_f=!0,Tf);case"textInput":return e=t.data,e===Tf&&_f?null:e;default:return null}}function mv(e,t){if(Qr)return e==="compositionend"||!su&&Lf(e,t)?(e=jf(),Jo=nu=Pl=null,Qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ef&&t.locale!=="ko"?null:t.data;default:return null}}var hv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hv[e.type]:t==="textarea"}function Df(e,t,n,a){$r?Yr?Yr.push(a):Yr=[a]:$r=a,t=$s(t,"onChange"),0<t.length&&(n=new ns("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Va=null,Ua=null;function gv(e){xh(e,0)}function rs(e){var t=Ql(e);if(Po(t))return e}function zf(e,t){if(e==="change")return t}var If=!1;if(jl){var iu;if(jl){var uu="oninput"in document;if(!uu){var Bf=document.createElement("div");Bf.setAttribute("oninput","return;"),uu=typeof Bf.oninput=="function"}iu=uu}else iu=!1;If=iu&&(!document.documentMode||9<document.documentMode)}function Hf(){Va&&(Va.detachEvent("onpropertychange",Vf),Ua=Va=null)}function Vf(e){if(e.propertyName==="value"&&rs(Ua)){var t=[];Df(t,Ua,e,Ji(e)),Nf(gv,t)}}function xv(e,t,n){e==="focusin"?(Hf(),Va=t,Ua=n,Va.attachEvent("onpropertychange",Vf)):e==="focusout"&&Hf()}function vv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rs(Ua)}function yv(e,t){if(e==="click")return rs(t)}function bv(e,t){if(e==="input"||e==="change")return rs(t)}function wv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dn=typeof Object.is=="function"?Object.is:wv;function Ga(e,t){if(Dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var c=n[a];if(!xe.call(t,c)||!Dn(e[c],t[c]))return!1}return!0}function Uf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gf(e,t){var n=Uf(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uf(n)}}function qf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Q(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Q(e.document)}return t}function cu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Sv=jl&&"documentMode"in document&&11>=document.documentMode,Xr=null,du=null,qa=null,fu=!1;function Ff(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fu||Xr==null||Xr!==Q(a)||(a=Xr,"selectionStart"in a&&cu(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),qa&&Ga(qa,a)||(qa=a,a=$s(du,"onSelect"),0<a.length&&(t=new ns("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=Xr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pr={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionrun:Sr("Transition","TransitionRun"),transitionstart:Sr("Transition","TransitionStart"),transitioncancel:Sr("Transition","TransitionCancel"),transitionend:Sr("Transition","TransitionEnd")},pu={},$f={};jl&&($f=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function Nr(e){if(pu[e])return pu[e];if(!Pr[e])return e;var t=Pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $f)return pu[e]=t[n];return e}var Yf=Nr("animationend"),Qf=Nr("animationiteration"),Xf=Nr("animationstart"),Nv=Nr("transitionrun"),jv=Nr("transitionstart"),Cv=Nr("transitioncancel"),Pf=Nr("transitionend"),Zf=new Map,mu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mu.push("scrollEnd");function sl(e,t){Zf.set(e,t),wl(t,[e])}var as=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Xn=[],Zr=0,hu=0;function os(){for(var e=Zr,t=hu=Zr=0;t<e;){var n=Xn[t];Xn[t++]=null;var a=Xn[t];Xn[t++]=null;var c=Xn[t];Xn[t++]=null;var f=Xn[t];if(Xn[t++]=null,a!==null&&c!==null){var v=a.pending;v===null?c.next=c:(c.next=v.next,v.next=c),a.pending=c}f!==0&&Kf(n,c,f)}}function ss(e,t,n,a){Xn[Zr++]=e,Xn[Zr++]=t,Xn[Zr++]=n,Xn[Zr++]=a,hu|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function gu(e,t,n,a){return ss(e,t,n,a),is(e)}function jr(e,t){return ss(e,null,null,t),is(e)}function Kf(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var c=!1,f=e.return;f!==null;)f.childLanes|=n,a=f.alternate,a!==null&&(a.childLanes|=n),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&t!==null&&(c=31-Vt(n),e=f.hiddenUpdates,a=e[c],a===null?e[c]=[t]:a.push(t),t.lane=n|536870912),f):null}function is(e){if(50<fo)throw fo=0,Cc=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Kr={};function kv(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(e,t,n,a){return new kv(e,t,n,a)}function xu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cl(e,t){var n=e.alternate;return n===null?(n=zn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Jf(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function us(e,t,n,a,c,f){var v=0;if(a=e,typeof e=="function")xu(e)&&(v=1);else if(typeof e=="string")v=_y(e,n,F.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case U:return e=zn(31,n,t,c),e.elementType=U,e.lanes=f,e;case w:return Cr(n.children,c,f,t);case M:v=8,c|=24;break;case j:return e=zn(12,n,t,c|2),e.elementType=j,e.lanes=f,e;case _:return e=zn(13,n,t,c),e.elementType=_,e.lanes=f,e;case R:return e=zn(19,n,t,c),e.elementType=R,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:v=10;break e;case E:v=9;break e;case L:v=11;break e;case A:v=14;break e;case B:v=16,a=null;break e}v=29,n=Error(s(130,e===null?"null":typeof e,"")),a=null}return t=zn(v,n,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function Cr(e,t,n,a){return e=zn(7,e,a,t),e.lanes=n,e}function vu(e,t,n){return e=zn(6,e,null,t),e.lanes=n,e}function ep(e){var t=zn(18,null,null,0);return t.stateNode=e,t}function yu(e,t,n){return t=zn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var tp=new WeakMap;function Pn(e,t){if(typeof e=="object"&&e!==null){var n=tp.get(e);return n!==void 0?n:(t={value:e,source:t,stack:we(t)},tp.set(e,t),t)}return{value:e,source:t,stack:we(t)}}var Jr=[],ea=0,cs=null,Wa=0,Zn=[],Kn=0,Zl=null,pl=1,ml="";function kl(e,t){Jr[ea++]=Wa,Jr[ea++]=cs,cs=e,Wa=t}function np(e,t,n){Zn[Kn++]=pl,Zn[Kn++]=ml,Zn[Kn++]=Zl,Zl=e;var a=pl;e=ml;var c=32-Vt(a)-1;a&=~(1<<c),n+=1;var f=32-Vt(t)+c;if(30<f){var v=c-c%5;f=(a&(1<<v)-1).toString(32),a>>=v,c-=v,pl=1<<32-Vt(t)+c|n<<c|a,ml=f+e}else pl=1<<f|n<<c|a,ml=e}function bu(e){e.return!==null&&(kl(e,1),np(e,1,0))}function wu(e){for(;e===cs;)cs=Jr[--ea],Jr[ea]=null,Wa=Jr[--ea],Jr[ea]=null;for(;e===Zl;)Zl=Zn[--Kn],Zn[Kn]=null,ml=Zn[--Kn],Zn[Kn]=null,pl=Zn[--Kn],Zn[Kn]=null}function lp(e,t){Zn[Kn++]=pl,Zn[Kn++]=ml,Zn[Kn++]=Zl,pl=t.id,ml=t.overflow,Zl=e}var pn=null,Ut=null,ht=!1,Kl=null,Jn=!1,Su=Error(s(519));function Jl(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fa(Pn(t,e)),Su}function rp(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[yt]=e,t[Dt]=a,n){case"dialog":it("cancel",t),it("close",t);break;case"iframe":case"object":case"embed":it("load",t);break;case"video":case"audio":for(n=0;n<mo.length;n++)it(mo[n],t);break;case"source":it("error",t);break;case"img":case"image":case"link":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"input":it("invalid",t),Qt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":it("invalid",t);break;case"textarea":it("invalid",t),Wr(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||wh(t.textContent,n)?(a.popover!=null&&(it("beforetoggle",t),it("toggle",t)),a.onScroll!=null&&it("scroll",t),a.onScrollEnd!=null&&it("scrollend",t),a.onClick!=null&&(t.onclick=Nl),t=!0):t=!1,t||Jl(e,!0)}function ap(e){for(pn=e.return;pn;)switch(pn.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:pn=pn.return}}function ta(e){if(e!==pn)return!1;if(!ht)return ap(e),ht=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Vc(e.type,e.memoizedProps)),n=!n),n&&Ut&&Jl(e),ap(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ut=Th(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ut=Th(e)}else t===27?(t=Ut,pr(e.type)?(e=Fc,Fc=null,Ut=e):Ut=t):Ut=pn?tl(e.stateNode.nextSibling):null;return!0}function kr(){Ut=pn=null,ht=!1}function Nu(){var e=Kl;return e!==null&&(On===null?On=e:On.push.apply(On,e),Kl=null),e}function Fa(e){Kl===null?Kl=[e]:Kl.push(e)}var ju=T(null),Mr=null,Ml=null;function er(e,t,n){O(ju,t._currentValue),t._currentValue=n}function Ol(e){e._currentValue=ju.current,I(ju)}function Cu(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function ku(e,t,n,a){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var v=c.child;f=f.firstContext;e:for(;f!==null;){var C=f;f=c;for(var H=0;H<t.length;H++)if(C.context===t[H]){f.lanes|=n,C=f.alternate,C!==null&&(C.lanes|=n),Cu(f.return,n,e),a||(v=null);break e}f=C.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(s(341));v.lanes|=n,f=v.alternate,f!==null&&(f.lanes|=n),Cu(v,n,e),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===e){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function na(e,t,n,a){e=null;for(var c=t,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var C=c.type;Dn(c.pendingProps.value,v.value)||(e!==null?e.push(C):e=[C])}}else if(c===J.current){if(v=c.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(yo):e=[yo])}c=c.return}e!==null&&ku(t,e,n,a),t.flags|=262144}function ds(e){for(e=e.firstContext;e!==null;){if(!Dn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Or(e){Mr=e,Ml=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function mn(e){return op(Mr,e)}function fs(e,t){return Mr===null&&Or(e),op(e,t)}function op(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ml===null){if(e===null)throw Error(s(308));Ml=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ml=Ml.next=t;return n}var Mv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Ov=l.unstable_scheduleCallback,Ev=l.unstable_NormalPriority,Jt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mu(){return{controller:new Mv,data:new Map,refCount:0}}function $a(e){e.refCount--,e.refCount===0&&Ov(Ev,function(){e.controller.abort()})}var Ya=null,Ou=0,la=0,ra=null;function Tv(e,t){if(Ya===null){var n=Ya=[];Ou=0,la=_c(),ra={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Ou++,t.then(sp,sp),t}function sp(){if(--Ou===0&&Ya!==null){ra!==null&&(ra.status="fulfilled");var e=Ya;Ya=null,la=0,ra=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function _v(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(c){n.push(c)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var c=0;c<n.length;c++)(0,n[c])(t)},function(c){for(a.status="rejected",a.reason=c,c=0;c<n.length;c++)(0,n[c])(void 0)}),a}var ip=D.S;D.S=function(e,t){Fm=Ze(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Tv(e,t),ip!==null&&ip(e,t)};var Er=T(null);function Eu(){var e=Er.current;return e!==null?e:zt.pooledCache}function ps(e,t){t===null?O(Er,Er.current):O(Er,t.pool)}function up(){var e=Eu();return e===null?null:{parent:Jt._currentValue,pool:e}}var aa=Error(s(460)),Tu=Error(s(474)),ms=Error(s(542)),hs={then:function(){}};function cp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function dp(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Nl,Nl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,pp(e),e;default:if(typeof t.status=="string")t.then(Nl,Nl);else{if(e=zt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=a}},function(a){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,pp(e),e}throw _r=t,aa}}function Tr(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(_r=n,aa):n}}var _r=null;function fp(){if(_r===null)throw Error(s(459));var e=_r;return _r=null,e}function pp(e){if(e===aa||e===ms)throw Error(s(483))}var oa=null,Qa=0;function gs(e){var t=Qa;return Qa+=1,oa===null&&(oa=[]),dp(oa,e,t)}function Xa(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function xs(e,t){throw t.$$typeof===N?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function mp(e){function t(Y,q){if(e){var P=Y.deletions;P===null?(Y.deletions=[q],Y.flags|=16):P.push(q)}}function n(Y,q){if(!e)return null;for(;q!==null;)t(Y,q),q=q.sibling;return null}function a(Y){for(var q=new Map;Y!==null;)Y.key!==null?q.set(Y.key,Y):q.set(Y.index,Y),Y=Y.sibling;return q}function c(Y,q){return Y=Cl(Y,q),Y.index=0,Y.sibling=null,Y}function f(Y,q,P){return Y.index=P,e?(P=Y.alternate,P!==null?(P=P.index,P<q?(Y.flags|=67108866,q):P):(Y.flags|=67108866,q)):(Y.flags|=1048576,q)}function v(Y){return e&&Y.alternate===null&&(Y.flags|=67108866),Y}function C(Y,q,P,me){return q===null||q.tag!==6?(q=vu(P,Y.mode,me),q.return=Y,q):(q=c(q,P),q.return=Y,q)}function H(Y,q,P,me){var Be=P.type;return Be===w?de(Y,q,P.props.children,me,P.key):q!==null&&(q.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===B&&Tr(Be)===q.type)?(q=c(q,P.props),Xa(q,P),q.return=Y,q):(q=us(P.type,P.key,P.props,null,Y.mode,me),Xa(q,P),q.return=Y,q)}function Z(Y,q,P,me){return q===null||q.tag!==4||q.stateNode.containerInfo!==P.containerInfo||q.stateNode.implementation!==P.implementation?(q=yu(P,Y.mode,me),q.return=Y,q):(q=c(q,P.children||[]),q.return=Y,q)}function de(Y,q,P,me,Be){return q===null||q.tag!==7?(q=Cr(P,Y.mode,me,Be),q.return=Y,q):(q=c(q,P),q.return=Y,q)}function he(Y,q,P){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=vu(""+q,Y.mode,P),q.return=Y,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case k:return P=us(q.type,q.key,q.props,null,Y.mode,P),Xa(P,q),P.return=Y,P;case S:return q=yu(q,Y.mode,P),q.return=Y,q;case B:return q=Tr(q),he(Y,q,P)}if(le(q)||K(q))return q=Cr(q,Y.mode,P,null),q.return=Y,q;if(typeof q.then=="function")return he(Y,gs(q),P);if(q.$$typeof===z)return he(Y,fs(Y,q),P);xs(Y,q)}return null}function te(Y,q,P,me){var Be=q!==null?q.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return Be!==null?null:C(Y,q,""+P,me);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case k:return P.key===Be?H(Y,q,P,me):null;case S:return P.key===Be?Z(Y,q,P,me):null;case B:return P=Tr(P),te(Y,q,P,me)}if(le(P)||K(P))return Be!==null?null:de(Y,q,P,me,null);if(typeof P.then=="function")return te(Y,q,gs(P),me);if(P.$$typeof===z)return te(Y,q,fs(Y,P),me);xs(Y,P)}return null}function ie(Y,q,P,me,Be){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return Y=Y.get(P)||null,C(q,Y,""+me,Be);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case k:return Y=Y.get(me.key===null?P:me.key)||null,H(q,Y,me,Be);case S:return Y=Y.get(me.key===null?P:me.key)||null,Z(q,Y,me,Be);case B:return me=Tr(me),ie(Y,q,P,me,Be)}if(le(me)||K(me))return Y=Y.get(P)||null,de(q,Y,me,Be,null);if(typeof me.then=="function")return ie(Y,q,P,gs(me),Be);if(me.$$typeof===z)return ie(Y,q,P,fs(q,me),Be);xs(q,me)}return null}function Te(Y,q,P,me){for(var Be=null,bt=null,De=q,at=q=0,dt=null;De!==null&&at<P.length;at++){De.index>at?(dt=De,De=null):dt=De.sibling;var wt=te(Y,De,P[at],me);if(wt===null){De===null&&(De=dt);break}e&&De&&wt.alternate===null&&t(Y,De),q=f(wt,q,at),bt===null?Be=wt:bt.sibling=wt,bt=wt,De=dt}if(at===P.length)return n(Y,De),ht&&kl(Y,at),Be;if(De===null){for(;at<P.length;at++)De=he(Y,P[at],me),De!==null&&(q=f(De,q,at),bt===null?Be=De:bt.sibling=De,bt=De);return ht&&kl(Y,at),Be}for(De=a(De);at<P.length;at++)dt=ie(De,Y,at,P[at],me),dt!==null&&(e&&dt.alternate!==null&&De.delete(dt.key===null?at:dt.key),q=f(dt,q,at),bt===null?Be=dt:bt.sibling=dt,bt=dt);return e&&De.forEach(function(vr){return t(Y,vr)}),ht&&kl(Y,at),Be}function qe(Y,q,P,me){if(P==null)throw Error(s(151));for(var Be=null,bt=null,De=q,at=q=0,dt=null,wt=P.next();De!==null&&!wt.done;at++,wt=P.next()){De.index>at?(dt=De,De=null):dt=De.sibling;var vr=te(Y,De,wt.value,me);if(vr===null){De===null&&(De=dt);break}e&&De&&vr.alternate===null&&t(Y,De),q=f(vr,q,at),bt===null?Be=vr:bt.sibling=vr,bt=vr,De=dt}if(wt.done)return n(Y,De),ht&&kl(Y,at),Be;if(De===null){for(;!wt.done;at++,wt=P.next())wt=he(Y,wt.value,me),wt!==null&&(q=f(wt,q,at),bt===null?Be=wt:bt.sibling=wt,bt=wt);return ht&&kl(Y,at),Be}for(De=a(De);!wt.done;at++,wt=P.next())wt=ie(De,Y,at,wt.value,me),wt!==null&&(e&&wt.alternate!==null&&De.delete(wt.key===null?at:wt.key),q=f(wt,q,at),bt===null?Be=wt:bt.sibling=wt,bt=wt);return e&&De.forEach(function(Gy){return t(Y,Gy)}),ht&&kl(Y,at),Be}function Rt(Y,q,P,me){if(typeof P=="object"&&P!==null&&P.type===w&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case k:e:{for(var Be=P.key;q!==null;){if(q.key===Be){if(Be=P.type,Be===w){if(q.tag===7){n(Y,q.sibling),me=c(q,P.props.children),me.return=Y,Y=me;break e}}else if(q.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===B&&Tr(Be)===q.type){n(Y,q.sibling),me=c(q,P.props),Xa(me,P),me.return=Y,Y=me;break e}n(Y,q);break}else t(Y,q);q=q.sibling}P.type===w?(me=Cr(P.props.children,Y.mode,me,P.key),me.return=Y,Y=me):(me=us(P.type,P.key,P.props,null,Y.mode,me),Xa(me,P),me.return=Y,Y=me)}return v(Y);case S:e:{for(Be=P.key;q!==null;){if(q.key===Be)if(q.tag===4&&q.stateNode.containerInfo===P.containerInfo&&q.stateNode.implementation===P.implementation){n(Y,q.sibling),me=c(q,P.children||[]),me.return=Y,Y=me;break e}else{n(Y,q);break}else t(Y,q);q=q.sibling}me=yu(P,Y.mode,me),me.return=Y,Y=me}return v(Y);case B:return P=Tr(P),Rt(Y,q,P,me)}if(le(P))return Te(Y,q,P,me);if(K(P)){if(Be=K(P),typeof Be!="function")throw Error(s(150));return P=Be.call(P),qe(Y,q,P,me)}if(typeof P.then=="function")return Rt(Y,q,gs(P),me);if(P.$$typeof===z)return Rt(Y,q,fs(Y,P),me);xs(Y,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,q!==null&&q.tag===6?(n(Y,q.sibling),me=c(q,P),me.return=Y,Y=me):(n(Y,q),me=vu(P,Y.mode,me),me.return=Y,Y=me),v(Y)):n(Y,q)}return function(Y,q,P,me){try{Qa=0;var Be=Rt(Y,q,P,me);return oa=null,Be}catch(De){if(De===aa||De===ms)throw De;var bt=zn(29,De,null,Y.mode);return bt.lanes=me,bt.return=Y,bt}}}var Lr=mp(!0),hp=mp(!1),tr=!1;function _u(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function nr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function lr(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Ct&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,t=is(e),Kf(e,null,n),t}return ss(e,a,t,n),is(e)}function Pa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ye(e,n)}}function Au(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var c=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var v={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};f===null?c=f=v:f=f.next=v,n=n.next}while(n!==null);f===null?c=f=t:f=f.next=t}else c=f=t;n={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ru=!1;function Za(){if(Ru){var e=ra;if(e!==null)throw e}}function Ka(e,t,n,a){Ru=!1;var c=e.updateQueue;tr=!1;var f=c.firstBaseUpdate,v=c.lastBaseUpdate,C=c.shared.pending;if(C!==null){c.shared.pending=null;var H=C,Z=H.next;H.next=null,v===null?f=Z:v.next=Z,v=H;var de=e.alternate;de!==null&&(de=de.updateQueue,C=de.lastBaseUpdate,C!==v&&(C===null?de.firstBaseUpdate=Z:C.next=Z,de.lastBaseUpdate=H))}if(f!==null){var he=c.baseState;v=0,de=Z=H=null,C=f;do{var te=C.lane&-536870913,ie=te!==C.lane;if(ie?(ct&te)===te:(a&te)===te){te!==0&&te===la&&(Ru=!0),de!==null&&(de=de.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Te=e,qe=C;te=t;var Rt=n;switch(qe.tag){case 1:if(Te=qe.payload,typeof Te=="function"){he=Te.call(Rt,he,te);break e}he=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=qe.payload,te=typeof Te=="function"?Te.call(Rt,he,te):Te,te==null)break e;he=y({},he,te);break e;case 2:tr=!0}}te=C.callback,te!==null&&(e.flags|=64,ie&&(e.flags|=8192),ie=c.callbacks,ie===null?c.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:C.tag,payload:C.payload,callback:C.callback,next:null},de===null?(Z=de=ie,H=he):de=de.next=ie,v|=te;if(C=C.next,C===null){if(C=c.shared.pending,C===null)break;ie=C,C=ie.next,ie.next=null,c.lastBaseUpdate=ie,c.shared.pending=null}}while(!0);de===null&&(H=he),c.baseState=H,c.firstBaseUpdate=Z,c.lastBaseUpdate=de,f===null&&(c.shared.lanes=0),ir|=v,e.lanes=v,e.memoizedState=he}}function gp(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function xp(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)gp(n[e],t)}var sa=T(null),vs=T(0);function vp(e,t){e=Il,O(vs,e),O(sa,t),Il=e|t.baseLanes}function Du(){O(vs,Il),O(sa,sa.current)}function zu(){Il=vs.current,I(sa),I(vs)}var In=T(null),el=null;function rr(e){var t=e.alternate;O(Xt,Xt.current&1),O(In,e),el===null&&(t===null||sa.current!==null||t.memoizedState!==null)&&(el=e)}function Iu(e){O(Xt,Xt.current),O(In,e),el===null&&(el=e)}function yp(e){e.tag===22?(O(Xt,Xt.current),O(In,e),el===null&&(el=e)):ar()}function ar(){O(Xt,Xt.current),O(In,In.current)}function Bn(e){I(In),el===e&&(el=null),I(Xt)}var Xt=T(0);function ys(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||qc(n)||Wc(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var El=0,nt=null,Lt=null,en=null,bs=!1,ia=!1,Ar=!1,ws=0,Ja=0,ua=null,Lv=0;function Ft(){throw Error(s(321))}function Bu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Dn(e[n],t[n]))return!1;return!0}function Hu(e,t,n,a,c,f){return El=f,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=e===null||e.memoizedState===null?nm:ec,Ar=!1,f=n(a,c),Ar=!1,ia&&(f=wp(t,n,a,c)),bp(e),f}function bp(e){D.H=no;var t=Lt!==null&&Lt.next!==null;if(El=0,en=Lt=nt=null,bs=!1,Ja=0,ua=null,t)throw Error(s(300));e===null||tn||(e=e.dependencies,e!==null&&ds(e)&&(tn=!0))}function wp(e,t,n,a){nt=e;var c=0;do{if(ia&&(ua=null),Ja=0,ia=!1,25<=c)throw Error(s(301));if(c+=1,en=Lt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}D.H=lm,f=t(n,a)}while(ia);return f}function Av(){var e=D.H,t=e.useState()[0];return t=typeof t.then=="function"?eo(t):t,e=e.useState()[0],(Lt!==null?Lt.memoizedState:null)!==e&&(nt.flags|=1024),t}function Vu(){var e=ws!==0;return ws=0,e}function Uu(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Gu(e){if(bs){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}bs=!1}El=0,en=Lt=nt=null,ia=!1,Ja=ws=0,ua=null}function wn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?nt.memoizedState=en=e:en=en.next=e,en}function Pt(){if(Lt===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var t=en===null?nt.memoizedState:en.next;if(t!==null)en=t,Lt=e;else{if(e===null)throw nt.alternate===null?Error(s(467)):Error(s(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},en===null?nt.memoizedState=en=e:en=en.next=e}return en}function Ss(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eo(e){var t=Ja;return Ja+=1,ua===null&&(ua=[]),e=dp(ua,e,t),t=nt,(en===null?t.memoizedState:en.next)===null&&(t=t.alternate,D.H=t===null||t.memoizedState===null?nm:ec),e}function Ns(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return eo(e);if(e.$$typeof===z)return mn(e)}throw Error(s(438,String(e)))}function qu(e){var t=null,n=nt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=nt.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Ss(),nt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=G;return t.index++,n}function Tl(e,t){return typeof t=="function"?t(e):t}function js(e){var t=Pt();return Wu(t,Lt,e)}function Wu(e,t,n){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var c=e.baseQueue,f=a.pending;if(f!==null){if(c!==null){var v=c.next;c.next=f.next,f.next=v}t.baseQueue=c=f,a.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{t=c.next;var C=v=null,H=null,Z=t,de=!1;do{var he=Z.lane&-536870913;if(he!==Z.lane?(ct&he)===he:(El&he)===he){var te=Z.revertLane;if(te===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),he===la&&(de=!0);else if((El&te)===te){Z=Z.next,te===la&&(de=!0);continue}else he={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},H===null?(C=H=he,v=f):H=H.next=he,nt.lanes|=te,ir|=te;he=Z.action,Ar&&n(f,he),f=Z.hasEagerState?Z.eagerState:n(f,he)}else te={lane:he,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},H===null?(C=H=te,v=f):H=H.next=te,nt.lanes|=he,ir|=he;Z=Z.next}while(Z!==null&&Z!==t);if(H===null?v=f:H.next=C,!Dn(f,e.memoizedState)&&(tn=!0,de&&(n=ra,n!==null)))throw n;e.memoizedState=f,e.baseState=v,e.baseQueue=H,a.lastRenderedState=f}return c===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Fu(e){var t=Pt(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var a=n.dispatch,c=n.pending,f=t.memoizedState;if(c!==null){n.pending=null;var v=c=c.next;do f=e(f,v.action),v=v.next;while(v!==c);Dn(f,t.memoizedState)||(tn=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,a]}function Sp(e,t,n){var a=nt,c=Pt(),f=ht;if(f){if(n===void 0)throw Error(s(407));n=n()}else n=t();var v=!Dn((Lt||c).memoizedState,n);if(v&&(c.memoizedState=n,tn=!0),c=c.queue,Qu(Cp.bind(null,a,c,e),[e]),c.getSnapshot!==t||v||en!==null&&en.memoizedState.tag&1){if(a.flags|=2048,ca(9,{destroy:void 0},jp.bind(null,a,c,n,t),null),zt===null)throw Error(s(349));f||(El&127)!==0||Np(a,t,n)}return n}function Np(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=nt.updateQueue,t===null?(t=Ss(),nt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function jp(e,t,n,a){t.value=n,t.getSnapshot=a,kp(t)&&Mp(e)}function Cp(e,t,n){return n(function(){kp(t)&&Mp(e)})}function kp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dn(e,n)}catch{return!0}}function Mp(e){var t=jr(e,2);t!==null&&En(t,e,2)}function $u(e){var t=wn();if(typeof e=="function"){var n=e;if(e=n(),Ar){jt(!0);try{n()}finally{jt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:e},t}function Op(e,t,n,a){return e.baseState=n,Wu(e,Lt,typeof a=="function"?a:Tl)}function Rv(e,t,n,a,c){if(Ms(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};D.T!==null?n(!0):f.isTransition=!1,a(f),n=t.pending,n===null?(f.next=t.pending=f,Ep(t,f)):(f.next=n.next,t.pending=n.next=f)}}function Ep(e,t){var n=t.action,a=t.payload,c=e.state;if(t.isTransition){var f=D.T,v={};D.T=v;try{var C=n(c,a),H=D.S;H!==null&&H(v,C),Tp(e,t,C)}catch(Z){Yu(e,t,Z)}finally{f!==null&&v.types!==null&&(f.types=v.types),D.T=f}}else try{f=n(c,a),Tp(e,t,f)}catch(Z){Yu(e,t,Z)}}function Tp(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){_p(e,t,a)},function(a){return Yu(e,t,a)}):_p(e,t,n)}function _p(e,t,n){t.status="fulfilled",t.value=n,Lp(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ep(e,n)))}function Yu(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,Lp(t),t=t.next;while(t!==a)}e.action=null}function Lp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ap(e,t){return t}function Rp(e,t){if(ht){var n=zt.formState;if(n!==null){e:{var a=nt;if(ht){if(Ut){t:{for(var c=Ut,f=Jn;c.nodeType!==8;){if(!f){c=null;break t}if(c=tl(c.nextSibling),c===null){c=null;break t}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){Ut=tl(c.nextSibling),a=c.data==="F!";break e}}Jl(a)}a=!1}a&&(t=n[0])}}return n=wn(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:t},n.queue=a,n=Jp.bind(null,nt,a),a.dispatch=n,a=$u(!1),f=Ju.bind(null,nt,!1,a.queue),a=wn(),c={state:t,dispatch:null,action:e,pending:null},a.queue=c,n=Rv.bind(null,nt,c,f,n),c.dispatch=n,a.memoizedState=e,[t,n,!1]}function Dp(e){var t=Pt();return zp(t,Lt,e)}function zp(e,t,n){if(t=Wu(e,t,Ap)[0],e=js(Tl)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=eo(t)}catch(v){throw v===aa?ms:v}else a=t;t=Pt();var c=t.queue,f=c.dispatch;return n!==t.memoizedState&&(nt.flags|=2048,ca(9,{destroy:void 0},Dv.bind(null,c,n),null)),[a,f,e]}function Dv(e,t){e.action=t}function Ip(e){var t=Pt(),n=Lt;if(n!==null)return zp(t,n,e);Pt(),t=t.memoizedState,n=Pt();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function ca(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=nt.updateQueue,t===null&&(t=Ss(),nt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Bp(){return Pt().memoizedState}function Cs(e,t,n,a){var c=wn();nt.flags|=e,c.memoizedState=ca(1|t,{destroy:void 0},n,a===void 0?null:a)}function ks(e,t,n,a){var c=Pt();a=a===void 0?null:a;var f=c.memoizedState.inst;Lt!==null&&a!==null&&Bu(a,Lt.memoizedState.deps)?c.memoizedState=ca(t,f,n,a):(nt.flags|=e,c.memoizedState=ca(1|t,f,n,a))}function Hp(e,t){Cs(8390656,8,e,t)}function Qu(e,t){ks(2048,8,e,t)}function zv(e){nt.flags|=4;var t=nt.updateQueue;if(t===null)t=Ss(),nt.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Vp(e){var t=Pt().memoizedState;return zv({ref:t,nextImpl:e}),function(){if((Ct&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Up(e,t){return ks(4,2,e,t)}function Gp(e,t){return ks(4,4,e,t)}function qp(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wp(e,t,n){n=n!=null?n.concat([e]):null,ks(4,4,qp.bind(null,t,e),n)}function Xu(){}function Fp(e,t){var n=Pt();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&Bu(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function $p(e,t){var n=Pt();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&Bu(t,a[1]))return a[0];if(a=e(),Ar){jt(!0);try{e()}finally{jt(!1)}}return n.memoizedState=[a,t],a}function Pu(e,t,n){return n===void 0||(El&1073741824)!==0&&(ct&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Ym(),nt.lanes|=e,ir|=e,n)}function Yp(e,t,n,a){return Dn(n,t)?n:sa.current!==null?(e=Pu(e,n,a),Dn(e,t)||(tn=!0),e):(El&42)===0||(El&1073741824)!==0&&(ct&261930)===0?(tn=!0,e.memoizedState=n):(e=Ym(),nt.lanes|=e,ir|=e,t)}function Qp(e,t,n,a,c){var f=$.p;$.p=f!==0&&8>f?f:8;var v=D.T,C={};D.T=C,Ju(e,!1,t,n);try{var H=c(),Z=D.S;if(Z!==null&&Z(C,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var de=_v(H,a);to(e,t,de,Un(e))}else to(e,t,a,Un(e))}catch(he){to(e,t,{then:function(){},status:"rejected",reason:he},Un())}finally{$.p=f,v!==null&&C.types!==null&&(v.types=C.types),D.T=v}}function Iv(){}function Zu(e,t,n,a){if(e.tag!==5)throw Error(s(476));var c=Xp(e).queue;Qp(e,c,t,fe,n===null?Iv:function(){return Pp(e),n(a)})}function Xp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:fe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Pp(e){var t=Xp(e);t.next===null&&(t=e.alternate.memoizedState),to(e,t.next.queue,{},Un())}function Ku(){return mn(yo)}function Zp(){return Pt().memoizedState}function Kp(){return Pt().memoizedState}function Bv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Un();e=nr(n);var a=lr(t,e,n);a!==null&&(En(a,t,n),Pa(a,t,n)),t={cache:Mu()},e.payload=t;return}t=t.return}}function Hv(e,t,n){var a=Un();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ms(e)?em(t,n):(n=gu(e,t,n,a),n!==null&&(En(n,e,a),tm(n,t,a)))}function Jp(e,t,n){var a=Un();to(e,t,n,a)}function to(e,t,n,a){var c={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ms(e))em(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,C=f(v,n);if(c.hasEagerState=!0,c.eagerState=C,Dn(C,v))return ss(e,t,c,0),zt===null&&os(),!1}catch{}if(n=gu(e,t,c,a),n!==null)return En(n,e,a),tm(n,t,a),!0}return!1}function Ju(e,t,n,a){if(a={lane:2,revertLane:_c(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ms(e)){if(t)throw Error(s(479))}else t=gu(e,n,a,2),t!==null&&En(t,e,2)}function Ms(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function em(e,t){ia=bs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tm(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ye(e,n)}}var no={readContext:mn,use:Ns,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};no.useEffectEvent=Ft;var nm={readContext:mn,use:Ns,useCallback:function(e,t){return wn().memoizedState=[e,t===void 0?null:t],e},useContext:mn,useEffect:Hp,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Cs(4194308,4,qp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Cs(4194308,4,e,t)},useInsertionEffect:function(e,t){Cs(4,2,e,t)},useMemo:function(e,t){var n=wn();t=t===void 0?null:t;var a=e();if(Ar){jt(!0);try{e()}finally{jt(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=wn();if(n!==void 0){var c=n(t);if(Ar){jt(!0);try{n(t)}finally{jt(!1)}}}else c=t;return a.memoizedState=a.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},a.queue=e,e=e.dispatch=Hv.bind(null,nt,e),[a.memoizedState,e]},useRef:function(e){var t=wn();return e={current:e},t.memoizedState=e},useState:function(e){e=$u(e);var t=e.queue,n=Jp.bind(null,nt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Xu,useDeferredValue:function(e,t){var n=wn();return Pu(n,e,t)},useTransition:function(){var e=$u(!1);return e=Qp.bind(null,nt,e.queue,!0,!1),wn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=nt,c=wn();if(ht){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),zt===null)throw Error(s(349));(ct&127)!==0||Np(a,t,n)}c.memoizedState=n;var f={value:n,getSnapshot:t};return c.queue=f,Hp(Cp.bind(null,a,f,e),[e]),a.flags|=2048,ca(9,{destroy:void 0},jp.bind(null,a,f,n,t),null),n},useId:function(){var e=wn(),t=zt.identifierPrefix;if(ht){var n=ml,a=pl;n=(a&~(1<<32-Vt(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=ws++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Lv++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ku,useFormState:Rp,useActionState:Rp,useOptimistic:function(e){var t=wn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ju.bind(null,nt,!0,n),n.dispatch=t,[e,t]},useMemoCache:qu,useCacheRefresh:function(){return wn().memoizedState=Bv.bind(null,nt)},useEffectEvent:function(e){var t=wn(),n={impl:e};return t.memoizedState=n,function(){if((Ct&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},ec={readContext:mn,use:Ns,useCallback:Fp,useContext:mn,useEffect:Qu,useImperativeHandle:Wp,useInsertionEffect:Up,useLayoutEffect:Gp,useMemo:$p,useReducer:js,useRef:Bp,useState:function(){return js(Tl)},useDebugValue:Xu,useDeferredValue:function(e,t){var n=Pt();return Yp(n,Lt.memoizedState,e,t)},useTransition:function(){var e=js(Tl)[0],t=Pt().memoizedState;return[typeof e=="boolean"?e:eo(e),t]},useSyncExternalStore:Sp,useId:Zp,useHostTransitionStatus:Ku,useFormState:Dp,useActionState:Dp,useOptimistic:function(e,t){var n=Pt();return Op(n,Lt,e,t)},useMemoCache:qu,useCacheRefresh:Kp};ec.useEffectEvent=Vp;var lm={readContext:mn,use:Ns,useCallback:Fp,useContext:mn,useEffect:Qu,useImperativeHandle:Wp,useInsertionEffect:Up,useLayoutEffect:Gp,useMemo:$p,useReducer:Fu,useRef:Bp,useState:function(){return Fu(Tl)},useDebugValue:Xu,useDeferredValue:function(e,t){var n=Pt();return Lt===null?Pu(n,e,t):Yp(n,Lt.memoizedState,e,t)},useTransition:function(){var e=Fu(Tl)[0],t=Pt().memoizedState;return[typeof e=="boolean"?e:eo(e),t]},useSyncExternalStore:Sp,useId:Zp,useHostTransitionStatus:Ku,useFormState:Ip,useActionState:Ip,useOptimistic:function(e,t){var n=Pt();return Lt!==null?Op(n,Lt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qu,useCacheRefresh:Kp};lm.useEffectEvent=Vp;function tc(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:y({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var nc={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Un(),c=nr(a);c.payload=t,n!=null&&(c.callback=n),t=lr(e,c,a),t!==null&&(En(t,e,a),Pa(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Un(),c=nr(a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=lr(e,c,a),t!==null&&(En(t,e,a),Pa(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Un(),a=nr(n);a.tag=2,t!=null&&(a.callback=t),t=lr(e,a,n),t!==null&&(En(t,e,n),Pa(t,e,n))}};function rm(e,t,n,a,c,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,v):t.prototype&&t.prototype.isPureReactComponent?!Ga(n,a)||!Ga(c,f):!0}function am(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&nc.enqueueReplaceState(t,t.state,null)}function Rr(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=y({},n));for(var c in e)n[c]===void 0&&(n[c]=e[c])}return n}function om(e){as(e)}function sm(e){console.error(e)}function im(e){as(e)}function Os(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function um(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function lc(e,t,n){return n=nr(n),n.tag=3,n.payload={element:null},n.callback=function(){Os(e,t)},n}function cm(e){return e=nr(e),e.tag=3,e}function dm(e,t,n,a){var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=a.value;e.payload=function(){return c(f)},e.callback=function(){um(t,n,a)}}var v=n.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){um(t,n,a),typeof c!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})})}function Vv(e,t,n,a,c){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&na(t,n,c,!0),n=In.current,n!==null){switch(n.tag){case 31:case 13:return el===null?Vs():n.alternate===null&&$t===0&&($t=3),n.flags&=-257,n.flags|=65536,n.lanes=c,a===hs?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Oc(e,a,c)),!1;case 22:return n.flags|=65536,a===hs?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Oc(e,a,c)),!1}throw Error(s(435,n.tag))}return Oc(e,a,c),Vs(),!1}if(ht)return t=In.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,a!==Su&&(e=Error(s(422),{cause:a}),Fa(Pn(e,n)))):(a!==Su&&(t=Error(s(423),{cause:a}),Fa(Pn(t,n))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,a=Pn(a,n),c=lc(e.stateNode,a,c),Au(e,c),$t!==4&&($t=2)),!1;var f=Error(s(520),{cause:a});if(f=Pn(f,n),co===null?co=[f]:co.push(f),$t!==4&&($t=2),t===null)return!0;a=Pn(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=c&-c,n.lanes|=e,e=lc(n.stateNode,a,e),Au(n,e),!1;case 1:if(t=n.type,f=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ur===null||!ur.has(f))))return n.flags|=65536,c&=-c,n.lanes|=c,c=cm(c),dm(c,e,n,a),Au(n,c),!1}n=n.return}while(n!==null);return!1}var rc=Error(s(461)),tn=!1;function hn(e,t,n,a){t.child=e===null?hp(t,null,n,a):Lr(t,e.child,n,a)}function fm(e,t,n,a,c){n=n.render;var f=t.ref;if("ref"in a){var v={};for(var C in a)C!=="ref"&&(v[C]=a[C])}else v=a;return Or(t),a=Hu(e,t,n,v,f,c),C=Vu(),e!==null&&!tn?(Uu(e,t,c),_l(e,t,c)):(ht&&C&&bu(t),t.flags|=1,hn(e,t,a,c),t.child)}function pm(e,t,n,a,c){if(e===null){var f=n.type;return typeof f=="function"&&!xu(f)&&f.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=f,mm(e,t,f,a,c)):(e=us(n.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!fc(e,c)){var v=f.memoizedProps;if(n=n.compare,n=n!==null?n:Ga,n(v,a)&&e.ref===t.ref)return _l(e,t,c)}return t.flags|=1,e=Cl(f,a),e.ref=t.ref,e.return=t,t.child=e}function mm(e,t,n,a,c){if(e!==null){var f=e.memoizedProps;if(Ga(f,a)&&e.ref===t.ref)if(tn=!1,t.pendingProps=a=f,fc(e,c))(e.flags&131072)!==0&&(tn=!0);else return t.lanes=e.lanes,_l(e,t,c)}return ac(e,t,n,a,c)}function hm(e,t,n,a){var c=a.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|n:n,e!==null){for(a=t.child=e.child,c=0;a!==null;)c=c|a.lanes|a.childLanes,a=a.sibling;a=c&~f}else a=0,t.child=null;return gm(e,t,f,n,a)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ps(t,f!==null?f.cachePool:null),f!==null?vp(t,f):Du(),yp(t);else return a=t.lanes=536870912,gm(e,t,f!==null?f.baseLanes|n:n,n,a)}else f!==null?(ps(t,f.cachePool),vp(t,f),ar(),t.memoizedState=null):(e!==null&&ps(t,null),Du(),ar());return hn(e,t,c,n),t.child}function lo(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function gm(e,t,n,a,c){var f=Eu();return f=f===null?null:{parent:Jt._currentValue,pool:f},t.memoizedState={baseLanes:n,cachePool:f},e!==null&&ps(t,null),Du(),yp(t),e!==null&&na(e,t,a,!0),t.childLanes=c,null}function Es(e,t){return t=_s({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function xm(e,t,n){return Lr(t,e.child,null,n),e=Es(t,t.pendingProps),e.flags|=2,Bn(t),t.memoizedState=null,e}function Uv(e,t,n){var a=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ht){if(a.mode==="hidden")return e=Es(t,a),t.lanes=536870912,lo(null,e);if(Iu(t),(e=Ut)?(e=Eh(e,Jn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zl!==null?{id:pl,overflow:ml}:null,retryLane:536870912,hydrationErrors:null},n=ep(e),n.return=t,t.child=n,pn=t,Ut=null)):e=null,e===null)throw Jl(t);return t.lanes=536870912,null}return Es(t,a)}var f=e.memoizedState;if(f!==null){var v=f.dehydrated;if(Iu(t),c)if(t.flags&256)t.flags&=-257,t=xm(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(tn||na(e,t,n,!1),c=(n&e.childLanes)!==0,tn||c){if(a=zt,a!==null&&(v=Re(a,n),v!==0&&v!==f.retryLane))throw f.retryLane=v,jr(e,v),En(a,e,v),rc;Vs(),t=xm(e,t,n)}else e=f.treeContext,Ut=tl(v.nextSibling),pn=t,ht=!0,Kl=null,Jn=!1,e!==null&&lp(t,e),t=Es(t,a),t.flags|=4096;return t}return e=Cl(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ts(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function ac(e,t,n,a,c){return Or(t),n=Hu(e,t,n,a,void 0,c),a=Vu(),e!==null&&!tn?(Uu(e,t,c),_l(e,t,c)):(ht&&a&&bu(t),t.flags|=1,hn(e,t,n,c),t.child)}function vm(e,t,n,a,c,f){return Or(t),t.updateQueue=null,n=wp(t,a,n,c),bp(e),a=Vu(),e!==null&&!tn?(Uu(e,t,f),_l(e,t,f)):(ht&&a&&bu(t),t.flags|=1,hn(e,t,n,f),t.child)}function ym(e,t,n,a,c){if(Or(t),t.stateNode===null){var f=Kr,v=n.contextType;typeof v=="object"&&v!==null&&(f=mn(v)),f=new n(a,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=nc,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=a,f.state=t.memoizedState,f.refs={},_u(t),v=n.contextType,f.context=typeof v=="object"&&v!==null?mn(v):Kr,f.state=t.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(tc(t,n,v,a),f.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&nc.enqueueReplaceState(f,f.state,null),Ka(t,a,f,c),Za(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){f=t.stateNode;var C=t.memoizedProps,H=Rr(n,C);f.props=H;var Z=f.context,de=n.contextType;v=Kr,typeof de=="object"&&de!==null&&(v=mn(de));var he=n.getDerivedStateFromProps;de=typeof he=="function"||typeof f.getSnapshotBeforeUpdate=="function",C=t.pendingProps!==C,de||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(C||Z!==v)&&am(t,f,a,v),tr=!1;var te=t.memoizedState;f.state=te,Ka(t,a,f,c),Za(),Z=t.memoizedState,C||te!==Z||tr?(typeof he=="function"&&(tc(t,n,he,a),Z=t.memoizedState),(H=tr||rm(t,n,H,a,te,Z,v))?(de||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=Z),f.props=a,f.state=Z,f.context=v,a=H):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,Lu(e,t),v=t.memoizedProps,de=Rr(n,v),f.props=de,he=t.pendingProps,te=f.context,Z=n.contextType,H=Kr,typeof Z=="object"&&Z!==null&&(H=mn(Z)),C=n.getDerivedStateFromProps,(Z=typeof C=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==he||te!==H)&&am(t,f,a,H),tr=!1,te=t.memoizedState,f.state=te,Ka(t,a,f,c),Za();var ie=t.memoizedState;v!==he||te!==ie||tr||e!==null&&e.dependencies!==null&&ds(e.dependencies)?(typeof C=="function"&&(tc(t,n,C,a),ie=t.memoizedState),(de=tr||rm(t,n,de,a,te,ie,H)||e!==null&&e.dependencies!==null&&ds(e.dependencies))?(Z||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,ie,H),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,ie,H)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ie),f.props=a,f.state=ie,f.context=H,a=de):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),a=!1)}return f=a,Ts(e,t),a=(t.flags&128)!==0,f||a?(f=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&a?(t.child=Lr(t,e.child,null,c),t.child=Lr(t,null,n,c)):hn(e,t,n,c),t.memoizedState=f.state,e=t.child):e=_l(e,t,c),e}function bm(e,t,n,a){return kr(),t.flags|=256,hn(e,t,n,a),t.child}var oc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sc(e){return{baseLanes:e,cachePool:up()}}function ic(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Vn),e}function wm(e,t,n){var a=t.pendingProps,c=!1,f=(t.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Xt.current&2)!==0),v&&(c=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(ht){if(c?rr(t):ar(),(e=Ut)?(e=Eh(e,Jn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zl!==null?{id:pl,overflow:ml}:null,retryLane:536870912,hydrationErrors:null},n=ep(e),n.return=t,t.child=n,pn=t,Ut=null)):e=null,e===null)throw Jl(t);return Wc(e)?t.lanes=32:t.lanes=536870912,null}var C=a.children;return a=a.fallback,c?(ar(),c=t.mode,C=_s({mode:"hidden",children:C},c),a=Cr(a,c,n,null),C.return=t,a.return=t,C.sibling=a,t.child=C,a=t.child,a.memoizedState=sc(n),a.childLanes=ic(e,v,n),t.memoizedState=oc,lo(null,a)):(rr(t),uc(t,C))}var H=e.memoizedState;if(H!==null&&(C=H.dehydrated,C!==null)){if(f)t.flags&256?(rr(t),t.flags&=-257,t=cc(e,t,n)):t.memoizedState!==null?(ar(),t.child=e.child,t.flags|=128,t=null):(ar(),C=a.fallback,c=t.mode,a=_s({mode:"visible",children:a.children},c),C=Cr(C,c,n,null),C.flags|=2,a.return=t,C.return=t,a.sibling=C,t.child=a,Lr(t,e.child,null,n),a=t.child,a.memoizedState=sc(n),a.childLanes=ic(e,v,n),t.memoizedState=oc,t=lo(null,a));else if(rr(t),Wc(C)){if(v=C.nextSibling&&C.nextSibling.dataset,v)var Z=v.dgst;v=Z,a=Error(s(419)),a.stack="",a.digest=v,Fa({value:a,source:null,stack:null}),t=cc(e,t,n)}else if(tn||na(e,t,n,!1),v=(n&e.childLanes)!==0,tn||v){if(v=zt,v!==null&&(a=Re(v,n),a!==0&&a!==H.retryLane))throw H.retryLane=a,jr(e,a),En(v,e,a),rc;qc(C)||Vs(),t=cc(e,t,n)}else qc(C)?(t.flags|=192,t.child=e.child,t=null):(e=H.treeContext,Ut=tl(C.nextSibling),pn=t,ht=!0,Kl=null,Jn=!1,e!==null&&lp(t,e),t=uc(t,a.children),t.flags|=4096);return t}return c?(ar(),C=a.fallback,c=t.mode,H=e.child,Z=H.sibling,a=Cl(H,{mode:"hidden",children:a.children}),a.subtreeFlags=H.subtreeFlags&65011712,Z!==null?C=Cl(Z,C):(C=Cr(C,c,n,null),C.flags|=2),C.return=t,a.return=t,a.sibling=C,t.child=a,lo(null,a),a=t.child,C=e.child.memoizedState,C===null?C=sc(n):(c=C.cachePool,c!==null?(H=Jt._currentValue,c=c.parent!==H?{parent:H,pool:H}:c):c=up(),C={baseLanes:C.baseLanes|n,cachePool:c}),a.memoizedState=C,a.childLanes=ic(e,v,n),t.memoizedState=oc,lo(e.child,a)):(rr(t),n=e.child,e=n.sibling,n=Cl(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=n,t.memoizedState=null,n)}function uc(e,t){return t=_s({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function _s(e,t){return e=zn(22,e,null,t),e.lanes=0,e}function cc(e,t,n){return Lr(t,e.child,null,n),e=uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Sm(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Cu(e.return,t,n)}function dc(e,t,n,a,c,f){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:c,treeForkCount:f}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=n,v.tailMode=c,v.treeForkCount=f)}function Nm(e,t,n){var a=t.pendingProps,c=a.revealOrder,f=a.tail;a=a.children;var v=Xt.current,C=(v&2)!==0;if(C?(v=v&1|2,t.flags|=128):v&=1,O(Xt,v),hn(e,t,a,n),a=ht?Wa:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sm(e,n,t);else if(e.tag===19)Sm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&ys(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),dc(t,!1,c,n,f,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&ys(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}dc(t,!0,n,null,f,a);break;case"together":dc(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function _l(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ir|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(na(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=Cl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Cl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function fc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ds(e)))}function Gv(e,t,n){switch(t.tag){case 3:re(t,t.stateNode.containerInfo),er(t,Jt,e.memoizedState.cache),kr();break;case 27:case 5:_e(t);break;case 4:re(t,t.stateNode.containerInfo);break;case 10:er(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Iu(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(rr(t),t.flags|=128,null):(n&t.child.childLanes)!==0?wm(e,t,n):(rr(t),e=_l(e,t,n),e!==null?e.sibling:null);rr(t);break;case 19:var c=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(na(e,t,n,!1),a=(n&t.childLanes)!==0),c){if(a)return Nm(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),O(Xt,Xt.current),a)break;return null;case 22:return t.lanes=0,hm(e,t,n,t.pendingProps);case 24:er(t,Jt,e.memoizedState.cache)}return _l(e,t,n)}function jm(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)tn=!0;else{if(!fc(e,n)&&(t.flags&128)===0)return tn=!1,Gv(e,t,n);tn=(e.flags&131072)!==0}else tn=!1,ht&&(t.flags&1048576)!==0&&np(t,Wa,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=Tr(t.elementType),t.type=e,typeof e=="function")xu(e)?(a=Rr(e,a),t.tag=1,t=ym(null,t,e,a,n)):(t.tag=0,t=ac(null,t,e,a,n));else{if(e!=null){var c=e.$$typeof;if(c===L){t.tag=11,t=fm(null,t,e,a,n);break e}else if(c===A){t.tag=14,t=pm(null,t,e,a,n);break e}}throw t=ae(e)||e,Error(s(306,t,""))}}return t;case 0:return ac(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,c=Rr(a,t.pendingProps),ym(e,t,a,c,n);case 3:e:{if(re(t,t.stateNode.containerInfo),e===null)throw Error(s(387));a=t.pendingProps;var f=t.memoizedState;c=f.element,Lu(e,t),Ka(t,a,null,n);var v=t.memoizedState;if(a=v.cache,er(t,Jt,a),a!==f.cache&&ku(t,[Jt],n,!0),Za(),a=v.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=bm(e,t,a,n);break e}else if(a!==c){c=Pn(Error(s(424)),t),Fa(c),t=bm(e,t,a,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ut=tl(e.firstChild),pn=t,ht=!0,Kl=null,Jn=!0,n=hp(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kr(),a===c){t=_l(e,t,n);break e}hn(e,t,a,n)}t=t.child}return t;case 26:return Ts(e,t),e===null?(n=Dh(t.type,null,t.pendingProps,null))?t.memoizedState=n:ht||(n=t.type,e=t.pendingProps,a=Ys(pe.current).createElement(n),a[yt]=t,a[Dt]=e,gn(a,n,e),Kt(a),t.stateNode=a):t.memoizedState=Dh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return _e(t),e===null&&ht&&(a=t.stateNode=Lh(t.type,t.pendingProps,pe.current),pn=t,Jn=!0,c=Ut,pr(t.type)?(Fc=c,Ut=tl(a.firstChild)):Ut=c),hn(e,t,t.pendingProps.children,n),Ts(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ht&&((c=a=Ut)&&(a=vy(a,t.type,t.pendingProps,Jn),a!==null?(t.stateNode=a,pn=t,Ut=tl(a.firstChild),Jn=!1,c=!0):c=!1),c||Jl(t)),_e(t),c=t.type,f=t.pendingProps,v=e!==null?e.memoizedProps:null,a=f.children,Vc(c,f)?a=null:v!==null&&Vc(c,v)&&(t.flags|=32),t.memoizedState!==null&&(c=Hu(e,t,Av,null,null,n),yo._currentValue=c),Ts(e,t),hn(e,t,a,n),t.child;case 6:return e===null&&ht&&((e=n=Ut)&&(n=yy(n,t.pendingProps,Jn),n!==null?(t.stateNode=n,pn=t,Ut=null,e=!0):e=!1),e||Jl(t)),null;case 13:return wm(e,t,n);case 4:return re(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Lr(t,null,a,n):hn(e,t,a,n),t.child;case 11:return fm(e,t,t.type,t.pendingProps,n);case 7:return hn(e,t,t.pendingProps,n),t.child;case 8:return hn(e,t,t.pendingProps.children,n),t.child;case 12:return hn(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,er(t,t.type,a.value),hn(e,t,a.children,n),t.child;case 9:return c=t.type._context,a=t.pendingProps.children,Or(t),c=mn(c),a=a(c),t.flags|=1,hn(e,t,a,n),t.child;case 14:return pm(e,t,t.type,t.pendingProps,n);case 15:return mm(e,t,t.type,t.pendingProps,n);case 19:return Nm(e,t,n);case 31:return Uv(e,t,n);case 22:return hm(e,t,n,t.pendingProps);case 24:return Or(t),a=mn(Jt),e===null?(c=Eu(),c===null&&(c=zt,f=Mu(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=n),c=f),t.memoizedState={parent:a,cache:c},_u(t),er(t,Jt,c)):((e.lanes&n)!==0&&(Lu(e,t),Ka(t,null,null,n),Za()),c=e.memoizedState,f=t.memoizedState,c.parent!==a?(c={parent:a,cache:a},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),er(t,Jt,a)):(a=f.cache,er(t,Jt,a),a!==c.cache&&ku(t,[Jt],n,!0))),hn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Ll(e){e.flags|=4}function pc(e,t,n,a,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Zm())e.flags|=8192;else throw _r=hs,Tu}else e.flags&=-16777217}function Cm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Vh(t))if(Zm())e.flags|=8192;else throw _r=hs,Tu}function Ls(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?V():536870912,e.lanes|=t,ma|=t)}function ro(e,t){if(!ht)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags&65011712,a|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function qv(e,t,n){var a=t.pendingProps;switch(wu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(t),null;case 1:return Gt(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Ol(Jt),ye(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ta(t)?Ll(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Nu())),Gt(t),null;case 26:var c=t.type,f=t.memoizedState;return e===null?(Ll(t),f!==null?(Gt(t),Cm(t,f)):(Gt(t),pc(t,c,null,a,n))):f?f!==e.memoizedState?(Ll(t),Gt(t),Cm(t,f)):(Gt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&Ll(t),Gt(t),pc(t,c,e,a,n)),null;case 27:if($e(t),n=pe.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ll(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Gt(t),null}e=F.current,ta(t)?rp(t):(e=Lh(c,a,n),t.stateNode=e,Ll(t))}return Gt(t),null;case 5:if($e(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ll(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Gt(t),null}if(f=F.current,ta(t))rp(t);else{var v=Ys(pe.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof a.is=="string"?v.createElement("select",{is:a.is}):v.createElement("select"),a.multiple?f.multiple=!0:a.size&&(f.size=a.size);break;default:f=typeof a.is=="string"?v.createElement(c,{is:a.is}):v.createElement(c)}}f[yt]=t,f[Dt]=a;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=f;e:switch(gn(f,c,a),c){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ll(t)}}return Gt(t),pc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&Ll(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(e=pe.current,ta(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,c=pn,c!==null)switch(c.tag){case 27:case 5:a=c.memoizedProps}e[yt]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||wh(e.nodeValue,n)),e||Jl(t,!0)}else e=Ys(e).createTextNode(a),e[yt]=t,t.stateNode=e}return Gt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=ta(t),n!==null){if(e===null){if(!a)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[yt]=t}else kr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Gt(t),e=!1}else n=Nu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Bn(t),t):(Bn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Gt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=ta(t),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(s(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));c[yt]=t}else kr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Gt(t),c=!1}else c=Nu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Bn(t),t):(Bn(t),null)}return Bn(t),(t.flags&128)!==0?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,c=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(c=a.alternate.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Ls(t,t.updateQueue),Gt(t),null);case 4:return ye(),e===null&&Dc(t.stateNode.containerInfo),Gt(t),null;case 10:return Ol(t.type),Gt(t),null;case 19:if(I(Xt),a=t.memoizedState,a===null)return Gt(t),null;if(c=(t.flags&128)!==0,f=a.rendering,f===null)if(c)ro(a,!1);else{if($t!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=ys(e),f!==null){for(t.flags|=128,ro(a,!1),e=f.updateQueue,t.updateQueue=e,Ls(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Jf(n,e),n=n.sibling;return O(Xt,Xt.current&1|2),ht&&kl(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&Ze()>Is&&(t.flags|=128,c=!0,ro(a,!1),t.lanes=4194304)}else{if(!c)if(e=ys(f),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Ls(t,e),ro(a,!0),a.tail===null&&a.tailMode==="hidden"&&!f.alternate&&!ht)return Gt(t),null}else 2*Ze()-a.renderingStartTime>Is&&n!==536870912&&(t.flags|=128,c=!0,ro(a,!1),t.lanes=4194304);a.isBackwards?(f.sibling=t.child,t.child=f):(e=a.last,e!==null?e.sibling=f:t.child=f,a.last=f)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ze(),e.sibling=null,n=Xt.current,O(Xt,c?n&1|2:n&1),ht&&kl(t,a.treeForkCount),e):(Gt(t),null);case 22:case 23:return Bn(t),zu(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(Gt(t),t.subtreeFlags&6&&(t.flags|=8192)):Gt(t),n=t.updateQueue,n!==null&&Ls(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&I(Er),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ol(Jt),Gt(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Wv(e,t){switch(wu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ol(Jt),ye(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return $e(t),null;case 31:if(t.memoizedState!==null){if(Bn(t),t.alternate===null)throw Error(s(340));kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Bn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(Xt),null;case 4:return ye(),null;case 10:return Ol(t.type),null;case 22:case 23:return Bn(t),zu(),e!==null&&I(Er),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ol(Jt),null;case 25:return null;default:return null}}function km(e,t){switch(wu(t),t.tag){case 3:Ol(Jt),ye();break;case 26:case 27:case 5:$e(t);break;case 4:ye();break;case 31:t.memoizedState!==null&&Bn(t);break;case 13:Bn(t);break;case 19:I(Xt);break;case 10:Ol(t.type);break;case 22:case 23:Bn(t),zu(),e!==null&&I(Er);break;case 24:Ol(Jt)}}function ao(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var c=a.next;n=c;do{if((n.tag&e)===e){a=void 0;var f=n.create,v=n.inst;a=f(),v.destroy=a}n=n.next}while(n!==c)}}catch(C){_t(t,t.return,C)}}function or(e,t,n){try{var a=t.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&e)===e){var v=a.inst,C=v.destroy;if(C!==void 0){v.destroy=void 0,c=t;var H=n,Z=C;try{Z()}catch(de){_t(c,H,de)}}}a=a.next}while(a!==f)}}catch(de){_t(t,t.return,de)}}function Mm(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{xp(t,n)}catch(a){_t(e,e.return,a)}}}function Om(e,t,n){n.props=Rr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){_t(e,t,a)}}function oo(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(c){_t(e,t,c)}}function hl(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(c){_t(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(c){_t(e,t,c)}else n.current=null}function Em(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(c){_t(e,e.return,c)}}function mc(e,t,n){try{var a=e.stateNode;fy(a,e.type,n,t),a[Dt]=t}catch(c){_t(e,e.return,c)}}function Tm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&pr(e.type)||e.tag===4}function hc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&pr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gc(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Nl));else if(a!==4&&(a===27&&pr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(gc(e,t,n),e=e.sibling;e!==null;)gc(e,t,n),e=e.sibling}function As(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&pr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(As(e,t,n),e=e.sibling;e!==null;)As(e,t,n),e=e.sibling}function _m(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);gn(t,a,n),t[yt]=e,t[Dt]=n}catch(f){_t(e,e.return,f)}}var Al=!1,nn=!1,xc=!1,Lm=typeof WeakSet=="function"?WeakSet:Set,dn=null;function Fv(e,t){if(e=e.containerInfo,Bc=ei,e=Wf(e),cu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var v=0,C=-1,H=-1,Z=0,de=0,he=e,te=null;t:for(;;){for(var ie;he!==n||c!==0&&he.nodeType!==3||(C=v+c),he!==f||a!==0&&he.nodeType!==3||(H=v+a),he.nodeType===3&&(v+=he.nodeValue.length),(ie=he.firstChild)!==null;)te=he,he=ie;for(;;){if(he===e)break t;if(te===n&&++Z===c&&(C=v),te===f&&++de===a&&(H=v),(ie=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=ie}n=C===-1||H===-1?null:{start:C,end:H}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hc={focusedElem:e,selectionRange:n},ei=!1,dn=t;dn!==null;)if(t=dn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,dn=e;else for(;dn!==null;){switch(t=dn,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)c=e[n],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,n=t,c=f.memoizedProps,f=f.memoizedState,a=n.stateNode;try{var Te=Rr(n.type,c);e=a.getSnapshotBeforeUpdate(Te,f),a.__reactInternalSnapshotBeforeUpdate=e}catch(qe){_t(n,n.return,qe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Gc(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Gc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,dn=e;break}dn=t.return}}function Am(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Dl(e,n),a&4&&ao(5,n);break;case 1:if(Dl(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(v){_t(n,n.return,v)}else{var c=Rr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){_t(n,n.return,v)}}a&64&&Mm(n),a&512&&oo(n,n.return);break;case 3:if(Dl(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{xp(e,t)}catch(v){_t(n,n.return,v)}}break;case 27:t===null&&a&4&&_m(n);case 26:case 5:Dl(e,n),t===null&&a&4&&Em(n),a&512&&oo(n,n.return);break;case 12:Dl(e,n);break;case 31:Dl(e,n),a&4&&zm(e,n);break;case 13:Dl(e,n),a&4&&Im(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=ey.bind(null,n),by(e,n))));break;case 22:if(a=n.memoizedState!==null||Al,!a){t=t!==null&&t.memoizedState!==null||nn,c=Al;var f=nn;Al=a,(nn=t)&&!f?zl(e,n,(n.subtreeFlags&8772)!==0):Dl(e,n),Al=c,nn=f}break;case 30:break;default:Dl(e,n)}}function Rm(e){var t=e.alternate;t!==null&&(e.alternate=null,Rm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&cn(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Wt=null,Cn=!1;function Rl(e,t,n){for(n=n.child;n!==null;)Dm(e,t,n),n=n.sibling}function Dm(e,t,n){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(et,n)}catch{}switch(n.tag){case 26:nn||hl(n,t),Rl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:nn||hl(n,t);var a=Wt,c=Cn;pr(n.type)&&(Wt=n.stateNode,Cn=!1),Rl(e,t,n),go(n.stateNode),Wt=a,Cn=c;break;case 5:nn||hl(n,t);case 6:if(a=Wt,c=Cn,Wt=null,Rl(e,t,n),Wt=a,Cn=c,Wt!==null)if(Cn)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(n.stateNode)}catch(f){_t(n,t,f)}else try{Wt.removeChild(n.stateNode)}catch(f){_t(n,t,f)}break;case 18:Wt!==null&&(Cn?(e=Wt,Mh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Sa(e)):Mh(Wt,n.stateNode));break;case 4:a=Wt,c=Cn,Wt=n.stateNode.containerInfo,Cn=!0,Rl(e,t,n),Wt=a,Cn=c;break;case 0:case 11:case 14:case 15:or(2,n,t),nn||or(4,n,t),Rl(e,t,n);break;case 1:nn||(hl(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&Om(n,t,a)),Rl(e,t,n);break;case 21:Rl(e,t,n);break;case 22:nn=(a=nn)||n.memoizedState!==null,Rl(e,t,n),nn=a;break;default:Rl(e,t,n)}}function zm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Sa(e)}catch(n){_t(t,t.return,n)}}}function Im(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Sa(e)}catch(n){_t(t,t.return,n)}}function $v(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Lm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Lm),t;default:throw Error(s(435,e.tag))}}function Rs(e,t){var n=$v(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var c=ty.bind(null,e,a);a.then(c,c)}})}function kn(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var c=n[a],f=e,v=t,C=v;e:for(;C!==null;){switch(C.tag){case 27:if(pr(C.type)){Wt=C.stateNode,Cn=!1;break e}break;case 5:Wt=C.stateNode,Cn=!1;break e;case 3:case 4:Wt=C.stateNode.containerInfo,Cn=!0;break e}C=C.return}if(Wt===null)throw Error(s(160));Dm(f,v,c),Wt=null,Cn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Bm(t,e),t=t.sibling}var il=null;function Bm(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:kn(t,e),Mn(e),a&4&&(or(3,e,e.return),ao(3,e),or(5,e,e.return));break;case 1:kn(t,e),Mn(e),a&512&&(nn||n===null||hl(n,n.return)),a&64&&Al&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var c=il;if(kn(t,e),Mn(e),a&512&&(nn||n===null||hl(n,n.return)),a&4){var f=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,c=c.ownerDocument||c;t:switch(a){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Ht]||f[yt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(a),c.head.insertBefore(f,c.querySelector("head > title"))),gn(f,a,n),f[yt]=e,Kt(f),a=f;break e;case"link":var v=Bh("link","href",c).get(a+(n.href||""));if(v){for(var C=0;C<v.length;C++)if(f=v[C],f.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&f.getAttribute("rel")===(n.rel==null?null:n.rel)&&f.getAttribute("title")===(n.title==null?null:n.title)&&f.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){v.splice(C,1);break t}}f=c.createElement(a),gn(f,a,n),c.head.appendChild(f);break;case"meta":if(v=Bh("meta","content",c).get(a+(n.content||""))){for(C=0;C<v.length;C++)if(f=v[C],f.getAttribute("content")===(n.content==null?null:""+n.content)&&f.getAttribute("name")===(n.name==null?null:n.name)&&f.getAttribute("property")===(n.property==null?null:n.property)&&f.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&f.getAttribute("charset")===(n.charSet==null?null:n.charSet)){v.splice(C,1);break t}}f=c.createElement(a),gn(f,a,n),c.head.appendChild(f);break;default:throw Error(s(468,a))}f[yt]=e,Kt(f),a=f}e.stateNode=a}else Hh(c,e.type,e.stateNode);else e.stateNode=Ih(c,a,e.memoizedProps);else f!==a?(f===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):f.count--,a===null?Hh(c,e.type,e.stateNode):Ih(c,a,e.memoizedProps)):a===null&&e.stateNode!==null&&mc(e,e.memoizedProps,n.memoizedProps)}break;case 27:kn(t,e),Mn(e),a&512&&(nn||n===null||hl(n,n.return)),n!==null&&a&4&&mc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(kn(t,e),Mn(e),a&512&&(nn||n===null||hl(n,n.return)),e.flags&32){c=e.stateNode;try{Fr(c,"")}catch(Te){_t(e,e.return,Te)}}a&4&&e.stateNode!=null&&(c=e.memoizedProps,mc(e,c,n!==null?n.memoizedProps:c)),a&1024&&(xc=!0);break;case 6:if(kn(t,e),Mn(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(Te){_t(e,e.return,Te)}}break;case 3:if(Ps=null,c=il,il=Qs(t.containerInfo),kn(t,e),il=c,Mn(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Sa(t.containerInfo)}catch(Te){_t(e,e.return,Te)}xc&&(xc=!1,Hm(e));break;case 4:a=il,il=Qs(e.stateNode.containerInfo),kn(t,e),Mn(e),il=a;break;case 12:kn(t,e),Mn(e);break;case 31:kn(t,e),Mn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Rs(e,a)));break;case 13:kn(t,e),Mn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(zs=Ze()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Rs(e,a)));break;case 22:c=e.memoizedState!==null;var H=n!==null&&n.memoizedState!==null,Z=Al,de=nn;if(Al=Z||c,nn=de||H,kn(t,e),nn=de,Al=Z,Mn(e),a&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(n===null||H||Al||nn||Dr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){H=n=t;try{if(f=H.stateNode,c)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=H.stateNode;var he=H.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;C.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Te){_t(H,H.return,Te)}}}else if(t.tag===6){if(n===null){H=t;try{H.stateNode.nodeValue=c?"":H.memoizedProps}catch(Te){_t(H,H.return,Te)}}}else if(t.tag===18){if(n===null){H=t;try{var ie=H.stateNode;c?Oh(ie,!0):Oh(H.stateNode,!1)}catch(Te){_t(H,H.return,Te)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Rs(e,n))));break;case 19:kn(t,e),Mn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Rs(e,a)));break;case 30:break;case 21:break;default:kn(t,e),Mn(e)}}function Mn(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(Tm(a)){n=a;break}a=a.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var c=n.stateNode,f=hc(e);As(e,f,c);break;case 5:var v=n.stateNode;n.flags&32&&(Fr(v,""),n.flags&=-33);var C=hc(e);As(e,C,v);break;case 3:case 4:var H=n.stateNode.containerInfo,Z=hc(e);gc(e,Z,H);break;default:throw Error(s(161))}}catch(de){_t(e,e.return,de)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Hm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Hm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Dl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Am(e,t.alternate,t),t=t.sibling}function Dr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:or(4,t,t.return),Dr(t);break;case 1:hl(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Om(t,t.return,n),Dr(t);break;case 27:go(t.stateNode);case 26:case 5:hl(t,t.return),Dr(t);break;case 22:t.memoizedState===null&&Dr(t);break;case 30:Dr(t);break;default:Dr(t)}e=e.sibling}}function zl(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,c=e,f=t,v=f.flags;switch(f.tag){case 0:case 11:case 15:zl(c,f,n),ao(4,f);break;case 1:if(zl(c,f,n),a=f,c=a.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(Z){_t(a,a.return,Z)}if(a=f,c=a.updateQueue,c!==null){var C=a.stateNode;try{var H=c.shared.hiddenCallbacks;if(H!==null)for(c.shared.hiddenCallbacks=null,c=0;c<H.length;c++)gp(H[c],C)}catch(Z){_t(a,a.return,Z)}}n&&v&64&&Mm(f),oo(f,f.return);break;case 27:_m(f);case 26:case 5:zl(c,f,n),n&&a===null&&v&4&&Em(f),oo(f,f.return);break;case 12:zl(c,f,n);break;case 31:zl(c,f,n),n&&v&4&&zm(c,f);break;case 13:zl(c,f,n),n&&v&4&&Im(c,f);break;case 22:f.memoizedState===null&&zl(c,f,n),oo(f,f.return);break;case 30:break;default:zl(c,f,n)}t=t.sibling}}function vc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&$a(n))}function yc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$a(e))}function ul(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vm(e,t,n,a),t=t.sibling}function Vm(e,t,n,a){var c=t.flags;switch(t.tag){case 0:case 11:case 15:ul(e,t,n,a),c&2048&&ao(9,t);break;case 1:ul(e,t,n,a);break;case 3:ul(e,t,n,a),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$a(e)));break;case 12:if(c&2048){ul(e,t,n,a),e=t.stateNode;try{var f=t.memoizedProps,v=f.id,C=f.onPostCommit;typeof C=="function"&&C(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(H){_t(t,t.return,H)}}else ul(e,t,n,a);break;case 31:ul(e,t,n,a);break;case 13:ul(e,t,n,a);break;case 23:break;case 22:f=t.stateNode,v=t.alternate,t.memoizedState!==null?f._visibility&2?ul(e,t,n,a):so(e,t):f._visibility&2?ul(e,t,n,a):(f._visibility|=2,da(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),c&2048&&vc(v,t);break;case 24:ul(e,t,n,a),c&2048&&yc(t.alternate,t);break;default:ul(e,t,n,a)}}function da(e,t,n,a,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,v=t,C=n,H=a,Z=v.flags;switch(v.tag){case 0:case 11:case 15:da(f,v,C,H,c),ao(8,v);break;case 23:break;case 22:var de=v.stateNode;v.memoizedState!==null?de._visibility&2?da(f,v,C,H,c):so(f,v):(de._visibility|=2,da(f,v,C,H,c)),c&&Z&2048&&vc(v.alternate,v);break;case 24:da(f,v,C,H,c),c&&Z&2048&&yc(v.alternate,v);break;default:da(f,v,C,H,c)}t=t.sibling}}function so(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,c=a.flags;switch(a.tag){case 22:so(n,a),c&2048&&vc(a.alternate,a);break;case 24:so(n,a),c&2048&&yc(a.alternate,a);break;default:so(n,a)}t=t.sibling}}var io=8192;function fa(e,t,n){if(e.subtreeFlags&io)for(e=e.child;e!==null;)Um(e,t,n),e=e.sibling}function Um(e,t,n){switch(e.tag){case 26:fa(e,t,n),e.flags&io&&e.memoizedState!==null&&Ly(n,il,e.memoizedState,e.memoizedProps);break;case 5:fa(e,t,n);break;case 3:case 4:var a=il;il=Qs(e.stateNode.containerInfo),fa(e,t,n),il=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=io,io=16777216,fa(e,t,n),io=a):fa(e,t,n));break;default:fa(e,t,n)}}function Gm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function uo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];dn=a,Wm(a,e)}Gm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)qm(e),e=e.sibling}function qm(e){switch(e.tag){case 0:case 11:case 15:uo(e),e.flags&2048&&or(9,e,e.return);break;case 3:uo(e);break;case 12:uo(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ds(e)):uo(e);break;default:uo(e)}}function Ds(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];dn=a,Wm(a,e)}Gm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:or(8,t,t.return),Ds(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ds(t));break;default:Ds(t)}e=e.sibling}}function Wm(e,t){for(;dn!==null;){var n=dn;switch(n.tag){case 0:case 11:case 15:or(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:$a(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,dn=a;else e:for(n=e;dn!==null;){a=dn;var c=a.sibling,f=a.return;if(Rm(a),a===n){dn=null;break e}if(c!==null){c.return=f,dn=c;break e}dn=f}}}var Yv={getCacheForType:function(e){var t=mn(Jt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return mn(Jt).controller.signal}},Qv=typeof WeakMap=="function"?WeakMap:Map,Ct=0,zt=null,st=null,ct=0,Tt=0,Hn=null,sr=!1,pa=!1,bc=!1,Il=0,$t=0,ir=0,zr=0,wc=0,Vn=0,ma=0,co=null,On=null,Sc=!1,zs=0,Fm=0,Is=1/0,Bs=null,ur=null,un=0,cr=null,ha=null,Bl=0,Nc=0,jc=null,$m=null,fo=0,Cc=null;function Un(){return(Ct&2)!==0&&ct!==0?ct&-ct:D.T!==null?_c():gt()}function Ym(){if(Vn===0)if((ct&536870912)===0||ht){var e=rn;rn<<=1,(rn&3932160)===0&&(rn=262144),Vn=e}else Vn=536870912;return e=In.current,e!==null&&(e.flags|=32),Vn}function En(e,t,n){(e===zt&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)&&(ga(e,0),dr(e,ct,Vn,!1)),ue(e,n),((Ct&2)===0||e!==zt)&&(e===zt&&((Ct&2)===0&&(zr|=n),$t===4&&dr(e,ct,Vn,!1)),gl(e))}function Qm(e,t,n){if((Ct&6)!==0)throw Error(s(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Me(e,t),c=a?Zv(e,t):Mc(e,t,!0),f=a;do{if(c===0){pa&&!a&&dr(e,t,0,!1);break}else{if(n=e.current.alternate,f&&!Xv(n)){c=Mc(e,t,!1),f=!1;continue}if(c===2){if(f=t,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var C=e;c=co;var H=C.current.memoizedState.isDehydrated;if(H&&(ga(C,v).flags|=256),v=Mc(C,v,!1),v!==2){if(bc&&!H){C.errorRecoveryDisabledLanes|=f,zr|=f,c=4;break e}f=On,On=c,f!==null&&(On===null?On=f:On.push.apply(On,f))}c=v}if(f=!1,c!==2)continue}}if(c===1){ga(e,0),dr(e,t,0,!0);break}e:{switch(a=e,f=c,f){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:dr(a,t,Vn,!sr);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(c=zs+300-Ze(),10<c)){if(dr(a,t,Vn,!sr),Rn(a,0,!0)!==0)break e;Bl=t,a.timeoutHandle=Ch(Xm.bind(null,a,n,On,Bs,Sc,t,Vn,zr,ma,sr,f,"Throttled",-0,0),c);break e}Xm(a,n,On,Bs,Sc,t,Vn,zr,ma,sr,f,null,-0,0)}}break}while(!0);gl(e)}function Xm(e,t,n,a,c,f,v,C,H,Z,de,he,te,ie){if(e.timeoutHandle=-1,he=t.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nl},Um(t,f,he);var Te=(f&62914560)===f?zs-Ze():(f&4194048)===f?Fm-Ze():0;if(Te=Ay(he,Te),Te!==null){Bl=f,e.cancelPendingCommit=Te(lh.bind(null,e,t,f,n,a,c,v,C,H,de,he,null,te,ie)),dr(e,f,v,!Z);return}}lh(e,t,f,n,a,c,v,C,H)}function Xv(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var c=n[a],f=c.getSnapshot;c=c.value;try{if(!Dn(f(),c))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dr(e,t,n,a){t&=~wc,t&=~zr,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var c=t;0<c;){var f=31-Vt(c),v=1<<f;a[f]=-1,c&=~v}n!==0&&Ie(e,n,t)}function Hs(){return(Ct&6)===0?(po(0),!1):!0}function kc(){if(st!==null){if(Tt===0)var e=st.return;else e=st,Ml=Mr=null,Gu(e),oa=null,Qa=0,e=st;for(;e!==null;)km(e.alternate,e),e=e.return;st=null}}function ga(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,hy(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Bl=0,kc(),zt=e,st=n=Cl(e.current,null),ct=t,Tt=0,Hn=null,sr=!1,pa=Me(e,t),bc=!1,ma=Vn=wc=zr=ir=$t=0,On=co=null,Sc=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var c=31-Vt(a),f=1<<c;t|=e[c],a&=~f}return Il=t,os(),n}function Pm(e,t){nt=null,D.H=no,t===aa||t===ms?(t=fp(),Tt=3):t===Tu?(t=fp(),Tt=4):Tt=t===rc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Hn=t,st===null&&($t=1,Os(e,Pn(t,e.current)))}function Zm(){var e=In.current;return e===null?!0:(ct&4194048)===ct?el===null:(ct&62914560)===ct||(ct&536870912)!==0?e===el:!1}function Km(){var e=D.H;return D.H=no,e===null?no:e}function Jm(){var e=D.A;return D.A=Yv,e}function Vs(){$t=4,sr||(ct&4194048)!==ct&&In.current!==null||(pa=!0),(ir&134217727)===0&&(zr&134217727)===0||zt===null||dr(zt,ct,Vn,!1)}function Mc(e,t,n){var a=Ct;Ct|=2;var c=Km(),f=Jm();(zt!==e||ct!==t)&&(Bs=null,ga(e,t)),t=!1;var v=$t;e:do try{if(Tt!==0&&st!==null){var C=st,H=Hn;switch(Tt){case 8:kc(),v=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(t=!0);var Z=Tt;if(Tt=0,Hn=null,xa(e,C,H,Z),n&&pa){v=0;break e}break;default:Z=Tt,Tt=0,Hn=null,xa(e,C,H,Z)}}Pv(),v=$t;break}catch(de){Pm(e,de)}while(!0);return t&&e.shellSuspendCounter++,Ml=Mr=null,Ct=a,D.H=c,D.A=f,st===null&&(zt=null,ct=0,os()),v}function Pv(){for(;st!==null;)eh(st)}function Zv(e,t){var n=Ct;Ct|=2;var a=Km(),c=Jm();zt!==e||ct!==t?(Bs=null,Is=Ze()+500,ga(e,t)):pa=Me(e,t);e:do try{if(Tt!==0&&st!==null){t=st;var f=Hn;t:switch(Tt){case 1:Tt=0,Hn=null,xa(e,t,f,1);break;case 2:case 9:if(cp(f)){Tt=0,Hn=null,th(t);break}t=function(){Tt!==2&&Tt!==9||zt!==e||(Tt=7),gl(e)},f.then(t,t);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:cp(f)?(Tt=0,Hn=null,th(t)):(Tt=0,Hn=null,xa(e,t,f,7));break;case 5:var v=null;switch(st.tag){case 26:v=st.memoizedState;case 5:case 27:var C=st;if(v?Vh(v):C.stateNode.complete){Tt=0,Hn=null;var H=C.sibling;if(H!==null)st=H;else{var Z=C.return;Z!==null?(st=Z,Us(Z)):st=null}break t}}Tt=0,Hn=null,xa(e,t,f,5);break;case 6:Tt=0,Hn=null,xa(e,t,f,6);break;case 8:kc(),$t=6;break e;default:throw Error(s(462))}}Kv();break}catch(de){Pm(e,de)}while(!0);return Ml=Mr=null,D.H=a,D.A=c,Ct=n,st!==null?0:(zt=null,ct=0,os(),$t)}function Kv(){for(;st!==null&&!ft();)eh(st)}function eh(e){var t=jm(e.alternate,e,Il);e.memoizedProps=e.pendingProps,t===null?Us(e):st=t}function th(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=vm(n,t,t.pendingProps,t.type,void 0,ct);break;case 11:t=vm(n,t,t.pendingProps,t.type.render,t.ref,ct);break;case 5:Gu(t);default:km(n,t),t=st=Jf(t,Il),t=jm(n,t,Il)}e.memoizedProps=e.pendingProps,t===null?Us(e):st=t}function xa(e,t,n,a){Ml=Mr=null,Gu(t),oa=null,Qa=0;var c=t.return;try{if(Vv(e,c,t,n,ct)){$t=1,Os(e,Pn(n,e.current)),st=null;return}}catch(f){if(c!==null)throw st=c,f;$t=1,Os(e,Pn(n,e.current)),st=null;return}t.flags&32768?(ht||a===1?e=!0:pa||(ct&536870912)!==0?e=!1:(sr=e=!0,(a===2||a===9||a===3||a===6)&&(a=In.current,a!==null&&a.tag===13&&(a.flags|=16384))),nh(t,e)):Us(t)}function Us(e){var t=e;do{if((t.flags&32768)!==0){nh(t,sr);return}e=t.return;var n=qv(t.alternate,t,Il);if(n!==null){st=n;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);$t===0&&($t=5)}function nh(e,t){do{var n=Wv(e.alternate,e);if(n!==null){n.flags&=32767,st=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){st=e;return}st=e=n}while(e!==null);$t=6,st=null}function lh(e,t,n,a,c,f,v,C,H){e.cancelPendingCommit=null;do Gs();while(un!==0);if((Ct&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(f=t.lanes|t.childLanes,f|=hu,ke(e,n,f,v,C,H),e===zt&&(st=zt=null,ct=0),ha=t,cr=e,Bl=n,Nc=f,jc=c,$m=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ny(We,function(){return ih(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=D.T,D.T=null,c=$.p,$.p=2,v=Ct,Ct|=4;try{Fv(e,t,n)}finally{Ct=v,$.p=c,D.T=a}}un=1,rh(),ah(),oh()}}function rh(){if(un===1){un=0;var e=cr,t=ha,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=D.T,D.T=null;var a=$.p;$.p=2;var c=Ct;Ct|=4;try{Bm(t,e);var f=Hc,v=Wf(e.containerInfo),C=f.focusedElem,H=f.selectionRange;if(v!==C&&C&&C.ownerDocument&&qf(C.ownerDocument.documentElement,C)){if(H!==null&&cu(C)){var Z=H.start,de=H.end;if(de===void 0&&(de=Z),"selectionStart"in C)C.selectionStart=Z,C.selectionEnd=Math.min(de,C.value.length);else{var he=C.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var ie=te.getSelection(),Te=C.textContent.length,qe=Math.min(H.start,Te),Rt=H.end===void 0?qe:Math.min(H.end,Te);!ie.extend&&qe>Rt&&(v=Rt,Rt=qe,qe=v);var Y=Gf(C,qe),q=Gf(C,Rt);if(Y&&q&&(ie.rangeCount!==1||ie.anchorNode!==Y.node||ie.anchorOffset!==Y.offset||ie.focusNode!==q.node||ie.focusOffset!==q.offset)){var P=he.createRange();P.setStart(Y.node,Y.offset),ie.removeAllRanges(),qe>Rt?(ie.addRange(P),ie.extend(q.node,q.offset)):(P.setEnd(q.node,q.offset),ie.addRange(P))}}}}for(he=[],ie=C;ie=ie.parentNode;)ie.nodeType===1&&he.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<he.length;C++){var me=he[C];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}ei=!!Bc,Hc=Bc=null}finally{Ct=c,$.p=a,D.T=n}}e.current=t,un=2}}function ah(){if(un===2){un=0;var e=cr,t=ha,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=D.T,D.T=null;var a=$.p;$.p=2;var c=Ct;Ct|=4;try{Am(e,t.alternate,t)}finally{Ct=c,$.p=a,D.T=n}}un=3}}function oh(){if(un===4||un===3){un=0,ut();var e=cr,t=ha,n=Bl,a=$m;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?un=5:(un=0,ha=cr=null,sh(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(ur=null),pt(n),t=t.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(et,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=D.T,c=$.p,$.p=2,D.T=null;try{for(var f=e.onRecoverableError,v=0;v<a.length;v++){var C=a[v];f(C.value,{componentStack:C.stack})}}finally{D.T=t,$.p=c}}(Bl&3)!==0&&Gs(),gl(e),c=e.pendingLanes,(n&261930)!==0&&(c&42)!==0?e===Cc?fo++:(fo=0,Cc=e):fo=0,po(0)}}function sh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,$a(t)))}function Gs(){return rh(),ah(),oh(),ih()}function ih(){if(un!==5)return!1;var e=cr,t=Nc;Nc=0;var n=pt(Bl),a=D.T,c=$.p;try{$.p=32>n?32:n,D.T=null,n=jc,jc=null;var f=cr,v=Bl;if(un=0,ha=cr=null,Bl=0,(Ct&6)!==0)throw Error(s(331));var C=Ct;if(Ct|=4,qm(f.current),Vm(f,f.current,v,n),Ct=C,po(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(et,f)}catch{}return!0}finally{$.p=c,D.T=a,sh(e,t)}}function uh(e,t,n){t=Pn(n,t),t=lc(e.stateNode,t,2),e=lr(e,t,2),e!==null&&(ue(e,2),gl(e))}function _t(e,t,n){if(e.tag===3)uh(e,e,n);else for(;t!==null;){if(t.tag===3){uh(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ur===null||!ur.has(a))){e=Pn(n,e),n=cm(2),a=lr(t,n,2),a!==null&&(dm(n,a,t,e),ue(a,2),gl(a));break}}t=t.return}}function Oc(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Qv;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(n)||(bc=!0,c.add(n),e=Jv.bind(null,e,t,n),t.then(e,e))}function Jv(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,zt===e&&(ct&n)===n&&($t===4||$t===3&&(ct&62914560)===ct&&300>Ze()-zs?(Ct&2)===0&&ga(e,0):wc|=n,ma===ct&&(ma=0)),gl(e)}function ch(e,t){t===0&&(t=V()),e=jr(e,t),e!==null&&(ue(e,t),gl(e))}function ey(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ch(e,n)}function ty(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(t),ch(e,n)}function ny(e,t){return Ee(e,t)}var qs=null,va=null,Ec=!1,Ws=!1,Tc=!1,fr=0;function gl(e){e!==va&&e.next===null&&(va===null?qs=va=e:va=va.next=e),Ws=!0,Ec||(Ec=!0,ry())}function po(e,t){if(!Tc&&Ws){Tc=!0;do for(var n=!1,a=qs;a!==null;){if(e!==0){var c=a.pendingLanes;if(c===0)var f=0;else{var v=a.suspendedLanes,C=a.pingedLanes;f=(1<<31-Vt(42|e)+1)-1,f&=c&~(v&~C),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(n=!0,mh(a,f))}else f=ct,f=Rn(a,a===zt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(f&3)===0||Me(a,f)||(n=!0,mh(a,f));a=a.next}while(n);Tc=!1}}function ly(){dh()}function dh(){Ws=Ec=!1;var e=0;fr!==0&&my()&&(e=fr);for(var t=Ze(),n=null,a=qs;a!==null;){var c=a.next,f=fh(a,t);f===0?(a.next=null,n===null?qs=c:n.next=c,c===null&&(va=n)):(n=a,(e!==0||(f&3)!==0)&&(Ws=!0)),a=c}un!==0&&un!==5||po(e),fr!==0&&(fr=0)}function fh(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Vt(f),C=1<<v,H=c[v];H===-1?((C&n)===0||(C&a)!==0)&&(c[v]=ze(C,t)):H<=t&&(e.expiredLanes|=C),f&=~C}if(t=zt,n=ct,n=Rn(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Ae(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Me(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&Ae(a),pt(n)){case 2:case 8:n=Xe;break;case 32:n=We;break;case 268435456:n=Ge;break;default:n=We}return a=ph.bind(null,e),n=Ee(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&Ae(a),e.callbackPriority=2,e.callbackNode=null,2}function ph(e,t){if(un!==0&&un!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Gs()&&e.callbackNode!==n)return null;var a=ct;return a=Rn(e,e===zt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Qm(e,a,t),fh(e,Ze()),e.callbackNode!=null&&e.callbackNode===n?ph.bind(null,e):null)}function mh(e,t){if(Gs())return null;Qm(e,t,!0)}function ry(){gy(function(){(Ct&6)!==0?Ee(Le,ly):dh()})}function _c(){if(fr===0){var e=la;e===0&&(e=An,An<<=1,(An&261888)===0&&(An=256)),fr=e}return fr}function hh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ko(""+e)}function gh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function ay(e,t,n,a,c){if(t==="submit"&&n&&n.stateNode===c){var f=hh((c[Dt]||null).action),v=a.submitter;v&&(t=(t=v[Dt]||null)?hh(t.formAction):v.getAttribute("formAction"),t!==null&&(f=t,v=null));var C=new ns("action","action",null,a,c);e.push({event:C,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(fr!==0){var H=v?gh(c,v):new FormData(c);Zu(n,{pending:!0,data:H,method:c.method,action:f},null,H)}}else typeof f=="function"&&(C.preventDefault(),H=v?gh(c,v):new FormData(c),Zu(n,{pending:!0,data:H,method:c.method,action:f},f,H))},currentTarget:c}]})}}for(var Lc=0;Lc<mu.length;Lc++){var Ac=mu[Lc],oy=Ac.toLowerCase(),sy=Ac[0].toUpperCase()+Ac.slice(1);sl(oy,"on"+sy)}sl(Yf,"onAnimationEnd"),sl(Qf,"onAnimationIteration"),sl(Xf,"onAnimationStart"),sl("dblclick","onDoubleClick"),sl("focusin","onFocus"),sl("focusout","onBlur"),sl(Nv,"onTransitionRun"),sl(jv,"onTransitionStart"),sl(Cv,"onTransitionCancel"),sl(Pf,"onTransitionEnd"),Xl("onMouseEnter",["mouseout","mouseover"]),Xl("onMouseLeave",["mouseout","mouseover"]),Xl("onPointerEnter",["pointerout","pointerover"]),Xl("onPointerLeave",["pointerout","pointerover"]),wl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wl("onBeforeInput",["compositionend","keypress","textInput","paste"]),wl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mo));function xh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var v=a.length-1;0<=v;v--){var C=a[v],H=C.instance,Z=C.currentTarget;if(C=C.listener,H!==f&&c.isPropagationStopped())break e;f=C,c.currentTarget=Z;try{f(c)}catch(de){as(de)}c.currentTarget=null,f=H}else for(v=0;v<a.length;v++){if(C=a[v],H=C.instance,Z=C.currentTarget,C=C.listener,H!==f&&c.isPropagationStopped())break e;f=C,c.currentTarget=Z;try{f(c)}catch(de){as(de)}c.currentTarget=null,f=H}}}}function it(e,t){var n=t[Nn];n===void 0&&(n=t[Nn]=new Set);var a=e+"__bubble";n.has(a)||(vh(t,e,2,!1),n.add(a))}function Rc(e,t,n){var a=0;t&&(a|=4),vh(n,e,a,t)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function Dc(e){if(!e[Fs]){e[Fs]=!0,Fo.forEach(function(n){n!=="selectionchange"&&(iy.has(n)||Rc(n,!1,e),Rc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fs]||(t[Fs]=!0,Rc("selectionchange",!1,t))}}function vh(e,t,n,a){switch(Yh(t)){case 2:var c=zy;break;case 8:c=Iy;break;default:c=Pc}n=c.bind(null,t,n,e),c=void 0,!tu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function zc(e,t,n,a,c){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var v=a.tag;if(v===3||v===4){var C=a.stateNode.containerInfo;if(C===c)break;if(v===4)for(v=a.return;v!==null;){var H=v.tag;if((H===3||H===4)&&v.stateNode.containerInfo===c)return;v=v.return}for(;C!==null;){if(v=fn(C),v===null)return;if(H=v.tag,H===5||H===6||H===26||H===27){a=f=v;continue e}C=C.parentNode}}a=a.return}Nf(function(){var Z=f,de=Ji(n),he=[];e:{var te=Zf.get(e);if(te!==void 0){var ie=ns,Te=e;switch(e){case"keypress":if(es(n)===0)break e;case"keydown":case"keyup":ie=tv;break;case"focusin":Te="focus",ie=au;break;case"focusout":Te="blur",ie=au;break;case"beforeblur":case"afterblur":ie=au;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=qx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=rv;break;case Yf:case Qf:case Xf:ie=$x;break;case Pf:ie=ov;break;case"scroll":case"scrollend":ie=Ux;break;case"wheel":ie=iv;break;case"copy":case"cut":case"paste":ie=Qx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Of;break;case"toggle":case"beforetoggle":ie=cv}var qe=(t&4)!==0,Rt=!qe&&(e==="scroll"||e==="scrollend"),Y=qe?te!==null?te+"Capture":null:te;qe=[];for(var q=Z,P;q!==null;){var me=q;if(P=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||P===null||Y===null||(me=Da(q,Y),me!=null&&qe.push(ho(q,me,P))),Rt)break;q=q.return}0<qe.length&&(te=new ie(te,Te,null,n,de),he.push({event:te,listeners:qe}))}}if((t&7)===0){e:{if(te=e==="mouseover"||e==="pointerover",ie=e==="mouseout"||e==="pointerout",te&&n!==Ki&&(Te=n.relatedTarget||n.fromElement)&&(fn(Te)||Te[qt]))break e;if((ie||te)&&(te=de.window===de?de:(te=de.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(Te=n.relatedTarget||n.toElement,ie=Z,Te=Te?fn(Te):null,Te!==null&&(Rt=d(Te),qe=Te.tag,Te!==Rt||qe!==5&&qe!==27&&qe!==6)&&(Te=null)):(ie=null,Te=Z),ie!==Te)){if(qe=kf,me="onMouseLeave",Y="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(qe=Of,me="onPointerLeave",Y="onPointerEnter",q="pointer"),Rt=ie==null?te:Ql(ie),P=Te==null?te:Ql(Te),te=new qe(me,q+"leave",ie,n,de),te.target=Rt,te.relatedTarget=P,me=null,fn(de)===Z&&(qe=new qe(Y,q+"enter",Te,n,de),qe.target=P,qe.relatedTarget=Rt,me=qe),Rt=me,ie&&Te)t:{for(qe=uy,Y=ie,q=Te,P=0,me=Y;me;me=qe(me))P++;me=0;for(var Be=q;Be;Be=qe(Be))me++;for(;0<P-me;)Y=qe(Y),P--;for(;0<me-P;)q=qe(q),me--;for(;P--;){if(Y===q||q!==null&&Y===q.alternate){qe=Y;break t}Y=qe(Y),q=qe(q)}qe=null}else qe=null;ie!==null&&yh(he,te,ie,qe,!1),Te!==null&&Rt!==null&&yh(he,Rt,Te,qe,!0)}}e:{if(te=Z?Ql(Z):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var bt=zf;else if(Rf(te))if(If)bt=bv;else{bt=vv;var De=xv}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&Zi(Z.elementType)&&(bt=zf):bt=yv;if(bt&&(bt=bt(e,Z))){Df(he,bt,n,de);break e}De&&De(e,te,Z),e==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&mt(te,"number",te.value)}switch(De=Z?Ql(Z):window,e){case"focusin":(Rf(De)||De.contentEditable==="true")&&(Xr=De,du=Z,qa=null);break;case"focusout":qa=du=Xr=null;break;case"mousedown":fu=!0;break;case"contextmenu":case"mouseup":case"dragend":fu=!1,Ff(he,n,de);break;case"selectionchange":if(Sv)break;case"keydown":case"keyup":Ff(he,n,de)}var at;if(su)e:{switch(e){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Qr?Lf(e,n)&&(dt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(dt="onCompositionStart");dt&&(Ef&&n.locale!=="ko"&&(Qr||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Qr&&(at=jf()):(Pl=de,nu="value"in Pl?Pl.value:Pl.textContent,Qr=!0)),De=$s(Z,dt),0<De.length&&(dt=new Mf(dt,e,null,n,de),he.push({event:dt,listeners:De}),at?dt.data=at:(at=Af(n),at!==null&&(dt.data=at)))),(at=fv?pv(e,n):mv(e,n))&&(dt=$s(Z,"onBeforeInput"),0<dt.length&&(De=new Mf("onBeforeInput","beforeinput",null,n,de),he.push({event:De,listeners:dt}),De.data=at)),ay(he,e,Z,n,de)}xh(he,t)})}function ho(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $s(e,t){for(var n=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=Da(e,n),c!=null&&a.unshift(ho(e,c,f)),c=Da(e,t),c!=null&&a.push(ho(e,c,f))),e.tag===3)return a;e=e.return}return[]}function uy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function yh(e,t,n,a,c){for(var f=t._reactName,v=[];n!==null&&n!==a;){var C=n,H=C.alternate,Z=C.stateNode;if(C=C.tag,H!==null&&H===a)break;C!==5&&C!==26&&C!==27||Z===null||(H=Z,c?(Z=Da(n,f),Z!=null&&v.unshift(ho(n,Z,H))):c||(Z=Da(n,f),Z!=null&&v.push(ho(n,Z,H)))),n=n.return}v.length!==0&&e.push({event:t,listeners:v})}var cy=/\r\n?/g,dy=/\u0000|\uFFFD/g;function bh(e){return(typeof e=="string"?e:""+e).replace(cy,`
`).replace(dy,"")}function wh(e,t){return t=bh(t),bh(e)===t}function At(e,t,n,a,c,f){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Fr(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Fr(e,""+a);break;case"className":qr(e,"class",a);break;case"tabIndex":qr(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":qr(e,n,a);break;case"style":wf(e,a,f);break;case"data":if(t!=="object"){qr(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Ko(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(n==="formAction"?(t!=="input"&&At(e,t,"name",c.name,c,null),At(e,t,"formEncType",c.formEncType,c,null),At(e,t,"formMethod",c.formMethod,c,null),At(e,t,"formTarget",c.formTarget,c,null)):(At(e,t,"encType",c.encType,c,null),At(e,t,"method",c.method,c,null),At(e,t,"target",c.target,c,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Ko(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Nl);break;case"onScroll":a!=null&&it("scroll",e);break;case"onScrollEnd":a!=null&&it("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=Ko(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":it("beforetoggle",e),it("toggle",e),Gr(e,"popover",a);break;case"xlinkActuate":Qn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Qn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Qn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Qn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Qn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Qn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Gr(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Hx.get(n)||n,Gr(e,n,a))}}function Ic(e,t,n,a,c,f){switch(n){case"style":wf(e,a,f);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"children":typeof a=="string"?Fr(e,a):(typeof a=="number"||typeof a=="bigint")&&Fr(e,""+a);break;case"onScroll":a!=null&&it("scroll",e);break;case"onScrollEnd":a!=null&&it("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Nl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$o.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(c=n.endsWith("Capture"),t=n.slice(2,c?n.length-7:void 0),f=e[Dt]||null,f=f!=null?f[n]:null,typeof f=="function"&&e.removeEventListener(t,f,c),typeof a=="function")){typeof f!="function"&&f!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,c);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):Gr(e,n,a)}}}function gn(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",e),it("load",e);var a=!1,c=!1,f;for(f in n)if(n.hasOwnProperty(f)){var v=n[f];if(v!=null)switch(f){case"src":a=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:At(e,t,f,v,n,null)}}c&&At(e,t,"srcSet",n.srcSet,n,null),a&&At(e,t,"src",n.src,n,null);return;case"input":it("invalid",e);var C=f=v=c=null,H=null,Z=null;for(a in n)if(n.hasOwnProperty(a)){var de=n[a];if(de!=null)switch(a){case"name":c=de;break;case"type":v=de;break;case"checked":H=de;break;case"defaultChecked":Z=de;break;case"value":f=de;break;case"defaultValue":C=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(s(137,t));break;default:At(e,t,a,de,n,null)}}Qt(e,f,C,H,Z,v,c,!1);return;case"select":it("invalid",e),a=v=f=null;for(c in n)if(n.hasOwnProperty(c)&&(C=n[c],C!=null))switch(c){case"value":f=C;break;case"defaultValue":v=C;break;case"multiple":a=C;default:At(e,t,c,C,n,null)}t=f,n=v,e.multiple=!!a,t!=null?Sl(e,!!a,t,!1):n!=null&&Sl(e,!!a,n,!0);return;case"textarea":it("invalid",e),f=c=a=null;for(v in n)if(n.hasOwnProperty(v)&&(C=n[v],C!=null))switch(v){case"value":a=C;break;case"defaultValue":c=C;break;case"children":f=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:At(e,t,v,C,n,null)}Wr(e,a,c,f);return;case"option":for(H in n)n.hasOwnProperty(H)&&(a=n[H],a!=null)&&(H==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":At(e,t,H,a,n,null));return;case"dialog":it("beforetoggle",e),it("toggle",e),it("cancel",e),it("close",e);break;case"iframe":case"object":it("load",e);break;case"video":case"audio":for(a=0;a<mo.length;a++)it(mo[a],e);break;case"image":it("error",e),it("load",e);break;case"details":it("toggle",e);break;case"embed":case"source":case"link":it("error",e),it("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in n)if(n.hasOwnProperty(Z)&&(a=n[Z],a!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:At(e,t,Z,a,n,null)}return;default:if(Zi(t)){for(de in n)n.hasOwnProperty(de)&&(a=n[de],a!==void 0&&Ic(e,t,de,a,n,void 0));return}}for(C in n)n.hasOwnProperty(C)&&(a=n[C],a!=null&&At(e,t,C,a,n,null))}function fy(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,v=null,C=null,H=null,Z=null,de=null;for(ie in n){var he=n[ie];if(n.hasOwnProperty(ie)&&he!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":H=he;default:a.hasOwnProperty(ie)||At(e,t,ie,null,a,he)}}for(var te in a){var ie=a[te];if(he=n[te],a.hasOwnProperty(te)&&(ie!=null||he!=null))switch(te){case"type":f=ie;break;case"name":c=ie;break;case"checked":Z=ie;break;case"defaultChecked":de=ie;break;case"value":v=ie;break;case"defaultValue":C=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,t));break;default:ie!==he&&At(e,t,te,ie,a,he)}}Et(e,v,C,H,Z,de,f,c);return;case"select":ie=v=C=te=null;for(f in n)if(H=n[f],n.hasOwnProperty(f)&&H!=null)switch(f){case"value":break;case"multiple":ie=H;default:a.hasOwnProperty(f)||At(e,t,f,null,a,H)}for(c in a)if(f=a[c],H=n[c],a.hasOwnProperty(c)&&(f!=null||H!=null))switch(c){case"value":te=f;break;case"defaultValue":C=f;break;case"multiple":v=f;default:f!==H&&At(e,t,c,f,a,H)}t=C,n=v,a=ie,te!=null?Sl(e,!!n,te,!1):!!a!=!!n&&(t!=null?Sl(e,!!n,t,!0):Sl(e,!!n,n?[]:"",!1));return;case"textarea":ie=te=null;for(C in n)if(c=n[C],n.hasOwnProperty(C)&&c!=null&&!a.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:At(e,t,C,null,a,c)}for(v in a)if(c=a[v],f=n[v],a.hasOwnProperty(v)&&(c!=null||f!=null))switch(v){case"value":te=c;break;case"defaultValue":ie=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:c!==f&&At(e,t,v,c,a,f)}Zo(e,te,ie);return;case"option":for(var Te in n)te=n[Te],n.hasOwnProperty(Te)&&te!=null&&!a.hasOwnProperty(Te)&&(Te==="selected"?e.selected=!1:At(e,t,Te,null,a,te));for(H in a)te=a[H],ie=n[H],a.hasOwnProperty(H)&&te!==ie&&(te!=null||ie!=null)&&(H==="selected"?e.selected=te&&typeof te!="function"&&typeof te!="symbol":At(e,t,H,te,a,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in n)te=n[qe],n.hasOwnProperty(qe)&&te!=null&&!a.hasOwnProperty(qe)&&At(e,t,qe,null,a,te);for(Z in a)if(te=a[Z],ie=n[Z],a.hasOwnProperty(Z)&&te!==ie&&(te!=null||ie!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,t));break;default:At(e,t,Z,te,a,ie)}return;default:if(Zi(t)){for(var Rt in n)te=n[Rt],n.hasOwnProperty(Rt)&&te!==void 0&&!a.hasOwnProperty(Rt)&&Ic(e,t,Rt,void 0,a,te);for(de in a)te=a[de],ie=n[de],!a.hasOwnProperty(de)||te===ie||te===void 0&&ie===void 0||Ic(e,t,de,te,a,ie);return}}for(var Y in n)te=n[Y],n.hasOwnProperty(Y)&&te!=null&&!a.hasOwnProperty(Y)&&At(e,t,Y,null,a,te);for(he in a)te=a[he],ie=n[he],!a.hasOwnProperty(he)||te===ie||te==null&&ie==null||At(e,t,he,te,a,ie)}function Sh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function py(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var c=n[a],f=c.transferSize,v=c.initiatorType,C=c.duration;if(f&&C&&Sh(v)){for(v=0,C=c.responseEnd,a+=1;a<n.length;a++){var H=n[a],Z=H.startTime;if(Z>C)break;var de=H.transferSize,he=H.initiatorType;de&&Sh(he)&&(H=H.responseEnd,v+=de*(H<C?1:(C-Z)/(H-Z)))}if(--a,t+=8*(f+v)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Bc=null,Hc=null;function Ys(e){return e.nodeType===9?e:e.ownerDocument}function Nh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Vc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Uc=null;function my(){var e=window.event;return e&&e.type==="popstate"?e===Uc?!1:(Uc=e,!0):(Uc=null,!1)}var Ch=typeof setTimeout=="function"?setTimeout:void 0,hy=typeof clearTimeout=="function"?clearTimeout:void 0,kh=typeof Promise=="function"?Promise:void 0,gy=typeof queueMicrotask=="function"?queueMicrotask:typeof kh<"u"?function(e){return kh.resolve(null).then(e).catch(xy)}:Ch;function xy(e){setTimeout(function(){throw e})}function pr(e){return e==="head"}function Mh(e,t){var n=t,a=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(c),Sa(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")go(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,go(n);for(var f=n.firstChild;f;){var v=f.nextSibling,C=f.nodeName;f[Ht]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&f.rel.toLowerCase()==="stylesheet"||n.removeChild(f),f=v}}else n==="body"&&go(e.ownerDocument.body);n=c}while(n);Sa(t)}function Oh(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function Gc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Gc(n),cn(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function vy(e,t,n,a){for(;e.nodeType===1;){var c=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Ht])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=tl(e.nextSibling),e===null)break}return null}function yy(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=tl(e.nextSibling),e===null))return null;return e}function Eh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=tl(e.nextSibling),e===null))return null;return e}function qc(e){return e.data==="$?"||e.data==="$~"}function Wc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function by(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function tl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Fc=null;function Th(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return tl(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function _h(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Lh(e,t,n){switch(t=Ys(n),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function go(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);cn(e)}var nl=new Map,Ah=new Set;function Qs(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Hl=$.d;$.d={f:wy,r:Sy,D:Ny,C:jy,L:Cy,m:ky,X:Oy,S:My,M:Ey};function wy(){var e=Hl.f(),t=Hs();return e||t}function Sy(e){var t=Yn(e);t!==null&&t.tag===5&&t.type==="form"?Pp(t):Hl.r(e)}var ya=typeof document>"u"?null:document;function Rh(e,t,n){var a=ya;if(a&&typeof t=="string"&&t){var c=Oe(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof n=="string"&&(c+='[crossorigin="'+n+'"]'),Ah.has(c)||(Ah.add(c),e={rel:e,crossOrigin:n,href:t},a.querySelector(c)===null&&(t=a.createElement("link"),gn(t,"link",e),Kt(t),a.head.appendChild(t)))}}function Ny(e){Hl.D(e),Rh("dns-prefetch",e,null)}function jy(e,t){Hl.C(e,t),Rh("preconnect",e,t)}function Cy(e,t,n){Hl.L(e,t,n);var a=ya;if(a&&e&&t){var c='link[rel="preload"][as="'+Oe(t)+'"]';t==="image"&&n&&n.imageSrcSet?(c+='[imagesrcset="'+Oe(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(c+='[imagesizes="'+Oe(n.imageSizes)+'"]')):c+='[href="'+Oe(e)+'"]';var f=c;switch(t){case"style":f=ba(e);break;case"script":f=wa(e)}nl.has(f)||(e=y({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),nl.set(f,e),a.querySelector(c)!==null||t==="style"&&a.querySelector(xo(f))||t==="script"&&a.querySelector(vo(f))||(t=a.createElement("link"),gn(t,"link",e),Kt(t),a.head.appendChild(t)))}}function ky(e,t){Hl.m(e,t);var n=ya;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Oe(a)+'"][href="'+Oe(e)+'"]',f=c;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=wa(e)}if(!nl.has(f)&&(e=y({rel:"modulepreload",href:e},t),nl.set(f,e),n.querySelector(c)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(vo(f)))return}a=n.createElement("link"),gn(a,"link",e),Kt(a),n.head.appendChild(a)}}}function My(e,t,n){Hl.S(e,t,n);var a=ya;if(a&&e){var c=bl(a).hoistableStyles,f=ba(e);t=t||"default";var v=c.get(f);if(!v){var C={loading:0,preload:null};if(v=a.querySelector(xo(f)))C.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},n),(n=nl.get(f))&&$c(e,n);var H=v=a.createElement("link");Kt(H),gn(H,"link",e),H._p=new Promise(function(Z,de){H.onload=Z,H.onerror=de}),H.addEventListener("load",function(){C.loading|=1}),H.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Xs(v,t,a)}v={type:"stylesheet",instance:v,count:1,state:C},c.set(f,v)}}}function Oy(e,t){Hl.X(e,t);var n=ya;if(n&&e){var a=bl(n).hoistableScripts,c=wa(e),f=a.get(c);f||(f=n.querySelector(vo(c)),f||(e=y({src:e,async:!0},t),(t=nl.get(c))&&Yc(e,t),f=n.createElement("script"),Kt(f),gn(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(c,f))}}function Ey(e,t){Hl.M(e,t);var n=ya;if(n&&e){var a=bl(n).hoistableScripts,c=wa(e),f=a.get(c);f||(f=n.querySelector(vo(c)),f||(e=y({src:e,async:!0,type:"module"},t),(t=nl.get(c))&&Yc(e,t),f=n.createElement("script"),Kt(f),gn(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(c,f))}}function Dh(e,t,n,a){var c=(c=pe.current)?Qs(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ba(n.href),n=bl(c).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ba(n.href);var f=bl(c).hoistableStyles,v=f.get(e);if(v||(c=c.ownerDocument||c,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=c.querySelector(xo(e)))&&!f._p&&(v.instance=f,v.state.loading=5),nl.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},nl.set(e,n),f||Ty(c,e,n,v.state))),t&&a===null)throw Error(s(528,""));return v}if(t&&a!==null)throw Error(s(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=wa(n),n=bl(c).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function ba(e){return'href="'+Oe(e)+'"'}function xo(e){return'link[rel="stylesheet"]['+e+"]"}function zh(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function Ty(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),gn(t,"link",n),Kt(t),e.head.appendChild(t))}function wa(e){return'[src="'+Oe(e)+'"]'}function vo(e){return"script[async]"+e}function Ih(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Oe(n.href)+'"]');if(a)return t.instance=a,Kt(a),a;var c=y({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Kt(a),gn(a,"style",c),Xs(a,n.precedence,e),t.instance=a;case"stylesheet":c=ba(n.href);var f=e.querySelector(xo(c));if(f)return t.state.loading|=4,t.instance=f,Kt(f),f;a=zh(n),(c=nl.get(c))&&$c(a,c),f=(e.ownerDocument||e).createElement("link"),Kt(f);var v=f;return v._p=new Promise(function(C,H){v.onload=C,v.onerror=H}),gn(f,"link",a),t.state.loading|=4,Xs(f,n.precedence,e),t.instance=f;case"script":return f=wa(n.src),(c=e.querySelector(vo(f)))?(t.instance=c,Kt(c),c):(a=n,(c=nl.get(f))&&(a=y({},n),Yc(a,c)),e=e.ownerDocument||e,c=e.createElement("script"),Kt(c),gn(c,"link",a),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Xs(a,n.precedence,e));return t.instance}function Xs(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=a.length?a[a.length-1]:null,f=c,v=0;v<a.length;v++){var C=a[v];if(C.dataset.precedence===t)f=C;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function $c(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Yc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ps=null;function Bh(e,t,n){if(Ps===null){var a=new Map,c=Ps=new Map;c.set(n,a)}else c=Ps,a=c.get(n),a||(a=new Map,c.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),c=0;c<n.length;c++){var f=n[c];if(!(f[Ht]||f[yt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(t)||"";v=e+v;var C=a.get(v);C?C.push(f):a.set(v,[f])}}return a}function Hh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function _y(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Vh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ly(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=ba(a.href),f=t.querySelector(xo(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Zs.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=f,Kt(f);return}f=t.ownerDocument||t,a=zh(a),(c=nl.get(c))&&$c(a,c),f=f.createElement("link"),Kt(f);var v=f;v._p=new Promise(function(C,H){v.onload=C,v.onerror=H}),gn(f,"link",a),n.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Zs.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Qc=0;function Ay(e,t){return e.stylesheets&&e.count===0&&Js(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&Js(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&Qc===0&&(Qc=62500*py());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Js(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Qc?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(c)}}:null}function Zs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Js(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ks=null;function Js(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ks=new Map,t.forEach(Ry,e),Ks=null,Zs.call(e))}function Ry(e,t){if(!(t.state.loading&4)){var n=Ks.get(e);if(n)var a=n.get(null);else{n=new Map,Ks.set(e,n);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var v=c[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(n.set(v.dataset.precedence,v),a=v)}a&&n.set(null,a)}c=t.instance,v=c.getAttribute("data-precedence"),f=n.get(v)||a,f===a&&n.set(null,c),n.set(v,c),this.count++,a=Zs.bind(this),c.addEventListener("load",a),c.addEventListener("error",a),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var yo={$$typeof:z,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function Dy(e,t,n,a,c,f,v,C,H){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ce(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ce(0),this.hiddenUpdates=ce(null),this.identifierPrefix=a,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function Uh(e,t,n,a,c,f,v,C,H,Z,de,he){return e=new Dy(e,t,n,v,H,Z,de,he,C),t=1,f===!0&&(t|=24),f=zn(3,null,null,t),e.current=f,f.stateNode=e,t=Mu(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:a,isDehydrated:n,cache:t},_u(f),e}function Gh(e){return e?(e=Kr,e):Kr}function qh(e,t,n,a,c,f){c=Gh(c),a.context===null?a.context=c:a.pendingContext=c,a=nr(t),a.payload={element:n},f=f===void 0?null:f,f!==null&&(a.callback=f),n=lr(e,a,t),n!==null&&(En(n,e,t),Pa(n,e,t))}function Wh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xc(e,t){Wh(e,t),(e=e.alternate)&&Wh(e,t)}function Fh(e){if(e.tag===13||e.tag===31){var t=jr(e,67108864);t!==null&&En(t,e,67108864),Xc(e,67108864)}}function $h(e){if(e.tag===13||e.tag===31){var t=Un();t=ot(t);var n=jr(e,t);n!==null&&En(n,e,t),Xc(e,t)}}var ei=!0;function zy(e,t,n,a){var c=D.T;D.T=null;var f=$.p;try{$.p=2,Pc(e,t,n,a)}finally{$.p=f,D.T=c}}function Iy(e,t,n,a){var c=D.T;D.T=null;var f=$.p;try{$.p=8,Pc(e,t,n,a)}finally{$.p=f,D.T=c}}function Pc(e,t,n,a){if(ei){var c=Zc(a);if(c===null)zc(e,t,a,ti,n),Qh(e,a);else if(Hy(c,e,t,n,a))a.stopPropagation();else if(Qh(e,a),t&4&&-1<By.indexOf(e)){for(;c!==null;){var f=Yn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=on(f.pendingLanes);if(v!==0){var C=f;for(C.pendingLanes|=2,C.entangledLanes|=2;v;){var H=1<<31-Vt(v);C.entanglements[1]|=H,v&=~H}gl(f),(Ct&6)===0&&(Is=Ze()+500,po(0))}}break;case 31:case 13:C=jr(f,2),C!==null&&En(C,f,2),Hs(),Xc(f,2)}if(f=Zc(a),f===null&&zc(e,t,a,ti,n),f===c)break;c=f}c!==null&&a.stopPropagation()}else zc(e,t,a,null,n)}}function Zc(e){return e=Ji(e),Kc(e)}var ti=null;function Kc(e){if(ti=null,e=fn(e),e!==null){var t=d(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=p(t),e!==null)return e;e=null}else if(n===31){if(e=h(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ti=e,null}function Yh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case Le:return 2;case Xe:return 8;case We:case Pe:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var Jc=!1,mr=null,hr=null,gr=null,bo=new Map,wo=new Map,xr=[],By="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qh(e,t){switch(e){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":bo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wo.delete(t.pointerId)}}function So(e,t,n,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},t!==null&&(t=Yn(t),t!==null&&Fh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Hy(e,t,n,a,c){switch(t){case"focusin":return mr=So(mr,e,t,n,a,c),!0;case"dragenter":return hr=So(hr,e,t,n,a,c),!0;case"mouseover":return gr=So(gr,e,t,n,a,c),!0;case"pointerover":var f=c.pointerId;return bo.set(f,So(bo.get(f)||null,e,t,n,a,c)),!0;case"gotpointercapture":return f=c.pointerId,wo.set(f,So(wo.get(f)||null,e,t,n,a,c)),!0}return!1}function Xh(e){var t=fn(e.target);if(t!==null){var n=d(t);if(n!==null){if(t=n.tag,t===13){if(t=p(n),t!==null){e.blockedOn=t,xt(e.priority,function(){$h(n)});return}}else if(t===31){if(t=h(n),t!==null){e.blockedOn=t,xt(e.priority,function(){$h(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ni(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zc(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Ki=a,n.target.dispatchEvent(a),Ki=null}else return t=Yn(n),t!==null&&Fh(t),e.blockedOn=n,!1;t.shift()}return!0}function Ph(e,t,n){ni(e)&&n.delete(t)}function Vy(){Jc=!1,mr!==null&&ni(mr)&&(mr=null),hr!==null&&ni(hr)&&(hr=null),gr!==null&&ni(gr)&&(gr=null),bo.forEach(Ph),wo.forEach(Ph)}function li(e,t){e.blockedOn===t&&(e.blockedOn=null,Jc||(Jc=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Vy)))}var ri=null;function Zh(e){ri!==e&&(ri=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){ri===e&&(ri=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],c=e[t+2];if(typeof a!="function"){if(Kc(a||n)===null)continue;break}var f=Yn(n);f!==null&&(e.splice(t,3),t-=3,Zu(f,{pending:!0,data:c,method:n.method,action:a},a,c))}}))}function Sa(e){function t(H){return li(H,e)}mr!==null&&li(mr,e),hr!==null&&li(hr,e),gr!==null&&li(gr,e),bo.forEach(t),wo.forEach(t);for(var n=0;n<xr.length;n++){var a=xr[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)Xh(n),n.blockedOn===null&&xr.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var c=n[a],f=n[a+1],v=c[Dt]||null;if(typeof f=="function")v||Zh(n);else if(v){var C=null;if(f&&f.hasAttribute("formAction")){if(c=f,v=f[Dt]||null)C=v.formAction;else if(Kc(c)!==null)continue}else C=v.action;typeof C=="function"?n[a+1]=C:(n.splice(a,3),a-=3),Zh(n)}}}function Kh(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return c=v})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function ed(e){this._internalRoot=e}ai.prototype.render=ed.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current,a=Un();qh(n,a,e,t,null,null)},ai.prototype.unmount=ed.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qh(e.current,2,null,e,null,null),Hs(),t[qt]=null}};function ai(e){this._internalRoot=e}ai.prototype.unstable_scheduleHydration=function(e){if(e){var t=gt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xr.length&&t!==0&&t<xr[n].priority;n++);xr.splice(n,0,e),n===0&&Xh(e)}};var Jh=r.version;if(Jh!=="19.2.3")throw Error(s(527,Jh,"19.2.3"));$.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Uy={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oi.isDisabled&&oi.supportsFiber)try{et=oi.inject(Uy),rt=oi}catch{}}return jo.createRoot=function(e,t){if(!i(e))throw Error(s(299));var n=!1,a="",c=om,f=sm,v=im;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=Uh(e,1,!1,null,null,n,a,null,c,f,v,Kh),e[qt]=t.current,Dc(e),new ed(t)},jo.hydrateRoot=function(e,t,n){if(!i(e))throw Error(s(299));var a=!1,c="",f=om,v=sm,C=im,H=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(v=n.onCaughtError),n.onRecoverableError!==void 0&&(C=n.onRecoverableError),n.formState!==void 0&&(H=n.formState)),t=Uh(e,1,!0,t,n??null,a,c,H,f,v,C,Kh),t.context=Gh(null),n=t.current,a=Un(),a=ot(a),c=nr(a),c.callback=null,lr(n,c,a),n=a,t.current.lanes=n,ue(t,n),gl(t),e[qt]=t.current,Dc(e),new ai(t)},jo.version="19.2.3",jo}var cg;function Ky(){if(cg)return ld.exports;cg=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),ld.exports=Zy(),ld.exports}var Jy=Ky();const dg=l=>{let r;const o=new Set,s=(g,x)=>{const y=typeof g=="function"?g(r):g;if(!Object.is(y,r)){const N=r;r=x??(typeof y!="object"||y===null)?y:Object.assign({},r,y),o.forEach(k=>k(r,N))}},i=()=>r,h={setState:s,getState:i,getInitialState:()=>m,subscribe:g=>(o.add(g),()=>o.delete(g))},m=r=l(s,i,h);return h},e1=(l=>l?dg(l):dg),t1=l=>l;function n1(l,r=t1){const o=Ca.useSyncExternalStore(l.subscribe,Ca.useCallback(()=>r(l.getState()),[l,r]),Ca.useCallback(()=>r(l.getInitialState()),[l,r]));return Ca.useDebugValue(o),o}const fg=l=>{const r=e1(l),o=s=>n1(r,s);return Object.assign(o,r),o},al=(l=>l?fg(l):fg);function Fl(l,r){let o;try{o=l()}catch{return}return{getItem:i=>{var d;const p=m=>m===null?null:JSON.parse(m,void 0),h=(d=o.getItem(i))!=null?d:null;return h instanceof Promise?h.then(p):p(h)},setItem:(i,d)=>o.setItem(i,JSON.stringify(d,void 0)),removeItem:i=>o.removeItem(i)}}const kd=l=>r=>{try{const o=l(r);return o instanceof Promise?o:{then(s){return kd(s)(o)},catch(s){return this}}}catch(o){return{then(s){return this},catch(s){return kd(s)(o)}}}},l1=(l,r)=>(o,s,i)=>{let d={storage:Fl(()=>localStorage),partialize:w=>w,version:0,merge:(w,M)=>({...M,...w}),...r},p=!1;const h=new Set,m=new Set;let g=d.storage;if(!g)return l((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),o(...w)},s,i);const x=()=>{const w=d.partialize({...s()});return g.setItem(d.name,{state:w,version:d.version})},y=i.setState;i.setState=(w,M)=>(y(w,M),x());const N=l((...w)=>(o(...w),x()),s,i);i.getInitialState=()=>N;let k;const S=()=>{var w,M;if(!g)return;p=!1,h.forEach(E=>{var z;return E((z=s())!=null?z:N)});const j=((M=d.onRehydrateStorage)==null?void 0:M.call(d,(w=s())!=null?w:N))||void 0;return kd(g.getItem.bind(g))(d.name).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==d.version){if(d.migrate){const z=d.migrate(E.state,E.version);return z instanceof Promise?z.then(L=>[!0,L]):[!0,z]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,E.state];return[!1,void 0]}).then(E=>{var z;const[L,_]=E;if(k=d.merge(_,(z=s())!=null?z:N),o(k,!0),L)return x()}).then(()=>{j?.(k,void 0),k=s(),p=!0,m.forEach(E=>E(k))}).catch(E=>{j?.(void 0,E)})};return i.persist={setOptions:w=>{d={...d,...w},w.storage&&(g=w.storage)},clearStorage:()=>{g?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>S(),hasHydrated:()=>p,onHydrate:w=>(h.add(w),()=>{h.delete(w)}),onFinishHydration:w=>(m.add(w),()=>{m.delete(w)})},d.skipHydration||S(),k||N},$l=l1,ll=al()(l=>({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0},setViewerState:r=>{l(o=>{const s={viewerOpen:r.viewerOpen??o.viewerOpen,viewerImages:r.viewerImages??o.viewerImages,viewerIndex:r.viewerIndex??o.viewerIndex,viewerScale:r.viewerScale??o.viewerScale,viewerTranslate:r.viewerTranslate??o.viewerTranslate};return s.viewerOpen===o.viewerOpen&&s.viewerIndex===o.viewerIndex&&s.viewerScale===o.viewerScale&&s.viewerTranslate.x===o.viewerTranslate.x&&s.viewerTranslate.y===o.viewerTranslate.y&&s.viewerImages===o.viewerImages?o:{...o,...s}})}})),Zt=al()($l(l=>({error:null,nodeErrors:{},errorCycleIndex:0,errorsDismissed:!1,setError:r=>{l({error:r})},setNodeErrors:r=>{l({nodeErrors:r,errorCycleIndex:0,errorsDismissed:!1})},clearNodeErrors:()=>{l({nodeErrors:{},errorCycleIndex:0,errorsDismissed:!1})},clearNodeError:r=>{l(o=>{const s={...o.nodeErrors};return delete s[String(r)],{nodeErrors:s}})},setErrorCycleIndex:r=>{l({errorCycleIndex:r})},setErrorsDismissed:r=>{l({errorsDismissed:r})}}),{name:"workflow-errors-storage",storage:Fl(()=>localStorage),partialize:l=>({error:l.error,nodeErrors:l.nodeErrors,errorCycleIndex:l.errorCycleIndex,errorsDismissed:l.errorsDismissed}),onRehydrateStorage:()=>l=>{if(!l)return;const r=Object.values(l.nodeErrors||{}).reduce((o,s)=>o+s.length,0);r>0&&!l.error&&l.setError(`Workflow load error: ${r} input${r===1?"":"s"} reference missing options.`),r>0&&l.setErrorCycleIndex(0)}}));function y0(l){return!!l&&typeof l=="object"&&!Array.isArray(l)}function r1(l){if(!(!String(l.type||"").startsWith("Primitive")&&l.type!=="PrimitiveNode")){if(Array.isArray(l.widgets_values))return l.widgets_values[0];if(y0(l.widgets_values)){const o=l.widgets_values.value;return o!==void 0?o:l.widgets_values[0]}}}function To(l,r,o){const s=l.widgets_values;if(Array.isArray(s))return o===void 0||o<0||o>=s.length?void 0:s[o];if(y0(s)){if(s[r]!==void 0)return s[r];if(l.type==="VHS_VideoCombine"&&r==="save_image"&&s.save_output!==void 0)return s.save_output}}function Qd(l,r){const o=l.widget_idx_map?.[String(r)];return o||(l.extra?.widget_idx_map?.[String(r)]??null)}function Hi(l){if(Array.isArray(l))return!0;const r=String(l).toUpperCase();return r==="INT"||r==="FLOAT"||r==="BOOLEAN"||r==="STRING"}function Xd(l,r,o){if(Array.isArray(r)){if(o?.comboIndexToValue&&typeof l=="number"&&Number.isFinite(l)){const s=Math.trunc(l);return r[s]??l}return l}if(r==="INT"&&typeof l=="string"&&l.trim()!==""&&!Number.isNaN(Number(l)))return Math.trunc(Number(l));if(r==="FLOAT"&&typeof l=="string"&&l.trim()!==""&&!Number.isNaN(Number(l)))return Number(l);if(r==="BOOLEAN"&&typeof l=="string"){if(l.toLowerCase()==="true")return!0;if(l.toLowerCase()==="false")return!1}return l}function a1(l,r,o){if(r.length===0)return l;const s=Xd(l,r,{comboIndexToValue:!0}),i=String(s),d=i.split(/[\\/]/).pop()??i,p=r.find(m=>String(m)===i);if(p!==void 0)return p;const h=r.find(m=>String(m)===d);return h!==void 0?h:o!==void 0&&r.some(m=>String(m)===String(o))?o:r[0]}function b0(l,r){const o=l.links.find(p=>p[0]===r);if(!o)return null;const s=o[1],i=o[2],d=l.nodes.find(p=>p.id===s);if(!d)return null;if(d.mode===4||d.type==="Reroute"){const p=d.outputs[i];if(!p)return null;const h=d.inputs.find(m=>{if(m.link===null)return!1;const g=String(m.type).toUpperCase(),x=String(p.type).toUpperCase();return g===x||g==="*"||x==="*"});return h?.link!=null?b0(l,h.link):null}return{nodeId:s,slotIndex:i}}function o1(l,r,o,s,i,d,p){const h={};for(const S of o.inputs)if(S.link!=null){const w=b0(l,S.link);if(w)if(i.has(w.nodeId))h[S.name]=[String(w.nodeId),w.slotIndex];else{const M=l.nodes.find(j=>j.id===w.nodeId);if(M){const j=r1(M);j!==void 0?h[S.name]=j:console.warn(`[workflowInputs] Missing source node for input '${S.name}' on node ${o.id} (${o.type}).`,{sourceNodeId:w.nodeId,sourceNodeType:M.type,sourceAllowed:!1})}}}const m=r[s];if(!m?.input)return h;const g=m.input_order?.required||Object.keys(m.input.required||{}),x=m.input_order?.optional||Object.keys(m.input.optional||{}),y=[...g,...x];let N=0;const k=Array.isArray(o.widgets_values)?o.widgets_values:null;for(const S of y)try{const w=m.input.required?.[S]||m.input.optional?.[S];if(!w)continue;const[M]=w,j=o.inputs.find(U=>U.name===S),E=j?.link!=null,z=!!j?.widget&&!E,L=!!j,_=w[1]?.default,R=Object.prototype.hasOwnProperty.call(w[1]??{},"default");if(Hi(M)||z||!L){let U=d?.[S];if(U===void 0&&(U=N),S==="seed"&&p?.[o.id]!==void 0&&!(S in h))h[S]=p[o.id];else if(U!==void 0&&!E&&!(S in h)){const G=To(o,S,U);G!==void 0&&(Array.isArray(M)?h[S]=a1(G,M,_):h[S]=Xd(G,M))}else!E&&R&&!(S in h)&&(h[S]=_);U!==void 0&&(N=Math.max(N,U+1)),String(M)==="INT"&&(S==="seed"||S==="noise_seed")&&(U!==void 0?N=Math.max(N,U+2):N=Math.max(N,N+1))}}catch(w){console.error(`Error processing input '${S}' for node ${o.id} (${o.type}):`,w)}if(d)for(const[S,w]of Object.entries(d)){if(!(S in h)&&k&&w<k.length){const M=k[w];M!=null&&(h[S]=M)}if(!(S in h)&&!k){const M=To(o,S,w);M!=null&&(h[S]=M)}}return(s==="Power Lora Loader (rgthree)"||o.type==="Power Lora Loader (rgthree)")&&k&&k.forEach((S,w)=>{if(typeof S=="object"&&S!==null&&"lora"in S&&!(Object.values(d||{}).some(j=>j===w)||d===null&&w<N)){const j=`lora_${w}`;j in h||(h[j]=S)}}),p?.[o.id]!==void 0&&!("seed"in h)&&!("noise_seed"in h)&&(h.seed=p[o.id]),h}const It="";function s1(){const l="comfyui-mobile-client-id";let r=localStorage.getItem(l);return r||(r="mobile-"+Math.random().toString(36).substring(2,15),localStorage.setItem(l,r)),r}const w0=s1();async function S0(){const l=await fetch(`${It}/api/object_info`);if(!l.ok)throw new Error("Failed to fetch node types");return l.json()}async function i1(){const l=await fetch(`${It}/api/queue`);if(!l.ok)throw new Error("Failed to fetch queue");return l.json()}async function u1(l){const r=`${It}/api/history?max_items=${l}`,o=await fetch(r);if(!o.ok)throw new Error("Failed to fetch history");return o.json()}async function c1(){const l=await fetch(`${It}/api/v2/userdata?path=workflows`);if(!l.ok){if(l.status===404)return[];throw new Error("Failed to list user workflows")}return(await l.json()).filter(o=>o.type==="file"&&o.name.endsWith(".json"))}function N0(l){return encodeURIComponent(l)}async function j0(l){const r=await fetch(`${It}/api/userdata/${N0("workflows/"+l)}`);if(!r.ok)throw new Error("Failed to load workflow");return r.json()}async function d1(l,r){if(!(await fetch(`${It}/api/userdata/${N0("workflows/"+l)}?overwrite=true`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw new Error("Failed to save workflow")}async function f1(){const l=await fetch(`${It}/api/workflow_templates`);if(!l.ok)throw new Error("Failed to fetch templates");return l.json()}async function C0(l,r){const o=await fetch(`${It}/api/workflow_templates/${encodeURIComponent(l)}/${encodeURIComponent(r)}`);if(!o.ok)throw new Error("Failed to load template");return o.json()}async function p1(){await fetch(`${It}/api/interrupt`,{method:"POST"})}async function m1(){await fetch(`${It}/api/queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clear:!0})})}async function h1(l){await fetch(`${It}/api/queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:[l]})})}async function k0(l,r){const o=new FormData;o.append("image",l),r?.type&&o.append("type",r.type),r?.subfolder&&o.append("subfolder",r.subfolder),r?.overwrite!==void 0&&o.append("overwrite",r.overwrite?"true":"false");const s=await fetch(`${It}/upload/image`,{method:"POST",body:o});if(!s.ok)throw new Error("Failed to upload image");return s.json()}async function g1(l){await fetch(`${It}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:[l]})})}async function pg(l){l.length!==0&&await fetch(`${It}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:l})})}async function x1(){await fetch(`${It}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clear:!0})})}function qn(l,r,o){return`${It}/view?filename=${encodeURIComponent(l)}&subfolder=${encodeURIComponent(r)}&type=${encodeURIComponent(o)}`}function v1(l,r,o,s,i){const p=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws?clientId=${l}`,h=new WebSocket(p);return h.onopen=()=>{o?.()},h.onmessage=m=>{try{const g=JSON.parse(m.data);r(g)}catch(g){console.error("[WS] Failed to parse message:",g)}},h.onclose=()=>{s?.()},h.onerror=m=>{console.error("[WS] Error:",m),i?.(m)},h}async function Md(l="",r=!1,o="output",s){const i=new URLSearchParams;l&&i.set("path",l),r&&i.set("recursive","true"),o&&i.set("source",o),s&&i.set("showHidden","true");const d=await fetch(`${It}/mobile/api/files?${i}`);if(!d.ok)throw new Error("Failed to fetch files");return d.json()}async function y1(l){const r=await Md("",!1,"output",l),o=await Md("",!1,"input",l),s=r.files.filter(d=>d.type==="dir").map(d=>d.name);return{input:o.files.filter(d=>d.type==="dir").map(d=>d.name),output:s}}async function Od(l,r=1e3,o=0,s="modified",i=!1,d=null,p){return(await Md(d||"",i,l,p)).files.map(m=>{if(m.type==="dir")return{id:`${l}/${m.path}`,name:m.name,type:"folder",date:m.date,size:m.size};const g=m.folder||(m.path.includes("/")?m.path.substring(0,m.path.lastIndexOf("/")):"");return{id:`${l}/${m.path}`,name:m.name,type:m.type,previewUrl:`${It}/mobile/api/thumbnail?filename=${encodeURIComponent(m.name)}&subfolder=${encodeURIComponent(g)}&source=${l}`,fullUrl:`${It}/view?filename=${encodeURIComponent(m.name)}&type=${l}&subfolder=${encodeURIComponent(g)}`,date:m.date,size:m.size}})}async function Ed(l,r="output"){const o=await fetch(`${It}/mobile/api/files`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:l,source:r})});if(!o.ok){const s=await o.json();throw new Error(s.error||"Failed to delete file")}}async function b1(l,r="output"){const o=new URLSearchParams({path:l,source:r}),s=await fetch(`${It}/mobile/api/file-metadata?${o.toString()}`);if(!s.ok){const d=await s.json().catch(()=>({}));throw new Error(d.error||"Failed to load file metadata")}const i=await s.json();if(!i.workflow)throw new Error("No workflow metadata found");return i.workflow}async function w1(l,r="output"){const o=new URLSearchParams({path:l,source:r}),s=await fetch(`${It}/mobile/api/image-metadata?${o.toString()}`);if(!s.ok){const i=await s.json().catch(()=>({}));throw new Error(i.error||"Failed to load image metadata")}return s.json()}async function S1(l,r,o="output"){const s=await fetch(`${It}/mobile/api/files/move`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sources:l,destination:r??"",source:o})});if(!s.ok){const i=await s.json().catch(()=>({}));throw new Error(i.error||"Failed to move files")}}async function mg(l,r="output"){const o=await fetch(`${It}/mobile/api/files/mkdir`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:l,source:r})});if(!o.ok){const s=await o.json().catch(()=>({}));throw new Error(s.error||"Failed to create folder")}}const lt=al()($l((l,r)=>({running:[],pending:[],isLoading:!1,lastExecutedId:null,queueItemExpanded:{},queueItemUserToggled:{},queueItemHideImages:{},showQueueMetadata:!1,previewVisibility:{},previewVisibilityDefault:!1,fetchQueue:async()=>{const{running:o}=r();l({isLoading:!0});try{const s=await i1(),i=s.queue_running.map(p=>({number:p[0],prompt_id:p[1],prompt:p[2],extra:p[3],outputs_to_execute:p[4]})),d=s.queue_pending.map(p=>({number:p[0],prompt_id:p[1],prompt:p[2],extra:p[3],outputs_to_execute:p[4]}));o.length>0&&i.length===0&&(l({lastExecutedId:o[0].prompt_id}),setTimeout(()=>l({lastExecutedId:null}),100)),l({running:i,pending:d})}catch(s){console.error("Failed to fetch queue:",s)}finally{l({isLoading:!1})}},clearQueue:async()=>{try{await m1(),l({pending:[]})}catch(o){console.error("Failed to clear queue:",o)}},deleteItem:async o=>{try{await h1(o),l(s=>({pending:s.pending.filter(i=>i.prompt_id!==o)}))}catch(s){console.error("Failed to delete queue item:",s)}},interrupt:async()=>{try{await p1()}catch(o){console.error("Failed to interrupt execution:",o)}},updateFromStatus:o=>{const{pending:s}=r();o!==s.length&&r().fetchQueue()},setQueueItemExpanded:(o,s)=>{l(i=>({queueItemExpanded:{...i.queueItemExpanded,[o]:s}}))},setQueueItemUserToggled:(o,s)=>{l(i=>({queueItemUserToggled:{...i.queueItemUserToggled,[o]:s}}))},setQueueItemHideImages:(o,s)=>{l(i=>({queueItemHideImages:{...i.queueItemHideImages,[o]:s}}))},toggleQueueItemHideImages:o=>{l(s=>({queueItemHideImages:{...s.queueItemHideImages,[o]:!s.queueItemHideImages[o]}}))},setShowQueueMetadata:o=>{l({showQueueMetadata:o})},toggleShowQueueMetadata:()=>{l(o=>({showQueueMetadata:!o.showQueueMetadata}))},setPreviewVisibility:(o,s)=>{l(i=>({previewVisibility:{...i.previewVisibility,[o]:s}}))},togglePreviewVisibility:o=>{l(s=>({previewVisibility:{...s.previewVisibility,[o]:!s.previewVisibility[o]}}))},setPreviewVisibilityDefault:o=>{l({previewVisibilityDefault:o})}}),{name:"queue-storage",storage:Fl(()=>localStorage),partialize:l=>({queueItemExpanded:l.queueItemExpanded,queueItemUserToggled:l.queueItemUserToggled,queueItemHideImages:l.queueItemHideImages,showQueueMetadata:l.showQueueMetadata,previewVisibility:l.previewVisibility,previewVisibilityDefault:l.previewVisibilityDefault})})),_n=al()($l(l=>({currentPanel:"workflow",setCurrentPanel:r=>{l({currentPanel:r})}}),{name:"navigation-storage",storage:Fl(()=>localStorage),partialize:l=>({currentPanel:l.currentPanel})})),Gn=al()($l((l,r)=>({pinnedWidgets:{},pinnedWidget:null,pinOverlayOpen:!1,setPinnedWidget:(o,s)=>{const{pinnedWidgets:i}=r();if(s&&o)l({pinnedWidget:o,pinnedWidgets:{...i,[s]:o}});else if(s&&!o){const d={...i};delete d[s],l({pinnedWidget:null,pinnedWidgets:d})}else l({pinnedWidget:o})},setPinOverlayOpen:o=>{l({pinOverlayOpen:o})},togglePinOverlay:()=>{l(o=>({pinOverlayOpen:!o.pinOverlayOpen}))},clearPinnedWidgetForKey:o=>{if(!o){l({pinnedWidget:null,pinOverlayOpen:!1});return}l(s=>{const i={...s.pinnedWidgets};return delete i[o],{pinnedWidgets:i,pinnedWidget:null,pinOverlayOpen:!1}})},restorePinnedWidgetForWorkflow:(o,s)=>{if(!o){l({pinnedWidget:null,pinOverlayOpen:!1});return}const i=r().pinnedWidgets[o];if(!i){l({pinnedWidget:null,pinOverlayOpen:!1});return}const d=s.nodes.some(p=>p.id===i.nodeId);l({pinnedWidget:d?i:null,pinOverlayOpen:!1})},clearCurrentPin:()=>{l({pinnedWidget:null,pinOverlayOpen:!1})}}),{name:"pinned-widget-storage",storage:Fl(()=>localStorage),partialize:l=>({pinnedWidgets:l.pinnedWidgets,pinnedWidget:l.pinnedWidget,pinOverlayOpen:l.pinOverlayOpen})})),Pd=-1,Vi=-2,Ui=-3,si=0x4000000000000,Si=new Set([Pd,Vi,Ui]);function Zd(l){return Si.has(l)}function M0(l){return l===Pd?"randomize":l===Vi?"increment":l===Ui?"decrement":null}function N1(l){return l==="randomize"?Pd:l==="increment"?Vi:l==="decrement"?Ui:null}function yr(l,r,o,s){if(!r)return null;const d=Qd(l,o.id)?.[s];if(d!==void 0)return d;const p=r[o.type];if(!p?.input)return null;const h=p.input_order?.required||Object.keys(p.input.required||{}),m=p.input_order?.optional||Object.keys(p.input.optional||{}),g=[...h,...m];let x=0;for(const y of g){const N=p.input.required?.[y]||p.input.optional?.[y];if(!N)continue;const[k]=N,S=o.inputs.find(L=>L.name===y),w=S?.link!=null,M=!!S?.widget&&!w,j=!!S;if(Hi(k)||M||!j){if(y===s)return x;x+=1,String(k)==="INT"&&(y==="seed"||y==="noise_seed")&&(x+=1)}}return null}function Oa(l,r,o){const s=yr(l,r,o,"seed")??yr(l,r,o,"noise_seed");if(s!==null)return s;if(!r)return o.outputs?.some(y=>String(y.name||"").toLowerCase().includes("seed")&&String(y.type||"").toUpperCase().includes("INT"))&&Array.isArray(o.widgets_values)&&o.widgets_values.length>0?0:null;const i=r[o.type];if(!i?.input)return o.outputs?.some(y=>String(y.name||"").toLowerCase().includes("seed")&&String(y.type||"").toUpperCase().includes("INT"))&&Array.isArray(o.widgets_values)&&o.widgets_values.length>0?0:null;const d=Qd(l,o.id),p=i.input_order?.required||Object.keys(i.input.required||{}),h=i.input_order?.optional||Object.keys(i.input.optional||{}),m=[...p,...h];let g=0;for(const x of m){const y=i.input.required?.[x]||i.input.optional?.[x];if(!y)continue;const[N]=y,k=o.inputs.find(E=>E.name===x),S=k?.link!=null,w=!!k?.widget&&!S,M=!!k;if(Hi(N)||w||!M){const z=d?.[x]??g;if(String(N)==="INT"&&x.toLowerCase().includes("seed"))return z;g+=1,String(N)==="INT"&&(x==="seed"||x==="noise_seed")&&(g+=1)}}return null}function j1(l,r){const o=l[r.type];if(!o?.input)return 1;const i=(o.input.required?.seed||o.input.optional?.seed)?.[1],d=typeof i?.step=="number"?i.step:1;return d>0?d:1}function C1(l){const r=Number(l.properties?.randomMin??0),o=Number(l.properties?.randomMax??si),s=Number.isFinite(r)?Math.max(-si,r):0,i=Number.isFinite(o)?Math.min(si,o):si;return s<=i?{min:s,max:i}:{min:i,max:s}}function _o(l,r){const o=j1(l,r),{min:s,max:i}=C1(r),d=o>0?o/10:1,p=i-s;let h=s+Math.random()*p;return d>0&&(h=Math.round((h-s)/d)*d+s),h>i&&(h=i),h<s&&(h=s),Si.has(h)&&(h=0),h}function k1(l,r,o,s){if(Si.has(l)){if(typeof r=="number"&&!Si.has(r)){if(l===Vi)return r+1;if(l===Ui)return r-1}return _o(o,s)}return Number.isFinite(l)?l:0}const Sn=al()($l((l,r)=>({seedModes:{},seedLastValues:{},setSeedMode:(o,s,i)=>{const{seedModes:d,seedLastValues:p}=r();if(i?.workflow&&i.nodeTypes){const{workflow:h,nodeTypes:m,updateNodeWidgets:g}=i,x=h.nodes.find(y=>y.id===o);if(x){const y=Oa(h,m,x);if(y!==null&&Array.isArray(x.widgets_values)){const N=y+1,k=typeof x.widgets_values[N]=="string",S={};if(k)S[N]=s;else{const w=N1(s);if(w!==null&&s!=="fixed")S[y]=w;else if(s==="fixed"){const M=Number(x.widgets_values[y]);if(Zd(M)){const j=p[o],E=typeof j=="number"?j:_o(m,x);S[y]=E}}}Object.keys(S).length>0&&g(o,S)}}}l({seedModes:{...d,[o]:s}})},setSeedModes:o=>{l({seedModes:o})},setSeedLastValues:o=>{l({seedLastValues:o})},clearSeedState:()=>{l({seedModes:{},seedLastValues:{}})}}),{name:"seed-storage",storage:Fl(()=>localStorage),partialize:l=>({seedModes:l.seedModes,seedLastValues:l.seedLastValues})}));function hg(l,r){return l&&l[r]||null}function O0(l,r){try{if(r.type==="PrimitiveNode"){const m=r.outputs?.[0]?.type;if(!m)return[];const g=String(m).toUpperCase(),x=Array.isArray(r.widgets_values)?r.widgets_values[0]:void 0;return[{name:r.outputs?.[0]?.name||"value",type:g,options:void 0,value:x,widgetIndex:0,isCombo:!1,connected:!1,inputIndex:-1}]}if(r.type==="Power Lora Loader (rgthree)"){const m=[],g=r.properties?.["Show Strengths"]==="Separate Model & Clip";let x=[];if(l){const y=hg(l,"LoraLoader");if(y?.input?.required?.lora_name){const[N]=y.input.required.lora_name;Array.isArray(N)&&(x=N)}}if(Array.isArray(r.widgets_values)){const y=r.widgets_values,N=[];y.forEach((k,S)=>{typeof k=="object"&&k!==null&&"lora"in k&&"strength"in k&&N.push(S)}),N.length>0&&(m.push({name:"Loras",type:"POWER_LORA_HEADER",options:{loraIndices:N},value:null,widgetIndex:-1,isCombo:!1,connected:!1,inputIndex:-1}),N.forEach(k=>{const S=y[k];m.push({name:"Lora",type:"POWER_LORA",options:{choices:x.length>0?x:void 0,showSeparate:g},value:S,widgetIndex:k,isCombo:!1,connected:!1,inputIndex:-1})})),m.push({name:"Add Lora",type:"POWER_LORA_ADD",options:void 0,value:null,widgetIndex:r.widgets_values.length,isCombo:!1,connected:!1,inputIndex:-1})}return m}const o=hg(l,r.type);if(!o?.input)return r.outputs?.some(g=>String(g.name||"").toLowerCase().includes("seed")&&String(g.type||"").toUpperCase().includes("INT"))&&Array.isArray(r.widgets_values)&&r.widgets_values.length>0?[{name:"seed",type:"INT",options:void 0,value:r.widgets_values[0],widgetIndex:0,isCombo:!1,connected:!1,inputIndex:-1}]:[];const s=o.input_order?.required||Object.keys(o.input.required||{}),i=o.input_order?.optional||Object.keys(o.input.optional||{}),d=[];let p=0;const h=(m,g)=>{if(!g)return;const[x,y]=g,N=r.inputs.findIndex(_=>_.name===m),k=N>=0?r.inputs[N]:void 0,S=k?.link!=null,w=!!k?.widget&&!S,M=!!k,j=Object.prototype.hasOwnProperty.call(y??{},"default"),E=Hi(x)||w||!M||j,z=Array.isArray(x),L=z?{...y??{},options:x}:y;if(E){const _=To(r,m,p);d.push({name:m,type:z?"COMBO":String(x),options:L,value:_,widgetIndex:p,isCombo:z,connected:!!S,inputIndex:N})}E&&(p+=1,String(x)==="INT"&&(m==="seed"||m==="noise_seed")&&(p+=1))};for(const m of s){const g=o.input.required?.[m];g&&h(m,g)}for(const m of i){const g=o.input.optional?.[m];g&&h(m,g)}return d}catch(o){return console.error(`Error collecting widget definitions for node ${r.id} (${r.type}):`,o),[]}}function Kd(l,r){return O0(l,r).filter(o=>!o.isCombo).map(o=>({name:o.name,type:o.type,options:o.options,value:o.value,widgetIndex:o.widgetIndex,connected:o.connected,inputIndex:o.inputIndex}))}function Jd(l,r){return O0(l,r).filter(o=>o.isCombo).map(o=>({name:o.name,type:o.type,value:o.value,options:o.options,widgetIndex:o.widgetIndex,connected:o.connected,inputIndex:o.inputIndex}))}function M1(l){let r=5381;for(let o=0;o<l.length;o+=1)r=(r<<5)+r+l.charCodeAt(o),r&=4294967295;return(r>>>0).toString(16).padStart(8,"0")}function O1(l,r){if(!l)return!1;const o=Kd(l,r).filter(i=>!i.connected),s=Jd(l,r).filter(i=>!i.connected);return o.length===0&&s.length===0}function E1(l){const r=l.nodes??[],o=l.definitions?.subgraphs?.flatMap(s=>s.nodes??[])??[];return[...r,...o]}function sd(l,r){const i=E1(l).filter(d=>!O1(r,d)).map(d=>d.type).sort().join("|");return`wf_${M1(i)}`}const gg="__mobile_origin",ii="__mobile_subgraph_group_map";function id(l,r,o){const s={...l.properties??{}};return o&&s[gg]===void 0&&(s[gg]=o),{...l,id:r,inputs:(l.inputs??[]).map(i=>({...i,link:null})),outputs:(l.outputs??[]).map(i=>({...i,links:[]})),widgets_values:l.widgets_values??[],flags:l.flags??{},properties:s,mode:l.mode??0,order:l.order??0}}function T1(l,r){if(!r||r.length===0)return null;const o=[...r].sort((g,x)=>g.id-x.id),[s,i]=l.pos,[d,p]=l.size,h=s+d/2,m=i+p/2;for(const g of o){const[x,y,N,k]=g.bounding;if(h>=x&&h<=x+N&&m>=y&&m<=y+k)return g.id}return null}function xg(l,r){const o=new Map,s=new Map;return r.forEach((i,d)=>{i?.name&&s.set(i.name,d)}),l.forEach((i,d)=>{const p=i?.name;if(p&&s.has(p)){o.set(d,s.get(p));return}d<r.length&&o.set(d,d)}),o}function _1(l,r){const o=new Map;for(const s of l)s.inputs=(s.inputs??[]).map(i=>({...i,link:null})),s.outputs=(s.outputs??[]).map(i=>({...i,links:[]})),o.set(s.id,s);for(const s of r){const[i,d,p,h,m]=s,g=o.get(d),x=o.get(h),y=g?.outputs?.[p],N=x?.inputs?.[m];y&&(y.links||(y.links=[]),y.links.push(i)),N&&(N.link=i)}return l}function L1(l,r){const o=l.nodes.filter(S=>r.has(S.type));if(o.length===0)return{workflow:l,changed:!1};const s=new Set(o.map(S=>S.id));let i=Math.max(0,...l.nodes.map(S=>S.id))+1;const d=[],p=l.groups??[],h=l.extra??{},m=typeof h[ii]=="object"&&h[ii]!==null?h[ii]:{},g={};for(const[S,w]of Object.entries(m))(typeof w=="number"||w===null)&&(g[S]=w);const x=new Map;for(const S of l.nodes){if(!s.has(S.id)){d.push(id(S,S.id,{scope:"root",nodeId:S.id}));continue}const w=r.get(S.type);if(!w){d.push(id(S,S.id,{scope:"root",nodeId:S.id}));continue}const M=T1(S,p);g[w.id]=M??null;const j=xg(S.inputs??[],w.inputs??[]),E=xg(S.outputs??[],w.outputs??[]),z=new Map,L=new Map,_=new Map,R=[];for(const A of w.nodes??[]){const B=i++;z.set(A.id,B),d.push(id(A,B,{scope:"subgraph",subgraphId:w.id,nodeId:A.id}))}for(const A of w.links??[]){const B=A.origin_id,U=A.target_id;if(B===-10){const K=z.get(U);if(K!==void 0){const ge=L.get(A.origin_slot)??[];ge.push({origin_id:-10,origin_slot:A.origin_slot,target_id:K,target_slot:A.target_slot,type:A.type}),L.set(A.origin_slot,ge)}continue}if(U===-20){const K=z.get(B);if(K!==void 0){const ge=_.get(A.target_slot)??[];ge.push({origin_id:K,origin_slot:A.origin_slot,target_id:-20,target_slot:A.target_slot,type:A.type}),_.set(A.target_slot,ge)}continue}const G=z.get(B),W=z.get(U);G!==void 0&&W!==void 0&&R.push({origin_id:G,origin_slot:A.origin_slot,target_id:W,target_slot:A.target_slot,type:A.type})}x.set(S.id,{inputSlotMap:j,outputSlotMap:E,inputTargets:L,outputSources:_,internalLinks:R})}const y=[],N=l.links??[];for(const S of N){const[,w,M,j,E,z]=S,L=s.has(w),_=s.has(j);if(!L&&!_){y.push({origin_id:w,origin_slot:M,target_id:j,target_slot:E,type:z});continue}if(L&&_){const R=x.get(w),A=x.get(j),B=R?.outputSlotMap.get(M),U=A?.inputSlotMap.get(E);if(B===void 0||U===void 0)continue;const G=R?.outputSources.get(B)??[],W=A?.inputTargets.get(U)??[];for(const K of G)for(const ge of W)y.push({origin_id:K.origin_id,origin_slot:K.origin_slot,target_id:ge.target_id,target_slot:ge.target_slot,type:K.type});continue}if(L){const R=x.get(w),A=R?.outputSlotMap.get(M);if(A===void 0)continue;const B=R?.outputSources.get(A)??[];for(const U of B)y.push({origin_id:U.origin_id,origin_slot:U.origin_slot,target_id:j,target_slot:E,type:U.type});continue}if(_){const R=x.get(j),A=R?.inputSlotMap.get(E);if(A===void 0)continue;const B=R?.inputTargets.get(A)??[];for(const U of B)y.push({origin_id:w,origin_slot:M,target_id:U.target_id,target_slot:U.target_slot,type:U.type})}}for(const S of x.values())y.push(...S.internalLinks);const k=y.map((S,w)=>[w+1,S.origin_id,S.origin_slot,S.target_id,S.target_slot,S.type]);return _1(d,k),{workflow:{...l,extra:{...h,[ii]:g},nodes:d,links:k,last_node_id:Math.max(0,...d.map(S=>S.id)),last_link_id:k.length},changed:!0}}function A1(l){const r=l.definitions?.subgraphs??[];if(r.length===0)return l;const o=new Map;for(const i of r)i?.id&&o.set(i.id,i);let s=l;for(let i=0;i<r.length+4;i+=1){const{workflow:d,changed:p}=L1(s,o);if(!p)break;s=d}return s}function R1(l){const r=new Map,o=new Map,s=new Map;for(const i of l.nodes)r.set(i.id,i),o.set(i.id,[]),s.set(i.id,[]);for(const i of l.links){const[,d,,p]=i,h=o.get(p);h&&!h.includes(d)&&h.push(d);const m=s.get(d);m&&!m.includes(p)&&m.push(p)}return{nodes:r,dependencies:o,dependents:s}}function D1(l){return["SaveImage","PreviewImage","SaveAnimatedWEBP","SaveAnimatedPNG","SaveVideo","SaveAudio"].some(o=>l.type.includes(o))||l.outputs.length===0||l.outputs.every(o=>!o.links||o.links.length===0)}function z1(l){if(l.nodes.length===0)return[];const r=R1(l),o=new Set,s=[];function i(p){if(o.has(p))return;o.add(p);const h=r.nodes.get(p);if(!h)return;const m=r.dependencies.get(p)||[];for(const g of m)i(g);s.push(h)}const d=l.nodes.filter(D1);if(d.length===0)for(const p of l.nodes)(r.dependents.get(p.id)||[]).length===0&&d.push(p);for(const p of d)i(p.id);for(const p of l.nodes)o.has(p.id)||i(p.id);return s}function Lo(l,r,o){const s=l.nodes.find(g=>g.id===r);if(!s||!s.inputs[o])return null;const i=s.inputs[o].link;if(i===null)return null;const d=l.links.find(g=>g[0]===i);if(!d)return null;const[,p,h]=d,m=l.nodes.find(g=>g.id===p);return m?{node:m,outputIndex:h}:null}function Ni(l,r,o){const s=l.nodes.find(p=>p.id===r);if(!s||!s.outputs[o])return[];const i=s.outputs[o].links||[],d=[];for(const p of i){const h=l.links.find(y=>y[0]===p);if(!h)continue;const[,,,m,g]=h,x=l.nodes.find(y=>y.id===m);x&&d.push({node:x,inputIndex:g})}return d}const I1="__mobile_origin",E0="__mobile_subgraph_group_map";function Td(l){return l.map(r=>({...r,widgets_values:r.widgets_values??[],inputs:r.inputs??[],outputs:r.outputs??[],flags:r.flags??{},properties:r.properties??{},mode:r.mode??0,order:r.order??0}))}function vg(l){const r=JSON.parse(JSON.stringify(l));return r.nodes=Td(r.nodes??[]),r.links=r.links??[],r.groups=r.groups??[],r.config=r.config??{},r.definitions?.subgraphs&&(r.definitions.subgraphs=r.definitions.subgraphs.map(o=>({...o,nodes:Td(o.nodes??[]),links:o.links??[]}))),r.last_node_id=r.last_node_id??Math.max(0,...r.nodes.map(o=>o.id)),r.last_link_id=r.last_link_id??0,r.version=r.version??.4,r}function Ao(l){if(!l)return null;const o=l.properties?.[I1];if(!o||typeof o!="object")return null;const s=o.scope;if(s==="root"){const i=o.nodeId;return typeof i=="number"?{scope:"root",nodeId:i}:null}if(s==="subgraph"){const i=o.nodeId,d=o.subgraphId;if(typeof i=="number"&&typeof d=="string")return{scope:"subgraph",subgraphId:d,nodeId:i}}return null}function _d(l,r){const o=new Map;if(!r||r.length===0)return o;const s=[...r].sort((i,d)=>i.id-d.id);for(const i of l){const[d,p]=i.pos,[h,m]=i.size,g=d+h/2,x=p+m/2;for(const y of s){const[N,k,S,w]=y.bounding;if(g>=N&&g<=N+S&&x>=k&&x<=k+w){o.set(i.id,y.id);break}}}return o}function yg(l,r){const o=new Set,s=Array.from(l);for(;s.length>0;){const i=s.pop();if(!i||o.has(i))continue;o.add(i);const d=r.get(i);if(d)for(const p of d)o.has(p)||s.push(p)}return o}function B1(l){const r=new Set(l.map(s=>s.id)),o=new Map;for(const s of l)for(const i of s.nodes??[]){if(!r.has(i.type))continue;const d=o.get(i.type)??[];d.push({parentId:s.id,nodeId:i.id}),o.set(i.type,d)}return o}function Co(l,r,o){return!o||o.length===0?null:_d(r,o).get(l)??null}function T0(l,r,o=null){const s=l.nodes??[],i=l.groups??[],d=l.definitions?.subgraphs??[],p=new Map(d.map(N=>[N.id,N])),h=new Set(d.map(N=>N.id)),m=new Map,g=[];for(const N of s){const k=Ao(N);if(k?.scope==="subgraph"){const S=m.get(k.subgraphId);S?S.push(N):m.set(k.subgraphId,[N])}else g.push(N)}const x=new Map;for(const N of d){const k=new Set;for(const S of N.nodes??[])h.has(S.type)&&k.add(S.type);k.size>0&&x.set(N.id,k)}const y=new Set;if(o){const N=p.get(o);if(!N)return y;const k=N.groups??[];if(!k.find(_=>_.id===r))return y;const w=N.nodes??[],M=_d(w,k),j=new Set,E=new Set;for(const _ of w)M.get(_.id)===r&&(h.has(_.type)?j.add(_.type):E.add(_.id));const z=m.get(o)??[];for(const _ of z){const R=Ao(_);R?.scope==="subgraph"&&E.has(R.nodeId)&&y.add(_.id)}const L=yg(j,x);for(const _ of L){const R=m.get(_)??[];for(const A of R)y.add(A.id)}}else{if(!i.find(j=>j.id===r))return y;const k=_d(g,i);for(const j of g)k.get(j.id)===r&&y.add(j.id);const S=l.extra?.[E0],w=new Set;if(S&&typeof S=="object")for(const[j,E]of Object.entries(S))E===r&&w.add(j);const M=yg(w,x);for(const j of M){const E=m.get(j)??[];for(const z of E)y.add(z.id)}}return y}function H1(l,r,o,s){if(!Array.isArray(l.widgets_values)){const d={...l.widgets_values||{}};return s?(d[s]=o,l.type==="VHS_VideoCombine"&&s==="save_image"&&"save_output"in d&&(d.save_output=o)):r>=0&&(d[String(r)]=o),{...l,widgets_values:d}}let i=[...l.widgets_values];return r>=i.length?i.push(o):i[r]=o,l.type==="Power Lora Loader (rgthree)"&&(i=i.filter(d=>d!==null)),{...l,widgets_values:i}}function V1(l,r){if(!Array.isArray(l.widgets_values))return l;const o=[...l.widgets_values];for(const[s,i]of Object.entries(r)){const d=parseInt(s,10);o[d]=i}return{...l,widgets_values:o}}function ui(l,r){const o=Ao(r)??{scope:"root",nodeId:r.id};if(o.scope==="root"){const d=l.nodes.map(p=>p.id===o.nodeId?{...p,widgets_values:r.widgets_values??[]}:p);return{...l,nodes:d}}const s=l.definitions?.subgraphs;if(!s)return l;const i=s.map(d=>{if(d.id!==o.subgraphId)return d;const p=d.nodes.map(h=>h.id===o.nodeId?{...h,widgets_values:r.widgets_values??[]}:h);return{...d,nodes:p}});return{...l,definitions:{...l.definitions,subgraphs:i}}}function ud(l,r,o){const s=["fixed","randomize","increment","decrement"];if(Array.isArray(o.widgets_values)){const d=o.widgets_values.find(p=>typeof p=="string"&&s.includes(p.toLowerCase()));if(typeof d=="string"){const p=d.toLowerCase();if(s.includes(p))return p}}const i=Oa(l,r,o);if(i!==null&&Array.isArray(o.widgets_values)){const d=Number(o.widgets_values[i]),p=M0(d);if(p)return p;const m=(o.outputs??[]).some(N=>String(N.name||"").toLowerCase().includes("seed")&&String(N.type||"").toUpperCase().includes("INT")),g=o.widgets_values.slice(i+1),x=g.length>0&&g.every(N=>N===""||N===null||N===void 0),y=o.properties&&("randomMin"in o.properties||"randomMax"in o.properties);if(m&&x&&y)return"randomize"}return"fixed"}function U1(l,r){const o={};for(const s of l.nodes){const i=r[s.type];if(!i?.input)continue;const d=i.input_order?.required||Object.keys(i.input.required||{}),p=i.input_order?.optional||Object.keys(i.input.optional||{}),h=[...d,...p];for(const m of h){const g=i.input.required?.[m]||i.input.optional?.[m];if(!g)continue;const[x]=g;if(!Array.isArray(x)||x.length===0||s.inputs.find(E=>E.name===m)?.link!=null)continue;const N=yr(l,r,s,m);if(N===null)continue;const k=To(s,m,N);if(k==null)continue;const S=Xd(k,x,{comboIndexToValue:!0}),w=String(S),M=w.split(/[\\/]/).pop()??w;if(!x.some(E=>{const z=String(E);return z===w||z===M})){const E=String(s.id);o[E]||(o[E]=[]),o[E].push({type:"workflow_load",message:`Missing value: ${w}`,details:"Not found on server.",inputName:m})}}}return o}const ne=al()($l((l,r)=>{const o=s=>{const{manuallyHiddenNodes:i}=r(),p=Object.keys(s).filter(h=>i[Number(h)]);if(p.length>0){const h={...i};for(const m of p)delete h[Number(m)];l({manuallyHiddenNodes:h})}Zt.getState().setNodeErrors(s)};return{workflowSource:null,workflow:null,embedWorkflow:null,originalWorkflow:null,currentFilename:null,currentWorkflowKey:null,nodeTypes:null,isLoading:!1,savedWorkflowStates:{},isExecuting:!1,executingNodeId:null,executingPromptId:null,progress:0,executionStartTime:null,currentNodeStartTime:null,nodeDurationStats:{},workflowDurationStats:{},nodeOutputs:{},promptOutputs:{},runCount:1,followQueue:!1,workflowLoadedAt:0,connectionHighlightModes:{},connectionButtonsVisible:!0,manuallyHiddenNodes:{},searchQuery:"",searchOpen:!1,collapsedGroups:{},hiddenGroups:{},collapsedSubgraphs:{},hiddenSubgraphs:{},setNodeOutput:(s,i)=>{l(d=>({nodeOutputs:{...d.nodeOutputs,[s]:i}}))},clearNodeOutputs:()=>{l({nodeOutputs:{}})},addPromptOutputs:(s,i)=>{!s||i.length===0||l(d=>({promptOutputs:{...d.promptOutputs,[s]:[...d.promptOutputs[s]??[],...i]}}))},clearPromptOutputs:s=>{if(!s){l({promptOutputs:{}});return}l(i=>{if(!i.promptOutputs[s])return i;const d={...i.promptOutputs};return delete d[s],{promptOutputs:d}})},setRunCount:s=>{l({runCount:Math.max(1,Math.floor(s))})},setFollowQueue:s=>{l({followQueue:s})},cycleConnectionHighlight:s=>{l(i=>{const d=i.connectionHighlightModes[s]??"off",p=d==="off"?"inputs":d==="inputs"?"outputs":d==="outputs"?"both":"off";return{connectionHighlightModes:{...i.connectionHighlightModes,[s]:p}}})},setConnectionHighlightMode:(s,i)=>{l(d=>({connectionHighlightModes:{...d.connectionHighlightModes,[s]:i}}))},toggleConnectionButtonsVisible:()=>{l(s=>({connectionButtonsVisible:!s.connectionButtonsVisible}))},setConnectionButtonsVisible:s=>{l({connectionButtonsVisible:s})},hideNode:s=>{l(i=>({manuallyHiddenNodes:{...i.manuallyHiddenNodes,[s]:!0}}))},setNodeHidden:(s,i)=>{l(d=>{const p={...d.manuallyHiddenNodes};return i?p[s]=!0:delete p[s],{manuallyHiddenNodes:p}})},revealNodeWithParents:s=>{const{workflow:i}=r();if(!i)return;const d=i.definitions?.subgraphs??[];console.log("[revealNodeWithParents] start",{nodeId:s,rootNodeCount:i.nodes?.length??0,subgraphCount:d.length});let p=i.nodes.find(S=>S.id===s);if(!p)for(const S of d){const w=S.nodes?.find(M=>M.id===s);if(w){p=w;break}}if(!p){console.log("[revealNodeWithParents] node not found",{nodeId:s,rootIds:i.nodes?.slice(0,5).map(S=>S.id),subgraphSummaries:d.map(S=>({id:S.id,nodeCount:S.nodes?.length??0,sampleIds:S.nodes?.slice(0,5).map(w=>w.id)??[]}))});return}const h=new Map(d.map(S=>[S.id,S])),m=B1(d),g=Ao(p),x=i.nodes.filter(S=>Ao(S)?.scope!=="subgraph"),y=g?.scope==="subgraph"?g.nodeId:p.id,k=(()=>{const S=new Set,w=[y];if(g?.scope==="subgraph"){const M=h.get(g.subgraphId),j=new Map;for(M?.links?.forEach(E=>{const z=j.get(E.target_id)??[];z.push(E.origin_id),j.set(E.target_id,z)});w.length>0;){const E=w.pop();if(E===void 0)continue;(j.get(E)??[]).forEach(L=>{S.has(L)||(S.add(L),w.push(L))})}return S}for(;w.length>0;){const M=w.pop();if(M===void 0)continue;const j=i.nodes.find(E=>E.id===M);j&&j.inputs?.forEach((E,z)=>{if(E.link===null)return;const L=Lo(i,M,z);if(!L)return;const _=L.node.id;S.has(_)||(S.add(_),w.push(_))})}return S})();console.log("[revealNodeWithParents] parents",{nodeId:s,parentCount:k.size,parents:Array.from(k).slice(0,20)}),console.log("[revealNodeWithParents] found node",{nodeId:p.id,origin:g,hasGroups:(i.groups?.length??0)>0,hiddenNodeCount:Object.keys(r().manuallyHiddenNodes??{}).length}),l(S=>{const w={...S.manuallyHiddenNodes};delete w[s],k.forEach(R=>{delete w[R]});const M={...S.hiddenGroups},j={...S.hiddenSubgraphs},E={...S.collapsedGroups},z={...S.collapsedSubgraphs},L=R=>{R!=null&&(delete M[R],E[R]=!1)},_=R=>{R&&(z[R]=!1,delete j[R])};if(!g||g.scope==="root"){const R=Co(p.id,x,i.groups??[]);console.log("[revealNodeWithParents] root origin",{nodeId:s,groupId:R}),L(R),k.forEach(A=>{const B=Co(A,x,i.groups??[]);L(B)})}else{_(g.subgraphId);const R=h.get(g.subgraphId);if(R){const W=Co(g.nodeId,R.nodes??[],R.groups??[]);console.log("[revealNodeWithParents] subgraph origin",{nodeId:s,subgraphId:g.subgraphId,groupId:W}),L(W)}const A=i.extra?.[E0],B=A&&typeof A=="object"?A[g.subgraphId]:void 0;typeof B=="number"&&(console.log("[revealNodeWithParents] root group mapping",{subgraphId:g.subgraphId,rootGroupId:B}),L(B)),R&&k.forEach(W=>{const K=Co(W,R.nodes??[],R.groups??[]);L(K)});const U=[g.subgraphId],G=new Set;for(;U.length>0;){const W=U.pop();if(!W||G.has(W))continue;G.add(W);const K=m.get(W)??[];console.log("[revealNodeWithParents] parent chain",{current:W,parentCount:K.length});for(const ge of K){_(ge.parentId);const ae=h.get(ge.parentId);if(ae){const le=Co(ge.nodeId,ae.nodes??[],ae.groups??[]);console.log("[revealNodeWithParents] parent expand",{parentId:ge.parentId,parentNodeId:ge.nodeId,parentGroupId:le}),L(le)}G.has(ge.parentId)||U.push(ge.parentId)}}}return{manuallyHiddenNodes:w,hiddenGroups:M,hiddenSubgraphs:j,collapsedGroups:E,collapsedSubgraphs:z}})},showAllHiddenNodes:()=>{l({manuallyHiddenNodes:{},hiddenGroups:{},hiddenSubgraphs:{}})},toggleGroupCollapse:s=>{l(i=>{const d=i.collapsedGroups[s]??!0;return{collapsedGroups:{...i.collapsedGroups,[s]:!d}}})},setGroupCollapsed:(s,i)=>{l(d=>{const p={...d.collapsedGroups};return i?p[s]=!0:delete p[s],{collapsedGroups:p}})},toggleGroupHidden:s=>{l(i=>({hiddenGroups:{...i.hiddenGroups,[s]:!i.hiddenGroups[s]}}))},setGroupHidden:(s,i)=>{l(d=>{const p={...d.hiddenGroups};return i?p[s]=!0:delete p[s],{hiddenGroups:p}})},toggleSubgraphHidden:s=>{l(i=>({hiddenSubgraphs:{...i.hiddenSubgraphs,[s]:!i.hiddenSubgraphs[s]}}))},setSubgraphHidden:(s,i)=>{l(d=>{const p={...d.hiddenSubgraphs};return i?p[s]=!0:delete p[s],{hiddenSubgraphs:p}})},updateGroupTitle:(s,i,d)=>{const{workflow:p}=r();if(!p)return;const h=i.trim();if(d){const x=(p.definitions?.subgraphs??[]).map(y=>{if(y.id!==d)return y;const k=(y.groups??[]).map(S=>S.id===s?{...S,title:h}:S);return{...y,groups:k}});Zt.getState().setError(null),l({workflow:{...p,definitions:{...p.definitions??{},subgraphs:x}}});return}const m=(p.groups??[]).map(g=>g.id===s?{...g,title:h}:g);l({workflow:{...p,groups:m}})},updateSubgraphTitle:(s,i)=>{const{workflow:d}=r();if(!d)return;const p=i.trim(),m=(d.definitions?.subgraphs??[]).map(g=>g.id===s?{...g,name:p}:g);l({workflow:{...d,definitions:{...d.definitions??{},subgraphs:m}}})},bypassAllInGroup:(s,i,d=null)=>{const{workflow:p}=r();if(!p)return;const h=T0(p,s,d);if(h.size===0)return;const m=i?4:0,g=(p.nodes??[]).map(x=>h.has(x.id)?{...x,mode:m}:x);l({workflow:{...p,nodes:g}})},showAllHiddenGroups:()=>{l({hiddenGroups:{}})},toggleSubgraphCollapse:s=>{l(i=>({collapsedSubgraphs:{...i.collapsedSubgraphs,[s]:!(i.collapsedSubgraphs[s]??!0)}}))},setSubgraphCollapsed:(s,i)=>{l(d=>({collapsedSubgraphs:{...d.collapsedSubgraphs,[s]:i}}))},setSearchQuery:s=>{l({searchQuery:s})},setSearchOpen:s=>{l({searchOpen:s})},updateWorkflowDuration:(s,i)=>{!s||i<=0||l(d=>{const p=d.workflowDurationStats[s],h=(p?.count??0)+1,m=p?(p.avgMs*p.count+i)/h:i;return{workflowDurationStats:{...d.workflowDurationStats,[s]:{avgMs:m,count:h}}}})},clearWorkflowCache:()=>{const{currentWorkflowKey:s,savedWorkflowStates:i,originalWorkflow:d,nodeTypes:p}=r(),h={...i};if(s?(delete h[s],Gn.getState().clearPinnedWidgetForKey(s)):Gn.getState().clearCurrentPin(),!d){Sn.getState().setSeedModes({}),Sn.getState().setSeedLastValues({}),l({savedWorkflowStates:h});return}const m={};if(p)for(const g of d.nodes)Oa(d,p,g)!==null&&(m[g.id]=ud(d,p,g));Sn.getState().setSeedModes(m),Sn.getState().setSeedLastValues({}),Zt.getState().setError(null),l({workflow:JSON.parse(JSON.stringify(d)),savedWorkflowStates:h,runCount:1,workflowLoadedAt:Date.now()})},saveCurrentWorkflowState:()=>{const{workflow:s,currentWorkflowKey:i,savedWorkflowStates:d,collapsedGroups:p,hiddenGroups:h,collapsedSubgraphs:m,hiddenSubgraphs:g}=r(),x=Sn.getState().seedModes;if(!s||!i)return;const y=d[i]?.bookmarkedNodeIds??[],N={};for(const k of s.nodes)N[k.id]={mode:k.mode,flags:k.flags?{collapsed:!!k.flags.collapsed}:void 0,widgets_values:k.widgets_values};l({savedWorkflowStates:{...d,[i]:{nodes:N,seedModes:{...x},collapsedGroups:{...p},hiddenGroups:{...h},collapsedSubgraphs:{...m},hiddenSubgraphs:{...g},bookmarkedNodeIds:[...y]}}})},loadWorkflow:(s,i,d)=>{const{currentFilename:p,savedWorkflowStates:h,nodeTypes:m}=r(),g=d?.fresh??!1,x=d?.source??{type:"other"},y=A1(s),N=vg(s),k=Td(y.nodes),S={...y,nodes:k,links:y.links??[],groups:y.groups??[],config:y.config??{},last_node_id:y.last_node_id??Math.max(0,...k.map(B=>B.id)),last_link_id:y.last_link_id??0,version:y.version??.4},w=sd(S,m),M=Gn.getState(),j=i?M.pinnedWidgets[i]:void 0;if(j&&!M.pinnedWidgets[w]&&M.setPinnedWidget(j,w),M.restorePinnedWidgetForWorkflow(w,S),p&&r().saveCurrentWorkflowState(),g&&h[w]){const B={...h};delete B[w],l({savedWorkflowStates:B})}const E={};if(m)for(const B of S.nodes)Oa(S,m,B)!==null&&(E[B.id]=ud(S,m,B));let z=g?null:h[w];!z&&!g&&i&&h[i]&&(z=h[i],l({savedWorkflowStates:{...h,[w]:h[i]}}));const L=s.definitions?.subgraphs??[],_={};for(const B of L)_[B.id]=!0;const R={};for(const B of S.groups??[])R[B.id]=!0;for(const B of L)for(const U of B.groups??[])R[U.id]=!0;let A=S;if(z){const B=S.nodes.map(W=>{const K=z.nodes[W.id];return K?{...W,mode:K.mode??W.mode,flags:K.flags??W.flags,widgets_values:K.widgets_values??W.widgets_values}:W}),U={...S,nodes:B};A=U;let G=N;if(G)for(const W of B)G=ui(G,W);l({workflowSource:x,workflow:U,embedWorkflow:G,originalWorkflow:JSON.parse(JSON.stringify(S)),currentFilename:i||null,currentWorkflowKey:w,collapsedGroups:{...R,...z.collapsedGroups??{}},hiddenGroups:z.hiddenGroups??{},collapsedSubgraphs:{..._,...z.collapsedSubgraphs??{}},hiddenSubgraphs:z.hiddenSubgraphs??{},runCount:1,followQueue:!1,workflowLoadedAt:Date.now()}),Sn.getState().setSeedModes({...E,...z.seedModes}),Sn.getState().setSeedLastValues({}),_n.getState().setCurrentPanel("workflow"),ll.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}})}else Zt.getState().setError(null),l({workflowSource:x,workflow:S,embedWorkflow:N,originalWorkflow:JSON.parse(JSON.stringify(S)),currentFilename:i||null,currentWorkflowKey:w,collapsedGroups:R,hiddenGroups:{},collapsedSubgraphs:_,hiddenSubgraphs:{},runCount:1,followQueue:!1,workflowLoadedAt:Date.now()}),Sn.getState().setSeedModes(E),Sn.getState().setSeedLastValues({}),_n.getState().setCurrentPanel("workflow"),ll.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}});if(m){const B=U1(A,m),U=Object.values(B).reduce((G,W)=>G+W.length,0);U>0?(o(B),Zt.getState().setError(`Workflow load error: ${U} input${U===1?"":"s"} reference missing options.`)):Zt.getState().clearNodeErrors()}},unloadWorkflow:()=>{const{currentWorkflowKey:s,savedWorkflowStates:i}=r();if(s){const d={...i};delete d[s],l({savedWorkflowStates:d})}Zt.getState().setError(null),l({workflowSource:null,workflow:null,embedWorkflow:null,originalWorkflow:null,currentFilename:null,currentWorkflowKey:null,collapsedGroups:{},hiddenGroups:{},collapsedSubgraphs:{},hiddenSubgraphs:{},runCount:1,nodeOutputs:{},promptOutputs:{},followQueue:!1,workflowLoadedAt:Date.now(),connectionHighlightModes:{},manuallyHiddenNodes:{}}),Sn.getState().clearSeedState(),Gn.getState().clearCurrentPin(),_n.getState().setCurrentPanel("workflow"),ll.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}})},setSavedWorkflow:(s,i)=>{Zt.getState().setError(null);const d=sd(s,r().nodeTypes);l({workflow:s,embedWorkflow:vg(s),originalWorkflow:JSON.parse(JSON.stringify(s)),currentFilename:i,currentWorkflowKey:d})},updateNodeWidget:(s,i,d,p)=>{const{workflow:h,embedWorkflow:m}=r();if(!h)return;const g=h.nodes.map(N=>N.id===s?H1(N,i,d,p):N),x=g.find(N=>N.id===s),y=m&&x?ui(m,x):m;l({workflow:{...h,nodes:g},embedWorkflow:y})},updateNodeWidgets:(s,i)=>{const{workflow:d,embedWorkflow:p}=r();if(!d)return;const h=d.nodes.map(x=>x.id===s?V1(x,i):x),m=h.find(x=>x.id===s),g=p&&m?ui(p,m):p;l({workflow:{...d,nodes:h},embedWorkflow:g})},updateNodeTitle:(s,i)=>{const{workflow:d}=r();if(!d)return;const p=i?.trim()??"",h=d.nodes.map(m=>{if(m.id!==s)return m;const g={...m.properties??{}},x={...m,properties:g};return p?(x.title=p,g.title=p):(delete x.title,delete g.title),x});l({workflow:{...d,nodes:h}})},toggleBypass:s=>{const{workflow:i}=r();if(!i)return;const d=i.nodes.map(p=>{if(p.id===s){const m=(p.mode||0)===4?0:4;return{...p,mode:m}}return p});l({workflow:{...i,nodes:d}})},toggleNodeFold:s=>{const{workflow:i}=r();if(!i)return;const d=i.nodes.map(p=>{if(p.id===s){const h=p.flags||{},m=h.collapsed;return{...p,flags:{...h,collapsed:!m}}}return p});l({workflow:{...i,nodes:d}})},setNodeFold:(s,i)=>{const{workflow:d}=r();if(!d)return;const p=d.nodes.map(h=>{if(h.id===s){const m=h.flags||{};return{...h,flags:{...m,collapsed:i}}}return h});l({workflow:{...d,nodes:p}})},ensureNodeExpanded:s=>{const{workflow:i}=r();if(!i||!i.nodes.find(h=>h.id===s)?.flags?.collapsed)return;const p=i.nodes.map(h=>h.id===s?{...h,flags:{...h.flags,collapsed:!1}}:h);l({workflow:{...i,nodes:p}})},scrollToNode:(s,i)=>{const{manuallyHiddenNodes:d}=r(),{searchOpen:p,searchQuery:h,collapsedGroups:m,hiddenGroups:g,collapsedSubgraphs:x,hiddenSubgraphs:y}=r();if(console.log("[scrollToNode] start",{nodeId:s,hidden:!!d[s],searchOpen:p,searchQuery:h,collapsedGroups:Object.keys(m??{}).length,hiddenGroups:Object.keys(g??{}).length,collapsedSubgraphs:Object.keys(x??{}).length,hiddenSubgraphs:Object.keys(y??{}).length}),d[s]&&r().setNodeHidden(s,!1),document.body.dataset.textareaFocus==="true")return;r().ensureNodeExpanded(s);const N=(k,S)=>{const w=document.getElementById(`node-anchor-${s}`)??document.getElementById(`node-${s}`),M=document.getElementById(`node-card-${s}`)??document.getElementById(`node-${s}`);if(!w||!M){console.log("[scrollToNode] missing elements",{nodeId:s,attemptsLeft:k,hasAnchor:!!w,hasNode:!!M}),k>0?requestAnimationFrame(()=>N(k-1,S)):S>0&&setTimeout(()=>N(10,S-1),200);return}const j=w.closest('[data-node-list="true"]');if(console.log("[scrollToNode] found elements",{nodeId:s,hasContainer:!!j}),j){const A=w.getBoundingClientRect(),B=j.getBoundingClientRect(),U=A.top-B.top,G=Math.max(0,j.scrollTop+U);j.scrollTo({top:G,behavior:"smooth"})}else w.scrollIntoView({behavior:"smooth",block:"start"});const E=j||window;let z=null;const L=()=>{document.querySelectorAll(".highlight-pulse").forEach(A=>A.classList.remove("highlight-pulse")),M.classList.add("highlight-pulse"),setTimeout(()=>M.classList.remove("highlight-pulse"),1200),"vibrate"in navigator&&navigator.vibrate(10),i&&window.dispatchEvent(new CustomEvent("node-show-label",{detail:{nodeId:s,label:i}}))},_=()=>{z&&clearTimeout(z),z=setTimeout(()=>{R(),L()},120)},R=()=>{z&&(clearTimeout(z),z=null),E.removeEventListener("scroll",_)};E.addEventListener("scroll",_,{passive:!0}),z=setTimeout(()=>{R(),L()},200)};N(10,2)},setNodeTypes:s=>{l({nodeTypes:s});const{workflow:i,currentWorkflowKey:d,currentFilename:p,savedWorkflowStates:h}=r();if(!i)return;const m=sd(i,s);if(d===m)return;const g={...h};d&&g[d]&&!g[m]?(g[m]=g[d],delete g[d]):!d&&p&&g[p]&&!g[m]&&(g[m]=g[p]);const x=Gn.getState(),y=p?x.pinnedWidgets[p]:void 0,N=d?x.pinnedWidgets[d]:void 0;y&&!x.pinnedWidgets[m]?x.setPinnedWidget(y,m):N&&!x.pinnedWidgets[m]&&x.setPinnedWidget(N,m),l({currentWorkflowKey:m,savedWorkflowStates:g}),x.restorePinnedWidgetForWorkflow(m,i)},setExecutionState:(s,i,d,p)=>{l(h=>{const m=Date.now(),g=s?d??h.executingPromptId:null,x=s?i??h.executingNodeId:null,y={isExecuting:s,executingNodeId:x,executingPromptId:g,progress:p},N=(w,M)=>{if(!w||M<=0||h.workflow?.nodes.find(R=>String(R.id)===w)?.mode===4)return h.nodeDurationStats;const E=String(w),z=h.nodeDurationStats[E],L=(z?.count??0)+1,_=z?(z.avgMs*z.count+M)/L:M;return{...h.nodeDurationStats,[E]:{avgMs:_,count:L}}};if(!s){if(h.currentNodeStartTime&&h.executingNodeId){const w=m-h.currentNodeStartTime;y.nodeDurationStats=N(h.executingNodeId,w)}if(h.executionStartTime&&h.workflow){const w=m-h.executionStartTime,M=ji(h.workflow),j=h.workflowDurationStats[M],E=(j?.count??0)+1,z=j?(j.avgMs*j.count+w)/E:w;y.workflowDurationStats={...h.workflowDurationStats,[M]:{avgMs:z,count:E}}}return y.executionStartTime=null,y.currentNodeStartTime=null,y}const k=g&&g!==h.executingPromptId,S=x&&x!==h.executingNodeId;if(k&&(y.executionStartTime=m,y.currentNodeStartTime=m),S&&h.currentNodeStartTime&&h.executingNodeId){const w=m-h.currentNodeStartTime;y.nodeDurationStats=N(h.executingNodeId,w),y.currentNodeStartTime=m}else h.currentNodeStartTime||(y.currentNodeStartTime=m);return y})},queueWorkflow:async s=>{const i=Sn.getState(),d=i.seedModes,p=i.seedLastValues,{workflow:h,nodeTypes:m,embedWorkflow:g}=r();if(!h||!m){Zt.getState().setError("Node types are still loading. Try again in a moment.");return}Zt.getState().setError(null),l({isLoading:!0});try{let x=h,y=g,N={...p};for(let k=0;k<s;k++){const S={},w=x.nodes.map(L=>{const _=Oa(x,m,L);if(_===null||!Array.isArray(L.widgets_values))return L;const R=d[L.id]??ud(x,m,L),A=_+1;if(typeof L.widgets_values[A]=="string"){if(!R||R==="fixed")return L;const ge=Number(L.widgets_values[_])||0;let ae;switch(R){case"randomize":ae=_o(m,L);break;case"increment":ae=ge+1;break;case"decrement":ae=ge-1;break;default:return L}const le=[...L.widgets_values];return le[_]=ae,{...L,widgets_values:le}}const G=Number(L.widgets_values[_]),W=N[L.id]??null;let K=null;return Zd(G)?K=k1(G,W,m,L):R&&R!=="fixed"&&(R==="randomize"?K=_o(m,L):R==="increment"?K=(typeof W=="number"?W:G)+1:R==="decrement"&&(K=(typeof W=="number"?W:G)-1)),K===null||(S[L.id]=K,N={...N,[L.id]:K}),L});if(x={...x,nodes:w},y){let L=y;for(const _ of w)L=ui(L,_);y=L}i.setSeedLastValues(N),l({workflow:x,embedWorkflow:y});const M={},j=new Set,E=new Map;for(const L of x.nodes){if(L.mode===4)continue;let _=null;if(m[L.type])_=L.type;else{const R=Object.entries(m).find(([,A])=>A.display_name===L.type||A.name===L.type);R&&(_=R[0])}_&&(j.add(L.id),E.set(L.id,_))}for(const L of x.nodes){if(L.mode===4)continue;const _=E.get(L.id);if(!_)continue;const R=o1(x,m,L,_,j,Qd(x,L.id),S);M[String(L.id)]={class_type:_,inputs:R}}const z=await fetch(`${It}/api/prompt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:M,client_id:w0,extra_data:{extra_pnginfo:{workflow:y??x}}})});if(!z.ok){const L=await z.json(),_={};if(L.node_errors)for(const[R,A]of Object.entries(L.node_errors)){const B=A.errors;B&&B.length>0&&(_[R]=B.map(U=>({type:U.type,message:U.message,details:U.details,inputName:U.extra_info?.input_name})))}throw Object.keys(_).length>0&&o(_),new Error(L.error?.message||"Failed to queue prompt")}Zt.getState().clearNodeErrors()}}catch(x){Zt.getState().setError(x instanceof Error?x.message:"Failed to queue workflow")}finally{lt.getState().fetchQueue(),l({isLoading:!1})}},applyControlAfterGenerate:()=>{const{workflow:s}=r();if(!s)return;let i=!1;const d=s.nodes.map(p=>{if(p.type==="PrimitiveNode"){if(!Array.isArray(p.widgets_values))return p;const h=p.outputs?.[0]?.type,m=String(h).toUpperCase();if(m!=="INT"&&m!=="FLOAT")return p;const g=p.widgets_values?.[1];if(!g||g==="fixed")return p;const x=p.widgets_values?.[0];if(typeof x!="number")return p;let y=x;if(g==="increment"?y=m==="INT"?x+1:x+.01:g==="decrement"?y=m==="INT"?x-1:x-.01:g==="randomize"&&(y=m==="INT"?Math.floor(Math.random()*0xffffffffffff):Math.random()),y!==x){i=!0;const N=[...p.widgets_values];return N[0]=y,{...p,widgets_values:N}}}return p});i&&l({workflow:{...s,nodes:d}})}}},{name:"workflow-storage",storage:Fl(()=>localStorage),partialize:l=>({workflow:l.workflow,embedWorkflow:l.embedWorkflow,originalWorkflow:l.originalWorkflow,currentFilename:l.currentFilename,currentWorkflowKey:l.currentWorkflowKey,savedWorkflowStates:l.savedWorkflowStates,runCount:l.runCount,manuallyHiddenNodes:l.manuallyHiddenNodes,collapsedGroups:l.collapsedGroups,hiddenGroups:l.hiddenGroups,collapsedSubgraphs:l.collapsedSubgraphs,hiddenSubgraphs:l.hiddenSubgraphs,connectionButtonsVisible:l.connectionButtonsVisible,isExecuting:l.isExecuting,executingNodeId:l.executingNodeId,executingPromptId:l.executingPromptId,progress:l.progress,executionStartTime:l.executionStartTime,currentNodeStartTime:l.currentNodeStartTime,nodeDurationStats:l.nodeDurationStats,workflowDurationStats:l.workflowDurationStats}),onRehydrateStorage:()=>l=>{}}));function ji(l){const r=[...l.nodes].sort((o,s)=>o.id-s.id).map(o=>({id:o.id,type:o.type,mode:o.mode,inputs:o.inputs?.map(s=>s.link??null)??[],outputs:o.outputs?.map(s=>s.links??[])??[]}));return JSON.stringify({nodes:r,links:l.links??[]})}const Ld=al(l=>({appMenuOpen:!1,setAppMenuOpen:r=>l({appMenuOpen:r})})),Tn=al((l,r)=>({history:[],isLoading:!1,addHistoryEntry:o=>{l(i=>i.history.some(d=>d.prompt_id===o.prompt_id)?i:{history:[o,...i.history]});const s=lt.getState();if(s.queueItemExpanded[o.prompt_id]===void 0&&s.setQueueItemExpanded(o.prompt_id,!0),o.workflow&&o.durationSeconds){const i=ji(o.workflow);ne.getState().updateWorkflowDuration(i,o.durationSeconds*1e3)}},fetchHistory:async()=>{l({isLoading:!0});try{const o=await u1(50),s=Object.entries(o).map(([d,p])=>{const h=[];for(const M of Object.values(p.outputs))M.images&&h.push(...M.images),M.gifs&&h.push(...M.gifs),M.videos&&h.push(...M.videos);let m=Date.now(),g=null,x=null,y=!1;if(p.status?.messages)for(const[M,j]of p.status.messages)M==="execution_start"&&j.timestamp&&(m=j.timestamp,g=j.timestamp),(M==="execution_end"||M==="execution_success")&&j.timestamp&&(x=j.timestamp),M==="execution_error"&&(y=!0);g===null&&m&&(g=m);const N=g!==null&&x!==null&&x>=g?(x-g)/1e3:void 0,k=p.status?.status_str?.toLowerCase()||"",S=!y&&p.status?.completed!==!1&&!k.includes("error"),w=p.prompt?.[3]?.extra_pnginfo?.workflow;return{prompt_id:d,timestamp:m,durationSeconds:N,success:S,outputs:{images:h},prompt:p.prompt[2],workflow:w}});s.sort((d,p)=>p.timestamp-d.timestamp),l({history:s});const i=lt.getState();for(const d of s)if(i.queueItemExpanded[d.prompt_id]===void 0&&i.setQueueItemExpanded(d.prompt_id,!0),d.workflow&&d.durationSeconds){const p=ji(d.workflow);ne.getState().updateWorkflowDuration(p,d.durationSeconds*1e3)}}catch(o){console.error("Failed to fetch history:",o)}finally{l({isLoading:!1})}},deleteItem:async o=>{try{await g1(o),l(s=>({history:s.history.filter(i=>i.prompt_id!==o)}))}catch(s){console.error("Failed to delete history item:",s)}},clearHistory:async()=>{try{await x1()}catch(o){console.error("Failed to clear history:",o);try{const s=r().history.map(i=>i.prompt_id);await pg(s)}catch(s){console.error("Failed to delete history items:",s)}}finally{l({history:[]})}},clearEmptyItems:async()=>{const o=r().history.filter(s=>s.outputs.images.length===0).map(s=>s.prompt_id);if(o.length!==0)try{await pg(o),l(s=>({history:s.history.filter(i=>!o.includes(i.prompt_id))}))}catch(s){console.error("Failed to delete empty history items:",s)}}})),St=al()($l((l,r)=>({source:"output",currentFolder:null,folders:[],files:[],isLoading:!1,error:null,viewMode:"grid",showHidden:!1,filter:{search:"",favoritesOnly:!1,type:"all"},sort:{mode:"modified"},favorites:[],selectionMode:!1,selectedIds:[],selectionActionOpen:!1,filterModalOpen:!1,newFolderModalOpen:!1,outputsViewerOpen:!1,setSource:o=>{l({source:o,currentFolder:null,files:[],folders:[],selectionMode:!1,selectedIds:[]}),r().fetchFolders(),r().fetchFiles()},setCurrentFolder:o=>{const{currentFolder:s}=r(),i=s?`${s}/${o}`:o;l({currentFolder:i,files:[],selectionMode:!1,selectedIds:[]}),r().fetchFiles()},navigateToPath:o=>{l({currentFolder:o,files:[],selectionMode:!1,selectedIds:[]}),r().fetchFiles()},navigateUp:()=>{const{currentFolder:o}=r();if(!o)return;const s=o.split("/");s.pop();const i=s.length>0?s.join("/"):null;l({currentFolder:i,files:[],selectionMode:!1,selectedIds:[]}),r().fetchFiles()},fetchFolders:async()=>{try{const{showHidden:o}=r(),s=await y1(o),{source:i}=r();l({folders:i==="output"?s.output:s.input})}catch(o){console.error("Failed to fetch folders:",o)}},fetchFiles:async()=>{const{source:o,currentFolder:s,sort:i,showHidden:d}=r();l({isLoading:!0,error:null});try{const p=await Od(o,1e3,0,i.mode,!1,s,d);l({files:p,isLoading:!1})}catch(p){l({error:p.message,isLoading:!1})}},setFilter:o=>{l(s=>({filter:{...s.filter,...o}}))},setSort:o=>{l({sort:o}),r().fetchFiles()},setViewMode:o=>{l({viewMode:o})},toggleShowHidden:()=>{l(o=>({showHidden:!o.showHidden})),r().fetchFolders(),r().fetchFiles()},toggleFavorite:o=>{l(s=>({favorites:s.favorites.includes(o)?s.favorites.filter(d=>d!==o):[...s.favorites,o]}))},toggleSelectionMode:()=>{l(o=>({selectionMode:!o.selectionMode,selectedIds:[],selectionActionOpen:!1}))},toggleSelection:o=>{l(s=>({selectedIds:s.selectedIds.includes(o)?s.selectedIds.filter(d=>d!==o):[...s.selectedIds,o]}))},selectAll:()=>{const o=r().getDisplayedFiles();l({selectedIds:o.map(s=>s.id)})},selectIds:(o,s="add")=>{l(i=>{if(s==="replace")return{selectedIds:[...o]};const d=new Set(i.selectedIds);return o.forEach(p=>d.add(p)),{selectedIds:Array.from(d)}})},clearSelection:()=>{l({selectedIds:[],selectionActionOpen:!1})},setSelectionActionOpen:o=>{l({selectionActionOpen:o})},setFilterModalOpen:o=>{l({filterModalOpen:o})},setNewFolderModalOpen:o=>{l({newFolderModalOpen:o})},setOutputsViewerOpen:o=>{l({outputsViewerOpen:o})},addFavorites:o=>{l(s=>{const i=new Set(s.favorites);return o.forEach(d=>i.add(d)),{favorites:Array.from(i)}})},removeFavorites:o=>{l(s=>({favorites:s.favorites.filter(i=>!o.includes(i))}))},refresh:()=>{r().fetchFolders(),r().fetchFiles()},getDisplayedFiles:()=>{const{files:o,filter:s,favorites:i,showHidden:d,sort:p}=r();let h=[...o];if(d||(h=h.filter(g=>!g.name.startsWith("."))),s.search){const g=s.search.toLowerCase();h=h.filter(x=>x.name.toLowerCase().includes(g))}s.favoritesOnly&&(h=h.filter(g=>i.includes(g.id))),s.type!=="all"&&(h=h.filter(g=>g.type==="folder"||g.type===s.type));const m=p.mode.endsWith("-reverse")?-1:1;return p.mode.startsWith("name")?h.sort((g,x)=>g.name.localeCompare(x.name)*m):p.mode.startsWith("size")?h.sort((g,x)=>((g.size??0)-(x.size??0))*m):h.sort((g,x)=>((g.date??0)-(x.date??0))*m),h}}),{name:"outputs-storage",version:1,migrate:(l,r)=>{if(r===0){if(l.sort&&!l.sort.mode){const{field:o,order:s}=l.sort;o==="name"?l.sort={mode:s==="asc"?"name":"name-reverse"}:l.sort={mode:s==="desc"?"modified":"modified-reverse"}}l.filter&&!l.filter.type&&(l.filter.type="all")}return l},partialize:l=>({source:l.source,viewMode:l.viewMode,showHidden:l.showHidden,sort:l.sort,filter:l.filter,favorites:l.favorites})}));function G1(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:u.jsx("path",{d:"M12 11V16M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21ZM12.0498 8V8.1L11.9502 8.1002V8H12.0498Z"})})}function _0({className:l}){return u.jsx(G1,{className:l})}function q1(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M19 4H5L10.5 10.5V17L13.5 19V10.5L19 4Z"}),u.jsx("path",{d:"M2.5 9L4.5 7L6.5 9"}),u.jsx("path",{d:"M4.5 7V17"}),u.jsx("path",{d:"M2.5 15L4.5 17L6.5 15"})]})}function W1(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M6 4h9l3 3v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M9 10h6M9 14h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function F1(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M6 4h9l3 3v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M9 10h6M9 14h6M9 18h4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function $1(l){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:u.jsx("path",{d:"M4 20h16M6 16l4-4m0 0l4-4m-4 4l4 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function Y1(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M3 7h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M3 7l9 6 9-6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]})}function br(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("circle",{cx:"12",cy:"5",r:"2",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"19",r:"2",fill:"currentColor"})]})}function Br(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{d:"M10 17l5-5-5-5v10z"})})}function Wn(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{d:"M7 10l5 5 5-5H7z"})})}function Ci(l){return u.jsx("svg",{viewBox:"0 0 20 20","aria-hidden":"true",...l,children:u.jsx("g",{transform:"translate(-164 -6319)",fill:"currentColor",children:u.jsx("path",{d:"M170.673,6324.726 L170.669,6324.729 C170.266,6325.104 170.244,6325.735 170.62,6326.137 L171.577,6327.158 C171.876,6327.478 171.649,6328 171.212,6328 L165,6328 C164.447,6328 164,6328.448 164,6329 C164,6329.552 164.447,6330 165,6330 L171.197,6330 C171.637,6330 171.862,6330.527 171.558,6330.845 L170.63,6331.819 C170.248,6332.218 170.266,6332.852 170.669,6333.229 C171.068,6333.603 171.695,6333.584 172.071,6333.186 L174.76,6330.338 C175.49,6329.564 175.487,6328.354 174.753,6327.585 L172.067,6324.769 C171.692,6324.376 171.071,6324.357 170.673,6324.726 M182.222,6319 L175.777,6319 C174.8,6319 174,6319.68 174,6321.111 L174,6322.007 C174,6322.555 174.444,6323 174.993,6323 L175.006,6323 C175.555,6323 176,6322.555 176,6322.007 L176,6321.993 C176,6321.445 176.444,6321 176.993,6321 L181.006,6321 C181.555,6321 182,6321.445 182,6321.993 L182,6336.007 C182,6336.555 181.555,6337 181.006,6337 L176.993,6337 C176.444,6337 176,6336.555 176,6336.007 L176,6335.993 C176,6335.445 175.555,6335 175.006,6335 L174.993,6335 C174.444,6335 174,6335.445 174,6335.993 L174,6337.111 C174,6338.293 174.847,6339 175.777,6339 L182.222,6339 C183.204,6339 184,6338.204 184,6337.222 L184,6337.111 L184,6320.778 C184,6319.796 183.204,6319 182.222,6319"})})})}function ef(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M18.4101 3.6512L20.5315 5.77252C21.4101 6.6512 21.4101 8.07582 20.5315 8.9545L9.54019 19.9458C9.17774 20.3082 8.70239 20.536 8.19281 20.5915L4.57509 20.9856C3.78097 21.072 3.11061 20.4017 3.1971 19.6076L3.59111 15.9898C3.64661 15.4803 3.87444 15.0049 4.23689 14.6425L15.2282 3.6512C16.1068 2.77252 17.5315 2.77252 18.4101 3.6512Z",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M15.2282 3.6512C16.1068 2.77252 17.5315 2.77252 18.4101 3.6512L20.5315 5.77252C21.4101 6.6512 21.4101 8.07582 20.5315 8.9545L18.7283 10.7576L13.425 5.45432L15.2282 3.6512Z",stroke:"currentColor",strokeWidth:"1.5"})]})}function Ho(l){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:u.jsx("path",{d:"M6 6l12 12M18 6l-12 12",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})})}function Hr(l){return u.jsx("svg",{viewBox:"0 0 16 16","aria-hidden":"true",...l,children:u.jsx("path",{d:"M6.4 11.2L3.2 8l1.1-1.1 2.1 2.1 5-5L12.5 5l-6.1 6.2Z",fill:"currentColor"})})}function Q1(l){return u.jsx("svg",{viewBox:"0 0 16 16","aria-hidden":"true",...l,children:u.jsx("path",{d:"M4.2 4.2l7.6 7.6m0-7.6l-7.6 7.6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function X1(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M7 18a4 4 0 0 1 0-8 6 6 0 0 1 11.3-2.2A4.5 4.5 0 0 1 18 18H7Z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M12 10v7m0 0l-3-3m3 3l3-3",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Ir(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function dl(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24M1 1l22 22"})})}function Ul(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M3 6h18M8 6V4h8v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),u.jsx("path",{d:"M10 11v6M14 11v6"})]})}function P1(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M15 9l-6 6M9 9l6 6"})]})}function gi(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M23 4v6h-6M1 20v-6h6"}),u.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}function Z1(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:u.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"})})}function _a(l){return u.jsx("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...l,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.3",d:"M9.18613 3.09999H6.81377M9.18613 12.9H7.55288c-3.08678 0-5.35171-2.99581-4.60305-6.08843l.3054-1.26158M14.7486 2.1721l-.5931 2.45c-.132.54533-.6065.92789-1.1508.92789h-2.2993c-.77173 0-1.33797-.74895-1.1508-1.5221l.5931-2.45c.132-.54533.6065-.9279 1.1508-.9279h2.2993c.7717 0 1.3379.74896 1.1508 1.52211Zm-8.3033 0-.59309 2.45c-.13201.54533-.60646.92789-1.15076.92789H2.4021c-.7717 0-1.33793-.74895-1.15077-1.5221l.59309-2.45c.13201-.54533.60647-.9279 1.15077-.9279h2.29935c.77169 0 1.33792.74896 1.15076 1.52211Zm8.3033 9.8-.5931 2.45c-.132.5453-.6065.9279-1.1508.9279h-2.2993c-.77173 0-1.33797-.749-1.1508-1.5221l.5931-2.45c.132-.5453.6065-.9279 1.1508-.9279h2.2993c.7717 0 1.3379.7489 1.1508 1.5221Z"})})}function L0(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...l,children:u.jsx("path",{d:"M13 20.74C12.9039 20.7541 12.8062 20.7541 12.71 20.74C12.5724 20.6823 12.4551 20.5849 12.3732 20.4602C12.2912 20.3355 12.2484 20.1892 12.25 20.04V16.7H3.00001C2.81189 16.6956 2.63208 16.6216 2.49538 16.4923C2.35868 16.363 2.27481 16.1876 2.26001 16V8.00002C2.25463 7.89856 2.26965 7.79706 2.30417 7.7015C2.3387 7.60595 2.39204 7.51829 2.46103 7.44371C2.53002 7.36913 2.61326 7.30913 2.70584 7.26727C2.79841 7.22542 2.89844 7.20255 3.00001 7.20002H12.25V4.01002C12.2498 3.86106 12.2946 3.71551 12.3784 3.59241C12.4623 3.4693 12.5813 3.37436 12.72 3.32002C12.8551 3.26039 13.0053 3.24376 13.1502 3.27238C13.2951 3.301 13.4277 3.37349 13.53 3.48002L21.53 11.48C21.6705 11.6206 21.7493 11.8113 21.7493 12.01C21.7493 12.2088 21.6705 12.3994 21.53 12.54L13.53 20.54C13.4601 20.6079 13.377 20.6608 13.2858 20.6952C13.1946 20.7296 13.0973 20.7448 13 20.74ZM3.76001 15.2H13C13.1981 15.2026 13.3874 15.2825 13.5275 15.4226C13.6676 15.5626 13.7474 15.7519 13.75 15.95V18.18L19.93 12L13.75 5.83002V8.00002C13.7477 8.19843 13.6689 8.3883 13.53 8.53002C13.3817 8.65257 13.1919 8.71343 13 8.70002H3.76001V15.2Z",fill:"currentColor"})})}function K1(l){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M10.667 2.667c1.45.008 2.235.072 2.748.585C14 3.837 14 4.78 14 6.666v4c0 1.885 0 2.828-.585 3.414-.586.585-1.529.585-3.415.585H6c-1.886 0-2.829 0-3.414-.585C2 13.494 2 12.55 2 10.666v-4c0-1.886 0-2.829.586-3.414.512-.513 1.297-.577 2.747-.585",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M5.333 2.333c0-.552.448-1 1-1h3.334c.552 0 1 .448 1 1v.667c0 .553-.448 1-1 1H6.333c-.552 0-1-.447-1-1v-.667Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"})]})}function J1(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})})}function eb(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:[u.jsx("rect",{x:"9",y:"9",width:"10",height:"12",rx:"2"}),u.jsx("path",{d:"M5 15V5a2 2 0 0 1 2-2h8"})]})}function tb(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:[u.jsx("circle",{cx:"12",cy:"12",r:"9"}),u.jsx("path",{d:"M7 12h10"})]})}function ki(l){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"none","aria-hidden":"true",...l,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})})}function Vr(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:u.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}function A0({showSlash:l=!1,...r}){return u.jsxs("svg",{viewBox:"0 0 32 32","aria-hidden":"true",overflow:"visible",...r,children:[u.jsx("path",{d:"M28 28H4a2.002 2.002 0 0 1-2-2V21h2v5h24v-5h2v5a2.002 2.002 0 0 1-2 2Z",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"21",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"16",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"11",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"6",width:"18",height:"2",fill:"currentColor"}),u.jsx("path",{d:"M16 -3l5 4H11l5-4Z",fill:"currentColor"}),l&&u.jsx("line",{x1:"2",y1:"30",x2:"28",y2:"4",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})]})}function nb({progress:l,radius:r=11,...o}){const s=Math.min(100,Math.max(0,l)),i=2*Math.PI*r,d=i*(1-s/100);return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...o,children:u.jsx("circle",{cx:"12",cy:"12",r,fill:"none",stroke:"rgba(34,197,94,0.9)",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:i,strokeDashoffset:d})})}function lb(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}function tf(l){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})}function rb(l){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{fillRule:"evenodd",d:"M4 10a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1z",clipRule:"evenodd"})})}function ab(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:[u.jsx("circle",{cx:"11",cy:"11",r:"7"}),u.jsx("path",{d:"M20 20l-3.5-3.5"})]})}function ob(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"3",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("circle",{cx:"9",cy:"9",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"15",cy:"15",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"15",cy:"9",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"9",cy:"15",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"})]})}function nf(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}function R0(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{d:"M12 2L1 21h22L12 2zm0 3.5L19.5 19h-15L12 5.5zM11 10v4h2v-4h-2zm0 6v2h2v-2h-2z"})})}function Mi(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:u.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}function bg(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:[u.jsx("rect",{x:"3",y:"7",width:"12",height:"10",rx:"2"}),u.jsx("path",{d:"M15 10l5-3v10l-5-3z"})]})}function Ro(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{d:"M19.1835 7.80516L16.2188 4.83755C14.1921 2.8089 13.1788 1.79457 12.0904 2.03468C11.0021 2.2748 10.5086 3.62155 9.5217 6.31506L8.85373 8.1381C8.59063 8.85617 8.45908 9.2152 8.22239 9.49292C8.11619 9.61754 7.99536 9.72887 7.86251 9.82451C7.56644 10.0377 7.19811 10.1392 6.46145 10.3423C4.80107 10.8 3.97088 11.0289 3.65804 11.5721C3.5228 11.8069 3.45242 12.0735 3.45413 12.3446C3.45809 12.9715 4.06698 13.581 5.28476 14.8L6.69935 16.2163L2.22345 20.6964C1.92552 20.9946 1.92552 21.4782 2.22345 21.7764C2.52138 22.0746 3.00443 22.0746 3.30236 21.7764L7.77841 17.2961L9.24441 18.7635C10.4699 19.9902 11.0827 20.6036 11.7134 20.6045C11.9792 20.6049 12.2404 20.5358 12.4713 20.4041C13.0192 20.0914 13.2493 19.2551 13.7095 17.5825C13.9119 16.8472 14.013 16.4795 14.2254 16.1835C14.3184 16.054 14.4262 15.9358 14.5468 15.8314C14.8221 15.593 15.1788 15.459 15.8922 15.191L17.7362 14.4981C20.4 13.4973 21.7319 12.9969 21.9667 11.9115C22.2014 10.826 21.1954 9.81905 19.1835 7.80516Z"})})}function Ad(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{d:"M15.9894 4.9502L16.52 4.42014L15.9894 4.9502ZM19.0716 8.03562L18.541 8.56568L19.0716 8.03562ZM8.73837 19.429L8.20777 19.9591L8.73837 19.429ZM4.62169 15.3081L5.15229 14.7781L4.62169 15.3081ZM17.5669 14.9943L17.3032 14.2922L17.5669 14.9943ZM15.6498 15.7146L15.9136 16.4167H15.9136L15.6498 15.7146ZM8.3322 8.38177L7.62798 8.12375L8.3322 8.38177ZM9.02665 6.48636L9.73087 6.74438V6.74438L9.02665 6.48636ZM5.84504 10.6735L6.04438 11.3965L5.84504 10.6735ZM7.30167 10.1351L6.86346 9.52646L6.86346 9.52646L7.30167 10.1351ZM7.67582 9.79038L8.24665 10.2768H8.24665L7.67582 9.79038ZM14.251 16.3805L14.742 16.9475L14.742 16.9475L14.251 16.3805ZM13.3806 18.2012L12.6574 18.0022V18.0022L13.3806 18.2012ZM13.9169 16.7466L13.3075 16.3094L13.3075 16.3094L13.9169 16.7466ZM2.71846 12.7552L1.96848 12.76L1.96848 12.76L2.71846 12.7552ZM2.93045 11.9521L2.28053 11.5778H2.28053L2.93045 11.9521ZM11.3052 21.3431L11.3064 20.5931H11.3064L11.3052 21.3431ZM12.0933 21.1347L11.7215 20.4833L11.7215 20.4833L12.0933 21.1347ZM11.6973 2.03606L11.8588 2.76845L11.6973 2.03606ZM1.4694 21.4699C1.17666 21.763 1.1769 22.2379 1.46994 22.5306C1.76298 22.8233 2.23786 22.8231 2.5306 22.5301L1.4694 21.4699ZM7.18383 17.8721C7.47657 17.5791 7.47633 17.1042 7.18329 16.8114C6.89024 16.5187 6.41537 16.5189 6.12263 16.812L7.18383 17.8721ZM15.4588 5.48026L18.541 8.56568L19.6022 7.50556L16.52 4.42014L15.4588 5.48026ZM9.26897 18.8989L5.15229 14.7781L4.09109 15.8382L8.20777 19.9591L9.26897 18.8989ZM17.3032 14.2922L15.386 15.0125L15.9136 16.4167L17.8307 15.6964L17.3032 14.2922ZM9.03642 8.63979L9.73087 6.74438L8.32243 6.22834L7.62798 8.12375L9.03642 8.63979ZM6.04438 11.3965C6.75583 11.2003 7.29719 11.0625 7.73987 10.7438L6.86346 9.52646C6.69053 9.65097 6.46601 9.72428 5.6457 9.95044L6.04438 11.3965ZM7.62798 8.12375C7.33502 8.92332 7.24338 9.14153 7.10499 9.30391L8.24665 10.2768C8.60041 9.86175 8.7823 9.33337 9.03642 8.63979L7.62798 8.12375ZM7.73987 10.7438C7.92696 10.6091 8.09712 10.4523 8.24665 10.2768L7.10499 9.30391C7.0337 9.38757 6.9526 9.46229 6.86346 9.52646L7.73987 10.7438ZM15.386 15.0125C14.697 15.2714 14.1716 15.4571 13.76 15.8135L14.742 16.9475C14.9028 16.8082 15.1192 16.7152 15.9136 16.4167L15.386 15.0125ZM14.1037 18.4001C14.329 17.5813 14.4021 17.3569 14.5263 17.1838L13.3075 16.3094C12.9902 16.7517 12.8529 17.2919 12.6574 18.0022L14.1037 18.4001ZM13.76 15.8135C13.5903 15.9605 13.4384 16.1269 13.3075 16.3094L14.5263 17.1838C14.5887 17.0968 14.6611 17.0175 14.742 16.9475L13.76 15.8135ZM5.15229 14.7781C4.50615 14.1313 4.06799 13.691 3.78366 13.3338C3.49835 12.9753 3.46889 12.8201 3.46845 12.7505L1.96848 12.76C1.97215 13.3422 2.26127 13.8297 2.61002 14.2679C2.95976 14.7073 3.47115 15.2176 4.09109 15.8382L5.15229 14.7781ZM5.6457 9.95044C4.80048 10.1835 4.10396 10.3743 3.58296 10.5835C3.06341 10.792 2.57116 11.0732 2.28053 11.5778L3.58038 12.3264C3.615 12.2663 3.71693 12.146 4.1418 11.9755C4.56523 11.8055 5.16337 11.6394 6.04438 11.3965L5.6457 9.95044ZM3.46845 12.7505C3.46751 12.6016 3.50616 12.4553 3.58038 12.3264L2.28053 11.5778C2.07354 11.9372 1.96586 12.3452 1.96848 12.76L3.46845 12.7505ZM8.20777 19.9591C8.83164 20.5836 9.34464 21.0987 9.78647 21.4506C10.227 21.8015 10.7179 22.0922 11.3041 22.0931L11.3064 20.5931C11.2369 20.593 11.0814 20.5644 10.721 20.2773C10.3618 19.9912 9.91923 19.5499 9.26897 18.8989L8.20777 19.9591ZM12.6574 18.0022C12.4133 18.8897 12.2462 19.4924 12.0751 19.9188C11.9033 20.3467 11.7821 20.4487 11.7215 20.4833L12.465 21.7861C12.974 21.4956 13.2573 21.0004 13.4671 20.4775C13.6776 19.9532 13.8694 19.2516 14.1037 18.4001L12.6574 18.0022ZM11.3041 22.0931C11.7112 22.0937 12.1114 21.9879 12.465 21.7861L11.7215 20.4833C11.595 20.5555 11.4519 20.5933 11.3064 20.5931L11.3041 22.0931ZM18.541 8.56568C19.6045 9.63022 20.3403 10.3695 20.7917 10.9788C21.2353 11.5774 21.2863 11.8959 21.2321 12.1464L22.6982 12.4634C22.8881 11.5854 22.5382 10.8162 21.9969 10.0857C21.4635 9.36592 20.6305 8.53486 19.6022 7.50556L18.541 8.56568ZM17.8307 15.6964C19.1921 15.1849 20.294 14.773 21.0771 14.3384C21.8718 13.8973 22.5083 13.3416 22.6982 12.4634L21.2321 12.1464C21.178 12.3968 21.0001 12.6655 20.3491 13.0268C19.6865 13.3946 18.7112 13.7632 17.3032 14.2922L17.8307 15.6964ZM16.52 4.42014C15.4841 3.3832 14.6481 2.54353 13.9246 2.00638C13.1908 1.46165 12.4175 1.10912 11.5357 1.30367L11.8588 2.76845C12.1086 2.71335 12.4277 2.7633 13.0304 3.21075C13.6433 3.66579 14.3876 4.40801 15.4588 5.48026L16.52 4.42014ZM9.73087 6.74438C10.2525 5.32075 10.6161 4.33403 10.9812 3.66315C11.3402 3.00338 11.609 2.82357 11.8588 2.76845L11.5357 1.30367C10.654 1.49819 10.1005 2.14332 9.66362 2.94618C9.23278 3.73793 8.82688 4.85154 8.32243 6.22834L9.73087 6.74438ZM2.5306 22.5301L7.18383 17.8721L6.12263 16.812L1.4694 21.4699L2.5306 22.5301Z"})})}function Oi(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:u.jsx("path",{d:"M9 6l6 6-6 6"})})}function D0(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:u.jsx("path",{d:"M15 19l-7-7 7-7"})})}function Rd({isBypassed:l,...r}){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:l?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M5 12h14"}),u.jsx("path",{d:"M12 5l7 7-7 7"})]}):u.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}function sb({nodeId:l,connectionHighlightMode:r,leftLineCount:o,rightLineCount:s,...i}){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...i,children:[u.jsxs("defs",{children:[u.jsx("clipPath",{id:`node-rect-left-${l}`,children:u.jsx("rect",{x:"0",y:"0",width:"12",height:"24"})}),u.jsx("clipPath",{id:`node-rect-right-${l}`,children:u.jsx("rect",{x:"12",y:"0",width:"12",height:"24"})})]}),r==="off"?u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",className:"text-gray-500"}):u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",strokeLinejoin:"round",clipPath:`url(#node-rect-left-${l})`,className:r==="inputs"||r==="both"?"text-orange-500":"text-gray-500"}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",strokeLinejoin:"round",clipPath:`url(#node-rect-right-${l})`,className:r==="outputs"||r==="both"?"text-orange-500":"text-gray-500"})]}),u.jsxs("g",{className:r==="inputs"||r==="both"?"text-orange-500":"text-gray-500",children:[o===1&&u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),o===2&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"8.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"15.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),o>=3&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-2.743",y2:"6.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-2.743",y2:"17.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})]}),u.jsxs("g",{className:r==="outputs"||r==="both"?"text-orange-500":"text-gray-500",children:[s===1&&u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),s===2&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"8.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"15.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),s>=3&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"26.743",y2:"6.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"26.743",y2:"17.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})]})]})}function ib(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsxs("defs",{children:[u.jsx("clipPath",{id:"legend-trace-left",children:u.jsx("rect",{x:"0",y:"0",width:"12",height:"24"})}),u.jsx("clipPath",{id:"legend-trace-right",children:u.jsx("rect",{x:"12",y:"0",width:"12",height:"24"})})]}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",clipPath:"url(#legend-trace-left)",className:"text-gray-400"}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",clipPath:"url(#legend-trace-right)",className:"text-orange-500"}),u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",className:"text-gray-400"}),u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",className:"text-orange-500"})]})}function z0(l){return u.jsx("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...l,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.3",d:"m14.6685 5.7416.6425-2.57c.2028-.811-.4106-1.5967-1.2466-1.5967H2.5782a1.285 1.285 0 0 0-1.2467.9733l-.6425 2.57c-.2027.8111.4107 1.5968 1.2467 1.5968h11.4861a1.285 1.285 0 0 0 1.2467-.9734Zm0 7.7102.6425-2.5701c.2028-.811-.4106-1.5967-1.2466-1.5967h-5.061a1.285 1.285 0 0 0-1.2467.9734l-.6425 2.5701c-.2028.811.4106 1.5966 1.2466 1.5966h5.061a1.285 1.285 0 0 0 1.2467-.9733Zm-10.2802 0 .6425-2.5701c.2027-.811-.4107-1.5967-1.2467-1.5967H2.5782a1.285 1.285 0 0 0-1.2467.9734L.689 12.8285c-.2027.811.4107 1.5966 1.2467 1.5966h1.206a1.285 1.285 0 0 0 1.2466-.9733Z"})})}function ub(l){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:u.jsx("path",{d:"M12 3v10m0 0l-4-4m4 4l4-4M5 19h14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function cb(l){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M10.667 2.667c1.45.008 2.235.072 2.748.585C14 3.837 14 4.78 14 6.666v4c0 1.885 0 2.828-.585 3.414-.586.585-1.529.585-3.415.585H6c-1.886 0-2.829 0-3.414-.585C2 13.494 2 12.55 2 10.666v-4c0-1.886 0-2.829.586-3.414.512-.513 1.297-.577 2.747-.585",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M5.333 2.333c0-.552.448-1 1-1h3.334c.552 0 1 .448 1 1v.667c0 .553-.448 1-1 1H6.333c-.552 0-1-.447-1-1v-.667Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M8 6.667v4.666m0 0L5.667 9m2.333 2.333L10.333 9",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Vl(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M3 7a2 2 0 0 1 2-2h4l2 2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M3 9h18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function db(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M5 4h12l3 3v13H4V5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("rect",{x:"7",y:"4",width:"8",height:"4",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"13",width:"10",height:"6",rx:"1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]})}function fb(l){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M12.667 14H3.333C2.597 14 2 13.403 2 12.667V3.333C2 2.597 2.597 2 3.333 2h7.334L14 5.333v7.334c0 .736-.597 1.333-1.333 1.333Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M11.333 14v-4H4.667v4M4.667 2v3.333h5.333",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function pb(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),u.jsx("path",{d:"M12 2v3M12 19v3M4.22 4.22l2.12 2.12M17.66 17.66l2.12 2.12M2 12h3M19 12h3M4.22 19.78l2.12-2.12M17.66 6.34l2.12-2.12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"})]})}function mb(l){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:u.jsx("path",{d:"M21 14.5A9 9 0 0 1 9.5 3a7 7 0 1 0 11.5 11.5Z",fill:"currentColor"})})}function hb(l){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",fill:"currentColor",...l,children:u.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"})})}function wg(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}function gb(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function xb(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function vb(l){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:u.jsx("path",{d:"M8 4h8M8 20h8M9 6h6l-1 4 1 4H9l1-4-1-4Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function yb({progress:l,radius:r=10,trackColor:o="#e5e7eb",progressColor:s="#3b82f6",...i}){const d=Math.min(100,Math.max(0,l)),p=2*Math.PI*r,h=p*(1-d/100);return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...i,children:[u.jsx("circle",{cx:"12",cy:"12",r,fill:"none",stroke:o,strokeWidth:"2"}),u.jsx("circle",{cx:"12",cy:"12",r,fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeDasharray:p,strokeDashoffset:h})]})}var rl=v0();function bb({open:l,onClose:r,side:o,title:s,children:i}){const d=b.useRef(null);return b.useEffect(()=>{if(!l)return;const p=h=>{h.key==="Escape"&&r()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[l,r]),b.useEffect(()=>(l?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[l]),l?rl.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[2300]",children:[u.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:r}),u.jsxs("div",{ref:d,className:`
          absolute top-0 bottom-0 w-[85%] max-w-sm bg-white shadow-xl
          flex flex-col overflow-hidden
          ${o==="left"?"left-0 animate-slide-in-left":"right-0 animate-slide-in-right"}
        `,style:{animation:`${o==="left"?"slideInLeft":"slideInRight"} 0.2s ease-out`},children:[s&&u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s}),u.jsx("button",{onClick:r,className:`w-10 h-10 flex items-center justify-center rounded-full
                         text-gray-500 hover:bg-gray-100 text-2xl`,children:""})]}),u.jsx("div",{className:"flex-1 overflow-auto p-4 overscroll-contain scroll-container",children:i})]}),u.jsx("style",{children:`
        @keyframes slideInLeft {
          from { transform: translateX(-100%); }
          to { transform: translateX(0); }
        }
        @keyframes slideInRight {
          from { transform: translateX(100%); }
          to { transform: translateX(0); }
        }
      `})]}),document.body):null}function Vo({title:l,onBack:r}){return u.jsxs("button",{onClick:r,className:"w-full flex items-center gap-2 text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:[u.jsx(D0,{className:"w-5 h-5 text-gray-400"}),u.jsx("span",{children:l})]})}function wb({onBack:l}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Vo,{title:"Icon Legend",onBack:l}),u.jsxs("div",{className:"space-y-3 overflow-y-auto flex-1 pb-4",children:[u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-500 text-white rounded-lg font-bold text-xs shadow-sm",children:"Run"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Run"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Execute current workflow"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-white border border-gray-200 rounded-lg text-gray-700 shadow-sm overflow-hidden",children:u.jsx(A0,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Queue / Follow"}),u.jsx("p",{className:"text-xs text-gray-500",children:"View queue & follow execution"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-yellow-500 text-white rounded-lg shadow-sm",children:u.jsx(Ro,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Pinned Widget"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Quick access to pinned parameter"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full border border-gray-200 text-gray-700 font-bold",children:""}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Input"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Node input connection point"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full border border-gray-200 text-gray-700 font-bold",children:""}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Output"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Node output connection point"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(ib,{className:"w-6 h-6 overflow-visible"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Trace Connections"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Highlight connected nodes"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-500",children:u.jsx(Wn,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Fold / Unfold"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Collapse or expand node card"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(nf,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Bypass"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Skip node execution"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(dl,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Hide"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Hide node from view"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(Ir,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Show"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Make node visible again"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(Ad,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Pin widget"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Pin widget to bottom bar"})]})]})]})]})}function Uo({error:l,onDismiss:r}){return l?u.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[l,u.jsx("button",{onClick:r,className:"ml-2 text-red-500 font-medium",children:"Dismiss"})]}):null}function Sb({error:l,workflow:r,currentFilename:o,isDirty:s,loading:i,theme:d,menuSectionsOpen:p,fileInputRef:h,loadSectionRef:m,saveSectionRef:g,appearanceSectionRef:x,infoSectionRef:y,onDismissError:N,onFileChange:k,onLoadFromFile:S,onToggleSection:w,onOpenUserWorkflows:M,onOpenTemplates:j,onOpenPasteJson:E,onSave:z,onOpenSaveAs:L,onToggleTheme:_,onOpenLegend:R}){return u.jsxs(u.Fragment,{children:[u.jsx("input",{ref:h,type:"file",accept:".json",onChange:k,className:"hidden"}),u.jsx(Uo,{error:l,onDismiss:N}),u.jsxs("section",{ref:m,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>w("load"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.load,children:[u.jsx("span",{children:"Load Workflow"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.load?"rotate-0":"-rotate-90"}`})]}),p.load&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("button",{onClick:M,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(_a,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"My Workflows"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:j,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(z0,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Templates"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:E,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(cb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Paste JSON"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:S,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(Vl,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"From Device"})]})]})]}),u.jsxs("section",{ref:g,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>w("save"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.save,children:[u.jsx("span",{children:"Save Workflow"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.save?"rotate-0":"-rotate-90"}`})]}),p.save&&u.jsxs("div",{className:"space-y-2",children:[o&&u.jsxs("button",{onClick:z,disabled:!r||!s||i,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                           rounded-xl text-left hover:bg-gray-50 min-h-[56px]
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[u.jsx(db,{className:"w-6 h-6 text-gray-600 shrink-0"}),u.jsxs("span",{className:"font-medium text-gray-900 truncate",children:["Save ",o.replace(".json","")]})]}),u.jsxs("button",{onClick:L,disabled:!r,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(fb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Save As..."}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]})]})]}),u.jsx("div",{className:"border-t border-gray-200 mb-6"}),u.jsxs("section",{ref:x,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>w("appearance"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.appearance,children:[u.jsx("span",{children:"Appearance"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.appearance?"rotate-0":"-rotate-90"}`})]}),p.appearance&&u.jsx("div",{className:"space-y-2",children:u.jsxs("button",{onClick:_,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[d==="dark"?u.jsx(mb,{className:"w-6 h-6 text-gray-600"}):u.jsx(pb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:d==="dark"?"Dark mode":"Light mode"})]})})]}),u.jsxs("section",{ref:y,className:"mt-auto pt-6 border-t border-gray-200",children:[u.jsxs("button",{type:"button",onClick:()=>w("info"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.info,children:[u.jsx("span",{children:"About"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.info?"rotate-0":"-rotate-90"}`})]}),p.info&&u.jsxs("div",{className:"space-y-2 pb-4",children:[u.jsxs("a",{href:"https://github.com/cosmicbuffalo/comfyui-mobile-frontend",target:"_blank",rel:"noopener noreferrer",className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(hb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Open in GitHub"}),u.jsx(wg,{className:"w-4 h-4 ml-auto text-gray-400"})]}),u.jsxs("button",{onClick:R,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(gb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Icon Legend"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("a",{href:"https://github.com/cosmicbuffalo/comfyui-mobile-frontend/blob/main/USER_GUIDE.md",target:"_blank",rel:"noopener noreferrer",className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(xb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"User Manual"}),u.jsx(wg,{className:"w-4 h-4 ml-auto text-gray-400"})]})]})]})]})}async function Nb(l){if(navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(l);return}catch{}const r=document.createElement("textarea");r.value=l,r.readOnly=!0,r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.opacity="0",document.body.appendChild(r),r.focus(),r.select(),r.setSelectionRange(0,r.value.length),document.execCommand("copy"),document.body.removeChild(r)}function Sg(l,r,o){const s=l.current;if(s){if(s.focus(),r)s.setSelectionRange(r.start,r.end);else if(o!==void 0){const i=o.length;s.setSelectionRange(i,i)}}}function jb(l){const r=l.current;if(!r)return;const s=r.closest('[data-textarea-root="true"]')?.querySelector('[data-textarea-header="true"]');s?s.scrollIntoView({block:"nearest",behavior:"auto"}):r.scrollIntoView({block:"nearest",behavior:"auto"})}function Eo({value:l,onChange:r,textareaRef:o,className:s=""}){const[i,d]=b.useState(!1),p=b.useRef(null),h=b.useRef(null),m=()=>{d(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>d(!1),900)},g=N=>{N.preventDefault()},x=async()=>{const N=o.current;N&&(h.current={start:N.selectionStart??0,end:N.selectionEnd??0});const k=o.current?.value??l;await Nb(k),requestAnimationFrame(()=>Sg(o,h.current||void 0)),m()},y=()=>{r(""),requestAnimationFrame(()=>{Sg(o,void 0,""),jb(o)})};return u.jsxs("div",{className:`flex items-center text-[11px] text-gray-500 ${s}`,children:[u.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-1 py-0.5 text-gray-600",onMouseDown:g,onClick:x,"aria-label":"Copy to clipboard",children:[i?u.jsx(Hr,{className:"w-3.5 h-3.5 text-green-500"}):u.jsx(eb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Copy"})]}),u.jsx("span",{className:"text-gray-500/50",children:"|"}),u.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-1 py-0.5 text-red-600",onMouseDown:g,onClick:y,"aria-label":"Clear text",children:[u.jsx(tb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Clear"})]})]})}function Cb({error:l,pastedJson:r,pasteTextareaRef:o,onBack:s,onDismissError:i,onChangeJson:d,onLoad:p}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Vo,{title:"Paste JSON",onBack:s}),u.jsx(Uo,{error:l,onDismiss:i}),u.jsxs("div",{className:"flex-1 flex flex-col space-y-4 overflow-hidden",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Paste your workflow JSON below."}),u.jsxs("div",{className:"group","data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1","data-textarea-header":"true",children:[u.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Workflow JSON"}),u.jsx(Eo,{value:r,onChange:d,textareaRef:o,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),u.jsx("textarea",{ref:o,value:r,onChange:h=>d(h.target.value),placeholder:'{"last_node_id": ...}',className:"w-full flex-1 p-3 border border-gray-300 rounded-lg font-mono text-xs resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:s,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 min-h-[48px]",children:"Cancel"}),u.jsx("button",{onClick:p,disabled:!r.trim(),className:`flex-1 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600
                       disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px]`,children:"Load"})]})]})]})}function kb({error:l,loading:r,workflow:o,saveFilenameInput:s,onBack:i,onDismissError:d,onSaveFilenameChange:p,onSaveAs:h,onDownload:m}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Vo,{title:"Save Workflow",onBack:i}),u.jsx(Uo,{error:l,onDismiss:d}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-xl",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Save to ComfyUI server:"}),u.jsx("input",{type:"text",value:s,onChange:g=>p(g.target.value),placeholder:"Enter filename (e.g., my_workflow.json)",className:"w-full p-3 border border-gray-300 rounded-lg mb-3"}),u.jsx("button",{onClick:h,disabled:!o||!s.trim()||r,className:`w-full py-3 bg-blue-500 text-white rounded-lg font-medium
                       disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px]`,children:r?"Saving...":"Save As"})]}),u.jsxs("button",{onClick:m,disabled:!o,className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                     rounded-xl text-left hover:bg-gray-50 min-h-[56px]
                     disabled:opacity-50 disabled:cursor-not-allowed`,children:[u.jsx(ub,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Download to Device"})]})]})]})}const Mb={sm:"w-4 h-4 border-2",md:"w-6 h-6 border-2",lg:"w-10 h-10 border-4"},Ob={blue:"border-blue-500 border-t-transparent",gray:"border-gray-200 border-t-gray-500"};function lf({size:l="md",color:r="blue",className:o=""}){return u.jsx("div",{className:`animate-spin rounded-full ${Mb[l]} ${Ob[r]} ${o}`})}function Eb({error:l,loading:r,templates:o,onBack:s,onDismissError:i,onLoadTemplate:d}){const p=Object.entries(o);return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Vo,{title:"Templates",onBack:s}),u.jsx(Uo,{error:l,onDismiss:i}),r?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx(lf,{})}):p.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No templates available"}):u.jsx("div",{className:"space-y-4 overflow-y-auto flex-1",children:p.map(([h,m])=>u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-2",children:h}),u.jsx("div",{className:"space-y-2",children:m.map(g=>u.jsxs("button",{onClick:()=>d(h,g),className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                               rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(z0,{className:"w-5 h-5 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900 truncate",children:g.replace(/\.json$/,"")})]},g))})]},h))})]})}function Tb({error:l,loading:r,userWorkflows:o,onBack:s,onDismissError:i,onLoadWorkflow:d}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Vo,{title:"My Workflows",onBack:s}),u.jsx(Uo,{error:l,onDismiss:i}),r?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx(lf,{})}):o.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No saved workflows yet"}):u.jsx("div",{className:"space-y-2 overflow-y-auto flex-1",children:o.map(p=>u.jsxs("button",{onClick:()=>d(p.name),className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(_a,{className:"w-5 h-5 text-gray-600"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:p.name.replace(/\.json$/,"")}),p.modified&&u.jsx("p",{className:"text-xs text-gray-500",children:new Date(p.modified*1e3).toLocaleDateString()})]})]},p.path))})]})}const Ei=al()($l(l=>({theme:"dark",setTheme:r=>{l({theme:r})},toggleTheme:()=>{l(r=>({theme:r.theme==="dark"?"light":"dark"}))}}),{name:"theme-storage",storage:Fl(()=>localStorage)}));function _b({open:l,onClose:r}){const o=ne(re=>re.loadWorkflow),s=ne(re=>re.workflow),i=ne(re=>re.currentFilename),d=ne(re=>re.originalWorkflow),p=ne(re=>re.setSavedWorkflow),h=Ei(re=>re.theme),m=Ei(re=>re.toggleTheme),g=b.useRef(null),x=!!(s&&d&&JSON.stringify(s)!==JSON.stringify(d)),y=b.useRef(null),[N,k]=b.useState(null),[S,w]=b.useState("menu"),[M,j]=b.useState([]),[E,z]=b.useState({}),[L,_]=b.useState(!1),[R,A]=b.useState(i||""),[B,U]=b.useState(""),[G,W]=b.useState({load:!0,save:!0,appearance:!0,info:!0}),K=b.useRef(null),ge=b.useRef(null),ae=b.useRef(null),le=b.useRef(null),D=b.useRef(G);b.useEffect(()=>{const re=D.current,ye=G;!re.load&&ye.load?setTimeout(()=>K.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!re.save&&ye.save?setTimeout(()=>ge.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!re.appearance&&ye.appearance?setTimeout(()=>ae.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!re.info&&ye.info&&setTimeout(()=>le.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100),D.current=ye},[G]),b.useEffect(()=>{l||(w("menu"),k(null),A(i||""),U(""),W({load:!0,save:!0,appearance:!0,info:!0}))},[l,i]),b.useEffect(()=>{S==="userWorkflows"&&(_(!0),c1().then(j).catch(re=>k(re.message)).finally(()=>_(!1)))},[S]),b.useEffect(()=>{S==="templates"&&(_(!0),f1().then(z).catch(re=>k(re.message)).finally(()=>_(!1)))},[S]);const $=re=>{"vibrate"in navigator&&navigator.vibrate(re)},fe=()=>{y.current?.click()},be=async re=>{const ye=re.target.files?.[0];if(ye){try{const _e=await ye.text(),$e=JSON.parse(_e);if(!$e.nodes||!Array.isArray($e.nodes))throw new Error("Invalid workflow: missing nodes array");o($e,ye.name),k(null),r(),$(10)}catch(_e){k(_e instanceof Error?_e.message:"Failed to load workflow")}y.current&&(y.current.value="")}},ve=async re=>{try{_(!0);const ye=await j0(re);o(ye,re,{fresh:!0,source:{type:"user",filename:re}}),k(null),r(),$(10)}catch(ye){k(ye instanceof Error?ye.message:"Failed to load workflow")}finally{_(!1)}},T=async(re,ye)=>{try{_(!0);const _e=await C0(re,ye);o(_e,`${re}/${ye}`,{fresh:!0,source:{type:"template",moduleName:re,templateName:ye}}),k(null),r(),$(10)}catch(_e){k(_e instanceof Error?_e.message:"Failed to load template")}finally{_(!1)}},I=async re=>{if(!s)return;const ye=re.endsWith(".json")?re:`${re}.json`;try{_(!0),await d1(ye,s),p(s,ye),k(null),r(),$(10)}catch(_e){k(_e instanceof Error?_e.message:"Failed to save workflow")}finally{_(!1)}},O=()=>{i?I(i):w("save")},F=()=>{A(i||""),w("save")},X=()=>{R.trim()?I(R):k("Please enter a filename.")},pe=()=>{if(!s)return;const re=JSON.stringify(s,null,2),ye=new Blob([re],{type:"application/json"}),_e=URL.createObjectURL(ye),$e=document.createElement("a");$e.href=_e,$e.download=`${i||`workflow-${Date.now()}`}.json`,$e.click(),URL.revokeObjectURL(_e),$(10),r()},J=()=>{try{const re=JSON.parse(B);if(!re.nodes||!Array.isArray(re.nodes))throw new Error("Invalid workflow: missing nodes array");const ye=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});o(re,`Pasted workflow (${ye})`),k(null),r(),$(10),U("")}catch(re){k(re instanceof Error?re.message:"Failed to parse JSON")}};return u.jsxs(bb,{open:l,onClose:r,side:"left",title:"ComfyUI Mobile",children:[S==="menu"&&u.jsx(Sb,{error:N,workflow:s,currentFilename:i,isDirty:x,loading:L,theme:h,menuSectionsOpen:G,fileInputRef:y,loadSectionRef:K,saveSectionRef:ge,appearanceSectionRef:ae,infoSectionRef:le,onDismissError:()=>k(null),onFileChange:be,onLoadFromFile:fe,onToggleSection:re=>W(ye=>({...ye,[re]:!ye[re]})),onOpenUserWorkflows:()=>w("userWorkflows"),onOpenTemplates:()=>w("templates"),onOpenPasteJson:()=>w("pasteJson"),onSave:O,onOpenSaveAs:F,onToggleTheme:m,onOpenLegend:()=>w("aboutLegend")}),S==="userWorkflows"&&u.jsx(Tb,{error:N,loading:L,userWorkflows:M,onBack:()=>w("menu"),onDismissError:()=>k(null),onLoadWorkflow:ve}),S==="templates"&&u.jsx(Eb,{error:N,loading:L,templates:E,onBack:()=>w("menu"),onDismissError:()=>k(null),onLoadTemplate:T}),S==="save"&&u.jsx(kb,{error:N,loading:L,workflow:s,saveFilenameInput:R,onBack:()=>w("menu"),onDismissError:()=>k(null),onSaveFilenameChange:A,onSaveAs:X,onDownload:pe}),S==="pasteJson"&&u.jsx(Cb,{error:N,pastedJson:B,pasteTextareaRef:g,onBack:()=>w("menu"),onDismissError:()=>k(null),onChangeJson:U,onLoad:J}),S==="aboutLegend"&&u.jsx(wb,{onBack:()=>w("menu")})]})}function Gi({open:l,onDismiss:r,triggerRef:o,contentRef:s,closeOnScroll:i=!0}){b.useEffect(()=>{if(!l)return;const d=h=>{const m=h.target;o.current&&m&&o.current.contains(m)||s.current&&m&&s.current.contains(m)||r()},p=()=>{i&&r()};return document.addEventListener("mousedown",d),i&&document.addEventListener("scroll",p,!0),()=>{document.removeEventListener("mousedown",d),i&&document.removeEventListener("scroll",p,!0)}},[l,r,o,s,i])}function Lb({open:l,onClose:r,onConfirm:o}){if(!l)return null;const s=async()=>{await o(),r()};return u.jsx("div",{id:"clear-history-confirm-overlay",className:"fixed inset-0 z-[1500] bg-black/50 flex items-center justify-center p-4",onClick:r,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"clear-history-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:i=>i.stopPropagation(),children:[u.jsx("div",{id:"clear-history-title",className:"text-gray-900 text-base font-semibold",children:"Clear history?"}),u.jsx("div",{id:"clear-history-description",className:"text-gray-600 text-sm mt-1",children:"This will permanently remove all completed generations from history. Generated files will still be present in your server's output folder."}),u.jsxs("div",{id:"clear-history-actions",className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:r,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:s,children:"Clear history"})]})]})})}function Ab({open:l,buttonRef:r,menuRef:o,onToggle:s,onClose:i,onGoToWorkflow:d,onOpenClearHistoryConfirm:p}){const h=lt(I=>I.setQueueItemExpanded),m=lt(I=>I.queueItemExpanded),g=lt(I=>I.showQueueMetadata),x=lt(I=>I.toggleShowQueueMetadata),y=lt(I=>I.previewVisibility),N=lt(I=>I.setPreviewVisibility),k=lt(I=>I.previewVisibilityDefault),S=lt(I=>I.setPreviewVisibilityDefault),w=lt(I=>I.pending),M=lt(I=>I.running),j=lt(I=>I.clearQueue),E=Tn(I=>I.history),z=Tn(I=>I.clearEmptyItems),L=w.length>0,_=E.length>0,R=E.some(I=>I.outputs.images.length===0),A=w.length+M.length+E.length>0,B=b.useMemo(()=>{const I=new Set;return w.forEach(O=>I.add(O.prompt_id)),M.forEach(O=>I.add(O.prompt_id)),E.forEach(O=>{O.prompt_id&&I.add(String(O.prompt_id))}),Array.from(I)},[w,M,E]),U=b.useMemo(()=>B.some(I=>m[I]===!1),[B,m]),G=b.useMemo(()=>B.some(I=>m[I]!==!1),[B,m]),W=b.useMemo(()=>{const I=new Set;return E.forEach(O=>{(O.outputs?.images??[]).some(pe=>pe.type!=="output")&&O.prompt_id&&I.add(String(O.prompt_id))}),Array.from(I)},[E]),K=A||W.length>0||k,ge=W.length>0?W.every(I=>y[I]??k):k,ae=()=>{d(),i()},le=async()=>{await j(),i()},D=()=>{B.forEach(I=>h(I,!1)),i()},$=()=>{B.forEach(I=>h(I,!0)),i()},fe=()=>{x(),i()},be=()=>{const I=!ge;S(I),W.forEach(O=>N(O,I)),i()},ve=async()=>{await z(),i()},T=()=>{i(),p()};return u.jsxs("div",{id:"queue-menu-container",className:"relative",children:[u.jsx("button",{ref:r,onClick:s,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Queue options",children:u.jsx(br,{className:"w-5 h-5 -rotate-90"})}),l?u.jsxs("div",{id:"queue-options-dropdown",ref:o,className:"absolute right-0 top-11 z-50 w-48 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ae,children:[u.jsx(Ci,{className:"w-3 h-3 text-gray-500 rotate-180"}),"Go to workflow"]}),L&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:le,children:[u.jsx(P1,{className:"w-4 h-4 text-gray-500"}),"Cancel all pending"]}),G&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:D,children:[u.jsx(Br,{className:"w-7 h-7 -ml-1 text-gray-500"}),"Fold all"]}),U&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:$,children:[u.jsx(Wn,{className:"w-7 h-7 -ml-1 text-gray-500"}),"Unfold all"]}),_&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:fe,children:[u.jsx(_0,{className:"w-4 h-4 text-gray-500"}),g?"Hide metadata":"Show metadata"]}),K&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:be,children:[ge?u.jsx(dl,{className:"w-4 h-4 text-gray-500"}):u.jsx(Ir,{className:"w-4 h-4 text-gray-500"}),ge?"Hide previews":"Show previews"]}),R&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-gray-600",onClick:ve,children:[u.jsx(Ul,{className:"w-4 h-4"}),"Clear empty items"]}),_&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:T,children:[u.jsx(Ul,{className:"w-4 h-4"}),"Clear history"]})]}):null]})}function Rb(){const[l,r]=b.useState(!1),[o,s]=b.useState(!1),i=_n(m=>m.setCurrentPanel),d=Tn(m=>m.clearHistory),p=b.useRef(null),h=b.useRef(null);return Gi({open:l,onDismiss:()=>r(!1),triggerRef:p,contentRef:h,closeOnScroll:!1}),u.jsxs(u.Fragment,{children:[u.jsx(Ab,{open:l,buttonRef:p,menuRef:h,onToggle:()=>r(m=>!m),onClose:()=>r(!1),onGoToWorkflow:()=>i("workflow"),onOpenClearHistoryConfirm:()=>s(!0)}),u.jsx(Lb,{open:o,onClose:()=>s(!1),onConfirm:d})]})}function Db({open:l,buttonRef:r,menuRef:o,onToggle:s,onClose:i,onGoToWorkflow:d}){const p=St(L=>L.source),h=St(L=>L.viewMode),m=St(L=>L.showHidden),g=St(L=>L.setSource),x=St(L=>L.setViewMode),y=St(L=>L.toggleShowHidden),N=St(L=>L.toggleSelectionMode),k=St(L=>L.setNewFolderModalOpen),S=()=>{k(!0),i()},w=()=>{g(p==="output"?"input":"output"),i()},M=()=>{d(),i()},j=()=>{N(),i()},E=()=>{y(),i()},z=()=>{x(h==="grid"?"list":"grid"),i()};return u.jsxs("div",{id:"outputs-topbar-actions",className:"relative flex items-center gap-1",children:[u.jsx("button",{ref:r,onClick:s,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Outputs options",children:u.jsx(br,{className:"w-5 h-5 -rotate-90"})}),l?u.jsxs("div",{id:"outputs-options-dropdown",ref:o,className:"absolute right-0 top-11 z-50 w-48 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:w,children:[u.jsx(gi,{className:"w-4 h-4 text-gray-500"}),p==="output"?"Switch to inputs":"Switch to outputs"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:M,children:[u.jsx(Ci,{className:"w-3 h-3 text-gray-500"}),"Go to workflow"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:j,children:[u.jsx(Hr,{className:"w-4 h-4 text-gray-500"}),"Select"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:S,children:[u.jsx(Vl,{className:"w-4 h-4 text-gray-500"}),"New folder"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:E,children:[m?u.jsx(dl,{className:"w-4 h-4 text-gray-500"}):u.jsx(Ir,{className:"w-4 h-4 text-gray-500"}),m?"Hide hidden files":"Show hidden files"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:z,children:[h==="grid"?u.jsx(F1,{className:"w-4 h-4 text-gray-500"}):u.jsx(ob,{className:"w-4 h-4 text-gray-500"}),h==="grid"?"List view":"Grid view"]})]}):null]})}function zb(){const[l,r]=b.useState(!1),o=_n(d=>d.setCurrentPanel),s=b.useRef(null),i=b.useRef(null);return Gi({open:l,onDismiss:()=>r(!1),triggerRef:s,contentRef:i,closeOnScroll:!1}),u.jsx(Db,{open:l,buttonRef:s,menuRef:i,onToggle:()=>r(d=>!d),onClose:()=>r(!1),onGoToWorkflow:()=>o("workflow")})}function Ib({action:l,onCancel:r,onContinue:o}){return l?u.jsx("div",{id:"dirty-confirm-overlay",className:"fixed inset-0 z-[1500] bg-black/50 flex items-center justify-center p-4",onClick:r,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"dirty-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:s=>s.stopPropagation(),children:[u.jsx("div",{id:"dirty-confirm-title",className:"text-gray-900 text-base font-semibold",children:"Unsaved changes"}),u.jsx("div",{id:"dirty-confirm-description",className:"text-gray-600 text-sm mt-1",children:"You have unsaved changes in the current workflow. Continue without saving?"}),u.jsxs("div",{id:"dirty-confirm-actions",className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:r,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:()=>o(l),children:"Continue"})]})]})}):null}const Bb=5;function Hb(l){const r={};for(const o of l)r[o.id]={mode:o.mode,flags:o.flags?{collapsed:!!o.flags.collapsed}:void 0,widgets_values:o.widgets_values};return r}function Vb(l,r,o,s,i,d){return{nodes:Hb(l.nodes),seedModes:{...r},collapsedGroups:{...o},hiddenGroups:{...s},collapsedSubgraphs:{...i},hiddenSubgraphs:{...d}}}function Ng(l,r){if(!l)return[];if(!r.length)return[];const o=new Set(l.nodes.map(s=>s.id));return r.filter(s=>o.has(s))}function jg(l,r){if(l===r)return!0;if(l.length!==r.length)return!1;for(let o=0;o<l.length;o+=1)if(l[o]!==r[o])return!1;return!0}const bn=al()($l((l,r)=>({bookmarkedNodeIds:[],bookmarkBarSide:"right",bookmarkBarTop:null,bookmarkRepositioningActive:!1,toggleNodeBookmark:o=>{const{bookmarkedNodeIds:s}=r(),{currentWorkflowKey:i,savedWorkflowStates:d,workflow:p,collapsedGroups:h,hiddenGroups:m,collapsedSubgraphs:g,hiddenSubgraphs:x}=ne.getState(),y=Sn.getState().seedModes,k=s.includes(o)?s.filter(S=>S!==o):s.length>=Bb?s:[...s,o];if(k!==s){if(i){let w=d[i];!w&&p&&(w=Vb(p,y,h,m,g,x)),w&&ne.setState({savedWorkflowStates:{...d,[i]:{...w,bookmarkedNodeIds:[...k]}}})}l({bookmarkedNodeIds:k})}},clearNodeBookmarks:()=>{const{currentWorkflowKey:o,savedWorkflowStates:s}=ne.getState();if(o&&s[o]){const i=s[o];ne.setState({savedWorkflowStates:{...s,[o]:{...i,bookmarkedNodeIds:[]}}})}l({bookmarkedNodeIds:[]})},setBookmarkBarPosition:o=>{l(s=>({bookmarkBarSide:o.side??s.bookmarkBarSide,bookmarkBarTop:o.top??s.bookmarkBarTop}))},setBookmarkRepositioningActive:o=>{l({bookmarkRepositioningActive:o})}}),{name:"bookmark-bar-storage",storage:Fl(()=>localStorage),partialize:l=>({bookmarkBarSide:l.bookmarkBarSide,bookmarkBarTop:l.bookmarkBarTop})}));function I0(){const{workflow:l,currentWorkflowKey:r,savedWorkflowStates:o}=ne.getState(),{bookmarkedNodeIds:s}=bn.getState();if(!l){s.length>0&&bn.setState({bookmarkedNodeIds:[]});return}if(!r){const h=Ng(l,s);jg(s,h)||bn.setState({bookmarkedNodeIds:h});return}const d=o[r]?.bookmarkedNodeIds??[],p=Ng(l,d);jg(s,p)||bn.setState({bookmarkedNodeIds:p})}ne.subscribe(()=>{I0()});I0();function Ub({open:l,buttonRef:r,menuRef:o,onToggle:s,onClose:i,onGoToQueue:d,onGoToOutputs:p,onHandleDirtyAction:h}){const m=ne(oe=>oe.workflow),g=ne(oe=>oe.nodeTypes),x=ne(oe=>oe.setNodeFold),y=ne(oe=>oe.setGroupCollapsed),N=ne(oe=>oe.setSubgraphCollapsed),k=ne(oe=>oe.setNodeHidden),S=ne(oe=>oe.showAllHiddenNodes),w=ne(oe=>oe.manuallyHiddenNodes),M=ne(oe=>oe.hiddenGroups),j=ne(oe=>oe.hiddenSubgraphs),E=bn(oe=>oe.bookmarkedNodeIds),z=bn(oe=>oe.clearNodeBookmarks),L=ne(oe=>oe.collapsedGroups),_=ne(oe=>oe.collapsedSubgraphs),R=ne(oe=>oe.workflowSource),A=ne(oe=>oe.loadWorkflow),B=ne(oe=>oe.searchOpen),U=ne(oe=>oe.setSearchOpen),G=ne(oe=>oe.setSearchQuery),W=ne(oe=>oe.connectionButtonsVisible),K=ne(oe=>oe.toggleConnectionButtonsVisible),ge=Tn(oe=>oe.history),ae=!!m,le=b.useMemo(()=>m?.nodes.map(oe=>oe.id)??[],[m]),D=b.useMemo(()=>{if(!m)return[];const oe=m.groups?.map(rt=>rt.id)??[],et=m.definitions?.subgraphs?.flatMap(rt=>rt.groups?.map(jt=>jt.id)??[])??[];return[...oe,...et]},[m]),$=b.useMemo(()=>m?.definitions?.subgraphs?.map(oe=>oe.id)??[],[m]),fe=b.useMemo(()=>m?.nodes.filter(oe=>oe.mode===4).map(oe=>oe.id)??[],[m]),be=b.useMemo(()=>!m||!g?[]:m.nodes.filter(oe=>{if(oe.type==="Fast Groups Bypasser (rgthree)")return!1;const et=Kd(g,oe).filter(jt=>!jt.connected),rt=Jd(g,oe).filter(jt=>!jt.connected);return et.length===0&&rt.length===0}).map(oe=>oe.id),[m,g]),ve=fe.length,T=be.length,I=b.useMemo(()=>Object.values(w).filter(Boolean).length,[w]),O=b.useMemo(()=>fe.filter(oe=>w[oe]).length,[fe,w]),F=b.useMemo(()=>be.filter(oe=>w[oe]).length,[be,w]),X=b.useMemo(()=>m?m.nodes.filter(oe=>!w[oe.id]):[],[m,w]),pe=b.useMemo(()=>X.some(oe=>oe.flags?.collapsed),[X]),J=b.useMemo(()=>X.some(oe=>!oe.flags?.collapsed),[X]),re=b.useMemo(()=>D.some(oe=>L[oe]??!0),[D,L]),ye=b.useMemo(()=>D.some(oe=>L[oe]===!1),[D,L]),_e=b.useMemo(()=>$.some(oe=>_[oe]??!0),[$,_]),$e=b.useMemo(()=>$.some(oe=>_[oe]===!1),[$,_]),ee=pe||re||_e,Ve=J||ye||$e,Ne=b.useMemo(()=>I>0||Object.values(M).some(Boolean)?!0:Object.values(j).some(Boolean),[I,M,j]),Ce=()=>{i()},tt=()=>{d(),Ce()},Qe=()=>{p(),Ce()},we=()=>{G(""),U(!0),Ce()},xe=()=>{K(),Ce()},Ee=()=>{le.forEach(oe=>x(oe,!0)),D.forEach(oe=>y(oe,!0)),$.forEach(oe=>N(oe,!0)),Ce()},Ae=()=>{le.forEach(oe=>x(oe,!1)),D.forEach(oe=>y(oe,!1)),$.forEach(oe=>N(oe,!1)),Ce()},ft=()=>{be.forEach(oe=>k(oe,!0)),Ce()},ut=()=>{O>0?fe.forEach(oe=>k(oe,!1)):fe.forEach(oe=>k(oe,!0)),Ce()},Ze=()=>{S(),Ce()},Se=()=>{z(),Ce()},Le=async()=>{if(!(!R||R.type!=="user")){try{const oe=await j0(R.filename);A(oe,R.filename,{fresh:!0,source:R})}catch(oe){console.error("Failed to reload workflow:",oe)}Ce()}},Xe=async()=>{if(!(!R||R.type!=="template")){try{const oe=await C0(R.moduleName,R.templateName);A(oe,`${R.moduleName}/${R.templateName}`,{fresh:!0,source:R})}catch(oe){console.error("Failed to reload template:",oe)}Ce()}},We=()=>{if(!R||R.type!=="history")return;const oe=ge.find(et=>et.prompt_id===R.promptId);oe?.workflow&&A(oe.workflow,`history-${R.promptId}.json`,{source:R}),Ce()},Pe=()=>{h("clearWorkflowCache")},Ge=()=>{h("unload")},Nt=()=>{h("clearAllCache")};return u.jsxs("div",{id:"workflow-menu-container",className:"relative",children:[u.jsx("button",{ref:r,onClick:s,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Workflow options",children:u.jsx(br,{className:"w-5 h-5 -rotate-90"})}),l?u.jsxs("div",{id:"workflow-options-dropdown",ref:o,className:"absolute right-0 top-11 z-50 w-52 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:tt,children:[u.jsx(Ci,{className:"w-3 h-3 text-gray-500"}),"Go to queue"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Qe,children:[u.jsx(Ci,{className:"w-3 h-3 text-gray-500 rotate-180"}),"Go to outputs"]}),!B&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:we,children:[u.jsx(ab,{className:"w-4 h-4 text-gray-500"}),"Search"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:xe,children:[W?u.jsx(dl,{className:"w-4 h-4 text-gray-500"}):u.jsx(Ir,{className:"w-4 h-4 text-gray-500"}),W?"Hide connection buttons":"Show connection buttons"]}),Ve&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ee,children:[u.jsx(Br,{className:"w-6 h-6 -ml-1 text-gray-500"}),"Fold all"]}),ee&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ae,children:[u.jsx(Wn,{className:"w-6 h-6 -ml-1 text-gray-500"}),"Unfold all"]}),T>0&&F<T&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ft,children:[u.jsx(dl,{className:"w-4 h-4 text-gray-500"}),"Hide static nodes (",T,")"]}),ve>0&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ut,children:[O>0?u.jsx(Ir,{className:"w-4 h-4 text-gray-500"}):u.jsx(dl,{className:"w-4 h-4 text-gray-500"}),O>0?"Show bypassed nodes":"Hide bypassed nodes"," (",ve,")"]}),Ne&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ze,children:[u.jsx(Ir,{className:"w-4 h-4 text-gray-500"}),"Show all hidden nodes"]}),E.length>0&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Se,children:[u.jsx(Ul,{className:"w-4 h-4 text-gray-500"}),"Clear bookmarks"]}),R&&(R.type==="user"?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Le,children:[u.jsx(gi,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):R.type==="template"?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Xe,children:[u.jsx(gi,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):R.type==="history"&&ge.find(oe=>oe.prompt_id===R.promptId)?.workflow?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:We,children:[u.jsx(gi,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):null),ae&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Pe,children:[u.jsx(Ul,{className:"w-4 h-4 text-gray-500"}),"Clear workflow cache"]}),ae&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:Ge,children:[u.jsx(Z1,{className:"w-4 h-4"}),"Unload workflow"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:Nt,children:[u.jsx(Ul,{className:"w-4 h-4"}),"Clear all cache"]})]}):null]})}function Gb(){const[l,r]=b.useState(null),[o,s]=b.useState(null),i=ne(j=>j.workflow),d=ne(j=>j.originalWorkflow),p=ne(j=>j.clearWorkflowCache),h=ne(j=>j.unloadWorkflow),m=_n(j=>j.setCurrentPanel),g=ne(j=>j.workflowLoadedAt),x=b.useRef(null),y=b.useRef(null),N=l!==null&&l===g,k=b.useMemo(()=>!!(i&&d&&JSON.stringify(i)!==JSON.stringify(d)),[i,d]);Gi({open:N,onDismiss:()=>r(null),triggerRef:x,contentRef:y,closeOnScroll:!1});const S=async()=>{if(localStorage.clear(),sessionStorage.clear(),"caches"in window){const j=await caches.keys();await Promise.all(j.map(E=>caches.delete(E)))}document.cookie.split(";").forEach(j=>{const[E]=j.split("=");document.cookie=`${E.trim()}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}),window.location.reload()},w=j=>{if(k){r(null),s(j);return}j==="unload"?h():j==="clearWorkflowCache"?p():S(),r(null)},M=async j=>{s(null),j==="unload"?h():j==="clearWorkflowCache"?p():j==="clearAllCache"&&await S()};return u.jsxs(u.Fragment,{children:[u.jsx(Ub,{open:N,buttonRef:x,menuRef:y,onToggle:()=>r(N?null:g),onClose:()=>r(null),onGoToQueue:()=>m("queue"),onGoToOutputs:()=>m("outputs"),onHandleDirtyAction:w}),u.jsx(Ib,{action:o,onCancel:()=>s(null),onContinue:M})]})}function qb(l){return l==="queue"?['[data-queue-list="true"]','[data-node-list="true"]']:['[data-node-list="true"]','[data-queue-list="true"]']}function Wb({mode:l="workflow"}){const r=b.useRef(null),o=b.useRef(0),s=Ld(E=>E.appMenuOpen),i=Ld(E=>E.setAppMenuOpen),d=b.useCallback(()=>{const E=Date.now(),z=E-o.current;if(o.current=E,z<300){if(l==="workflow"){window.dispatchEvent(new Event("workflow-scroll-to-top")),"vibrate"in navigator&&navigator.vibrate(10);return}if(l==="outputs"){const _=document.querySelector("#outputs-content-container");_&&(_.scrollTo({top:0,behavior:"auto"}),"vibrate"in navigator&&navigator.vibrate(10));return}const L=qb(l);for(const _ of L){const R=document.querySelector(_);if(R&&R.scrollHeight>0&&!R.closest(".pointer-events-none")){R.scrollTo({top:0,behavior:"smooth"}),"vibrate"in navigator&&navigator.vibrate(10);break}}}},[l]),p=ne(E=>E.workflow),h=ne(E=>E.originalWorkflow),m=ne(E=>E.currentFilename),g=ne(E=>E.manuallyHiddenNodes),x=ne(E=>E.hiddenSubgraphs),y=lt(E=>E.pending),N=Tn(E=>E.history),k=St(E=>E.source),S=p&&h&&JSON.stringify(p)!==JSON.stringify(h),w=b.useMemo(()=>{if(!p)return"";const E=p.nodes.length,z=Object.keys(g).length,L=Object.values(x).some(Boolean);if(z===0&&!L)return`${E} nodes ${S?"[Unsaved]":""}`.trim();const _=L?p.nodes.reduce((A,B)=>{const G=B.properties?.__mobile_origin;if(!G||typeof G!="object"||G.scope!=="subgraph")return A;const K=G.subgraphId;return K&&x[K]?A+1:A},0):0,R=z+_;return`${E} nodes (${R} hidden) ${S?"[Unsaved]":""}`.trim()},[p,g,x,S]);b.useEffect(()=>{const E=r.current;if(!E)return;const z=()=>{const _=E.getBoundingClientRect();document.documentElement.style.setProperty("--top-bar-offset",`${_.height}px`)};z();const L=new ResizeObserver(z);return L.observe(E),()=>L.disconnect()},[]);const M=b.useMemo(()=>{switch(l){case"queue":return"Queue";case"outputs":return k==="output"?"Outputs":"Inputs";default:return m?m.replace(".json",""):p?"Untitled":"ComfyUI Mobile"}},[l,k,m,p]),j=b.useMemo(()=>{switch(l){case"queue":return u.jsx(Rb,{});case"outputs":return u.jsx(zb,{});default:return u.jsx(Gb,{})}},[l]);return u.jsxs("div",{id:"top-bar-root",ref:r,className:"fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-[2000] safe-area-top","data-top-bar":"true",children:[u.jsxs("div",{id:"top-bar-content",className:"flex items-center justify-between px-4 py-3",children:[u.jsx("button",{onClick:()=>i(!0),className:`w-10 h-10 flex items-center justify-center rounded-lg
                     text-gray-700 hover:bg-gray-100`,children:u.jsx(lb,{className:"w-6 h-6"})}),u.jsxs("div",{id:"top-bar-title-container",className:"flex-1 text-center min-w-0 px-2 cursor-pointer",onClick:d,children:[u.jsxs("h1",{id:"top-bar-title",className:"font-semibold text-gray-900 text-lg truncate flex items-center justify-center",children:[u.jsx("span",{className:"truncate",children:M}),l==="workflow"&&S&&u.jsx("span",{id:"dirty-indicator",className:"text-blue-500 ml-1 font-bold",children:"*"})]}),l==="workflow"&&p&&u.jsx("p",{className:"node-count-display text-xs text-gray-500",children:w}),l==="queue"&&u.jsxs("p",{className:"run-count-display text-xs text-gray-500",children:[N.length," ",N.length===1?"run":"runs",y.length>0&&` (${y.length} pending)`]})]}),u.jsx("div",{id:"top-bar-right-slot",className:"w-10 h-10 flex items-center justify-center",children:j})]}),u.jsx(_b,{open:s,onClose:()=>i(!1)})]})}function Dd(l,r){const o=new Map;if(r.length===0)return o;const s=[...r].sort((i,d)=>i.id-d.id);for(const i of l){const[d,p]=i.pos,[h,m]=i.size,g=d+h/2,x=p+m/2;for(const y of s){const[N,k,S,w]=y.bounding;if(g>=N&&g<=N+S&&x>=k&&x<=k+w){o.set(i.id,y.id);break}}}return o}function Fb(l){const r=l.groups??[];return Dd(l.nodes,r)}function $b(l){const o=l.properties?.__mobile_origin;if(!o||typeof o!="object")return null;const s=o.scope;if(s==="root"){const i=o.nodeId;return typeof i=="number"?{scope:"root",nodeId:i}:null}if(s==="subgraph"){const i=o.nodeId,d=o.subgraphId;if(typeof i=="number"&&typeof d=="string")return{scope:"subgraph",subgraphId:d,nodeId:i}}return null}function Yb(l,r,o,s,i={},d={}){const p=r.groups??[],h=r.definitions?.subgraphs??[],m=new Map(h.map(G=>[G.id,G])),g=r.extra?.__mobile_subgraph_group_map,x=new Map;if(g&&typeof g=="object")for(const[G,W]of Object.entries(g))(typeof W=="number"||W===null)&&x.set(G,W);for(const G of h)x.has(G.id)||x.set(G.id,null);const y=new Map;for(const G of l){const W=$b(G);W?.scope==="subgraph"&&W.subgraphId&&y.set(G.id,W.subgraphId)}const N=new Map;for(const G of h)N.set(G.id,[]);for(const G of l){const W=y.get(G.id);W&&N.get(W)?.push(G)}const k=l.filter(G=>!y.has(G.id)),S=Dd(k,p),w=new Map(p.map(G=>[G.id,G])),M=[],j=new Set;for(const G of l){const W=y.get(G.id);if(W){j.has(W)||(M.push({kind:"subgraph",subgraphId:W}),j.add(W));continue}M.push({kind:"node",node:G})}const E=new Map;for(const G of M){const W=G.kind==="node"?S.get(G.node.id):x.get(G.subgraphId)??null;if(W==null)continue;const K=E.get(W);K?K.push(G):E.set(W,[G])}const z=G=>G.kind==="node"?1:d[G.subgraphId]?0:N.get(G.subgraphId)?.length??0,L=(G,W,K)=>({type:"node",node:G,groupId:W,subgraphId:K}),_=G=>{const W=m.get(G);if(!W)return[];const K=N.get(G)??[],ge=W.groups??[];if(ge.length===0)return K.map(ve=>L(ve,null,G));const ae=Dd(K,ge),le=new Map(ge.map(ve=>[ve.id,ve])),D=K.map(ve=>({kind:"node",node:ve})),$=new Map;for(const ve of D){const T=ae.get(ve.node.id);if(T===void 0)continue;const I=$.get(T);I?I.push(ve):$.set(T,[ve])}const fe=[],be=new Set;for(const ve of D){const T=ae.get(ve.node.id);if(T!==void 0){if(be.has(T))continue;const I=le.get(T),O=$.get(T)??[];if(I&&!s[I.id]){const F=O.reduce((J,re)=>J+z(re),0),X=o[I.id]??!0,pe=X?[]:O.map(J=>L(J.node,I.id,G));fe.push({type:"group",group:I,nodeCount:F,isCollapsed:X,subgraphId:G,children:pe})}be.add(T);continue}fe.push(L(ve.node,null,G))}for(const ve of ge)s[ve.id]||be.has(ve.id)||fe.push({type:"group",group:ve,nodeCount:0,isCollapsed:o[ve.id]??!0,subgraphId:G,children:[]});return fe},R=(G,W)=>{if(d[G])return null;const K=m.get(G);if(!K)return null;const ge=N.get(G)??[],ae=i[G]??!0,le=ae?[]:_(G);return{type:"subgraph",subgraph:K,nodeCount:ge.length,isCollapsed:ae,groupId:W,children:le}},A=(G,W,K)=>{if(s[G.id])return null;const ge=W.reduce((D,$)=>D+z($),0),ae=o[G.id]??!0,le=ae?[]:W.map(D=>D.kind==="node"?L(D.node,G.id,K):R(D.subgraphId,G.id)).filter(Boolean);return{type:"group",group:G,nodeCount:ge,isCollapsed:ae,subgraphId:K,children:le}},B=[],U=new Set;for(const G of M){const W=G.kind==="node"?S.get(G.node.id):x.get(G.subgraphId)??null;if(W!=null){if(U.has(W))continue;const K=w.get(W),ge=E.get(W)??[];if(K){const ae=A(K,ge,null);ae&&B.push(ae)}else for(const ae of ge)if(ae.kind==="node")B.push(L(ae.node,null,null));else{const le=R(ae.subgraphId,null);le&&B.push(le)}U.add(W);continue}if(G.kind==="node")B.push(L(G.node,null,null));else{const K=R(G.subgraphId,null);K&&B.push(K)}}for(const G of p){if(U.has(G.id))continue;const W=E.get(G.id)??[],K=A(G,W,null);K&&B.push(K),U.add(G.id)}return B}function Gl(l,r){const o=l.replace("#","");let s,i,d;if(o.length===3)s=parseInt(o[0]+o[0],16),i=parseInt(o[1]+o[1],16),d=parseInt(o[2]+o[2],16);else if(o.length===6)s=parseInt(o.slice(0,2),16),i=parseInt(o.slice(2,4),16),d=parseInt(o.slice(4,6),16);else return"rgba(0, 0, 0, 0)";return`rgba(${s}, ${i}, ${d}, ${r})`}function Go({workflow:l,runKey:r,isRunning:o,workflowDurationStats:s}){const[i,d]=b.useState(null),p=b.useRef(null),h=b.useRef(null),m=b.useRef(null),g=b.useRef(null),x=b.useRef(null),y=b.useRef(0),N=b.useRef(null);return b.useEffect(()=>{let k=null,S=null;const w=()=>{if(!l){N.current!==null&&(N.current=null,d(null)),m.current=null,g.current=null,x.current=null,p.current=null,y.current=0,h.current=null;return}const M=250,j=Date.now();let E=null;if(!r)h.current?(m.current=j+M,h.current=null,y.current=100,E=100):m.current&&j<m.current?E=100:(m.current=null,g.current=null,x.current=null,p.current=null,y.current=0,E=null);else if(m.current&&j<m.current)g.current=r,E=100;else if(g.current&&j>=(m.current??0)&&(h.current=g.current,g.current=null,p.current=j-M,y.current=0,m.current=null),h.current&&r!==h.current)x.current!==r&&(x.current=r,m.current=j+M,y.current=100),E=100;else{h.current!==r&&(p.current=j,h.current=r,y.current=0,m.current=null);const z=Math.max(0,j-(p.current??j)),L=ji(l),_=s[L]?.avgMs??null;let R;if(_){const B=z/_*100;R=Math.min(99,Math.max(0,B))}else{const B=z/1e3;B<=50?R=B:R=50+(B-50)*.5,R=Math.min(90,R)}const A=Math.max(y.current,R);y.current=A,E=Math.round(A)}N.current!==E&&(N.current=E,d(E))};return l?(k=setTimeout(w,0),(o||m.current||r)&&(S=setInterval(w,200))):k=setTimeout(w,0),()=>{k&&clearTimeout(k),S&&clearInterval(S)}},[l,r,o,s]),i}const Qb=new Set(["mp4","webm","mkv","mov","avi","m4v"]);function qo(l){const r=l.split(".").pop()?.toLowerCase()??"";return Qb.has(r)?"video":"image"}function ja(l){return qo(l)==="video"}function Cg(l){const r=String(l).split(",")[0].trim();return["IMAGE","LATENT","MODEL","CLIP","VAE","CONDITIONING","INT","FLOAT","STRING","BOOLEAN","MASK"].includes(r)?`type-${r}`:"type-default"}function kg(l){return String(l).split(",").map(r=>r.trim().toUpperCase()).filter(Boolean)}const Mg=b.memo(function({slot:r,nodeId:o,direction:s,slotIndex:i,compact:d=!1,hideLabel:p=!1}){const h=ne(ae=>ae.workflow),m=ne(ae=>ae.scrollToNode),g=ne(ae=>ae.revealNodeWithParents),x=ne(ae=>ae.nodeTypes),y=ne(ae=>ae.manuallyHiddenNodes),[N,k]=b.useState(!1),S=b.useRef(null),w=b.useRef(null),[M,j]=b.useState(null),E=b.useRef(null),z=b.useMemo(()=>{if(!h)return[];const ae=[];if(s==="input"){if(r.link!=null){const D=Lo(h,o,i);D&&ae.push(D.node)}}else{const le=Ni(h,o,i);for(const D of le)ae.push(D.node)}return ae},[h,o,s,r,i]),{effectiveNodes:L,directNodes:_,bypassedTargets:R}=b.useMemo(()=>{if(!h)return{effectiveNodes:[],directNodes:[],bypassedTargets:[]};if(Object.keys(y).length===0)return{effectiveNodes:z,directNodes:z,bypassedTargets:[]};const ae=new Map(h.nodes.map(F=>[F.id,F])),le=F=>!!y[F.id],D=new Set,$=F=>{if(D.has(F))return[];D.add(F);const X=ae.get(F);if(!X)return[];const pe=[];return X.outputs?.forEach((J,re)=>{Ni(h,F,re).forEach(_e=>{const $e=_e.node;le($e)?pe.push(...$($e.id)):pe.push($e)})}),pe},fe=F=>{if(D.has(F))return[];D.add(F);const X=ae.get(F);if(!X)return[];const pe=[];return X.inputs?.forEach((J,re)=>{if(J.link===null)return;const ye=Lo(h,F,re);ye&&(le(ye.node)?pe.push(...fe(ye.node.id)):pe.push(ye.node))}),pe},be=[],ve=[];z.forEach(F=>{le(F)?s==="input"?ve.push(...fe(F.id)):ve.push(...$(F.id)):be.push(F)});const T=new Set(be.map(F=>F.id));let O=(F=>{const X=[],pe=new Set;return F.forEach(J=>{T.has(J.id)||pe.has(J.id)||(pe.add(J.id),X.push(J))}),X})(ve);if(s==="input"&&O.length>1){const F=new Set(kg(r.type)),X=O.filter(pe=>pe.outputs?.some(J=>kg(J.type).some(re=>F.has(re))));X.length>0&&(O=X)}return{effectiveNodes:[...be,...O],directNodes:be,bypassedTargets:O}},[z,h,s,r.type,y]),A=L.length,B=A===1?L[0].id:null,U=A>0,G=()=>{if(U){if(A===1&&B!==null){g(B),m(B);return}k(ae=>!ae)}},W=ae=>le=>{le.stopPropagation(),g(ae),m(ae),k(!1)};b.useLayoutEffect(()=>{if(!N)return;const ae=()=>{const le=w.current;if(!le)return;const D=le.getBoundingClientRect(),$=8;j({top:D.bottom+6,...s==="input"?{left:Math.min(D.left,window.innerWidth-$)}:{right:Math.max($,window.innerWidth-D.right)}})};return E.current=ae,ae(),()=>{}},[N,A,s]),b.useEffect(()=>{if(!N)return;const ae=()=>E.current?.(),le=$=>{!S.current||!$.target||w.current?.contains($.target)||S.current.contains($.target)||k(!1)},D=$=>{const fe=$.target;S.current&&fe&&S.current.contains(fe)||k(!1)};return document.addEventListener("mousedown",le),document.addEventListener("scroll",D,!0),window.addEventListener("resize",ae),()=>{document.removeEventListener("mousedown",le),document.removeEventListener("scroll",D,!0),window.removeEventListener("resize",ae)}},[N]);const K=d?"w-7 h-7":"w-10 h-10",ge=d?"text-sm":"text-base";return h?u.jsxs("div",{className:"flex items-center gap-2",children:[s==="input"?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:G,disabled:!U,ref:w,className:`
              flex items-center justify-center rounded-full font-medium
              ${K} flex-shrink-0
              transition-opacity
              ${Cg(r.type)}
              ${U?"opacity-100 cursor-pointer active:scale-95":"opacity-40 cursor-not-allowed"}
            `,children:U&&u.jsx("span",{className:ge,children:""})}),!p&&u.jsx("span",{className:"text-sm text-gray-700 truncate",children:r.localized_name||r.name})]}):u.jsxs(u.Fragment,{children:[!p&&u.jsx("span",{className:"text-sm text-gray-700 truncate",children:r.localized_name||r.name}),A>1&&u.jsx("span",{className:"bg-gray-200 text-gray-700 rounded-full px-2 py-0.5 text-xs font-medium flex-shrink-0",children:A}),u.jsx("button",{onClick:G,disabled:!U,ref:w,className:`
              flex items-center justify-center rounded-full font-medium
              ${K} flex-shrink-0
              transition-opacity
              ${Cg(r.type)}
              ${U?"opacity-100 cursor-pointer active:scale-95":"opacity-40 cursor-not-allowed"}
            `,children:U&&u.jsx("span",{className:ge,children:""})})]}),N&&M&&rl.createPortal(u.jsxs("div",{ref:S,className:"fixed z-[1000] bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:M.top,right:M.right,left:M.left,maxWidth:"calc(100vw - 16px)"},children:[_.map(ae=>{const D=x?.[ae.type]?.display_name||ae.type;return u.jsxs("button",{className:"block text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:W(ae.id),children:[D," #",ae.id]},ae.id)}),_.length>0&&R.length>0&&u.jsx("div",{className:"px-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"h-px flex-1 bg-gray-200"}),u.jsx("span",{className:"text-[10px] text-gray-400",children:"(via bypassed)"}),u.jsx("div",{className:"h-px flex-1 bg-gray-200"})]})}),R.map(ae=>{const D=x?.[ae.type]?.display_name||ae.type;return u.jsxs("button",{className:"block text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:W(ae.id),children:[D," #",ae.id]},`bypassed-${ae.id}`)})]}),document.body)]}):null});function Xb({nodeId:l,inputs:r,outputs:o,allInputs:s,allOutputs:i}){return!ne(p=>p.connectionButtonsVisible)||r.length===0&&o.length===0?null:u.jsxs("div",{className:"mb-3 grid grid-cols-2 gap-3",children:[u.jsx("div",{children:r.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Inputs"}),u.jsx("div",{className:"flex flex-col gap-1.5",children:r.map(p=>{const h=s.findIndex(m=>m.name===p.name);return u.jsx(Mg,{slot:p,nodeId:l,direction:"input",slotIndex:h},`input-${p.name}`)})})]})}),u.jsx("div",{className:"flex flex-col items-end",children:o.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide text-right w-full",children:"Outputs"}),u.jsx("div",{className:"flex flex-col gap-1.5 w-full items-end",children:o.map(p=>{const h=i.findIndex(m=>m.name===p.name);return u.jsx(Mg,{slot:p,nodeId:l,direction:"output",slotIndex:h},`output-${h}`)})})]})})]})}function Pb({nodeId:l,isBypassed:r,onEditLabel:o,pinnableWidgets:s,singlePinnableWidget:i,isSingleWidgetPinned:d,hasPinnedWidget:p,toggleWidgetPin:h,setPinnedWidget:m,isNodeBookmarked:g,canAddNodeBookmark:x,onToggleNodeBookmark:y,toggleBypass:N,hideNode:k,connectionHighlightMode:S,setConnectionHighlightMode:w,leftLineCount:M,rightLineCount:j}){const[E,z]=b.useState(!1),[L,_]=b.useState(!1),R=b.useRef(null),A=b.useRef(null),[B,U]=b.useState(null);b.useEffect(()=>{if(!E)return;const T=()=>{const F=A.current;if(!F)return;const X=F.getBoundingClientRect();U({top:X.bottom+6,left:X.right-160})};T();const I=F=>{!R.current||!F.target||A.current?.contains(F.target)||R.current.contains(F.target)||(z(!1),_(!1))},O=F=>{const X=F.target;R.current&&X&&R.current.contains(X)||(z(!1),_(!1))};return document.addEventListener("mousedown",I),document.addEventListener("scroll",O,!0),window.addEventListener("resize",T),()=>{document.removeEventListener("mousedown",I),document.removeEventListener("scroll",O,!0),window.removeEventListener("resize",T)}},[E]);const G=M>0||j>0,W=()=>{z(!1),_(!1)},K=T=>{T.stopPropagation();const I=M>0,O=j>0;if(!I&&!O)return;const F=I&&O?["off","inputs","outputs","both"]:I?["off","inputs"]:["off","outputs"],X=F.indexOf(S),pe=F[(X+1)%F.length];w(l,pe)},ge=T=>{T.stopPropagation(),z(I=>!I)},ae=T=>{T.stopPropagation(),o(),W()},le=T=>{T.stopPropagation(),N(l),W()},D=T=>{T.stopPropagation(),k(l),W()},$=T=>{T.stopPropagation(),i&&(h(i.widgetIndex,i.name,i.type,i.options),W())},fe=T=>{T.stopPropagation(),m(null),W()},be=T=>{T.stopPropagation(),_(!L)},ve=T=>I=>{I.stopPropagation(),m({nodeId:l,widgetIndex:T.widgetIndex,widgetName:T.name,widgetType:T.type,options:T.options}),W()};return u.jsxs("div",{className:"flex items-center gap-1 relative",onClick:T=>T.stopPropagation(),children:[G&&u.jsx("button",{type:"button",className:"w-8 h-8 flex items-center justify-center","aria-pressed":S!=="off","aria-label":"Highlight connected nodes",onClick:K,children:u.jsx(sb,{className:"w-6 h-6 overflow-visible",nodeId:l,connectionHighlightMode:S,leftLineCount:M,rightLineCount:j})}),u.jsx("button",{onClick:ge,className:"w-8 h-8 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent","aria-label":"Node options",ref:A,children:g?u.jsx(Vr,{className:"w-5 h-5 text-yellow-500"}):u.jsx(br,{className:"w-5 h-5 -rotate-90"})}),E&&B&&rl.createPortal(u.jsxs("div",{ref:R,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:B.top,left:B.left},children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ae,children:[u.jsx(ef,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),(g||x)&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:T=>{T.stopPropagation(),y(),W()},children:[g?u.jsx(Mi,{className:"w-4 h-4 text-gray-500"}):u.jsx(Vr,{className:"w-4 h-4 text-yellow-500"}),g?"Remove bookmark":"Bookmark node"]}),u.jsx("div",{className:"border-t border-gray-200 my-1"}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:le,children:[u.jsx(Rd,{className:"w-4 h-4 text-gray-500",isBypassed:r}),r?"Engage node":"Bypass node"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:D,children:[u.jsx(dl,{className:"w-4 h-4 text-gray-500"}),"Hide node"]}),s.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"border-t border-gray-200 my-1"}),i?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:$,children:[d?u.jsx(Ro,{className:"w-4 h-4 text-fuchsia-500"}):u.jsx(Ad,{className:"w-4 h-4 text-gray-500"}),d?"Remove pin":"Pin widget"]}):u.jsxs(u.Fragment,{children:[p&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:fe,children:[u.jsx(Ro,{className:"w-4 h-4 text-fuchsia-500"}),"Remove pin"]}),u.jsxs("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex items-center justify-between",onClick:be,children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx(Ad,{className:"w-4 h-4 text-gray-500"}),"Pin widget"]}),u.jsx(Oi,{className:`w-4 h-4 text-gray-400 transition-transform ${L?"rotate-90":""}`})]}),L&&u.jsx("div",{className:"border-t border-gray-100 bg-gray-50 max-h-48 overflow-auto",children:s.map(T=>u.jsx("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 text-gray-700",onClick:ve(T),children:T.name},T.widgetIndex))})]})]})]}),document.body)]})}function Zb({nodeId:l,open:r,errors:o,anchorRef:s,onClose:i}){const d=x=>{x.stopPropagation(),i()},[p,h]=b.useState(null),m=b.useRef(null),g=_n(x=>x.currentPanel);return b.useEffect(()=>{r&&g!=="workflow"&&i()},[r,g,i]),b.useEffect(()=>{if(!r)return;const x=()=>{const k=s.current;if(!k)return;const S=k.getBoundingClientRect();h({top:S.bottom+8,left:Math.max(16,Math.min(S.left+S.width/2-140,window.innerWidth-296))})};x();const y=k=>{k.target&&(s.current?.contains(k.target)||m.current?.contains(k.target)||i())},N=()=>{i()};return document.addEventListener("pointerdown",y),document.addEventListener("scroll",N,!0),window.addEventListener("resize",x),()=>{document.removeEventListener("pointerdown",y),document.removeEventListener("scroll",N,!0),window.removeEventListener("resize",x)}},[r,l,i,s]),!r||o.length===0||!p?null:rl.createPortal(u.jsxs("div",{ref:m,id:`error-popover-${l}`,className:"error-popover-root fixed z-[2000] bg-red-50 border border-red-700 rounded-lg shadow-lg w-72 max-h-64 overflow-auto",style:{top:p.top,left:p.left},children:[u.jsxs("div",{id:`error-popover-header-${l}`,className:"popover-header flex items-center justify-between px-3 py-2 border-b border-red-200 bg-red-700",children:[u.jsxs("span",{id:`error-popover-title-${l}`,className:"popover-title text-sm font-semibold text-white",children:[o.length," ",o.length===1?"Error":"Errors"]}),u.jsx("button",{type:"button",onClick:d,className:"w-6 h-6 flex items-center justify-center text-red-200 hover:text-white rounded","aria-label":"Close",children:u.jsx(nf,{className:"w-4 h-4"})})]}),u.jsx("div",{id:`error-popover-body-${l}`,className:"popover-body p-3 space-y-2 bg-red-100",children:o.map((x,y)=>{const N=x.details?.toLowerCase().replace(/[_\s]/g,"")||"",k=x.inputName?.toLowerCase().replace(/[_\s]/g,"")||"",S=!x.details||x.details===x.message||x.inputName&&N===k;return u.jsxs("div",{className:"error-item flex items-start gap-2 text-sm",children:[u.jsx("span",{className:"error-dot mt-1.5 h-1.5 w-1.5 rounded-full bg-red-700 shrink-0","aria-hidden":"true"}),u.jsxs("div",{className:"error-content-wrapper min-w-0",children:[x.inputName&&u.jsx("div",{className:"error-input-name font-medium text-red-900 mb-0.5",children:x.inputName}),u.jsx("div",{className:"error-message-text text-red-800",children:x.message}),!S&&u.jsx("div",{className:"error-details-text text-xs text-red-700 mt-0.5 break-words",children:x.details})]})]},y)})})]}),document.body)}function Kb({noteText:l,noteLinkified:r,noteWidgetIndex:o,isEditingNote:s,setIsEditingNote:i,onUpdateNote:d,noteTextareaRef:p,onNoteTap:h}){const m=x=>{o!==null&&d(x)},g=x=>{o!==null&&d(x.target.value)};return u.jsxs("div",{className:"mb-3 group","data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1.5","data-textarea-header":"true",children:[u.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Note"}),s&&u.jsx(Eo,{value:l,onChange:m,textareaRef:p,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),s?u.jsx("textarea",{ref:p,value:l,onChange:g,onBlur:()=>i(!1),className:"w-full p-3 border rounded-lg text-base resize-none note-display",rows:Math.min(8,Math.max(3,l.split(`
`).length))}):u.jsx("div",{className:"w-full p-3 border rounded-lg text-base whitespace-pre-wrap break-words note-display",onDoubleClick:()=>i(!0),onTouchEnd:h,children:r})]})}function Jb({show:l,previewImage:r,displayName:o,onImageClick:s,isExecuting:i,overallProgress:d,displayNodeProgress:p}){return!l||!r?null:u.jsxs("div",{className:"mb-3",children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Output Preview"}),u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:qn(r.filename,r.subfolder,r.type),alt:`${o} output`,className:"w-full h-auto rounded-lg border border-gray-100",loading:"lazy",onClick:s},"preview"),i&&d!==null&&u.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-lg flex items-end p-3",children:u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs text-white/90 mb-1",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[p,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-white/30 overflow-hidden",children:u.jsx("div",{className:"h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,p))}%`}})}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-white/90 mt-2 mb-1",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[d,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-white/30 overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,d))}%`}})})]})})]})]})}function e2({nodeId:l,displayName:r,isEditingLabel:o,labelValue:s,labelInputRef:i,onLabelChange:d,onLabelBlur:p,isCollapsed:h,isBypassed:m,isExecuting:g,overallProgress:x,hasErrors:y,errorIconRef:N,errorPopoverOpen:k,setErrorPopoverOpen:S,toggleNodeFold:w,rightSlot:M}){const j=()=>{o||w(l)},E=L=>{L.stopPropagation(),w(l)},z=L=>{L.stopPropagation(),S(!k)};return u.jsxs("div",{id:`node-header-${l}`,className:`node-header flex items-center justify-between cursor-pointer gap-3 ${h?"":"mb-3 pb-2 border-b"} ${m?`bg-purple-200 border-purple-300 px-3 -mx-3 -mt-1 pt-1 rounded-t-xl ${h?"pb-1 -mb-1 rounded-b-xl":""}`:h?"":"border-gray-100"}`,onClick:j,children:[u.jsxs("div",{id:`node-title-container-${l}`,className:"flex items-center gap-1 min-w-0",children:[u.jsx("button",{onClick:E,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-400 hover:text-gray-600 shrink-0",children:h?u.jsx(Br,{className:"w-6 h-6"}):u.jsx(Wn,{className:"w-6 h-6"})}),o?u.jsx("input",{ref:i,value:s,onChange:L=>d(L.target.value),onBlur:p,onKeyDown:L=>{(L.key==="Enter"||L.key==="Escape")&&L.currentTarget.blur()},onClick:L=>L.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{id:`node-display-name-${l}`,className:`font-semibold text-gray-900 select-none flex-1 min-w-0 ${h?"whitespace-nowrap overflow-hidden text-ellipsis":"whitespace-normal break-words"}`,children:r}),u.jsxs("span",{id:`node-id-badge-${l}`,className:"text-xs text-gray-400 min-w-[2ch] text-right",children:["#",l]}),y&&u.jsx("button",{ref:N,type:"button",onClick:z,className:"w-5 h-5 flex items-center justify-center text-red-500 hover:text-red-600 shrink-0","aria-label":"View errors",children:u.jsx(R0,{className:"w-4 h-4"})}),g&&h&&x!==null?u.jsxs("div",{id:`node-progress-indicator-${l}`,className:"relative w-6 h-6 flex items-center justify-center",children:[u.jsx(yb,{className:"absolute",width:"24",height:"24",style:{transform:"rotate(-90deg)"},progress:x,radius:10}),u.jsx("span",{id:`node-progress-text-${l}`,className:"text-[8px] font-bold text-blue-600",children:x})]}):null,g&&!h?u.jsx("span",{id:`node-executing-pulse-${l}`,className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}):null]}),u.jsx("div",{id:`node-header-right-slot-${l}`,className:"header-right-slot",children:M})]})}function rf({isOpen:l,title:r,onClose:o,children:s,headerActions:i}){return b.useEffect(()=>{if(l){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=d}}},[l]),l?rl.createPortal(u.jsx("div",{className:"fixed inset-0 z-[2100] bg-gray-400/40 dark:bg-black/50 backdrop-blur-sm safe-area-top",onClick:o,children:u.jsxs("div",{className:"w-full h-full flex flex-col",style:{paddingTop:"env(safe-area-inset-top, 0px)",paddingBottom:"var(--bottom-bar-offset, 0px)"},onClick:d=>d.stopPropagation(),children:[u.jsxs("div",{className:"bg-white dark:bg-[#151a23] p-4 border-b border-gray-200 dark:border-gray-800 shadow-sm relative z-50 min-h-0 overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200 truncate pr-4 pt-1 flex-1",children:r}),u.jsxs("div",{className:"flex items-center gap-2",children:[i,u.jsx("button",{onClick:o,className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Close",children:u.jsx(nf,{className:"w-6 h-6"})})]})]}),u.jsx("div",{className:"mt-2",children:s})]}),u.jsx("div",{className:"flex-1",onClick:o})]})}),document.body):null}function ka({isPinned:l,onToggle:r}){if(!l||!r)return null;const o=s=>{s.preventDefault(),s.stopPropagation(),r()};return u.jsx("button",{type:"button",onClick:o,className:"flex items-center justify-center transition-colors text-fuchsia-500 hover:text-fuchsia-600","aria-label":"Remove pin",children:u.jsx(Ro,{className:"w-5 h-5"})})}function B0(){return typeof window>"u"?!1:window.matchMedia("(pointer: coarse)").matches}function Og({containerClass:l,name:r,value:o,options:s,onChange:i,disabled:d=!1,hideLabel:p=!1,hasPin:h,isPinned:m=!1,onTogglePin:g,maxHeight:x,hasError:y=!1,forceModalOpen:N=!1,onModalClose:k}){const S=W=>{if(!Array.isArray(s))return s?.[W]},w=S("multiline"),M=S("placeholder"),j=String(o??""),E=W=>{i(W.target.value)},[z,L]=b.useState(!1),_=N||z,R=B0(),A=N||R,B=b.useRef(null),U=b.useRef(null);b.useLayoutEffect(()=>{if(!w)return;const W=B.current;W&&(W.style.height="0px",W.style.height=`${W.scrollHeight}px`)},[o,_,w]);const G=()=>{L(!1),k?.()};return A?u.jsxs("div",{className:l,children:[w?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between mb-1 min-h-[18px]",children:[p?u.jsx("span",{className:"block text-sm font-medium text-gray-700"}):u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),u.jsx(Eo,{value:j,onChange:i,textareaRef:B,className:"opacity-100"})]}),u.jsxs("div",{className:`relative w-full p-3 comfy-input min-h-[100px] text-base group cursor-text ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-10":""} ${y?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&L(!0),children:[u.jsx("div",{className:"whitespace-pre-wrap break-words text-gray-900 dark:text-[#e5e7eb]",children:j||u.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:M})}),h&&u.jsx("div",{className:"absolute right-2 top-2 pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto",children:u.jsx(ka,{isPinned:m,onToggle:g})})})]})]}):u.jsxs(u.Fragment,{children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),u.jsxs("div",{className:`relative w-full p-3 comfy-input text-base min-h-[46px] flex items-center cursor-text ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-16":"pr-6"} ${y?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&L(!0),children:[u.jsx("div",{className:"truncate min-w-0 flex-1 text-gray-900 dark:text-[#e5e7eb]",children:j||u.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:M})}),h&&u.jsx("div",{className:"absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto px-3",children:u.jsx(ka,{isPinned:m,onToggle:g})})})]})]}),u.jsx(rf,{title:r,isOpen:_,onClose:G,headerActions:w?u.jsx(Eo,{value:j,onChange:i,textareaRef:B,className:"mr-2"}):null,children:w?u.jsx("textarea",{ref:B,value:j,onChange:W=>i(W.target.value),placeholder:M,className:"w-full p-3 border border-gray-300 rounded-lg min-h-[150px] text-base resize-none outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",autoFocus:!N,disabled:d}):u.jsx("input",{ref:U,type:"text",value:j,onChange:W=>i(W.target.value),placeholder:M,className:"w-full p-3 border border-gray-300 rounded-lg text-base outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",autoFocus:!N,disabled:d})})]}):w?u.jsxs("div",{className:`${l} group`,"data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1 min-h-[18px]","data-textarea-header":"true",children:[p?u.jsx("span",{className:"block text-sm font-medium text-gray-700"}):u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),u.jsx(Eo,{value:j,onChange:i,textareaRef:B,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("textarea",{ref:B,value:j,onChange:E,placeholder:M,className:`w-full p-3 comfy-input min-h-[100px] text-base resize-none ${x?"overflow-auto":"overflow-hidden"} ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-10":""} ${y?"border-red-700 ring-1 ring-red-700":""}`,style:{overflowAnchor:"none",...x?{maxHeight:x}:{}},disabled:d}),h&&u.jsx("div",{className:"absolute right-2 top-2",children:u.jsx(ka,{isPinned:m,onToggle:g})})]})]}):u.jsxs("div",{className:l,children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:String(o??""),onChange:W=>i(W.target.value),placeholder:M,className:`w-full p-3 comfy-input text-base ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-16":""} ${y?"border-red-700 ring-1 ring-red-700":""}`,disabled:d}),h&&u.jsx("div",{className:"absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto px-3",children:u.jsx(ka,{isPinned:m,onToggle:g})})})]})]})}function zd({containerClass:l,name:r,value:o,options:s,onChange:i,disabled:d,type:p,min:h,max:m,step:g,isInt:x,hasError:y=!1}){const[N,k]=b.useState(String(o||0)),S=x??(p?p.toUpperCase()==="INT":Number.isInteger(o)),w=g??s?.step??(S?1:.1),M=h??(s?.min!==void 0?s.min:-1/0),j=m??(s?.max!==void 0?s.max:1/0);b.useEffect(()=>{k(String(o))},[o]);const E=A=>{k(A.target.value)},z=()=>{let A=S?parseInt(N,10):parseFloat(N);isNaN(A)&&(A=o),A=Math.max(M,Math.min(j,A)),i(A),k(String(A))},L=A=>{const B=(S?parseInt(N,10):parseFloat(N))||0,U=Math.max(M,Math.min(j,B+A));i(U)},_=[`number-input-field-${r}`,"w-full p-3 comfy-input text-base text-gray-900",d?"opacity-60 cursor-not-allowed":"",y?"border-red-700 ring-1 ring-red-700":""].filter(Boolean).join(" "),R=["w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 text-gray-700 flex-shrink-0",d?"opacity-60 cursor-not-allowed":"active:scale-95 transition-all"].filter(Boolean).join(" ");return u.jsxs("div",{className:`${l??""} number-control-${r}`,children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),u.jsxs("div",{className:`number-stepper-container-${r} flex items-center gap-2`,children:[u.jsx("input",{className:_,type:"number",value:N,onChange:E,onBlur:z,disabled:d,"aria-label":p?`${r} ${p}`:r}),u.jsx("button",{type:"button",onClick:()=>L(-w),className:R,"aria-label":"Decrease value",disabled:d,children:u.jsx(rb,{className:"w-4 h-4"})}),u.jsx("button",{type:"button",onClick:()=>L(w),className:R,"aria-label":"Increase value",disabled:d,children:u.jsx(tf,{className:"w-4 h-4"})})]})]})}function Ur(l){"@babel/helpers - typeof";return Ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ur(l)}function t2(l,r){if(Ur(l)!="object"||!l)return l;var o=l[Symbol.toPrimitive];if(o!==void 0){var s=o.call(l,r);if(Ur(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(l)}function H0(l){var r=t2(l,"string");return Ur(r)=="symbol"?r:r+""}function Oo(l,r,o){return(r=H0(r))in l?Object.defineProperty(l,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[r]=o,l}function Eg(l,r){var o=Object.keys(l);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(l);r&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(l,i).enumerable})),o.push.apply(o,s)}return o}function Ue(l){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Eg(Object(o),!0).forEach(function(s){Oo(l,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(o)):Eg(Object(o)).forEach(function(s){Object.defineProperty(l,s,Object.getOwnPropertyDescriptor(o,s))})}return l}function n2(l){if(Array.isArray(l))return l}function l2(l,r){var o=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(o!=null){var s,i,d,p,h=[],m=!0,g=!1;try{if(d=(o=o.call(l)).next,r===0){if(Object(o)!==o)return;m=!1}else for(;!(m=(s=d.call(o)).done)&&(h.push(s.value),h.length!==r);m=!0);}catch(x){g=!0,i=x}finally{try{if(!m&&o.return!=null&&(p=o.return(),Object(p)!==p))return}finally{if(g)throw i}}return h}}function Id(l,r){(r==null||r>l.length)&&(r=l.length);for(var o=0,s=Array(r);o<r;o++)s[o]=l[o];return s}function V0(l,r){if(l){if(typeof l=="string")return Id(l,r);var o={}.toString.call(l).slice(8,-1);return o==="Object"&&l.constructor&&(o=l.constructor.name),o==="Map"||o==="Set"?Array.from(l):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Id(l,r):void 0}}function r2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ql(l,r){return n2(l)||l2(l,r)||V0(l,r)||r2()}function a2(l,r){if(l==null)return{};var o={};for(var s in l)if({}.hasOwnProperty.call(l,s)){if(r.indexOf(s)!==-1)continue;o[s]=l[s]}return o}function Yl(l,r){if(l==null)return{};var o,s,i=a2(l,r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(l);for(s=0;s<d.length;s++)o=d[s],r.indexOf(o)===-1&&{}.propertyIsEnumerable.call(l,o)&&(i[o]=l[o])}return i}var o2=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function s2(l){var r=l.defaultInputValue,o=r===void 0?"":r,s=l.defaultMenuIsOpen,i=s===void 0?!1:s,d=l.defaultValue,p=d===void 0?null:d,h=l.inputValue,m=l.menuIsOpen,g=l.onChange,x=l.onInputChange,y=l.onMenuClose,N=l.onMenuOpen,k=l.value,S=Yl(l,o2),w=b.useState(h!==void 0?h:o),M=ql(w,2),j=M[0],E=M[1],z=b.useState(m!==void 0?m:i),L=ql(z,2),_=L[0],R=L[1],A=b.useState(k!==void 0?k:p),B=ql(A,2),U=B[0],G=B[1],W=b.useCallback(function(fe,be){typeof g=="function"&&g(fe,be),G(fe)},[g]),K=b.useCallback(function(fe,be){var ve;typeof x=="function"&&(ve=x(fe,be)),E(ve!==void 0?ve:fe)},[x]),ge=b.useCallback(function(){typeof N=="function"&&N(),R(!0)},[N]),ae=b.useCallback(function(){typeof y=="function"&&y(),R(!1)},[y]),le=h!==void 0?h:j,D=m!==void 0?m:_,$=k!==void 0?k:U;return Ue(Ue({},S),{},{inputValue:le,menuIsOpen:D,onChange:W,onInputChange:K,onMenuClose:ae,onMenuOpen:ge,value:$})}function Fe(){return Fe=Object.assign?Object.assign.bind():function(l){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)({}).hasOwnProperty.call(o,s)&&(l[s]=o[s])}return l},Fe.apply(null,arguments)}function i2(l,r){if(!(l instanceof r))throw new TypeError("Cannot call a class as a function")}function Tg(l,r){for(var o=0;o<r.length;o++){var s=r[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(l,H0(s.key),s)}}function u2(l,r,o){return r&&Tg(l.prototype,r),o&&Tg(l,o),Object.defineProperty(l,"prototype",{writable:!1}),l}function Bd(l,r){return Bd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},Bd(l,r)}function c2(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(r&&r.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),r&&Bd(l,r)}function Ti(l){return Ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ti(l)}function U0(){try{var l=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U0=function(){return!!l})()}function d2(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function f2(l,r){if(r&&(Ur(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d2(l)}function p2(l){var r=U0();return function(){var o,s=Ti(l);if(r){var i=Ti(this).constructor;o=Reflect.construct(s,arguments,i)}else o=s.apply(this,arguments);return f2(this,o)}}function m2(l){if(Array.isArray(l))return Id(l)}function h2(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function g2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function af(l){return m2(l)||h2(l)||V0(l)||g2()}function x2(l){if(l.sheet)return l.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===l)return document.styleSheets[r]}function v2(l){var r=document.createElement("style");return r.setAttribute("data-emotion",l.key),l.nonce!==void 0&&r.setAttribute("nonce",l.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r}var y2=(function(){function l(o){var s=this;this._insertTag=function(i){var d;s.tags.length===0?s.insertionPoint?d=s.insertionPoint.nextSibling:s.prepend?d=s.container.firstChild:d=s.before:d=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(i,d),s.tags.push(i)},this.isSpeedy=o.speedy===void 0?!0:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var r=l.prototype;return r.hydrate=function(s){s.forEach(this._insertTag)},r.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(v2(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var d=x2(i);try{d.insertRule(s,d.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(s));this.ctr++},r.flush=function(){this.tags.forEach(function(s){var i;return(i=s.parentNode)==null?void 0:i.removeChild(s)}),this.tags=[],this.ctr=0},l})(),yn="-ms-",_i="-moz-",kt="-webkit-",G0="comm",of="rule",sf="decl",b2="@import",q0="@keyframes",w2="@layer",S2=Math.abs,qi=String.fromCharCode,N2=Object.assign;function j2(l,r){return xn(l,0)^45?(((r<<2^xn(l,0))<<2^xn(l,1))<<2^xn(l,2))<<2^xn(l,3):0}function W0(l){return l.trim()}function C2(l,r){return(l=r.exec(l))?l[0]:l}function Mt(l,r,o){return l.replace(r,o)}function Hd(l,r){return l.indexOf(r)}function xn(l,r){return l.charCodeAt(r)|0}function Do(l,r,o){return l.slice(r,o)}function xl(l){return l.length}function uf(l){return l.length}function ci(l,r){return r.push(l),l}function k2(l,r){return l.map(r).join("")}var Wi=1,Ta=1,F0=0,Ln=0,ln=0,La="";function Fi(l,r,o,s,i,d,p){return{value:l,root:r,parent:o,type:s,props:i,children:d,line:Wi,column:Ta,length:p,return:""}}function ko(l,r){return N2(Fi("",null,null,"",null,null,0),l,{length:-l.length},r)}function M2(){return ln}function O2(){return ln=Ln>0?xn(La,--Ln):0,Ta--,ln===10&&(Ta=1,Wi--),ln}function Fn(){return ln=Ln<F0?xn(La,Ln++):0,Ta++,ln===10&&(Ta=1,Wi++),ln}function yl(){return xn(La,Ln)}function xi(){return Ln}function Wo(l,r){return Do(La,l,r)}function zo(l){switch(l){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $0(l){return Wi=Ta=1,F0=xl(La=l),Ln=0,[]}function Y0(l){return La="",l}function vi(l){return W0(Wo(Ln-1,Vd(l===91?l+2:l===40?l+1:l)))}function E2(l){for(;(ln=yl())&&ln<33;)Fn();return zo(l)>2||zo(ln)>3?"":" "}function T2(l,r){for(;--r&&Fn()&&!(ln<48||ln>102||ln>57&&ln<65||ln>70&&ln<97););return Wo(l,xi()+(r<6&&yl()==32&&Fn()==32))}function Vd(l){for(;Fn();)switch(ln){case l:return Ln;case 34:case 39:l!==34&&l!==39&&Vd(ln);break;case 40:l===41&&Vd(l);break;case 92:Fn();break}return Ln}function _2(l,r){for(;Fn()&&l+ln!==57;)if(l+ln===84&&yl()===47)break;return"/*"+Wo(r,Ln-1)+"*"+qi(l===47?l:Fn())}function L2(l){for(;!zo(yl());)Fn();return Wo(l,Ln)}function A2(l){return Y0(yi("",null,null,null,[""],l=$0(l),0,[0],l))}function yi(l,r,o,s,i,d,p,h,m){for(var g=0,x=0,y=p,N=0,k=0,S=0,w=1,M=1,j=1,E=0,z="",L=i,_=d,R=s,A=z;M;)switch(S=E,E=Fn()){case 40:if(S!=108&&xn(A,y-1)==58){Hd(A+=Mt(vi(E),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:A+=vi(E);break;case 9:case 10:case 13:case 32:A+=E2(S);break;case 92:A+=T2(xi()-1,7);continue;case 47:switch(yl()){case 42:case 47:ci(R2(_2(Fn(),xi()),r,o),m);break;default:A+="/"}break;case 123*w:h[g++]=xl(A)*j;case 125*w:case 59:case 0:switch(E){case 0:case 125:M=0;case 59+x:j==-1&&(A=Mt(A,/\f/g,"")),k>0&&xl(A)-y&&ci(k>32?Lg(A+";",s,o,y-1):Lg(Mt(A," ","")+";",s,o,y-2),m);break;case 59:A+=";";default:if(ci(R=_g(A,r,o,g,x,i,h,z,L=[],_=[],y),d),E===123)if(x===0)yi(A,r,R,R,L,d,y,h,_);else switch(N===99&&xn(A,3)===110?100:N){case 100:case 108:case 109:case 115:yi(l,R,R,s&&ci(_g(l,R,R,0,0,i,h,z,i,L=[],y),_),i,_,y,h,s?L:_);break;default:yi(A,R,R,R,[""],_,0,h,_)}}g=x=k=0,w=j=1,z=A="",y=p;break;case 58:y=1+xl(A),k=S;default:if(w<1){if(E==123)--w;else if(E==125&&w++==0&&O2()==125)continue}switch(A+=qi(E),E*w){case 38:j=x>0?1:(A+="\f",-1);break;case 44:h[g++]=(xl(A)-1)*j,j=1;break;case 64:yl()===45&&(A+=vi(Fn())),N=yl(),x=y=xl(z=A+=L2(xi())),E++;break;case 45:S===45&&xl(A)==2&&(w=0)}}return d}function _g(l,r,o,s,i,d,p,h,m,g,x){for(var y=i-1,N=i===0?d:[""],k=uf(N),S=0,w=0,M=0;S<s;++S)for(var j=0,E=Do(l,y+1,y=S2(w=p[S])),z=l;j<k;++j)(z=W0(w>0?N[j]+" "+E:Mt(E,/&\f/g,N[j])))&&(m[M++]=z);return Fi(l,r,o,i===0?of:h,m,g,x)}function R2(l,r,o){return Fi(l,r,o,G0,qi(M2()),Do(l,2,-2),0)}function Lg(l,r,o,s){return Fi(l,r,o,sf,Do(l,0,s),Do(l,s+1,-1),s)}function Ea(l,r){for(var o="",s=uf(l),i=0;i<s;i++)o+=r(l[i],i,l,r)||"";return o}function D2(l,r,o,s){switch(l.type){case w2:if(l.children.length)break;case b2:case sf:return l.return=l.return||l.value;case G0:return"";case q0:return l.return=l.value+"{"+Ea(l.children,s)+"}";case of:l.value=l.props.join(",")}return xl(o=Ea(l.children,s))?l.return=l.value+"{"+o+"}":""}function z2(l){var r=uf(l);return function(o,s,i,d){for(var p="",h=0;h<r;h++)p+=l[h](o,s,i,d)||"";return p}}function I2(l){return function(r){r.root||(r=r.return)&&l(r)}}function B2(l){var r=Object.create(null);return function(o){return r[o]===void 0&&(r[o]=l(o)),r[o]}}var H2=function(r,o,s){for(var i=0,d=0;i=d,d=yl(),i===38&&d===12&&(o[s]=1),!zo(d);)Fn();return Wo(r,Ln)},V2=function(r,o){var s=-1,i=44;do switch(zo(i)){case 0:i===38&&yl()===12&&(o[s]=1),r[s]+=H2(Ln-1,o,s);break;case 2:r[s]+=vi(i);break;case 4:if(i===44){r[++s]=yl()===58?"&\f":"",o[s]=r[s].length;break}default:r[s]+=qi(i)}while(i=Fn());return r},U2=function(r,o){return Y0(V2($0(r),o))},Ag=new WeakMap,G2=function(r){if(!(r.type!=="rule"||!r.parent||r.length<1)){for(var o=r.value,s=r.parent,i=r.column===s.column&&r.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(r.props.length===1&&o.charCodeAt(0)!==58&&!Ag.get(s))&&!i){Ag.set(r,!0);for(var d=[],p=U2(o,d),h=s.props,m=0,g=0;m<p.length;m++)for(var x=0;x<h.length;x++,g++)r.props[g]=d[m]?p[m].replace(/&\f/g,h[x]):h[x]+" "+p[m]}}},q2=function(r){if(r.type==="decl"){var o=r.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(r.return="",r.value="")}};function Q0(l,r){switch(j2(l,r)){case 5103:return kt+"print-"+l+l;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return kt+l+l;case 5349:case 4246:case 4810:case 6968:case 2756:return kt+l+_i+l+yn+l+l;case 6828:case 4268:return kt+l+yn+l+l;case 6165:return kt+l+yn+"flex-"+l+l;case 5187:return kt+l+Mt(l,/(\w+).+(:[^]+)/,kt+"box-$1$2"+yn+"flex-$1$2")+l;case 5443:return kt+l+yn+"flex-item-"+Mt(l,/flex-|-self/,"")+l;case 4675:return kt+l+yn+"flex-line-pack"+Mt(l,/align-content|flex-|-self/,"")+l;case 5548:return kt+l+yn+Mt(l,"shrink","negative")+l;case 5292:return kt+l+yn+Mt(l,"basis","preferred-size")+l;case 6060:return kt+"box-"+Mt(l,"-grow","")+kt+l+yn+Mt(l,"grow","positive")+l;case 4554:return kt+Mt(l,/([^-])(transform)/g,"$1"+kt+"$2")+l;case 6187:return Mt(Mt(Mt(l,/(zoom-|grab)/,kt+"$1"),/(image-set)/,kt+"$1"),l,"")+l;case 5495:case 3959:return Mt(l,/(image-set\([^]*)/,kt+"$1$`$1");case 4968:return Mt(Mt(l,/(.+:)(flex-)?(.*)/,kt+"box-pack:$3"+yn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+kt+l+l;case 4095:case 3583:case 4068:case 2532:return Mt(l,/(.+)-inline(.+)/,kt+"$1$2")+l;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xl(l)-1-r>6)switch(xn(l,r+1)){case 109:if(xn(l,r+4)!==45)break;case 102:return Mt(l,/(.+:)(.+)-([^]+)/,"$1"+kt+"$2-$3$1"+_i+(xn(l,r+3)==108?"$3":"$2-$3"))+l;case 115:return~Hd(l,"stretch")?Q0(Mt(l,"stretch","fill-available"),r)+l:l}break;case 4949:if(xn(l,r+1)!==115)break;case 6444:switch(xn(l,xl(l)-3-(~Hd(l,"!important")&&10))){case 107:return Mt(l,":",":"+kt)+l;case 101:return Mt(l,/(.+:)([^;!]+)(;|!.+)?/,"$1"+kt+(xn(l,14)===45?"inline-":"")+"box$3$1"+kt+"$2$3$1"+yn+"$2box$3")+l}break;case 5936:switch(xn(l,r+11)){case 114:return kt+l+yn+Mt(l,/[svh]\w+-[tblr]{2}/,"tb")+l;case 108:return kt+l+yn+Mt(l,/[svh]\w+-[tblr]{2}/,"tb-rl")+l;case 45:return kt+l+yn+Mt(l,/[svh]\w+-[tblr]{2}/,"lr")+l}return kt+l+yn+l+l}return l}var W2=function(r,o,s,i){if(r.length>-1&&!r.return)switch(r.type){case sf:r.return=Q0(r.value,r.length);break;case q0:return Ea([ko(r,{value:Mt(r.value,"@","@"+kt)})],i);case of:if(r.length)return k2(r.props,function(d){switch(C2(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ea([ko(r,{props:[Mt(d,/:(read-\w+)/,":"+_i+"$1")]})],i);case"::placeholder":return Ea([ko(r,{props:[Mt(d,/:(plac\w+)/,":"+kt+"input-$1")]}),ko(r,{props:[Mt(d,/:(plac\w+)/,":"+_i+"$1")]}),ko(r,{props:[Mt(d,/:(plac\w+)/,yn+"input-$1")]})],i)}return""})}},F2=[W2],$2=function(r){var o=r.key;if(o==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(w){var M=w.getAttribute("data-emotion");M.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var i=r.stylisPlugins||F2,d={},p,h=[];p=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(w){for(var M=w.getAttribute("data-emotion").split(" "),j=1;j<M.length;j++)d[M[j]]=!0;h.push(w)});var m,g=[G2,q2];{var x,y=[D2,I2(function(w){x.insert(w)})],N=z2(g.concat(i,y)),k=function(M){return Ea(A2(M),N)};m=function(M,j,E,z){x=E,k(M?M+"{"+j.styles+"}":j.styles),z&&(S.inserted[j.name]=!0)}}var S={key:o,sheet:new y2({key:o,container:p,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:d,registered:{},insert:m};return S.sheet.hydrate(h),S},cd={exports:{}},Ot={};var Rg;function Y2(){if(Rg)return Ot;Rg=1;var l=typeof Symbol=="function"&&Symbol.for,r=l?Symbol.for("react.element"):60103,o=l?Symbol.for("react.portal"):60106,s=l?Symbol.for("react.fragment"):60107,i=l?Symbol.for("react.strict_mode"):60108,d=l?Symbol.for("react.profiler"):60114,p=l?Symbol.for("react.provider"):60109,h=l?Symbol.for("react.context"):60110,m=l?Symbol.for("react.async_mode"):60111,g=l?Symbol.for("react.concurrent_mode"):60111,x=l?Symbol.for("react.forward_ref"):60112,y=l?Symbol.for("react.suspense"):60113,N=l?Symbol.for("react.suspense_list"):60120,k=l?Symbol.for("react.memo"):60115,S=l?Symbol.for("react.lazy"):60116,w=l?Symbol.for("react.block"):60121,M=l?Symbol.for("react.fundamental"):60117,j=l?Symbol.for("react.responder"):60118,E=l?Symbol.for("react.scope"):60119;function z(_){if(typeof _=="object"&&_!==null){var R=_.$$typeof;switch(R){case r:switch(_=_.type,_){case m:case g:case s:case d:case i:case y:return _;default:switch(_=_&&_.$$typeof,_){case h:case x:case S:case k:case p:return _;default:return R}}case o:return R}}}function L(_){return z(_)===g}return Ot.AsyncMode=m,Ot.ConcurrentMode=g,Ot.ContextConsumer=h,Ot.ContextProvider=p,Ot.Element=r,Ot.ForwardRef=x,Ot.Fragment=s,Ot.Lazy=S,Ot.Memo=k,Ot.Portal=o,Ot.Profiler=d,Ot.StrictMode=i,Ot.Suspense=y,Ot.isAsyncMode=function(_){return L(_)||z(_)===m},Ot.isConcurrentMode=L,Ot.isContextConsumer=function(_){return z(_)===h},Ot.isContextProvider=function(_){return z(_)===p},Ot.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===r},Ot.isForwardRef=function(_){return z(_)===x},Ot.isFragment=function(_){return z(_)===s},Ot.isLazy=function(_){return z(_)===S},Ot.isMemo=function(_){return z(_)===k},Ot.isPortal=function(_){return z(_)===o},Ot.isProfiler=function(_){return z(_)===d},Ot.isStrictMode=function(_){return z(_)===i},Ot.isSuspense=function(_){return z(_)===y},Ot.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===s||_===g||_===d||_===i||_===y||_===N||typeof _=="object"&&_!==null&&(_.$$typeof===S||_.$$typeof===k||_.$$typeof===p||_.$$typeof===h||_.$$typeof===x||_.$$typeof===M||_.$$typeof===j||_.$$typeof===E||_.$$typeof===w)},Ot.typeOf=z,Ot}var Dg;function Q2(){return Dg||(Dg=1,cd.exports=Y2()),cd.exports}var dd,zg;function X2(){if(zg)return dd;zg=1;var l=Q2(),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},d={};d[l.ForwardRef]=s,d[l.Memo]=i;function p(S){return l.isMemo(S)?i:d[S.$$typeof]||r}var h=Object.defineProperty,m=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,x=Object.getOwnPropertyDescriptor,y=Object.getPrototypeOf,N=Object.prototype;function k(S,w,M){if(typeof w!="string"){if(N){var j=y(w);j&&j!==N&&k(S,j,M)}var E=m(w);g&&(E=E.concat(g(w)));for(var z=p(S),L=p(w),_=0;_<E.length;++_){var R=E[_];if(!o[R]&&!(M&&M[R])&&!(L&&L[R])&&!(z&&z[R])){var A=x(w,R);try{h(S,R,A)}catch{}}}}return S}return dd=k,dd}X2();var P2=!0;function Z2(l,r,o){var s="";return o.split(" ").forEach(function(i){l[i]!==void 0?r.push(l[i]+";"):i&&(s+=i+" ")}),s}var X0=function(r,o,s){var i=r.key+"-"+o.name;(s===!1||P2===!1)&&r.registered[i]===void 0&&(r.registered[i]=o.styles)},K2=function(r,o,s){X0(r,o,s);var i=r.key+"-"+o.name;if(r.inserted[o.name]===void 0){var d=o;do r.insert(o===d?"."+i:"",d,r.sheet,!0),d=d.next;while(d!==void 0)}};function J2(l){for(var r=0,o,s=0,i=l.length;i>=4;++s,i-=4)o=l.charCodeAt(s)&255|(l.charCodeAt(++s)&255)<<8|(l.charCodeAt(++s)&255)<<16|(l.charCodeAt(++s)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,r=(o&65535)*1540483477+((o>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(i){case 3:r^=(l.charCodeAt(s+2)&255)<<16;case 2:r^=(l.charCodeAt(s+1)&255)<<8;case 1:r^=l.charCodeAt(s)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}var ew={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},tw=/[A-Z]|^ms/g,nw=/_EMO_([^_]+?)_([^]*?)_EMO_/g,P0=function(r){return r.charCodeAt(1)===45},Ig=function(r){return r!=null&&typeof r!="boolean"},fd=B2(function(l){return P0(l)?l:l.replace(tw,"-$&").toLowerCase()}),Bg=function(r,o){switch(r){case"animation":case"animationName":if(typeof o=="string")return o.replace(nw,function(s,i,d){return vl={name:i,styles:d,next:vl},i})}return ew[r]!==1&&!P0(r)&&typeof o=="number"&&o!==0?o+"px":o};function Io(l,r,o){if(o==null)return"";var s=o;if(s.__emotion_styles!==void 0)return s;switch(typeof o){case"boolean":return"";case"object":{var i=o;if(i.anim===1)return vl={name:i.name,styles:i.styles,next:vl},i.name;var d=o;if(d.styles!==void 0){var p=d.next;if(p!==void 0)for(;p!==void 0;)vl={name:p.name,styles:p.styles,next:vl},p=p.next;var h=d.styles+";";return h}return lw(l,r,o)}case"function":{if(l!==void 0){var m=vl,g=o(l);return vl=m,Io(l,r,g)}break}}var x=o;return x}function lw(l,r,o){var s="";if(Array.isArray(o))for(var i=0;i<o.length;i++)s+=Io(l,r,o[i])+";";else for(var d in o){var p=o[d];if(typeof p!="object"){var h=p;Ig(h)&&(s+=fd(d)+":"+Bg(d,h)+";")}else if(Array.isArray(p)&&typeof p[0]=="string"&&r==null)for(var m=0;m<p.length;m++)Ig(p[m])&&(s+=fd(d)+":"+Bg(d,p[m])+";");else{var g=Io(l,r,p);switch(d){case"animation":case"animationName":{s+=fd(d)+":"+g+";";break}default:s+=d+"{"+g+"}"}}}return s}var Hg=/label:\s*([^\s;{]+)\s*(;|$)/g,vl;function Z0(l,r,o){if(l.length===1&&typeof l[0]=="object"&&l[0]!==null&&l[0].styles!==void 0)return l[0];var s=!0,i="";vl=void 0;var d=l[0];if(d==null||d.raw===void 0)s=!1,i+=Io(o,r,d);else{var p=d;i+=p[0]}for(var h=1;h<l.length;h++)if(i+=Io(o,r,l[h]),s){var m=d;i+=m[h]}Hg.lastIndex=0;for(var g="",x;(x=Hg.exec(i))!==null;)g+="-"+x[1];var y=J2(i)+g;return{name:y,styles:i,next:vl}}var rw=function(r){return r()},aw=rg.useInsertionEffect?rg.useInsertionEffect:!1,ow=aw||rw,K0=b.createContext(typeof HTMLElement<"u"?$2({key:"css"}):null);K0.Provider;var sw=function(r){return b.forwardRef(function(o,s){var i=b.useContext(K0);return r(o,i,s)})},iw=b.createContext({}),cf={}.hasOwnProperty,Ud="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",uw=function(r,o){var s={};for(var i in o)cf.call(o,i)&&(s[i]=o[i]);return s[Ud]=r,s},cw=function(r){var o=r.cache,s=r.serialized,i=r.isStringTag;return X0(o,s,i),ow(function(){return K2(o,s,i)}),null},dw=sw(function(l,r,o){var s=l.css;typeof s=="string"&&r.registered[s]!==void 0&&(s=r.registered[s]);var i=l[Ud],d=[s],p="";typeof l.className=="string"?p=Z2(r.registered,d,l.className):l.className!=null&&(p=l.className+" ");var h=Z0(d,void 0,b.useContext(iw));p+=r.key+"-"+h.name;var m={};for(var g in l)cf.call(l,g)&&g!=="css"&&g!==Ud&&(m[g]=l[g]);return m.className=p,o&&(m.ref=o),b.createElement(b.Fragment,null,b.createElement(cw,{cache:r,serialized:h,isStringTag:typeof i=="string"}),b.createElement(i,m))}),fw=dw,He=function(r,o){var s=arguments;if(o==null||!cf.call(o,"css"))return b.createElement.apply(void 0,s);var i=s.length,d=new Array(i);d[0]=fw,d[1]=uw(r,o);for(var p=2;p<i;p++)d[p]=s[p];return b.createElement.apply(null,d)};(function(l){var r;r||(r=l.JSX||(l.JSX={}))})(He||(He={}));function df(){for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];return Z0(r)}function pw(){var l=df.apply(void 0,arguments),r="animation-"+l.name;return{name:r,styles:"@keyframes "+r+"{"+l.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function mw(l,r){return r||(r=l.slice(0)),Object.freeze(Object.defineProperties(l,{raw:{value:Object.freeze(r)}}))}const hw=Math.min,gw=Math.max,Li=Math.round,di=Math.floor,Ai=l=>({x:l,y:l});function xw(l){const{x:r,y:o,width:s,height:i}=l;return{width:s,height:i,top:o,left:r,right:r+s,bottom:o+i,x:r,y:o}}function $i(){return typeof window<"u"}function J0(l){return tx(l)?(l.nodeName||"").toLowerCase():"#document"}function Wl(l){var r;return(l==null||(r=l.ownerDocument)==null?void 0:r.defaultView)||window}function ex(l){var r;return(r=(tx(l)?l.ownerDocument:l.document)||window.document)==null?void 0:r.documentElement}function tx(l){return $i()?l instanceof Node||l instanceof Wl(l).Node:!1}function vw(l){return $i()?l instanceof Element||l instanceof Wl(l).Element:!1}function ff(l){return $i()?l instanceof HTMLElement||l instanceof Wl(l).HTMLElement:!1}function Vg(l){return!$i()||typeof ShadowRoot>"u"?!1:l instanceof ShadowRoot||l instanceof Wl(l).ShadowRoot}const yw=new Set(["inline","contents"]);function nx(l){const{overflow:r,overflowX:o,overflowY:s,display:i}=pf(l);return/auto|scroll|overlay|hidden|clip/.test(r+s+o)&&!yw.has(i)}function bw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ww=new Set(["html","body","#document"]);function Sw(l){return ww.has(J0(l))}function pf(l){return Wl(l).getComputedStyle(l)}function Nw(l){if(J0(l)==="html")return l;const r=l.assignedSlot||l.parentNode||Vg(l)&&l.host||ex(l);return Vg(r)?r.host:r}function lx(l){const r=Nw(l);return Sw(r)?l.ownerDocument?l.ownerDocument.body:l.body:ff(r)&&nx(r)?r:lx(r)}function Ri(l,r,o){var s;r===void 0&&(r=[]),o===void 0&&(o=!0);const i=lx(l),d=i===((s=l.ownerDocument)==null?void 0:s.body),p=Wl(i);if(d){const h=Gd(p);return r.concat(p,p.visualViewport||[],nx(i)?i:[],h&&o?Ri(h):[])}return r.concat(i,Ri(i,[],o))}function Gd(l){return l.parent&&Object.getPrototypeOf(l.parent)?l.frameElement:null}function jw(l){const r=pf(l);let o=parseFloat(r.width)||0,s=parseFloat(r.height)||0;const i=ff(l),d=i?l.offsetWidth:o,p=i?l.offsetHeight:s,h=Li(o)!==d||Li(s)!==p;return h&&(o=d,s=p),{width:o,height:s,$:h}}function mf(l){return vw(l)?l:l.contextElement}function Ug(l){const r=mf(l);if(!ff(r))return Ai(1);const o=r.getBoundingClientRect(),{width:s,height:i,$:d}=jw(r);let p=(d?Li(o.width):o.width)/s,h=(d?Li(o.height):o.height)/i;return(!p||!Number.isFinite(p))&&(p=1),(!h||!Number.isFinite(h))&&(h=1),{x:p,y:h}}const Cw=Ai(0);function kw(l){const r=Wl(l);return!bw()||!r.visualViewport?Cw:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function Mw(l,r,o){return!1}function Gg(l,r,o,s){r===void 0&&(r=!1);const i=l.getBoundingClientRect(),d=mf(l);let p=Ai(1);r&&(p=Ug(l));const h=Mw()?kw(d):Ai(0);let m=(i.left+h.x)/p.x,g=(i.top+h.y)/p.y,x=i.width/p.x,y=i.height/p.y;if(d){const N=Wl(d),k=s;let S=N,w=Gd(S);for(;w&&s&&k!==S;){const M=Ug(w),j=w.getBoundingClientRect(),E=pf(w),z=j.left+(w.clientLeft+parseFloat(E.paddingLeft))*M.x,L=j.top+(w.clientTop+parseFloat(E.paddingTop))*M.y;m*=M.x,g*=M.y,x*=M.x,y*=M.y,m+=z,g+=L,S=Wl(w),w=Gd(S)}}return xw({width:x,height:y,x:m,y:g})}function rx(l,r){return l.x===r.x&&l.y===r.y&&l.width===r.width&&l.height===r.height}function Ow(l,r){let o=null,s;const i=ex(l);function d(){var h;clearTimeout(s),(h=o)==null||h.disconnect(),o=null}function p(h,m){h===void 0&&(h=!1),m===void 0&&(m=1),d();const g=l.getBoundingClientRect(),{left:x,top:y,width:N,height:k}=g;if(h||r(),!N||!k)return;const S=di(y),w=di(i.clientWidth-(x+N)),M=di(i.clientHeight-(y+k)),j=di(x),z={rootMargin:-S+"px "+-w+"px "+-M+"px "+-j+"px",threshold:gw(0,hw(1,m))||1};let L=!0;function _(R){const A=R[0].intersectionRatio;if(A!==m){if(!L)return p();A?p(!1,A):s=setTimeout(()=>{p(!1,1e-7)},1e3)}A===1&&!rx(g,l.getBoundingClientRect())&&p(),L=!1}try{o=new IntersectionObserver(_,{...z,root:i.ownerDocument})}catch{o=new IntersectionObserver(_,z)}o.observe(l)}return p(!0),d}function Ew(l,r,o,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:d=!0,elementResize:p=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:m=!1}=s,g=mf(l),x=i||d?[...g?Ri(g):[],...Ri(r)]:[];x.forEach(j=>{i&&j.addEventListener("scroll",o,{passive:!0}),d&&j.addEventListener("resize",o)});const y=g&&h?Ow(g,o):null;let N=-1,k=null;p&&(k=new ResizeObserver(j=>{let[E]=j;E&&E.target===g&&k&&(k.unobserve(r),cancelAnimationFrame(N),N=requestAnimationFrame(()=>{var z;(z=k)==null||z.observe(r)})),o()}),g&&!m&&k.observe(g),k.observe(r));let S,w=m?Gg(l):null;m&&M();function M(){const j=Gg(l);w&&!rx(w,j)&&o(),w=j,S=requestAnimationFrame(M)}return o(),()=>{var j;x.forEach(E=>{i&&E.removeEventListener("scroll",o),d&&E.removeEventListener("resize",o)}),y?.(),(j=k)==null||j.disconnect(),k=null,m&&cancelAnimationFrame(S)}}var qd=b.useLayoutEffect,Tw=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Di=function(){};function _w(l,r){return r?r[0]==="-"?l+r:l+"__"+r:l}function Lw(l,r){for(var o=arguments.length,s=new Array(o>2?o-2:0),i=2;i<o;i++)s[i-2]=arguments[i];var d=[].concat(s);if(r&&l)for(var p in r)r.hasOwnProperty(p)&&r[p]&&d.push("".concat(_w(l,p)));return d.filter(function(h){return h}).map(function(h){return String(h).trim()}).join(" ")}var qg=function(r){return Uw(r)?r.filter(Boolean):Ur(r)==="object"&&r!==null?[r]:[]},ax=function(r){r.className,r.clearValue,r.cx,r.getStyles,r.getClassNames,r.getValue,r.hasValue,r.isMulti,r.isRtl,r.options,r.selectOption,r.selectProps,r.setValue,r.theme;var o=Yl(r,Tw);return Ue({},o)},Yt=function(r,o,s){var i=r.cx,d=r.getStyles,p=r.getClassNames,h=r.className;return{css:d(o,r),className:i(s??{},p(o,r),h)}};function Yi(l){return[document.documentElement,document.body,window].indexOf(l)>-1}function Aw(l){return Yi(l)?window.innerHeight:l.clientHeight}function ox(l){return Yi(l)?window.pageYOffset:l.scrollTop}function zi(l,r){if(Yi(l)){window.scrollTo(0,r);return}l.scrollTop=r}function Rw(l){var r=getComputedStyle(l),o=r.position==="absolute",s=/(auto|scroll)/;if(r.position==="fixed")return document.documentElement;for(var i=l;i=i.parentElement;)if(r=getComputedStyle(i),!(o&&r.position==="static")&&s.test(r.overflow+r.overflowY+r.overflowX))return i;return document.documentElement}function Dw(l,r,o,s){return o*((l=l/s-1)*l*l+1)+r}function fi(l,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Di,i=ox(l),d=r-i,p=10,h=0;function m(){h+=p;var g=Dw(h,i,d,o);zi(l,g),h<o?window.requestAnimationFrame(m):s(l)}m()}function Wg(l,r){var o=l.getBoundingClientRect(),s=r.getBoundingClientRect(),i=r.offsetHeight/3;s.bottom+i>o.bottom?zi(l,Math.min(r.offsetTop+r.clientHeight-l.offsetHeight+i,l.scrollHeight)):s.top-i<o.top&&zi(l,Math.max(r.offsetTop-i,0))}function zw(l){var r=l.getBoundingClientRect();return{bottom:r.bottom,height:r.height,left:r.left,right:r.right,top:r.top,width:r.width}}function Fg(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Iw(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var sx=!1,Bw={get passive(){return sx=!0}},pi=typeof window<"u"?window:{};pi.addEventListener&&pi.removeEventListener&&(pi.addEventListener("p",Di,Bw),pi.removeEventListener("p",Di,!1));var Hw=sx;function Vw(l){return l!=null}function Uw(l){return Array.isArray(l)}function mi(l,r,o){return l?r:o}var Gw=function(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),i=1;i<o;i++)s[i-1]=arguments[i];var d=Object.entries(r).filter(function(p){var h=ql(p,1),m=h[0];return!s.includes(m)});return d.reduce(function(p,h){var m=ql(h,2),g=m[0],x=m[1];return p[g]=x,p},{})},qw=["children","innerProps"],Ww=["children","innerProps"];function Fw(l){var r=l.maxHeight,o=l.menuEl,s=l.minHeight,i=l.placement,d=l.shouldScroll,p=l.isFixedPosition,h=l.controlHeight,m=Rw(o),g={placement:"bottom",maxHeight:r};if(!o||!o.offsetParent)return g;var x=m.getBoundingClientRect(),y=x.height,N=o.getBoundingClientRect(),k=N.bottom,S=N.height,w=N.top,M=o.offsetParent.getBoundingClientRect(),j=M.top,E=p?window.innerHeight:Aw(m),z=ox(m),L=parseInt(getComputedStyle(o).marginBottom,10),_=parseInt(getComputedStyle(o).marginTop,10),R=j-_,A=E-w,B=R+z,U=y-z-w,G=k-E+z+L,W=z+w-_,K=160;switch(i){case"auto":case"bottom":if(A>=S)return{placement:"bottom",maxHeight:r};if(U>=S&&!p)return d&&fi(m,G,K),{placement:"bottom",maxHeight:r};if(!p&&U>=s||p&&A>=s){d&&fi(m,G,K);var ge=p?A-L:U-L;return{placement:"bottom",maxHeight:ge}}if(i==="auto"||p){var ae=r,le=p?R:B;return le>=s&&(ae=Math.min(le-L-h,r)),{placement:"top",maxHeight:ae}}if(i==="bottom")return d&&zi(m,G),{placement:"bottom",maxHeight:r};break;case"top":if(R>=S)return{placement:"top",maxHeight:r};if(B>=S&&!p)return d&&fi(m,W,K),{placement:"top",maxHeight:r};if(!p&&B>=s||p&&R>=s){var D=r;return(!p&&B>=s||p&&R>=s)&&(D=p?R-_:B-_),d&&fi(m,W,K),{placement:"top",maxHeight:D}}return{placement:"bottom",maxHeight:r};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return g}function $w(l){var r={bottom:"top",top:"bottom"};return l?r[l]:"bottom"}var ix=function(r){return r==="auto"?"bottom":r},Yw=function(r,o){var s,i=r.placement,d=r.theme,p=d.borderRadius,h=d.spacing,m=d.colors;return Ue((s={label:"menu"},Oo(s,$w(i),"100%"),Oo(s,"position","absolute"),Oo(s,"width","100%"),Oo(s,"zIndex",1),s),o?{}:{backgroundColor:m.neutral0,borderRadius:p,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:h.menuGutter,marginTop:h.menuGutter})},ux=b.createContext(null),Qw=function(r){var o=r.children,s=r.minMenuHeight,i=r.maxMenuHeight,d=r.menuPlacement,p=r.menuPosition,h=r.menuShouldScrollIntoView,m=r.theme,g=b.useContext(ux)||{},x=g.setPortalPlacement,y=b.useRef(null),N=b.useState(i),k=ql(N,2),S=k[0],w=k[1],M=b.useState(null),j=ql(M,2),E=j[0],z=j[1],L=m.spacing.controlHeight;return qd(function(){var _=y.current;if(_){var R=p==="fixed",A=h&&!R,B=Fw({maxHeight:i,menuEl:_,minHeight:s,placement:d,shouldScroll:A,isFixedPosition:R,controlHeight:L});w(B.maxHeight),z(B.placement),x?.(B.placement)}},[i,d,p,h,s,x,L]),o({ref:y,placerProps:Ue(Ue({},r),{},{placement:E||ix(d),maxHeight:S})})},Xw=function(r){var o=r.children,s=r.innerRef,i=r.innerProps;return He("div",Fe({},Yt(r,"menu",{menu:!0}),{ref:s},i),o)},Pw=Xw,Zw=function(r,o){var s=r.maxHeight,i=r.theme.spacing.baseUnit;return Ue({maxHeight:s,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},o?{}:{paddingBottom:i,paddingTop:i})},Kw=function(r){var o=r.children,s=r.innerProps,i=r.innerRef,d=r.isMulti;return He("div",Fe({},Yt(r,"menuList",{"menu-list":!0,"menu-list--is-multi":d}),{ref:i},s),o)},cx=function(r,o){var s=r.theme,i=s.spacing.baseUnit,d=s.colors;return Ue({textAlign:"center"},o?{}:{color:d.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},Jw=cx,eS=cx,tS=function(r){var o=r.children,s=o===void 0?"No options":o,i=r.innerProps,d=Yl(r,qw);return He("div",Fe({},Yt(Ue(Ue({},d),{},{children:s,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),s)},nS=function(r){var o=r.children,s=o===void 0?"Loading...":o,i=r.innerProps,d=Yl(r,Ww);return He("div",Fe({},Yt(Ue(Ue({},d),{},{children:s,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),s)},lS=function(r){var o=r.rect,s=r.offset,i=r.position;return{left:o.left,position:i,top:s,width:o.width,zIndex:1}},rS=function(r){var o=r.appendTo,s=r.children,i=r.controlElement,d=r.innerProps,p=r.menuPlacement,h=r.menuPosition,m=b.useRef(null),g=b.useRef(null),x=b.useState(ix(p)),y=ql(x,2),N=y[0],k=y[1],S=b.useMemo(function(){return{setPortalPlacement:k}},[]),w=b.useState(null),M=ql(w,2),j=M[0],E=M[1],z=b.useCallback(function(){if(i){var A=zw(i),B=h==="fixed"?0:window.pageYOffset,U=A[N]+B;(U!==j?.offset||A.left!==j?.rect.left||A.width!==j?.rect.width)&&E({offset:U,rect:A})}},[i,h,N,j?.offset,j?.rect.left,j?.rect.width]);qd(function(){z()},[z]);var L=b.useCallback(function(){typeof g.current=="function"&&(g.current(),g.current=null),i&&m.current&&(g.current=Ew(i,m.current,z,{elementResize:"ResizeObserver"in window}))},[i,z]);qd(function(){L()},[L]);var _=b.useCallback(function(A){m.current=A,L()},[L]);if(!o&&h!=="fixed"||!j)return null;var R=He("div",Fe({ref:_},Yt(Ue(Ue({},r),{},{offset:j.offset,position:h,rect:j.rect}),"menuPortal",{"menu-portal":!0}),d),s);return He(ux.Provider,{value:S},o?rl.createPortal(R,o):R)},aS=function(r){var o=r.isDisabled,s=r.isRtl;return{label:"container",direction:s?"rtl":void 0,pointerEvents:o?"none":void 0,position:"relative"}},oS=function(r){var o=r.children,s=r.innerProps,i=r.isDisabled,d=r.isRtl;return He("div",Fe({},Yt(r,"container",{"--is-disabled":i,"--is-rtl":d}),s),o)},sS=function(r,o){var s=r.theme.spacing,i=r.isMulti,d=r.hasValue,p=r.selectProps.controlShouldRenderValue;return Ue({alignItems:"center",display:i&&d&&p?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},o?{}:{padding:"".concat(s.baseUnit/2,"px ").concat(s.baseUnit*2,"px")})},iS=function(r){var o=r.children,s=r.innerProps,i=r.isMulti,d=r.hasValue;return He("div",Fe({},Yt(r,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":d}),s),o)},uS=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},cS=function(r){var o=r.children,s=r.innerProps;return He("div",Fe({},Yt(r,"indicatorsContainer",{indicators:!0}),s),o)},$g,dS=["size"],fS=["innerProps","isRtl","size"],pS={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},dx=function(r){var o=r.size,s=Yl(r,dS);return He("svg",Fe({height:o,width:o,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:pS},s))},hf=function(r){return He(dx,Fe({size:20},r),He("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},fx=function(r){return He(dx,Fe({size:20},r),He("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},px=function(r,o){var s=r.isFocused,i=r.theme,d=i.spacing.baseUnit,p=i.colors;return Ue({label:"indicatorContainer",display:"flex",transition:"color 150ms"},o?{}:{color:s?p.neutral60:p.neutral20,padding:d*2,":hover":{color:s?p.neutral80:p.neutral40}})},mS=px,hS=function(r){var o=r.children,s=r.innerProps;return He("div",Fe({},Yt(r,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),s),o||He(fx,null))},gS=px,xS=function(r){var o=r.children,s=r.innerProps;return He("div",Fe({},Yt(r,"clearIndicator",{indicator:!0,"clear-indicator":!0}),s),o||He(hf,null))},vS=function(r,o){var s=r.isDisabled,i=r.theme,d=i.spacing.baseUnit,p=i.colors;return Ue({label:"indicatorSeparator",alignSelf:"stretch",width:1},o?{}:{backgroundColor:s?p.neutral10:p.neutral20,marginBottom:d*2,marginTop:d*2})},yS=function(r){var o=r.innerProps;return He("span",Fe({},o,Yt(r,"indicatorSeparator",{"indicator-separator":!0})))},bS=pw($g||($g=mw([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),wS=function(r,o){var s=r.isFocused,i=r.size,d=r.theme,p=d.colors,h=d.spacing.baseUnit;return Ue({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},o?{}:{color:s?p.neutral60:p.neutral20,padding:h*2})},pd=function(r){var o=r.delay,s=r.offset;return He("span",{css:df({animation:"".concat(bS," 1s ease-in-out ").concat(o,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},SS=function(r){var o=r.innerProps,s=r.isRtl,i=r.size,d=i===void 0?4:i,p=Yl(r,fS);return He("div",Fe({},Yt(Ue(Ue({},p),{},{innerProps:o,isRtl:s,size:d}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),o),He(pd,{delay:0,offset:s}),He(pd,{delay:160,offset:!0}),He(pd,{delay:320,offset:!s}))},NS=function(r,o){var s=r.isDisabled,i=r.isFocused,d=r.theme,p=d.colors,h=d.borderRadius,m=d.spacing;return Ue({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:m.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},o?{}:{backgroundColor:s?p.neutral5:p.neutral0,borderColor:s?p.neutral10:i?p.primary:p.neutral20,borderRadius:h,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(p.primary):void 0,"&:hover":{borderColor:i?p.primary:p.neutral30}})},jS=function(r){var o=r.children,s=r.isDisabled,i=r.isFocused,d=r.innerRef,p=r.innerProps,h=r.menuIsOpen;return He("div",Fe({ref:d},Yt(r,"control",{control:!0,"control--is-disabled":s,"control--is-focused":i,"control--menu-is-open":h}),p,{"aria-disabled":s||void 0}),o)},CS=jS,kS=["data"],MS=function(r,o){var s=r.theme.spacing;return o?{}:{paddingBottom:s.baseUnit*2,paddingTop:s.baseUnit*2}},OS=function(r){var o=r.children,s=r.cx,i=r.getStyles,d=r.getClassNames,p=r.Heading,h=r.headingProps,m=r.innerProps,g=r.label,x=r.theme,y=r.selectProps;return He("div",Fe({},Yt(r,"group",{group:!0}),m),He(p,Fe({},h,{selectProps:y,theme:x,getStyles:i,getClassNames:d,cx:s}),g),He("div",null,o))},ES=function(r,o){var s=r.theme,i=s.colors,d=s.spacing;return Ue({label:"group",cursor:"default",display:"block"},o?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:d.baseUnit*3,paddingRight:d.baseUnit*3,textTransform:"uppercase"})},TS=function(r){var o=ax(r);o.data;var s=Yl(o,kS);return He("div",Fe({},Yt(r,"groupHeading",{"group-heading":!0}),s))},_S=OS,LS=["innerRef","isDisabled","isHidden","inputClassName"],AS=function(r,o){var s=r.isDisabled,i=r.value,d=r.theme,p=d.spacing,h=d.colors;return Ue(Ue({visibility:s?"hidden":"visible",transform:i?"translateZ(0)":""},RS),o?{}:{margin:p.baseUnit/2,paddingBottom:p.baseUnit/2,paddingTop:p.baseUnit/2,color:h.neutral80})},mx={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},RS={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ue({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},mx)},DS=function(r){return Ue({label:"input",color:"inherit",background:0,opacity:r?0:1,width:"100%"},mx)},zS=function(r){var o=r.cx,s=r.value,i=ax(r),d=i.innerRef,p=i.isDisabled,h=i.isHidden,m=i.inputClassName,g=Yl(i,LS);return He("div",Fe({},Yt(r,"input",{"input-container":!0}),{"data-value":s||""}),He("input",Fe({className:o({input:!0},m),ref:d,style:DS(h),disabled:p},g)))},IS=zS,BS=function(r,o){var s=r.theme,i=s.spacing,d=s.borderRadius,p=s.colors;return Ue({label:"multiValue",display:"flex",minWidth:0},o?{}:{backgroundColor:p.neutral10,borderRadius:d/2,margin:i.baseUnit/2})},HS=function(r,o){var s=r.theme,i=s.borderRadius,d=s.colors,p=r.cropWithEllipsis;return Ue({overflow:"hidden",textOverflow:p||p===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},o?{}:{borderRadius:i/2,color:d.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},VS=function(r,o){var s=r.theme,i=s.spacing,d=s.borderRadius,p=s.colors,h=r.isFocused;return Ue({alignItems:"center",display:"flex"},o?{}:{borderRadius:d/2,backgroundColor:h?p.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:p.dangerLight,color:p.danger}})},hx=function(r){var o=r.children,s=r.innerProps;return He("div",s,o)},US=hx,GS=hx;function qS(l){var r=l.children,o=l.innerProps;return He("div",Fe({role:"button"},o),r||He(hf,{size:14}))}var WS=function(r){var o=r.children,s=r.components,i=r.data,d=r.innerProps,p=r.isDisabled,h=r.removeProps,m=r.selectProps,g=s.Container,x=s.Label,y=s.Remove;return He(g,{data:i,innerProps:Ue(Ue({},Yt(r,"multiValue",{"multi-value":!0,"multi-value--is-disabled":p})),d),selectProps:m},He(x,{data:i,innerProps:Ue({},Yt(r,"multiValueLabel",{"multi-value__label":!0})),selectProps:m},o),He(y,{data:i,innerProps:Ue(Ue({},Yt(r,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(o||"option")},h),selectProps:m}))},FS=WS,$S=function(r,o){var s=r.isDisabled,i=r.isFocused,d=r.isSelected,p=r.theme,h=p.spacing,m=p.colors;return Ue({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},o?{}:{backgroundColor:d?m.primary:i?m.primary25:"transparent",color:s?m.neutral20:d?m.neutral0:"inherit",padding:"".concat(h.baseUnit*2,"px ").concat(h.baseUnit*3,"px"),":active":{backgroundColor:s?void 0:d?m.primary:m.primary50}})},YS=function(r){var o=r.children,s=r.isDisabled,i=r.isFocused,d=r.isSelected,p=r.innerRef,h=r.innerProps;return He("div",Fe({},Yt(r,"option",{option:!0,"option--is-disabled":s,"option--is-focused":i,"option--is-selected":d}),{ref:p,"aria-disabled":s},h),o)},QS=YS,XS=function(r,o){var s=r.theme,i=s.spacing,d=s.colors;return Ue({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},o?{}:{color:d.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},PS=function(r){var o=r.children,s=r.innerProps;return He("div",Fe({},Yt(r,"placeholder",{placeholder:!0}),s),o)},ZS=PS,KS=function(r,o){var s=r.isDisabled,i=r.theme,d=i.spacing,p=i.colors;return Ue({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o?{}:{color:s?p.neutral40:p.neutral80,marginLeft:d.baseUnit/2,marginRight:d.baseUnit/2})},JS=function(r){var o=r.children,s=r.isDisabled,i=r.innerProps;return He("div",Fe({},Yt(r,"singleValue",{"single-value":!0,"single-value--is-disabled":s}),i),o)},e3=JS,gx={ClearIndicator:xS,Control:CS,DropdownIndicator:hS,DownChevron:fx,CrossIcon:hf,Group:_S,GroupHeading:TS,IndicatorsContainer:cS,IndicatorSeparator:yS,Input:IS,LoadingIndicator:SS,Menu:Pw,MenuList:Kw,MenuPortal:rS,LoadingMessage:nS,NoOptionsMessage:tS,MultiValue:FS,MultiValueContainer:US,MultiValueLabel:GS,MultiValueRemove:qS,Option:QS,Placeholder:ZS,SelectContainer:oS,SingleValue:e3,ValueContainer:iS},t3=function(r){return Ue(Ue({},gx),r.components)},Yg=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function n3(l,r){return!!(l===r||Yg(l)&&Yg(r))}function l3(l,r){if(l.length!==r.length)return!1;for(var o=0;o<l.length;o++)if(!n3(l[o],r[o]))return!1;return!0}function r3(l,r){r===void 0&&(r=l3);var o=null;function s(){for(var i=[],d=0;d<arguments.length;d++)i[d]=arguments[d];if(o&&o.lastThis===this&&r(i,o.lastArgs))return o.lastResult;var p=l.apply(this,i);return o={lastResult:p,lastArgs:i,lastThis:this},p}return s.clear=function(){o=null},s}var a3={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},o3=function(r){return He("span",Fe({css:a3},r))},Qg=o3,s3={guidance:function(r){var o=r.isSearchable,s=r.isMulti,i=r.tabSelectsValue,d=r.context,p=r.isInitialFocus;switch(d){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return p?"".concat(r["aria-label"]||"Select"," is focused ").concat(o?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(r){var o=r.action,s=r.label,i=s===void 0?"":s,d=r.labels,p=r.isDisabled;switch(o){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(d.length>1?"s":""," ").concat(d.join(","),", selected.");case"select-option":return p?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(r){var o=r.context,s=r.focused,i=r.options,d=r.label,p=d===void 0?"":d,h=r.selectValue,m=r.isDisabled,g=r.isSelected,x=r.isAppleDevice,y=function(w,M){return w&&w.length?"".concat(w.indexOf(M)+1," of ").concat(w.length):""};if(o==="value"&&h)return"value ".concat(p," focused, ").concat(y(h,s),".");if(o==="menu"&&x){var N=m?" disabled":"",k="".concat(g?" selected":"").concat(N);return"".concat(p).concat(k,", ").concat(y(i,s),".")}return""},onFilter:function(r){var o=r.inputValue,s=r.resultsMessage;return"".concat(s).concat(o?" for search term "+o:"",".")}},i3=function(r){var o=r.ariaSelection,s=r.focusedOption,i=r.focusedValue,d=r.focusableOptions,p=r.isFocused,h=r.selectValue,m=r.selectProps,g=r.id,x=r.isAppleDevice,y=m.ariaLiveMessages,N=m.getOptionLabel,k=m.inputValue,S=m.isMulti,w=m.isOptionDisabled,M=m.isSearchable,j=m.menuIsOpen,E=m.options,z=m.screenReaderStatus,L=m.tabSelectsValue,_=m.isLoading,R=m["aria-label"],A=m["aria-live"],B=b.useMemo(function(){return Ue(Ue({},s3),y||{})},[y]),U=b.useMemo(function(){var le="";if(o&&B.onChange){var D=o.option,$=o.options,fe=o.removedValue,be=o.removedValues,ve=o.value,T=function(re){return Array.isArray(re)?null:re},I=fe||D||T(ve),O=I?N(I):"",F=$||be||void 0,X=F?F.map(N):[],pe=Ue({isDisabled:I&&w(I,h),label:O,labels:X},o);le=B.onChange(pe)}return le},[o,B,w,h,N]),G=b.useMemo(function(){var le="",D=s||i,$=!!(s&&h&&h.includes(s));if(D&&B.onFocus){var fe={focused:D,label:N(D),isDisabled:w(D,h),isSelected:$,options:d,context:D===s?"menu":"value",selectValue:h,isAppleDevice:x};le=B.onFocus(fe)}return le},[s,i,N,w,B,d,h,x]),W=b.useMemo(function(){var le="";if(j&&E.length&&!_&&B.onFilter){var D=z({count:d.length});le=B.onFilter({inputValue:k,resultsMessage:D})}return le},[d,k,j,B,E,z,_]),K=o?.action==="initial-input-focus",ge=b.useMemo(function(){var le="";if(B.guidance){var D=i?"value":j?"menu":"input";le=B.guidance({"aria-label":R,context:D,isDisabled:s&&w(s,h),isMulti:S,isSearchable:M,tabSelectsValue:L,isInitialFocus:K})}return le},[R,s,i,S,w,M,j,B,h,L,K]),ae=He(b.Fragment,null,He("span",{id:"aria-selection"},U),He("span",{id:"aria-focused"},G),He("span",{id:"aria-results"},W),He("span",{id:"aria-guidance"},ge));return He(b.Fragment,null,He(Qg,{id:g},K&&ae),He(Qg,{"aria-live":A,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},p&&!K&&ae))},u3=i3,Wd=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],c3=new RegExp("["+Wd.map(function(l){return l.letters}).join("")+"]","g"),xx={};for(var md=0;md<Wd.length;md++)for(var hd=Wd[md],gd=0;gd<hd.letters.length;gd++)xx[hd.letters[gd]]=hd.base;var vx=function(r){return r.replace(c3,function(o){return xx[o]})},d3=r3(vx),Xg=function(r){return r.replace(/^\s+|\s+$/g,"")},f3=function(r){return"".concat(r.label," ").concat(r.value)},Fd=function(r){return function(o,s){if(o.data.__isNew__)return!0;var i=Ue({ignoreCase:!0,ignoreAccents:!0,stringify:f3,trim:!0,matchFrom:"any"},r),d=i.ignoreCase,p=i.ignoreAccents,h=i.stringify,m=i.trim,g=i.matchFrom,x=m?Xg(s):s,y=m?Xg(h(o)):h(o);return d&&(x=x.toLowerCase(),y=y.toLowerCase()),p&&(x=d3(x),y=vx(y)),g==="start"?y.substr(0,x.length)===x:y.indexOf(x)>-1}},p3=["innerRef"];function m3(l){var r=l.innerRef,o=Yl(l,p3),s=Gw(o,"onExited","in","enter","exit","appear");return He("input",Fe({ref:r},s,{css:df({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var h3=function(r){r.cancelable&&r.preventDefault(),r.stopPropagation()};function g3(l){var r=l.isEnabled,o=l.onBottomArrive,s=l.onBottomLeave,i=l.onTopArrive,d=l.onTopLeave,p=b.useRef(!1),h=b.useRef(!1),m=b.useRef(0),g=b.useRef(null),x=b.useCallback(function(M,j){if(g.current!==null){var E=g.current,z=E.scrollTop,L=E.scrollHeight,_=E.clientHeight,R=g.current,A=j>0,B=L-_-z,U=!1;B>j&&p.current&&(s&&s(M),p.current=!1),A&&h.current&&(d&&d(M),h.current=!1),A&&j>B?(o&&!p.current&&o(M),R.scrollTop=L,U=!0,p.current=!0):!A&&-j>z&&(i&&!h.current&&i(M),R.scrollTop=0,U=!0,h.current=!0),U&&h3(M)}},[o,s,i,d]),y=b.useCallback(function(M){x(M,M.deltaY)},[x]),N=b.useCallback(function(M){m.current=M.changedTouches[0].clientY},[]),k=b.useCallback(function(M){var j=m.current-M.changedTouches[0].clientY;x(M,j)},[x]),S=b.useCallback(function(M){if(M){var j=Hw?{passive:!1}:!1;M.addEventListener("wheel",y,j),M.addEventListener("touchstart",N,j),M.addEventListener("touchmove",k,j)}},[k,N,y]),w=b.useCallback(function(M){M&&(M.removeEventListener("wheel",y,!1),M.removeEventListener("touchstart",N,!1),M.removeEventListener("touchmove",k,!1))},[k,N,y]);return b.useEffect(function(){if(r){var M=g.current;return S(M),function(){w(M)}}},[r,S,w]),function(M){g.current=M}}var Pg=["boxSizing","height","overflow","paddingRight","position"],Zg={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Kg(l){l.cancelable&&l.preventDefault()}function Jg(l){l.stopPropagation()}function e0(){var l=this.scrollTop,r=this.scrollHeight,o=l+this.offsetHeight;l===0?this.scrollTop=1:o===r&&(this.scrollTop=l-1)}function t0(){return"ontouchstart"in window||navigator.maxTouchPoints}var n0=!!(typeof window<"u"&&window.document&&window.document.createElement),Mo=0,Na={capture:!1,passive:!1};function x3(l){var r=l.isEnabled,o=l.accountForScrollbars,s=o===void 0?!0:o,i=b.useRef({}),d=b.useRef(null),p=b.useCallback(function(m){if(n0){var g=document.body,x=g&&g.style;if(s&&Pg.forEach(function(S){var w=x&&x[S];i.current[S]=w}),s&&Mo<1){var y=parseInt(i.current.paddingRight,10)||0,N=document.body?document.body.clientWidth:0,k=window.innerWidth-N+y||0;Object.keys(Zg).forEach(function(S){var w=Zg[S];x&&(x[S]=w)}),x&&(x.paddingRight="".concat(k,"px"))}g&&t0()&&(g.addEventListener("touchmove",Kg,Na),m&&(m.addEventListener("touchstart",e0,Na),m.addEventListener("touchmove",Jg,Na))),Mo+=1}},[s]),h=b.useCallback(function(m){if(n0){var g=document.body,x=g&&g.style;Mo=Math.max(Mo-1,0),s&&Mo<1&&Pg.forEach(function(y){var N=i.current[y];x&&(x[y]=N)}),g&&t0()&&(g.removeEventListener("touchmove",Kg,Na),m&&(m.removeEventListener("touchstart",e0,Na),m.removeEventListener("touchmove",Jg,Na)))}},[s]);return b.useEffect(function(){if(r){var m=d.current;return p(m),function(){h(m)}}},[r,p,h]),function(m){d.current=m}}var v3=function(r){var o=r.target;return o.ownerDocument.activeElement&&o.ownerDocument.activeElement.blur()},y3={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function b3(l){var r=l.children,o=l.lockEnabled,s=l.captureEnabled,i=s===void 0?!0:s,d=l.onBottomArrive,p=l.onBottomLeave,h=l.onTopArrive,m=l.onTopLeave,g=g3({isEnabled:i,onBottomArrive:d,onBottomLeave:p,onTopArrive:h,onTopLeave:m}),x=x3({isEnabled:o}),y=function(k){g(k),x(k)};return He(b.Fragment,null,o&&He("div",{onClick:v3,css:y3}),r(y))}var w3={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},S3=function(r){var o=r.name,s=r.onFocus;return He("input",{required:!0,name:o,tabIndex:-1,"aria-hidden":"true",onFocus:s,css:w3,value:"",onChange:function(){}})},N3=S3;function gf(l){var r;return typeof window<"u"&&window.navigator!=null?l.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function j3(){return gf(/^iPhone/i)}function yx(){return gf(/^Mac/i)}function C3(){return gf(/^iPad/i)||yx()&&navigator.maxTouchPoints>1}function k3(){return j3()||C3()}function M3(){return yx()||k3()}var O3=function(r){return r.label},E3=function(r){return r.label},T3=function(r){return r.value},_3=function(r){return!!r.isDisabled},L3={clearIndicator:gS,container:aS,control:NS,dropdownIndicator:mS,group:MS,groupHeading:ES,indicatorsContainer:uS,indicatorSeparator:vS,input:AS,loadingIndicator:wS,loadingMessage:eS,menu:Yw,menuList:Zw,menuPortal:lS,multiValue:BS,multiValueLabel:HS,multiValueRemove:VS,noOptionsMessage:Jw,option:$S,placeholder:XS,singleValue:KS,valueContainer:sS},A3={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},R3=4,bx=4,D3=38,z3=bx*2,I3={baseUnit:bx,controlHeight:D3,menuGutter:z3},xd={borderRadius:R3,colors:A3,spacing:I3},B3={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Fg(),captureMenuScroll:!Fg(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Fd(),formatGroupLabel:O3,getOptionLabel:E3,getOptionValue:T3,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:_3,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Iw(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(r){var o=r.count;return"".concat(o," result").concat(o!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function l0(l,r,o,s){var i=Nx(l,r,o),d=jx(l,r,o),p=Sx(l,r),h=Ii(l,r);return{type:"option",data:r,isDisabled:i,isSelected:d,label:p,value:h,index:s}}function bi(l,r){return l.options.map(function(o,s){if("options"in o){var i=o.options.map(function(p,h){return l0(l,p,r,h)}).filter(function(p){return a0(l,p)});return i.length>0?{type:"group",data:o,options:i,index:s}:void 0}var d=l0(l,o,r,s);return a0(l,d)?d:void 0}).filter(Vw)}function wx(l){return l.reduce(function(r,o){return o.type==="group"?r.push.apply(r,af(o.options.map(function(s){return s.data}))):r.push(o.data),r},[])}function r0(l,r){return l.reduce(function(o,s){return s.type==="group"?o.push.apply(o,af(s.options.map(function(i){return{data:i.data,id:"".concat(r,"-").concat(s.index,"-").concat(i.index)}}))):o.push({data:s.data,id:"".concat(r,"-").concat(s.index)}),o},[])}function H3(l,r){return wx(bi(l,r))}function a0(l,r){var o=l.inputValue,s=o===void 0?"":o,i=r.data,d=r.isSelected,p=r.label,h=r.value;return(!kx(l)||!d)&&Cx(l,{label:p,value:h,data:i},s)}function V3(l,r){var o=l.focusedValue,s=l.selectValue,i=s.indexOf(o);if(i>-1){var d=r.indexOf(o);if(d>-1)return o;if(i<r.length)return r[i]}return null}function U3(l,r){var o=l.focusedOption;return o&&r.indexOf(o)>-1?o:r[0]}var vd=function(r,o){var s,i=(s=r.find(function(d){return d.data===o}))===null||s===void 0?void 0:s.id;return i||null},Sx=function(r,o){return r.getOptionLabel(o)},Ii=function(r,o){return r.getOptionValue(o)};function Nx(l,r,o){return typeof l.isOptionDisabled=="function"?l.isOptionDisabled(r,o):!1}function jx(l,r,o){if(o.indexOf(r)>-1)return!0;if(typeof l.isOptionSelected=="function")return l.isOptionSelected(r,o);var s=Ii(l,r);return o.some(function(i){return Ii(l,i)===s})}function Cx(l,r,o){return l.filterOption?l.filterOption(r,o):!0}var kx=function(r){var o=r.hideSelectedOptions,s=r.isMulti;return o===void 0?s:o},G3=1,Mx=(function(l){c2(o,l);var r=p2(o);function o(s){var i;if(i2(this,o),i=r.call(this,s),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(m){i.controlRef=m},i.focusedOptionRef=null,i.getFocusedOptionRef=function(m){i.focusedOptionRef=m},i.menuListRef=null,i.getMenuListRef=function(m){i.menuListRef=m},i.inputRef=null,i.getInputRef=function(m){i.inputRef=m},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(m,g){var x=i.props,y=x.onChange,N=x.name;g.name=N,i.ariaOnChange(m,g),y(m,g)},i.setValue=function(m,g,x){var y=i.props,N=y.closeMenuOnSelect,k=y.isMulti,S=y.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:S}),N&&(i.setState({inputIsHiddenAfterUpdate:!k}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(m,{action:g,option:x})},i.selectOption=function(m){var g=i.props,x=g.blurInputOnSelect,y=g.isMulti,N=g.name,k=i.state.selectValue,S=y&&i.isOptionSelected(m,k),w=i.isOptionDisabled(m,k);if(S){var M=i.getOptionValue(m);i.setValue(k.filter(function(j){return i.getOptionValue(j)!==M}),"deselect-option",m)}else if(!w)y?i.setValue([].concat(af(k),[m]),"select-option",m):i.setValue(m,"select-option");else{i.ariaOnChange(m,{action:"select-option",option:m,name:N});return}x&&i.blurInput()},i.removeValue=function(m){var g=i.props.isMulti,x=i.state.selectValue,y=i.getOptionValue(m),N=x.filter(function(S){return i.getOptionValue(S)!==y}),k=mi(g,N,N[0]||null);i.onChange(k,{action:"remove-value",removedValue:m}),i.focusInput()},i.clearValue=function(){var m=i.state.selectValue;i.onChange(mi(i.props.isMulti,[],null),{action:"clear",removedValues:m})},i.popValue=function(){var m=i.props.isMulti,g=i.state.selectValue,x=g[g.length-1],y=g.slice(0,g.length-1),N=mi(m,y,y[0]||null);x&&i.onChange(N,{action:"pop-value",removedValue:x})},i.getFocusedOptionId=function(m){return vd(i.state.focusableOptionsWithIds,m)},i.getFocusableOptionsWithIds=function(){return r0(bi(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];return Lw.apply(void 0,[i.props.classNamePrefix].concat(g))},i.getOptionLabel=function(m){return Sx(i.props,m)},i.getOptionValue=function(m){return Ii(i.props,m)},i.getStyles=function(m,g){var x=i.props.unstyled,y=L3[m](g,x);y.boxSizing="border-box";var N=i.props.styles[m];return N?N(y,g):y},i.getClassNames=function(m,g){var x,y;return(x=(y=i.props.classNames)[m])===null||x===void 0?void 0:x.call(y,g)},i.getElementId=function(m){return"".concat(i.state.instancePrefix,"-").concat(m)},i.getComponents=function(){return t3(i.props)},i.buildCategorizedOptions=function(){return bi(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return wx(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(m,g){i.setState({ariaSelection:Ue({value:m},g)})},i.onMenuMouseDown=function(m){m.button===0&&(m.stopPropagation(),m.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(m){i.blockOptionHover=!1},i.onControlMouseDown=function(m){if(!m.defaultPrevented){var g=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&i.onMenuClose():g&&i.openMenu("first"):(g&&(i.openAfterFocus=!0),i.focusInput()),m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&m.preventDefault()}},i.onDropdownIndicatorMouseDown=function(m){if(!(m&&m.type==="mousedown"&&m.button!==0)&&!i.props.isDisabled){var g=i.props,x=g.isMulti,y=g.menuIsOpen;i.focusInput(),y?(i.setState({inputIsHiddenAfterUpdate:!x}),i.onMenuClose()):i.openMenu("first"),m.preventDefault()}},i.onClearIndicatorMouseDown=function(m){m&&m.type==="mousedown"&&m.button!==0||(i.clearValue(),m.preventDefault(),i.openAfterFocus=!1,m.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(m){typeof i.props.closeMenuOnScroll=="boolean"?m.target instanceof HTMLElement&&Yi(m.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(m)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(m){var g=m.touches,x=g&&g.item(0);x&&(i.initialTouchX=x.clientX,i.initialTouchY=x.clientY,i.userIsDragging=!1)},i.onTouchMove=function(m){var g=m.touches,x=g&&g.item(0);if(x){var y=Math.abs(x.clientX-i.initialTouchX),N=Math.abs(x.clientY-i.initialTouchY),k=5;i.userIsDragging=y>k||N>k}},i.onTouchEnd=function(m){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(m.target)&&i.menuListRef&&!i.menuListRef.contains(m.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(m){i.userIsDragging||i.onControlMouseDown(m)},i.onClearIndicatorTouchEnd=function(m){i.userIsDragging||i.onClearIndicatorMouseDown(m)},i.onDropdownIndicatorTouchEnd=function(m){i.userIsDragging||i.onDropdownIndicatorMouseDown(m)},i.handleInputChange=function(m){var g=i.props.inputValue,x=m.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(x,{action:"input-change",prevInputValue:g}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(m){i.props.onFocus&&i.props.onFocus(m),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(m){var g=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(m),i.onInputChange("",{action:"input-blur",prevInputValue:g}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(m){if(!(i.blockOptionHover||i.state.focusedOption===m)){var g=i.getFocusableOptions(),x=g.indexOf(m);i.setState({focusedOption:m,focusedOptionId:x>-1?i.getFocusedOptionId(m):null})}},i.shouldHideSelectedOptions=function(){return kx(i.props)},i.onValueInputFocus=function(m){m.preventDefault(),m.stopPropagation(),i.focus()},i.onKeyDown=function(m){var g=i.props,x=g.isMulti,y=g.backspaceRemovesValue,N=g.escapeClearsValue,k=g.inputValue,S=g.isClearable,w=g.isDisabled,M=g.menuIsOpen,j=g.onKeyDown,E=g.tabSelectsValue,z=g.openMenuOnFocus,L=i.state,_=L.focusedOption,R=L.focusedValue,A=L.selectValue;if(!w&&!(typeof j=="function"&&(j(m),m.defaultPrevented))){switch(i.blockOptionHover=!0,m.key){case"ArrowLeft":if(!x||k)return;i.focusValue("previous");break;case"ArrowRight":if(!x||k)return;i.focusValue("next");break;case"Delete":case"Backspace":if(k)return;if(R)i.removeValue(R);else{if(!y)return;x?i.popValue():S&&i.clearValue()}break;case"Tab":if(i.isComposing||m.shiftKey||!M||!E||!_||z&&i.isOptionSelected(_,A))return;i.selectOption(_);break;case"Enter":if(m.keyCode===229)break;if(M){if(!_||i.isComposing)return;i.selectOption(_);break}return;case"Escape":M?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:k}),i.onMenuClose()):S&&N&&i.clearValue();break;case" ":if(k)return;if(!M){i.openMenu("first");break}if(!_)return;i.selectOption(_);break;case"ArrowUp":M?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":M?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!M)return;i.focusOption("pageup");break;case"PageDown":if(!M)return;i.focusOption("pagedown");break;case"Home":if(!M)return;i.focusOption("first");break;case"End":if(!M)return;i.focusOption("last");break;default:return}m.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++G3),i.state.selectValue=qg(s.value),s.menuIsOpen&&i.state.selectValue.length){var d=i.getFocusableOptionsWithIds(),p=i.buildFocusableOptions(),h=p.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=d,i.state.focusedOption=p[h],i.state.focusedOptionId=vd(d,p[h])}return i}return u2(o,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Wg(this.menuListRef,this.focusedOptionRef),M3()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var d=this.props,p=d.isDisabled,h=d.menuIsOpen,m=this.state.isFocused;(m&&!p&&i.isDisabled||m&&h&&!i.menuIsOpen)&&this.focusInput(),m&&p&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!m&&!p&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Wg(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,d){this.props.onInputChange(i,d)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var d=this,p=this.state,h=p.selectValue,m=p.isFocused,g=this.buildFocusableOptions(),x=i==="first"?0:g.length-1;if(!this.props.isMulti){var y=g.indexOf(h[0]);y>-1&&(x=y)}this.scrollToFocusedOptionOnUpdate=!(m&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:g[x],focusedOptionId:this.getFocusedOptionId(g[x])},function(){return d.onMenuOpen()})}},{key:"focusValue",value:function(i){var d=this.state,p=d.selectValue,h=d.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var m=p.indexOf(h);h||(m=-1);var g=p.length-1,x=-1;if(p.length){switch(i){case"previous":m===0?x=0:m===-1?x=g:x=m-1;break;case"next":m>-1&&m<g&&(x=m+1);break}this.setState({inputIsHidden:x!==-1,focusedValue:p[x]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",d=this.props.pageSize,p=this.state.focusedOption,h=this.getFocusableOptions();if(h.length){var m=0,g=h.indexOf(p);p||(g=-1),i==="up"?m=g>0?g-1:h.length-1:i==="down"?m=(g+1)%h.length:i==="pageup"?(m=g-d,m<0&&(m=0)):i==="pagedown"?(m=g+d,m>h.length-1&&(m=h.length-1)):i==="last"&&(m=h.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:h[m],focusedValue:null,focusedOptionId:this.getFocusedOptionId(h[m])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(xd):Ue(Ue({},xd),this.props.theme):xd})},{key:"getCommonProps",value:function(){var i=this.clearValue,d=this.cx,p=this.getStyles,h=this.getClassNames,m=this.getValue,g=this.selectOption,x=this.setValue,y=this.props,N=y.isMulti,k=y.isRtl,S=y.options,w=this.hasValue();return{clearValue:i,cx:d,getStyles:p,getClassNames:h,getValue:m,hasValue:w,isMulti:N,isRtl:k,options:S,selectOption:g,selectProps:y,setValue:x,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,d=i.isClearable,p=i.isMulti;return d===void 0?p:d}},{key:"isOptionDisabled",value:function(i,d){return Nx(this.props,i,d)}},{key:"isOptionSelected",value:function(i,d){return jx(this.props,i,d)}},{key:"filterOption",value:function(i,d){return Cx(this.props,i,d)}},{key:"formatOptionLabel",value:function(i,d){if(typeof this.props.formatOptionLabel=="function"){var p=this.props.inputValue,h=this.state.selectValue;return this.props.formatOptionLabel(i,{context:d,inputValue:p,selectValue:h})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var i=this.props,d=i.isDisabled,p=i.isSearchable,h=i.inputId,m=i.inputValue,g=i.tabIndex,x=i.form,y=i.menuIsOpen,N=i.required,k=this.getComponents(),S=k.Input,w=this.state,M=w.inputIsHidden,j=w.ariaSelection,E=this.commonProps,z=h||this.getElementId("input"),L=Ue(Ue(Ue({"aria-autocomplete":"list","aria-expanded":y,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":N,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},y&&{"aria-controls":this.getElementId("listbox")}),!p&&{"aria-readonly":!0}),this.hasValue()?j?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return p?b.createElement(S,Fe({},E,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:z,innerRef:this.getInputRef,isDisabled:d,isHidden:M,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:g,form:x,type:"text",value:m},L)):b.createElement(m3,Fe({id:z,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Di,onFocus:this.onInputFocus,disabled:d,tabIndex:g,inputMode:"none",form:x,value:""},L))})},{key:"renderPlaceholderOrValue",value:function(){var i=this,d=this.getComponents(),p=d.MultiValue,h=d.MultiValueContainer,m=d.MultiValueLabel,g=d.MultiValueRemove,x=d.SingleValue,y=d.Placeholder,N=this.commonProps,k=this.props,S=k.controlShouldRenderValue,w=k.isDisabled,M=k.isMulti,j=k.inputValue,E=k.placeholder,z=this.state,L=z.selectValue,_=z.focusedValue,R=z.isFocused;if(!this.hasValue()||!S)return j?null:b.createElement(y,Fe({},N,{key:"placeholder",isDisabled:w,isFocused:R,innerProps:{id:this.getElementId("placeholder")}}),E);if(M)return L.map(function(B,U){var G=B===_,W="".concat(i.getOptionLabel(B),"-").concat(i.getOptionValue(B));return b.createElement(p,Fe({},N,{components:{Container:h,Label:m,Remove:g},isFocused:G,isDisabled:w,key:W,index:U,removeProps:{onClick:function(){return i.removeValue(B)},onTouchEnd:function(){return i.removeValue(B)},onMouseDown:function(ge){ge.preventDefault()}},data:B}),i.formatOptionLabel(B,"value"))});if(j)return null;var A=L[0];return b.createElement(x,Fe({},N,{data:A,isDisabled:w}),this.formatOptionLabel(A,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),d=i.ClearIndicator,p=this.commonProps,h=this.props,m=h.isDisabled,g=h.isLoading,x=this.state.isFocused;if(!this.isClearable()||!d||m||!this.hasValue()||g)return null;var y={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(d,Fe({},p,{innerProps:y,isFocused:x}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),d=i.LoadingIndicator,p=this.commonProps,h=this.props,m=h.isDisabled,g=h.isLoading,x=this.state.isFocused;if(!d||!g)return null;var y={"aria-hidden":"true"};return b.createElement(d,Fe({},p,{innerProps:y,isDisabled:m,isFocused:x}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),d=i.DropdownIndicator,p=i.IndicatorSeparator;if(!d||!p)return null;var h=this.commonProps,m=this.props.isDisabled,g=this.state.isFocused;return b.createElement(p,Fe({},h,{isDisabled:m,isFocused:g}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),d=i.DropdownIndicator;if(!d)return null;var p=this.commonProps,h=this.props.isDisabled,m=this.state.isFocused,g={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(d,Fe({},p,{innerProps:g,isDisabled:h,isFocused:m}))}},{key:"renderMenu",value:function(){var i=this,d=this.getComponents(),p=d.Group,h=d.GroupHeading,m=d.Menu,g=d.MenuList,x=d.MenuPortal,y=d.LoadingMessage,N=d.NoOptionsMessage,k=d.Option,S=this.commonProps,w=this.state.focusedOption,M=this.props,j=M.captureMenuScroll,E=M.inputValue,z=M.isLoading,L=M.loadingMessage,_=M.minMenuHeight,R=M.maxMenuHeight,A=M.menuIsOpen,B=M.menuPlacement,U=M.menuPosition,G=M.menuPortalTarget,W=M.menuShouldBlockScroll,K=M.menuShouldScrollIntoView,ge=M.noOptionsMessage,ae=M.onMenuScrollToTop,le=M.onMenuScrollToBottom;if(!A)return null;var D=function(O,F){var X=O.type,pe=O.data,J=O.isDisabled,re=O.isSelected,ye=O.label,_e=O.value,$e=w===pe,ee=J?void 0:function(){return i.onOptionHover(pe)},Ve=J?void 0:function(){return i.selectOption(pe)},Ne="".concat(i.getElementId("option"),"-").concat(F),Ce={id:Ne,onClick:Ve,onMouseMove:ee,onMouseOver:ee,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:re};return b.createElement(k,Fe({},S,{innerProps:Ce,data:pe,isDisabled:J,isSelected:re,key:Ne,label:ye,type:X,value:_e,isFocused:$e,innerRef:$e?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(O.data,"menu"))},$;if(this.hasOptions())$=this.getCategorizedOptions().map(function(I){if(I.type==="group"){var O=I.data,F=I.options,X=I.index,pe="".concat(i.getElementId("group"),"-").concat(X),J="".concat(pe,"-heading");return b.createElement(p,Fe({},S,{key:pe,data:O,options:F,Heading:h,headingProps:{id:J,data:I.data},label:i.formatGroupLabel(I.data)}),I.options.map(function(re){return D(re,"".concat(X,"-").concat(re.index))}))}else if(I.type==="option")return D(I,"".concat(I.index))});else if(z){var fe=L({inputValue:E});if(fe===null)return null;$=b.createElement(y,S,fe)}else{var be=ge({inputValue:E});if(be===null)return null;$=b.createElement(N,S,be)}var ve={minMenuHeight:_,maxMenuHeight:R,menuPlacement:B,menuPosition:U,menuShouldScrollIntoView:K},T=b.createElement(Qw,Fe({},S,ve),function(I){var O=I.ref,F=I.placerProps,X=F.placement,pe=F.maxHeight;return b.createElement(m,Fe({},S,ve,{innerRef:O,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:z,placement:X}),b.createElement(b3,{captureEnabled:j,onTopArrive:ae,onBottomArrive:le,lockEnabled:W},function(J){return b.createElement(g,Fe({},S,{innerRef:function(ye){i.getMenuListRef(ye),J(ye)},innerProps:{role:"listbox","aria-multiselectable":S.isMulti,id:i.getElementId("listbox")},isLoading:z,maxHeight:pe,focusedOption:w}),$)}))});return G||U==="fixed"?b.createElement(x,Fe({},S,{appendTo:G,controlElement:this.controlRef,menuPlacement:B,menuPosition:U}),T):T}},{key:"renderFormField",value:function(){var i=this,d=this.props,p=d.delimiter,h=d.isDisabled,m=d.isMulti,g=d.name,x=d.required,y=this.state.selectValue;if(x&&!this.hasValue()&&!h)return b.createElement(N3,{name:g,onFocus:this.onValueInputFocus});if(!(!g||h))if(m)if(p){var N=y.map(function(w){return i.getOptionValue(w)}).join(p);return b.createElement("input",{name:g,type:"hidden",value:N})}else{var k=y.length>0?y.map(function(w,M){return b.createElement("input",{key:"i-".concat(M),name:g,type:"hidden",value:i.getOptionValue(w)})}):b.createElement("input",{name:g,type:"hidden",value:""});return b.createElement("div",null,k)}else{var S=y[0]?this.getOptionValue(y[0]):"";return b.createElement("input",{name:g,type:"hidden",value:S})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,d=this.state,p=d.ariaSelection,h=d.focusedOption,m=d.focusedValue,g=d.isFocused,x=d.selectValue,y=this.getFocusableOptions();return b.createElement(u3,Fe({},i,{id:this.getElementId("live-region"),ariaSelection:p,focusedOption:h,focusedValue:m,isFocused:g,selectValue:x,focusableOptions:y,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),d=i.Control,p=i.IndicatorsContainer,h=i.SelectContainer,m=i.ValueContainer,g=this.props,x=g.className,y=g.id,N=g.isDisabled,k=g.menuIsOpen,S=this.state.isFocused,w=this.commonProps=this.getCommonProps();return b.createElement(h,Fe({},w,{className:x,innerProps:{id:y,onKeyDown:this.onKeyDown},isDisabled:N,isFocused:S}),this.renderLiveRegion(),b.createElement(d,Fe({},w,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:N,isFocused:S,menuIsOpen:k}),b.createElement(m,Fe({},w,{isDisabled:N}),this.renderPlaceholderOrValue(),this.renderInput()),b.createElement(p,Fe({},w,{isDisabled:N}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,d){var p=d.prevProps,h=d.clearFocusValueOnUpdate,m=d.inputIsHiddenAfterUpdate,g=d.ariaSelection,x=d.isFocused,y=d.prevWasFocused,N=d.instancePrefix,k=i.options,S=i.value,w=i.menuIsOpen,M=i.inputValue,j=i.isMulti,E=qg(S),z={};if(p&&(S!==p.value||k!==p.options||w!==p.menuIsOpen||M!==p.inputValue)){var L=w?H3(i,E):[],_=w?r0(bi(i,E),"".concat(N,"-option")):[],R=h?V3(d,E):null,A=U3(d,L),B=vd(_,A);z={selectValue:E,focusedOption:A,focusedOptionId:B,focusableOptionsWithIds:_,focusedValue:R,clearFocusValueOnUpdate:!1}}var U=m!=null&&i!==p?{inputIsHidden:m,inputIsHiddenAfterUpdate:void 0}:{},G=g,W=x&&y;return x&&!W&&(G={value:mi(j,E,E[0]||null),options:E,action:"initial-input-focus"},W=!y),g?.action==="initial-input-focus"&&(G=null),Ue(Ue(Ue({},z),U),{},{prevProps:i,ariaSelection:G,prevWasFocused:W})}}]),o})(b.Component);Mx.defaultProps=B3;var q3=b.forwardRef(function(l,r){var o=s2(l);return b.createElement(Mx,Fe({ref:r},o))}),o0=q3;function yd({containerClass:l,name:r,value:o,options:s,onChange:i,disabled:d=!1,hideLabel:p=!1,hasPin:h,isPinned:m=!1,onTogglePin:g,hasError:x=!1,forceModalOpen:y=!1,onModalClose:N}){const S=Ei(xe=>xe.theme)==="dark",[w,M]=b.useState(!1),j=b.useRef(null),E=b.useRef(null),[z,L]=b.useState([]),[_,R]=b.useState(!1),A=y||w,B=B0(),U=xe=>{if(!Array.isArray(s))return s?.[xe]},G=Array.isArray(s)?s:U("options")??[],W=!!U("image_upload"),K=U("image_folder")??"input",ge="__null__",ae=G.some(xe=>xe===null),le=G.filter(xe=>xe!==null).map(xe=>String(xe)),D=Array.from(new Set([...le,...z])),$=o===null?ge:String(o??""),fe=$.split(/[\\/]/).pop()??$,be=D.includes($)||D.includes(fe),ve=o!=null&&$!==""&&!be,T=be?D.includes($)?$:fe:$,I=[];(o===null||ae)&&I.push({value:ge,label:"None"}),ve&&I.push({value:$,label:$,isMissing:!0}),I.push(...D.map(xe=>({value:xe,label:xe})));const O=I.find(xe=>xe.value===T)??null,F=G.filter(xe=>xe!==null).length,X=y?!0:B&&!(F>0&&F<5),pe=W&&K==="input",J=xe=>{const Ee=xe.replace(/\\/g,"/"),Ae=Ee.lastIndexOf("/"),ft=Ae>=0?Ee.slice(Ae+1):Ee,ut=Ae>=0?Ee.slice(0,Ae):"";return qn(ft,ut,"input")},re=b.useMemo(()=>pe?{DropdownIndicator:null,IndicatorSeparator:null,Option:Ee=>{const{data:Ae}=Ee,ut=Ae.value!==ge&&!Ae.isMissing&&!!Ae.value?J(Ae.value):null;return u.jsx(gx.Option,{...Ee,children:u.jsxs("div",{className:"flex items-center gap-2",children:[ut&&u.jsx("img",{src:ut,alt:"",className:"w-[72px] h-[72px] rounded-sm object-cover bg-gray-100 shrink-0",loading:"lazy",decoding:"async"}),u.jsx("span",{className:"truncate",children:Ae.label})]})})}}:{DropdownIndicator:null,IndicatorSeparator:null},[pe]),ye=["rs-container",h?"rs-has-pin":"rs-no-pin",x?"rs-error":"",ve?"rs-missing":"",d?"rs-disabled":""].filter(Boolean).join(" "),_e=typeof document>"u"?null:document.body,$e=()=>{M(!1),N?.()},ee=xe=>{xe&&i(xe.value===ge?null:xe.value)},Ve=xe=>{ee(xe),$e()},Ne=()=>{d||_||E.current?.click()},Ce=async xe=>{const Ee=xe.target.files?.[0];if(Ee){R(!0);try{const Ae=await k0(Ee,{type:K}),ft=Ae.subfolder?`${Ae.subfolder}/${Ae.name}`:Ae.name;L(ut=>ut.includes(ft)?ut:[...ut,ft]),i(ft)}catch(Ae){console.error("Failed to upload image:",Ae)}finally{R(!1),xe.target.value=""}}},tt=W?u.jsx("button",{type:"button",className:`w-full py-2 px-3 rounded-lg border text-sm font-medium transition-colors ${d||_?"opacity-60 cursor-not-allowed border-gray-200 text-gray-400 bg-white":"border-gray-200 text-gray-700 bg-white hover:border-gray-300 hover:text-gray-900"}`,onClick:Ne,disabled:d||_,children:u.jsxs("span",{className:"inline-flex items-center justify-center gap-2",children:[u.jsx(tf,{className:"w-4 h-4"}),_?"Uploading...":"Load from camera roll"]})}):null,Qe="#111827",we="#6b7280";return X?u.jsxs("div",{className:`${l} combo-control-root combo-control-modal`,children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),u.jsxs("div",{className:`combo-control-trigger relative w-full p-3 comfy-input text-base flex items-center justify-between min-h-[46px] ${d?"opacity-60 cursor-not-allowed":""} ${x?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&M(!0),children:[u.jsx("span",{className:`combo-control-trigger-label truncate min-w-0 flex-1 ${O?"text-gray-900 dark:text-[#e5e7eb]":"text-gray-400 dark:text-gray-500"} ${h?"pr-16":"pr-6"}`,children:O?O.label:"Select..."}),u.jsxs("div",{className:"combo-control-trigger-icons flex items-center absolute right-0 top-0 bottom-0 pointer-events-none",children:[u.jsx("div",{className:"combo-control-chevron px-2 text-gray-400",children:u.jsx(ki,{className:"w-5 h-5"})}),h&&u.jsx("div",{className:"combo-control-pin pointer-events-auto px-2",children:u.jsx(ka,{isPinned:m,onToggle:g})})]})]}),ve&&u.jsx("div",{className:"mt-1 text-xs text-red-700",children:"Missing on ComfyUI server"}),W&&u.jsxs("div",{className:"combo-control-upload mt-2",children:[tt,u.jsx("input",{ref:E,type:"file",accept:"image/*",className:"hidden",onChange:Ce})]}),u.jsx(rf,{title:r,isOpen:A,onClose:$e,children:u.jsx(o0,{className:ye,classNamePrefix:"rs",options:I,value:O,onChange:Ve,isSearchable:!0,autoFocus:!y,menuIsOpen:y?void 0:!0,controlShouldRenderValue:!0,placeholder:"Search...",filterOption:Fd({ignoreAccents:!0,ignoreCase:!0,trim:!0,matchFrom:"any"}),styles:{menu:xe=>({...xe,position:"static",boxShadow:"none",border:"none",marginTop:"0.5rem",borderRadius:0,backgroundColor:S?"transparent":"#ffffff"}),menuList:xe=>({...xe,maxHeight:"calc(100vh - 160px)",height:"auto",paddingBottom:"2rem",overflowY:"auto",overflowX:"auto",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",touchAction:"pan-y"}),option:(xe,Ee)=>S?xe:{...xe,color:Qe,backgroundColor:Ee.isSelected?"#e5e7eb":Ee.isFocused?"#f3f4f6":"transparent"},singleValue:xe=>({...xe,color:S?xe.color:Qe}),input:xe=>({...xe,color:S?xe.color:Qe}),placeholder:xe=>({...xe,color:S?xe.color:we}),control:xe=>({...xe,borderColor:"#3b82f6",boxShadow:"0 0 0 1px #3b82f6",backgroundColor:S?xe.backgroundColor:"#ffffff",color:S?xe.color:Qe})},components:re,noOptionsMessage:()=>"No matches"})})]}):u.jsxs("div",{className:`${l} combo-control-root combo-control-inline`,children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),u.jsxs("div",{className:"combo-control-input-wrapper relative rs-scroll-target",ref:j,children:[u.jsx(o0,{className:ye,classNamePrefix:"rs",options:I,value:O,onChange:ee,isSearchable:!0,isDisabled:d,filterOption:Fd({ignoreAccents:!0,ignoreCase:!0,trim:!0,matchFrom:"any"}),menuPortalTarget:_e,menuPosition:"fixed",menuPlacement:"bottom",menuShouldScrollIntoView:!1,styles:{menuPortal:xe=>({...xe,zIndex:200}),menuList:xe=>({...xe,overflowY:"auto",overflowX:"auto",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",touchAction:"pan-y"}),option:(xe,Ee)=>S?xe:{...xe,color:Qe,backgroundColor:Ee.isSelected?"#e5e7eb":Ee.isFocused?"#f3f4f6":"transparent"},singleValue:xe=>({...xe,color:S?xe.color:Qe}),input:xe=>({...xe,color:S?xe.color:Qe}),placeholder:xe=>({...xe,color:S?xe.color:we})},components:re,noOptionsMessage:()=>"No matches"}),u.jsxs("div",{className:"combo-control-icons absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:[u.jsx("div",{className:"combo-control-chevron px-2 text-gray-400",children:u.jsx(ki,{className:"w-5 h-5"})}),h&&u.jsx("div",{className:"combo-control-pin pointer-events-auto px-2",children:u.jsx(ka,{isPinned:m,onToggle:g})}),!h&&u.jsx("div",{className:"w-3"})]})]}),ve&&u.jsx("div",{className:"mt-1 text-xs text-red-700",children:"Missing on ComfyUI server"}),W&&u.jsxs("div",{className:"mt-2",children:[tt,u.jsx("input",{ref:E,type:"file",accept:"image/*",className:"hidden",onChange:Ce})]})]})}function cl({name:l,type:r,value:o,options:s,onChange:i,disabled:d=!1,hasError:p=!1,hideLabel:h=!1,compact:m=!1,forceModalOpen:g=!1,onModalClose:x,seedMode:y,onSeedModeChange:N,hasPin:k,isPinned:S=!1,onTogglePin:w,containerClass:M}){const[j,E]=b.useState(!1),z=()=>{d||E(!0)},L=()=>{E(!1),x?.()},_=r==="COMBO"||Array.isArray(s?.options),R=["INT","FLOAT"].includes(r.toUpperCase()),A=r.toUpperCase()==="STRING",B=l.replace(/_/g," "),U=k??(!!w||S),G=M??"space-y-2 w-full",W=M??(m?"mb-0":"mb-3"),K={name:l,value:o,options:s,onChange:i,disabled:d,hideLabel:h,hasError:p,forceModalOpen:g,onModalClose:x,containerClass:G,hasPin:U,isPinned:S,onTogglePin:w},ge=()=>_?u.jsx(yd,{...K}):R?u.jsx(zd,{...K,type:r,seedMode:y,onSeedModeChange:N}):A?u.jsx(Og,{...K}):u.jsxs("div",{className:"unsupported-widget-type text-xs text-gray-400 italic",children:["Unsupported: ",r]}),ae=g||j;if(r==="POWER_LORA_HEADER")return u.jsx("div",{className:`${W} power-lora-header flex items-center justify-between p-3 bg-blue-50/50 dark:bg-blue-900/20 rounded-lg`,children:u.jsxs("div",{className:"power-lora-header-content flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",onChange:le=>i(le.target.checked),className:"w-5 h-5 rounded cursor-pointer",disabled:d}),u.jsx("span",{className:"power-lora-header-label text-sm font-semibold text-blue-900 dark:text-blue-100 uppercase tracking-wider",children:"Toggle All Loras"})]})});if(r==="POWER_LORA"){const le=o||{on:!0,lora:"",strength:1},D=s||{},$=D.choices,fe=D.showSeparate,be=(ve,T)=>{i({...le,[ve]:T})};return u.jsxs("div",{className:`${W} power-lora-row flex flex-col gap-2 p-3 border border-gray-200 dark:border-gray-800 rounded-lg bg-gray-50/50 dark:bg-gray-900/50 ${le.on?"":"opacity-60"}`,children:[u.jsxs("div",{className:"power-lora-row-actions flex items-center gap-2",children:[u.jsx("button",{type:"button",onClick:()=>be("on",!le.on),className:`power-lora-enabled-button flex-1 py-2 rounded-lg text-sm font-semibold transition-colors ${le.on?"bg-blue-600 text-white":"bg-gray-700 text-white"} ${d?"opacity-60 cursor-not-allowed":""}`,disabled:d,children:le.on?"Enabled":"Disabled"}),u.jsx("button",{type:"button",onClick:()=>i(null),className:`power-lora-remove-button flex-1 py-2 rounded-lg text-sm font-semibold bg-red-600 text-white hover:bg-red-700 transition-colors ${d?"opacity-60 cursor-not-allowed":""}`,disabled:d,children:"Remove"})]}),u.jsx("div",{className:"power-lora-row-header flex items-center gap-3",children:u.jsx("div",{className:"power-lora-select flex-grow min-w-0",children:u.jsx(cl,{name:"",hideLabel:!0,compact:!0,type:"COMBO",value:le.lora,options:$,onChange:ve=>be("lora",ve),disabled:d})})}),u.jsxs("div",{className:"power-lora-strengths flex flex-col",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 ml-1",children:fe?"Model strength":"Strength"}),u.jsx("div",{className:"power-lora-strength-row flex items-center gap-3",children:u.jsx("div",{className:"power-lora-strength-input flex-grow",children:u.jsx(cl,{name:"",hideLabel:!0,compact:!0,type:"FLOAT",value:le.strength,options:{min:-10,max:10,step:.01},onChange:ve=>be("strength",ve),disabled:d})})}),fe&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 ml-1",children:"Clip strength"}),fe&&u.jsx("div",{className:"power-lora-strength-row flex items-center gap-3",children:u.jsx("div",{className:"power-lora-strength-input flex-grow",children:u.jsx(cl,{name:"",hideLabel:!0,compact:!0,type:"FLOAT",value:le.strengthTwo??le.strength,options:{min:-10,max:10,step:.01},onChange:ve=>be("strengthTwo",ve),disabled:d})})})]})]})}if(r==="POWER_LORA_ADD"){const le=()=>{i({on:!0,lora:"None",strength:1,model_strength:1,clip_strength:1})};return u.jsx("div",{className:`${W} power-lora-add`,children:u.jsxs("button",{onClick:le,className:"w-full py-2 px-4 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg text-sm font-medium text-gray-500 hover:text-blue-500 hover:border-blue-500 transition-all flex items-center justify-center gap-2",disabled:d,children:[u.jsx(tf,{className:"w-5 h-5"}),"Add Lora"]})})}return A?u.jsx(Og,{...K}):_?u.jsx(yd,{...K}):R?u.jsx(zd,{...K,type:r,seedMode:y,onSeedModeChange:N}):r.toUpperCase()==="BOOLEAN"?u.jsx(yd,{...K,value:String(!!o),options:["true","false"],onChange:le=>i(String(le).toLowerCase()==="true")}):u.jsxs("div",{id:`widget-control-${l}`,className:`widget-control-root ${m?"compact-control":""}`,children:[!h&&u.jsxs("div",{id:`widget-label-container-${l}`,className:"flex items-center justify-between mb-1.5 px-1",children:[u.jsx("label",{id:`widget-label-${l}`,className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider truncate mr-2",children:B}),p&&u.jsx("div",{id:`widget-error-icon-${l}`,className:"text-red-500",title:"Error in this input",children:u.jsx(R0,{className:"w-3.5 h-3.5"})})]}),u.jsxs("div",{id:`widget-trigger-${l}`,className:`
          control-trigger
          relative flex items-center justify-between
          bg-gray-50 border border-gray-200 rounded-xl px-3 py-2.5
          active:bg-gray-100 active:border-gray-300 transition-all
          ${d?"opacity-50 grayscale pointer-events-none":"cursor-pointer"}
          ${p?"border-red-300 bg-red-50/30":""}
        `,onClick:z,children:[u.jsx("div",{id:`widget-value-display-${l}`,className:"value-display flex-1 truncate text-sm font-medium text-gray-900",children:_?o||"Select...":o!=null?String(o):"Empty"}),u.jsx("div",{id:`widget-icon-container-${l}`,className:"icon-container ml-2 text-gray-400"})]}),u.jsx(rf,{isOpen:ae,title:B,onClose:L,children:u.jsx("div",{id:`modal-control-wrapper-${l}`,className:"p-2",children:ge()})})]})}function W3({node:l,isBypassed:r,isKSampler:o,workflowExists:s,nodeTypesExists:i,visibleInputWidgets:d,visibleWidgets:p,errorInputNames:h,onUpdateNodeWidget:m,onUpdateNodeWidgets:g,getWidgetIndexForInput:x,findSeedWidgetIndex:y,setSeedMode:N,isWidgetPinned:k,toggleWidgetPin:S}){const w=Array.isArray(l.widgets_values)?l.widgets_values:[],M=ne(O=>O.nodeTypes),j=ne(O=>O.workflow),E=ne(O=>O.bypassAllInGroup),z=Sn(O=>O.seedModes[l.id]),L=Sn(O=>O.seedLastValues[l.id]??null),_=l.type==="Fast Groups Bypasser (rgthree)",R=!o&&s&&i?y():null,A=R!==null?R+1:null,B=A!==null?w[A]:void 0,U=typeof B=="string",G=!o&&R!==null&&!U,W=G?d.filter(O=>O.name!=="seed"&&O.name!=="noise_seed"):d,K=G?p.filter(O=>O.name!=="seed"&&O.name!=="noise_seed"):p,ge=p.length>0||d.length>0,ae=b.useMemo(()=>{if(!_||!j)return[];const O=l.properties??{},F=typeof O.matchColors=="string"?O.matchColors:"",X=typeof O.matchTitle=="string"?O.matchTitle:"",pe=O.showAllGraphs!==!1,J=typeof O.sort=="string"?O.sort:"position",re=typeof O.customSortAlphabet=="string"?O.customSortAlphabet:"",ye=Se=>{const Le=Se.replace("#","").trim();return/^[0-9a-f]{3}$/i.test(Le)?`#${Le.replace(/(.)/g,"$1$1").toLowerCase()}`:/^[0-9a-f]{6}$/i.test(Le)?`#${Le.toLowerCase()}`:null},_e=Se=>{if(typeof document>"u")return null;const Le=document.createElement("span");if(Le.style.color=Se,!document.body)return null;document.body.appendChild(Le);const Xe=getComputedStyle(Le).color;document.body.removeChild(Le);const We=Xe.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(!We)return null;const[,Pe,Ge,Nt]=We.map(Number);return[Pe,Ge,Nt].some(oe=>Number.isNaN(oe))?null:`#${[Pe,Ge,Nt].map(oe=>oe.toString(16).padStart(2,"0")).join("")}`},$e={nocolor:"#353535",red:"#553333",brown:"#593930",green:"#335533",blue:"#333355",pale_blue:"#3f5159",cyan:"#335555",purple:"#553355",yellow:"#665533",black:"#000000"},ee=Se=>{const Le=[],Xe=Se.trim().toLowerCase();if(Xe){Le.push(Xe);const Ge=$e[Xe.replace(/\s+/g,"")]??$e[Xe];Ge&&Le.push(Ge)}const We=ye(Se);if(We)return Le.push(We),Le;const Pe=_e(Se);return Pe&&Le.push(Pe),Le},Ve=Se=>{const Le=Se.replace("#","").trim();if(!/^[0-9a-f]{6}$/i.test(Le))return null;const Xe=parseInt(Le.slice(0,2),16)/255,We=parseInt(Le.slice(2,4),16)/255,Pe=parseInt(Le.slice(4,6),16)/255,Ge=Math.max(Xe,We,Pe),Nt=Math.min(Xe,We,Pe),oe=Ge-Nt;let et=0;oe!==0&&(Ge===Xe?et=(We-Pe)/oe%6:Ge===We?et=(Pe-Xe)/oe+2:et=(Xe-We)/oe+4,et=Math.round(et*60),et<0&&(et+=360));const rt=(Ge+Nt)/2,jt=oe===0?0:oe/(1-Math.abs(2*rt-1));return{h:et,s:jt,l:rt}},Ne=F.split(",").map(Se=>Se.trim()).filter(Boolean).flatMap(ee),Ce=new Set(Ne),tt=Ne.map(Se=>ye(Se)??_e(Se)).filter(Se=>!!Se).map(Se=>Ve(Se)).filter(Se=>!!Se);let Qe=null;if(X.trim())try{Qe=new RegExp(X,"i")}catch(Se){return console.error(Se),[]}let we=null;if(J==="custom alphabet"){const Se=re.replace(/\n/g,"").trim().toLowerCase();Se&&(we=Se.includes(",")?Se.split(",").map(Le=>Le.trim()).filter(Boolean):Se.split("")),we?.length||(we=null)}const xe=new Map(j.nodes.map(Se=>[Se.id,Se])),Ee=[],Ae=Se=>{if(Ce.size>0){const Le=Se.color?ee(Se.color):[],Xe=Se.color?ye(Se.color):null,We=Xe?Ve(Xe):null,Pe=Le.some(Nt=>Ce.has(Nt))||(Xe?Ce.has(Xe):!1),Ge=!!(We&&tt.some(Nt=>{const oe=Math.abs(Nt.h-We.h);return Math.min(oe,360-oe)<=25}));if(!Pe&&!Ge)return!1}return!(Qe&&!Qe.test(Se.title||""))},ft=(Se,Le)=>{if(!Ae(Se))return;const Xe=T0(j,Se.id,Le);let We=!1;for(const Pe of Xe){const Ge=xe.get(Pe);if(!(!Ge||Ge.mode===4)){We=!0;break}}Ee.push({key:`${Le??"root"}-${Se.id}`,label:Se.title?.trim()||`Group ${Se.id}`,groupId:Se.id,subgraphId:Le,color:Se.color,isEngaged:We,isDisabled:Xe.size===0,group:Se})},ut=l.properties?.__mobile_origin,Ze=ut?.scope==="subgraph"?ut.subgraphId:null;if(pe){for(const Se of j.groups??[])ft(Se,null);for(const Se of j.definitions?.subgraphs??[])for(const Le of Se.groups??[])ft(Le,Se.id)}else if(Ze){const Se=j.definitions?.subgraphs?.find(Le=>Le.id===Ze);for(const Le of Se?.groups??[])ft(Le,Ze)}else for(const Se of j.groups??[])ft(Se,null);return J==="alphanumeric"?Ee.sort((Se,Le)=>Se.label.localeCompare(Le.label)):we?.length?Ee.sort((Se,Le)=>{const Xe=Se.label.toLowerCase(),We=Le.label.toLowerCase();let Pe=-1,Ge=-1;for(const[Nt,oe]of we.entries())if(Pe<0&&Xe.startsWith(oe)&&(Pe=Nt),Ge<0&&We.startsWith(oe)&&(Ge=Nt),Pe>-1&&Ge>-1)break;if(Pe>-1&&Ge>-1){const Nt=Pe-Ge;return Nt===0?Xe.localeCompare(We):Nt}return Pe>-1?-1:Ge>-1?1:Xe.localeCompare(We)}):Ee.sort((Se,Le)=>{const Xe=Se.group.bounding,We=Le.group.bounding;return Xe[1]!==We[1]?Xe[1]-We[1]:Xe[0]-We[0]}),Ee},[_,l.properties,j]),le=O=>()=>{O.isDisabled||E(O.groupId,O.isEngaged,O.subgraphId??void 0)},D=O=>{typeof O=="string"&&["fixed","randomize","increment","decrement"].includes(O)&&N(l.id,O)},$=O=>F=>{m(l.id,O,F),D(F)},fe=O=>F=>{m(l.id,O,F,"seed"),N(l.id,"fixed")},be=O=>()=>{if(!M)return;const F=_o(M,l);m(l.id,O,F,"seed"),N(l.id,"fixed")},ve=O=>()=>{typeof L=="number"&&(m(l.id,O,L,"seed"),N(l.id,"fixed"))},T=O=>F=>{m(l.id,O.widgetIndex,F,O.name)},I=O=>F=>{if(O.type==="POWER_LORA_HEADER"&&typeof F=="boolean"){const{loraIndices:X}=O.options||{};if(X){const pe={},J=l.widgets_values;Array.isArray(J)&&(X.forEach(re=>{const ye=J[re];pe[re]={...ye,on:F}}),g(l.id,pe))}}else m(l.id,O.widgetIndex,F,O.name)};return!ge&&ae.length===0?null:u.jsxs("div",{className:"mb-3",children:[ae.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-300 mb-1.5 uppercase tracking-wide",children:"Groups"}),u.jsx("div",{className:"space-y-2",children:ae.map(O=>u.jsxs("div",{className:`flex items-center justify-between gap-3 rounded-lg border px-3 py-2 bg-gray-50/40 dark:bg-gray-900/60 ${O.isDisabled?"border-gray-200 dark:border-white/10 opacity-60":"border-gray-200 dark:border-white/15"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[u.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:O.color||"#9ca3af"}}),u.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-100 truncate",children:O.label})]}),u.jsx("button",{type:"button",role:"switch","aria-checked":O.isEngaged,onClick:le(O),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${O.isEngaged?"bg-emerald-500":"bg-gray-300"} ${O.isDisabled?"cursor-not-allowed":"cursor-pointer"}`,children:u.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition ${O.isEngaged?"translate-x-5":"translate-x-1"}`})})]},O.key))})]}),ge&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Parameters"}),o&&s&&i&&(()=>{const O=x("seed");if(O===null)return null;const F=w[O],X=O+1,pe=w[X],J=["fixed","increment","decrement","randomize"],ye=!!l.inputs.find(_e=>_e.name==="noise_seed")?.link;return u.jsxs("div",{className:"mb-3",children:[u.jsx(cl,{name:"seed",type:"INT",value:F,onChange:_e=>m(l.id,O,_e,"seed"),disabled:r,hasError:h.has("seed")}),X<w.length&&!ye&&u.jsx(cl,{name:"Control mode",type:"COMBO",value:pe,options:J,onChange:$(X)})]})})(),!o&&s&&i&&(()=>{const O=R;if(O===null)return null;const F=["fixed","randomize","increment","decrement"],X=typeof B=="string"&&!F.includes(B)?[...F,B]:F;if(l.inputs.find(Qe=>Qe.name==="seed"||Qe.name==="noise_seed")?.link!=null)return null;if(U){const Qe=O+1;return u.jsx("div",{className:"mb-3",children:u.jsx(cl,{name:"Seed control",type:"COMBO",value:B,options:X,onChange:$(Qe)})})}const re=d.find(Qe=>Qe.name==="seed"||Qe.name==="noise_seed")?.options??{},ye=typeof re.min=="number"?re.min:void 0,_e=typeof re.max=="number"?re.max:void 0,$e=typeof re.step=="number"?re.step:void 0,ee=Number(w[O]??0),Ve=M0(ee),Ne=z??Ve??"fixed",Ce=Zd(ee)?typeof L=="number"?L:0:ee,tt=h.has("seed")||h.has("noise_seed");return u.jsxs("div",{className:"mb-3",children:[u.jsx(zd,{name:"seed",value:Ce,onChange:fe(O),disabled:r,min:ye,max:_e,step:$e,hasError:tt}),u.jsx(cl,{name:"Seed control",type:"COMBO",value:Ne,options:F,onChange:D}),u.jsxs("div",{className:"grid gap-2 mt-2",children:[u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:()=>N(l.id,"randomize"),disabled:r,children:"Randomize each time"}),u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:be(O),disabled:r,children:"New fixed random"}),u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:ve(O),disabled:r||typeof L!="number",children:"Use last queued seed"})]})]})})(),W.map(O=>u.jsx("div",{className:r?"opacity-80":"",children:u.jsx(cl,{name:O.name,type:O.type,value:O.value,options:O.options,onChange:T(O),disabled:r,isPinned:k(O.widgetIndex),onTogglePin:()=>S(O.widgetIndex,O.name,O.type,O.options),hasError:h.has(O.name)})},`input-widget-${O.name}`)),K.map(O=>u.jsx("div",{className:r?"opacity-80":"",children:u.jsx(cl,{name:O.name,type:O.type,value:O.value,options:O.options,onChange:I(O),disabled:r,isPinned:k(O.widgetIndex),onTogglePin:()=>S(O.widgetIndex,O.name,O.type,O.options),hasError:h.has(O.name)})},`widget-${O.widgetIndex}`)),l.type==="PrimitiveNode"&&(()=>{const O=l.outputs?.[0]?.type,F=String(O).toUpperCase();if(F!=="INT"&&F!=="FLOAT"||w.length<2)return null;const X=w[1],pe=["fixed","increment","decrement","randomize"];return u.jsx("div",{className:"mb-3",children:u.jsx(cl,{name:"Control mode",type:"COMBO",value:X,options:pe,onChange:J=>m(l.id,1,J),disabled:r})})})()]})]})}const F3=[],$3=b.memo(function({node:r,isExecuting:o,isConnectionHighlighted:s=!1,errorBadgeLabel:i,onImageClick:d,inGroup:p=!1}){const h=ne(se=>se.nodeTypes),m=ne(se=>se.workflow),g=ne(se=>se.updateNodeWidget),x=ne(se=>se.updateNodeWidgets),y=ne(se=>se.updateNodeTitle),N=ne(se=>se.toggleBypass),k=ne(se=>se.toggleNodeFold),S=ne(se=>se.hideNode),w=ne(se=>se.setConnectionHighlightMode),M=ne(se=>se.connectionHighlightModes[r.id]??"off"),j=Sn(se=>se.setSeedMode),E=ne(se=>se.currentWorkflowKey),z=Gn(se=>se.pinnedWidget?.nodeId===r.id?se.pinnedWidget:null),L=Gn(se=>se.setPinnedWidget),_=bn(se=>se.bookmarkedNodeIds),R=bn(se=>se.toggleNodeBookmark),A=ne(se=>se.nodeOutputs[String(r.id)]),B=Zt(se=>se.nodeErrors[String(r.id)]),U=ne(se=>se.progress),G=ne(se=>se.executingPromptId),W=ne(se=>se.workflowDurationStats),K=ne(se=>se.isExecuting),ge=lt(se=>se.running),ae=G||(ge[0]?.prompt_id??null),le=Go({workflow:m,runKey:ae,isRunning:K||ge.length>0,workflowDurationStats:W}),D=le===100?100:U,$=b.useCallback((se,Ke)=>{j(se,Ke,{workflow:m,nodeTypes:h,updateNodeWidgets:x})},[h,j,x,m]),fe=b.useCallback(se=>{L(se,E)},[E,L]),be=A??F3,[ve,T]=b.useState(null),[I,O]=b.useState(!1),F=b.useRef(null),[X,pe]=b.useState(!1),[J,re]=b.useState(!1),[ye,_e]=b.useState(""),$e=b.useRef(null),ee=b.useRef(0),Ve=b.useRef(null),[Ne,Ce]=b.useState(null);b.useEffect(()=>{const se=Ke=>{const Bt=Ke.detail;if(Bt.nodeId===r.id){Ce(Bt.label);const Ht=setTimeout(()=>Ce(null),1e3);return()=>clearTimeout(Ht)}};return window.addEventListener("node-show-label",se),()=>window.removeEventListener("node-show-label",se)},[r.id]);const tt=B&&B.length>0,Qe=b.useMemo(()=>B?new Set(B.map(se=>se.inputName).filter(se=>!!se)):new Set,[B]),we=be.length>0?be[be.length-1]:null,xe=we?`${we.filename}|${we.subfolder}|${we.type}`:null,Ee=ve?`${ve.filename}|${ve.subfolder}|${ve.type}`:null;b.useEffect(()=>{if(!we||xe===Ee)return;const se=qn(we.filename,we.subfolder,we.type),Ke=new Image;Ke.onload=()=>T(we),Ke.src=se},[xe,Ee,we]);const Ae=h?.[r.type],ft=b.useMemo(()=>{const se=r.title;return typeof se=="string"&&se.trim()?se.trim():null},[r]),ut=ft||Ae?.display_name||r.type,Ze=r.type==="KSampler",Se=r.mode===4,Le=!!r.flags?.collapsed,Xe=/LoadImage/i.test(r.type),Pe=b.useMemo(()=>!Xe||!m||!h?null:Y3(m,h,r),[Xe,r,h,m])??ve,Ge=b.useMemo(()=>{const se=Kd(h,r);return Ze?se.filter(Ke=>Ke.name!=="seed"):se},[h,r,Ze]),Nt=b.useMemo(()=>Jd(h,r),[h,r]),oe=b.useMemo(()=>Nt.filter(se=>!se.connected),[Nt]),et=b.useMemo(()=>Ge.filter(se=>!se.connected),[Ge]),rt=b.useMemo(()=>{const se=r.properties,Ke=["text","note","description","label","title"];if(se)for(const Ht of Ke){const cn=se[Ht];if(typeof cn=="string"&&cn.trim())return cn}if(/note|comment|sticky|label/i.test(r.type)&&Array.isArray(r.widgets_values)){const Ht=r.widgets_values.find(cn=>typeof cn=="string"&&cn.trim());if(typeof Ht=="string"&&Ht.trim())return Ht}return null},[r.properties,r.widgets_values,r.type]),jt=b.useMemo(()=>{if(!/note|comment|sticky|label/i.test(r.type)||!Array.isArray(r.widgets_values))return null;const Ke=r.widgets_values.findIndex(Bt=>typeof Bt=="string"&&Bt.trim());return Ke>=0?Ke:null},[r.type,r.widgets_values]),Vt=se=>!m||!h?null:yr(m,h,r,se),$n=()=>!m||!h?null:Oa(m,h,r),fl=se=>{jt!==null&&g(r.id,jt,se)},ol=b.useMemo(()=>{if(!rt)return null;const se=[],Ke=/(https?:\/\/[^\s]+)/g;let Bt=0,Ht,cn=0;for(;(Ht=Ke.exec(rt))!==null;){const[fn]=Ht,Yn=Ht.index;Yn>Bt&&se.push(rt.slice(Bt,Yn)),se.push(u.jsx("a",{href:fn,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline break-all",children:fn},`note-link-${cn++}`)),Bt=Yn+fn.length}return Bt<rt.length&&se.push(rt.slice(Bt)),se},[rt]),An=()=>{const se=Date.now();se-ee.current<300&&pe(!0),ee.current=se},rn=b.useMemo(()=>{const se=[];return oe.forEach(Ke=>{se.push({widgetIndex:Ke.widgetIndex,name:Ke.name,type:Ke.type,options:Ke.options})}),et.forEach(Ke=>{se.push({widgetIndex:Ke.widgetIndex,name:Ke.name,type:Ke.type,options:Ke.options})}),se},[oe,et]),an=b.useCallback(se=>{if(se.link!=null)return!1;if(se.widget)return!0;const Ke=Ae?.input?.required?.[se.name]||Ae?.input?.optional?.[se.name];if(!Ke)return!1;const[Bt,Ht]=Ke;if(Array.isArray(Bt))return!0;const cn=String(Bt).toUpperCase(),fn=Object.prototype.hasOwnProperty.call(Ht??{},"default");return["INT","FLOAT","BOOLEAN","STRING"].includes(cn)||fn},[Ae]),on=b.useMemo(()=>r.inputs.filter(se=>!(an(se)||String(se.type).toUpperCase()==="OPT_CONNECTION"&&se.link==null)),[r.inputs,an]),Rn=b.useMemo(()=>r.outputs.filter(se=>!((se.name||"").toLowerCase().replace(/[_\s]/g,"")==="showhelp"||String(se.type).toUpperCase()==="OPT_CONNECTION"&&!se.links?.length)),[r.outputs]),Me=r.outputs.some(se=>String(se.type).toUpperCase()==="IMAGE"),ze=!!(Ae?.output_node||/PreviewImage|SaveImage|SaveAnimatedPNG|SaveAnimatedWEBP|SaveVideo/i.test(r.type)),V=se=>z?.widgetIndex===se,ce=(se,Ke,Bt,Ht)=>{V(se)?fe(null):fe({nodeId:r.id,widgetIndex:se,widgetName:Ke,widgetType:Bt,options:Ht})},ue=rn.length===1?rn[0]:null,ke=ue?V(ue.widgetIndex):!1,Ie=!!z,Ye=_.includes(r.id),Re=_.length<5||Ye,ot=(Me||ze)&&!!Pe,pt=r.inputs?.filter(se=>se.link!=null).length??0,gt=r.outputs?.reduce((se,Ke)=>se+(Ke.links?.length??0),0)??0,xt=Math.min(3,pt),vt=Math.min(3,gt),yt=Pe?(()=>{const{filename:se,subfolder:Ke,type:Bt}=Pe,Ht=qn(se,Ke,Bt),cn=Ke?`${Ke}/${se}`:se,fn=qo(se);return[{src:Ht,alt:ut,filename:se,mediaType:fn,file:{id:`${Bt}/${cn}`,name:se,type:fn==="video"?"video":"image",fullUrl:Ht}}]})():[];b.useEffect(()=>{if(!J)return;const se=$e.current;se&&(se.focus(),se.select())},[J]);const Dt=()=>{_e(ut),re(!0)},qt=()=>{const se=ye.trim();y(r.id,se.length>0?se:null),re(!1)},Nn=!!(Ne&&!/^error\b/i.test(Ne));return u.jsxs("div",{id:`node-card-wrapper-${r.id}`,className:"relative node-card-outer",children:[u.jsx("div",{id:`node-anchor-${r.id}`,className:"absolute -top-3 left-0 right-0 h-0 node-scroll-anchor"}),Nn&&u.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 z-[100] animate-in fade-in slide-in-from-bottom-2 duration-200",children:u.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg whitespace-nowrap uppercase tracking-tighter ring-2 ring-white",children:Ne})}),i&&u.jsx("div",{className:"absolute top-2 right-2 z-[110] animate-in fade-in duration-150",children:u.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg whitespace-nowrap uppercase tracking-tighter ring-2 ring-white",children:i})}),u.jsxs("div",{id:`node-card-${r.id}`,className:`
        node-card-inner
        ${p?"rounded-lg shadow-sm py-1":"rounded-xl shadow-md px-3 py-1 mb-3"}
        border-2
        ${tt?"border-red-700 shadow-red-200":s?"border-orange-500 shadow-orange-200":o?"border-green-500 shadow-green-200":Se?"border-purple-300":"border-transparent"}
        ${Se?Le?"bg-purple-200":"bg-purple-100/50":"bg-white"}
      `,style:{overflow:"visible"},children:[u.jsx(e2,{nodeId:r.id,displayName:ut,isEditingLabel:J,labelValue:ye,labelInputRef:$e,onLabelChange:_e,onLabelBlur:qt,isCollapsed:Le,isBypassed:Se,isExecuting:o,overallProgress:le,hasErrors:tt,errorIconRef:Ve,errorPopoverOpen:I,setErrorPopoverOpen:O,toggleNodeFold:k,rightSlot:u.jsx(Pb,{nodeId:r.id,isBypassed:Se,onEditLabel:Dt,pinnableWidgets:rn,singlePinnableWidget:ue,isSingleWidgetPinned:ke,hasPinnedWidget:Ie,toggleWidgetPin:ce,setPinnedWidget:fe,isNodeBookmarked:Ye,canAddNodeBookmark:Re,onToggleNodeBookmark:()=>R(r.id),toggleBypass:N,hideNode:S,connectionHighlightMode:M,setConnectionHighlightMode:w,leftLineCount:xt,rightLineCount:vt})}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${Le?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden transition-opacity duration-200 ease-out ${Le?"opacity-0":"opacity-100"}`,children:[ft&&u.jsx("div",{className:"node-card-subtitle text-[10px] text-center font-semibold uppercase tracking-wider text-gray-400 mb-2 px-1",children:Ae?.display_name||r.type}),u.jsxs("div",{id:`node-content-${r.id}`,className:`node-expanded-content ${Se?"opacity-60 grayscale":""}`,children:[u.jsx(Xb,{nodeId:r.id,inputs:on,outputs:Rn,allInputs:r.inputs,allOutputs:r.outputs}),u.jsx(W3,{node:r,isBypassed:Se,isKSampler:Ze,workflowExists:!!m,nodeTypesExists:!!h,visibleInputWidgets:oe,visibleWidgets:et,errorInputNames:Qe,onUpdateNodeWidget:g,onUpdateNodeWidgets:x,getWidgetIndexForInput:Vt,findSeedWidgetIndex:$n,setSeedMode:$,isWidgetPinned:V,toggleWidgetPin:ce}),rt&&u.jsx(Kb,{noteText:rt,noteLinkified:ol,noteWidgetIndex:jt,isEditingNote:X,setIsEditingNote:pe,onUpdateNote:fl,noteTextareaRef:F,onNoteTap:An}),u.jsx(Jb,{show:ot,previewImage:Pe,displayName:ut,onImageClick:()=>d?.(yt,0),isExecuting:!!o,overallProgress:le,displayNodeProgress:D})]})]})})]}),u.jsx(Zb,{nodeId:r.id,open:I&&tt,errors:B??[],anchorRef:Ve,onClose:()=>O(!1)})]})});function Y3(l,r,o){if(!r)return null;const s=yr(l,r,o,"image")??yr(l,r,o,"filename")??yr(l,r,o,"file");if(s==null||!Array.isArray(o.widgets_values))return null;const i=o.widgets_values[s];return Q3(i)}function Q3(l){if(typeof l=="string"&&l.trim()){const{filename:h,subfolder:m}=s0(l.trim());return{filename:h,subfolder:m,type:"input"}}if(!l||typeof l!="object")return null;const r=l,o=typeof r.filename=="string"?r.filename:typeof r.name=="string"?r.name:null;if(!o||!o.trim())return null;const s=typeof r.subfolder=="string"?r.subfolder:"",i=typeof r.type=="string"?r.type:"input",{filename:d,subfolder:p}=s0(o.trim());return{filename:d,subfolder:s||p,type:i}}function s0(l){const r=l.replace(/^\/+/,""),o=r.split("/").filter(Boolean);return o.length<=1?{filename:r,subfolder:""}:{filename:o.pop()??r,subfolder:o.join("/")}}function X3({group:l,nodeCount:r,isCollapsed:o,subgraphId:s=null,bookmarkNodeId:i=null,hiddenNodeCount:d=0,foldAllLabel:p,onToggleCollapse:h,onToggleFoldAll:m,onBypassAll:g,onHideGroup:x,onShowHiddenNodes:y}){const N=ne(X=>X.updateGroupTitle),k=bn(X=>X.bookmarkedNodeIds),S=bn(X=>X.toggleNodeBookmark),[w,M]=b.useState(!1),[j,E]=b.useState(!1),[z,L]=b.useState(""),_=b.useRef(null),R=b.useRef(null),A=b.useRef(null),[B,U]=b.useState(null);b.useEffect(()=>{if(!w)return;const X=()=>{const re=A.current;if(!re)return;const ye=re.getBoundingClientRect();U({top:ye.bottom+6,left:ye.right-160})};X();const pe=re=>{!R.current||!re.target||A.current?.contains(re.target)||R.current.contains(re.target)||M(!1)},J=re=>{const ye=re.target;R.current&&ye&&R.current.contains(ye)||M(!1)};return document.addEventListener("mousedown",pe),document.addEventListener("scroll",J,!0),window.addEventListener("resize",X),()=>{document.removeEventListener("mousedown",pe),document.removeEventListener("scroll",J,!0),window.removeEventListener("resize",X)}},[w]);const G=Gl(l.color,.22),W=Gl(l.color,.4),K=l.title?.trim()||`Group ${l.id}`;b.useEffect(()=>{if(!j)return;const X=_.current;X&&(X.focus(),X.select())},[j]);const ge=()=>{j||h()},ae=X=>{X.stopPropagation(),h()},le=()=>{N(l.id,z,s),E(!1)},D=X=>{X.stopPropagation(),M(pe=>!pe)},$=X=>{X.stopPropagation(),L(K),E(!0),M(!1)},fe=X=>{X.stopPropagation(),m(),M(!1)},be=X=>pe=>{pe.stopPropagation(),g(X),M(!1)},ve=X=>{X.stopPropagation(),x(),M(!1)},T=X=>{X.stopPropagation(),y?.(),M(!1)},I=i!=null&&k.includes(i),O=i!=null&&(k.length<5||I),F=d>0&&!!y;return u.jsxs("div",{id:`group-header-${l.id}`,className:`group-header flex items-center justify-between cursor-pointer gap-3 px-3 py-2 ${o?"rounded-xl":"rounded-t-xl mb-2"}`,style:{backgroundColor:G,borderColor:W},onClick:ge,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[u.jsx("button",{onClick:ae,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-500 hover:text-gray-700 shrink-0",children:o?u.jsx(Br,{className:"w-6 h-6"}):u.jsx(Wn,{className:"w-6 h-6"})}),j?u.jsx("input",{ref:_,value:z,onChange:X=>L(X.target.value),onBlur:le,onKeyDown:X=>{(X.key==="Enter"||X.key==="Escape")&&X.currentTarget.blur()},onClick:X=>X.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{className:"font-semibold text-gray-900 select-none flex-1 min-w-0 whitespace-nowrap overflow-hidden text-ellipsis",children:K}),o&&u.jsxs("span",{className:"text-sm text-gray-500 shrink-0",children:["(",r," node",r!==1?"s":"",")"]})]}),u.jsxs("div",{className:"flex items-center gap-1",onClick:X=>X.stopPropagation(),children:[u.jsx("button",{onClick:D,className:"w-8 h-8 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent","aria-label":"Group options",ref:A,children:u.jsx(br,{className:"w-5 h-5 -rotate-90"})}),w&&B&&rl.createPortal(u.jsxs("div",{ref:R,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:B.top,left:B.left},children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:$,children:[u.jsx(ef,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",onClick:X=>{X.stopPropagation(),i!=null&&(S(i),M(!1))},disabled:!O,children:[I?u.jsx(Mi,{className:"w-4 h-4 text-gray-500"}):u.jsx(Vr,{className:"w-4 h-4 text-yellow-500"}),I?"Remove bookmark":"Bookmark node"]}),u.jsx("div",{className:"border-t border-gray-200 my-1"}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:fe,children:[p==="Fold all"?u.jsx(Br,{className:"w-4 h-4 text-gray-500"}):u.jsx(Wn,{className:"w-4 h-4 text-gray-500"}),p]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:be(!0),children:[u.jsx(Rd,{className:"w-4 h-4 text-gray-500",isBypassed:!0}),"Bypass all nodes"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:be(!1),children:[u.jsx(Rd,{className:"w-4 h-4 text-gray-500",isBypassed:!1}),"Engage all nodes"]}),F&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:T,children:[u.jsx(dl,{className:"w-4 h-4 text-gray-500"}),"Show hidden nodes"]}),u.jsx("div",{className:"border-t border-gray-200 my-1"}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ve,children:[u.jsx(dl,{className:"w-4 h-4 text-gray-500"}),"Hide group"]})]}),document.body)]})]})}function P3({group:l}){const r=Gl(l.color,.15),o=Gl(l.color,.3),s=()=>{document.getElementById(`group-header-${l.id}`)?.scrollIntoView({behavior:"smooth",block:"start"})};return u.jsx("div",{id:`group-footer-${l.id}`,className:"group-footer px-3 py-1.5 -mx-1 rounded-b-xl cursor-pointer",onClick:s,style:{backgroundColor:r,borderColor:o},children:u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 select-none",children:l.title})})}function Z3({group:l}){const r=Gl(l.color,.05),o=Gl(l.color,.3),s=Gl(l.color,.4);return u.jsx("div",{id:`group-placeholder-${l.id}`,className:"group-placeholder flex items-center justify-center px-4 py-6 border-l border-r",style:{backgroundColor:r,borderColor:o},children:u.jsx("div",{className:"w-full rounded-lg border-2 border-dashed flex items-center justify-center py-4",style:{borderColor:s},children:u.jsx("span",{className:"text-sm text-gray-400 select-none",children:"No nodes in group"})})})}const i0="rgba(59, 130, 246, 0.14)",u0="rgba(59, 130, 246, 0.25)";function K3({subgraph:l,nodeCount:r,isCollapsed:o,onToggleCollapse:s}){const i=ne(U=>U.updateSubgraphTitle),d=ne(U=>U.setSubgraphHidden),[p,h]=b.useState(!1),[m,g]=b.useState(!1),[x,y]=b.useState(""),N=b.useRef(null),k=b.useRef(null),S=b.useRef(null),[w,M]=b.useState(null),E=(l.name||l.id).trim()||l.id;b.useEffect(()=>{if(!p)return;const U=()=>{const K=S.current;if(!K)return;const ge=K.getBoundingClientRect();M({top:ge.bottom+6,left:ge.right-160})};U();const G=K=>{!k.current||!K.target||S.current?.contains(K.target)||k.current.contains(K.target)||h(!1)},W=K=>{const ge=K.target;k.current&&ge&&k.current.contains(ge)||h(!1)};return document.addEventListener("mousedown",G),document.addEventListener("scroll",W,!0),window.addEventListener("resize",U),()=>{document.removeEventListener("mousedown",G),document.removeEventListener("scroll",W,!0),window.removeEventListener("resize",U)}},[p]),b.useEffect(()=>{if(!m)return;const U=N.current;U&&(U.focus(),U.select())},[m]);const z=()=>{m||s()},L=U=>{U.stopPropagation(),s()},_=()=>{i(l.id,x),g(!1)},R=U=>{U.stopPropagation(),h(G=>!G)},A=U=>{U.stopPropagation(),y(E),g(!0),h(!1)},B=U=>{U.stopPropagation(),d(l.id,!0),h(!1)};return u.jsxs("div",{id:`subgraph-header-${l.id}`,className:`subgraph-header flex items-center justify-between cursor-pointer gap-3 px-3 py-2 ${o?"rounded-xl":"rounded-t-xl mb-3"}`,style:{backgroundColor:`var(--subgraph-bg, ${i0})`,borderColor:`var(--subgraph-border, ${u0})`,"--subgraph-bg":i0,"--subgraph-border":u0},onClick:z,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[u.jsx("button",{onClick:L,className:"w-8 h-8 -ml-2 flex items-center justify-center text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 shrink-0",children:o?u.jsx(Br,{className:"w-6 h-6"}):u.jsx(Wn,{className:"w-6 h-6"})}),m?u.jsx("input",{ref:N,value:x,onChange:U=>y(U.target.value),onBlur:_,onKeyDown:U=>{(U.key==="Enter"||U.key==="Escape")&&U.currentTarget.blur()},onClick:U=>U.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 select-none flex-1 min-w-0 whitespace-nowrap overflow-hidden text-ellipsis",children:E}),o&&u.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400 shrink-0",children:["(",r," node",r!==1?"s":"",")"]})]}),u.jsx("button",{onClick:R,className:"flex items-center text-blue-400 dark:text-blue-500 opacity-60 hover:opacity-100","aria-label":"Subgraph options",ref:S,children:u.jsx(_a,{className:"w-5 h-5"})}),p&&w&&rl.createPortal(u.jsxs("div",{ref:k,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:w.top,left:w.left},children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:A,children:[u.jsx(ef,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:B,children:[u.jsx(dl,{className:"w-4 h-4 text-gray-500"}),"Hide subgraph"]})]}),document.body)]})}const J3="rgba(59, 130, 246, 0.1)",e5="rgba(59, 130, 246, 0.2)";function t5({subgraph:l}){const r=l.name||l.id,o=()=>{document.getElementById(`subgraph-header-${l.id}`)?.scrollIntoView({behavior:"smooth",block:"start"})};return u.jsx("div",{id:`subgraph-footer-${l.id}`,className:"subgraph-footer px-3 py-1.5 -mx-1 rounded-b-xl cursor-pointer",onClick:o,style:{backgroundColor:J3,borderColor:e5},children:u.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-500 select-none",children:r})})}function hi(l){return String(l).split(",").map(r=>r.trim().toUpperCase()).filter(Boolean)}function c0(l){return l.toLowerCase().replace(/[_-]+/g," ").replace(/\s+/g," ").trim()}function n5(l,r){let o=0;for(const s of r)if(s===l[o]&&(o+=1,o>=l.length))return!0;return l.length===0}function d0(l,r){if(!l.trim())return!0;const o=c0(r);return c0(l).split(" ").filter(Boolean).every(s=>o.includes(s)||n5(s,o))}function l5({visible:l,onImageClick:r}){const o=ne(V=>V.workflow),s=ne(V=>V.executingNodeId),i=ne(V=>V.connectionHighlightModes),d=ne(V=>V.manuallyHiddenNodes),p=bn(V=>V.bookmarkBarSide),h=bn(V=>V.bookmarkBarTop),m=bn(V=>V.setBookmarkBarPosition),g=bn(V=>V.setBookmarkRepositioningActive),x=ne(V=>V.ensureNodeExpanded),y=ne(V=>V.scrollToNode),N=ne(V=>V.revealNodeWithParents),k=ne(V=>V.nodeTypes),S=Zt(V=>V.nodeErrors),w=ne(V=>V.searchOpen),M=ne(V=>V.searchQuery),j=ne(V=>V.setSearchQuery),E=ne(V=>V.setSearchOpen),z=ne(V=>V.collapsedGroups),L=ne(V=>V.hiddenGroups),_=ne(V=>V.hiddenSubgraphs),R=ne(V=>V.toggleGroupCollapse),A=ne(V=>V.setGroupCollapsed),B=ne(V=>V.setGroupHidden),U=ne(V=>V.bypassAllInGroup),G=ne(V=>V.collapsedSubgraphs),W=ne(V=>V.toggleSubgraphCollapse),K=ne(V=>V.setSubgraphCollapsed),ge=ne(V=>V.setNodeFold),ae=bn(V=>V.bookmarkedNodeIds),le=b.useRef(null),D=b.useRef(null),$=b.useRef(null),fe=b.useRef(null),[be,ve]=b.useState(0),[T,I]=b.useState(!1),[O,F]=b.useState(!1),[X,pe]=b.useState(null),[J,re]=b.useState({}),ye=b.useRef(new Map),_e=b.useRef(null),$e=b.useRef(null),ee=b.useRef(null),Ve=()=>{j(""),E(!1)},Ne=b.useCallback((V,ce)=>{N(V),window.dispatchEvent(new CustomEvent("workflow-scroll-to-node",{detail:{nodeId:V,label:ce}})),y(V,ce)},[N,y]),Ce=b.useCallback((V,ce)=>()=>{if(T){I(!1),F(!1),pe(null);return}ve(ce),Ne(V)},[T,Ne]),tt=b.useCallback(()=>{if(T){I(!1),F(!1),pe(null);return}const V=(be+1)%ae.length;ve(V),Ne(ae[V])},[ae,be,T,Ne]),Qe=b.useCallback(()=>{_e.current!=null&&(window.clearTimeout(_e.current),_e.current=null)},[]),we=b.useCallback(()=>{const V=getComputedStyle(document.documentElement).getPropertyValue("--bottom-bar-offset"),ce=Number.parseFloat(V);return Number.isFinite(ce)?ce:0},[]),xe=b.useCallback(()=>{const V=le.current,ce=D.current;if(!V||!ce)return null;const ue=V.getBoundingClientRect().height,ke=ce.getBoundingClientRect().height,Ie=16,Ye=we()+8,Re=Math.max(Ie,ue-ke-Ye);return{minTop:Ie,maxTop:Re}},[we]),Ee=b.useCallback(V=>{const ce=xe();return ce?Math.min(Math.max(V,ce.minTop),ce.maxTop):V},[xe]),Ae=b.useCallback((V,ce)=>{const ue=le.current,ke=ee.current;if(!ue||!ke)return;const Ie=ue.getBoundingClientRect(),Ye=V-Ie.left-ke.x,Re=Ee(ce-Ie.top-ke.y);pe({x:Ye,y:Re})},[Ee]),ft=b.useCallback((V,ce)=>{const ue=le.current,ke=D.current;if(!ue||!ke)return;const Ie=ke.getBoundingClientRect(),Ye=ue.getBoundingClientRect();ee.current={x:V-Ie.left,y:ce-Ie.top};const Re=Ie.left-Ye.left,ot=Ee(Ie.top-Ye.top);pe({x:Re,y:ot}),F(!0)},[Ee]),ut=b.useCallback(V=>{V.pointerType==="mouse"&&V.button!==0||(V.preventDefault(),$e.current={startX:V.clientX,startY:V.clientY,startTime:Date.now(),pointerId:V.pointerId},T?ft(V.clientX,V.clientY):_e.current=window.setTimeout(()=>{I(!0),ft(V.clientX,V.clientY)},500),V.currentTarget.setPointerCapture(V.pointerId))},[T,ft]),Ze=b.useCallback(V=>{if(O){Ae(V.clientX,V.clientY);return}const ce=$e.current;if(!ce)return;const ue=V.clientX-ce.startX,ke=V.clientY-ce.startY;Math.hypot(ue,ke)>8&&Qe()},[Qe,O,Ae]),Se=b.useCallback(()=>{const V=le.current,ce=D.current;if(!V||!ce||!X)return;const ue=V.getBoundingClientRect(),ke=ce.getBoundingClientRect().width,Ye=X.x+ke/2<ue.width/2?"left":"right",Re=Ee(X.y);m({side:Ye,top:Re}),pe(null)},[X,Ee,m]),Le=b.useCallback(V=>{Qe();const ce=$e.current;if($e.current=null,O){Se(),F(!1);return}if(T||!ce)return;const ue=V.clientX-ce.startX,ke=V.clientY-ce.startY,Ie=Date.now()-ce.startTime;Math.abs(ue)>40&&Math.abs(ue)>Math.abs(ke)&&Ie<500&&m({side:p==="left"?"right":"left"})},[p,Qe,Se,O,T,m]),Xe=b.useCallback(()=>{Qe(),$e.current=null,F(!1),pe(null)},[Qe]),We=b.useMemo(()=>{if(!o)return[];const V=z1(o);return Object.keys(d).length===0?V:V.filter(ce=>!d[ce.id])},[o,d]),Pe=M.trim(),Ge=w&&Pe.length>0,Nt=b.useMemo(()=>o?Fb(o):new Map,[o]),oe=b.useMemo(()=>{if(!Ge||!o)return new Set;const V=o.groups??[],ce=new Set;for(const ue of V)d0(Pe,ue.title)&&ce.add(ue.id);return ce},[o,Ge,Pe]),et=b.useMemo(()=>Ge?We.filter(V=>{const ce=Nt.get(V.id);if(ce!==void 0&&oe.has(ce))return!0;const ue=k?.[V.type],ke=V.title,Ie=[typeof ke=="string"?ke:"",ue?.display_name??"",V.type,String(V.id)];return d0(Pe,Ie.join(" "))}):We,[We,Ge,Pe,k,Nt,oe]),rt=b.useMemo(()=>o?Ge?et.map(V=>({type:"node",node:V,groupId:null,subgraphId:null})):Yb(et,o,z,L,G,_):[],[o,et,z,L,G,_,Ge]),jt=b.useMemo(()=>{const V=new Map;let ce=0;for(const ue of We){const ke=S[String(ue.id)];ke&&ke.length>0&&(ce+=1,V.set(ue.id,ce))}return V},[We,S]),Vt=b.useMemo(()=>{if(!o)return new Set;const V=Object.entries(i).filter(([,Re])=>Re!=="off").map(([Re,ot])=>({id:Number(Re),mode:ot}));if(V.length===0)return new Set;const ce=new Map(o.nodes.map(Re=>[Re.id,Re])),ue=new Set,ke=Re=>!!d[Re.id],Ie=(Re,ot,pt)=>{if(ot.has(Re))return[];ot.add(Re);const gt=ce.get(Re);if(!gt)return[];const xt=[];return gt.outputs?.forEach((vt,yt)=>{const Dt=hi(vt.type);if(pt.size>0&&!Dt.some(Nn=>pt.has(Nn)))return;Ni(o,Re,yt).forEach(Nn=>{const se=Nn.node;ke(se)?xt.push(...Ie(se.id,ot,pt)):xt.push(se)})}),xt},Ye=(Re,ot,pt)=>{if(ot.has(Re))return[];ot.add(Re);const gt=ce.get(Re);if(!gt)return[];const xt=[];return gt.inputs?.forEach((vt,yt)=>{if(vt.link===null)return;const Dt=hi(vt.type);if(pt.size>0&&!Dt.some(Nn=>pt.has(Nn)))return;const qt=Lo(o,Re,yt);qt&&(ke(qt.node)?xt.push(...Ye(qt.node.id,ot,pt)):xt.push(qt.node))}),xt};return V.forEach(({id:Re,mode:ot})=>{const pt=ce.get(Re);pt&&((ot==="inputs"||ot==="both")&&pt.inputs?.forEach((gt,xt)=>{if(gt.link===null)return;const vt=Lo(o,pt.id,xt);if(!vt)return;if(!ke(vt.node)){ue.add(vt.node.id);return}const yt=new Set(hi(gt.type));Ye(vt.node.id,new Set,yt).forEach(qt=>ue.add(qt.id))}),(ot==="outputs"||ot==="both")&&pt.outputs?.forEach((gt,xt)=>{const vt=new Set(hi(gt.type));Ni(o,pt.id,xt).forEach(Dt=>{const qt=Dt.node;if(!ke(qt)){ue.add(qt.id);return}Ie(qt.id,new Set,vt).forEach(se=>ue.add(se.id))})}))}),ue},[o,i,d]);b.useEffect(()=>{const V=ce=>{const ue=ce.detail,ke=typeof ue=="number"?ue:ue.nodeId,Ie=typeof ue=="object"?ue.label:void 0;if(typeof ke!="number"||!et.some(xt=>xt.id===ke))return;const Re=jt.get(ke),ot=Ie??(Re?`Error #${Re}`:"Error");re(xt=>({...xt,[ke]:ot}));const pt=ye.current.get(ke);pt&&window.clearTimeout(pt);const gt=window.setTimeout(()=>{re(xt=>{const vt={...xt};return delete vt[ke],vt}),ye.current.delete(ke)},2e3);ye.current.set(ke,gt)};return window.addEventListener("workflow-label-error-node",V),()=>window.removeEventListener("workflow-label-error-node",V)},[et,jt]),b.useEffect(()=>{const V=ye.current;return()=>{V.forEach(ce=>window.clearTimeout(ce)),V.clear()}},[]),b.useEffect(()=>{const V=ce=>{const ue=ce.detail,ke=typeof ue=="number"?ue:ue.nodeId,Ie=typeof ue=="object"?ue.label:void 0;if(typeof ke!="number")return;x(ke);const Ye=document.getElementById(`node-card-${ke}`);Ye&&Ye.scrollIntoView({behavior:"smooth",block:"start"}),requestAnimationFrame(()=>y(ke,Ie))};return window.addEventListener("workflow-scroll-to-node",V),()=>window.removeEventListener("workflow-scroll-to-node",V)},[x,y]),b.useEffect(()=>{w&&($.current&&$.current.scrollTo({top:0,behavior:"auto"}),requestAnimationFrame(()=>fe.current?.focus()))},[w]),b.useEffect(()=>(g(T),()=>g(!1)),[T,g]),b.useEffect(()=>{if(!ae.length)return;const V=window.requestAnimationFrame(()=>{const ce=xe();if(!ce)return;const{minTop:ue,maxTop:ke}=ce;if(h==null)m({top:ke});else{const Ie=Math.min(Math.max(h,ue),ke);Ie!==h&&m({top:Ie})}});return()=>window.cancelAnimationFrame(V)},[ae.length,h,xe,m]),b.useEffect(()=>{if(!T)return;const V=ce=>{const ue=D.current;!ue||!ce.target||ue.contains(ce.target)||(I(!1),F(!1),pe(null),Qe())};return document.addEventListener("pointerdown",V),()=>{document.removeEventListener("pointerdown",V)}},[Qe,T]);const $n=V=>{for(const ce of V){if(ce.type==="node")return ce.node.id;if(ce.type==="group"||ce.type==="subgraph"){const ue=$n(ce.children);if(ue!=null)return ue}}return null},fl=V=>{for(const ce of V){if(ce.type==="node"){if(!ce.node.flags?.collapsed)return!0;continue}if(!ce.isCollapsed||fl(ce.children))return!0}return!1},ol=b.useCallback((V,ce)=>{const ue=ke=>{for(const Ie of ke){if(Ie.type==="node"){ge(Ie.node.id,ce);continue}if(Ie.type==="group"){A(Ie.group.id,ce),ue(Ie.children);continue}K(Ie.subgraph.id,ce),ue(Ie.children)}};ue(V)},[A,ge,K]),An=b.useCallback((V,ce)=>()=>{ol(V,ce)},[ol]),rn=(V,ce)=>V.map((ue,ke)=>{const Ie=`${ce}-${ke}`;if(ue.type==="group"){const Ye=ue.group,Re=Gl(Ye.color,.15),ot=Gl(Ye.color,.4),pt=$n(ue.children),gt=fl(ue.children),xt=gt?"Fold all":"Unfold all",vt=An(ue.children,gt);return u.jsxs("div",{id:`group-wrapper-${ue.group.id}`,className:"group-wrapper shadow-md rounded-xl border mb-3",style:{backgroundColor:Re,borderColor:ot},children:[u.jsx(X3,{group:Ye,nodeCount:ue.nodeCount,isCollapsed:ue.isCollapsed,subgraphId:ue.subgraphId,bookmarkNodeId:pt,foldAllLabel:xt,onToggleCollapse:()=>R(ue.group.id),onToggleFoldAll:vt,onBypassAll:yt=>U(ue.group.id,yt,ue.subgraphId),onHideGroup:()=>B(ue.group.id,!0)}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${ue.isCollapsed?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden px-1 transition-opacity duration-200 ease-out ${ue.isCollapsed?"opacity-0":"opacity-100"}`,children:[ue.children.length>0?rn(ue.children,Ie):u.jsx(Z3,{group:ue.group}),u.jsx(P3,{group:ue.group})]})})]},`group-${ue.group.id}-${Ie}`)}if(ue.type==="subgraph"){const Ye="rgba(59, 130, 246, 0.08)",Re="rgba(59, 130, 246, 0.25)";return u.jsxs("div",{className:"subgraph-wrapper shadow-md rounded-xl border mb-3",style:{backgroundColor:`var(--subgraph-bg, ${Ye})`,borderColor:`var(--subgraph-border, ${Re})`,"--subgraph-bg":Ye,"--subgraph-border":Re},children:[u.jsx(K3,{subgraph:ue.subgraph,nodeCount:ue.nodeCount,isCollapsed:ue.isCollapsed,onToggleCollapse:()=>W(ue.subgraph.id)}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${ue.isCollapsed?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden px-1 transition-opacity duration-200 ease-out ${ue.isCollapsed?"opacity-0":"opacity-100"}`,children:[ue.children.length>0&&rn(ue.children,Ie),u.jsx(t5,{subgraph:ue.subgraph})]})})]},`subgraph-${ue.subgraph.id}-${Ie}`)}return u.jsx("div",{id:`node-card-${ue.node.id}`,children:u.jsx($3,{node:ue.node,isExecuting:s===String(ue.node.id),isConnectionHighlighted:Vt.has(ue.node.id),errorBadgeLabel:J[ue.node.id]??null,onImageClick:r})},`node-${ue.node.id}-${Ie}`)});let an;o?We.length===0?an=u.jsx("div",{id:"node-list-empty",className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{id:"empty-workflow-content",className:"text-center p-8",children:[u.jsx("div",{id:"empty-workflow-icon-container",className:"flex items-center justify-center mb-4",children:u.jsx($1,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{id:"empty-workflow-title",className:"text-lg font-medium",children:"Empty workflow"}),u.jsx("p",{id:"empty-workflow-description",className:"text-sm mt-2",children:"This workflow has no nodes"})]})}):an=u.jsxs("div",{id:"node-list-shell",className:"h-full flex flex-col",children:[w&&u.jsx("div",{className:"node-search-bar px-1 pt-3",children:u.jsxs("div",{className:"flex items-center gap-2 bg-white border border-gray-200 rounded-xl px-3 py-2 shadow-sm",children:[u.jsx("input",{ref:fe,value:M,onChange:V=>j(V.target.value),placeholder:"Search nodes...",className:"comfy-input p-3 flex-1 text-sm text-gray-900 outline-none placeholder:text-gray-400"}),u.jsx("button",{type:"button",onClick:Ve,className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:u.jsx(Ho,{className:"w-4 h-4"})})]})}),u.jsx("div",{id:"node-list-container",ref:$,className:"flex-1 overflow-auto px-4 pt-4 overscroll-contain scroll-container",style:{paddingBottom:"10rem"},"data-node-list":"true",children:rt.length===0?u.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{className:"text-center p-8",children:[u.jsx("p",{className:"text-sm font-medium",children:"No matching nodes"}),u.jsx("p",{className:"text-xs mt-2",children:"Try a different search."})]})}):u.jsx("div",{id:"node-list-inner",children:rn(rt,"root")})})]}):an=u.jsx("div",{id:"node-list-no-workflow",className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{id:"no-workflow-content",className:"text-center p-8",children:[u.jsx("div",{id:"no-workflow-icon-container",className:"flex items-center justify-center mb-4",children:u.jsx(W1,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{id:"no-workflow-title",className:"text-lg font-medium",children:"No workflow loaded"}),u.jsx("p",{id:"no-workflow-description",className:"text-sm mt-2",children:"Open the menu to load a workflow"})]})});const on=X?.y??h??0,Rn=X?`${X.x}px`:p==="left"?"0.75rem":void 0,Me=X?void 0:p==="right"?"0.75rem":void 0,ze={top:`${on}px`,left:Rn,right:Me,opacity:h==null&&X==null?0:1,touchAction:T?"none":"pan-y",pointerEvents:h==null&&X==null?"none":"auto"};return u.jsxs("div",{id:"node-list-wrapper",ref:le,className:"absolute inset-x-0 top-[60px] bottom-0 bg-gray-100",style:{display:l?"block":"none"},children:[an,ae.length>0&&u.jsx("div",{ref:D,className:`absolute z-[200] flex flex-col items-center gap-2 pointer-events-auto ${T?"rounded-2xl ring-2 ring-blue-400/70 bg-white/30 shadow-lg":""}`,style:ze,onPointerDown:ut,onPointerMove:Ze,onPointerUp:Le,onPointerCancel:Xe,children:u.jsxs("div",{className:`flex flex-col items-center gap-2 ${T?"p-2 cursor-grab":""}`,children:[ae.map((V,ce)=>u.jsx("button",{type:"button",className:"w-10 h-10 rounded-full border border-transparent bg-gray-900/10 text-[11px] font-bold text-gray-800 shadow-sm backdrop-blur-sm dark:bg-white/10 dark:text-gray-100 select-none",onClick:Ce(V,ce),children:V},V)),ae.length>1&&u.jsx("button",{type:"button",className:"w-10 h-10 rounded-full border border-transparent bg-gray-900/10 text-gray-600 shadow-sm backdrop-blur-sm flex items-center justify-center dark:bg-white/10 dark:text-gray-200 select-none","aria-label":"Cycle bookmarks",onClick:tt,children:u.jsx(Wn,{className:"w-4 h-4"})})]})})]})}function r5(){const l=_n(O=>O.currentPanel),r=ll(O=>O.viewerOpen),o=ne(O=>O.workflow),s=ne(O=>O.isExecuting),i=ne(O=>O.progress),d=ne(O=>O.executingNodeId),p=ne(O=>O.executingPromptId),h=ne(O=>O.workflowDurationStats),m=Zt(O=>O.error),g=Zt(O=>O.nodeErrors),x=Zt(O=>O.errorsDismissed),y=Zt(O=>O.setErrorsDismissed),N=ne(O=>O.scrollToNode),k=Zt(O=>O.errorCycleIndex),S=Zt(O=>O.setErrorCycleIndex),w=ne(O=>O.revealNodeWithParents),M=ne(O=>O.nodeTypes),j=lt(O=>O.running),[E,z]=b.useState(null),R=!(l==="queue")&&!(l==="outputs")&&!r,A=Object.values(g).reduce((O,F)=>O+F.length,0),B=A>0,U=!!m?.startsWith("Workflow load error")||B,G=U?"Workflow load error":"Prompt error",W=U&&m?m.replace(/^Workflow load error:\s*/i,""):m??(B?`${A} inputs reference missing options.`:null),K=(!!m||B)&&!x,ge=b.useMemo(()=>{if(!o||!d)return null;const O=o.nodes.find(X=>String(X.id)===d);return O?M?.[O.type]?.display_name||O.type:`Node ${d}`},[o,d,M]),ae=p||(j[0]?.prompt_id??null),le=Go({workflow:o,runKey:ae,isRunning:s||j.length>0,workflowDurationStats:h}),D=le===100?100:i,$=()=>{if(!o||!B)return;const O=o.nodes.filter(J=>g[String(J.id)]?.length).map(J=>J.id);if(O.length===0)return;const F=k%O.length,X=O[F],pe=`Error #${F+1}`;w(X),S((F+1)%O.length),window.dispatchEvent(new CustomEvent("workflow-label-error-node",{detail:{nodeId:X,label:pe}})),window.dispatchEvent(new CustomEvent("workflow-scroll-to-node",{detail:{nodeId:X,label:pe}})),N(X,pe)},fe=O=>{(O.key==="Enter"||O.key===" ")&&(O.preventDefault(),$())},be=O=>{O.stopPropagation()},ve=O=>{O.stopPropagation(),y(!0)},T=()=>{ae&&z(ae)},I=E!==null&&E===ae;return R?u.jsxs("div",{id:"bottom-status-overlay",className:"fixed inset-x-0 bottom-20 z-[2000] flex flex-col items-center gap-3 pointer-events-none",children:[K&&u.jsxs("div",{id:"error-notification-wrapper",className:"relative pointer-events-auto",children:[u.jsx("div",{id:"error-notification-toast",className:"bg-red-100 text-red-900 rounded-xl shadow-lg px-4 py-3 w-[70vw] max-w-sm",role:"button",tabIndex:0,onClick:$,onKeyDown:fe,children:u.jsx("div",{className:"error-toast-content flex items-start justify-between gap-3",children:u.jsxs("div",{className:"error-text-container pr-16",children:[u.jsx("div",{className:"error-title text-sm font-semibold text-red-800",children:G}),u.jsx("div",{className:"error-message mt-1 text-xs text-red-800 break-words",children:W})]})})}),u.jsx("button",{id:"error-dismiss-button",type:"button","aria-label":"Dismiss error",className:"absolute top-3 right-3 shrink-0 px-3 py-1 text-xs font-semibold bg-red-700 text-white rounded-full z-10",onPointerDown:be,onClick:ve,children:"Dismiss"})]}),le!==null&&!I&&u.jsxs("div",{id:"execution-progress-card",className:"relative bg-white border border-gray-200 rounded-xl shadow-lg px-4 py-2 w-[70vw] max-w-sm pointer-events-auto",children:[u.jsx("button",{type:"button","aria-label":"Dismiss progress",className:"absolute top-2 right-2 w-7 h-7 rounded-full flex items-center justify-center text-gray-400 hover:text-gray-600",onClick:T,children:u.jsx(Ho,{className:"w-4 h-4"})}),u.jsx("div",{className:"executing-node-name text-sm font-semibold text-gray-900",children:ge||"Running"}),u.jsxs("div",{className:"node-progress-info mt-2 flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[D,"%"]})]}),u.jsx("div",{className:"node-progress-track mt-1 h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"node-progress-bar h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,D))}%`}})}),le!==null&&u.jsxs("div",{className:"overall-progress-container",children:[u.jsxs("div",{className:"overall-progress-info mt-3 flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[le,"%"]})]}),u.jsx("div",{className:"overall-progress-track mt-1 h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"overall-progress-bar h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,le))}%`}})})]})]})]}):null}function a5({viewerOpen:l,followQueue:r,queueSize:o,overallProgress:s,onToggleFollowQueue:i,onOpenFollowQueue:d}){const p=b.useCallback(()=>{l?i?.():d?.()},[l,i,d]),h=b.useMemo(()=>l?r?"Disable follow queue":"Enable follow queue":"Open image viewer",[l,r]),m=b.useMemo(()=>l&&r?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200",[l,r]);return u.jsxs("button",{onClick:p,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${m}`,"aria-label":h,children:[u.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx(A0,{className:"w-6 h-6",showSlash:l&&!r})}),o>0&&u.jsxs("div",{className:`queue-badge absolute top-0 right-0 translate-x-[18px] -translate-y-[18px] w-6 h-6 rounded-full bg-blue-500 text-white
                     flex items-center justify-center font-bold text-xs border-2 border-white relative z-20`,children:[s!==null&&u.jsx(nb,{className:"absolute z-10 pointer-events-none",width:"24",height:"24",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-90deg)"},progress:s}),o]})]})}function o5(){const l=ne(p=>p.workflow),r=Gn(p=>p.pinnedWidget),o=Gn(p=>p.pinOverlayOpen),s=Gn(p=>p.togglePinOverlay),i=ne(p=>p.updateNodeWidget),d=b.useMemo(()=>{if(!r||!l)return;const p=l.nodes.find(h=>h.id===r.nodeId);if(p)return To(p,r.widgetName,r.widgetIndex)},[r,l]);return!o||!r?null:u.jsx("div",{id:"pin-overlay-hidden-anchor",className:"hidden",children:u.jsx(cl,{name:r.widgetName,type:r.widgetType,value:d,options:r.options,onChange:p=>i(r.nodeId,r.widgetIndex,p,r.widgetName),hideLabel:!0,compact:!0,forceModalOpen:!0,onModalClose:s})})}function s5(){const l=St(r=>r.setFilterModalOpen);return u.jsx("button",{onClick:()=>l(!0),className:"relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors bg-gray-100 text-gray-700 hover:bg-gray-200","aria-label":"Filter and sort",children:u.jsx(q1,{className:"w-6 h-6"})})}function i5(){const l=St(s=>s.selectedIds.length),r=St(s=>s.setSelectionActionOpen),o=l===0;return u.jsx("button",{onClick:()=>r(!0),disabled:o,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${o?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,"aria-label":"Selection actions",children:u.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shadow-sm ${o?"border-gray-300 bg-transparent":"bg-blue-600 border-blue-600 text-white"}`,children:!o&&u.jsx(Hr,{className:"w-4 h-4"})})})}function u5(){return St(r=>r.selectionMode)?u.jsx(i5,{}):u.jsx(s5,{})}function c5(){const l=Gn(s=>s.pinnedWidget),r=Gn(s=>s.pinOverlayOpen),o=Gn(s=>s.togglePinOverlay);return l?u.jsx("button",{onClick:o,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${r?"bg-fuchsia-500 text-white":"bg-gray-100 text-fuchsia-500 hover:bg-gray-200"}`,"aria-label":r?"Close pin editor":"Open pin editor",children:u.jsx(Ro,{className:"w-6 h-6"})}):null}function d5(){const l=ne(d=>d.workflow),r=ne(d=>d.runCount),o=ne(d=>d.queueWorkflow),s=l!==null,i=()=>{s&&(o(r),"vibrate"in navigator&&navigator.vibrate(20))};return u.jsx("button",{onClick:i,disabled:!s,className:"flex-1 py-3 px-6 rounded-xl font-semibold text-lg min-h-[48px] transition-all "+(s?"bg-blue-500 text-white active:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Run"})}function f5(){const l=ne(i=>i.runCount),r=ne(i=>i.setRunCount),o=()=>{r(l-1)},s=()=>{r(l+1)};return u.jsxs("div",{id:"run-count-selector",className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[u.jsx("button",{onClick:o,disabled:l<=1,className:`w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center
                   text-lg font-medium text-gray-700 disabled:opacity-40 disabled:shadow-none`,children:""}),u.jsx("span",{className:"w-8 text-center font-semibold text-gray-900",children:l}),u.jsx("button",{onClick:s,className:`w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center
                   text-lg font-medium text-gray-700`,children:"+"})]})}function p5(l){const{currentPanel:r,viewerOpen:o=!1,followQueue:s=!1,onToggleFollowQueue:i,onOpenFollowQueue:d}=l,p=r==="outputs",h=ne(j=>j.workflow),m=ne(j=>j.isExecuting),g=ne(j=>j.executingPromptId),x=ne(j=>j.workflowDurationStats),y=lt(j=>j.pending),N=lt(j=>j.running),k=b.useRef(null),S=y.length+N.length,w=g||(N[0]?.prompt_id??null),M=Go({workflow:h,runKey:w,isRunning:m||N.length>0,workflowDurationStats:x});return b.useEffect(()=>{const j=k.current;if(!j)return;const E=()=>{const z=j.getBoundingClientRect();document.documentElement.style.setProperty("--bottom-bar-offset",`${z.height}px`)};return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),u.jsxs("div",{id:"bottom-bar-root",ref:k,className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg safe-area-bottom z-[2200]",children:[u.jsxs("div",{id:"bottom-bar-content",className:"flex items-center gap-3 px-3 py-2 max-w-lg mx-auto",children:[u.jsx(f5,{}),u.jsx(d5,{}),p&&u.jsx(u5,{}),!p&&u.jsx(c5,{}),u.jsx(a5,{viewerOpen:o,followQueue:s,queueSize:S,overallProgress:M,onToggleFollowQueue:i,onOpenFollowQueue:d})]}),u.jsx(o5,{}),u.jsx(r5,{})]})}const f0=l=>Symbol.iterator in l,p0=l=>"entries"in l,m0=(l,r)=>{const o=l instanceof Map?l:new Map(l.entries()),s=r instanceof Map?r:new Map(r.entries());if(o.size!==s.size)return!1;for(const[i,d]of o)if(!s.has(i)||!Object.is(d,s.get(i)))return!1;return!0},m5=(l,r)=>{const o=l[Symbol.iterator](),s=r[Symbol.iterator]();let i=o.next(),d=s.next();for(;!i.done&&!d.done;){if(!Object.is(i.value,d.value))return!1;i=o.next(),d=s.next()}return!!i.done&&!!d.done};function h5(l,r){return Object.is(l,r)?!0:typeof l!="object"||l===null||typeof r!="object"||r===null||Object.getPrototypeOf(l)!==Object.getPrototypeOf(r)?!1:f0(l)&&f0(r)?p0(l)&&p0(r)?m0(l,r):m5(l,r):m0({entries:()=>Object.entries(l)},{entries:()=>Object.entries(r)})}function g5(l){const r=Ca.useRef(void 0);return o=>{const s=l(o);return h5(r.current,s)?r.current:r.current=s}}function bd(l){return!!l&&typeof l=="object"&&!Array.isArray(l)}function Ox(l){return Array.isArray(l)&&l.length>=2&&(typeof l[0]=="string"||typeof l[0]=="number")&&typeof l[1]=="number"}function Qi(l){return l.class_type??l.type??null}function xf(l,r){for(const o of r){const s=l.inputs?.[o];if(!Ox(s)&&s!==void 0)return s}}function Ma(l,r){const o=xf(l,r);if(o!=null)return typeof o=="string"?o:String(o)}function wd(l,r){if(!Ox(r))return null;const o=String(r[0]);return l[o]??null}function x5(l){if(!l)return;const r=Ma(l,["sampler_name","sampler","name"]);if(r)return r;if(Qi(l)==="KSamplerSelect"&&Array.isArray(l.widgets_values)){const s=l.widgets_values[0];return s==null?void 0:String(s)}}function v5(l){if(!l)return;const r=Ma(l,["scheduler","scheduler_name","name"]);if(r)return r;if(Qi(l)==="BasicScheduler"&&Array.isArray(l.widgets_values)){const s=l.widgets_values[0];return s==null?void 0:String(s)}}function y5(l){if(!l)return;const r=xf(l,["steps","step_count"]);if(r!==void 0)return r;if(Qi(l)==="BasicScheduler"&&Array.isArray(l.widgets_values)){const s=l.widgets_values[1];return s??void 0}}function b5(l){if(!l)return;const r=xf(l,["cfg","guidance","guidance_scale"]);if(r!==void 0)return r;if(Array.isArray(l.widgets_values)){const o=l.widgets_values[0];return o??void 0}}function vf(l){const r={};if(!bd(l)&&!Array.isArray(l))return r;let o=null;if(Array.isArray(l)&&l.length>=3&&bd(l[2])?o=l[2]:bd(l)&&(o=l),!o)return r;const i=Object.entries(o).sort((d,p)=>Number(d[0])-Number(p[0])).map(([,d])=>d);for(const d of i){const p=Qi(d);if(p){if(p==="CheckpointLoaderSimple"||p==="CheckpointLoader"){const h=d.inputs?.ckpt_name;typeof h=="string"?r.model=h.replace(/\.(safetensors|ckpt|pt)$/i,""):h!=null&&(r.model=String(h).replace(/\.(safetensors|ckpt|pt)$/i,""))}if(p==="KSampler"||p==="KSamplerAdvanced"){if(r.steps===void 0&&d.inputs?.steps!==void 0&&(r.steps=d.inputs.steps),r.cfg===void 0&&d.inputs?.cfg!==void 0&&(r.cfg=d.inputs.cfg),r.sampler===void 0){const h=Ma(d,["sampler_name"]);h&&(r.sampler=h)}if(r.scheduler===void 0){const h=Ma(d,["scheduler"]);h&&(r.scheduler=h)}}if(p==="SamplerCustom"||p==="SamplerCustomAdvanced"){if(r.steps===void 0&&d.inputs?.steps!==void 0&&(r.steps=d.inputs.steps),r.cfg===void 0&&d.inputs?.cfg!==void 0&&(r.cfg=d.inputs.cfg),r.sampler===void 0){const h=Ma(d,["sampler","sampler_name"]),m=wd(o,d.inputs?.sampler),g=h??x5(m);g&&(r.sampler=g)}if(r.scheduler===void 0){const h=Ma(d,["scheduler","scheduler_name"]),m=wd(o,d.inputs?.sigmas??d.inputs?.scheduler),g=h??v5(m);g&&(r.scheduler=g)}if(r.steps===void 0){const h=wd(o,d.inputs?.sigmas??d.inputs?.scheduler),m=y5(h);m!==void 0&&(r.steps=m)}}if(p==="FluxGuidance"&&r.cfg===void 0){const h=b5(d);h!==void 0&&(r.cfg=h)}}}return r}function yf(l,r={}){const{onlyOutput:o=!1,alt:s}=r,i=[];return l.forEach((d,p)=>{const h=d.outputs?.images??[],m=vf(d.prompt),g=d.durationSeconds,x=d.success!==!1;h.forEach((y,N)=>{if(o&&y.type!=="output")return;const k=typeof s=="function"?s(N,p):s,S=y.subfolder?`${y.subfolder}/${y.filename}`:y.filename,w=qo(y.filename),M=w==="video"?"video":"image";i.push({src:qn(y.filename,y.subfolder,y.type),alt:k,mediaType:w,metadata:m,durationSeconds:g,success:x,filename:y.filename,file:{id:`${y.type}/${S}`,name:y.filename,type:M,fullUrl:qn(y.filename,y.subfolder,y.type)}})})}),i}function w5({menuState:l,unifiedList:r,onClose:o,onLoadWorkflow:s,onCopyWorkflow:i,onDownload:d,onBatchDownload:p,onDeleteHistory:h,getBatchSources:m}){const g=l?.promptId??"",x=lt(j=>j.queueItemHideImages[g]),y=lt(j=>j.toggleQueueItemHideImages),N=()=>{l?.workflow&&l.promptId&&s(l.workflow,l.promptId),o()},k=()=>{i(l?.workflow),o()},S=async()=>{const j=l?.promptId?m(l.promptId,r):[];j.length>1?await p(j):l&&await d(l.imageSrc),o()},w=()=>{y(g),o()},M=()=>{l?.promptId&&h(l.promptId),o()};return l?.open?rl.createPortal(u.jsxs("div",{id:"queue-image-menu",className:"fixed z-[1200] bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden w-44",style:{top:l.top,right:l.right},children:[u.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${l.workflow?"":"opacity-50 cursor-not-allowed"}`,onClick:N,disabled:!l.workflow,children:[u.jsx(_a,{className:"w-4 h-4 text-gray-500"}),"Load workflow"]}),u.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${l.workflow?"":"opacity-50 cursor-not-allowed"}`,onClick:k,disabled:!l.workflow,children:[u.jsx(K1,{className:"w-4 h-4 text-gray-500"}),"Copy workflow"]}),u.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:S,children:[u.jsx(J1,{className:"w-4 h-4 text-gray-500"}),l.promptId&&m(l.promptId,r).length>1?"Download batch":"Download"]}),l.hasVideoOutputs&&l.hasImageOutputs&&l.promptId&&u.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:w,children:[x?u.jsx(Ir,{className:"w-4 h-4 text-gray-500"}):u.jsx(dl,{className:"w-4 h-4 text-gray-500"}),x?"Show images":"Hide images"]}),u.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50",onClick:M,children:[u.jsx(Ul,{className:"w-4 h-4"}),"Delete"]})]}),document.body):null}function S5({message:l}){return l?rl.createPortal(u.jsx("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-[1300] bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg text-sm font-medium animate-in fade-in slide-in-from-top-2 duration-200",children:l}),document.body):null}function Ex(l){return"outputs"in l}function N5(l,r){const o=r.find(i=>i.id===l);return!o||o.status!=="done"?[]:Ex(o.data)?(o.data.outputs.images??[]).filter(i=>i.type==="output").map(i=>qn(i.filename,i.subfolder,i.type)):[]}async function Tx(l,r="image.png",o){try{const i=await(await fetch(l)).blob(),d=URL.createObjectURL(i),p=document.createElement("a");p.href=d,p.download=r,document.body.appendChild(p),p.click(),p.remove(),URL.revokeObjectURL(d),o?.(l)}catch(s){console.error("Failed to download image:",s)}}async function j5(l,r){for(const o of l)await Tx(o,"image.png",r)}async function C5(l){try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(l);else{const r=document.createElement("textarea");r.value=l,r.style.position="fixed",r.style.opacity="0",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}return!0}catch(r){return console.error("Failed to copy to clipboard:",r),!1}}function k5({item:l,isActuallyRunning:r,progress:o,overallProgress:s,executingNodeLabel:i,onDelete:d,onStop:p,onImageClick:h,viewerImages:m,runningImages:g,onOpenMenu:x,downloaded:y,isTopDoneItem:N}){const k=lt(we=>we.previewVisibility),S=lt(we=>we.previewVisibilityDefault),w=lt(we=>we.showQueueMetadata),M=lt(we=>we.queueItemExpanded[l.id]),j=lt(we=>we.setQueueItemExpanded),E=lt(we=>we.queueItemHideImages[l.id]),z=b.useRef(new Map),L=b.useRef(new Set),[_,R]=b.useState(new Set),A=l.status==="pending"&&!r,B=l.status==="running"||r,U=l.status==="done",G=M!==void 0,W=G?M:!1,K=b.useRef(U);b.useEffect(()=>{G||j(l.id,!1)},[G,l.id,j]),b.useEffect(()=>{!K.current&&U&&j(l.id,!0),K.current=U},[U,l.id,j]),b.useEffect(()=>{L.current.clear(),R(new Set)},[l.id]);const ge=()=>{j(l.id,!W)},ae=U&&Ex(l.data)?l.data:null,le=b.useMemo(()=>ae?ae.outputs.images:B?g:[],[ae,B,g]),D=!!(l.data.prompt_id?k[l.data.prompt_id]??S:S),{savedImages:$,displayImages:fe}=b.useMemo(()=>{const we=le.filter(Ae=>Ae.type==="output"),xe=le.filter(Ae=>Ae.type!=="output"),Ee=D||we.length===0&&xe.length>0;return{savedImages:we,displayImages:Ee?[...we,...xe]:we}},[D,le]),be=b.useMemo(()=>le.some(we=>ja(we.filename)),[le]),ve=b.useMemo(()=>le.some(we=>!ja(we.filename)),[le]),T=b.useMemo(()=>!E||!be?fe:fe.filter(we=>ja(we.filename)),[fe,be,E]),I=$.map(we=>({src:qn(we.filename,we.subfolder,we.type),alt:"Generation"})),O="aspect-square w-full bg-gray-100 flex flex-col items-center justify-center text-gray-400",F=ae?.durationSeconds,X=ae?ae.success!==!1:!0,pe=M5(F),J=s===100?100:o,re=b.useMemo(()=>!w||!l.data.prompt?null:vf(l.data.prompt),[w,l.data.prompt]),ye=b.useMemo(()=>B?T.map(we=>({src:qn(we.filename,we.subfolder,we.type),alt:"Generation",mediaType:qo(we.filename)})):m,[B,m,T]);b.useEffect(()=>{W&&T.forEach(we=>{if(!ja(we.filename))return;const xe=qn(we.filename,we.subfolder,we.type);if(L.current.has(xe))return;L.current.add(xe);const Ee=z.current.get(xe);if(!Ee)return;Ee.currentTime=0,R(ft=>{const ut=new Set(ft);return ut.delete(xe),ut});const Ae=Ee.play();Ae&&typeof Ae.catch=="function"&&Ae.catch(()=>{})})},[W,T]);const _e=we=>{we.stopPropagation(),ge()},$e=we=>{we.stopPropagation(),p()},ee=we=>{we.stopPropagation(),d()},Ve=we=>{we.stopPropagation();const xe=we.currentTarget.getBoundingClientRect(),Ee=Math.max(8,window.innerWidth-xe.right),Ae=I[0]?.src||"";x({top:xe.bottom+6,right:Ee,imageSrc:Ae,workflow:ae?.workflow,promptId:l.data.prompt_id||l.id,hasVideoOutputs:be,hasImageOutputs:ve})},Ne=we=>()=>{R(xe=>new Set(xe).add(we))},Ce=we=>()=>{R(xe=>{const Ee=new Set(xe);return Ee.delete(we),Ee})},tt=(we,xe,Ee)=>()=>{const Ae=ye.findIndex(ft=>ft.src===we);h?.(ye,Ae>=0?Ae:xe,Ee)},Qe=we=>xe=>{xe.stopPropagation();const Ee=z.current.get(we);if(!Ee)return;Ee.currentTime=0;const Ae=Ee.play();Ae&&typeof Ae.catch=="function"&&Ae.catch(()=>{})};return u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden transition-all duration-300",children:[u.jsxs("div",{onClick:ge,className:`px-3 py-2 border-b flex justify-between items-center cursor-pointer select-none ${B?"bg-blue-50 border-blue-100":"bg-gray-50 border-gray-100"}`,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[u.jsx("button",{onClick:_e,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-400 hover:text-gray-600 shrink-0",children:W?u.jsx(Wn,{className:"w-6 h-6"}):u.jsx(Br,{className:"w-6 h-6"})}),B&&u.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),A&&u.jsx("span",{className:"text-xs font-bold text-gray-400",children:"PENDING"}),B&&u.jsx("span",{className:"text-xs font-bold text-blue-600",children:"GENERATING"}),U&&u.jsx("span",{className:"text-xs font-bold text-gray-500",children:new Date(l.timestamp||0).toLocaleTimeString()}),B&&!W&&r&&s!=null&&u.jsxs("span",{className:"ml-1 text-xs font-semibold text-blue-600",children:[Math.min(100,Math.max(0,s)),"%"]})]}),u.jsx("div",{className:"flex items-center gap-2",children:B?u.jsx("button",{onClick:$e,className:"px-2 py-1 text-xs font-semibold text-white bg-red-600 rounded hover:bg-red-700",children:"Stop"}):U?u.jsx("button",{className:"w-7 h-7 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent",onClick:Ve,"aria-label":"Image options",children:u.jsx(br,{className:"w-4 h-4 -rotate-90"})}):u.jsx("button",{onClick:ee,className:"text-gray-400 hover:text-red-500 px-2",title:A?"Remove from Queue":"Delete from History","aria-label":A?"Remove from Queue":"Delete from History",children:u.jsx(Ho,{className:"w-4 h-4"})})})]}),W&&u.jsx("div",{className:"relative w-full animate-in fade-in duration-200",children:T.length>0?u.jsx("div",{className:"flex flex-col",children:(()=>{let we=0,xe=0;return T.map((Ee,Ae)=>{const ft=Ee.type!=="output",ut=ft?++xe:++we,Ze=`${ft?"Preview":"Save"} #${ut}`,Se=qn(Ee.filename,Ee.subfolder,Ee.type),Le=y[Se],Xe=T.length>1;return u.jsxs("div",{className:"relative",children:[pe&&u.jsxs("div",{className:`absolute top-2 left-2 flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold ${X?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:[X?u.jsx(Hr,{className:"w-3.5 h-3.5"}):u.jsx(Q1,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:pe})]}),ja(Ee.filename)?u.jsxs(u.Fragment,{children:[u.jsx("video",{src:Se,className:"w-full h-auto block",muted:!0,playsInline:!0,preload:"metadata",ref:We=>{We?z.current.set(Se,We):z.current.delete(Se)},onEnded:Ne(Se),onPlay:Ce(Se),onClick:tt(Se,Ae,N)}),_.has(Se)&&u.jsx("button",{type:"button",className:"absolute inset-0 flex items-center justify-center bg-black/35 text-white",onClick:Qe(Se),"aria-label":"Replay video",children:u.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-black/60 text-2xl",children:""})})]}):u.jsx("img",{src:Se,alt:"Generation",className:"w-full h-auto block",loading:"lazy",onClick:tt(Se,Ae,N)}),Le&&u.jsx("div",{className:"absolute bottom-2 right-2 w-7 h-7 rounded-full bg-black/60 text-white flex items-center justify-center",children:u.jsx(X1,{className:"w-4 h-4"})}),Xe&&u.jsx("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/60 text-white text-xs font-medium rounded backdrop-blur-sm shadow-sm pointer-events-none",children:Ze}),re&&u.jsxs("div",{className:`absolute right-2 flex flex-col-reverse items-end gap-1 pointer-events-none ${Le?"bottom-10":"bottom-2"}`,children:[re.model&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["model: ",re.model]}),re.sampler&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["sampler: ",re.sampler]}),re.steps&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["steps: ",re.steps]}),re.cfg&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["cfg: ",re.cfg]})]})]},Ae)})})()}):U?u.jsx("div",{className:O,children:u.jsx("span",{className:"text-sm",children:"No images saved"})}):B?u.jsx("div",{className:O,style:{minHeight:"300px"},children:r&&s!=null?u.jsxs("div",{className:"w-full max-w-xs px-4",children:[u.jsxs("p",{className:"font-semibold text-base text-gray-900 mb-3",children:["Executing: ",i||"Running"]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[J,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,J))}%`}})}),u.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500 mb-1",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[s,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,s))}%`}})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),u.jsx("p",{className:"font-medium text-lg text-blue-600",children:"Generating..."})]})}):u.jsxs("div",{className:O,style:{minHeight:"100px"},children:[u.jsx(vb,{className:"w-8 h-8 text-gray-300"}),u.jsx("span",{className:"text-xs mt-2 opacity-40",children:"Waiting to start..."})]})})]})}function M5(l){const r=l===void 0||Number.isNaN(l)?0:l;return r<10?`${r.toFixed(1)}s`:`${Math.round(r)}s`}function O5({listRef:l,unifiedList:r,visibleCount:o,hasLoadedOnce:s,effectiveExecutingId:i,progress:d,overallProgress:p,executingNodeLabel:h,onDeleteItem:m,onStop:g,onImageClick:x,viewerImages:y,promptOutputs:N,onOpenMenu:k,downloaded:S,firstDoneItemId:w,onScroll:M}){return u.jsxs("div",{ref:l,className:"flex-1 overflow-y-auto p-4 space-y-4 overscroll-contain scroll-container","data-queue-list":"true",onScroll:M,children:[r.length===0&&!s&&u.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-180px)] text-gray-400",children:u.jsxs("div",{className:"text-center",children:[u.jsx(lf,{size:"lg",color:"gray",className:"mx-auto mb-4"}),u.jsx("p",{className:"text-lg",children:"Loading..."})]})}),r.length===0&&s&&u.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-180px)] text-gray-500",children:u.jsxs("div",{className:"text-center p-8",children:[u.jsx("div",{className:"flex items-center justify-center mb-4",children:u.jsx(Y1,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{className:"text-lg font-medium",children:"Queue is empty"}),u.jsx("p",{className:"text-sm mt-2",children:"Run a workflow to see items here"})]})}),r.slice(0,o).map(j=>u.jsx(k5,{item:j,isActuallyRunning:j.id===i,progress:d,overallProgress:p,executingNodeLabel:h,onDelete:()=>m(j),onStop:g,onImageClick:x,viewerImages:y,runningImages:N[j.id]??[],onOpenMenu:k,downloaded:S,isTopDoneItem:j.id===w},j.id)),u.jsx("div",{className:"h-20"})]})}function E5(l,r,o){b.useEffect(()=>{if(!l)return;const s=()=>r(),i=d=>{const p=d.target,h=document.getElementById(o);h&&p&&h.contains(p)||r()};return document.addEventListener("scroll",s,!0),document.addEventListener("mousedown",i),()=>{document.removeEventListener("scroll",s,!0),document.removeEventListener("mousedown",i)}},[l,r,o])}function T5({visible:l,onImageClick:r}){const o=lt(ee=>ee.running),s=lt(ee=>ee.pending),i=lt(ee=>ee.fetchQueue),d=lt(ee=>ee.deleteItem),p=lt(ee=>ee.interrupt),h=ne(ee=>ee.loadWorkflow),m=_n(ee=>ee.setCurrentPanel),g=ne(ee=>ee.workflow),x=ne(ee=>ee.nodeTypes),y=ne(ee=>ee.executingNodeId),N=ne(ee=>ee.workflowDurationStats),k=ne(ee=>ee.promptOutputs),S=Tn(ee=>ee.history),w=Tn(ee=>ee.fetchHistory),M=Tn(ee=>ee.deleteItem),{isExecuting:j,progress:E,executingPromptId:z}=ne(g5(ee=>({isExecuting:ee.isExecuting,progress:ee.progress,executingPromptId:ee.executingPromptId}))),L=z||(o.length===1?o[0].prompt_id:null),_=b.useMemo(()=>{if(!g||!y)return null;const ee=g.nodes.find(Ne=>String(Ne.id)===y);return ee?x?.[ee.type]?.display_name||ee.type:`Node ${y}`},[g,y,x]),R=Go({workflow:g,runKey:z||L,isRunning:j||!!L,workflowDurationStats:N}),[A,B]=b.useState(null),[U,G]=b.useState({}),[W,K]=b.useState(null),[ge,ae]=b.useState(!1),[le,D]=b.useState(0),$=b.useRef(null),fe=b.useRef(0),be=b.useRef(!1),ve=b.useRef(!1);b.useEffect(()=>{l&&(be.current||ve.current&&$.current&&($.current.scrollTop=0),Promise.all([i(),w()]).then(()=>{ae(!0)})),be.current=l,ve.current||(ve.current=!0)},[l,i,w]),b.useEffect(()=>{!j&&l&&w()},[j,l,w]),E5(!!A?.open,()=>B(null),"queue-image-menu");const T=async ee=>{if(!ee)return;const Ve=JSON.stringify(ee,null,2),Ne=await C5(Ve);K(Ne?"Copied to clipboard":"Failed to copy"),setTimeout(()=>K(null),2e3)},I=async ee=>{await Tx(ee,"image.png",Ve=>{G(Ne=>({...Ne,[Ve]:!0}))})},O=b.useMemo(()=>{const ee={};S.forEach(Ne=>{ee[Ne.prompt_id]={id:Ne.prompt_id,status:"done",data:Ne,timestamp:Ne.timestamp}}),o.forEach(Ne=>{ee[Ne.prompt_id]||(ee[Ne.prompt_id]={id:Ne.prompt_id,status:"running",data:Ne})}),s.forEach(Ne=>{ee[Ne.prompt_id]||(ee[Ne.prompt_id]={id:Ne.prompt_id,status:"pending",data:Ne})}),z&&ee[z]&&(ee[z].status="running");const Ve=Object.values(ee);return Ve.sort((Ne,Ce)=>{const tt={pending:0,running:1,done:2};if(tt[Ne.status]!==tt[Ce.status])return tt[Ne.status]-tt[Ce.status];if(Ne.status==="pending"){const Qe=Ne.data.number;return Ce.data.number-Qe}return Ne.status==="done"?(Ce.timestamp||0)-(Ne.timestamp||0):0}),Ve},[s,o,S,z]),F=b.useMemo(()=>{if(O.length===0)return 0;const ee=O.filter(tt=>tt.status==="pending").length,Ve=O.filter(tt=>tt.status==="running").length,Ce=O.filter(tt=>tt.status==="done").length>0?1:0;return Math.min(O.length,ee+Ve+Ce)},[O]),X=b.useMemo(()=>{const ee=O.filter(Ve=>Ve.status==="done").map(Ve=>Ve.data);return yf(ee,{onlyOutput:!0,alt:"Generation"})},[O]),pe=b.useMemo(()=>O.find(Ve=>Ve.status==="done")?.id??null,[O]);b.useEffect(()=>{l&&(fe.current=O.length,queueMicrotask(()=>{D(ee=>Math.max(ee,F))}))},[l,O.length,F]),b.useEffect(()=>{if(!l)return;const ee=$.current;ee&&(le>=O.length||ee.scrollHeight<=ee.clientHeight+20&&queueMicrotask(()=>{D(Ve=>Math.min(O.length,Ve+10))}))},[l,le,O.length]);const J=ee=>{ee.status==="pending"&&d(ee.id),ee.status==="done"&&M(ee.id)},re=ee=>{const{top:Ve,right:Ne,imageSrc:Ce,workflow:tt,promptId:Qe,hasVideoOutputs:we,hasImageOutputs:xe}=ee;B({open:!0,top:Ve,right:Ne,imageSrc:Ce,workflow:tt,promptId:Qe,hasVideoOutputs:we,hasImageOutputs:xe})},ye=()=>{const ee=$.current;if(!ee)return;ee.scrollHeight-ee.scrollTop-ee.clientHeight<400&&D(Ne=>Math.min(fe.current,Ne+10))},_e=(ee,Ve)=>{h(ee,`history-${Ve}.json`,{source:{type:"history",promptId:Ve}}),m("workflow")},$e=async ee=>{await j5(ee,Ve=>{G(Ne=>({...Ne,[Ve]:!0}))})};return u.jsx("div",{id:"queue-panel-wrapper",className:"absolute inset-x-0 top-[60px] bottom-0",style:{display:l?"block":"none"},children:u.jsxs("div",{className:"flex flex-col bg-gray-100 min-h-full",children:[u.jsx(O5,{listRef:$,unifiedList:O,visibleCount:le,hasLoadedOnce:ge,effectiveExecutingId:L,progress:E,overallProgress:R,executingNodeLabel:_,onDeleteItem:J,onStop:p,onImageClick:r,viewerImages:X,promptOutputs:k,onOpenMenu:re,downloaded:U,firstDoneItemId:pe,onScroll:ye}),u.jsx(w5,{menuState:A,unifiedList:O,onClose:()=>B(null),onLoadWorkflow:_e,onCopyWorkflow:T,onDownload:ee=>I(ee),onBatchDownload:$e,onDeleteHistory:ee=>M(ee),getBatchSources:N5}),u.jsx(S5,{message:W})]})})}let Sd=null,wi=[];function h0(l){return encodeURIComponent(l)}async function _5(){if(wi.length===0)return;const l=[...wi];wi=[];const r=l.map(o=>{const s=new Date(o.timestamp).toISOString(),i=o.data!==void 0?` | ${JSON.stringify(o.data)}`:"";return`${s} ${o.message}${i}`}).join(`
`)+`
`;try{let o="";try{const i=await fetch(`${It}/api/userdata/${h0("mobile-debug.log")}`);i.ok&&(o=await i.text())}catch{}const s=o+r;await fetch(`${It}/api/userdata/${h0("mobile-debug.log")}?overwrite=true`,{method:"POST",headers:{"Content-Type":"text/plain"},body:s})}catch(o){console.error("[debugLog] Failed to write to server:",o)}}function L5(){Sd||(Sd=setTimeout(()=>{Sd=null,_5()},500))}function $d(l,r){const o={timestamp:Date.now(),message:l,data:r};wi.push(o),r!==void 0?console.log(`[DEBUG] ${l}`,r):console.log(`[DEBUG] ${l}`),L5()}function A5(l,r,o){const s=l.closest("[data-textarea-root]")?.querySelector("[data-textarea-header]"),i=getComputedStyle(document.documentElement),d=parseFloat(i.getPropertyValue("--top-bar-offset"))||0,p=window.visualViewport?.offsetTop??0,h=window.visualViewport?.height??window.innerHeight,m=d+8,g=_x(l),x=s?.getBoundingClientRect(),y=g===window?{type:"window",scrollY:window.scrollY}:(()=>{const R=g;return{type:"element",tag:R.tagName.toLowerCase(),scrollTop:R.scrollTop,height:R.clientHeight}})();$d("textarea-scroll: start",{reason:o,behavior:r,headerTop:x?.top??null,layoutTopEdge:m,viewportTopEdge:p+d+8,viewportTop:p,viewportHeight:h,topBarOffset:d,container:y,selectionStart:l.selectionStart});const N=D5(l),k=p+d+h*.25,S=p+h-24,w=x?x.top-m:null,M=N-k,j=N>S?N-S:0;let E=0;const z=w!==null&&w>2,L=z?N-w:N,_=L<=S;z&&_?E=w??0:!z&&N<=S?E=0:(E=M,j>E&&(E=j)),E<0&&(E=0),x&&w!==null&&x.top>m+2&&E>w&&(E=w),$d("textarea-scroll: align",{caretTop:N,targetTop:k,visibilityBottom:S,deltaHeader:w,deltaCaret:M,deltaCaretMin:j,caretAfterHeader:L,caretVisibleAfterHeader:_,canAlignHeader:z,delta:E}),Math.abs(E)>8&&Lx(g,E,r)}function R5(l){const r=l.closest("[data-textarea-root]")?.querySelector("[data-textarea-header]");if(!r)return;const o=getComputedStyle(document.documentElement),i=(parseFloat(o.getPropertyValue("--top-bar-offset"))||0)+8,d=r.getBoundingClientRect(),p=d.top-i;if(Math.abs(p)<2)return;const h=_x(l);$d("textarea-scroll: align-header-request",{headerTop:d.top,layoutTopEdge:i,delta:p}),Lx(h,p,"auto")}function D5(l){const r=l.getBoundingClientRect(),o=z5(l);return r.top+o-l.scrollTop}function z5(l){const r=l.selectionStart??0,o=l.value,s=document.createElement("div"),i=getComputedStyle(l),d=s.style;d.position="absolute",d.top="0",d.left="-9999px",d.visibility="hidden",d.whiteSpace="pre-wrap",d.wordWrap="break-word",d.overflowWrap="break-word",d.boxSizing=i.boxSizing,d.width=`${l.clientWidth}px`,d.padding=i.padding,d.border=i.border,d.fontFamily=i.fontFamily,d.fontSize=i.fontSize,d.fontWeight=i.fontWeight,d.fontStyle=i.fontStyle,d.letterSpacing=i.letterSpacing,d.lineHeight=i.lineHeight,d.textTransform=i.textTransform,d.textIndent=i.textIndent,d.tabSize=i.tabSize;const p=document.createTextNode(o.slice(0,r)),h=document.createElement("span");h.textContent=o.slice(r,r+1)||" ",h.style.display="inline-block",h.style.width="1px",s.appendChild(p),s.appendChild(h),document.body.appendChild(s);const m=s.getBoundingClientRect(),x=h.getBoundingClientRect().top-m.top;return document.body.removeChild(s),x}function Nd(l){l?document.body.dataset.textareaFocus="true":delete document.body.dataset.textareaFocus}function _x(l){let r=l?.parentElement??null;for(;r;){const s=getComputedStyle(r).overflowY;if((s==="auto"||s==="scroll")&&r.scrollHeight>r.clientHeight)return r;r=r.parentElement}return window}function Lx(l,r,o="smooth"){if(Math.abs(r)<1)return;if(l===window){window.scrollBy({top:r,behavior:o});return}const s=l;s.scrollTo({top:s.scrollTop+r,behavior:o})}function Ax(){const[l,r]=b.useState(!1),o=b.useRef(null),s=b.useRef(null),i=b.useRef(null);return b.useEffect(()=>{const d=h=>{const m=h.target;if(!(m instanceof HTMLElement))return;const g=m.tagName.toLowerCase();if((m.isContentEditable||g==="input"||g==="textarea"||g==="select")&&r(!0),m instanceof HTMLTextAreaElement){Nd(!0);const x=()=>A5(m,"smooth","focus");o.current&&clearTimeout(o.current),s.current&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",s.current),s.current=null),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null);const y=()=>{document.activeElement===m&&(x(),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null))};if(i.current=y,document.addEventListener("selectionchange",y),setTimeout(()=>{i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null)},1200),window.visualViewport){let N=!1;const k=()=>{N=!0,x(),s.current&&(window.visualViewport?.removeEventListener("resize",s.current),s.current=null)};s.current=k,window.visualViewport.addEventListener("resize",k),o.current=setTimeout(()=>{N||x(),setTimeout(x,300),s.current&&(window.visualViewport?.removeEventListener("resize",s.current),s.current=null)},600)}else requestAnimationFrame(x)}},p=()=>{const h=document.activeElement;if(!(h instanceof HTMLElement)){r(!1),Nd(!1),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null);return}const m=h.tagName.toLowerCase(),g=h.isContentEditable||m==="input"||m==="textarea"||m==="select";r(g),Nd(h instanceof HTMLTextAreaElement)};return document.addEventListener("focusin",d),document.addEventListener("focusout",p),()=>{document.removeEventListener("focusin",d),document.removeEventListener("focusout",p),o.current&&clearTimeout(o.current),s.current&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",s.current),s.current=null),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null)}},[]),b.useEffect(()=>{const d=p=>{const m=p.detail?.textarea;m&&R5(m)};return document.addEventListener("textarea-align-header",d),()=>{document.removeEventListener("textarea-align-header",d)}},[]),{isInputFocused:l}}function I5({index:l,total:r,displayName:o}){return u.jsx("div",{id:"media-viewer-header",className:"absolute top-0 inset-x-0 px-3 pt-3 pb-4 bg-gradient-to-b from-black/50 to-transparent",children:u.jsxs("div",{className:"grid grid-cols-3 items-center",children:[u.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[l+1," / ",r]}),u.jsx("div",{className:"justify-self-center text-white/90 text-sm font-medium max-w-[70vw] truncate",children:o}),u.jsx("div",{})]})})}function B5({index:l,total:r,onPrev:o,onNext:s}){return u.jsxs("div",{id:"media-viewer-navigation",className:"hidden sm:block",children:[u.jsx("button",{onClick:o,disabled:l===0,className:"absolute left-3 top-1/2 -translate-y-1/2 p-2 text-white/50 hover:text-white disabled:opacity-0 transition-all pointer-events-auto",children:u.jsx(D0,{className:"w-8 h-8"})}),u.jsx("button",{onClick:s,disabled:l===r-1,className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 text-white/50 hover:text-white disabled:opacity-0 transition-all pointer-events-auto",children:u.jsx(Oi,{className:"w-8 h-8"})})]})}function H5({isVideo:l,onDelete:r,onLoadWorkflow:o,onLoadInWorkflow:s,showMetadataToggle:i,canToggleMetadata:d,onDeleteClick:p,onLoadWorkflowClick:h,onLoadInWorkflowClick:m,onToggleMetadata:g}){return u.jsxs("div",{className:"absolute inset-x-0 px-3 pb-2 pt-2 flex items-center justify-between",style:{bottom:"calc(var(--bottom-bar-offset, 0px) + 4px)"},children:[u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-red-500 flex items-center justify-center hover:bg-black/60 transition-colors ${r?"":"opacity-40 pointer-events-none"}`,onClick:p,"aria-label":"Delete output",children:u.jsx(Ul,{className:"w-5 h-5"})}),!l&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${o?"":"opacity-40 pointer-events-none"}`,onClick:h,"aria-label":"Load workflow",children:u.jsx(_a,{className:"w-5 h-5"})}),u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${s?"":"opacity-40 pointer-events-none"}`,onClick:m,"aria-label":"Use in workflow",children:u.jsx(L0,{className:"w-5 h-5"})}),i&&u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${d?"":"opacity-40 pointer-events-none"}`,onClick:g,"aria-label":"Toggle metadata",children:u.jsx(_0,{className:"w-5 h-5"})})]})]})}function V5({isVideo:l,showMetadataToggle:r,showMetadataOverlay:o,metadataIsLoading:s,metadata:i,durationLabel:d}){return r?u.jsx("div",{className:`absolute right-3 flex flex-col items-end gap-1 pointer-events-none transition-opacity duration-300 ${o?"opacity-100":"opacity-0"}`,style:{bottom:l?"calc(var(--bottom-bar-offset, 0px) + 120px)":"calc(var(--bottom-bar-offset, 0px) + 64px)"},children:s?u.jsx("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:"Loading metadata..."}):i?u.jsxs(u.Fragment,{children:[i.model&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["model: ",i.model]}),i.sampler&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["sampler: ",i.sampler]}),i.steps&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["steps: ",i.steps]}),i.cfg&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["cfg: ",i.cfg]}),d&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["time: ",d]})]}):u.jsx("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:"No metadata found"})}):null}const U5={x:0,y:0};function Rx({open:l,items:r,index:o,onIndexChange:s,onClose:i,onDelete:d,onLoadWorkflow:p,onLoadInWorkflow:h,showMetadataToggle:m=!1,showLoadingPlaceholder:g=!1,loadingProgress:x=0,loadingLabel:y,initialScale:N=1,initialTranslate:k=U5,onTransformChange:S,zoomResetKey:w,overlayZIndex:M=2100}){const j=b.useRef(null),E=b.useRef(null),z=b.useRef(null),L=b.useRef(null),[_,R]=b.useState(1),[A,B]=b.useState({x:0,y:0}),U=b.useRef(1),G=b.useRef({x:0,y:0}),W=b.useRef(null),K=b.useRef(null),ge=b.useRef(null),ae=b.useRef(null),[le,D]=b.useState(null),[$,fe]=b.useState(null),[be,ve]=b.useState(!1),[T,I]=b.useState(!1),O=b.useRef(null),F=b.useRef("fit"),[X,pe]=b.useState({}),[J,re]=b.useState({}),[ye,_e]=b.useState(!1),{isInputFocused:$e}=Ax(),ee=o>=0?r[o]??r[0]??null:null,Ve=ee?.filename??ee?.file?.name??ee?.alt??ee?.src??"",Ne=!!(ee?.mediaType==="video"||ee?.file?.type==="video"||Ve&&ja(Ve)),Ce=ee?.file?.id??null,tt=Ce?X[Ce]:void 0,Qe=ee?.metadata??(tt===void 0?void 0:tt),we=G5(ee?.durationSeconds),xe=ee?.filename||ee?.alt||"Output",Ee=T&&!be,Ae=m,ft=M+10,ut=Ce?!!J[Ce]:!1,Ze=b.useCallback(()=>{ve(!1),O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{ve(!0)},3e3)},[]),Se=b.useCallback(()=>{Ze(),I(Me=>!Me)},[Ze]),Le=b.useCallback(()=>{!ee||!d||(Ze(),d(ee))},[ee,d,Ze]),Xe=b.useCallback(()=>{!ee||!p||(Ze(),p(ee))},[ee,p,Ze]),We=b.useCallback(()=>{!ee||!h||(Ze(),h(ee))},[ee,h,Ze]);b.useEffect(()=>(l?queueMicrotask(Ze):O.current&&clearTimeout(O.current),()=>{O.current&&clearTimeout(O.current)}),[l,Ze]),b.useLayoutEffect(()=>{l&&(R(N),B(k),U.current=N,G.current=k,W.current=null,K.current=null,ge.current=null,ae.current=null,F.current="fit")},[l,o,N,k]),b.useEffect(()=>{L.current=null,D(null),_e(!1)},[ee?.src]),b.useEffect(()=>{if(l)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[l]),b.useEffect(()=>{l&&S&&S(_,A)},[l,_,A,S]),b.useEffect(()=>{if(!l)return;const Me=ze=>{ze.key==="Escape"&&i()};return document.addEventListener("keydown",Me),()=>document.removeEventListener("keydown",Me)},[l,i]),b.useEffect(()=>{if(!l||!m||!ee?.file||ee.metadata||!Ce||Qe!==void 0||ut)return;const Me=Ce.startsWith("input/")?"input":"output",ze=Ce.startsWith(`${Me}/`)?Ce.slice(Me.length+1):Ce;re(V=>({...V,[Ce]:!0})),w1(ze,Me).then(V=>{const ce=V?.prompt?vf(V.prompt):null,ue=ce&&Object.keys(ce).length>0?ce:null;pe(ke=>({...ke,[Ce]:ue}))}).catch(()=>{pe(V=>({...V,[Ce]:null}))}).finally(()=>{re(V=>({...V,[Ce]:!1}))})},[l,m,ee,Ce,Qe,ut]);const Pe=b.useMemo(()=>!le||!$?null:$.height/le.height,[le,$]),Ge=b.useMemo(()=>Pe===null?1:Math.min(1,Pe),[Pe]),Nt=b.useMemo(()=>Pe===null?1:Math.max(1,Pe),[Pe]),oe=(Me=_,ze=le)=>{if(!ze||!$)return{x:0,y:0};const V=ze.width*Me,ce=ze.height*Me;return{x:V<$.width?($.width-V)/2:0,y:ce<$.height?($.height-ce)/2:0}},et=b.useCallback((Me,ze=_)=>{if(!le||!$)return Me;const V=$.width,ce=$.height,ue=le.width*ze,ke=le.height*ze,Ie=ue<=V?0:Math.max(V-ue,Math.min(0,Me.x)),Ye=ke<=ce?0:Math.max(ce-ke,Math.min(0,Me.y));return{x:Ie,y:Ye}},[le,$,_]),rt=b.useRef(et),jt=b.useCallback(Me=>{let ze=Ge;if(Me==="cover"?ze=Nt:ze=Ge,F.current=Me,U.current=ze,R(ze),!le||!$)G.current={x:0,y:0},B({x:0,y:0});else{const V=le.width*ze,ce=le.height*ze,ue={x:($.width-V)/2,y:($.height-ce)/2},ke=et(ue,ze);G.current=ke,B(ke)}},[le,et,$,Nt,Ge]),Vt=b.useRef(jt);b.useEffect(()=>{rt.current=et},[et]),b.useEffect(()=>{Vt.current=jt},[jt]);const $n=Me=>{const ze=Me.currentTarget;L.current={width:ze.naturalWidth,height:ze.naturalHeight};const V=j.current;if(!V||ze.naturalWidth===0)return;const ce=V.clientWidth,ue=V.clientHeight,ke=ce/ze.naturalWidth;D({width:ce,height:ze.naturalHeight*ke}),fe({width:ce,height:ue})};b.useEffect(()=>{if(Ne||!l)return;const Me=E.current,ze=j.current;if(!Me||!ze)return;const V=()=>{const ue=L.current,ke=ze.clientWidth,Ie=ze.clientHeight;if(fe({width:ke,height:Ie}),!ue||ue.width===0)return;const Ye=ke/ue.width,Re=ue.height*Ye;D({width:ke,height:Re});const ot=rt.current(G.current);G.current=ot,B(ot)};V();const ce=new ResizeObserver(V);return ce.observe(ze),()=>ce.disconnect()},[l,ee?.src,Ne]),b.useEffect(()=>{Ne||!l||!le||!$||Vt.current(F.current)},[l,ee?.src,le,$,Ne]),b.useEffect(()=>{l&&w!==void 0&&Vt.current(F.current)},[l,w]);const fl=()=>{Ze(),o>0&&s(o-1)},ol=()=>{Ze(),o<r.length-1&&s(o+1)},An=()=>{const Me=E.current;if(!Me)return;const ze=U.current,V=G.current,ce=oe(ze);Me.style.transform=`translate3d(${ce.x+V.x}px, ${ce.y+V.y}px, 0) scale(${ze})`},rn=Me=>{if(Ne){const V=z.current;if(V&&Me.target===V){const ce=V.getBoundingClientRect();if(Me.clientY>ce.bottom-60)return}}Me.currentTarget.setPointerCapture(Me.pointerId);const ze=jd(j.current);if(ze.set(Me.pointerId,{x:Me.clientX,y:Me.clientY}),ze.size===1){if(K.current={x:Me.clientX,y:Me.clientY,time:Date.now()},!Ne){W.current={x:Me.clientX-G.current.x,y:Me.clientY-G.current.y};const V=E.current;V&&(V.style.transition="none")}}else if(ze.size===2&&!Ne){const[V,ce]=Array.from(ze.values()),ue=Math.hypot(ce.x-V.x,ce.y-V.y),ke=(V.x+ce.x)/2,Ie=(V.y+ce.y)/2,Ye=j.current?.getBoundingClientRect(),Re=U.current,ot=G.current,pt=oe(Re),gt=Ye?{x:(ke-Ye.left-pt.x-ot.x)/Re,y:(Ie-Ye.top-pt.y-ot.y)/Re}:void 0;ge.current={distance:ue,scale:Re,centerX:ke,centerY:Ie,imagePoint:gt}}},an=Me=>{const ze=jd(j.current);if(ze.has(Me.pointerId)){if(ze.set(Me.pointerId,{x:Me.clientX,y:Me.clientY}),ze.size===2&&ge.current&&!Ne){const V=ge.current,[ce,ue]=Array.from(ze.values()),ke=Math.hypot(ue.x-ce.x,ue.y-ce.y),Ye=Math.max(Ge,Math.min(5,V.scale*(ke/V.distance)));U.current=Ye;const Re=j.current?.getBoundingClientRect(),ot=(ce.x+ue.x)/2,pt=(ce.y+ue.y)/2;if(Re&&V.imagePoint){const gt=oe(Ye),xt={x:ot-Re.left-gt.x-V.imagePoint.x*Ye,y:pt-Re.top-gt.y-V.imagePoint.y*Ye};G.current=et(xt,Ye)}else G.current=et(G.current,Ye);An();return}if(ze.size===1&&!Ne){const V=U.current;(V>1||le&&j.current&&le.height*V>j.current.clientHeight+1)&&W.current&&(G.current=et({x:Me.clientX-W.current.x,y:Me.clientY-W.current.y},V),An())}}},on=Me=>{const ze=jd(j.current);if(ze.delete(Me.pointerId),ze.size<2){if(ze.size===1&&ge.current){const[V]=Array.from(ze.values());W.current={x:V.x-G.current.x,y:V.y-G.current.y}}ge.current=null}if(ze.size===0){const V=E.current;V&&(V.style.transition="transform 0.05s linear");const ce=Date.now(),ue=ae.current,ke=ue?Me.clientX-ue.x:0,Ie=ue?Me.clientY-ue.y:0,Ye=!!(ue&&ce-ue.time<300&&Math.hypot(ke,Ie)<24);if(!Ne&&Ye){ae.current=null;const Re=F.current;jt(Re==="fit"?"cover":"fit"),Ze()}else{ae.current={time:ce,x:Me.clientX,y:Me.clientY};const Re=K.current;if(!$e&&Re){const ot=Me.clientX-Re.x,pt=Me.clientY-Re.y,gt=Date.now()-Re.time,xt=Math.abs(ot),vt=Math.abs(pt),yt=U.current,Dt=Math.abs(yt-Ge)<.05||Math.abs(yt-Nt)<.05,qt=gt<250&&xt<10&&vt<10;gt<=350&&xt>60&&xt>vt&&Dt?ot<0?o<r.length-1&&s(o+1):ot>0&&o>0&&s(o-1):qt&&Ze()}R(U.current),B(G.current)}W.current=null}},Rn=Me=>{if(Ne||!Me.ctrlKey)return;Me.preventDefault();const ze=-Me.deltaY*.005,V=Math.max(Ge,Math.min(5,U.current+ze));U.current=V,R(V);const ce=et(G.current,V);G.current=ce,B(ce)};return l?!ee&&!g?rl.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[2000] bg-black flex flex-col items-center justify-center text-white",role:"dialog","aria-modal":"true",children:[u.jsx("button",{className:"absolute top-4 right-4 z-[2010] w-10 h-10 rounded-full bg-black/60 text-white text-xl flex items-center justify-center",onClick:i,"aria-label":"Close viewer",children:""}),u.jsx("p",{className:"text-gray-400 mb-2",children:"No images to display"}),u.jsxs("p",{className:"text-gray-500 text-sm",children:["images: ",r.length,", index: ",o]})]}),document.body):rl.createPortal(u.jsxs("div",{id:"media-viewer-overlay",className:"fixed inset-0 bg-black",style:{zIndex:M},onWheel:Rn,children:[u.jsx("div",{ref:j,className:`absolute inset-x-0 top-0 overflow-hidden ${Ne?"":"touch-none"}`,style:{overscrollBehavior:"contain",height:"calc(100vh - var(--bottom-bar-offset, 0px))",zIndex:1},onPointerDown:rn,onPointerMove:an,onPointerUp:on,onPointerCancel:on,children:g?u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-gray-600 border-t-white rounded-full animate-spin"}),u.jsx("div",{className:"mt-4 w-48 h-2 rounded-full bg-gray-700 overflow-hidden",children:u.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,x))}%`}})}),u.jsx("div",{className:"mt-2 text-sm text-gray-300",children:y??`${Math.min(100,Math.max(0,x))}%`})]}):ee&&u.jsx(u.Fragment,{children:Ne?u.jsxs(u.Fragment,{children:[u.jsx("video",{ref:z,src:ee.src,controls:!0,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-contain select-none",onDragStart:Me=>Me.preventDefault(),onError:()=>_e(!0)}),ye&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-sm bg-black/60",children:"Unable to play this video."})]}):u.jsx("img",{ref:E,src:ee.src,alt:ee.alt||"Generation",className:"w-full h-auto block select-none relative",draggable:!1,onLoad:$n,style:{transform:`translate3d(${oe(_).x+A.x}px, ${oe(_).y+A.y}px, 0) scale(${_})`,transformOrigin:"top left",willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"}})})}),u.jsx("button",{onClick:i,className:`absolute top-3 right-3 w-9 h-9 rounded-full flex items-center justify-center transition-colors ${be?"bg-transparent text-white":"bg-black/60 text-white"}`,style:{zIndex:ft},"aria-label":"Close viewer",children:u.jsx(Ho,{className:"w-6 h-6"})}),u.jsx("div",{className:`absolute inset-0 pointer-events-none transition-opacity duration-300 ${be?"opacity-0":"opacity-100"}`,style:{zIndex:ft},children:ee&&u.jsxs(u.Fragment,{children:[u.jsx(I5,{index:o,total:r.length,displayName:xe}),u.jsx(B5,{index:o,total:r.length,onPrev:fl,onNext:ol}),u.jsx(H5,{isVideo:Ne,onDelete:d,onLoadWorkflow:p,onLoadInWorkflow:h,showMetadataToggle:m,canToggleMetadata:Ae,onDeleteClick:Le,onLoadWorkflowClick:Xe,onLoadInWorkflowClick:We,onToggleMetadata:Se}),u.jsx(V5,{isVideo:Ne,showMetadataToggle:m,showMetadataOverlay:Ee,metadataIsLoading:ut,metadata:Qe,durationLabel:we})]})})]}),document.body):null}function jd(l){const r=l;return r?(r.__activePointers||(r.__activePointers=new Map),r.__activePointers):new Map}function G5(l){const r=l===void 0||Number.isNaN(l)?0:l;return r===0?"":r<10?`${r.toFixed(1)}s`:`${Math.round(r)}s`}function Dx({file:l,onCancel:r,onConfirm:o}){return l?u.jsx("div",{id:"outputs-load-workflow-confirm-overlay",className:"fixed inset-0 z-[2200] bg-black/50 flex items-center justify-center p-4",onClick:r,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-load-workflow-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:s=>s.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Unsaved changes"}),u.jsx("div",{className:"text-gray-600 text-sm mt-1",children:"Are you sure you want to load this workflow? You have unsaved changes."}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:r,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:()=>o(l),children:"Continue"})]})]})}):null}function Bi(l){return l.id.startsWith("input/")?"input":"output"}function Bo(l,r){const s=`${r??Bi(l)}/`;return l.id.startsWith(s)?l.id.slice(s.length):l.id}function q5(l){return`output-${l.replace(/[\\/]/g,"_")}.json`}async function zx(l){const{file:r,source:o,loadWorkflow:s,onLoaded:i,onError:d}=l;try{const p=o??Bi(r),h=Bo(r,p),m=await b1(h,p);s(m,q5(h),{source:{type:"other"}}),i?.()}catch(p){throw d?.(p),p}}function W5(l){const{workflow:r,nodeTypes:o,nodeId:s}=l;if(!r||!o)return null;const i=r.nodes.find(p=>p.id===s);if(!i)return null;const d=["image","filename","file"];for(const p of d){const h=yr(r,o,i,p);if(h!==null)return{node:i,index:h,name:p}}return null}function g0(l,r){const o=l.title,s=typeof o=="string"&&o.trim()?o.trim():null,i=r?.[l.type];return s||i?.display_name||l.type}function F5(l){const r=l.replace(/^\/+/,""),o=r.split("/").filter(Boolean);return o.length<=1?{filename:r,subfolder:""}:{filename:o.pop()??r,subfolder:o.join("/")}}async function $5(l,r){if(r==="input")return Bo(l,r);const o=Bo(l,r),{filename:s,subfolder:i}=F5(o),d=l.fullUrl||qn(s,i,r),p=await fetch(d);if(!p.ok)throw new Error("Failed to fetch image data.");const h=await p.blob(),m=s||l.name||"image.png",g=new File([h],m,{type:h.type||"image/png"}),x=await k0(g,{type:"input",overwrite:!0}),y=x.subfolder?`${x.subfolder}/${x.name}`:x.name;if(!(await fetch(qn(x.name,x.subfolder??"","input"))).ok)throw new Error("Uploaded image was not found in inputs.");return y}function Ix({open:l,file:r,source:o,onClose:s,onLoaded:i}){const d=ne(E=>E.workflow),p=ne(E=>E.nodeTypes),h=ne(E=>E.setNodeTypes),m=ne(E=>E.updateNodeWidget),g=Zt(E=>E.clearNodeError),x=ne(E=>E.scrollToNode),y=_n(E=>E.setCurrentPanel),[N,k]=b.useState(null),[S,w]=b.useState(null),M=b.useMemo(()=>d?d.nodes.filter(E=>/loadimage/i.test(E.type)):[],[d]);b.useEffect(()=>{l||(k(null),w(null))},[l]);const j=async E=>{if(!(!r||!d)){w(E),k(null);try{const z=W5({workflow:d,nodeTypes:p,nodeId:E});if(!z)throw new Error("Selected node does not accept image inputs.");const L=await $5(r,o);if(o!=="input")try{const _=await S0();h(_)}catch(_){console.warn("Failed to refresh node types after upload:",_)}m(z.node.id,z.index,L,z.name),g(z.node.id),y("workflow"),i?.(),setTimeout(()=>{x(z.node.id,g0(z.node,p))},150)}catch(z){console.error("Failed to load image into node:",z),k(z instanceof Error?z.message:"Failed to load image.")}finally{w(null)}}};return!l||!r?null:u.jsx("div",{id:"outputs-load-node-overlay",className:"fixed inset-0 z-[2150] bg-black/50 flex items-center justify-center p-4",onClick:s,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-load-node-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:E=>E.stopPropagation(),children:[u.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:"Load image into node"}),u.jsx("div",{className:"px-4 pt-3 text-xs text-gray-500",children:r.name}),u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[M.length===0&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"No Load Image nodes found in the current workflow."}),M.map(E=>{const z=g0(E,p),L=S===E.id;return u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed",onClick:()=>j(E.id),disabled:S!==null,children:[u.jsxs("span",{className:"text-gray-500 dark:text-gray-300",children:["#",E.id]}),u.jsx("span",{className:"flex-1 text-gray-900 dark:text-gray-100 truncate",children:z}),L&&u.jsx("span",{className:"text-xs text-gray-400",children:"Loading"})]},`load-node-${E.id}`)})]}),N&&u.jsx("div",{className:"px-4 py-2 text-xs text-red-600 border-t border-gray-100",children:N}),u.jsx("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end",children:u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg disabled:opacity-60",onClick:s,disabled:S!==null,children:"Close"})})]})})}function Y5({file:l,onCancel:r,onConfirm:o}){return u.jsx("div",{id:"viewer-delete-confirm-overlay",className:"fixed inset-0 z-[2200] bg-black/50 flex items-center justify-center p-4",onClick:r,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"viewer-delete-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:s=>s.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Delete file?"}),u.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:['This will permanently delete "',l.name,'" from the server. This cannot be undone.']}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:r,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:o,children:"Delete"})]})]})})}function Q5({onClose:l}){const r=ll(J=>J.viewerOpen),o=ll(J=>J.viewerImages),s=ll(J=>J.viewerIndex),i=ll(J=>J.viewerScale),d=ll(J=>J.viewerTranslate),p=ne(J=>J.followQueue),h=ll(J=>J.setViewerState),m=ne(J=>J.workflow),g=ne(J=>J.originalWorkflow),x=ne(J=>J.workflowDurationStats),y=ne(J=>J.isExecuting),N=ne(J=>J.executingPromptId),k=_n(J=>J.setCurrentPanel),S=ne(J=>J.loadWorkflow),w=lt(J=>J.running),M=Tn(J=>J.history),[j,E]=b.useState(null),[z,L]=b.useState(null),[_,R]=b.useState(null),[A,B]=b.useState(!1),U=b.useRef(null),G=b.useMemo(()=>!!(m&&g&&JSON.stringify(m)!==JSON.stringify(g)),[m,g]),W=b.useMemo(()=>!r||!p?null:M[0]?.prompt_id??null,[r,p,M]),K=N||(w.length===1?w[0].prompt_id:null),ge=Go({workflow:m,runKey:K,isRunning:y||w.length>0,workflowDurationStats:x}),ae=y||w.length>0,le=Math.min(100,Math.max(0,ge??0)),$=!(s>=0?o[s]??o[0]??null:null)&&(p||ae)||s<0&&ae;b.useEffect(()=>{if(!r||!p){U.current=null;return}!U.current&&M[0]?.prompt_id&&(U.current=M[0]?.prompt_id??null)},[r,p,M]),b.useEffect(()=>{if(!r||!p||M.length===0)return;const J=M[0];if(U.current===J.prompt_id||J.outputs.images.filter(_e=>_e.type==="output").length===0)return;const ye=yf(M,{onlyOutput:!0,alt:"Generation"});ye.length!==0&&(U.current=J.prompt_id,h({viewerImages:ye,viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}}))},[r,p,M,h]);const fe=J=>{h({viewerIndex:J})},be=(J,re)=>{h({viewerScale:J,viewerTranslate:re})},ve=J=>{J.file&&E(J.file)},T=async()=>{if(!j)return;const J=j;try{const re=Bo(J);await Ed(re,Bi(J));const ye=o.filter(ee=>ee.file?.id!==J.id),_e=o.findIndex(ee=>ee.file?.id===J.id),$e=ye.length===0?0:_e<0?s:_e<s?s-1:_e===s?Math.min(s,ye.length-1):s;h({viewerImages:ye,viewerIndex:$e}),ye.length===0&&l()}catch(re){console.error("Failed to delete file:",re),window.alert("Failed to delete file.")}finally{E(null)}},I=J=>{if(J.file){if(G){L(J.file);return}O(J.file)}},O=async J=>{try{await zx({file:J,loadWorkflow:S,onLoaded:()=>{l(),queueMicrotask(()=>k("workflow"))}})}catch(re){console.error("Failed to load workflow from file:",re),window.alert("Failed to load workflow from file.")}finally{L(null)}},F=J=>{!J.file||J.file.type!=="image"||(R(J.file),B(!0))},X=()=>{B(!1),R(null)},pe=()=>{X(),l(),queueMicrotask(()=>k("workflow"))};return r?u.jsxs(u.Fragment,{children:[u.jsx(Rx,{open:r,items:o,index:s,onIndexChange:fe,onClose:l,onDelete:ve,onLoadWorkflow:I,onLoadInWorkflow:F,showMetadataToggle:!0,showLoadingPlaceholder:$,loadingProgress:le,loadingLabel:ae?`${le}%`:"Waiting for output",initialScale:i,initialTranslate:d,onTransformChange:be,zoomResetKey:W,overlayZIndex:2100}),u.jsx(Dx,{file:z,onCancel:()=>L(null),onConfirm:O}),u.jsx(Ix,{open:A,file:_,source:_?Bi(_):"output",onClose:X,onLoaded:pe}),j&&u.jsx(Y5,{file:j,onCancel:()=>E(null),onConfirm:T})]}):null}function X5(){const[l,r]=b.useState(!1),o=b.useRef(null),s=b.useRef(null),i=b.useRef({}),d=b.useRef({setExecutionState:ne.getState().setExecutionState,setNodeOutput:ne.getState().setNodeOutput,clearNodeOutputs:ne.getState().clearNodeOutputs,addPromptOutputs:ne.getState().addPromptOutputs,clearPromptOutputs:ne.getState().clearPromptOutputs,applyControlAfterGenerate:ne.getState().applyControlAfterGenerate,updateFromStatus:lt.getState().updateFromStatus,fetchQueue:lt.getState().fetchQueue,addHistoryEntry:Tn.getState().addHistoryEntry,fetchHistory:Tn.getState().fetchHistory});b.useEffect(()=>{d.current={setExecutionState:ne.getState().setExecutionState,setNodeOutput:ne.getState().setNodeOutput,clearNodeOutputs:ne.getState().clearNodeOutputs,addPromptOutputs:ne.getState().addPromptOutputs,clearPromptOutputs:ne.getState().clearPromptOutputs,applyControlAfterGenerate:ne.getState().applyControlAfterGenerate,updateFromStatus:lt.getState().updateFromStatus,fetchQueue:lt.getState().fetchQueue,addHistoryEntry:Tn.getState().addHistoryEntry,fetchHistory:Tn.getState().fetchHistory}},[]);const p=b.useRef(null);return b.useEffect(()=>{const h=x=>{const{setExecutionState:y,setNodeOutput:N,addPromptOutputs:k,clearPromptOutputs:S,updateFromStatus:w,fetchQueue:M,addHistoryEntry:j,fetchHistory:E}=d.current,z=x;switch(z.type){case"status":{const _=z.data.status.exec_info.queue_remaining;w(_),_===0&&y(!1,null,null,0);break}case"progress":{const L=z,{value:_,max:R,node:A,prompt_id:B}=L.data,U=Math.round(_/R*100);y(!0,A||null,B||null,U);break}case"executing":{const L=z,_=L.data.node,R=L.data.prompt_id;if(_===null){if(y(!1,null,null,0),d.current.applyControlAfterGenerate(),R){const A=lt.getState().running.find(U=>U.prompt_id===R),B=i.current[R]||[];A&&j({prompt_id:R,timestamp:Date.now(),outputs:{images:B},prompt:A.prompt}),delete i.current[R],S(R)}M(),E()}else{R&&R!==p.current&&(p.current=R),y(!0,_,R||null,0);const A=lt.getState();R&&!A.running.some(B=>B.prompt_id===R)&&M()}break}case"executed":{const L=z,{node:_,prompt_id:R,output:A}=L.data;A.images&&(i.current[R]||(i.current[R]=[]),i.current[R].push(...A.images),k(R,A.images),N(_,A.images));break}case"execution_error":{y(!1,null,null,0),S(),M(),E();break}}},m=()=>{o.current?.readyState!==WebSocket.OPEN&&(o.current=v1(w0,h,async()=>{r(!0);const{fetchQueue:x,fetchHistory:y,setExecutionState:N}=d.current;await x(),y();const k=lt.getState(),S=ne.getState();if(k.running.length>0&&!S.executingPromptId){const w=k.running[0];N(!0,null,w.prompt_id,0)}},()=>{r(!1),s.current=setTimeout(m,2e3)},()=>{r(!1)}))};m();const g=setInterval(()=>{const{fetchQueue:x,fetchHistory:y}=d.current;lt.getState().running.length>0&&(x(),y())},2e3);return()=>{s.current&&clearTimeout(s.current),o.current&&o.current.close(),clearInterval(g)}},[]),{isConnected:l}}function P5({onSwipeLeft:l,onSwipeRight:r,onSwipeUp:o,onSwipeDown:s,enabled:i=!0,threshold:d=50,preventScroll:p=!0,deferResetOnSwipe:h=!1,deferResetDurationMs:m=350}){const[g,x]=b.useState(0),[y,N]=b.useState(!1),[k,S]=b.useState(i),w=b.useRef(null),M=b.useRef(null);b.useEffect(()=>{S(i)},[i]);const j=b.useCallback(()=>{w.current=null,N(!1),x(0)},[]),E=b.useCallback(z=>{S(z)},[]);return b.useEffect(()=>{if(!k)return;const z=A=>{if(!(A instanceof HTMLElement))return!1;if(A.isContentEditable)return!0;const B=A.tagName.toLowerCase();return B==="input"||B==="textarea"||B==="select"},L=A=>{if(z(A.target)||z(document.activeElement))return;M.current!==null&&(window.clearTimeout(M.current),M.current=null);const B=A.touches[0];w.current={startX:B.clientX,startY:B.clientY,currentX:B.clientX,currentY:B.clientY,isHorizontal:null,isTracking:!0}},_=A=>{const B=w.current;if(!B?.isTracking)return;const U=A.touches[0],G=U.clientX-B.startX,W=U.clientY-B.startY;if(B.isHorizontal===null){if(Math.abs(G)>20||Math.abs(W)>20){const K=Math.abs(G)>Math.abs(W);B.isHorizontal=K,K?(G>0?!!r:!!l)?N(!0):B.isTracking=!1:(W>0?s:o)||(B.isTracking=!1)}return}B.isHorizontal?(p&&A.cancelable&&A.preventDefault(),B.currentX=U.clientX,x(U.clientX-B.startX)):B.currentY=U.clientY},R=()=>{const A=w.current;if(!A?.isTracking){j();return}const B=A.currentX-A.startX,U=A.currentY-A.startY,G=d||window.innerWidth*.25;let W=!1;A.isHorizontal===!0?B<-G&&l?(l(),W=!0):B>G&&r&&(r(),W=!0):A.isHorizontal===!1&&(U<-G&&o?(o(),W=!0):U>G&&s&&(s(),W=!0)),W?h?(w.current=null,N(!1),M.current!==null&&window.clearTimeout(M.current),M.current=window.setTimeout(()=>{j(),M.current=null},m)):requestAnimationFrame(()=>{j()}):j()};return document.addEventListener("touchstart",L,{passive:!0}),document.addEventListener("touchmove",_,{passive:!1}),document.addEventListener("touchend",R,{passive:!0}),document.addEventListener("touchcancel",R,{passive:!0}),()=>{document.removeEventListener("touchstart",L),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",R),document.removeEventListener("touchcancel",R),M.current!==null&&(window.clearTimeout(M.current),M.current=null),j()}},[k,l,r,o,s,d,p,h,m,j]),{swipeOffset:g,isSwiping:y,setSwipeEnabled:E,resetSwipeState:j}}function Z5({open:l,onClose:r,filter:o,sort:s,onChangeFilter:i,onChangeSort:d}){if(!l)return null;const p=s?.mode||"modified",h=p.includes("name")?"name":p.includes("size")?"size":"date",m=(()=>{const x=p.endsWith("reverse");return h==="date"?x?"asc":"desc":x?"desc":"asc"})(),g=(x,y)=>{let N;x==="name"?N=y==="asc"?"name":"name-reverse":x==="size"?N=y==="asc"?"size":"size-reverse":N=y==="desc"?"modified":"modified-reverse",d({mode:N})};return u.jsx("div",{id:"filter-modal-root",className:"fixed inset-0 z-[1600] bg-black/50 flex items-center justify-center p-4",onClick:r,children:u.jsxs("div",{id:"filter-modal-content",className:"bg-white rounded-xl shadow-lg w-full max-w-sm max-h-[90vh] overflow-y-auto",onClick:x=>x.stopPropagation(),children:[u.jsxs("div",{id:"filter-modal-header",className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[u.jsx("h3",{id:"filter-modal-title",className:"font-semibold text-gray-900",children:"Filter & Sort"}),u.jsx("button",{onClick:r,children:u.jsx(Ho,{className:"w-6 h-6 text-gray-500"})})]}),u.jsxs("div",{id:"filter-modal-body",className:"p-4 space-y-6",children:[u.jsxs("div",{id:"sort-group-container",children:[u.jsx("h4",{id:"sort-group-label",className:"text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),u.jsx("div",{id:"sort-options-grid",className:"grid grid-cols-2 gap-2",children:["name","date","size"].map(x=>{const y=h===x,N=y?m==="asc"?"desc":"asc":x==="name"?"asc":"desc";return u.jsxs("button",{className:`sort-option-button px-3 py-2 rounded-lg text-sm border ${y?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,onClick:()=>g(x,N),children:[x==="name"?"Name":x==="size"?"Size":"Date",y&&(m==="asc"?" ":" ")]},x)})})]}),u.jsxs("div",{id:"filter-type-group-container",children:[u.jsx("h4",{id:"filter-type-label",className:"text-sm font-medium text-gray-700 mb-2",children:"File Type"}),u.jsx("div",{id:"filter-type-options",className:"flex gap-2",children:["all","image","video"].map(x=>u.jsx("button",{className:`filter-type-button flex-1 px-3 py-2 rounded-lg text-sm border ${o.type===x?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,onClick:()=>i({type:x}),children:x.charAt(0).toUpperCase()+x.slice(1)},x))})]}),u.jsxs("div",{id:"search-input-container",children:[u.jsx("label",{id:"search-input-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),u.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Search by filename...",value:o.search,onChange:x=>i({search:x.target.value})})]}),u.jsxs("div",{id:"favorites-toggle-container",className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"favOnly",checked:o.favoritesOnly,onChange:x=>i({favoritesOnly:x.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500"}),u.jsx("label",{htmlFor:"favOnly",className:"text-sm text-gray-700",children:"Show Favorites Only"})]})]}),u.jsx("div",{id:"filter-modal-footer",className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-end",children:u.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",onClick:r,children:"Apply"})})]})})}const x0="outputs-folders-collapsed",K5=1440*60*1e3;function J5(l){if(!l)return"Unknown date";const r=new Date,o=new Date(r.getFullYear(),r.getMonth(),r.getDate()),s=new Date(l),i=new Date(s.getFullYear(),s.getMonth(),s.getDate()),d=Math.round((o.getTime()-i.getTime())/K5);return d===0?"Today":d===1?"Yesterday":s.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function Cd({file:l,viewMode:r,selectionMode:o,isSelected:s,isFavorited:i,onNavigateFolder:d,onOpen:p,onMenu:h,onToggleSelection:m}){const g=l.type==="folder",[x,y]=b.useState(!1);b.useEffect(()=>{y(!1)},[l.previewUrl,l.id]);const N=()=>{o?m(l.id):g?d(l.name):p(l)},k=S=>{S.stopPropagation(),h(l,S)};return r==="list"?u.jsxs("div",{className:`file-card-list-item flex items-center gap-3 p-2 hover:bg-gray-50 border-b border-gray-100 last:border-0 ${s?"bg-blue-50":""}`,onClick:N,children:[o&&u.jsx("div",{className:`selection-checkbox w-5 h-5 rounded border flex items-center justify-center flex-shrink-0 ${s?"bg-blue-600 border-blue-600 text-white":"border-gray-300 bg-white"}`,children:s&&u.jsx(Hr,{className:"w-3.5 h-3.5"})}),u.jsx("div",{className:`file-preview-container w-10 h-10 flex-shrink-0 flex items-center justify-center rounded text-gray-500 overflow-hidden relative ${g?"":"bg-gray-100"}`,children:g?u.jsx(Vl,{className:"w-6 h-6 text-amber-500"}):l.previewUrl&&!x?u.jsx("img",{src:l.previewUrl,className:"w-full h-full object-cover",loading:"lazy",onError:()=>y(!0)}):l.type==="video"?u.jsx(bg,{className:"w-5 h-5 text-gray-500"}):u.jsx("span",{className:"text-xs font-bold",children:"IMG"})}),u.jsx("div",{className:"file-info-container flex-1 min-w-0",children:u.jsx("div",{className:"file-name text-sm font-medium text-gray-900 truncate",children:l.name})}),u.jsxs("div",{className:"file-actions-container flex items-center gap-2",children:[i&&u.jsx(Vr,{className:"w-4 h-4 text-yellow-500"}),u.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-700",onClick:k,children:u.jsx(br,{className:"w-5 h-5 -rotate-90"})})]})]}):u.jsxs("div",{className:"file-card-grid-item flex flex-col gap-1",children:[u.jsxs("div",{className:`relative aspect-square bg-gray-100 rounded-lg overflow-hidden transition-all ${s?"ring-4 ring-blue-500 ring-offset-2":""}`,onClick:N,children:[g?u.jsx("div",{className:"folder-grid-content w-full h-full flex flex-col items-center justify-center text-gray-500",children:u.jsx(Vl,{className:"w-12 h-12 mb-2 text-amber-500"})}):l.previewUrl&&!x?u.jsx("img",{src:l.previewUrl,className:"w-full h-full object-cover",loading:"lazy",onError:()=>y(!0)}):u.jsx("div",{className:"media-placeholder w-full h-full flex items-center justify-center bg-gray-800 text-white font-bold",children:l.type==="video"?u.jsx(bg,{className:"w-10 h-10 text-white/80"}):"IMG"}),o?u.jsx("div",{className:"selection-badge-container absolute top-2 left-2",children:u.jsx("div",{className:`selection-badge w-6 h-6 rounded-full border-2 flex items-center justify-center shadow-sm ${s?"bg-blue-600 border-blue-600 text-white":"border-white bg-black/20"}`,children:s&&u.jsx(Hr,{className:"w-4 h-4"})})}):u.jsxs("div",{className:"file-menu-trigger-container absolute top-1 right-1 flex flex-col items-center gap-1",children:[u.jsx("button",{className:"p-1 bg-gray-500/40 rounded-full text-white hover:bg-gray-500/60",onClick:k,children:u.jsx(br,{className:"w-4 h-4 -rotate-90"})}),i&&u.jsx(Vr,{className:"w-4 h-4 text-yellow-400 drop-shadow"})]}),l.type==="video"&&u.jsx("div",{className:"video-label absolute top-1 left-1 bg-black/50 px-1 rounded text-[10px] text-white",children:"VID"})]}),u.jsx("div",{className:"file-name text-xs text-gray-700 truncate px-1",children:l.name})]})}function e4({visible:l}){const{source:r,currentFolder:o,isLoading:s,viewMode:i,filter:d,sort:p,favorites:h,selectionMode:m,selectedIds:g,setCurrentFolder:x,navigateToPath:y,fetchFolders:N,fetchFiles:k,toggleFavorite:S,toggleSelection:w,getDisplayedFiles:M,refresh:j,selectIds:E,toggleSelectionMode:z,setFilter:L,setSort:_}=St(),R=St(Q=>Q.selectionActionOpen),A=St(Q=>Q.setSelectionActionOpen),B=St(Q=>Q.filterModalOpen),U=St(Q=>Q.setFilterModalOpen),G=St(Q=>Q.newFolderModalOpen),W=St(Q=>Q.setNewFolderModalOpen),K=St(Q=>Q.setOutputsViewerOpen),ge=St(Q=>Q.addFavorites),ae=St(Q=>Q.removeFavorites),le=St(Q=>Q.clearSelection),D=ne(Q=>Q.loadWorkflow),$=_n(Q=>Q.setCurrentPanel),fe=ne(Q=>Q.workflow),be=ne(Q=>Q.originalWorkflow),ve=b.useMemo(()=>!!(fe&&be&&JSON.stringify(fe)!==JSON.stringify(be)),[fe,be]),[T,I]=b.useState(null),[O,F]=b.useState(null),[X,pe]=b.useState(null),[J,re]=b.useState(null),[ye,_e]=b.useState(!1),[$e,ee]=b.useState(!1),[Ve,Ne]=b.useState(!1),[Ce,tt]=b.useState(null),[Qe,we]=b.useState([]),[xe,Ee]=b.useState(!1),[Ae,ft]=b.useState(""),[ut,Ze]=b.useState([]),[Se,Le]=b.useState(null),[Xe,We]=b.useState(""),[Pe,Ge]=b.useState(!1),[Nt,oe]=b.useState([]),[et,rt]=b.useState(0),jt=b.useRef(null),Vt=b.useRef(!1),[$n,fl]=b.useState(()=>localStorage.getItem(x0)==="true"),[ol,An]=b.useState({}),rn=b.useRef(null),an=b.useRef(null),on=b.useRef(!1),Rn=()=>{F(null),rn.current=null},Me=()=>{_e(!1),pe(null),an.current=null},ze=(Q,je)=>{rn.current=je?.onDeleted??null,F(Q)},V=(Q,je)=>{Q.type==="image"&&(an.current=je?.onLoaded??null,pe(Q),_e(!0))};Gi({open:!!T,onDismiss:()=>I(null),triggerRef:{current:null},contentRef:jt}),b.useEffect(()=>{Vt.current=!1},[r]),b.useEffect(()=>{l&&!Vt.current&&!s&&(Vt.current=!0,N(),k())},[l,N,k,s]),b.useEffect(()=>{!l&&Pe&&(Ge(!1),K(!1))},[l,Pe,K]),b.useEffect(()=>{!l&&B&&U(!1)},[l,B,U]);const ce=M(),ue=St(Q=>Q.sort.mode),ke=Q=>{const Oe=M().filter(mt=>(mt.type==="image"||mt.type==="video")&&mt.fullUrl),Et=Oe.map(mt=>({src:mt.fullUrl,alt:mt.name,mediaType:qo(mt.name),file:mt,filename:mt.name})),Qt=Oe.findIndex(mt=>mt.id===Q.id);Qt>=0&&(oe(Et),rt(Qt),Ge(!0),K(!0))},Ie=()=>{Ge(!1),K(!1)},Ye=Q=>{Q.file&&ze(Q.file,{onDeleted:je=>{oe(Oe=>{const Et=Oe.findIndex(mt=>mt.file?.id===je.id),Qt=Oe.filter(mt=>mt.file?.id!==je.id);return rt(mt=>Qt.length===0?0:Et===-1?mt:Et<mt?mt-1:Et===mt?Math.min(mt,Qt.length-1):mt),Qt.length===0&&(Ge(!1),K(!1)),Qt})}})},Re=Q=>{!Q.file||Q.file.type!=="image"||V(Q.file,{onLoaded:()=>{Ge(!1),K(!1)}})},ot=Q=>{Q.file&&bl(Q.file,{closeViewer:!0})},{folders:pt,nonFolders:gt}=b.useMemo(()=>{const Q=[],je=[];for(const Oe of ce)Oe.type==="folder"?Q.push(Oe):je.push(Oe);return{folders:Q,nonFolders:je}},[ce]),xt=ue.startsWith("name"),vt=ue.startsWith("size"),yt=d.favoritesOnly||!xt&&!vt,Dt=b.useMemo(()=>{if(xt){const je=[];for(const Oe of gt){const Et=Oe.name?.trim()?.charAt(0).toUpperCase()||"#",Qt=`Starting with ${Et}`,mt=je[je.length-1];mt&&mt.key===Et?mt.files.push(Oe):je.push({key:Et,label:Qt,files:[Oe]})}return je}if(vt){const je=[];for(const Oe of gt){const Qt=(Oe.size??0)/(1024*1024),mt=Qt<1?0:Math.round(Qt),Sl=mt===0?"<1MB":`${mt}MB`,Zo=mt===0?"<1MB":`${mt}MB`,Wr=je[je.length-1];Wr&&Wr.key===Sl?Wr.files.push(Oe):je.push({key:Sl,label:Zo,files:[Oe]})}return je}if(!yt)return[{key:"all",label:"All files",files:gt}];const Q=[];for(const je of gt){const Oe=je.date?new Date(je.date).toISOString().slice(0,10):"unknown",Et=J5(je.date),Qt=Q[Q.length-1];Qt&&Qt.key===Oe?Qt.files.push(je):Q.push({key:Oe,label:Et,files:[je]})}return Q},[gt,yt,xt,vt]),qt=()=>{const Q=!$n;fl(Q),localStorage.setItem(x0,String(Q))},Nn=Q=>{An(je=>({...je,[Q]:!je[Q]}))},se=Q=>{ke(Q)},Ke=(Q,je)=>{je.preventDefault();const Oe=Math.min(je.clientX,window.innerWidth-200),Et=Math.min(je.clientY,window.innerHeight-200);I({file:Q,x:Oe,y:Et})},Bt=()=>{T&&(S(T.file.id),I(null))},Ht=()=>{T&&(m||z(),E([T.file.id],"replace"),I(null))},cn=()=>{T&&T.file.type==="image"&&(pe(T.file),_e(!0),I(null))},fn=()=>{T&&(F(T.file),I(null))},Yn=()=>{g.length!==0&&(A(!1),ee(!0))},Ql=async(Q,je)=>{try{await zx({file:Q,source:r,loadWorkflow:D,onLoaded:()=>{$("workflow"),je?.closeViewer&&(Ge(!1),K(!1))}})}catch(Oe){console.error("Failed to load workflow from file:",Oe),window.alert("Failed to load workflow from file.")}},bl=(Q,je)=>{if(Q.type==="folder"){window.alert("Workflow metadata is not available for folders.");return}if(ve){on.current=!!je?.closeViewer,re(Q);return}Ql(Q,je)},Kt=()=>{if(!T)return;const Q=T.file;I(null),bl(Q,{closeViewer:!1})},Fo=async()=>{if(!J)return;const Q=J,je=on.current;on.current=!1,re(null),await Ql(Q,{closeViewer:je})},$o=()=>{on.current=!1,re(null)},wl=async()=>{if(!O)return;const Q=O;try{const je=Bo(O,r);await Ed(je,r),j(),rn.current?.(Q),rn.current=null}catch(je){console.error("Failed to delete file:",je),window.alert("Failed to delete file.")}finally{F(null)}},Xl=async()=>{if(g.length===0){ee(!1);return}try{const Q=`${r}/`,je=g.map(Oe=>Oe.startsWith(Q)?Oe.slice(Q.length):Oe);await Promise.all(je.map(Oe=>Ed(Oe,r))),j(),le()}catch(Q){console.error("Failed to delete selected files:",Q),window.alert("Failed to delete selected files.")}finally{ee(!1)}},Xi=()=>{if(g.length===0)return;g.every(je=>h.includes(je))?ae(g):ge(g),A(!1)},Yo=()=>{g.length!==0&&(A(!1),Ze([...g]),Le(o),tt(o),Ne(!0))},Qo=()=>{T&&(Ze([T.file.id]),Le(o),tt(o),Ne(!0),I(null))},Aa=()=>{Ne(!1),Ze([]),Le(null)},Gr=async()=>{if(ut.length!==0)try{const Q=`${r}/`,je=ut.map(Oe=>Oe.startsWith(Q)?Oe.slice(Q.length):Oe);await S1(je,Ce,r),j(),m&&(le(),z())}catch(Q){console.error("Failed to move selected files:",Q),window.alert("Failed to move selected files.")}finally{Aa()}},qr=async()=>{const Q=Ae.trim();if(!Q)return;const je=Ce?`${Ce}/${Q}`:Q;try{await mg(je,r),ft(""),Ee(!0);const Oe=await Od(r,1e3,0,"modified",!1,Ce);we(Oe.filter(Et=>Et.type==="folder"))}catch(Oe){console.error("Failed to create folder:",Oe),window.alert("Failed to create folder.")}finally{Ee(!1)}},Qn=async()=>{const Q=Xe.trim();if(!Q)return;const je=o?`${o}/${Q}`:Q;try{await mg(je,r),We(""),W(!1),j()}catch(Oe){console.error("Failed to create folder:",Oe),window.alert("Failed to create folder.")}},sn=b.useMemo(()=>{const je=[{name:r==="output"?"Outputs":"Inputs",path:null}];if(o){const Oe=o.split("/");Oe.forEach((Et,Qt)=>{je.push({name:Et,path:Oe.slice(0,Qt+1).join("/")})})}return je},[r,o]),Xo=()=>{const Q=sn.length,je=[];return Q<=3?sn.forEach((Oe,Et)=>{je.push({...Oe,isClickable:Et<Q-1})}):(je.push({...sn[0],isClickable:!0}),je.push({name:"...",path:sn[Q-3].path,isEllipsis:!0,isClickable:!0}),je.push({...sn[Q-2],isClickable:!0}),je.push({...sn[Q-1],isClickable:!1})),u.jsx("div",{id:"outputs-breadcrumb-trail",className:"flex items-center text-sm overflow-hidden whitespace-nowrap",children:je.map((Oe,Et)=>u.jsxs("div",{className:"flex items-center min-w-0",children:[Et>0&&u.jsx("span",{className:"mx-1.5 text-gray-400 shrink-0",children:"/"}),u.jsx("button",{onClick:()=>Oe.isClickable&&y(Oe.path),disabled:!Oe.isClickable,className:`
                truncate transition-colors
                ${Oe.isClickable?"text-blue-600 hover:text-blue-700 active:opacity-70":"text-gray-700 font-medium"}
                ${Oe.isEllipsis?"px-1 bg-gray-100 rounded":""}
              `,title:Oe.name,children:Oe.name})]},Et))})};b.useEffect(()=>{if(!Ve)return;let Q=!1;return(async()=>{Ee(!0);try{const Oe=await Od(r,1e3,0,"modified",!1,Ce);if(Q)return;we(Oe.filter(Et=>Et.type==="folder"))}catch(Oe){if(Q)return;console.error("Failed to load folders:",Oe),we([])}finally{Q||Ee(!1)}})(),()=>{Q=!0}},[Ve,Ce,r]),b.useEffect(()=>{R&&g.length===0&&A(!1)},[R,g.length,A]);const Pi=()=>{const Q=St.getState();Q.clearSelection(),Q.toggleSelectionMode()},Ra=()=>{if(!Ce)return;const Q=Ce.split("/");Q.pop(),tt(Q.length?Q.join("/"):null)},Po=Q=>()=>{tt(Ce?`${Ce}/${Q}`:Q)};return u.jsx("div",{id:"outputs-panel-wrapper",className:"absolute inset-x-0 top-[60px] bottom-0",style:{display:l?"block":"none"},children:u.jsxs("div",{id:"outputs-panel-root",className:"h-full bg-white flex flex-col pt-[4px] pb-[80px]",children:[u.jsx("div",{id:"outputs-panel-header",className:"px-4 py-3 flex flex-col gap-3 border-b border-gray-100",children:u.jsxs("div",{id:"outputs-header-top-row",className:"flex items-center justify-between min-h-[24px]",children:[Xo(),m&&u.jsxs("div",{className:"selection-status-container flex items-center gap-2 shrink-0 ml-2",children:[u.jsxs("span",{className:"text-[10px] font-bold text-blue-600 uppercase",children:[g.length," selected"]}),u.jsx("button",{onClick:Pi,className:"text-[10px] text-gray-500 underline uppercase font-bold",children:"Clear"})]})]})}),u.jsxs("div",{id:"outputs-content-container",className:"flex-1 overflow-y-auto p-4",children:[pt.length>0&&u.jsxs("div",{id:"outputs-folders-section",className:"mb-4",children:[u.jsxs("button",{onClick:qt,className:"flex items-center gap-2 w-full text-left mb-2 py-1 text-sm font-medium text-gray-600 hover:text-gray-900",children:[$n?u.jsx(Oi,{className:"w-4 h-4"}):u.jsx(ki,{className:"w-4 h-4"}),u.jsxs("span",{children:["Folders (",pt.length,")"]})]}),!$n&&u.jsx("div",{className:"flex flex-col border border-gray-200 rounded-lg overflow-hidden",children:pt.map(Q=>u.jsx(Cd,{file:Q,viewMode:"list",selectionMode:m,isSelected:g.includes(Q.id),isFavorited:h.includes(Q.id),onNavigateFolder:x,onOpen:se,onMenu:Ke,onToggleSelection:w},Q.id))})]}),u.jsx("div",{id:"outputs-files-section",className:"flex flex-col gap-4",children:Dt.map(Q=>u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center justify-between gap-3",children:[u.jsxs("button",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wide text-gray-500 hover:text-gray-800",onClick:()=>Nn(Q.key),children:[ol[Q.key]?u.jsx(Oi,{className:"w-3.5 h-3.5"}):u.jsx(ki,{className:"w-3.5 h-3.5"}),u.jsxs("span",{children:[Q.label," (",Q.files.length,")"]})]}),m&&u.jsx("button",{className:"text-[10px] font-bold uppercase text-blue-600 hover:text-blue-700",onClick:()=>E(Q.files.map(je=>je.id)),children:"Select all"})]}),!ol[Q.key]&&(i==="grid"?u.jsx("div",{className:"grid grid-cols-2 gap-4 auto-rows-min",children:Q.files.map(je=>u.jsx(Cd,{file:je,viewMode:i,selectionMode:m,isSelected:g.includes(je.id),isFavorited:h.includes(je.id),onNavigateFolder:x,onOpen:se,onMenu:Ke,onToggleSelection:w},je.id))}):u.jsx("div",{className:"flex flex-col",children:Q.files.map(je=>u.jsx(Cd,{file:je,viewMode:i,selectionMode:m,isSelected:g.includes(je.id),isFavorited:h.includes(je.id),onNavigateFolder:x,onOpen:se,onMenu:Ke,onToggleSelection:w},je.id))}))]},Q.key))}),s&&u.jsx("div",{id:"outputs-loading-indicator",className:"py-4 flex justify-center",children:u.jsx("span",{className:"text-gray-400 text-sm",children:"Loading..."})}),!s&&ce.length===0&&u.jsx("div",{id:"outputs-empty-message",className:"text-center text-gray-400 py-8",children:o?"No images in this folder":r==="output"?"No generated images yet":"No imported images"})]}),T&&u.jsxs(u.Fragment,{children:[u.jsx("div",{id:"outputs-context-menu-overlay",className:"fixed inset-0 z-[1690]",onClick:()=>I(null),onPointerDown:Q=>Q.stopPropagation()}),u.jsxs("div",{id:"outputs-context-menu",ref:jt,className:"fixed z-[1700] bg-white shadow-xl rounded-lg border border-gray-200 w-52 py-1",style:{top:T.y,left:T.x},onPointerDown:Q=>Q.stopPropagation(),onClick:Q=>Q.stopPropagation(),children:[u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Bt,children:[h.includes(T.file.id)?u.jsx(Vr,{className:"w-4 h-4"}):u.jsx(Mi,{className:"w-4 h-4"}),h.includes(T.file.id)?"Unfavorite":"Favorite"]}),u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Ht,children:[u.jsx(Hr,{className:"w-4 h-4 text-gray-500"}),"Select"]}),u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Qo,children:[u.jsx(Vl,{className:"w-4 h-4 text-gray-500"}),"Move"]}),T.file.type==="image"&&u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Kt,children:[u.jsx(_a,{className:"w-4 h-4 text-gray-500"}),"Load workflow"]}),T.file.type==="image"&&u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:cn,children:[u.jsx(L0,{className:"w-4 h-4 text-gray-500"}),"Use in workflow"]}),u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:fn,children:[u.jsx(Ul,{className:"w-4 h-4"}),"Delete"]})]})]}),R&&u.jsx("div",{id:"outputs-selection-actions",className:"fixed inset-0 z-[1800] bg-black/40 flex items-center justify-center p-4",onClick:()=>A(!1),role:"dialog","aria-modal":"true",children:u.jsxs("div",{className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:Q=>Q.stopPropagation(),children:[u.jsxs("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:[g.length," selected"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Xi,children:[g.every(Q=>h.includes(Q))?u.jsx(Mi,{className:"w-4 h-4"}):u.jsx(Vr,{className:"w-4 h-4"}),g.every(Q=>h.includes(Q))?"Unfavorite":"Favorite"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Yo,children:[u.jsx(Vl,{className:"w-4 h-4 text-gray-500"}),"Move"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:Yn,children:[u.jsx(Ul,{className:"w-4 h-4"}),"Delete"]}),u.jsx("button",{className:"w-full text-left px-4 py-3 text-sm text-gray-600 hover:bg-gray-50",onClick:()=>A(!1),children:"Cancel"})]})}),Ve&&u.jsx("div",{id:"outputs-move-picker-overlay",className:"fixed inset-0 z-[1850] bg-black/50 flex items-center justify-center p-4",onClick:Aa,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-move-picker",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:Q=>Q.stopPropagation(),children:[u.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:Ce!==Se?u.jsxs(u.Fragment,{children:["Move to ",u.jsx(Vl,{className:"w-4 h-4 text-amber-500 inline"})," ",Ce||"root"]}):"Move to..."}),u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[xe&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"Loading folders..."}),!xe&&Ce&&u.jsx("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Ra,children:u.jsx("span",{className:"text-gray-500",children:".."})}),!xe&&Qe.filter(Q=>!ut.includes(Q.id)).length===0&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"No folders"}),!xe&&Qe.filter(Q=>!ut.includes(Q.id)).map(Q=>u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Po(Q.name),children:[u.jsx(Vl,{className:"w-4 h-4 text-amber-500"}),Q.name]},Q.id)),u.jsx("div",{className:"px-4 py-3 border-t border-gray-100",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{value:Ae,onChange:Q=>ft(Q.target.value),placeholder:"New folder",className:"flex-1 border border-gray-200 rounded-lg px-3 py-2 text-sm"}),u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-blue-600 hover:text-blue-700",onClick:qr,children:"Create"})]})})]}),u.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg",onClick:Aa,children:"Cancel"}),u.jsx("button",{className:`px-3 py-2 text-sm font-medium rounded-lg ${Ce!==Se?"text-white bg-blue-600 hover:bg-blue-700":"text-gray-400 bg-gray-200 cursor-not-allowed"}`,onClick:Gr,disabled:Ce===Se,children:"Submit"})]})]})}),O&&u.jsx("div",{id:"outputs-delete-confirm-overlay",className:"fixed inset-0 z-[2100] bg-black/50 flex items-center justify-center p-4",onClick:Rn,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-delete-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:Q=>Q.stopPropagation(),children:[u.jsx("div",{id:"outputs-delete-confirm-title",className:"text-gray-900 text-base font-semibold",children:"Delete file?"}),u.jsx("div",{id:"outputs-delete-confirm-description",className:"text-gray-600 text-sm mt-1",children:O.type==="folder"?`This will permanently delete the folder "${O.name}" and all of its contents from the server. This cannot be undone.`:`This will permanently delete "${O.name}" from the server. This cannot be undone.`}),u.jsxs("div",{id:"outputs-delete-confirm-actions",className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:Rn,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:wl,children:"Delete"})]})]})}),$e&&u.jsx("div",{id:"outputs-delete-selection-overlay",className:"fixed inset-0 z-[1800] bg-black/50 flex items-center justify-center p-4",onClick:()=>ee(!1),role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-delete-selection-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:Q=>Q.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Delete selected files?"}),u.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:["This will permanently delete ",g.length," selected file",g.length===1?"":"s"," from the server. This cannot be undone."]}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:()=>ee(!1),children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:Xl,children:"Delete"})]})]})}),G&&u.jsx("div",{id:"outputs-new-folder-overlay",className:"fixed inset-0 z-[1850] bg-black/50 flex items-center justify-center p-4",onClick:()=>{W(!1),We("")},role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-new-folder-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:Q=>Q.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"New folder"}),u.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:["Create a new folder in ",o?u.jsxs(u.Fragment,{children:[u.jsx(Vl,{className:"w-3.5 h-3.5 text-amber-500 inline"})," ",o]}):"root"]}),u.jsx("input",{value:Xe,onChange:Q=>We(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Qn()},placeholder:"Folder name",className:"mt-3 w-full border border-gray-200 rounded-lg px-3 py-2 text-sm",autoFocus:!0}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:()=>{W(!1),We("")},children:"Cancel"}),u.jsx("button",{className:`px-3 py-2 rounded-lg text-sm font-medium ${Xe.trim()?"text-white bg-blue-600 hover:bg-blue-700":"text-gray-400 bg-gray-200 cursor-not-allowed"}`,onClick:Qn,disabled:!Xe.trim(),children:"Create"})]})]})}),u.jsx(Ix,{open:ye,file:X,source:r,onClose:Me,onLoaded:()=>{_e(!1),pe(null),an.current?.(),an.current=null}}),u.jsx(Z5,{open:B,onClose:()=>U(!1),filter:d,sort:p,onChangeFilter:L,onChangeSort:_}),u.jsx(Dx,{file:J,onCancel:$o,onConfirm:Fo}),u.jsx(Rx,{open:Pe,items:Nt,index:et,onClose:Ie,onIndexChange:rt,onDelete:Ye,onLoadInWorkflow:Re,onLoadWorkflow:ot,showMetadataToggle:!0})]})})}function t4(){const l=_n(D=>D.currentPanel),r=_n(D=>D.setCurrentPanel),o=Ld(D=>D.appMenuOpen),s=ll(D=>D.viewerOpen),i=ll(D=>D.setViewerState),d=ne(D=>D.followQueue),p=ne(D=>D.setFollowQueue),h=bn(D=>D.bookmarkRepositioningActive),m=b.useRef(null),{isInputFocused:g}=Ax(),x=St(D=>D.outputsViewerOpen),y=St(D=>D.selectionMode),N=St(D=>D.filterModalOpen),k=St(D=>D.selectionActionOpen),S=St(D=>D.currentFolder),w=St(D=>D.navigateUp);X5();const M=b.useCallback(()=>{l==="workflow"?r("queue"):l==="outputs"&&r("workflow")},[l,r]),j=b.useCallback(()=>{l==="outputs"&&S?w():l==="workflow"?r("outputs"):l==="queue"&&r("workflow")},[l,S,w,r]),E=l==="workflow"||l==="outputs",z=l==="workflow"||l==="queue"||l==="outputs"&&!!S,{swipeOffset:L,isSwiping:_,setSwipeEnabled:R,resetSwipeState:A}=P5({onSwipeLeft:E?M:void 0,onSwipeRight:z?j:void 0,enabled:!g&&!s&&!o&&!x&&!h&&!y&&!N&&!k}),B=ne(D=>D.setNodeTypes),U=Ei(D=>D.theme),G=ne(D=>D.workflowLoadedAt),W=lt(D=>D.fetchQueue),K=Tn(D=>D.history);b.useEffect(()=>{!_&&L!==0&&A()},[_,L,A]),b.useEffect(()=>{x&&A()},[x,A]);const ge=()=>{i({viewerOpen:!1}),p(!1),R(!0),A()};b.useEffect(()=>{S0().then(D=>{B(D)}).catch(D=>{console.error("Failed to load node types:",D)})},[B]),b.useEffect(()=>{W()},[W]);const ae=(D,$,fe=!0)=>{R(!1),A(),i({viewerImages:D,viewerIndex:$,viewerScale:1,viewerTranslate:{x:0,y:0},viewerOpen:!0}),p(fe)},le=()=>{const D=yf(K,{onlyOutput:!0,alt:"Generation"});R(!1),A();const $=D.length>0?0:-1;i({viewerImages:D,viewerIndex:$,viewerScale:1,viewerTranslate:{x:0,y:0},viewerOpen:!0}),p(!0)};return b.useEffect(()=>{const D=document.documentElement;D.classList.toggle("dark",U==="dark"),D.style.colorScheme=U},[U]),b.useEffect(()=>{G&&queueMicrotask(()=>{p(!1)})},[G,p]),u.jsxs("div",{id:"app-root",className:"min-h-screen bg-gray-100",children:[u.jsx(Wb,{mode:l}),u.jsxs("main",{id:"main-content",ref:m,className:"pt-[60px] pb-[80px] min-h-screen relative",children:[u.jsxs(u.Fragment,{children:[u.jsx(e4,{visible:l==="outputs"}),u.jsx(l5,{visible:l==="workflow",onImageClick:ae}),u.jsx(T5,{visible:l==="queue",onImageClick:ae})]}),u.jsx("div",{id:"bottom-bar-spacer",className:"fixed inset-x-0 bottom-0 bg-gray-100 pointer-events-none z-[1500]",style:{height:"var(--bottom-bar-offset, 80px)"}})]}),u.jsx(p5,{currentPanel:l,viewerOpen:s,followQueue:d,onToggleFollowQueue:()=>p(!d),onOpenFollowQueue:le}),u.jsx(Q5,{onClose:ge})]})}Jy.createRoot(document.getElementById("root")).render(u.jsx(b.StrictMode,{children:u.jsx(t4,{})}));
//# sourceMappingURL=index-Tf3Rmg0A.js.map
