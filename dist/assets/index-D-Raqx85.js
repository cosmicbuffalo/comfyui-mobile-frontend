function qv(r,l){for(var o=0;o<l.length;o++){const s=l[o];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in r)){const d=Object.getOwnPropertyDescriptor(s,i);d&&Object.defineProperty(r,i,d.get?d:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function o(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(i){if(i.ep)return;i.ep=!0;const d=o(i);fetch(i.href,d)}})();function Wv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var td={exports:{}},jo={};var eg;function Fv(){if(eg)return jo;eg=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function o(s,i,d){var p=null;if(d!==void 0&&(p=""+d),i.key!==void 0&&(p=""+i.key),"key"in i){d={};for(var h in i)h!=="key"&&(d[h]=i[h])}else d=i;return i=d.ref,{$$typeof:r,type:s,key:p,ref:i!==void 0?i:null,props:d}}return jo.Fragment=l,jo.jsx=o,jo.jsxs=o,jo}var tg;function $v(){return tg||(tg=1,td.exports=Fv()),td.exports}var u=$v(),nd={exports:{}},Je={};var ng;function Yv(){if(ng)return Je;ng=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),p=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),N=Symbol.iterator;function C(T){return T===null||typeof T!="object"?null:(T=N&&T[N]||T["@@iterator"],typeof T=="function"?T:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,M={};function j(T,B,O){this.props=T,this.context=B,this.refs=M,this.updater=O||w}j.prototype.isReactComponent={},j.prototype.setState=function(T,B){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,B,"setState")},j.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function E(){}E.prototype=j.prototype;function z(T,B,O){this.props=T,this.context=B,this.refs=M,this.updater=O||w}var _=z.prototype=new E;_.constructor=z,S(_,j.prototype),_.isPureReactComponent=!0;var L=Array.isArray;function R(){}var A={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function U(T,B,O){var F=O.ref;return{$$typeof:r,type:T,key:B,ref:F!==void 0?F:null,props:O}}function G(T,B){return U(T.type,B,T.props)}function W(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function K(T){var B={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(O){return B[O]})}var ge=/\/+/g;function ae(T,B){return typeof T=="object"&&T!==null&&T.key!=null?K(""+T.key):B.toString(36)}function re(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(R,R):(T.status="pending",T.then(function(B){T.status==="pending"&&(T.status="fulfilled",T.value=B)},function(B){T.status==="pending"&&(T.status="rejected",T.reason=B)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function D(T,B,O,F,X){var pe=typeof T;(pe==="undefined"||pe==="boolean")&&(T=null);var J=!1;if(T===null)J=!0;else switch(pe){case"bigint":case"string":case"number":J=!0;break;case"object":switch(T.$$typeof){case r:case l:J=!0;break;case x:return J=T._init,D(J(T._payload),B,O,F,X)}}if(J)return X=X(T),J=F===""?"."+ae(T,0):F,L(X)?(O="",J!=null&&(O=J.replace(ge,"$&/")+"/"),D(X,B,O,"",function(Le){return Le})):X!=null&&(W(X)&&(X=G(X,O+(X.key==null||T&&T.key===X.key?"":(""+X.key).replace(ge,"$&/")+"/")+J)),B.push(X)),1;J=0;var le=F===""?".":F+":";if(L(T))for(var ve=0;ve<T.length;ve++)F=T[ve],pe=le+ae(F,ve),J+=D(F,B,O,pe,X);else if(ve=C(T),typeof ve=="function")for(T=ve.call(T),ve=0;!(F=T.next()).done;)F=F.value,pe=le+ae(F,ve++),J+=D(F,B,O,pe,X);else if(pe==="object"){if(typeof T.then=="function")return D(re(T),B,O,F,X);throw B=String(T),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return J}function $(T,B,O){if(T==null)return T;var F=[],X=0;return D(T,F,"","",function(pe){return B.call(O,pe,X++)}),F}function fe(T){if(T._status===-1){var B=T._result;B=B(),B.then(function(O){(T._status===0||T._status===-1)&&(T._status=1,T._result=O)},function(O){(T._status===0||T._status===-1)&&(T._status=2,T._result=O)}),T._status===-1&&(T._status=0,T._result=B)}if(T._status===1)return T._result.default;throw T._result}var be=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},ye={map:$,forEach:function(T,B,O){$(T,function(){B.apply(this,arguments)},O)},count:function(T){var B=0;return $(T,function(){B++}),B},toArray:function(T){return $(T,function(B){return B})||[]},only:function(T){if(!W(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Je.Activity=v,Je.Children=ye,Je.Component=j,Je.Fragment=o,Je.Profiler=i,Je.PureComponent=z,Je.StrictMode=s,Je.Suspense=m,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Je.__COMPILER_RUNTIME={__proto__:null,c:function(T){return A.H.useMemoCache(T)}},Je.cache=function(T){return function(){return T.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(T,B,O){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var F=S({},T.props),X=T.key;if(B!=null)for(pe in B.key!==void 0&&(X=""+B.key),B)!I.call(B,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&B.ref===void 0||(F[pe]=B[pe]);var pe=arguments.length-2;if(pe===1)F.children=O;else if(1<pe){for(var J=Array(pe),le=0;le<pe;le++)J[le]=arguments[le+2];F.children=J}return U(T.type,X,F)},Je.createContext=function(T){return T={$$typeof:p,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:d,_context:T},T},Je.createElement=function(T,B,O){var F,X={},pe=null;if(B!=null)for(F in B.key!==void 0&&(pe=""+B.key),B)I.call(B,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(X[F]=B[F]);var J=arguments.length-2;if(J===1)X.children=O;else if(1<J){for(var le=Array(J),ve=0;ve<J;ve++)le[ve]=arguments[ve+2];X.children=le}if(T&&T.defaultProps)for(F in J=T.defaultProps,J)X[F]===void 0&&(X[F]=J[F]);return U(T,pe,X)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(T){return{$$typeof:h,render:T}},Je.isValidElement=W,Je.lazy=function(T){return{$$typeof:x,_payload:{_status:-1,_result:T},_init:fe}},Je.memo=function(T,B){return{$$typeof:g,type:T,compare:B===void 0?null:B}},Je.startTransition=function(T){var B=A.T,O={};A.T=O;try{var F=T(),X=A.S;X!==null&&X(O,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(R,be)}catch(pe){be(pe)}finally{B!==null&&O.types!==null&&(B.types=O.types),A.T=B}},Je.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Je.use=function(T){return A.H.use(T)},Je.useActionState=function(T,B,O){return A.H.useActionState(T,B,O)},Je.useCallback=function(T,B){return A.H.useCallback(T,B)},Je.useContext=function(T){return A.H.useContext(T)},Je.useDebugValue=function(){},Je.useDeferredValue=function(T,B){return A.H.useDeferredValue(T,B)},Je.useEffect=function(T,B){return A.H.useEffect(T,B)},Je.useEffectEvent=function(T){return A.H.useEffectEvent(T)},Je.useId=function(){return A.H.useId()},Je.useImperativeHandle=function(T,B,O){return A.H.useImperativeHandle(T,B,O)},Je.useInsertionEffect=function(T,B){return A.H.useInsertionEffect(T,B)},Je.useLayoutEffect=function(T,B){return A.H.useLayoutEffect(T,B)},Je.useMemo=function(T,B){return A.H.useMemo(T,B)},Je.useOptimistic=function(T,B){return A.H.useOptimistic(T,B)},Je.useReducer=function(T,B,O){return A.H.useReducer(T,B,O)},Je.useRef=function(T){return A.H.useRef(T)},Je.useState=function(T){return A.H.useState(T)},Je.useSyncExternalStore=function(T,B,O){return A.H.useSyncExternalStore(T,B,O)},Je.useTransition=function(){return A.H.useTransition()},Je.version="19.2.3",Je}var rg;function Yd(){return rg||(rg=1,nd.exports=Yv()),nd.exports}var b=Yd();const ka=Wv(b),lg=qv({__proto__:null,default:ka},[b]);var rd={exports:{}},Co={},ld={exports:{}},ad={};var ag;function Qv(){return ag||(ag=1,(function(r){function l(D,$){var fe=D.length;D.push($);e:for(;0<fe;){var be=fe-1>>>1,ye=D[be];if(0<i(ye,$))D[be]=$,D[fe]=ye,fe=be;else break e}}function o(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var $=D[0],fe=D.pop();if(fe!==$){D[0]=fe;e:for(var be=0,ye=D.length,T=ye>>>1;be<T;){var B=2*(be+1)-1,O=D[B],F=B+1,X=D[F];if(0>i(O,fe))F<ye&&0>i(X,O)?(D[be]=X,D[F]=fe,be=F):(D[be]=O,D[B]=fe,be=B);else if(F<ye&&0>i(X,fe))D[be]=X,D[F]=fe,be=F;else break e}}return $}function i(D,$){var fe=D.sortIndex-$.sortIndex;return fe!==0?fe:D.id-$.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var p=Date,h=p.now();r.unstable_now=function(){return p.now()-h}}var m=[],g=[],x=1,v=null,N=3,C=!1,w=!1,S=!1,M=!1,j=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function _(D){for(var $=o(g);$!==null;){if($.callback===null)s(g);else if($.startTime<=D)s(g),$.sortIndex=$.expirationTime,l(m,$);else break;$=o(g)}}function L(D){if(S=!1,_(D),!w)if(o(m)!==null)w=!0,R||(R=!0,K());else{var $=o(g);$!==null&&re(L,$.startTime-D)}}var R=!1,A=-1,I=5,U=-1;function G(){return M?!0:!(r.unstable_now()-U<I)}function W(){if(M=!1,R){var D=r.unstable_now();U=D;var $=!0;try{e:{w=!1,S&&(S=!1,E(A),A=-1),C=!0;var fe=N;try{t:{for(_(D),v=o(m);v!==null&&!(v.expirationTime>D&&G());){var be=v.callback;if(typeof be=="function"){v.callback=null,N=v.priorityLevel;var ye=be(v.expirationTime<=D);if(D=r.unstable_now(),typeof ye=="function"){v.callback=ye,_(D),$=!0;break t}v===o(m)&&s(m),_(D)}else s(m);v=o(m)}if(v!==null)$=!0;else{var T=o(g);T!==null&&re(L,T.startTime-D),$=!1}}break e}finally{v=null,N=fe,C=!1}$=void 0}}finally{$?K():R=!1}}}var K;if(typeof z=="function")K=function(){z(W)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,ae=ge.port2;ge.port1.onmessage=W,K=function(){ae.postMessage(null)}}else K=function(){j(W,0)};function re(D,$){A=j(function(){D(r.unstable_now())},$)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(D){D.callback=null},r.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<D?Math.floor(1e3/D):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(D){switch(N){case 1:case 2:case 3:var $=3;break;default:$=N}var fe=N;N=$;try{return D()}finally{N=fe}},r.unstable_requestPaint=function(){M=!0},r.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var fe=N;N=D;try{return $()}finally{N=fe}},r.unstable_scheduleCallback=function(D,$,fe){var be=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?be+fe:be):fe=be,D){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=fe+ye,D={id:x++,callback:$,priorityLevel:D,startTime:fe,expirationTime:ye,sortIndex:-1},fe>be?(D.sortIndex=fe,l(g,D),o(m)===null&&D===o(g)&&(S?(E(A),A=-1):S=!0,re(L,fe-be))):(D.sortIndex=ye,l(m,D),w||C||(w=!0,R||(R=!0,K()))),D},r.unstable_shouldYield=G,r.unstable_wrapCallback=function(D){var $=N;return function(){var fe=N;N=$;try{return D.apply(this,arguments)}finally{N=fe}}}})(ad)),ad}var og;function Xv(){return og||(og=1,ld.exports=Qv()),ld.exports}var od={exports:{}},yn={};var sg;function Pv(){if(sg)return yn;sg=1;var r=Yd();function l(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(l(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},i=Symbol.for("react.portal");function d(m,g,x){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:v==null?null:""+v,children:m,containerInfo:g,implementation:x}}var p=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,yn.createPortal=function(m,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(l(299));return d(m,g,null,x)},yn.flushSync=function(m){var g=p.T,x=s.p;try{if(p.T=null,s.p=2,m)return m()}finally{p.T=g,s.p=x,s.d.f()}},yn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},yn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},yn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var x=g.as,v=h(x,g.crossOrigin),N=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:N,fetchPriority:C}):x==="script"&&s.d.X(m,{crossOrigin:v,integrity:N,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},yn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=h(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},yn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,v=h(x,g.crossOrigin);s.d.L(m,x,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},yn.preloadModule=function(m,g){if(typeof m=="string")if(g){var x=h(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},yn.requestFormReset=function(m){s.d.r(m)},yn.unstable_batchedUpdates=function(m,g){return m(g)},yn.useFormState=function(m,g,x){return p.H.useFormState(m,g,x)},yn.useFormStatus=function(){return p.H.useHostTransitionStatus()},yn.version="19.2.3",yn}var ig;function y0(){if(ig)return od.exports;ig=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),od.exports=Pv(),od.exports}var ug;function Zv(){if(ug)return Co;ug=1;var r=Xv(),l=Yd(),o=y0();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(d(e)!==e)throw Error(s(188))}function g(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,a=t;;){var c=n.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){n=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===n)return m(c),e;if(f===a)return m(c),t;f=f.sibling}throw Error(s(188))}if(n.return!==a.return)n=c,a=f;else{for(var y=!1,k=c.child;k;){if(k===n){y=!0,n=c,a=f;break}if(k===a){y=!0,a=c,n=f;break}k=k.sibling}if(!y){for(k=f.child;k;){if(k===n){y=!0,n=f,a=c;break}if(k===a){y=!0,a=f,n=c;break}k=k.sibling}if(!y)throw Error(s(189))}}if(n.alternate!==a)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,N=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),z=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function K(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Symbol.for("react.client.reference");function ae(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ge?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case j:return"Profiler";case M:return"StrictMode";case L:return"Suspense";case R:return"SuspenseList";case U:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case z:return e.displayName||"Context";case E:return(e._context.displayName||"Context")+".Consumer";case _:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case A:return t=e.displayName||null,t!==null?t:ae(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return ae(e(t))}catch{}}return null}var re=Array.isArray,D=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},be=[],ye=-1;function T(e){return{current:e}}function B(e){0>ye||(e.current=be[ye],be[ye]=null,ye--)}function O(e,t){ye++,be[ye]=e.current,e.current=t}var F=T(null),X=T(null),pe=T(null),J=T(null);function le(e,t){switch(O(pe,t),O(X,e),O(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Nh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Nh(t),e=jh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(F),O(F,e)}function ve(){B(F),B(X),B(pe)}function Le(e){e.memoizedState!==null&&O(J,e);var t=F.current,n=jh(t,e.type);t!==n&&(O(X,e),O(F,n))}function $e(e){X.current===e&&(B(F),B(X)),J.current===e&&(B(J),bo._currentValue=fe)}var ee,Ve;function Ne(e){if(ee===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ee=t&&t[1]||"",Ve=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ee+e+Ve}var Ce=!1;function tt(e,t){if(!e||Ce)return"";Ce=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ie){var te=ie}Reflect.construct(e,[],he)}else{try{he.call()}catch(ie){te=ie}e.call(he.prototype)}}else{try{throw Error()}catch(ie){te=ie}(he=e())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=a.DetermineComponentFrameRoot(),y=f[0],k=f[1];if(y&&k){var H=y.split(`
`),Z=k.split(`
`);for(c=a=0;a<H.length&&!H[a].includes("DetermineComponentFrameRoot");)a++;for(;c<Z.length&&!Z[c].includes("DetermineComponentFrameRoot");)c++;if(a===H.length||c===Z.length)for(a=H.length-1,c=Z.length-1;1<=a&&0<=c&&H[a]!==Z[c];)c--;for(;1<=a&&0<=c;a--,c--)if(H[a]!==Z[c]){if(a!==1||c!==1)do if(a--,c--,0>c||H[a]!==Z[c]){var de=`
`+H[a].replace(" at new "," at ");return e.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",e.displayName)),de}while(1<=a&&0<=c);break}}}finally{Ce=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ne(n):""}function Qe(e,t){switch(e.tag){case 26:case 27:case 5:return Ne(e.type);case 16:return Ne("Lazy");case 13:return e.child!==t&&t!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return tt(e.type,!1);case 11:return tt(e.type.render,!1);case 1:return tt(e.type,!0);case 31:return Ne("Activity");default:return""}}function we(e){try{var t="",n=null;do t+=Qe(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var xe=Object.prototype.hasOwnProperty,Ee=r.unstable_scheduleCallback,Ae=r.unstable_cancelCallback,ft=r.unstable_shouldYield,ut=r.unstable_requestPaint,Ze=r.unstable_now,Se=r.unstable_getCurrentPriorityLevel,_e=r.unstable_ImmediatePriority,Xe=r.unstable_UserBlockingPriority,We=r.unstable_NormalPriority,Pe=r.unstable_LowPriority,Ge=r.unstable_IdlePriority,Nt=r.log,oe=r.unstable_setDisableYieldValue,et=null,lt=null;function jt(e){if(typeof Nt=="function"&&oe(e),lt&&typeof lt.setStrictMode=="function")try{lt.setStrictMode(et,e)}catch{}}var Vt=Math.clz32?Math.clz32:or,$n=Math.log,fr=Math.LN2;function or(e){return e>>>=0,e===0?32:31-($n(e)/fr|0)|0}var An=256,ln=262144,an=4194304;function on(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Rn(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var c=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var k=a&134217727;return k!==0?(a=k&~f,a!==0?c=on(a):(y&=k,y!==0?c=on(y):n||(n=k&~e,n!==0&&(c=on(n))))):(k=a&~f,k!==0?c=on(k):y!==0?c=on(y):n||(n=a&~e,n!==0&&(c=on(n)))),c===0?0:t!==0&&t!==c&&(t&f)===0&&(f=c&-c,n=t&-t,f>=n||f===32&&(n&4194048)!==0)?t:c}function Me(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ze(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V(){var e=an;return an<<=1,(an&62914560)===0&&(an=4194304),e}function ce(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ue(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,n,a,c,f){var y=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var k=e.entanglements,H=e.expirationTimes,Z=e.hiddenUpdates;for(n=y&~n;0<n;){var de=31-Vt(n),he=1<<de;k[de]=0,H[de]=-1;var te=Z[de];if(te!==null)for(Z[de]=null,de=0;de<te.length;de++){var ie=te[de];ie!==null&&(ie.lane&=-536870913)}n&=~he}a!==0&&Be(e,a,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~t))}function Be(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Vt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function Ye(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Vt(n),c=1<<a;c&t|e[a]&t&&(e[a]|=t),n&=~c}}function Re(e,t){var n=t&-t;return n=(n&42)!==0?1:ot(n),(n&(e.suspendedLanes|t))!==0?0:n}function ot(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function pt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function gt(){var e=$.p;return e!==0?e:(e=window.event,e===void 0?32:Yh(e.type))}function xt(e,t){var n=$.p;try{return $.p=e,t()}finally{$.p=n}}var yt=Math.random().toString(36).slice(2),vt="__reactFiber$"+yt,Dt="__reactProps$"+yt,qt="__reactContainer$"+yt,Nn="__reactEvents$"+yt,se="__reactListeners$"+yt,Ke="__reactHandles$"+yt,It="__reactResources$"+yt,Ht="__reactMarker$"+yt;function cn(e){delete e[vt],delete e[Dt],delete e[Nn],delete e[se],delete e[Ke]}function fn(e){var t=e[vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qt]||n[vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Lh(e);e!==null;){if(n=e[vt])return n;e=Lh(e)}return t}e=n,n=e.parentNode}return null}function Yn(e){if(e=e[vt]||e[qt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Qr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function br(e){var t=e[It];return t||(t=e[It]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Kt(e){e[Ht]=!0}var Fo=new Set,$o={};function wr(e,t){Xr(e,t),Xr(e+"Capture",t)}function Xr(e,t){for($o[e]=t,e=0;e<t.length;e++)Fo.add(t[e])}var Xi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yo={},Qo={};function Ra(e){return xe.call(Qo,e)?!0:xe.call(Yo,e)?!1:Xi.test(e)?Qo[e]=!0:(Yo[e]=!0,!1)}function ql(e,t,n){if(Ra(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Wl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Qn(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pi(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){n=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(y){n=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Da(e){if(!e._valueTracker){var t=Xo(e)?"checked":"value";e._valueTracker=Pi(e,t,""+e[t])}}function Po(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=Xo(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Q(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var je=/[\n"\\]/g;function Oe(e){return e.replace(je,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Et(e,t,n,a,c,f,y,k){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+sn(t)):e.value!==""+sn(t)&&(e.value=""+sn(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?mt(e,y,sn(t)):n!=null?mt(e,y,sn(n)):a!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?e.name=""+sn(k):e.removeAttribute("name")}function Qt(e,t,n,a,c,f,y,k){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||n!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){Da(e);return}n=n!=null?""+sn(n):"",t=t!=null?""+sn(t):n,k||t===e.value||(e.value=t),e.defaultValue=t}a=a??c,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=k?e.checked:!!a,e.defaultChecked=!!a,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),Da(e)}function mt(e,t,n){t==="number"&&Q(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Sr(e,t,n,a){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&a&&(e[n].defaultSelected=!0)}else{for(n=""+sn(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Zo(e,t,n){if(t!=null&&(t=""+sn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+sn(n):""}function Fl(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(s(92));if(re(a)){if(1<a.length)throw Error(s(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=sn(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),Da(e)}function $l(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ix=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bf(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Ix.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function wf(e,t,n){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var c in t)a=t[c],t.hasOwnProperty(c)&&n[c]!==a&&bf(e,c,a)}else for(var f in t)t.hasOwnProperty(f)&&bf(e,f,t[f])}function Zi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(e){return Vx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Nr(){}var Ki=null;function Ji(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yl=null,Ql=null;function Sf(e){var t=Yn(e);if(t&&(e=t.stateNode)){var n=e[Dt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Et(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Oe(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var c=a[Dt]||null;if(!c)throw Error(s(90));Et(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Po(a)}break e;case"textarea":Zo(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Sr(e,!!n.multiple,t,!1)}}}var eu=!1;function Nf(e,t,n){if(eu)return e(t,n);eu=!0;try{var a=e(t);return a}finally{if(eu=!1,(Yl!==null||Ql!==null)&&(Hs(),Yl&&(t=Yl,e=Ql,Ql=Yl=null,Sf(t),e)))for(t=0;t<e.length;t++)Sf(e[t])}}function za(e,t){var n=e.stateNode;if(n===null)return null;var a=n[Dt]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tu=!1;if(jr)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){tu=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{tu=!1}var Pr=null,nu=null,Jo=null;function jf(){if(Jo)return Jo;var e,t=nu,n=t.length,a,c="value"in Pr?Pr.value:Pr.textContent,f=c.length;for(e=0;e<n&&t[e]===c[e];e++);var y=n-e;for(a=1;a<=y&&t[n-a]===c[f-a];a++);return Jo=c.slice(e,1<a?1-a:void 0)}function es(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ts(){return!0}function Cf(){return!1}function jn(e){function t(n,a,c,f,y){this._reactName=n,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(n=e[k],this[k]=n?n(f):f[k]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ts:Cf,this.isPropagationStopped=Cf,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),t}var wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ns=jn(wl),Ia=v({},wl,{view:0,detail:0}),Ux=jn(Ia),ru,lu,Ha,rs=v({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ou,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ha&&(Ha&&e.type==="mousemove"?(ru=e.screenX-Ha.screenX,lu=e.screenY-Ha.screenY):lu=ru=0,Ha=e),ru)},movementY:function(e){return"movementY"in e?e.movementY:lu}}),kf=jn(rs),Gx=v({},rs,{dataTransfer:0}),qx=jn(Gx),Wx=v({},Ia,{relatedTarget:0}),au=jn(Wx),Fx=v({},wl,{animationName:0,elapsedTime:0,pseudoElement:0}),$x=jn(Fx),Yx=v({},wl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qx=jn(Yx),Xx=v({},wl,{data:0}),Mf=jn(Xx),Px={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kx[e])?!!t[e]:!1}function ou(){return Jx}var ey=v({},Ia,{key:function(e){if(e.key){var t=Px[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=es(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ou,charCode:function(e){return e.type==="keypress"?es(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?es(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ty=jn(ey),ny=v({},rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Of=jn(ny),ry=v({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ou}),ly=jn(ry),ay=v({},wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),oy=jn(ay),sy=v({},rs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iy=jn(sy),uy=v({},wl,{newState:0,oldState:0}),cy=jn(uy),dy=[9,13,27,32],su=jr&&"CompositionEvent"in window,Va=null;jr&&"documentMode"in document&&(Va=document.documentMode);var fy=jr&&"TextEvent"in window&&!Va,Ef=jr&&(!su||Va&&8<Va&&11>=Va),Tf=" ",Lf=!1;function _f(e,t){switch(e){case"keyup":return dy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Af(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xl=!1;function py(e,t){switch(e){case"compositionend":return Af(t);case"keypress":return t.which!==32?null:(Lf=!0,Tf);case"textInput":return e=t.data,e===Tf&&Lf?null:e;default:return null}}function my(e,t){if(Xl)return e==="compositionend"||!su&&_f(e,t)?(e=jf(),Jo=nu=Pr=null,Xl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ef&&t.locale!=="ko"?null:t.data;default:return null}}var hy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hy[e.type]:t==="textarea"}function Df(e,t,n,a){Yl?Ql?Ql.push(a):Ql=[a]:Yl=a,t=$s(t,"onChange"),0<t.length&&(n=new ns("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Ua=null,Ga=null;function gy(e){xh(e,0)}function ls(e){var t=Qr(e);if(Po(t))return e}function zf(e,t){if(e==="change")return t}var Bf=!1;if(jr){var iu;if(jr){var uu="oninput"in document;if(!uu){var If=document.createElement("div");If.setAttribute("oninput","return;"),uu=typeof If.oninput=="function"}iu=uu}else iu=!1;Bf=iu&&(!document.documentMode||9<document.documentMode)}function Hf(){Ua&&(Ua.detachEvent("onpropertychange",Vf),Ga=Ua=null)}function Vf(e){if(e.propertyName==="value"&&ls(Ga)){var t=[];Df(t,Ga,e,Ji(e)),Nf(gy,t)}}function xy(e,t,n){e==="focusin"?(Hf(),Ua=t,Ga=n,Ua.attachEvent("onpropertychange",Vf)):e==="focusout"&&Hf()}function yy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ls(Ga)}function vy(e,t){if(e==="click")return ls(t)}function by(e,t){if(e==="input"||e==="change")return ls(t)}function wy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dn=typeof Object.is=="function"?Object.is:wy;function qa(e,t){if(Dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var c=n[a];if(!xe.call(t,c)||!Dn(e[c],t[c]))return!1}return!0}function Uf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gf(e,t){var n=Uf(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uf(n)}}function qf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Q(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Q(e.document)}return t}function cu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Sy=jr&&"documentMode"in document&&11>=document.documentMode,Pl=null,du=null,Wa=null,fu=!1;function Ff(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fu||Pl==null||Pl!==Q(a)||(a=Pl,"selectionStart"in a&&cu(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Wa&&qa(Wa,a)||(Wa=a,a=$s(du,"onSelect"),0<a.length&&(t=new ns("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=Pl)))}function Sl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zl={animationend:Sl("Animation","AnimationEnd"),animationiteration:Sl("Animation","AnimationIteration"),animationstart:Sl("Animation","AnimationStart"),transitionrun:Sl("Transition","TransitionRun"),transitionstart:Sl("Transition","TransitionStart"),transitioncancel:Sl("Transition","TransitionCancel"),transitionend:Sl("Transition","TransitionEnd")},pu={},$f={};jr&&($f=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function Nl(e){if(pu[e])return pu[e];if(!Zl[e])return e;var t=Zl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $f)return pu[e]=t[n];return e}var Yf=Nl("animationend"),Qf=Nl("animationiteration"),Xf=Nl("animationstart"),Ny=Nl("transitionrun"),jy=Nl("transitionstart"),Cy=Nl("transitioncancel"),Pf=Nl("transitionend"),Zf=new Map,mu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mu.push("scrollEnd");function sr(e,t){Zf.set(e,t),wr(t,[e])}var as=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Xn=[],Kl=0,hu=0;function os(){for(var e=Kl,t=hu=Kl=0;t<e;){var n=Xn[t];Xn[t++]=null;var a=Xn[t];Xn[t++]=null;var c=Xn[t];Xn[t++]=null;var f=Xn[t];if(Xn[t++]=null,a!==null&&c!==null){var y=a.pending;y===null?c.next=c:(c.next=y.next,y.next=c),a.pending=c}f!==0&&Kf(n,c,f)}}function ss(e,t,n,a){Xn[Kl++]=e,Xn[Kl++]=t,Xn[Kl++]=n,Xn[Kl++]=a,hu|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function gu(e,t,n,a){return ss(e,t,n,a),is(e)}function jl(e,t){return ss(e,null,null,t),is(e)}function Kf(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var c=!1,f=e.return;f!==null;)f.childLanes|=n,a=f.alternate,a!==null&&(a.childLanes|=n),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&t!==null&&(c=31-Vt(n),e=f.hiddenUpdates,a=e[c],a===null?e[c]=[t]:a.push(t),t.lane=n|536870912),f):null}function is(e){if(50<po)throw po=0,Cc=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Jl={};function ky(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(e,t,n,a){return new ky(e,t,n,a)}function xu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cr(e,t){var n=e.alternate;return n===null?(n=zn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Jf(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function us(e,t,n,a,c,f){var y=0;if(a=e,typeof e=="function")xu(e)&&(y=1);else if(typeof e=="string")y=Lv(e,n,F.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case U:return e=zn(31,n,t,c),e.elementType=U,e.lanes=f,e;case S:return Cl(n.children,c,f,t);case M:y=8,c|=24;break;case j:return e=zn(12,n,t,c|2),e.elementType=j,e.lanes=f,e;case L:return e=zn(13,n,t,c),e.elementType=L,e.lanes=f,e;case R:return e=zn(19,n,t,c),e.elementType=R,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:y=10;break e;case E:y=9;break e;case _:y=11;break e;case A:y=14;break e;case I:y=16,a=null;break e}y=29,n=Error(s(130,e===null?"null":typeof e,"")),a=null}return t=zn(y,n,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function Cl(e,t,n,a){return e=zn(7,e,a,t),e.lanes=n,e}function yu(e,t,n){return e=zn(6,e,null,t),e.lanes=n,e}function ep(e){var t=zn(18,null,null,0);return t.stateNode=e,t}function vu(e,t,n){return t=zn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var tp=new WeakMap;function Pn(e,t){if(typeof e=="object"&&e!==null){var n=tp.get(e);return n!==void 0?n:(t={value:e,source:t,stack:we(t)},tp.set(e,t),t)}return{value:e,source:t,stack:we(t)}}var ea=[],ta=0,cs=null,Fa=0,Zn=[],Kn=0,Zr=null,pr=1,mr="";function kr(e,t){ea[ta++]=Fa,ea[ta++]=cs,cs=e,Fa=t}function np(e,t,n){Zn[Kn++]=pr,Zn[Kn++]=mr,Zn[Kn++]=Zr,Zr=e;var a=pr;e=mr;var c=32-Vt(a)-1;a&=~(1<<c),n+=1;var f=32-Vt(t)+c;if(30<f){var y=c-c%5;f=(a&(1<<y)-1).toString(32),a>>=y,c-=y,pr=1<<32-Vt(t)+c|n<<c|a,mr=f+e}else pr=1<<f|n<<c|a,mr=e}function bu(e){e.return!==null&&(kr(e,1),np(e,1,0))}function wu(e){for(;e===cs;)cs=ea[--ta],ea[ta]=null,Fa=ea[--ta],ea[ta]=null;for(;e===Zr;)Zr=Zn[--Kn],Zn[Kn]=null,mr=Zn[--Kn],Zn[Kn]=null,pr=Zn[--Kn],Zn[Kn]=null}function rp(e,t){Zn[Kn++]=pr,Zn[Kn++]=mr,Zn[Kn++]=Zr,pr=t.id,mr=t.overflow,Zr=e}var pn=null,Ut=null,ht=!1,Kr=null,Jn=!1,Su=Error(s(519));function Jr(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $a(Pn(t,e)),Su}function lp(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[vt]=e,t[Dt]=a,n){case"dialog":it("cancel",t),it("close",t);break;case"iframe":case"object":case"embed":it("load",t);break;case"video":case"audio":for(n=0;n<ho.length;n++)it(ho[n],t);break;case"source":it("error",t);break;case"img":case"image":case"link":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"input":it("invalid",t),Qt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":it("invalid",t);break;case"textarea":it("invalid",t),Fl(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||wh(t.textContent,n)?(a.popover!=null&&(it("beforetoggle",t),it("toggle",t)),a.onScroll!=null&&it("scroll",t),a.onScrollEnd!=null&&it("scrollend",t),a.onClick!=null&&(t.onclick=Nr),t=!0):t=!1,t||Jr(e,!0)}function ap(e){for(pn=e.return;pn;)switch(pn.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:pn=pn.return}}function na(e){if(e!==pn)return!1;if(!ht)return ap(e),ht=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Vc(e.type,e.memoizedProps)),n=!n),n&&Ut&&Jr(e),ap(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ut=Th(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ut=Th(e)}else t===27?(t=Ut,pl(e.type)?(e=Fc,Fc=null,Ut=e):Ut=t):Ut=pn?tr(e.stateNode.nextSibling):null;return!0}function kl(){Ut=pn=null,ht=!1}function Nu(){var e=Kr;return e!==null&&(On===null?On=e:On.push.apply(On,e),Kr=null),e}function $a(e){Kr===null?Kr=[e]:Kr.push(e)}var ju=T(null),Ml=null,Mr=null;function el(e,t,n){O(ju,t._currentValue),t._currentValue=n}function Or(e){e._currentValue=ju.current,B(ju)}function Cu(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function ku(e,t,n,a){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var y=c.child;f=f.firstContext;e:for(;f!==null;){var k=f;f=c;for(var H=0;H<t.length;H++)if(k.context===t[H]){f.lanes|=n,k=f.alternate,k!==null&&(k.lanes|=n),Cu(f.return,n,e),a||(y=null);break e}f=k.next}}else if(c.tag===18){if(y=c.return,y===null)throw Error(s(341));y.lanes|=n,f=y.alternate,f!==null&&(f.lanes|=n),Cu(y,n,e),y=null}else y=c.child;if(y!==null)y.return=c;else for(y=c;y!==null;){if(y===e){y=null;break}if(c=y.sibling,c!==null){c.return=y.return,y=c;break}y=y.return}c=y}}function ra(e,t,n,a){e=null;for(var c=t,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var y=c.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var k=c.type;Dn(c.pendingProps.value,y.value)||(e!==null?e.push(k):e=[k])}}else if(c===J.current){if(y=c.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(bo):e=[bo])}c=c.return}e!==null&&ku(t,e,n,a),t.flags|=262144}function ds(e){for(e=e.firstContext;e!==null;){if(!Dn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ol(e){Ml=e,Mr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function mn(e){return op(Ml,e)}function fs(e,t){return Ml===null&&Ol(e),op(e,t)}function op(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Mr===null){if(e===null)throw Error(s(308));Mr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Mr=Mr.next=t;return n}var My=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Oy=r.unstable_scheduleCallback,Ey=r.unstable_NormalPriority,Jt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mu(){return{controller:new My,data:new Map,refCount:0}}function Ya(e){e.refCount--,e.refCount===0&&Oy(Ey,function(){e.controller.abort()})}var Qa=null,Ou=0,la=0,aa=null;function Ty(e,t){if(Qa===null){var n=Qa=[];Ou=0,la=Lc(),aa={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Ou++,t.then(sp,sp),t}function sp(){if(--Ou===0&&Qa!==null){aa!==null&&(aa.status="fulfilled");var e=Qa;Qa=null,la=0,aa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ly(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(c){n.push(c)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var c=0;c<n.length;c++)(0,n[c])(t)},function(c){for(a.status="rejected",a.reason=c,c=0;c<n.length;c++)(0,n[c])(void 0)}),a}var ip=D.S;D.S=function(e,t){Fm=Ze(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Ty(e,t),ip!==null&&ip(e,t)};var El=T(null);function Eu(){var e=El.current;return e!==null?e:zt.pooledCache}function ps(e,t){t===null?O(El,El.current):O(El,t.pool)}function up(){var e=Eu();return e===null?null:{parent:Jt._currentValue,pool:e}}var oa=Error(s(460)),Tu=Error(s(474)),ms=Error(s(542)),hs={then:function(){}};function cp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function dp(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Nr,Nr),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,pp(e),e;default:if(typeof t.status=="string")t.then(Nr,Nr);else{if(e=zt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=a}},function(a){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,pp(e),e}throw Ll=t,oa}}function Tl(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ll=n,oa):n}}var Ll=null;function fp(){if(Ll===null)throw Error(s(459));var e=Ll;return Ll=null,e}function pp(e){if(e===oa||e===ms)throw Error(s(483))}var sa=null,Xa=0;function gs(e){var t=Xa;return Xa+=1,sa===null&&(sa=[]),dp(sa,e,t)}function Pa(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function xs(e,t){throw t.$$typeof===N?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function mp(e){function t(Y,q){if(e){var P=Y.deletions;P===null?(Y.deletions=[q],Y.flags|=16):P.push(q)}}function n(Y,q){if(!e)return null;for(;q!==null;)t(Y,q),q=q.sibling;return null}function a(Y){for(var q=new Map;Y!==null;)Y.key!==null?q.set(Y.key,Y):q.set(Y.index,Y),Y=Y.sibling;return q}function c(Y,q){return Y=Cr(Y,q),Y.index=0,Y.sibling=null,Y}function f(Y,q,P){return Y.index=P,e?(P=Y.alternate,P!==null?(P=P.index,P<q?(Y.flags|=67108866,q):P):(Y.flags|=67108866,q)):(Y.flags|=1048576,q)}function y(Y){return e&&Y.alternate===null&&(Y.flags|=67108866),Y}function k(Y,q,P,me){return q===null||q.tag!==6?(q=yu(P,Y.mode,me),q.return=Y,q):(q=c(q,P),q.return=Y,q)}function H(Y,q,P,me){var Ie=P.type;return Ie===S?de(Y,q,P.props.children,me,P.key):q!==null&&(q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===I&&Tl(Ie)===q.type)?(q=c(q,P.props),Pa(q,P),q.return=Y,q):(q=us(P.type,P.key,P.props,null,Y.mode,me),Pa(q,P),q.return=Y,q)}function Z(Y,q,P,me){return q===null||q.tag!==4||q.stateNode.containerInfo!==P.containerInfo||q.stateNode.implementation!==P.implementation?(q=vu(P,Y.mode,me),q.return=Y,q):(q=c(q,P.children||[]),q.return=Y,q)}function de(Y,q,P,me,Ie){return q===null||q.tag!==7?(q=Cl(P,Y.mode,me,Ie),q.return=Y,q):(q=c(q,P),q.return=Y,q)}function he(Y,q,P){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=yu(""+q,Y.mode,P),q.return=Y,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case C:return P=us(q.type,q.key,q.props,null,Y.mode,P),Pa(P,q),P.return=Y,P;case w:return q=vu(q,Y.mode,P),q.return=Y,q;case I:return q=Tl(q),he(Y,q,P)}if(re(q)||K(q))return q=Cl(q,Y.mode,P,null),q.return=Y,q;if(typeof q.then=="function")return he(Y,gs(q),P);if(q.$$typeof===z)return he(Y,fs(Y,q),P);xs(Y,q)}return null}function te(Y,q,P,me){var Ie=q!==null?q.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return Ie!==null?null:k(Y,q,""+P,me);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case C:return P.key===Ie?H(Y,q,P,me):null;case w:return P.key===Ie?Z(Y,q,P,me):null;case I:return P=Tl(P),te(Y,q,P,me)}if(re(P)||K(P))return Ie!==null?null:de(Y,q,P,me,null);if(typeof P.then=="function")return te(Y,q,gs(P),me);if(P.$$typeof===z)return te(Y,q,fs(Y,P),me);xs(Y,P)}return null}function ie(Y,q,P,me,Ie){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return Y=Y.get(P)||null,k(q,Y,""+me,Ie);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case C:return Y=Y.get(me.key===null?P:me.key)||null,H(q,Y,me,Ie);case w:return Y=Y.get(me.key===null?P:me.key)||null,Z(q,Y,me,Ie);case I:return me=Tl(me),ie(Y,q,P,me,Ie)}if(re(me)||K(me))return Y=Y.get(P)||null,de(q,Y,me,Ie,null);if(typeof me.then=="function")return ie(Y,q,P,gs(me),Ie);if(me.$$typeof===z)return ie(Y,q,P,fs(q,me),Ie);xs(q,me)}return null}function Te(Y,q,P,me){for(var Ie=null,bt=null,De=q,at=q=0,dt=null;De!==null&&at<P.length;at++){De.index>at?(dt=De,De=null):dt=De.sibling;var wt=te(Y,De,P[at],me);if(wt===null){De===null&&(De=dt);break}e&&De&&wt.alternate===null&&t(Y,De),q=f(wt,q,at),bt===null?Ie=wt:bt.sibling=wt,bt=wt,De=dt}if(at===P.length)return n(Y,De),ht&&kr(Y,at),Ie;if(De===null){for(;at<P.length;at++)De=he(Y,P[at],me),De!==null&&(q=f(De,q,at),bt===null?Ie=De:bt.sibling=De,bt=De);return ht&&kr(Y,at),Ie}for(De=a(De);at<P.length;at++)dt=ie(De,Y,at,P[at],me),dt!==null&&(e&&dt.alternate!==null&&De.delete(dt.key===null?at:dt.key),q=f(dt,q,at),bt===null?Ie=dt:bt.sibling=dt,bt=dt);return e&&De.forEach(function(yl){return t(Y,yl)}),ht&&kr(Y,at),Ie}function qe(Y,q,P,me){if(P==null)throw Error(s(151));for(var Ie=null,bt=null,De=q,at=q=0,dt=null,wt=P.next();De!==null&&!wt.done;at++,wt=P.next()){De.index>at?(dt=De,De=null):dt=De.sibling;var yl=te(Y,De,wt.value,me);if(yl===null){De===null&&(De=dt);break}e&&De&&yl.alternate===null&&t(Y,De),q=f(yl,q,at),bt===null?Ie=yl:bt.sibling=yl,bt=yl,De=dt}if(wt.done)return n(Y,De),ht&&kr(Y,at),Ie;if(De===null){for(;!wt.done;at++,wt=P.next())wt=he(Y,wt.value,me),wt!==null&&(q=f(wt,q,at),bt===null?Ie=wt:bt.sibling=wt,bt=wt);return ht&&kr(Y,at),Ie}for(De=a(De);!wt.done;at++,wt=P.next())wt=ie(De,Y,at,wt.value,me),wt!==null&&(e&&wt.alternate!==null&&De.delete(wt.key===null?at:wt.key),q=f(wt,q,at),bt===null?Ie=wt:bt.sibling=wt,bt=wt);return e&&De.forEach(function(Gv){return t(Y,Gv)}),ht&&kr(Y,at),Ie}function Rt(Y,q,P,me){if(typeof P=="object"&&P!==null&&P.type===S&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case C:e:{for(var Ie=P.key;q!==null;){if(q.key===Ie){if(Ie=P.type,Ie===S){if(q.tag===7){n(Y,q.sibling),me=c(q,P.props.children),me.return=Y,Y=me;break e}}else if(q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===I&&Tl(Ie)===q.type){n(Y,q.sibling),me=c(q,P.props),Pa(me,P),me.return=Y,Y=me;break e}n(Y,q);break}else t(Y,q);q=q.sibling}P.type===S?(me=Cl(P.props.children,Y.mode,me,P.key),me.return=Y,Y=me):(me=us(P.type,P.key,P.props,null,Y.mode,me),Pa(me,P),me.return=Y,Y=me)}return y(Y);case w:e:{for(Ie=P.key;q!==null;){if(q.key===Ie)if(q.tag===4&&q.stateNode.containerInfo===P.containerInfo&&q.stateNode.implementation===P.implementation){n(Y,q.sibling),me=c(q,P.children||[]),me.return=Y,Y=me;break e}else{n(Y,q);break}else t(Y,q);q=q.sibling}me=vu(P,Y.mode,me),me.return=Y,Y=me}return y(Y);case I:return P=Tl(P),Rt(Y,q,P,me)}if(re(P))return Te(Y,q,P,me);if(K(P)){if(Ie=K(P),typeof Ie!="function")throw Error(s(150));return P=Ie.call(P),qe(Y,q,P,me)}if(typeof P.then=="function")return Rt(Y,q,gs(P),me);if(P.$$typeof===z)return Rt(Y,q,fs(Y,P),me);xs(Y,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,q!==null&&q.tag===6?(n(Y,q.sibling),me=c(q,P),me.return=Y,Y=me):(n(Y,q),me=yu(P,Y.mode,me),me.return=Y,Y=me),y(Y)):n(Y,q)}return function(Y,q,P,me){try{Xa=0;var Ie=Rt(Y,q,P,me);return sa=null,Ie}catch(De){if(De===oa||De===ms)throw De;var bt=zn(29,De,null,Y.mode);return bt.lanes=me,bt.return=Y,bt}}}var _l=mp(!0),hp=mp(!1),tl=!1;function Lu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _u(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function nl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function rl(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Ct&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,t=is(e),Kf(e,null,n),t}return ss(e,a,t,n),is(e)}function Za(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ye(e,n)}}function Au(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var c=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var y={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};f===null?c=f=y:f=f.next=y,n=n.next}while(n!==null);f===null?c=f=t:f=f.next=t}else c=f=t;n={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ru=!1;function Ka(){if(Ru){var e=aa;if(e!==null)throw e}}function Ja(e,t,n,a){Ru=!1;var c=e.updateQueue;tl=!1;var f=c.firstBaseUpdate,y=c.lastBaseUpdate,k=c.shared.pending;if(k!==null){c.shared.pending=null;var H=k,Z=H.next;H.next=null,y===null?f=Z:y.next=Z,y=H;var de=e.alternate;de!==null&&(de=de.updateQueue,k=de.lastBaseUpdate,k!==y&&(k===null?de.firstBaseUpdate=Z:k.next=Z,de.lastBaseUpdate=H))}if(f!==null){var he=c.baseState;y=0,de=Z=H=null,k=f;do{var te=k.lane&-536870913,ie=te!==k.lane;if(ie?(ct&te)===te:(a&te)===te){te!==0&&te===la&&(Ru=!0),de!==null&&(de=de.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Te=e,qe=k;te=t;var Rt=n;switch(qe.tag){case 1:if(Te=qe.payload,typeof Te=="function"){he=Te.call(Rt,he,te);break e}he=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=qe.payload,te=typeof Te=="function"?Te.call(Rt,he,te):Te,te==null)break e;he=v({},he,te);break e;case 2:tl=!0}}te=k.callback,te!==null&&(e.flags|=64,ie&&(e.flags|=8192),ie=c.callbacks,ie===null?c.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:k.tag,payload:k.payload,callback:k.callback,next:null},de===null?(Z=de=ie,H=he):de=de.next=ie,y|=te;if(k=k.next,k===null){if(k=c.shared.pending,k===null)break;ie=k,k=ie.next,ie.next=null,c.lastBaseUpdate=ie,c.shared.pending=null}}while(!0);de===null&&(H=he),c.baseState=H,c.firstBaseUpdate=Z,c.lastBaseUpdate=de,f===null&&(c.shared.lanes=0),il|=y,e.lanes=y,e.memoizedState=he}}function gp(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function xp(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)gp(n[e],t)}var ia=T(null),ys=T(0);function yp(e,t){e=Br,O(ys,e),O(ia,t),Br=e|t.baseLanes}function Du(){O(ys,Br),O(ia,ia.current)}function zu(){Br=ys.current,B(ia),B(ys)}var Bn=T(null),er=null;function ll(e){var t=e.alternate;O(Xt,Xt.current&1),O(Bn,e),er===null&&(t===null||ia.current!==null||t.memoizedState!==null)&&(er=e)}function Bu(e){O(Xt,Xt.current),O(Bn,e),er===null&&(er=e)}function vp(e){e.tag===22?(O(Xt,Xt.current),O(Bn,e),er===null&&(er=e)):al()}function al(){O(Xt,Xt.current),O(Bn,Bn.current)}function In(e){B(Bn),er===e&&(er=null),B(Xt)}var Xt=T(0);function vs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||qc(n)||Wc(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Er=0,nt=null,_t=null,en=null,bs=!1,ua=!1,Al=!1,ws=0,eo=0,ca=null,_y=0;function Ft(){throw Error(s(321))}function Iu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Dn(e[n],t[n]))return!1;return!0}function Hu(e,t,n,a,c,f){return Er=f,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=e===null||e.memoizedState===null?nm:ec,Al=!1,f=n(a,c),Al=!1,ua&&(f=wp(t,n,a,c)),bp(e),f}function bp(e){D.H=ro;var t=_t!==null&&_t.next!==null;if(Er=0,en=_t=nt=null,bs=!1,eo=0,ca=null,t)throw Error(s(300));e===null||tn||(e=e.dependencies,e!==null&&ds(e)&&(tn=!0))}function wp(e,t,n,a){nt=e;var c=0;do{if(ua&&(ca=null),eo=0,ua=!1,25<=c)throw Error(s(301));if(c+=1,en=_t=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}D.H=rm,f=t(n,a)}while(ua);return f}function Ay(){var e=D.H,t=e.useState()[0];return t=typeof t.then=="function"?to(t):t,e=e.useState()[0],(_t!==null?_t.memoizedState:null)!==e&&(nt.flags|=1024),t}function Vu(){var e=ws!==0;return ws=0,e}function Uu(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Gu(e){if(bs){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}bs=!1}Er=0,en=_t=nt=null,ua=!1,eo=ws=0,ca=null}function wn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?nt.memoizedState=en=e:en=en.next=e,en}function Pt(){if(_t===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=_t.next;var t=en===null?nt.memoizedState:en.next;if(t!==null)en=t,_t=e;else{if(e===null)throw nt.alternate===null?Error(s(467)):Error(s(310));_t=e,e={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},en===null?nt.memoizedState=en=e:en=en.next=e}return en}function Ss(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function to(e){var t=eo;return eo+=1,ca===null&&(ca=[]),e=dp(ca,e,t),t=nt,(en===null?t.memoizedState:en.next)===null&&(t=t.alternate,D.H=t===null||t.memoizedState===null?nm:ec),e}function Ns(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return to(e);if(e.$$typeof===z)return mn(e)}throw Error(s(438,String(e)))}function qu(e){var t=null,n=nt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=nt.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Ss(),nt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=G;return t.index++,n}function Tr(e,t){return typeof t=="function"?t(e):t}function js(e){var t=Pt();return Wu(t,_t,e)}function Wu(e,t,n){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var c=e.baseQueue,f=a.pending;if(f!==null){if(c!==null){var y=c.next;c.next=f.next,f.next=y}t.baseQueue=c=f,a.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{t=c.next;var k=y=null,H=null,Z=t,de=!1;do{var he=Z.lane&-536870913;if(he!==Z.lane?(ct&he)===he:(Er&he)===he){var te=Z.revertLane;if(te===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),he===la&&(de=!0);else if((Er&te)===te){Z=Z.next,te===la&&(de=!0);continue}else he={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},H===null?(k=H=he,y=f):H=H.next=he,nt.lanes|=te,il|=te;he=Z.action,Al&&n(f,he),f=Z.hasEagerState?Z.eagerState:n(f,he)}else te={lane:he,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},H===null?(k=H=te,y=f):H=H.next=te,nt.lanes|=he,il|=he;Z=Z.next}while(Z!==null&&Z!==t);if(H===null?y=f:H.next=k,!Dn(f,e.memoizedState)&&(tn=!0,de&&(n=aa,n!==null)))throw n;e.memoizedState=f,e.baseState=y,e.baseQueue=H,a.lastRenderedState=f}return c===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Fu(e){var t=Pt(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var a=n.dispatch,c=n.pending,f=t.memoizedState;if(c!==null){n.pending=null;var y=c=c.next;do f=e(f,y.action),y=y.next;while(y!==c);Dn(f,t.memoizedState)||(tn=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,a]}function Sp(e,t,n){var a=nt,c=Pt(),f=ht;if(f){if(n===void 0)throw Error(s(407));n=n()}else n=t();var y=!Dn((_t||c).memoizedState,n);if(y&&(c.memoizedState=n,tn=!0),c=c.queue,Qu(Cp.bind(null,a,c,e),[e]),c.getSnapshot!==t||y||en!==null&&en.memoizedState.tag&1){if(a.flags|=2048,da(9,{destroy:void 0},jp.bind(null,a,c,n,t),null),zt===null)throw Error(s(349));f||(Er&127)!==0||Np(a,t,n)}return n}function Np(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=nt.updateQueue,t===null?(t=Ss(),nt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function jp(e,t,n,a){t.value=n,t.getSnapshot=a,kp(t)&&Mp(e)}function Cp(e,t,n){return n(function(){kp(t)&&Mp(e)})}function kp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dn(e,n)}catch{return!0}}function Mp(e){var t=jl(e,2);t!==null&&En(t,e,2)}function $u(e){var t=wn();if(typeof e=="function"){var n=e;if(e=n(),Al){jt(!0);try{n()}finally{jt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:e},t}function Op(e,t,n,a){return e.baseState=n,Wu(e,_t,typeof a=="function"?a:Tr)}function Ry(e,t,n,a,c){if(Ms(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};D.T!==null?n(!0):f.isTransition=!1,a(f),n=t.pending,n===null?(f.next=t.pending=f,Ep(t,f)):(f.next=n.next,t.pending=n.next=f)}}function Ep(e,t){var n=t.action,a=t.payload,c=e.state;if(t.isTransition){var f=D.T,y={};D.T=y;try{var k=n(c,a),H=D.S;H!==null&&H(y,k),Tp(e,t,k)}catch(Z){Yu(e,t,Z)}finally{f!==null&&y.types!==null&&(f.types=y.types),D.T=f}}else try{f=n(c,a),Tp(e,t,f)}catch(Z){Yu(e,t,Z)}}function Tp(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Lp(e,t,a)},function(a){return Yu(e,t,a)}):Lp(e,t,n)}function Lp(e,t,n){t.status="fulfilled",t.value=n,_p(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ep(e,n)))}function Yu(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,_p(t),t=t.next;while(t!==a)}e.action=null}function _p(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ap(e,t){return t}function Rp(e,t){if(ht){var n=zt.formState;if(n!==null){e:{var a=nt;if(ht){if(Ut){t:{for(var c=Ut,f=Jn;c.nodeType!==8;){if(!f){c=null;break t}if(c=tr(c.nextSibling),c===null){c=null;break t}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){Ut=tr(c.nextSibling),a=c.data==="F!";break e}}Jr(a)}a=!1}a&&(t=n[0])}}return n=wn(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:t},n.queue=a,n=Jp.bind(null,nt,a),a.dispatch=n,a=$u(!1),f=Ju.bind(null,nt,!1,a.queue),a=wn(),c={state:t,dispatch:null,action:e,pending:null},a.queue=c,n=Ry.bind(null,nt,c,f,n),c.dispatch=n,a.memoizedState=e,[t,n,!1]}function Dp(e){var t=Pt();return zp(t,_t,e)}function zp(e,t,n){if(t=Wu(e,t,Ap)[0],e=js(Tr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=to(t)}catch(y){throw y===oa?ms:y}else a=t;t=Pt();var c=t.queue,f=c.dispatch;return n!==t.memoizedState&&(nt.flags|=2048,da(9,{destroy:void 0},Dy.bind(null,c,n),null)),[a,f,e]}function Dy(e,t){e.action=t}function Bp(e){var t=Pt(),n=_t;if(n!==null)return zp(t,n,e);Pt(),t=t.memoizedState,n=Pt();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function da(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=nt.updateQueue,t===null&&(t=Ss(),nt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Ip(){return Pt().memoizedState}function Cs(e,t,n,a){var c=wn();nt.flags|=e,c.memoizedState=da(1|t,{destroy:void 0},n,a===void 0?null:a)}function ks(e,t,n,a){var c=Pt();a=a===void 0?null:a;var f=c.memoizedState.inst;_t!==null&&a!==null&&Iu(a,_t.memoizedState.deps)?c.memoizedState=da(t,f,n,a):(nt.flags|=e,c.memoizedState=da(1|t,f,n,a))}function Hp(e,t){Cs(8390656,8,e,t)}function Qu(e,t){ks(2048,8,e,t)}function zy(e){nt.flags|=4;var t=nt.updateQueue;if(t===null)t=Ss(),nt.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Vp(e){var t=Pt().memoizedState;return zy({ref:t,nextImpl:e}),function(){if((Ct&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Up(e,t){return ks(4,2,e,t)}function Gp(e,t){return ks(4,4,e,t)}function qp(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wp(e,t,n){n=n!=null?n.concat([e]):null,ks(4,4,qp.bind(null,t,e),n)}function Xu(){}function Fp(e,t){var n=Pt();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&Iu(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function $p(e,t){var n=Pt();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&Iu(t,a[1]))return a[0];if(a=e(),Al){jt(!0);try{e()}finally{jt(!1)}}return n.memoizedState=[a,t],a}function Pu(e,t,n){return n===void 0||(Er&1073741824)!==0&&(ct&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Ym(),nt.lanes|=e,il|=e,n)}function Yp(e,t,n,a){return Dn(n,t)?n:ia.current!==null?(e=Pu(e,n,a),Dn(e,t)||(tn=!0),e):(Er&42)===0||(Er&1073741824)!==0&&(ct&261930)===0?(tn=!0,e.memoizedState=n):(e=Ym(),nt.lanes|=e,il|=e,t)}function Qp(e,t,n,a,c){var f=$.p;$.p=f!==0&&8>f?f:8;var y=D.T,k={};D.T=k,Ju(e,!1,t,n);try{var H=c(),Z=D.S;if(Z!==null&&Z(k,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var de=Ly(H,a);no(e,t,de,Un(e))}else no(e,t,a,Un(e))}catch(he){no(e,t,{then:function(){},status:"rejected",reason:he},Un())}finally{$.p=f,y!==null&&k.types!==null&&(y.types=k.types),D.T=y}}function By(){}function Zu(e,t,n,a){if(e.tag!==5)throw Error(s(476));var c=Xp(e).queue;Qp(e,c,t,fe,n===null?By:function(){return Pp(e),n(a)})}function Xp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:fe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Pp(e){var t=Xp(e);t.next===null&&(t=e.alternate.memoizedState),no(e,t.next.queue,{},Un())}function Ku(){return mn(bo)}function Zp(){return Pt().memoizedState}function Kp(){return Pt().memoizedState}function Iy(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Un();e=nl(n);var a=rl(t,e,n);a!==null&&(En(a,t,n),Za(a,t,n)),t={cache:Mu()},e.payload=t;return}t=t.return}}function Hy(e,t,n){var a=Un();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ms(e)?em(t,n):(n=gu(e,t,n,a),n!==null&&(En(n,e,a),tm(n,t,a)))}function Jp(e,t,n){var a=Un();no(e,t,n,a)}function no(e,t,n,a){var c={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ms(e))em(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,k=f(y,n);if(c.hasEagerState=!0,c.eagerState=k,Dn(k,y))return ss(e,t,c,0),zt===null&&os(),!1}catch{}if(n=gu(e,t,c,a),n!==null)return En(n,e,a),tm(n,t,a),!0}return!1}function Ju(e,t,n,a){if(a={lane:2,revertLane:Lc(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ms(e)){if(t)throw Error(s(479))}else t=gu(e,n,a,2),t!==null&&En(t,e,2)}function Ms(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function em(e,t){ua=bs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tm(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ye(e,n)}}var ro={readContext:mn,use:Ns,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};ro.useEffectEvent=Ft;var nm={readContext:mn,use:Ns,useCallback:function(e,t){return wn().memoizedState=[e,t===void 0?null:t],e},useContext:mn,useEffect:Hp,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Cs(4194308,4,qp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Cs(4194308,4,e,t)},useInsertionEffect:function(e,t){Cs(4,2,e,t)},useMemo:function(e,t){var n=wn();t=t===void 0?null:t;var a=e();if(Al){jt(!0);try{e()}finally{jt(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=wn();if(n!==void 0){var c=n(t);if(Al){jt(!0);try{n(t)}finally{jt(!1)}}}else c=t;return a.memoizedState=a.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},a.queue=e,e=e.dispatch=Hy.bind(null,nt,e),[a.memoizedState,e]},useRef:function(e){var t=wn();return e={current:e},t.memoizedState=e},useState:function(e){e=$u(e);var t=e.queue,n=Jp.bind(null,nt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Xu,useDeferredValue:function(e,t){var n=wn();return Pu(n,e,t)},useTransition:function(){var e=$u(!1);return e=Qp.bind(null,nt,e.queue,!0,!1),wn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=nt,c=wn();if(ht){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),zt===null)throw Error(s(349));(ct&127)!==0||Np(a,t,n)}c.memoizedState=n;var f={value:n,getSnapshot:t};return c.queue=f,Hp(Cp.bind(null,a,f,e),[e]),a.flags|=2048,da(9,{destroy:void 0},jp.bind(null,a,f,n,t),null),n},useId:function(){var e=wn(),t=zt.identifierPrefix;if(ht){var n=mr,a=pr;n=(a&~(1<<32-Vt(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=ws++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=_y++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ku,useFormState:Rp,useActionState:Rp,useOptimistic:function(e){var t=wn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ju.bind(null,nt,!0,n),n.dispatch=t,[e,t]},useMemoCache:qu,useCacheRefresh:function(){return wn().memoizedState=Iy.bind(null,nt)},useEffectEvent:function(e){var t=wn(),n={impl:e};return t.memoizedState=n,function(){if((Ct&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},ec={readContext:mn,use:Ns,useCallback:Fp,useContext:mn,useEffect:Qu,useImperativeHandle:Wp,useInsertionEffect:Up,useLayoutEffect:Gp,useMemo:$p,useReducer:js,useRef:Ip,useState:function(){return js(Tr)},useDebugValue:Xu,useDeferredValue:function(e,t){var n=Pt();return Yp(n,_t.memoizedState,e,t)},useTransition:function(){var e=js(Tr)[0],t=Pt().memoizedState;return[typeof e=="boolean"?e:to(e),t]},useSyncExternalStore:Sp,useId:Zp,useHostTransitionStatus:Ku,useFormState:Dp,useActionState:Dp,useOptimistic:function(e,t){var n=Pt();return Op(n,_t,e,t)},useMemoCache:qu,useCacheRefresh:Kp};ec.useEffectEvent=Vp;var rm={readContext:mn,use:Ns,useCallback:Fp,useContext:mn,useEffect:Qu,useImperativeHandle:Wp,useInsertionEffect:Up,useLayoutEffect:Gp,useMemo:$p,useReducer:Fu,useRef:Ip,useState:function(){return Fu(Tr)},useDebugValue:Xu,useDeferredValue:function(e,t){var n=Pt();return _t===null?Pu(n,e,t):Yp(n,_t.memoizedState,e,t)},useTransition:function(){var e=Fu(Tr)[0],t=Pt().memoizedState;return[typeof e=="boolean"?e:to(e),t]},useSyncExternalStore:Sp,useId:Zp,useHostTransitionStatus:Ku,useFormState:Bp,useActionState:Bp,useOptimistic:function(e,t){var n=Pt();return _t!==null?Op(n,_t,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qu,useCacheRefresh:Kp};rm.useEffectEvent=Vp;function tc(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:v({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var nc={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Un(),c=nl(a);c.payload=t,n!=null&&(c.callback=n),t=rl(e,c,a),t!==null&&(En(t,e,a),Za(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Un(),c=nl(a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=rl(e,c,a),t!==null&&(En(t,e,a),Za(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Un(),a=nl(n);a.tag=2,t!=null&&(a.callback=t),t=rl(e,a,n),t!==null&&(En(t,e,n),Za(t,e,n))}};function lm(e,t,n,a,c,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,y):t.prototype&&t.prototype.isPureReactComponent?!qa(n,a)||!qa(c,f):!0}function am(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&nc.enqueueReplaceState(t,t.state,null)}function Rl(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=v({},n));for(var c in e)n[c]===void 0&&(n[c]=e[c])}return n}function om(e){as(e)}function sm(e){console.error(e)}function im(e){as(e)}function Os(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function um(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function rc(e,t,n){return n=nl(n),n.tag=3,n.payload={element:null},n.callback=function(){Os(e,t)},n}function cm(e){return e=nl(e),e.tag=3,e}function dm(e,t,n,a){var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=a.value;e.payload=function(){return c(f)},e.callback=function(){um(t,n,a)}}var y=n.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){um(t,n,a),typeof c!="function"&&(ul===null?ul=new Set([this]):ul.add(this));var k=a.stack;this.componentDidCatch(a.value,{componentStack:k!==null?k:""})})}function Vy(e,t,n,a,c){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&ra(t,n,c,!0),n=Bn.current,n!==null){switch(n.tag){case 31:case 13:return er===null?Vs():n.alternate===null&&$t===0&&($t=3),n.flags&=-257,n.flags|=65536,n.lanes=c,a===hs?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Oc(e,a,c)),!1;case 22:return n.flags|=65536,a===hs?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Oc(e,a,c)),!1}throw Error(s(435,n.tag))}return Oc(e,a,c),Vs(),!1}if(ht)return t=Bn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,a!==Su&&(e=Error(s(422),{cause:a}),$a(Pn(e,n)))):(a!==Su&&(t=Error(s(423),{cause:a}),$a(Pn(t,n))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,a=Pn(a,n),c=rc(e.stateNode,a,c),Au(e,c),$t!==4&&($t=2)),!1;var f=Error(s(520),{cause:a});if(f=Pn(f,n),fo===null?fo=[f]:fo.push(f),$t!==4&&($t=2),t===null)return!0;a=Pn(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=c&-c,n.lanes|=e,e=rc(n.stateNode,a,e),Au(n,e),!1;case 1:if(t=n.type,f=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ul===null||!ul.has(f))))return n.flags|=65536,c&=-c,n.lanes|=c,c=cm(c),dm(c,e,n,a),Au(n,c),!1}n=n.return}while(n!==null);return!1}var lc=Error(s(461)),tn=!1;function hn(e,t,n,a){t.child=e===null?hp(t,null,n,a):_l(t,e.child,n,a)}function fm(e,t,n,a,c){n=n.render;var f=t.ref;if("ref"in a){var y={};for(var k in a)k!=="ref"&&(y[k]=a[k])}else y=a;return Ol(t),a=Hu(e,t,n,y,f,c),k=Vu(),e!==null&&!tn?(Uu(e,t,c),Lr(e,t,c)):(ht&&k&&bu(t),t.flags|=1,hn(e,t,a,c),t.child)}function pm(e,t,n,a,c){if(e===null){var f=n.type;return typeof f=="function"&&!xu(f)&&f.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=f,mm(e,t,f,a,c)):(e=us(n.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!fc(e,c)){var y=f.memoizedProps;if(n=n.compare,n=n!==null?n:qa,n(y,a)&&e.ref===t.ref)return Lr(e,t,c)}return t.flags|=1,e=Cr(f,a),e.ref=t.ref,e.return=t,t.child=e}function mm(e,t,n,a,c){if(e!==null){var f=e.memoizedProps;if(qa(f,a)&&e.ref===t.ref)if(tn=!1,t.pendingProps=a=f,fc(e,c))(e.flags&131072)!==0&&(tn=!0);else return t.lanes=e.lanes,Lr(e,t,c)}return ac(e,t,n,a,c)}function hm(e,t,n,a){var c=a.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|n:n,e!==null){for(a=t.child=e.child,c=0;a!==null;)c=c|a.lanes|a.childLanes,a=a.sibling;a=c&~f}else a=0,t.child=null;return gm(e,t,f,n,a)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ps(t,f!==null?f.cachePool:null),f!==null?yp(t,f):Du(),vp(t);else return a=t.lanes=536870912,gm(e,t,f!==null?f.baseLanes|n:n,n,a)}else f!==null?(ps(t,f.cachePool),yp(t,f),al(),t.memoizedState=null):(e!==null&&ps(t,null),Du(),al());return hn(e,t,c,n),t.child}function lo(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function gm(e,t,n,a,c){var f=Eu();return f=f===null?null:{parent:Jt._currentValue,pool:f},t.memoizedState={baseLanes:n,cachePool:f},e!==null&&ps(t,null),Du(),vp(t),e!==null&&ra(e,t,a,!0),t.childLanes=c,null}function Es(e,t){return t=Ls({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function xm(e,t,n){return _l(t,e.child,null,n),e=Es(t,t.pendingProps),e.flags|=2,In(t),t.memoizedState=null,e}function Uy(e,t,n){var a=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ht){if(a.mode==="hidden")return e=Es(t,a),t.lanes=536870912,lo(null,e);if(Bu(t),(e=Ut)?(e=Eh(e,Jn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zr!==null?{id:pr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},n=ep(e),n.return=t,t.child=n,pn=t,Ut=null)):e=null,e===null)throw Jr(t);return t.lanes=536870912,null}return Es(t,a)}var f=e.memoizedState;if(f!==null){var y=f.dehydrated;if(Bu(t),c)if(t.flags&256)t.flags&=-257,t=xm(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(tn||ra(e,t,n,!1),c=(n&e.childLanes)!==0,tn||c){if(a=zt,a!==null&&(y=Re(a,n),y!==0&&y!==f.retryLane))throw f.retryLane=y,jl(e,y),En(a,e,y),lc;Vs(),t=xm(e,t,n)}else e=f.treeContext,Ut=tr(y.nextSibling),pn=t,ht=!0,Kr=null,Jn=!1,e!==null&&rp(t,e),t=Es(t,a),t.flags|=4096;return t}return e=Cr(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ts(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function ac(e,t,n,a,c){return Ol(t),n=Hu(e,t,n,a,void 0,c),a=Vu(),e!==null&&!tn?(Uu(e,t,c),Lr(e,t,c)):(ht&&a&&bu(t),t.flags|=1,hn(e,t,n,c),t.child)}function ym(e,t,n,a,c,f){return Ol(t),t.updateQueue=null,n=wp(t,a,n,c),bp(e),a=Vu(),e!==null&&!tn?(Uu(e,t,f),Lr(e,t,f)):(ht&&a&&bu(t),t.flags|=1,hn(e,t,n,f),t.child)}function vm(e,t,n,a,c){if(Ol(t),t.stateNode===null){var f=Jl,y=n.contextType;typeof y=="object"&&y!==null&&(f=mn(y)),f=new n(a,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=nc,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=a,f.state=t.memoizedState,f.refs={},Lu(t),y=n.contextType,f.context=typeof y=="object"&&y!==null?mn(y):Jl,f.state=t.memoizedState,y=n.getDerivedStateFromProps,typeof y=="function"&&(tc(t,n,y,a),f.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&nc.enqueueReplaceState(f,f.state,null),Ja(t,a,f,c),Ka(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){f=t.stateNode;var k=t.memoizedProps,H=Rl(n,k);f.props=H;var Z=f.context,de=n.contextType;y=Jl,typeof de=="object"&&de!==null&&(y=mn(de));var he=n.getDerivedStateFromProps;de=typeof he=="function"||typeof f.getSnapshotBeforeUpdate=="function",k=t.pendingProps!==k,de||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(k||Z!==y)&&am(t,f,a,y),tl=!1;var te=t.memoizedState;f.state=te,Ja(t,a,f,c),Ka(),Z=t.memoizedState,k||te!==Z||tl?(typeof he=="function"&&(tc(t,n,he,a),Z=t.memoizedState),(H=tl||lm(t,n,H,a,te,Z,y))?(de||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=Z),f.props=a,f.state=Z,f.context=y,a=H):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,_u(e,t),y=t.memoizedProps,de=Rl(n,y),f.props=de,he=t.pendingProps,te=f.context,Z=n.contextType,H=Jl,typeof Z=="object"&&Z!==null&&(H=mn(Z)),k=n.getDerivedStateFromProps,(Z=typeof k=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==he||te!==H)&&am(t,f,a,H),tl=!1,te=t.memoizedState,f.state=te,Ja(t,a,f,c),Ka();var ie=t.memoizedState;y!==he||te!==ie||tl||e!==null&&e.dependencies!==null&&ds(e.dependencies)?(typeof k=="function"&&(tc(t,n,k,a),ie=t.memoizedState),(de=tl||lm(t,n,de,a,te,ie,H)||e!==null&&e.dependencies!==null&&ds(e.dependencies))?(Z||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,ie,H),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,ie,H)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ie),f.props=a,f.state=ie,f.context=H,a=de):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),a=!1)}return f=a,Ts(e,t),a=(t.flags&128)!==0,f||a?(f=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&a?(t.child=_l(t,e.child,null,c),t.child=_l(t,null,n,c)):hn(e,t,n,c),t.memoizedState=f.state,e=t.child):e=Lr(e,t,c),e}function bm(e,t,n,a){return kl(),t.flags|=256,hn(e,t,n,a),t.child}var oc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sc(e){return{baseLanes:e,cachePool:up()}}function ic(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Vn),e}function wm(e,t,n){var a=t.pendingProps,c=!1,f=(t.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(Xt.current&2)!==0),y&&(c=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(ht){if(c?ll(t):al(),(e=Ut)?(e=Eh(e,Jn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zr!==null?{id:pr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},n=ep(e),n.return=t,t.child=n,pn=t,Ut=null)):e=null,e===null)throw Jr(t);return Wc(e)?t.lanes=32:t.lanes=536870912,null}var k=a.children;return a=a.fallback,c?(al(),c=t.mode,k=Ls({mode:"hidden",children:k},c),a=Cl(a,c,n,null),k.return=t,a.return=t,k.sibling=a,t.child=k,a=t.child,a.memoizedState=sc(n),a.childLanes=ic(e,y,n),t.memoizedState=oc,lo(null,a)):(ll(t),uc(t,k))}var H=e.memoizedState;if(H!==null&&(k=H.dehydrated,k!==null)){if(f)t.flags&256?(ll(t),t.flags&=-257,t=cc(e,t,n)):t.memoizedState!==null?(al(),t.child=e.child,t.flags|=128,t=null):(al(),k=a.fallback,c=t.mode,a=Ls({mode:"visible",children:a.children},c),k=Cl(k,c,n,null),k.flags|=2,a.return=t,k.return=t,a.sibling=k,t.child=a,_l(t,e.child,null,n),a=t.child,a.memoizedState=sc(n),a.childLanes=ic(e,y,n),t.memoizedState=oc,t=lo(null,a));else if(ll(t),Wc(k)){if(y=k.nextSibling&&k.nextSibling.dataset,y)var Z=y.dgst;y=Z,a=Error(s(419)),a.stack="",a.digest=y,$a({value:a,source:null,stack:null}),t=cc(e,t,n)}else if(tn||ra(e,t,n,!1),y=(n&e.childLanes)!==0,tn||y){if(y=zt,y!==null&&(a=Re(y,n),a!==0&&a!==H.retryLane))throw H.retryLane=a,jl(e,a),En(y,e,a),lc;qc(k)||Vs(),t=cc(e,t,n)}else qc(k)?(t.flags|=192,t.child=e.child,t=null):(e=H.treeContext,Ut=tr(k.nextSibling),pn=t,ht=!0,Kr=null,Jn=!1,e!==null&&rp(t,e),t=uc(t,a.children),t.flags|=4096);return t}return c?(al(),k=a.fallback,c=t.mode,H=e.child,Z=H.sibling,a=Cr(H,{mode:"hidden",children:a.children}),a.subtreeFlags=H.subtreeFlags&65011712,Z!==null?k=Cr(Z,k):(k=Cl(k,c,n,null),k.flags|=2),k.return=t,a.return=t,a.sibling=k,t.child=a,lo(null,a),a=t.child,k=e.child.memoizedState,k===null?k=sc(n):(c=k.cachePool,c!==null?(H=Jt._currentValue,c=c.parent!==H?{parent:H,pool:H}:c):c=up(),k={baseLanes:k.baseLanes|n,cachePool:c}),a.memoizedState=k,a.childLanes=ic(e,y,n),t.memoizedState=oc,lo(e.child,a)):(ll(t),n=e.child,e=n.sibling,n=Cr(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=n,t.memoizedState=null,n)}function uc(e,t){return t=Ls({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ls(e,t){return e=zn(22,e,null,t),e.lanes=0,e}function cc(e,t,n){return _l(t,e.child,null,n),e=uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Sm(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Cu(e.return,t,n)}function dc(e,t,n,a,c,f){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:c,treeForkCount:f}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=a,y.tail=n,y.tailMode=c,y.treeForkCount=f)}function Nm(e,t,n){var a=t.pendingProps,c=a.revealOrder,f=a.tail;a=a.children;var y=Xt.current,k=(y&2)!==0;if(k?(y=y&1|2,t.flags|=128):y&=1,O(Xt,y),hn(e,t,a,n),a=ht?Fa:0,!k&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sm(e,n,t);else if(e.tag===19)Sm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&vs(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),dc(t,!1,c,n,f,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&vs(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}dc(t,!0,n,null,f,a);break;case"together":dc(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function Lr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),il|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(ra(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=Cr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Cr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function fc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ds(e)))}function Gy(e,t,n){switch(t.tag){case 3:le(t,t.stateNode.containerInfo),el(t,Jt,e.memoizedState.cache),kl();break;case 27:case 5:Le(t);break;case 4:le(t,t.stateNode.containerInfo);break;case 10:el(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Bu(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(ll(t),t.flags|=128,null):(n&t.child.childLanes)!==0?wm(e,t,n):(ll(t),e=Lr(e,t,n),e!==null?e.sibling:null);ll(t);break;case 19:var c=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(ra(e,t,n,!1),a=(n&t.childLanes)!==0),c){if(a)return Nm(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),O(Xt,Xt.current),a)break;return null;case 22:return t.lanes=0,hm(e,t,n,t.pendingProps);case 24:el(t,Jt,e.memoizedState.cache)}return Lr(e,t,n)}function jm(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)tn=!0;else{if(!fc(e,n)&&(t.flags&128)===0)return tn=!1,Gy(e,t,n);tn=(e.flags&131072)!==0}else tn=!1,ht&&(t.flags&1048576)!==0&&np(t,Fa,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=Tl(t.elementType),t.type=e,typeof e=="function")xu(e)?(a=Rl(e,a),t.tag=1,t=vm(null,t,e,a,n)):(t.tag=0,t=ac(null,t,e,a,n));else{if(e!=null){var c=e.$$typeof;if(c===_){t.tag=11,t=fm(null,t,e,a,n);break e}else if(c===A){t.tag=14,t=pm(null,t,e,a,n);break e}}throw t=ae(e)||e,Error(s(306,t,""))}}return t;case 0:return ac(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,c=Rl(a,t.pendingProps),vm(e,t,a,c,n);case 3:e:{if(le(t,t.stateNode.containerInfo),e===null)throw Error(s(387));a=t.pendingProps;var f=t.memoizedState;c=f.element,_u(e,t),Ja(t,a,null,n);var y=t.memoizedState;if(a=y.cache,el(t,Jt,a),a!==f.cache&&ku(t,[Jt],n,!0),Ka(),a=y.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=bm(e,t,a,n);break e}else if(a!==c){c=Pn(Error(s(424)),t),$a(c),t=bm(e,t,a,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ut=tr(e.firstChild),pn=t,ht=!0,Kr=null,Jn=!0,n=hp(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kl(),a===c){t=Lr(e,t,n);break e}hn(e,t,a,n)}t=t.child}return t;case 26:return Ts(e,t),e===null?(n=Dh(t.type,null,t.pendingProps,null))?t.memoizedState=n:ht||(n=t.type,e=t.pendingProps,a=Ys(pe.current).createElement(n),a[vt]=t,a[Dt]=e,gn(a,n,e),Kt(a),t.stateNode=a):t.memoizedState=Dh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Le(t),e===null&&ht&&(a=t.stateNode=_h(t.type,t.pendingProps,pe.current),pn=t,Jn=!0,c=Ut,pl(t.type)?(Fc=c,Ut=tr(a.firstChild)):Ut=c),hn(e,t,t.pendingProps.children,n),Ts(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ht&&((c=a=Ut)&&(a=yv(a,t.type,t.pendingProps,Jn),a!==null?(t.stateNode=a,pn=t,Ut=tr(a.firstChild),Jn=!1,c=!0):c=!1),c||Jr(t)),Le(t),c=t.type,f=t.pendingProps,y=e!==null?e.memoizedProps:null,a=f.children,Vc(c,f)?a=null:y!==null&&Vc(c,y)&&(t.flags|=32),t.memoizedState!==null&&(c=Hu(e,t,Ay,null,null,n),bo._currentValue=c),Ts(e,t),hn(e,t,a,n),t.child;case 6:return e===null&&ht&&((e=n=Ut)&&(n=vv(n,t.pendingProps,Jn),n!==null?(t.stateNode=n,pn=t,Ut=null,e=!0):e=!1),e||Jr(t)),null;case 13:return wm(e,t,n);case 4:return le(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=_l(t,null,a,n):hn(e,t,a,n),t.child;case 11:return fm(e,t,t.type,t.pendingProps,n);case 7:return hn(e,t,t.pendingProps,n),t.child;case 8:return hn(e,t,t.pendingProps.children,n),t.child;case 12:return hn(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,el(t,t.type,a.value),hn(e,t,a.children,n),t.child;case 9:return c=t.type._context,a=t.pendingProps.children,Ol(t),c=mn(c),a=a(c),t.flags|=1,hn(e,t,a,n),t.child;case 14:return pm(e,t,t.type,t.pendingProps,n);case 15:return mm(e,t,t.type,t.pendingProps,n);case 19:return Nm(e,t,n);case 31:return Uy(e,t,n);case 22:return hm(e,t,n,t.pendingProps);case 24:return Ol(t),a=mn(Jt),e===null?(c=Eu(),c===null&&(c=zt,f=Mu(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=n),c=f),t.memoizedState={parent:a,cache:c},Lu(t),el(t,Jt,c)):((e.lanes&n)!==0&&(_u(e,t),Ja(t,null,null,n),Ka()),c=e.memoizedState,f=t.memoizedState,c.parent!==a?(c={parent:a,cache:a},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),el(t,Jt,a)):(a=f.cache,el(t,Jt,a),a!==c.cache&&ku(t,[Jt],n,!0))),hn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function _r(e){e.flags|=4}function pc(e,t,n,a,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Zm())e.flags|=8192;else throw Ll=hs,Tu}else e.flags&=-16777217}function Cm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Vh(t))if(Zm())e.flags|=8192;else throw Ll=hs,Tu}function _s(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?V():536870912,e.lanes|=t,ha|=t)}function ao(e,t){if(!ht)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags&65011712,a|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function qy(e,t,n){var a=t.pendingProps;switch(wu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(t),null;case 1:return Gt(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Or(Jt),ve(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(na(t)?_r(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Nu())),Gt(t),null;case 26:var c=t.type,f=t.memoizedState;return e===null?(_r(t),f!==null?(Gt(t),Cm(t,f)):(Gt(t),pc(t,c,null,a,n))):f?f!==e.memoizedState?(_r(t),Gt(t),Cm(t,f)):(Gt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&_r(t),Gt(t),pc(t,c,e,a,n)),null;case 27:if($e(t),n=pe.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&_r(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Gt(t),null}e=F.current,na(t)?lp(t):(e=_h(c,a,n),t.stateNode=e,_r(t))}return Gt(t),null;case 5:if($e(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&_r(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Gt(t),null}if(f=F.current,na(t))lp(t);else{var y=Ys(pe.current);switch(f){case 1:f=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:f=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":f=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":f=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":f=y.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof a.is=="string"?y.createElement("select",{is:a.is}):y.createElement("select"),a.multiple?f.multiple=!0:a.size&&(f.size=a.size);break;default:f=typeof a.is=="string"?y.createElement(c,{is:a.is}):y.createElement(c)}}f[vt]=t,f[Dt]=a;e:for(y=t.child;y!==null;){if(y.tag===5||y.tag===6)f.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}t.stateNode=f;e:switch(gn(f,c,a),c){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&_r(t)}}return Gt(t),pc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&_r(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(e=pe.current,na(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,c=pn,c!==null)switch(c.tag){case 27:case 5:a=c.memoizedProps}e[vt]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||wh(e.nodeValue,n)),e||Jr(t,!0)}else e=Ys(e).createTextNode(a),e[vt]=t,t.stateNode=e}return Gt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=na(t),n!==null){if(e===null){if(!a)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[vt]=t}else kl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Gt(t),e=!1}else n=Nu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(In(t),t):(In(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Gt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=na(t),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(s(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));c[vt]=t}else kl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Gt(t),c=!1}else c=Nu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(In(t),t):(In(t),null)}return In(t),(t.flags&128)!==0?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,c=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(c=a.alternate.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),_s(t,t.updateQueue),Gt(t),null);case 4:return ve(),e===null&&Dc(t.stateNode.containerInfo),Gt(t),null;case 10:return Or(t.type),Gt(t),null;case 19:if(B(Xt),a=t.memoizedState,a===null)return Gt(t),null;if(c=(t.flags&128)!==0,f=a.rendering,f===null)if(c)ao(a,!1);else{if($t!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=vs(e),f!==null){for(t.flags|=128,ao(a,!1),e=f.updateQueue,t.updateQueue=e,_s(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Jf(n,e),n=n.sibling;return O(Xt,Xt.current&1|2),ht&&kr(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&Ze()>Bs&&(t.flags|=128,c=!0,ao(a,!1),t.lanes=4194304)}else{if(!c)if(e=vs(f),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,_s(t,e),ao(a,!0),a.tail===null&&a.tailMode==="hidden"&&!f.alternate&&!ht)return Gt(t),null}else 2*Ze()-a.renderingStartTime>Bs&&n!==536870912&&(t.flags|=128,c=!0,ao(a,!1),t.lanes=4194304);a.isBackwards?(f.sibling=t.child,t.child=f):(e=a.last,e!==null?e.sibling=f:t.child=f,a.last=f)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ze(),e.sibling=null,n=Xt.current,O(Xt,c?n&1|2:n&1),ht&&kr(t,a.treeForkCount),e):(Gt(t),null);case 22:case 23:return In(t),zu(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(Gt(t),t.subtreeFlags&6&&(t.flags|=8192)):Gt(t),n=t.updateQueue,n!==null&&_s(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&B(El),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Or(Jt),Gt(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Wy(e,t){switch(wu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Or(Jt),ve(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return $e(t),null;case 31:if(t.memoizedState!==null){if(In(t),t.alternate===null)throw Error(s(340));kl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(In(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));kl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return B(Xt),null;case 4:return ve(),null;case 10:return Or(t.type),null;case 22:case 23:return In(t),zu(),e!==null&&B(El),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Or(Jt),null;case 25:return null;default:return null}}function km(e,t){switch(wu(t),t.tag){case 3:Or(Jt),ve();break;case 26:case 27:case 5:$e(t);break;case 4:ve();break;case 31:t.memoizedState!==null&&In(t);break;case 13:In(t);break;case 19:B(Xt);break;case 10:Or(t.type);break;case 22:case 23:In(t),zu(),e!==null&&B(El);break;case 24:Or(Jt)}}function oo(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var c=a.next;n=c;do{if((n.tag&e)===e){a=void 0;var f=n.create,y=n.inst;a=f(),y.destroy=a}n=n.next}while(n!==c)}}catch(k){Lt(t,t.return,k)}}function ol(e,t,n){try{var a=t.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&e)===e){var y=a.inst,k=y.destroy;if(k!==void 0){y.destroy=void 0,c=t;var H=n,Z=k;try{Z()}catch(de){Lt(c,H,de)}}}a=a.next}while(a!==f)}}catch(de){Lt(t,t.return,de)}}function Mm(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{xp(t,n)}catch(a){Lt(e,e.return,a)}}}function Om(e,t,n){n.props=Rl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Lt(e,t,a)}}function so(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(c){Lt(e,t,c)}}function hr(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(c){Lt(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(c){Lt(e,t,c)}else n.current=null}function Em(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(c){Lt(e,e.return,c)}}function mc(e,t,n){try{var a=e.stateNode;fv(a,e.type,n,t),a[Dt]=t}catch(c){Lt(e,e.return,c)}}function Tm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&pl(e.type)||e.tag===4}function hc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&pl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gc(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Nr));else if(a!==4&&(a===27&&pl(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(gc(e,t,n),e=e.sibling;e!==null;)gc(e,t,n),e=e.sibling}function As(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&pl(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(As(e,t,n),e=e.sibling;e!==null;)As(e,t,n),e=e.sibling}function Lm(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);gn(t,a,n),t[vt]=e,t[Dt]=n}catch(f){Lt(e,e.return,f)}}var Ar=!1,nn=!1,xc=!1,_m=typeof WeakSet=="function"?WeakSet:Set,dn=null;function Fy(e,t){if(e=e.containerInfo,Ic=ei,e=Wf(e),cu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var y=0,k=-1,H=-1,Z=0,de=0,he=e,te=null;t:for(;;){for(var ie;he!==n||c!==0&&he.nodeType!==3||(k=y+c),he!==f||a!==0&&he.nodeType!==3||(H=y+a),he.nodeType===3&&(y+=he.nodeValue.length),(ie=he.firstChild)!==null;)te=he,he=ie;for(;;){if(he===e)break t;if(te===n&&++Z===c&&(k=y),te===f&&++de===a&&(H=y),(ie=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=ie}n=k===-1||H===-1?null:{start:k,end:H}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hc={focusedElem:e,selectionRange:n},ei=!1,dn=t;dn!==null;)if(t=dn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,dn=e;else for(;dn!==null;){switch(t=dn,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)c=e[n],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,n=t,c=f.memoizedProps,f=f.memoizedState,a=n.stateNode;try{var Te=Rl(n.type,c);e=a.getSnapshotBeforeUpdate(Te,f),a.__reactInternalSnapshotBeforeUpdate=e}catch(qe){Lt(n,n.return,qe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Gc(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Gc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,dn=e;break}dn=t.return}}function Am(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Dr(e,n),a&4&&oo(5,n);break;case 1:if(Dr(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(y){Lt(n,n.return,y)}else{var c=Rl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Lt(n,n.return,y)}}a&64&&Mm(n),a&512&&so(n,n.return);break;case 3:if(Dr(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{xp(e,t)}catch(y){Lt(n,n.return,y)}}break;case 27:t===null&&a&4&&Lm(n);case 26:case 5:Dr(e,n),t===null&&a&4&&Em(n),a&512&&so(n,n.return);break;case 12:Dr(e,n);break;case 31:Dr(e,n),a&4&&zm(e,n);break;case 13:Dr(e,n),a&4&&Bm(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=ev.bind(null,n),bv(e,n))));break;case 22:if(a=n.memoizedState!==null||Ar,!a){t=t!==null&&t.memoizedState!==null||nn,c=Ar;var f=nn;Ar=a,(nn=t)&&!f?zr(e,n,(n.subtreeFlags&8772)!==0):Dr(e,n),Ar=c,nn=f}break;case 30:break;default:Dr(e,n)}}function Rm(e){var t=e.alternate;t!==null&&(e.alternate=null,Rm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&cn(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Wt=null,Cn=!1;function Rr(e,t,n){for(n=n.child;n!==null;)Dm(e,t,n),n=n.sibling}function Dm(e,t,n){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(et,n)}catch{}switch(n.tag){case 26:nn||hr(n,t),Rr(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:nn||hr(n,t);var a=Wt,c=Cn;pl(n.type)&&(Wt=n.stateNode,Cn=!1),Rr(e,t,n),xo(n.stateNode),Wt=a,Cn=c;break;case 5:nn||hr(n,t);case 6:if(a=Wt,c=Cn,Wt=null,Rr(e,t,n),Wt=a,Cn=c,Wt!==null)if(Cn)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(n.stateNode)}catch(f){Lt(n,t,f)}else try{Wt.removeChild(n.stateNode)}catch(f){Lt(n,t,f)}break;case 18:Wt!==null&&(Cn?(e=Wt,Mh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Na(e)):Mh(Wt,n.stateNode));break;case 4:a=Wt,c=Cn,Wt=n.stateNode.containerInfo,Cn=!0,Rr(e,t,n),Wt=a,Cn=c;break;case 0:case 11:case 14:case 15:ol(2,n,t),nn||ol(4,n,t),Rr(e,t,n);break;case 1:nn||(hr(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&Om(n,t,a)),Rr(e,t,n);break;case 21:Rr(e,t,n);break;case 22:nn=(a=nn)||n.memoizedState!==null,Rr(e,t,n),nn=a;break;default:Rr(e,t,n)}}function zm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Na(e)}catch(n){Lt(t,t.return,n)}}}function Bm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Na(e)}catch(n){Lt(t,t.return,n)}}function $y(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new _m),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new _m),t;default:throw Error(s(435,e.tag))}}function Rs(e,t){var n=$y(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var c=tv.bind(null,e,a);a.then(c,c)}})}function kn(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var c=n[a],f=e,y=t,k=y;e:for(;k!==null;){switch(k.tag){case 27:if(pl(k.type)){Wt=k.stateNode,Cn=!1;break e}break;case 5:Wt=k.stateNode,Cn=!1;break e;case 3:case 4:Wt=k.stateNode.containerInfo,Cn=!0;break e}k=k.return}if(Wt===null)throw Error(s(160));Dm(f,y,c),Wt=null,Cn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Im(t,e),t=t.sibling}var ir=null;function Im(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:kn(t,e),Mn(e),a&4&&(ol(3,e,e.return),oo(3,e),ol(5,e,e.return));break;case 1:kn(t,e),Mn(e),a&512&&(nn||n===null||hr(n,n.return)),a&64&&Ar&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var c=ir;if(kn(t,e),Mn(e),a&512&&(nn||n===null||hr(n,n.return)),a&4){var f=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,c=c.ownerDocument||c;t:switch(a){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Ht]||f[vt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(a),c.head.insertBefore(f,c.querySelector("head > title"))),gn(f,a,n),f[vt]=e,Kt(f),a=f;break e;case"link":var y=Ih("link","href",c).get(a+(n.href||""));if(y){for(var k=0;k<y.length;k++)if(f=y[k],f.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&f.getAttribute("rel")===(n.rel==null?null:n.rel)&&f.getAttribute("title")===(n.title==null?null:n.title)&&f.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){y.splice(k,1);break t}}f=c.createElement(a),gn(f,a,n),c.head.appendChild(f);break;case"meta":if(y=Ih("meta","content",c).get(a+(n.content||""))){for(k=0;k<y.length;k++)if(f=y[k],f.getAttribute("content")===(n.content==null?null:""+n.content)&&f.getAttribute("name")===(n.name==null?null:n.name)&&f.getAttribute("property")===(n.property==null?null:n.property)&&f.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&f.getAttribute("charset")===(n.charSet==null?null:n.charSet)){y.splice(k,1);break t}}f=c.createElement(a),gn(f,a,n),c.head.appendChild(f);break;default:throw Error(s(468,a))}f[vt]=e,Kt(f),a=f}e.stateNode=a}else Hh(c,e.type,e.stateNode);else e.stateNode=Bh(c,a,e.memoizedProps);else f!==a?(f===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):f.count--,a===null?Hh(c,e.type,e.stateNode):Bh(c,a,e.memoizedProps)):a===null&&e.stateNode!==null&&mc(e,e.memoizedProps,n.memoizedProps)}break;case 27:kn(t,e),Mn(e),a&512&&(nn||n===null||hr(n,n.return)),n!==null&&a&4&&mc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(kn(t,e),Mn(e),a&512&&(nn||n===null||hr(n,n.return)),e.flags&32){c=e.stateNode;try{$l(c,"")}catch(Te){Lt(e,e.return,Te)}}a&4&&e.stateNode!=null&&(c=e.memoizedProps,mc(e,c,n!==null?n.memoizedProps:c)),a&1024&&(xc=!0);break;case 6:if(kn(t,e),Mn(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(Te){Lt(e,e.return,Te)}}break;case 3:if(Ps=null,c=ir,ir=Qs(t.containerInfo),kn(t,e),ir=c,Mn(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Na(t.containerInfo)}catch(Te){Lt(e,e.return,Te)}xc&&(xc=!1,Hm(e));break;case 4:a=ir,ir=Qs(e.stateNode.containerInfo),kn(t,e),Mn(e),ir=a;break;case 12:kn(t,e),Mn(e);break;case 31:kn(t,e),Mn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Rs(e,a)));break;case 13:kn(t,e),Mn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(zs=Ze()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Rs(e,a)));break;case 22:c=e.memoizedState!==null;var H=n!==null&&n.memoizedState!==null,Z=Ar,de=nn;if(Ar=Z||c,nn=de||H,kn(t,e),nn=de,Ar=Z,Mn(e),a&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(n===null||H||Ar||nn||Dl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){H=n=t;try{if(f=H.stateNode,c)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{k=H.stateNode;var he=H.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;k.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Te){Lt(H,H.return,Te)}}}else if(t.tag===6){if(n===null){H=t;try{H.stateNode.nodeValue=c?"":H.memoizedProps}catch(Te){Lt(H,H.return,Te)}}}else if(t.tag===18){if(n===null){H=t;try{var ie=H.stateNode;c?Oh(ie,!0):Oh(H.stateNode,!1)}catch(Te){Lt(H,H.return,Te)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Rs(e,n))));break;case 19:kn(t,e),Mn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Rs(e,a)));break;case 30:break;case 21:break;default:kn(t,e),Mn(e)}}function Mn(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(Tm(a)){n=a;break}a=a.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var c=n.stateNode,f=hc(e);As(e,f,c);break;case 5:var y=n.stateNode;n.flags&32&&($l(y,""),n.flags&=-33);var k=hc(e);As(e,k,y);break;case 3:case 4:var H=n.stateNode.containerInfo,Z=hc(e);gc(e,Z,H);break;default:throw Error(s(161))}}catch(de){Lt(e,e.return,de)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Hm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Hm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Dr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Am(e,t.alternate,t),t=t.sibling}function Dl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Dl(t);break;case 1:hr(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Om(t,t.return,n),Dl(t);break;case 27:xo(t.stateNode);case 26:case 5:hr(t,t.return),Dl(t);break;case 22:t.memoizedState===null&&Dl(t);break;case 30:Dl(t);break;default:Dl(t)}e=e.sibling}}function zr(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,c=e,f=t,y=f.flags;switch(f.tag){case 0:case 11:case 15:zr(c,f,n),oo(4,f);break;case 1:if(zr(c,f,n),a=f,c=a.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(Z){Lt(a,a.return,Z)}if(a=f,c=a.updateQueue,c!==null){var k=a.stateNode;try{var H=c.shared.hiddenCallbacks;if(H!==null)for(c.shared.hiddenCallbacks=null,c=0;c<H.length;c++)gp(H[c],k)}catch(Z){Lt(a,a.return,Z)}}n&&y&64&&Mm(f),so(f,f.return);break;case 27:Lm(f);case 26:case 5:zr(c,f,n),n&&a===null&&y&4&&Em(f),so(f,f.return);break;case 12:zr(c,f,n);break;case 31:zr(c,f,n),n&&y&4&&zm(c,f);break;case 13:zr(c,f,n),n&&y&4&&Bm(c,f);break;case 22:f.memoizedState===null&&zr(c,f,n),so(f,f.return);break;case 30:break;default:zr(c,f,n)}t=t.sibling}}function yc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ya(n))}function vc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ya(e))}function ur(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vm(e,t,n,a),t=t.sibling}function Vm(e,t,n,a){var c=t.flags;switch(t.tag){case 0:case 11:case 15:ur(e,t,n,a),c&2048&&oo(9,t);break;case 1:ur(e,t,n,a);break;case 3:ur(e,t,n,a),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ya(e)));break;case 12:if(c&2048){ur(e,t,n,a),e=t.stateNode;try{var f=t.memoizedProps,y=f.id,k=f.onPostCommit;typeof k=="function"&&k(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(H){Lt(t,t.return,H)}}else ur(e,t,n,a);break;case 31:ur(e,t,n,a);break;case 13:ur(e,t,n,a);break;case 23:break;case 22:f=t.stateNode,y=t.alternate,t.memoizedState!==null?f._visibility&2?ur(e,t,n,a):io(e,t):f._visibility&2?ur(e,t,n,a):(f._visibility|=2,fa(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),c&2048&&yc(y,t);break;case 24:ur(e,t,n,a),c&2048&&vc(t.alternate,t);break;default:ur(e,t,n,a)}}function fa(e,t,n,a,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,y=t,k=n,H=a,Z=y.flags;switch(y.tag){case 0:case 11:case 15:fa(f,y,k,H,c),oo(8,y);break;case 23:break;case 22:var de=y.stateNode;y.memoizedState!==null?de._visibility&2?fa(f,y,k,H,c):io(f,y):(de._visibility|=2,fa(f,y,k,H,c)),c&&Z&2048&&yc(y.alternate,y);break;case 24:fa(f,y,k,H,c),c&&Z&2048&&vc(y.alternate,y);break;default:fa(f,y,k,H,c)}t=t.sibling}}function io(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,c=a.flags;switch(a.tag){case 22:io(n,a),c&2048&&yc(a.alternate,a);break;case 24:io(n,a),c&2048&&vc(a.alternate,a);break;default:io(n,a)}t=t.sibling}}var uo=8192;function pa(e,t,n){if(e.subtreeFlags&uo)for(e=e.child;e!==null;)Um(e,t,n),e=e.sibling}function Um(e,t,n){switch(e.tag){case 26:pa(e,t,n),e.flags&uo&&e.memoizedState!==null&&_v(n,ir,e.memoizedState,e.memoizedProps);break;case 5:pa(e,t,n);break;case 3:case 4:var a=ir;ir=Qs(e.stateNode.containerInfo),pa(e,t,n),ir=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=uo,uo=16777216,pa(e,t,n),uo=a):pa(e,t,n));break;default:pa(e,t,n)}}function Gm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function co(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];dn=a,Wm(a,e)}Gm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)qm(e),e=e.sibling}function qm(e){switch(e.tag){case 0:case 11:case 15:co(e),e.flags&2048&&ol(9,e,e.return);break;case 3:co(e);break;case 12:co(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ds(e)):co(e);break;default:co(e)}}function Ds(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];dn=a,Wm(a,e)}Gm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ol(8,t,t.return),Ds(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ds(t));break;default:Ds(t)}e=e.sibling}}function Wm(e,t){for(;dn!==null;){var n=dn;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Ya(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,dn=a;else e:for(n=e;dn!==null;){a=dn;var c=a.sibling,f=a.return;if(Rm(a),a===n){dn=null;break e}if(c!==null){c.return=f,dn=c;break e}dn=f}}}var Yy={getCacheForType:function(e){var t=mn(Jt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return mn(Jt).controller.signal}},Qy=typeof WeakMap=="function"?WeakMap:Map,Ct=0,zt=null,st=null,ct=0,Tt=0,Hn=null,sl=!1,ma=!1,bc=!1,Br=0,$t=0,il=0,zl=0,wc=0,Vn=0,ha=0,fo=null,On=null,Sc=!1,zs=0,Fm=0,Bs=1/0,Is=null,ul=null,un=0,cl=null,ga=null,Ir=0,Nc=0,jc=null,$m=null,po=0,Cc=null;function Un(){return(Ct&2)!==0&&ct!==0?ct&-ct:D.T!==null?Lc():gt()}function Ym(){if(Vn===0)if((ct&536870912)===0||ht){var e=ln;ln<<=1,(ln&3932160)===0&&(ln=262144),Vn=e}else Vn=536870912;return e=Bn.current,e!==null&&(e.flags|=32),Vn}function En(e,t,n){(e===zt&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)&&(xa(e,0),dl(e,ct,Vn,!1)),ue(e,n),((Ct&2)===0||e!==zt)&&(e===zt&&((Ct&2)===0&&(zl|=n),$t===4&&dl(e,ct,Vn,!1)),gr(e))}function Qm(e,t,n){if((Ct&6)!==0)throw Error(s(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Me(e,t),c=a?Zy(e,t):Mc(e,t,!0),f=a;do{if(c===0){ma&&!a&&dl(e,t,0,!1);break}else{if(n=e.current.alternate,f&&!Xy(n)){c=Mc(e,t,!1),f=!1;continue}if(c===2){if(f=t,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var k=e;c=fo;var H=k.current.memoizedState.isDehydrated;if(H&&(xa(k,y).flags|=256),y=Mc(k,y,!1),y!==2){if(bc&&!H){k.errorRecoveryDisabledLanes|=f,zl|=f,c=4;break e}f=On,On=c,f!==null&&(On===null?On=f:On.push.apply(On,f))}c=y}if(f=!1,c!==2)continue}}if(c===1){xa(e,0),dl(e,t,0,!0);break}e:{switch(a=e,f=c,f){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:dl(a,t,Vn,!sl);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(c=zs+300-Ze(),10<c)){if(dl(a,t,Vn,!sl),Rn(a,0,!0)!==0)break e;Ir=t,a.timeoutHandle=Ch(Xm.bind(null,a,n,On,Is,Sc,t,Vn,zl,ha,sl,f,"Throttled",-0,0),c);break e}Xm(a,n,On,Is,Sc,t,Vn,zl,ha,sl,f,null,-0,0)}}break}while(!0);gr(e)}function Xm(e,t,n,a,c,f,y,k,H,Z,de,he,te,ie){if(e.timeoutHandle=-1,he=t.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nr},Um(t,f,he);var Te=(f&62914560)===f?zs-Ze():(f&4194048)===f?Fm-Ze():0;if(Te=Av(he,Te),Te!==null){Ir=f,e.cancelPendingCommit=Te(rh.bind(null,e,t,f,n,a,c,y,k,H,de,he,null,te,ie)),dl(e,f,y,!Z);return}}rh(e,t,f,n,a,c,y,k,H)}function Xy(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var c=n[a],f=c.getSnapshot;c=c.value;try{if(!Dn(f(),c))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dl(e,t,n,a){t&=~wc,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var c=t;0<c;){var f=31-Vt(c),y=1<<f;a[f]=-1,c&=~y}n!==0&&Be(e,n,t)}function Hs(){return(Ct&6)===0?(mo(0),!1):!0}function kc(){if(st!==null){if(Tt===0)var e=st.return;else e=st,Mr=Ml=null,Gu(e),sa=null,Xa=0,e=st;for(;e!==null;)km(e.alternate,e),e=e.return;st=null}}function xa(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,hv(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Ir=0,kc(),zt=e,st=n=Cr(e.current,null),ct=t,Tt=0,Hn=null,sl=!1,ma=Me(e,t),bc=!1,ha=Vn=wc=zl=il=$t=0,On=fo=null,Sc=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var c=31-Vt(a),f=1<<c;t|=e[c],a&=~f}return Br=t,os(),n}function Pm(e,t){nt=null,D.H=ro,t===oa||t===ms?(t=fp(),Tt=3):t===Tu?(t=fp(),Tt=4):Tt=t===lc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Hn=t,st===null&&($t=1,Os(e,Pn(t,e.current)))}function Zm(){var e=Bn.current;return e===null?!0:(ct&4194048)===ct?er===null:(ct&62914560)===ct||(ct&536870912)!==0?e===er:!1}function Km(){var e=D.H;return D.H=ro,e===null?ro:e}function Jm(){var e=D.A;return D.A=Yy,e}function Vs(){$t=4,sl||(ct&4194048)!==ct&&Bn.current!==null||(ma=!0),(il&134217727)===0&&(zl&134217727)===0||zt===null||dl(zt,ct,Vn,!1)}function Mc(e,t,n){var a=Ct;Ct|=2;var c=Km(),f=Jm();(zt!==e||ct!==t)&&(Is=null,xa(e,t)),t=!1;var y=$t;e:do try{if(Tt!==0&&st!==null){var k=st,H=Hn;switch(Tt){case 8:kc(),y=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(t=!0);var Z=Tt;if(Tt=0,Hn=null,ya(e,k,H,Z),n&&ma){y=0;break e}break;default:Z=Tt,Tt=0,Hn=null,ya(e,k,H,Z)}}Py(),y=$t;break}catch(de){Pm(e,de)}while(!0);return t&&e.shellSuspendCounter++,Mr=Ml=null,Ct=a,D.H=c,D.A=f,st===null&&(zt=null,ct=0,os()),y}function Py(){for(;st!==null;)eh(st)}function Zy(e,t){var n=Ct;Ct|=2;var a=Km(),c=Jm();zt!==e||ct!==t?(Is=null,Bs=Ze()+500,xa(e,t)):ma=Me(e,t);e:do try{if(Tt!==0&&st!==null){t=st;var f=Hn;t:switch(Tt){case 1:Tt=0,Hn=null,ya(e,t,f,1);break;case 2:case 9:if(cp(f)){Tt=0,Hn=null,th(t);break}t=function(){Tt!==2&&Tt!==9||zt!==e||(Tt=7),gr(e)},f.then(t,t);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:cp(f)?(Tt=0,Hn=null,th(t)):(Tt=0,Hn=null,ya(e,t,f,7));break;case 5:var y=null;switch(st.tag){case 26:y=st.memoizedState;case 5:case 27:var k=st;if(y?Vh(y):k.stateNode.complete){Tt=0,Hn=null;var H=k.sibling;if(H!==null)st=H;else{var Z=k.return;Z!==null?(st=Z,Us(Z)):st=null}break t}}Tt=0,Hn=null,ya(e,t,f,5);break;case 6:Tt=0,Hn=null,ya(e,t,f,6);break;case 8:kc(),$t=6;break e;default:throw Error(s(462))}}Ky();break}catch(de){Pm(e,de)}while(!0);return Mr=Ml=null,D.H=a,D.A=c,Ct=n,st!==null?0:(zt=null,ct=0,os(),$t)}function Ky(){for(;st!==null&&!ft();)eh(st)}function eh(e){var t=jm(e.alternate,e,Br);e.memoizedProps=e.pendingProps,t===null?Us(e):st=t}function th(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=ym(n,t,t.pendingProps,t.type,void 0,ct);break;case 11:t=ym(n,t,t.pendingProps,t.type.render,t.ref,ct);break;case 5:Gu(t);default:km(n,t),t=st=Jf(t,Br),t=jm(n,t,Br)}e.memoizedProps=e.pendingProps,t===null?Us(e):st=t}function ya(e,t,n,a){Mr=Ml=null,Gu(t),sa=null,Xa=0;var c=t.return;try{if(Vy(e,c,t,n,ct)){$t=1,Os(e,Pn(n,e.current)),st=null;return}}catch(f){if(c!==null)throw st=c,f;$t=1,Os(e,Pn(n,e.current)),st=null;return}t.flags&32768?(ht||a===1?e=!0:ma||(ct&536870912)!==0?e=!1:(sl=e=!0,(a===2||a===9||a===3||a===6)&&(a=Bn.current,a!==null&&a.tag===13&&(a.flags|=16384))),nh(t,e)):Us(t)}function Us(e){var t=e;do{if((t.flags&32768)!==0){nh(t,sl);return}e=t.return;var n=qy(t.alternate,t,Br);if(n!==null){st=n;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);$t===0&&($t=5)}function nh(e,t){do{var n=Wy(e.alternate,e);if(n!==null){n.flags&=32767,st=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){st=e;return}st=e=n}while(e!==null);$t=6,st=null}function rh(e,t,n,a,c,f,y,k,H){e.cancelPendingCommit=null;do Gs();while(un!==0);if((Ct&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(f=t.lanes|t.childLanes,f|=hu,ke(e,n,f,y,k,H),e===zt&&(st=zt=null,ct=0),ga=t,cl=e,Ir=n,Nc=f,jc=c,$m=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,nv(We,function(){return ih(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=D.T,D.T=null,c=$.p,$.p=2,y=Ct,Ct|=4;try{Fy(e,t,n)}finally{Ct=y,$.p=c,D.T=a}}un=1,lh(),ah(),oh()}}function lh(){if(un===1){un=0;var e=cl,t=ga,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=D.T,D.T=null;var a=$.p;$.p=2;var c=Ct;Ct|=4;try{Im(t,e);var f=Hc,y=Wf(e.containerInfo),k=f.focusedElem,H=f.selectionRange;if(y!==k&&k&&k.ownerDocument&&qf(k.ownerDocument.documentElement,k)){if(H!==null&&cu(k)){var Z=H.start,de=H.end;if(de===void 0&&(de=Z),"selectionStart"in k)k.selectionStart=Z,k.selectionEnd=Math.min(de,k.value.length);else{var he=k.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var ie=te.getSelection(),Te=k.textContent.length,qe=Math.min(H.start,Te),Rt=H.end===void 0?qe:Math.min(H.end,Te);!ie.extend&&qe>Rt&&(y=Rt,Rt=qe,qe=y);var Y=Gf(k,qe),q=Gf(k,Rt);if(Y&&q&&(ie.rangeCount!==1||ie.anchorNode!==Y.node||ie.anchorOffset!==Y.offset||ie.focusNode!==q.node||ie.focusOffset!==q.offset)){var P=he.createRange();P.setStart(Y.node,Y.offset),ie.removeAllRanges(),qe>Rt?(ie.addRange(P),ie.extend(q.node,q.offset)):(P.setEnd(q.node,q.offset),ie.addRange(P))}}}}for(he=[],ie=k;ie=ie.parentNode;)ie.nodeType===1&&he.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<he.length;k++){var me=he[k];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}ei=!!Ic,Hc=Ic=null}finally{Ct=c,$.p=a,D.T=n}}e.current=t,un=2}}function ah(){if(un===2){un=0;var e=cl,t=ga,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=D.T,D.T=null;var a=$.p;$.p=2;var c=Ct;Ct|=4;try{Am(e,t.alternate,t)}finally{Ct=c,$.p=a,D.T=n}}un=3}}function oh(){if(un===4||un===3){un=0,ut();var e=cl,t=ga,n=Ir,a=$m;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?un=5:(un=0,ga=cl=null,sh(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(ul=null),pt(n),t=t.stateNode,lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(et,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=D.T,c=$.p,$.p=2,D.T=null;try{for(var f=e.onRecoverableError,y=0;y<a.length;y++){var k=a[y];f(k.value,{componentStack:k.stack})}}finally{D.T=t,$.p=c}}(Ir&3)!==0&&Gs(),gr(e),c=e.pendingLanes,(n&261930)!==0&&(c&42)!==0?e===Cc?po++:(po=0,Cc=e):po=0,mo(0)}}function sh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ya(t)))}function Gs(){return lh(),ah(),oh(),ih()}function ih(){if(un!==5)return!1;var e=cl,t=Nc;Nc=0;var n=pt(Ir),a=D.T,c=$.p;try{$.p=32>n?32:n,D.T=null,n=jc,jc=null;var f=cl,y=Ir;if(un=0,ga=cl=null,Ir=0,(Ct&6)!==0)throw Error(s(331));var k=Ct;if(Ct|=4,qm(f.current),Vm(f,f.current,y,n),Ct=k,mo(0,!1),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(et,f)}catch{}return!0}finally{$.p=c,D.T=a,sh(e,t)}}function uh(e,t,n){t=Pn(n,t),t=rc(e.stateNode,t,2),e=rl(e,t,2),e!==null&&(ue(e,2),gr(e))}function Lt(e,t,n){if(e.tag===3)uh(e,e,n);else for(;t!==null;){if(t.tag===3){uh(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ul===null||!ul.has(a))){e=Pn(n,e),n=cm(2),a=rl(t,n,2),a!==null&&(dm(n,a,t,e),ue(a,2),gr(a));break}}t=t.return}}function Oc(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Qy;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(n)||(bc=!0,c.add(n),e=Jy.bind(null,e,t,n),t.then(e,e))}function Jy(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,zt===e&&(ct&n)===n&&($t===4||$t===3&&(ct&62914560)===ct&&300>Ze()-zs?(Ct&2)===0&&xa(e,0):wc|=n,ha===ct&&(ha=0)),gr(e)}function ch(e,t){t===0&&(t=V()),e=jl(e,t),e!==null&&(ue(e,t),gr(e))}function ev(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ch(e,n)}function tv(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(t),ch(e,n)}function nv(e,t){return Ee(e,t)}var qs=null,va=null,Ec=!1,Ws=!1,Tc=!1,fl=0;function gr(e){e!==va&&e.next===null&&(va===null?qs=va=e:va=va.next=e),Ws=!0,Ec||(Ec=!0,lv())}function mo(e,t){if(!Tc&&Ws){Tc=!0;do for(var n=!1,a=qs;a!==null;){if(e!==0){var c=a.pendingLanes;if(c===0)var f=0;else{var y=a.suspendedLanes,k=a.pingedLanes;f=(1<<31-Vt(42|e)+1)-1,f&=c&~(y&~k),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(n=!0,mh(a,f))}else f=ct,f=Rn(a,a===zt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(f&3)===0||Me(a,f)||(n=!0,mh(a,f));a=a.next}while(n);Tc=!1}}function rv(){dh()}function dh(){Ws=Ec=!1;var e=0;fl!==0&&mv()&&(e=fl);for(var t=Ze(),n=null,a=qs;a!==null;){var c=a.next,f=fh(a,t);f===0?(a.next=null,n===null?qs=c:n.next=c,c===null&&(va=n)):(n=a,(e!==0||(f&3)!==0)&&(Ws=!0)),a=c}un!==0&&un!==5||mo(e),fl!==0&&(fl=0)}function fh(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-Vt(f),k=1<<y,H=c[y];H===-1?((k&n)===0||(k&a)!==0)&&(c[y]=ze(k,t)):H<=t&&(e.expiredLanes|=k),f&=~k}if(t=zt,n=ct,n=Rn(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Ae(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Me(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&Ae(a),pt(n)){case 2:case 8:n=Xe;break;case 32:n=We;break;case 268435456:n=Ge;break;default:n=We}return a=ph.bind(null,e),n=Ee(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&Ae(a),e.callbackPriority=2,e.callbackNode=null,2}function ph(e,t){if(un!==0&&un!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Gs()&&e.callbackNode!==n)return null;var a=ct;return a=Rn(e,e===zt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Qm(e,a,t),fh(e,Ze()),e.callbackNode!=null&&e.callbackNode===n?ph.bind(null,e):null)}function mh(e,t){if(Gs())return null;Qm(e,t,!0)}function lv(){gv(function(){(Ct&6)!==0?Ee(_e,rv):dh()})}function Lc(){if(fl===0){var e=la;e===0&&(e=An,An<<=1,(An&261888)===0&&(An=256)),fl=e}return fl}function hh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ko(""+e)}function gh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function av(e,t,n,a,c){if(t==="submit"&&n&&n.stateNode===c){var f=hh((c[Dt]||null).action),y=a.submitter;y&&(t=(t=y[Dt]||null)?hh(t.formAction):y.getAttribute("formAction"),t!==null&&(f=t,y=null));var k=new ns("action","action",null,a,c);e.push({event:k,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(fl!==0){var H=y?gh(c,y):new FormData(c);Zu(n,{pending:!0,data:H,method:c.method,action:f},null,H)}}else typeof f=="function"&&(k.preventDefault(),H=y?gh(c,y):new FormData(c),Zu(n,{pending:!0,data:H,method:c.method,action:f},f,H))},currentTarget:c}]})}}for(var _c=0;_c<mu.length;_c++){var Ac=mu[_c],ov=Ac.toLowerCase(),sv=Ac[0].toUpperCase()+Ac.slice(1);sr(ov,"on"+sv)}sr(Yf,"onAnimationEnd"),sr(Qf,"onAnimationIteration"),sr(Xf,"onAnimationStart"),sr("dblclick","onDoubleClick"),sr("focusin","onFocus"),sr("focusout","onBlur"),sr(Ny,"onTransitionRun"),sr(jy,"onTransitionStart"),sr(Cy,"onTransitionCancel"),sr(Pf,"onTransitionEnd"),Xr("onMouseEnter",["mouseout","mouseover"]),Xr("onMouseLeave",["mouseout","mouseover"]),Xr("onPointerEnter",["pointerout","pointerover"]),Xr("onPointerLeave",["pointerout","pointerover"]),wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ho));function xh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var y=a.length-1;0<=y;y--){var k=a[y],H=k.instance,Z=k.currentTarget;if(k=k.listener,H!==f&&c.isPropagationStopped())break e;f=k,c.currentTarget=Z;try{f(c)}catch(de){as(de)}c.currentTarget=null,f=H}else for(y=0;y<a.length;y++){if(k=a[y],H=k.instance,Z=k.currentTarget,k=k.listener,H!==f&&c.isPropagationStopped())break e;f=k,c.currentTarget=Z;try{f(c)}catch(de){as(de)}c.currentTarget=null,f=H}}}}function it(e,t){var n=t[Nn];n===void 0&&(n=t[Nn]=new Set);var a=e+"__bubble";n.has(a)||(yh(t,e,2,!1),n.add(a))}function Rc(e,t,n){var a=0;t&&(a|=4),yh(n,e,a,t)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function Dc(e){if(!e[Fs]){e[Fs]=!0,Fo.forEach(function(n){n!=="selectionchange"&&(iv.has(n)||Rc(n,!1,e),Rc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fs]||(t[Fs]=!0,Rc("selectionchange",!1,t))}}function yh(e,t,n,a){switch(Yh(t)){case 2:var c=zv;break;case 8:c=Bv;break;default:c=Pc}n=c.bind(null,t,n,e),c=void 0,!tu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function zc(e,t,n,a,c){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var y=a.tag;if(y===3||y===4){var k=a.stateNode.containerInfo;if(k===c)break;if(y===4)for(y=a.return;y!==null;){var H=y.tag;if((H===3||H===4)&&y.stateNode.containerInfo===c)return;y=y.return}for(;k!==null;){if(y=fn(k),y===null)return;if(H=y.tag,H===5||H===6||H===26||H===27){a=f=y;continue e}k=k.parentNode}}a=a.return}Nf(function(){var Z=f,de=Ji(n),he=[];e:{var te=Zf.get(e);if(te!==void 0){var ie=ns,Te=e;switch(e){case"keypress":if(es(n)===0)break e;case"keydown":case"keyup":ie=ty;break;case"focusin":Te="focus",ie=au;break;case"focusout":Te="blur",ie=au;break;case"beforeblur":case"afterblur":ie=au;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=qx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=ly;break;case Yf:case Qf:case Xf:ie=$x;break;case Pf:ie=oy;break;case"scroll":case"scrollend":ie=Ux;break;case"wheel":ie=iy;break;case"copy":case"cut":case"paste":ie=Qx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Of;break;case"toggle":case"beforetoggle":ie=cy}var qe=(t&4)!==0,Rt=!qe&&(e==="scroll"||e==="scrollend"),Y=qe?te!==null?te+"Capture":null:te;qe=[];for(var q=Z,P;q!==null;){var me=q;if(P=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||P===null||Y===null||(me=za(q,Y),me!=null&&qe.push(go(q,me,P))),Rt)break;q=q.return}0<qe.length&&(te=new ie(te,Te,null,n,de),he.push({event:te,listeners:qe}))}}if((t&7)===0){e:{if(te=e==="mouseover"||e==="pointerover",ie=e==="mouseout"||e==="pointerout",te&&n!==Ki&&(Te=n.relatedTarget||n.fromElement)&&(fn(Te)||Te[qt]))break e;if((ie||te)&&(te=de.window===de?de:(te=de.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(Te=n.relatedTarget||n.toElement,ie=Z,Te=Te?fn(Te):null,Te!==null&&(Rt=d(Te),qe=Te.tag,Te!==Rt||qe!==5&&qe!==27&&qe!==6)&&(Te=null)):(ie=null,Te=Z),ie!==Te)){if(qe=kf,me="onMouseLeave",Y="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(qe=Of,me="onPointerLeave",Y="onPointerEnter",q="pointer"),Rt=ie==null?te:Qr(ie),P=Te==null?te:Qr(Te),te=new qe(me,q+"leave",ie,n,de),te.target=Rt,te.relatedTarget=P,me=null,fn(de)===Z&&(qe=new qe(Y,q+"enter",Te,n,de),qe.target=P,qe.relatedTarget=Rt,me=qe),Rt=me,ie&&Te)t:{for(qe=uv,Y=ie,q=Te,P=0,me=Y;me;me=qe(me))P++;me=0;for(var Ie=q;Ie;Ie=qe(Ie))me++;for(;0<P-me;)Y=qe(Y),P--;for(;0<me-P;)q=qe(q),me--;for(;P--;){if(Y===q||q!==null&&Y===q.alternate){qe=Y;break t}Y=qe(Y),q=qe(q)}qe=null}else qe=null;ie!==null&&vh(he,te,ie,qe,!1),Te!==null&&Rt!==null&&vh(he,Rt,Te,qe,!0)}}e:{if(te=Z?Qr(Z):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var bt=zf;else if(Rf(te))if(Bf)bt=by;else{bt=yy;var De=xy}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&Zi(Z.elementType)&&(bt=zf):bt=vy;if(bt&&(bt=bt(e,Z))){Df(he,bt,n,de);break e}De&&De(e,te,Z),e==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&mt(te,"number",te.value)}switch(De=Z?Qr(Z):window,e){case"focusin":(Rf(De)||De.contentEditable==="true")&&(Pl=De,du=Z,Wa=null);break;case"focusout":Wa=du=Pl=null;break;case"mousedown":fu=!0;break;case"contextmenu":case"mouseup":case"dragend":fu=!1,Ff(he,n,de);break;case"selectionchange":if(Sy)break;case"keydown":case"keyup":Ff(he,n,de)}var at;if(su)e:{switch(e){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Xl?_f(e,n)&&(dt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(dt="onCompositionStart");dt&&(Ef&&n.locale!=="ko"&&(Xl||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Xl&&(at=jf()):(Pr=de,nu="value"in Pr?Pr.value:Pr.textContent,Xl=!0)),De=$s(Z,dt),0<De.length&&(dt=new Mf(dt,e,null,n,de),he.push({event:dt,listeners:De}),at?dt.data=at:(at=Af(n),at!==null&&(dt.data=at)))),(at=fy?py(e,n):my(e,n))&&(dt=$s(Z,"onBeforeInput"),0<dt.length&&(De=new Mf("onBeforeInput","beforeinput",null,n,de),he.push({event:De,listeners:dt}),De.data=at)),av(he,e,Z,n,de)}xh(he,t)})}function go(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $s(e,t){for(var n=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=za(e,n),c!=null&&a.unshift(go(e,c,f)),c=za(e,t),c!=null&&a.push(go(e,c,f))),e.tag===3)return a;e=e.return}return[]}function uv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function vh(e,t,n,a,c){for(var f=t._reactName,y=[];n!==null&&n!==a;){var k=n,H=k.alternate,Z=k.stateNode;if(k=k.tag,H!==null&&H===a)break;k!==5&&k!==26&&k!==27||Z===null||(H=Z,c?(Z=za(n,f),Z!=null&&y.unshift(go(n,Z,H))):c||(Z=za(n,f),Z!=null&&y.push(go(n,Z,H)))),n=n.return}y.length!==0&&e.push({event:t,listeners:y})}var cv=/\r\n?/g,dv=/\u0000|\uFFFD/g;function bh(e){return(typeof e=="string"?e:""+e).replace(cv,`
`).replace(dv,"")}function wh(e,t){return t=bh(t),bh(e)===t}function At(e,t,n,a,c,f){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||$l(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&$l(e,""+a);break;case"className":Wl(e,"class",a);break;case"tabIndex":Wl(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Wl(e,n,a);break;case"style":wf(e,a,f);break;case"data":if(t!=="object"){Wl(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Ko(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(n==="formAction"?(t!=="input"&&At(e,t,"name",c.name,c,null),At(e,t,"formEncType",c.formEncType,c,null),At(e,t,"formMethod",c.formMethod,c,null),At(e,t,"formTarget",c.formTarget,c,null)):(At(e,t,"encType",c.encType,c,null),At(e,t,"method",c.method,c,null),At(e,t,"target",c.target,c,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Ko(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Nr);break;case"onScroll":a!=null&&it("scroll",e);break;case"onScrollEnd":a!=null&&it("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=Ko(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":it("beforetoggle",e),it("toggle",e),ql(e,"popover",a);break;case"xlinkActuate":Qn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Qn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Qn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Qn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Qn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Qn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ql(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Hx.get(n)||n,ql(e,n,a))}}function Bc(e,t,n,a,c,f){switch(n){case"style":wf(e,a,f);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"children":typeof a=="string"?$l(e,a):(typeof a=="number"||typeof a=="bigint")&&$l(e,""+a);break;case"onScroll":a!=null&&it("scroll",e);break;case"onScrollEnd":a!=null&&it("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Nr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$o.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(c=n.endsWith("Capture"),t=n.slice(2,c?n.length-7:void 0),f=e[Dt]||null,f=f!=null?f[n]:null,typeof f=="function"&&e.removeEventListener(t,f,c),typeof a=="function")){typeof f!="function"&&f!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,c);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):ql(e,n,a)}}}function gn(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",e),it("load",e);var a=!1,c=!1,f;for(f in n)if(n.hasOwnProperty(f)){var y=n[f];if(y!=null)switch(f){case"src":a=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:At(e,t,f,y,n,null)}}c&&At(e,t,"srcSet",n.srcSet,n,null),a&&At(e,t,"src",n.src,n,null);return;case"input":it("invalid",e);var k=f=y=c=null,H=null,Z=null;for(a in n)if(n.hasOwnProperty(a)){var de=n[a];if(de!=null)switch(a){case"name":c=de;break;case"type":y=de;break;case"checked":H=de;break;case"defaultChecked":Z=de;break;case"value":f=de;break;case"defaultValue":k=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(s(137,t));break;default:At(e,t,a,de,n,null)}}Qt(e,f,k,H,Z,y,c,!1);return;case"select":it("invalid",e),a=y=f=null;for(c in n)if(n.hasOwnProperty(c)&&(k=n[c],k!=null))switch(c){case"value":f=k;break;case"defaultValue":y=k;break;case"multiple":a=k;default:At(e,t,c,k,n,null)}t=f,n=y,e.multiple=!!a,t!=null?Sr(e,!!a,t,!1):n!=null&&Sr(e,!!a,n,!0);return;case"textarea":it("invalid",e),f=c=a=null;for(y in n)if(n.hasOwnProperty(y)&&(k=n[y],k!=null))switch(y){case"value":a=k;break;case"defaultValue":c=k;break;case"children":f=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:At(e,t,y,k,n,null)}Fl(e,a,c,f);return;case"option":for(H in n)n.hasOwnProperty(H)&&(a=n[H],a!=null)&&(H==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":At(e,t,H,a,n,null));return;case"dialog":it("beforetoggle",e),it("toggle",e),it("cancel",e),it("close",e);break;case"iframe":case"object":it("load",e);break;case"video":case"audio":for(a=0;a<ho.length;a++)it(ho[a],e);break;case"image":it("error",e),it("load",e);break;case"details":it("toggle",e);break;case"embed":case"source":case"link":it("error",e),it("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in n)if(n.hasOwnProperty(Z)&&(a=n[Z],a!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:At(e,t,Z,a,n,null)}return;default:if(Zi(t)){for(de in n)n.hasOwnProperty(de)&&(a=n[de],a!==void 0&&Bc(e,t,de,a,n,void 0));return}}for(k in n)n.hasOwnProperty(k)&&(a=n[k],a!=null&&At(e,t,k,a,n,null))}function fv(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,y=null,k=null,H=null,Z=null,de=null;for(ie in n){var he=n[ie];if(n.hasOwnProperty(ie)&&he!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":H=he;default:a.hasOwnProperty(ie)||At(e,t,ie,null,a,he)}}for(var te in a){var ie=a[te];if(he=n[te],a.hasOwnProperty(te)&&(ie!=null||he!=null))switch(te){case"type":f=ie;break;case"name":c=ie;break;case"checked":Z=ie;break;case"defaultChecked":de=ie;break;case"value":y=ie;break;case"defaultValue":k=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,t));break;default:ie!==he&&At(e,t,te,ie,a,he)}}Et(e,y,k,H,Z,de,f,c);return;case"select":ie=y=k=te=null;for(f in n)if(H=n[f],n.hasOwnProperty(f)&&H!=null)switch(f){case"value":break;case"multiple":ie=H;default:a.hasOwnProperty(f)||At(e,t,f,null,a,H)}for(c in a)if(f=a[c],H=n[c],a.hasOwnProperty(c)&&(f!=null||H!=null))switch(c){case"value":te=f;break;case"defaultValue":k=f;break;case"multiple":y=f;default:f!==H&&At(e,t,c,f,a,H)}t=k,n=y,a=ie,te!=null?Sr(e,!!n,te,!1):!!a!=!!n&&(t!=null?Sr(e,!!n,t,!0):Sr(e,!!n,n?[]:"",!1));return;case"textarea":ie=te=null;for(k in n)if(c=n[k],n.hasOwnProperty(k)&&c!=null&&!a.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:At(e,t,k,null,a,c)}for(y in a)if(c=a[y],f=n[y],a.hasOwnProperty(y)&&(c!=null||f!=null))switch(y){case"value":te=c;break;case"defaultValue":ie=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:c!==f&&At(e,t,y,c,a,f)}Zo(e,te,ie);return;case"option":for(var Te in n)te=n[Te],n.hasOwnProperty(Te)&&te!=null&&!a.hasOwnProperty(Te)&&(Te==="selected"?e.selected=!1:At(e,t,Te,null,a,te));for(H in a)te=a[H],ie=n[H],a.hasOwnProperty(H)&&te!==ie&&(te!=null||ie!=null)&&(H==="selected"?e.selected=te&&typeof te!="function"&&typeof te!="symbol":At(e,t,H,te,a,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in n)te=n[qe],n.hasOwnProperty(qe)&&te!=null&&!a.hasOwnProperty(qe)&&At(e,t,qe,null,a,te);for(Z in a)if(te=a[Z],ie=n[Z],a.hasOwnProperty(Z)&&te!==ie&&(te!=null||ie!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,t));break;default:At(e,t,Z,te,a,ie)}return;default:if(Zi(t)){for(var Rt in n)te=n[Rt],n.hasOwnProperty(Rt)&&te!==void 0&&!a.hasOwnProperty(Rt)&&Bc(e,t,Rt,void 0,a,te);for(de in a)te=a[de],ie=n[de],!a.hasOwnProperty(de)||te===ie||te===void 0&&ie===void 0||Bc(e,t,de,te,a,ie);return}}for(var Y in n)te=n[Y],n.hasOwnProperty(Y)&&te!=null&&!a.hasOwnProperty(Y)&&At(e,t,Y,null,a,te);for(he in a)te=a[he],ie=n[he],!a.hasOwnProperty(he)||te===ie||te==null&&ie==null||At(e,t,he,te,a,ie)}function Sh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var c=n[a],f=c.transferSize,y=c.initiatorType,k=c.duration;if(f&&k&&Sh(y)){for(y=0,k=c.responseEnd,a+=1;a<n.length;a++){var H=n[a],Z=H.startTime;if(Z>k)break;var de=H.transferSize,he=H.initiatorType;de&&Sh(he)&&(H=H.responseEnd,y+=de*(H<k?1:(k-Z)/(H-Z)))}if(--a,t+=8*(f+y)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ic=null,Hc=null;function Ys(e){return e.nodeType===9?e:e.ownerDocument}function Nh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Vc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Uc=null;function mv(){var e=window.event;return e&&e.type==="popstate"?e===Uc?!1:(Uc=e,!0):(Uc=null,!1)}var Ch=typeof setTimeout=="function"?setTimeout:void 0,hv=typeof clearTimeout=="function"?clearTimeout:void 0,kh=typeof Promise=="function"?Promise:void 0,gv=typeof queueMicrotask=="function"?queueMicrotask:typeof kh<"u"?function(e){return kh.resolve(null).then(e).catch(xv)}:Ch;function xv(e){setTimeout(function(){throw e})}function pl(e){return e==="head"}function Mh(e,t){var n=t,a=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(c),Na(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")xo(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,xo(n);for(var f=n.firstChild;f;){var y=f.nextSibling,k=f.nodeName;f[Ht]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&f.rel.toLowerCase()==="stylesheet"||n.removeChild(f),f=y}}else n==="body"&&xo(e.ownerDocument.body);n=c}while(n);Na(t)}function Oh(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function Gc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Gc(n),cn(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function yv(e,t,n,a){for(;e.nodeType===1;){var c=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Ht])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=tr(e.nextSibling),e===null)break}return null}function vv(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=tr(e.nextSibling),e===null))return null;return e}function Eh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=tr(e.nextSibling),e===null))return null;return e}function qc(e){return e.data==="$?"||e.data==="$~"}function Wc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function bv(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Fc=null;function Th(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return tr(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Lh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function _h(e,t,n){switch(t=Ys(n),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function xo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);cn(e)}var nr=new Map,Ah=new Set;function Qs(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Hr=$.d;$.d={f:wv,r:Sv,D:Nv,C:jv,L:Cv,m:kv,X:Ov,S:Mv,M:Ev};function wv(){var e=Hr.f(),t=Hs();return e||t}function Sv(e){var t=Yn(e);t!==null&&t.tag===5&&t.type==="form"?Pp(t):Hr.r(e)}var ba=typeof document>"u"?null:document;function Rh(e,t,n){var a=ba;if(a&&typeof t=="string"&&t){var c=Oe(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof n=="string"&&(c+='[crossorigin="'+n+'"]'),Ah.has(c)||(Ah.add(c),e={rel:e,crossOrigin:n,href:t},a.querySelector(c)===null&&(t=a.createElement("link"),gn(t,"link",e),Kt(t),a.head.appendChild(t)))}}function Nv(e){Hr.D(e),Rh("dns-prefetch",e,null)}function jv(e,t){Hr.C(e,t),Rh("preconnect",e,t)}function Cv(e,t,n){Hr.L(e,t,n);var a=ba;if(a&&e&&t){var c='link[rel="preload"][as="'+Oe(t)+'"]';t==="image"&&n&&n.imageSrcSet?(c+='[imagesrcset="'+Oe(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(c+='[imagesizes="'+Oe(n.imageSizes)+'"]')):c+='[href="'+Oe(e)+'"]';var f=c;switch(t){case"style":f=wa(e);break;case"script":f=Sa(e)}nr.has(f)||(e=v({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),nr.set(f,e),a.querySelector(c)!==null||t==="style"&&a.querySelector(yo(f))||t==="script"&&a.querySelector(vo(f))||(t=a.createElement("link"),gn(t,"link",e),Kt(t),a.head.appendChild(t)))}}function kv(e,t){Hr.m(e,t);var n=ba;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Oe(a)+'"][href="'+Oe(e)+'"]',f=c;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Sa(e)}if(!nr.has(f)&&(e=v({rel:"modulepreload",href:e},t),nr.set(f,e),n.querySelector(c)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(vo(f)))return}a=n.createElement("link"),gn(a,"link",e),Kt(a),n.head.appendChild(a)}}}function Mv(e,t,n){Hr.S(e,t,n);var a=ba;if(a&&e){var c=br(a).hoistableStyles,f=wa(e);t=t||"default";var y=c.get(f);if(!y){var k={loading:0,preload:null};if(y=a.querySelector(yo(f)))k.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},n),(n=nr.get(f))&&$c(e,n);var H=y=a.createElement("link");Kt(H),gn(H,"link",e),H._p=new Promise(function(Z,de){H.onload=Z,H.onerror=de}),H.addEventListener("load",function(){k.loading|=1}),H.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Xs(y,t,a)}y={type:"stylesheet",instance:y,count:1,state:k},c.set(f,y)}}}function Ov(e,t){Hr.X(e,t);var n=ba;if(n&&e){var a=br(n).hoistableScripts,c=Sa(e),f=a.get(c);f||(f=n.querySelector(vo(c)),f||(e=v({src:e,async:!0},t),(t=nr.get(c))&&Yc(e,t),f=n.createElement("script"),Kt(f),gn(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(c,f))}}function Ev(e,t){Hr.M(e,t);var n=ba;if(n&&e){var a=br(n).hoistableScripts,c=Sa(e),f=a.get(c);f||(f=n.querySelector(vo(c)),f||(e=v({src:e,async:!0,type:"module"},t),(t=nr.get(c))&&Yc(e,t),f=n.createElement("script"),Kt(f),gn(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(c,f))}}function Dh(e,t,n,a){var c=(c=pe.current)?Qs(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=wa(n.href),n=br(c).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=wa(n.href);var f=br(c).hoistableStyles,y=f.get(e);if(y||(c=c.ownerDocument||c,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=c.querySelector(yo(e)))&&!f._p&&(y.instance=f,y.state.loading=5),nr.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},nr.set(e,n),f||Tv(c,e,n,y.state))),t&&a===null)throw Error(s(528,""));return y}if(t&&a!==null)throw Error(s(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Sa(n),n=br(c).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function wa(e){return'href="'+Oe(e)+'"'}function yo(e){return'link[rel="stylesheet"]['+e+"]"}function zh(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Tv(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),gn(t,"link",n),Kt(t),e.head.appendChild(t))}function Sa(e){return'[src="'+Oe(e)+'"]'}function vo(e){return"script[async]"+e}function Bh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Oe(n.href)+'"]');if(a)return t.instance=a,Kt(a),a;var c=v({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Kt(a),gn(a,"style",c),Xs(a,n.precedence,e),t.instance=a;case"stylesheet":c=wa(n.href);var f=e.querySelector(yo(c));if(f)return t.state.loading|=4,t.instance=f,Kt(f),f;a=zh(n),(c=nr.get(c))&&$c(a,c),f=(e.ownerDocument||e).createElement("link"),Kt(f);var y=f;return y._p=new Promise(function(k,H){y.onload=k,y.onerror=H}),gn(f,"link",a),t.state.loading|=4,Xs(f,n.precedence,e),t.instance=f;case"script":return f=Sa(n.src),(c=e.querySelector(vo(f)))?(t.instance=c,Kt(c),c):(a=n,(c=nr.get(f))&&(a=v({},n),Yc(a,c)),e=e.ownerDocument||e,c=e.createElement("script"),Kt(c),gn(c,"link",a),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Xs(a,n.precedence,e));return t.instance}function Xs(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=a.length?a[a.length-1]:null,f=c,y=0;y<a.length;y++){var k=a[y];if(k.dataset.precedence===t)f=k;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function $c(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Yc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ps=null;function Ih(e,t,n){if(Ps===null){var a=new Map,c=Ps=new Map;c.set(n,a)}else c=Ps,a=c.get(n),a||(a=new Map,c.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),c=0;c<n.length;c++){var f=n[c];if(!(f[Ht]||f[vt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(t)||"";y=e+y;var k=a.get(y);k?k.push(f):a.set(y,[f])}}return a}function Hh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Lv(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Vh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function _v(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=wa(a.href),f=t.querySelector(yo(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Zs.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=f,Kt(f);return}f=t.ownerDocument||t,a=zh(a),(c=nr.get(c))&&$c(a,c),f=f.createElement("link"),Kt(f);var y=f;y._p=new Promise(function(k,H){y.onload=k,y.onerror=H}),gn(f,"link",a),n.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Zs.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Qc=0;function Av(e,t){return e.stylesheets&&e.count===0&&Js(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&Js(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&Qc===0&&(Qc=62500*pv());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Js(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Qc?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(c)}}:null}function Zs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Js(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ks=null;function Js(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ks=new Map,t.forEach(Rv,e),Ks=null,Zs.call(e))}function Rv(e,t){if(!(t.state.loading&4)){var n=Ks.get(e);if(n)var a=n.get(null);else{n=new Map,Ks.set(e,n);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var y=c[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(n.set(y.dataset.precedence,y),a=y)}a&&n.set(null,a)}c=t.instance,y=c.getAttribute("data-precedence"),f=n.get(y)||a,f===a&&n.set(null,c),n.set(y,c),this.count++,a=Zs.bind(this),c.addEventListener("load",a),c.addEventListener("error",a),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var bo={$$typeof:z,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function Dv(e,t,n,a,c,f,y,k,H){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ce(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ce(0),this.hiddenUpdates=ce(null),this.identifierPrefix=a,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function Uh(e,t,n,a,c,f,y,k,H,Z,de,he){return e=new Dv(e,t,n,y,H,Z,de,he,k),t=1,f===!0&&(t|=24),f=zn(3,null,null,t),e.current=f,f.stateNode=e,t=Mu(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:a,isDehydrated:n,cache:t},Lu(f),e}function Gh(e){return e?(e=Jl,e):Jl}function qh(e,t,n,a,c,f){c=Gh(c),a.context===null?a.context=c:a.pendingContext=c,a=nl(t),a.payload={element:n},f=f===void 0?null:f,f!==null&&(a.callback=f),n=rl(e,a,t),n!==null&&(En(n,e,t),Za(n,e,t))}function Wh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xc(e,t){Wh(e,t),(e=e.alternate)&&Wh(e,t)}function Fh(e){if(e.tag===13||e.tag===31){var t=jl(e,67108864);t!==null&&En(t,e,67108864),Xc(e,67108864)}}function $h(e){if(e.tag===13||e.tag===31){var t=Un();t=ot(t);var n=jl(e,t);n!==null&&En(n,e,t),Xc(e,t)}}var ei=!0;function zv(e,t,n,a){var c=D.T;D.T=null;var f=$.p;try{$.p=2,Pc(e,t,n,a)}finally{$.p=f,D.T=c}}function Bv(e,t,n,a){var c=D.T;D.T=null;var f=$.p;try{$.p=8,Pc(e,t,n,a)}finally{$.p=f,D.T=c}}function Pc(e,t,n,a){if(ei){var c=Zc(a);if(c===null)zc(e,t,a,ti,n),Qh(e,a);else if(Hv(c,e,t,n,a))a.stopPropagation();else if(Qh(e,a),t&4&&-1<Iv.indexOf(e)){for(;c!==null;){var f=Yn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=on(f.pendingLanes);if(y!==0){var k=f;for(k.pendingLanes|=2,k.entangledLanes|=2;y;){var H=1<<31-Vt(y);k.entanglements[1]|=H,y&=~H}gr(f),(Ct&6)===0&&(Bs=Ze()+500,mo(0))}}break;case 31:case 13:k=jl(f,2),k!==null&&En(k,f,2),Hs(),Xc(f,2)}if(f=Zc(a),f===null&&zc(e,t,a,ti,n),f===c)break;c=f}c!==null&&a.stopPropagation()}else zc(e,t,a,null,n)}}function Zc(e){return e=Ji(e),Kc(e)}var ti=null;function Kc(e){if(ti=null,e=fn(e),e!==null){var t=d(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=p(t),e!==null)return e;e=null}else if(n===31){if(e=h(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ti=e,null}function Yh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case _e:return 2;case Xe:return 8;case We:case Pe:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var Jc=!1,ml=null,hl=null,gl=null,wo=new Map,So=new Map,xl=[],Iv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qh(e,t){switch(e){case"focusin":case"focusout":ml=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":wo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(t.pointerId)}}function No(e,t,n,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},t!==null&&(t=Yn(t),t!==null&&Fh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Hv(e,t,n,a,c){switch(t){case"focusin":return ml=No(ml,e,t,n,a,c),!0;case"dragenter":return hl=No(hl,e,t,n,a,c),!0;case"mouseover":return gl=No(gl,e,t,n,a,c),!0;case"pointerover":var f=c.pointerId;return wo.set(f,No(wo.get(f)||null,e,t,n,a,c)),!0;case"gotpointercapture":return f=c.pointerId,So.set(f,No(So.get(f)||null,e,t,n,a,c)),!0}return!1}function Xh(e){var t=fn(e.target);if(t!==null){var n=d(t);if(n!==null){if(t=n.tag,t===13){if(t=p(n),t!==null){e.blockedOn=t,xt(e.priority,function(){$h(n)});return}}else if(t===31){if(t=h(n),t!==null){e.blockedOn=t,xt(e.priority,function(){$h(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ni(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zc(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Ki=a,n.target.dispatchEvent(a),Ki=null}else return t=Yn(n),t!==null&&Fh(t),e.blockedOn=n,!1;t.shift()}return!0}function Ph(e,t,n){ni(e)&&n.delete(t)}function Vv(){Jc=!1,ml!==null&&ni(ml)&&(ml=null),hl!==null&&ni(hl)&&(hl=null),gl!==null&&ni(gl)&&(gl=null),wo.forEach(Ph),So.forEach(Ph)}function ri(e,t){e.blockedOn===t&&(e.blockedOn=null,Jc||(Jc=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Vv)))}var li=null;function Zh(e){li!==e&&(li=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){li===e&&(li=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],c=e[t+2];if(typeof a!="function"){if(Kc(a||n)===null)continue;break}var f=Yn(n);f!==null&&(e.splice(t,3),t-=3,Zu(f,{pending:!0,data:c,method:n.method,action:a},a,c))}}))}function Na(e){function t(H){return ri(H,e)}ml!==null&&ri(ml,e),hl!==null&&ri(hl,e),gl!==null&&ri(gl,e),wo.forEach(t),So.forEach(t);for(var n=0;n<xl.length;n++){var a=xl[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<xl.length&&(n=xl[0],n.blockedOn===null);)Xh(n),n.blockedOn===null&&xl.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var c=n[a],f=n[a+1],y=c[Dt]||null;if(typeof f=="function")y||Zh(n);else if(y){var k=null;if(f&&f.hasAttribute("formAction")){if(c=f,y=f[Dt]||null)k=y.formAction;else if(Kc(c)!==null)continue}else k=y.action;typeof k=="function"?n[a+1]=k:(n.splice(a,3),a-=3),Zh(n)}}}function Kh(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(y){return c=y})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function ed(e){this._internalRoot=e}ai.prototype.render=ed.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current,a=Un();qh(n,a,e,t,null,null)},ai.prototype.unmount=ed.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qh(e.current,2,null,e,null,null),Hs(),t[qt]=null}};function ai(e){this._internalRoot=e}ai.prototype.unstable_scheduleHydration=function(e){if(e){var t=gt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xl.length&&t!==0&&t<xl[n].priority;n++);xl.splice(n,0,e),n===0&&Xh(e)}};var Jh=l.version;if(Jh!=="19.2.3")throw Error(s(527,Jh,"19.2.3"));$.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Uv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oi.isDisabled&&oi.supportsFiber)try{et=oi.inject(Uv),lt=oi}catch{}}return Co.createRoot=function(e,t){if(!i(e))throw Error(s(299));var n=!1,a="",c=om,f=sm,y=im;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError)),t=Uh(e,1,!1,null,null,n,a,null,c,f,y,Kh),e[qt]=t.current,Dc(e),new ed(t)},Co.hydrateRoot=function(e,t,n){if(!i(e))throw Error(s(299));var a=!1,c="",f=om,y=sm,k=im,H=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(k=n.onRecoverableError),n.formState!==void 0&&(H=n.formState)),t=Uh(e,1,!0,t,n??null,a,c,H,f,y,k,Kh),t.context=Gh(null),n=t.current,a=Un(),a=ot(a),c=nl(a),c.callback=null,rl(n,c,a),n=a,t.current.lanes=n,ue(t,n),gr(t),e[qt]=t.current,Dc(e),new ai(t)},Co.version="19.2.3",Co}var cg;function Kv(){if(cg)return rd.exports;cg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),rd.exports=Zv(),rd.exports}var Jv=Kv();const dg=r=>{let l;const o=new Set,s=(g,x)=>{const v=typeof g=="function"?g(l):g;if(!Object.is(v,l)){const N=l;l=x??(typeof v!="object"||v===null)?v:Object.assign({},l,v),o.forEach(C=>C(l,N))}},i=()=>l,h={setState:s,getState:i,getInitialState:()=>m,subscribe:g=>(o.add(g),()=>o.delete(g))},m=l=r(s,i,h);return h},e1=(r=>r?dg(r):dg),t1=r=>r;function n1(r,l=t1){const o=ka.useSyncExternalStore(r.subscribe,ka.useCallback(()=>l(r.getState()),[r,l]),ka.useCallback(()=>l(r.getInitialState()),[r,l]));return ka.useDebugValue(o),o}const fg=r=>{const l=e1(r),o=s=>n1(l,s);return Object.assign(o,l),o},ar=(r=>r?fg(r):fg);function Fr(r,l){let o;try{o=r()}catch{return}return{getItem:i=>{var d;const p=m=>m===null?null:JSON.parse(m,void 0),h=(d=o.getItem(i))!=null?d:null;return h instanceof Promise?h.then(p):p(h)},setItem:(i,d)=>o.setItem(i,JSON.stringify(d,void 0)),removeItem:i=>o.removeItem(i)}}const kd=r=>l=>{try{const o=r(l);return o instanceof Promise?o:{then(s){return kd(s)(o)},catch(s){return this}}}catch(o){return{then(s){return this},catch(s){return kd(s)(o)}}}},r1=(r,l)=>(o,s,i)=>{let d={storage:Fr(()=>localStorage),partialize:S=>S,version:0,merge:(S,M)=>({...M,...S}),...l},p=!1;const h=new Set,m=new Set;let g=d.storage;if(!g)return r((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),o(...S)},s,i);const x=()=>{const S=d.partialize({...s()});return g.setItem(d.name,{state:S,version:d.version})},v=i.setState;i.setState=(S,M)=>(v(S,M),x());const N=r((...S)=>(o(...S),x()),s,i);i.getInitialState=()=>N;let C;const w=()=>{var S,M;if(!g)return;p=!1,h.forEach(E=>{var z;return E((z=s())!=null?z:N)});const j=((M=d.onRehydrateStorage)==null?void 0:M.call(d,(S=s())!=null?S:N))||void 0;return kd(g.getItem.bind(g))(d.name).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==d.version){if(d.migrate){const z=d.migrate(E.state,E.version);return z instanceof Promise?z.then(_=>[!0,_]):[!0,z]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,E.state];return[!1,void 0]}).then(E=>{var z;const[_,L]=E;if(C=d.merge(L,(z=s())!=null?z:N),o(C,!0),_)return x()}).then(()=>{j?.(C,void 0),C=s(),p=!0,m.forEach(E=>E(C))}).catch(E=>{j?.(void 0,E)})};return i.persist={setOptions:S=>{d={...d,...S},S.storage&&(g=S.storage)},clearStorage:()=>{g?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>w(),hasHydrated:()=>p,onHydrate:S=>(h.add(S),()=>{h.delete(S)}),onFinishHydration:S=>(m.add(S),()=>{m.delete(S)})},d.skipHydration||w(),C||N},$r=r1,rr=ar()(r=>({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0},setViewerState:l=>{r(o=>{const s={viewerOpen:l.viewerOpen??o.viewerOpen,viewerImages:l.viewerImages??o.viewerImages,viewerIndex:l.viewerIndex??o.viewerIndex,viewerScale:l.viewerScale??o.viewerScale,viewerTranslate:l.viewerTranslate??o.viewerTranslate};return s.viewerOpen===o.viewerOpen&&s.viewerIndex===o.viewerIndex&&s.viewerScale===o.viewerScale&&s.viewerTranslate.x===o.viewerTranslate.x&&s.viewerTranslate.y===o.viewerTranslate.y&&s.viewerImages===o.viewerImages?o:{...o,...s}})}})),Zt=ar()($r(r=>({error:null,nodeErrors:{},errorCycleIndex:0,errorsDismissed:!1,setError:l=>{r({error:l,errorsDismissed:!1})},setNodeErrors:l=>{r({nodeErrors:l,errorCycleIndex:0,errorsDismissed:!1})},clearNodeErrors:()=>{r({error:null,nodeErrors:{},errorCycleIndex:0,errorsDismissed:!1})},clearNodeError:l=>{r(o=>{const s={...o.nodeErrors};return delete s[String(l)],{nodeErrors:s}})},setErrorCycleIndex:l=>{r({errorCycleIndex:l})},setErrorsDismissed:l=>{r({errorsDismissed:l})}}),{name:"workflow-errors-storage",storage:Fr(()=>localStorage),partialize:r=>({error:r.error,nodeErrors:r.nodeErrors,errorCycleIndex:r.errorCycleIndex,errorsDismissed:r.errorsDismissed}),onRehydrateStorage:()=>r=>{if(!r)return;const l=Object.values(r.nodeErrors||{}).reduce((o,s)=>o+s.length,0);l>0&&!r.error&&r.setError(`Workflow load error: ${l} input${l===1?"":"s"} reference missing options.`),l>0&&r.setErrorCycleIndex(0)}}));function v0(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}function l1(r){if(!(!String(r.type||"").startsWith("Primitive")&&r.type!=="PrimitiveNode")){if(Array.isArray(r.widgets_values))return r.widgets_values[0];if(v0(r.widgets_values)){const o=r.widgets_values.value;return o!==void 0?o:r.widgets_values[0]}}}function Lo(r,l,o){const s=r.widgets_values;if(Array.isArray(s))return o===void 0||o<0||o>=s.length?void 0:s[o];if(v0(s)){if(s[l]!==void 0)return s[l];if(r.type==="VHS_VideoCombine"&&l==="save_image"&&s.save_output!==void 0)return s.save_output}}function Qd(r,l){const o=r.widget_idx_map?.[String(l)];return o||(r.extra?.widget_idx_map?.[String(l)]??null)}function Hi(r){if(Array.isArray(r))return!0;const l=String(r).toUpperCase();return l==="INT"||l==="FLOAT"||l==="BOOLEAN"||l==="STRING"}function Xd(r,l,o){if(Array.isArray(l)){if(o?.comboIndexToValue&&typeof r=="number"&&Number.isFinite(r)){const s=Math.trunc(r);return l[s]??r}return r}if(l==="INT"&&typeof r=="string"&&r.trim()!==""&&!Number.isNaN(Number(r)))return Math.trunc(Number(r));if(l==="FLOAT"&&typeof r=="string"&&r.trim()!==""&&!Number.isNaN(Number(r)))return Number(r);if(l==="BOOLEAN"&&typeof r=="string"){if(r.toLowerCase()==="true")return!0;if(r.toLowerCase()==="false")return!1}return r}function a1(r,l,o){if(l.length===0)return r;const s=Xd(r,l,{comboIndexToValue:!0}),i=String(s),d=i.split(/[\\/]/).pop()??i,p=l.find(m=>String(m)===i);if(p!==void 0)return p;const h=l.find(m=>String(m)===d);return h!==void 0?h:o!==void 0&&l.some(m=>String(m)===String(o))?o:l[0]}function b0(r,l){const o=r.links.find(p=>p[0]===l);if(!o)return null;const s=o[1],i=o[2],d=r.nodes.find(p=>p.id===s);if(!d)return null;if(d.mode===4||d.type==="Reroute"){const p=d.outputs[i];if(!p)return null;const h=d.inputs.find(m=>{if(m.link===null)return!1;const g=String(m.type).toUpperCase(),x=String(p.type).toUpperCase();return g===x||g==="*"||x==="*"});return h?.link!=null?b0(r,h.link):null}return{nodeId:s,slotIndex:i}}function o1(r,l,o,s,i,d,p){const h={};for(const w of o.inputs)if(w.link!=null){const S=b0(r,w.link);if(S)if(i.has(S.nodeId))h[w.name]=[String(S.nodeId),S.slotIndex];else{const M=r.nodes.find(j=>j.id===S.nodeId);if(M){const j=l1(M);j!==void 0?h[w.name]=j:console.warn(`[workflowInputs] Missing source node for input '${w.name}' on node ${o.id} (${o.type}).`,{sourceNodeId:S.nodeId,sourceNodeType:M.type,sourceAllowed:!1})}}}const m=l[s];if(!m?.input)return h;const g=m.input_order?.required||Object.keys(m.input.required||{}),x=m.input_order?.optional||Object.keys(m.input.optional||{}),v=[...g,...x];let N=0;const C=Array.isArray(o.widgets_values)?o.widgets_values:null;for(const w of v)try{const S=m.input.required?.[w]||m.input.optional?.[w];if(!S)continue;const[M]=S,j=o.inputs.find(U=>U.name===w),E=j?.link!=null,z=!!j?.widget&&!E,_=!!j,L=S[1]?.default,R=Object.prototype.hasOwnProperty.call(S[1]??{},"default");if(Hi(M)||z||!_){let U=d?.[w];if(U===void 0&&(U=N),w==="seed"&&p?.[o.id]!==void 0&&!(w in h))h[w]=p[o.id];else if(U!==void 0&&!E&&!(w in h)){const G=Lo(o,w,U);G!==void 0&&(Array.isArray(M)?h[w]=a1(G,M,L):h[w]=Xd(G,M))}else!E&&R&&!(w in h)&&(h[w]=L);U!==void 0&&(N=Math.max(N,U+1)),String(M)==="INT"&&(w==="seed"||w==="noise_seed")&&(U!==void 0?N=Math.max(N,U+2):N=Math.max(N,N+1))}}catch(S){console.error(`Error processing input '${w}' for node ${o.id} (${o.type}):`,S)}if(d)for(const[w,S]of Object.entries(d)){if(!(w in h)&&C&&S<C.length){const M=C[S];M!=null&&(h[w]=M)}if(!(w in h)&&!C){const M=Lo(o,w,S);M!=null&&(h[w]=M)}}return(s==="Power Lora Loader (rgthree)"||o.type==="Power Lora Loader (rgthree)")&&C&&C.forEach((w,S)=>{if(typeof w=="object"&&w!==null&&"lora"in w&&!(Object.values(d||{}).some(j=>j===S)||d===null&&S<N)){const j=`lora_${S}`;j in h||(h[j]=w)}}),p?.[o.id]!==void 0&&!("seed"in h)&&!("noise_seed"in h)&&(h.seed=p[o.id]),h}const Bt="";function s1(){const r="comfyui-mobile-client-id";let l=localStorage.getItem(r);return l||(l="mobile-"+Math.random().toString(36).substring(2,15),localStorage.setItem(r,l)),l}const w0=s1();async function S0(){const r=await fetch(`${Bt}/api/object_info`);if(!r.ok)throw new Error("Failed to fetch node types");return r.json()}async function i1(){const r=await fetch(`${Bt}/api/queue`);if(!r.ok)throw new Error("Failed to fetch queue");return r.json()}async function u1(r){const l=`${Bt}/api/history?max_items=${r}`,o=await fetch(l);if(!o.ok)throw new Error("Failed to fetch history");return o.json()}async function c1(){const r=await fetch(`${Bt}/api/v2/userdata?path=workflows`);if(!r.ok){if(r.status===404)return[];throw new Error("Failed to list user workflows")}return(await r.json()).filter(o=>o.type==="file"&&o.name.endsWith(".json"))}function N0(r){return encodeURIComponent(r)}async function j0(r){const l=await fetch(`${Bt}/api/userdata/${N0("workflows/"+r)}`);if(!l.ok)throw new Error("Failed to load workflow");return l.json()}async function d1(r,l){if(!(await fetch(`${Bt}/api/userdata/${N0("workflows/"+r)}?overwrite=true`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)throw new Error("Failed to save workflow")}async function f1(){const r=await fetch(`${Bt}/api/workflow_templates`);if(!r.ok)throw new Error("Failed to fetch templates");return r.json()}async function C0(r,l){const o=await fetch(`${Bt}/api/workflow_templates/${encodeURIComponent(r)}/${encodeURIComponent(l)}`);if(!o.ok)throw new Error("Failed to load template");return o.json()}async function p1(){await fetch(`${Bt}/api/interrupt`,{method:"POST"})}async function m1(){await fetch(`${Bt}/api/queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clear:!0})})}async function h1(r){await fetch(`${Bt}/api/queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:[r]})})}async function k0(r,l){const o=new FormData;o.append("image",r),l?.type&&o.append("type",l.type),l?.subfolder&&o.append("subfolder",l.subfolder),l?.overwrite!==void 0&&o.append("overwrite",l.overwrite?"true":"false");const s=await fetch(`${Bt}/upload/image`,{method:"POST",body:o});if(!s.ok)throw new Error("Failed to upload image");return s.json()}async function g1(r){await fetch(`${Bt}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:[r]})})}async function pg(r){r.length!==0&&await fetch(`${Bt}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:r})})}async function x1(){await fetch(`${Bt}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clear:!0})})}function qn(r,l,o){return`${Bt}/view?filename=${encodeURIComponent(r)}&subfolder=${encodeURIComponent(l)}&type=${encodeURIComponent(o)}`}function y1(r,l,o,s,i){const p=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws?clientId=${r}`,h=new WebSocket(p);return h.onopen=()=>{o?.()},h.onmessage=m=>{try{const g=JSON.parse(m.data);l(g)}catch(g){console.error("[WS] Failed to parse message:",g)}},h.onclose=()=>{s?.()},h.onerror=m=>{console.error("[WS] Error:",m),i?.(m)},h}async function Md(r="",l=!1,o="output",s){const i=new URLSearchParams;r&&i.set("path",r),l&&i.set("recursive","true"),o&&i.set("source",o),s&&i.set("showHidden","true");const d=await fetch(`${Bt}/mobile/api/files?${i}`);if(!d.ok)throw new Error("Failed to fetch files");return d.json()}async function v1(r){const l=await Md("",!1,"output",r),o=await Md("",!1,"input",r),s=l.files.filter(d=>d.type==="dir").map(d=>d.name);return{input:o.files.filter(d=>d.type==="dir").map(d=>d.name),output:s}}async function Od(r,l=1e3,o=0,s="modified",i=!1,d=null,p){return(await Md(d||"",i,r,p)).files.map(m=>{if(m.type==="dir")return{id:`${r}/${m.path}`,name:m.name,type:"folder",date:m.date,size:m.size};const g=m.folder||(m.path.includes("/")?m.path.substring(0,m.path.lastIndexOf("/")):"");return{id:`${r}/${m.path}`,name:m.name,type:m.type,previewUrl:`${Bt}/mobile/api/thumbnail?filename=${encodeURIComponent(m.name)}&subfolder=${encodeURIComponent(g)}&source=${r}`,fullUrl:`${Bt}/view?filename=${encodeURIComponent(m.name)}&type=${r}&subfolder=${encodeURIComponent(g)}`,date:m.date,size:m.size}})}async function Ed(r,l="output"){const o=await fetch(`${Bt}/mobile/api/files`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:r,source:l})});if(!o.ok){const s=await o.json();throw new Error(s.error||"Failed to delete file")}}async function b1(r,l="output"){const o=new URLSearchParams({path:r,source:l}),s=await fetch(`${Bt}/mobile/api/file-metadata?${o.toString()}`);if(!s.ok){const d=await s.json().catch(()=>({}));throw new Error(d.error||"Failed to load file metadata")}const i=await s.json();if(!i.workflow)throw new Error("No workflow metadata found");return i.workflow}async function w1(r,l="output"){const o=new URLSearchParams({path:r,source:l}),s=await fetch(`${Bt}/mobile/api/image-metadata?${o.toString()}`);if(!s.ok){const i=await s.json().catch(()=>({}));throw new Error(i.error||"Failed to load image metadata")}return s.json()}async function S1(r,l,o="output"){const s=await fetch(`${Bt}/mobile/api/files/move`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sources:r,destination:l??"",source:o})});if(!s.ok){const i=await s.json().catch(()=>({}));throw new Error(i.error||"Failed to move files")}}async function mg(r,l="output"){const o=await fetch(`${Bt}/mobile/api/files/mkdir`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:r,source:l})});if(!o.ok){const s=await o.json().catch(()=>({}));throw new Error(s.error||"Failed to create folder")}}const rt=ar()($r((r,l)=>({running:[],pending:[],isLoading:!1,lastExecutedId:null,queueItemExpanded:{},queueItemUserToggled:{},queueItemHideImages:{},showQueueMetadata:!1,previewVisibility:{},previewVisibilityDefault:!1,fetchQueue:async()=>{const{running:o}=l();r({isLoading:!0});try{const s=await i1(),i=s.queue_running.map(p=>({number:p[0],prompt_id:p[1],prompt:p[2],extra:p[3],outputs_to_execute:p[4]})),d=s.queue_pending.map(p=>({number:p[0],prompt_id:p[1],prompt:p[2],extra:p[3],outputs_to_execute:p[4]}));o.length>0&&i.length===0&&(r({lastExecutedId:o[0].prompt_id}),setTimeout(()=>r({lastExecutedId:null}),100)),r({running:i,pending:d})}catch(s){console.error("Failed to fetch queue:",s)}finally{r({isLoading:!1})}},clearQueue:async()=>{try{await m1(),r({pending:[]})}catch(o){console.error("Failed to clear queue:",o)}},deleteItem:async o=>{try{await h1(o),r(s=>({pending:s.pending.filter(i=>i.prompt_id!==o)}))}catch(s){console.error("Failed to delete queue item:",s)}},interrupt:async()=>{try{await p1()}catch(o){console.error("Failed to interrupt execution:",o)}},updateFromStatus:o=>{const{pending:s}=l();o!==s.length&&l().fetchQueue()},setQueueItemExpanded:(o,s)=>{r(i=>({queueItemExpanded:{...i.queueItemExpanded,[o]:s}}))},setQueueItemUserToggled:(o,s)=>{r(i=>({queueItemUserToggled:{...i.queueItemUserToggled,[o]:s}}))},setQueueItemHideImages:(o,s)=>{r(i=>({queueItemHideImages:{...i.queueItemHideImages,[o]:s}}))},toggleQueueItemHideImages:o=>{r(s=>({queueItemHideImages:{...s.queueItemHideImages,[o]:!s.queueItemHideImages[o]}}))},setShowQueueMetadata:o=>{r({showQueueMetadata:o})},toggleShowQueueMetadata:()=>{r(o=>({showQueueMetadata:!o.showQueueMetadata}))},setPreviewVisibility:(o,s)=>{r(i=>({previewVisibility:{...i.previewVisibility,[o]:s}}))},togglePreviewVisibility:o=>{r(s=>({previewVisibility:{...s.previewVisibility,[o]:!s.previewVisibility[o]}}))},setPreviewVisibilityDefault:o=>{r({previewVisibilityDefault:o})}}),{name:"queue-storage",storage:Fr(()=>localStorage),partialize:r=>({queueItemExpanded:r.queueItemExpanded,queueItemUserToggled:r.queueItemUserToggled,queueItemHideImages:r.queueItemHideImages,showQueueMetadata:r.showQueueMetadata,previewVisibility:r.previewVisibility,previewVisibilityDefault:r.previewVisibilityDefault})})),Ln=ar()($r(r=>({currentPanel:"workflow",setCurrentPanel:l=>{r({currentPanel:l})}}),{name:"navigation-storage",storage:Fr(()=>localStorage),partialize:r=>({currentPanel:r.currentPanel})})),Gn=ar()($r((r,l)=>({pinnedWidgets:{},pinnedWidget:null,pinOverlayOpen:!1,setPinnedWidget:(o,s)=>{const{pinnedWidgets:i}=l();if(s&&o)r({pinnedWidget:o,pinnedWidgets:{...i,[s]:o}});else if(s&&!o){const d={...i};delete d[s],r({pinnedWidget:null,pinnedWidgets:d})}else r({pinnedWidget:o})},setPinOverlayOpen:o=>{r({pinOverlayOpen:o})},togglePinOverlay:()=>{r(o=>({pinOverlayOpen:!o.pinOverlayOpen}))},clearPinnedWidgetForKey:o=>{if(!o){r({pinnedWidget:null,pinOverlayOpen:!1});return}r(s=>{const i={...s.pinnedWidgets};return delete i[o],{pinnedWidgets:i,pinnedWidget:null,pinOverlayOpen:!1}})},restorePinnedWidgetForWorkflow:(o,s)=>{if(!o){r({pinnedWidget:null,pinOverlayOpen:!1});return}const i=l().pinnedWidgets[o];if(!i){r({pinnedWidget:null,pinOverlayOpen:!1});return}const d=s.nodes.some(p=>p.id===i.nodeId);r({pinnedWidget:d?i:null,pinOverlayOpen:!1})},clearCurrentPin:()=>{r({pinnedWidget:null,pinOverlayOpen:!1})}}),{name:"pinned-widget-storage",storage:Fr(()=>localStorage),partialize:r=>({pinnedWidgets:r.pinnedWidgets,pinnedWidget:r.pinnedWidget,pinOverlayOpen:r.pinOverlayOpen})})),Pd=-1,Vi=-2,Ui=-3,si=0x4000000000000,Si=new Set([Pd,Vi,Ui]);function Zd(r){return Si.has(r)}function M0(r){return r===Pd?"randomize":r===Vi?"increment":r===Ui?"decrement":null}function N1(r){return r==="randomize"?Pd:r==="increment"?Vi:r==="decrement"?Ui:null}function vl(r,l,o,s){if(!l)return null;const d=Qd(r,o.id)?.[s];if(d!==void 0)return d;const p=l[o.type];if(!p?.input)return null;const h=p.input_order?.required||Object.keys(p.input.required||{}),m=p.input_order?.optional||Object.keys(p.input.optional||{}),g=[...h,...m];let x=0;for(const v of g){const N=p.input.required?.[v]||p.input.optional?.[v];if(!N)continue;const[C]=N,w=o.inputs.find(_=>_.name===v),S=w?.link!=null,M=!!w?.widget&&!S,j=!!w;if(Hi(C)||M||!j){if(v===s)return x;x+=1,String(C)==="INT"&&(v==="seed"||v==="noise_seed")&&(x+=1)}}return null}function Ea(r,l,o){const s=vl(r,l,o,"seed")??vl(r,l,o,"noise_seed");if(s!==null)return s;if(!l)return o.outputs?.some(v=>String(v.name||"").toLowerCase().includes("seed")&&String(v.type||"").toUpperCase().includes("INT"))&&Array.isArray(o.widgets_values)&&o.widgets_values.length>0?0:null;const i=l[o.type];if(!i?.input)return o.outputs?.some(v=>String(v.name||"").toLowerCase().includes("seed")&&String(v.type||"").toUpperCase().includes("INT"))&&Array.isArray(o.widgets_values)&&o.widgets_values.length>0?0:null;const d=Qd(r,o.id),p=i.input_order?.required||Object.keys(i.input.required||{}),h=i.input_order?.optional||Object.keys(i.input.optional||{}),m=[...p,...h];let g=0;for(const x of m){const v=i.input.required?.[x]||i.input.optional?.[x];if(!v)continue;const[N]=v,C=o.inputs.find(E=>E.name===x),w=C?.link!=null,S=!!C?.widget&&!w,M=!!C;if(Hi(N)||S||!M){const z=d?.[x]??g;if(String(N)==="INT"&&x.toLowerCase().includes("seed"))return z;g+=1,String(N)==="INT"&&(x==="seed"||x==="noise_seed")&&(g+=1)}}return null}function j1(r,l){const o=r[l.type];if(!o?.input)return 1;const i=(o.input.required?.seed||o.input.optional?.seed)?.[1],d=typeof i?.step=="number"?i.step:1;return d>0?d:1}function C1(r){const l=Number(r.properties?.randomMin??0),o=Number(r.properties?.randomMax??si),s=Number.isFinite(l)?Math.max(-si,l):0,i=Number.isFinite(o)?Math.min(si,o):si;return s<=i?{min:s,max:i}:{min:i,max:s}}function _o(r,l){const o=j1(r,l),{min:s,max:i}=C1(l),d=o>0?o/10:1,p=i-s;let h=s+Math.random()*p;return d>0&&(h=Math.round((h-s)/d)*d+s),h>i&&(h=i),h<s&&(h=s),Si.has(h)&&(h=0),h}function k1(r,l,o,s){if(Si.has(r)){if(typeof l=="number"&&!Si.has(l)){if(r===Vi)return l+1;if(r===Ui)return l-1}return _o(o,s)}return Number.isFinite(r)?r:0}const Sn=ar()($r((r,l)=>({seedModes:{},seedLastValues:{},setSeedMode:(o,s,i)=>{const{seedModes:d,seedLastValues:p}=l();if(i?.workflow&&i.nodeTypes){const{workflow:h,nodeTypes:m,updateNodeWidgets:g}=i,x=h.nodes.find(v=>v.id===o);if(x){const v=Ea(h,m,x);if(v!==null&&Array.isArray(x.widgets_values)){const N=v+1,C=typeof x.widgets_values[N]=="string",w={};if(C)w[N]=s;else{const S=N1(s);if(S!==null&&s!=="fixed")w[v]=S;else if(s==="fixed"){const M=Number(x.widgets_values[v]);if(Zd(M)){const j=p[o],E=typeof j=="number"?j:_o(m,x);w[v]=E}}}Object.keys(w).length>0&&g(o,w)}}}r({seedModes:{...d,[o]:s}})},setSeedModes:o=>{r({seedModes:o})},setSeedLastValues:o=>{r({seedLastValues:o})},clearSeedState:()=>{r({seedModes:{},seedLastValues:{}})}}),{name:"seed-storage",storage:Fr(()=>localStorage),partialize:r=>({seedModes:r.seedModes,seedLastValues:r.seedLastValues})}));function hg(r,l){return r&&r[l]||null}function O0(r,l){try{if(l.type==="PrimitiveNode"){const m=l.outputs?.[0]?.type;if(!m)return[];const g=String(m).toUpperCase(),x=Array.isArray(l.widgets_values)?l.widgets_values[0]:void 0;return[{name:l.outputs?.[0]?.name||"value",type:g,options:void 0,value:x,widgetIndex:0,isCombo:!1,connected:!1,inputIndex:-1}]}if(l.type==="Power Lora Loader (rgthree)"){const m=[],g=l.properties?.["Show Strengths"]==="Separate Model & Clip";let x=[];if(r){const v=hg(r,"LoraLoader");if(v?.input?.required?.lora_name){const[N]=v.input.required.lora_name;Array.isArray(N)&&(x=N)}}if(Array.isArray(l.widgets_values)){const v=l.widgets_values,N=[];v.forEach((C,w)=>{typeof C=="object"&&C!==null&&"lora"in C&&"strength"in C&&N.push(w)}),N.length>0&&(m.push({name:"Loras",type:"POWER_LORA_HEADER",options:{loraIndices:N},value:null,widgetIndex:-1,isCombo:!1,connected:!1,inputIndex:-1}),N.forEach(C=>{const w=v[C];m.push({name:"Lora",type:"POWER_LORA",options:{choices:x.length>0?x:void 0,showSeparate:g},value:w,widgetIndex:C,isCombo:!1,connected:!1,inputIndex:-1})})),m.push({name:"Add Lora",type:"POWER_LORA_ADD",options:void 0,value:null,widgetIndex:l.widgets_values.length,isCombo:!1,connected:!1,inputIndex:-1})}return m}const o=hg(r,l.type);if(!o?.input)return l.outputs?.some(g=>String(g.name||"").toLowerCase().includes("seed")&&String(g.type||"").toUpperCase().includes("INT"))&&Array.isArray(l.widgets_values)&&l.widgets_values.length>0?[{name:"seed",type:"INT",options:void 0,value:l.widgets_values[0],widgetIndex:0,isCombo:!1,connected:!1,inputIndex:-1}]:[];const s=o.input_order?.required||Object.keys(o.input.required||{}),i=o.input_order?.optional||Object.keys(o.input.optional||{}),d=[];let p=0;const h=(m,g)=>{if(!g)return;const[x,v]=g,N=l.inputs.findIndex(L=>L.name===m),C=N>=0?l.inputs[N]:void 0,w=C?.link!=null,S=!!C?.widget&&!w,M=!!C,j=Object.prototype.hasOwnProperty.call(v??{},"default"),E=Hi(x)||S||!M||j,z=Array.isArray(x),_=z?{...v??{},options:x}:v;if(E){const L=Lo(l,m,p);d.push({name:m,type:z?"COMBO":String(x),options:_,value:L,widgetIndex:p,isCombo:z,connected:!!w,inputIndex:N})}E&&(p+=1,String(x)==="INT"&&(m==="seed"||m==="noise_seed")&&(p+=1))};for(const m of s){const g=o.input.required?.[m];g&&h(m,g)}for(const m of i){const g=o.input.optional?.[m];g&&h(m,g)}return d}catch(o){return console.error(`Error collecting widget definitions for node ${l.id} (${l.type}):`,o),[]}}function Kd(r,l){return O0(r,l).filter(o=>!o.isCombo).map(o=>({name:o.name,type:o.type,options:o.options,value:o.value,widgetIndex:o.widgetIndex,connected:o.connected,inputIndex:o.inputIndex}))}function Jd(r,l){return O0(r,l).filter(o=>o.isCombo).map(o=>({name:o.name,type:o.type,value:o.value,options:o.options,widgetIndex:o.widgetIndex,connected:o.connected,inputIndex:o.inputIndex}))}function M1(r){let l=5381;for(let o=0;o<r.length;o+=1)l=(l<<5)+l+r.charCodeAt(o),l&=4294967295;return(l>>>0).toString(16).padStart(8,"0")}function O1(r,l){if(!r)return!1;const o=Kd(r,l).filter(i=>!i.connected),s=Jd(r,l).filter(i=>!i.connected);return o.length===0&&s.length===0}function E1(r){const l=r.nodes??[],o=r.definitions?.subgraphs?.flatMap(s=>s.nodes??[])??[];return[...l,...o]}function sd(r,l){const i=E1(r).filter(d=>!O1(l,d)).map(d=>d.type).sort().join("|");return`wf_${M1(i)}`}const gg="__mobile_origin",ii="__mobile_subgraph_group_map";function id(r,l,o){const s={...r.properties??{}};return o&&s[gg]===void 0&&(s[gg]=o),{...r,id:l,inputs:(r.inputs??[]).map(i=>({...i,link:null})),outputs:(r.outputs??[]).map(i=>({...i,links:[]})),widgets_values:r.widgets_values??[],flags:r.flags??{},properties:s,mode:r.mode??0,order:r.order??0}}function T1(r,l){if(!l||l.length===0)return null;const o=[...l].sort((g,x)=>g.id-x.id),[s,i]=r.pos,[d,p]=r.size,h=s+d/2,m=i+p/2;for(const g of o){const[x,v,N,C]=g.bounding;if(h>=x&&h<=x+N&&m>=v&&m<=v+C)return g.id}return null}function xg(r,l){const o=new Map,s=new Map;return l.forEach((i,d)=>{i?.name&&s.set(i.name,d)}),r.forEach((i,d)=>{const p=i?.name;if(p&&s.has(p)){o.set(d,s.get(p));return}d<l.length&&o.set(d,d)}),o}function L1(r,l){const o=new Map;for(const s of r)s.inputs=(s.inputs??[]).map(i=>({...i,link:null})),s.outputs=(s.outputs??[]).map(i=>({...i,links:[]})),o.set(s.id,s);for(const s of l){const[i,d,p,h,m]=s,g=o.get(d),x=o.get(h),v=g?.outputs?.[p],N=x?.inputs?.[m];v&&(v.links||(v.links=[]),v.links.push(i)),N&&(N.link=i)}return r}function _1(r,l){const o=r.nodes.filter(w=>l.has(w.type));if(o.length===0)return{workflow:r,changed:!1};const s=new Set(o.map(w=>w.id));let i=Math.max(0,...r.nodes.map(w=>w.id))+1;const d=[],p=r.groups??[],h=r.extra??{},m=typeof h[ii]=="object"&&h[ii]!==null?h[ii]:{},g={};for(const[w,S]of Object.entries(m))(typeof S=="number"||S===null)&&(g[w]=S);const x=new Map;for(const w of r.nodes){if(!s.has(w.id)){d.push(id(w,w.id,{scope:"root",nodeId:w.id}));continue}const S=l.get(w.type);if(!S){d.push(id(w,w.id,{scope:"root",nodeId:w.id}));continue}const M=T1(w,p);g[S.id]=M??null;const j=xg(w.inputs??[],S.inputs??[]),E=xg(w.outputs??[],S.outputs??[]),z=new Map,_=new Map,L=new Map,R=[];for(const A of S.nodes??[]){const I=i++;z.set(A.id,I),d.push(id(A,I,{scope:"subgraph",subgraphId:S.id,nodeId:A.id}))}for(const A of S.links??[]){const I=A.origin_id,U=A.target_id;if(I===-10){const K=z.get(U);if(K!==void 0){const ge=_.get(A.origin_slot)??[];ge.push({origin_id:-10,origin_slot:A.origin_slot,target_id:K,target_slot:A.target_slot,type:A.type}),_.set(A.origin_slot,ge)}continue}if(U===-20){const K=z.get(I);if(K!==void 0){const ge=L.get(A.target_slot)??[];ge.push({origin_id:K,origin_slot:A.origin_slot,target_id:-20,target_slot:A.target_slot,type:A.type}),L.set(A.target_slot,ge)}continue}const G=z.get(I),W=z.get(U);G!==void 0&&W!==void 0&&R.push({origin_id:G,origin_slot:A.origin_slot,target_id:W,target_slot:A.target_slot,type:A.type})}x.set(w.id,{inputSlotMap:j,outputSlotMap:E,inputTargets:_,outputSources:L,internalLinks:R})}const v=[],N=r.links??[];for(const w of N){const[,S,M,j,E,z]=w,_=s.has(S),L=s.has(j);if(!_&&!L){v.push({origin_id:S,origin_slot:M,target_id:j,target_slot:E,type:z});continue}if(_&&L){const R=x.get(S),A=x.get(j),I=R?.outputSlotMap.get(M),U=A?.inputSlotMap.get(E);if(I===void 0||U===void 0)continue;const G=R?.outputSources.get(I)??[],W=A?.inputTargets.get(U)??[];for(const K of G)for(const ge of W)v.push({origin_id:K.origin_id,origin_slot:K.origin_slot,target_id:ge.target_id,target_slot:ge.target_slot,type:K.type});continue}if(_){const R=x.get(S),A=R?.outputSlotMap.get(M);if(A===void 0)continue;const I=R?.outputSources.get(A)??[];for(const U of I)v.push({origin_id:U.origin_id,origin_slot:U.origin_slot,target_id:j,target_slot:E,type:U.type});continue}if(L){const R=x.get(j),A=R?.inputSlotMap.get(E);if(A===void 0)continue;const I=R?.inputTargets.get(A)??[];for(const U of I)v.push({origin_id:S,origin_slot:M,target_id:U.target_id,target_slot:U.target_slot,type:U.type})}}for(const w of x.values())v.push(...w.internalLinks);const C=v.map((w,S)=>[S+1,w.origin_id,w.origin_slot,w.target_id,w.target_slot,w.type]);return L1(d,C),{workflow:{...r,extra:{...h,[ii]:g},nodes:d,links:C,last_node_id:Math.max(0,...d.map(w=>w.id)),last_link_id:C.length},changed:!0}}function A1(r){const l=r.definitions?.subgraphs??[];if(l.length===0)return r;const o=new Map;for(const i of l)i?.id&&o.set(i.id,i);let s=r;for(let i=0;i<l.length+4;i+=1){const{workflow:d,changed:p}=_1(s,o);if(!p)break;s=d}return s}function R1(r){const l=new Map,o=new Map,s=new Map;for(const i of r.nodes)l.set(i.id,i),o.set(i.id,[]),s.set(i.id,[]);for(const i of r.links){const[,d,,p]=i,h=o.get(p);h&&!h.includes(d)&&h.push(d);const m=s.get(d);m&&!m.includes(p)&&m.push(p)}return{nodes:l,dependencies:o,dependents:s}}function D1(r){return["SaveImage","PreviewImage","SaveAnimatedWEBP","SaveAnimatedPNG","SaveVideo","SaveAudio"].some(o=>r.type.includes(o))||r.outputs.length===0||r.outputs.every(o=>!o.links||o.links.length===0)}function z1(r){if(r.nodes.length===0)return[];const l=R1(r),o=new Set,s=[];function i(p){if(o.has(p))return;o.add(p);const h=l.nodes.get(p);if(!h)return;const m=l.dependencies.get(p)||[];for(const g of m)i(g);s.push(h)}const d=r.nodes.filter(D1);if(d.length===0)for(const p of r.nodes)(l.dependents.get(p.id)||[]).length===0&&d.push(p);for(const p of d)i(p.id);for(const p of r.nodes)o.has(p.id)||i(p.id);return s}function Ao(r,l,o){const s=r.nodes.find(g=>g.id===l);if(!s||!s.inputs[o])return null;const i=s.inputs[o].link;if(i===null)return null;const d=r.links.find(g=>g[0]===i);if(!d)return null;const[,p,h]=d,m=r.nodes.find(g=>g.id===p);return m?{node:m,outputIndex:h}:null}function Ni(r,l,o){const s=r.nodes.find(p=>p.id===l);if(!s||!s.outputs[o])return[];const i=s.outputs[o].links||[],d=[];for(const p of i){const h=r.links.find(v=>v[0]===p);if(!h)continue;const[,,,m,g]=h,x=r.nodes.find(v=>v.id===m);x&&d.push({node:x,inputIndex:g})}return d}const B1="__mobile_origin",E0="__mobile_subgraph_group_map";function Td(r){return r.map(l=>({...l,widgets_values:l.widgets_values??[],inputs:l.inputs??[],outputs:l.outputs??[],flags:l.flags??{},properties:l.properties??{},mode:l.mode??0,order:l.order??0}))}function yg(r){const l=JSON.parse(JSON.stringify(r));return l.nodes=Td(l.nodes??[]),l.links=l.links??[],l.groups=l.groups??[],l.config=l.config??{},l.definitions?.subgraphs&&(l.definitions.subgraphs=l.definitions.subgraphs.map(o=>({...o,nodes:Td(o.nodes??[]),links:o.links??[]}))),l.last_node_id=l.last_node_id??Math.max(0,...l.nodes.map(o=>o.id)),l.last_link_id=l.last_link_id??0,l.version=l.version??.4,l}function Ro(r){if(!r)return null;const o=r.properties?.[B1];if(!o||typeof o!="object")return null;const s=o.scope;if(s==="root"){const i=o.nodeId;return typeof i=="number"?{scope:"root",nodeId:i}:null}if(s==="subgraph"){const i=o.nodeId,d=o.subgraphId;if(typeof i=="number"&&typeof d=="string")return{scope:"subgraph",subgraphId:d,nodeId:i}}return null}function Ld(r,l){const o=new Map;if(!l||l.length===0)return o;const s=[...l].sort((i,d)=>i.id-d.id);for(const i of r){const[d,p]=i.pos,[h,m]=i.size,g=d+h/2,x=p+m/2;for(const v of s){const[N,C,w,S]=v.bounding;if(g>=N&&g<=N+w&&x>=C&&x<=C+S){o.set(i.id,v.id);break}}}return o}function vg(r,l){const o=new Set,s=Array.from(r);for(;s.length>0;){const i=s.pop();if(!i||o.has(i))continue;o.add(i);const d=l.get(i);if(d)for(const p of d)o.has(p)||s.push(p)}return o}function I1(r){const l=new Set(r.map(s=>s.id)),o=new Map;for(const s of r)for(const i of s.nodes??[]){if(!l.has(i.type))continue;const d=o.get(i.type)??[];d.push({parentId:s.id,nodeId:i.id}),o.set(i.type,d)}return o}function ko(r,l,o){return!o||o.length===0?null:Ld(l,o).get(r)??null}function T0(r,l,o=null){const s=r.nodes??[],i=r.groups??[],d=r.definitions?.subgraphs??[],p=new Map(d.map(N=>[N.id,N])),h=new Set(d.map(N=>N.id)),m=new Map,g=[];for(const N of s){const C=Ro(N);if(C?.scope==="subgraph"){const w=m.get(C.subgraphId);w?w.push(N):m.set(C.subgraphId,[N])}else g.push(N)}const x=new Map;for(const N of d){const C=new Set;for(const w of N.nodes??[])h.has(w.type)&&C.add(w.type);C.size>0&&x.set(N.id,C)}const v=new Set;if(o){const N=p.get(o);if(!N)return v;const C=N.groups??[];if(!C.find(L=>L.id===l))return v;const S=N.nodes??[],M=Ld(S,C),j=new Set,E=new Set;for(const L of S)M.get(L.id)===l&&(h.has(L.type)?j.add(L.type):E.add(L.id));const z=m.get(o)??[];for(const L of z){const R=Ro(L);R?.scope==="subgraph"&&E.has(R.nodeId)&&v.add(L.id)}const _=vg(j,x);for(const L of _){const R=m.get(L)??[];for(const A of R)v.add(A.id)}}else{if(!i.find(j=>j.id===l))return v;const C=Ld(g,i);for(const j of g)C.get(j.id)===l&&v.add(j.id);const w=r.extra?.[E0],S=new Set;if(w&&typeof w=="object")for(const[j,E]of Object.entries(w))E===l&&S.add(j);const M=vg(S,x);for(const j of M){const E=m.get(j)??[];for(const z of E)v.add(z.id)}}return v}function H1(r,l,o,s){if(!Array.isArray(r.widgets_values)){const d={...r.widgets_values||{}};return s?(d[s]=o,r.type==="VHS_VideoCombine"&&s==="save_image"&&"save_output"in d&&(d.save_output=o)):l>=0&&(d[String(l)]=o),{...r,widgets_values:d}}let i=[...r.widgets_values];return l>=i.length?i.push(o):i[l]=o,r.type==="Power Lora Loader (rgthree)"&&(i=i.filter(d=>d!==null)),{...r,widgets_values:i}}function V1(r,l){if(!Array.isArray(r.widgets_values))return r;const o=[...r.widgets_values];for(const[s,i]of Object.entries(l)){const d=parseInt(s,10);o[d]=i}return{...r,widgets_values:o}}function ui(r,l){const o=Ro(l)??{scope:"root",nodeId:l.id};if(o.scope==="root"){const d=r.nodes.map(p=>p.id===o.nodeId?{...p,widgets_values:l.widgets_values??[]}:p);return{...r,nodes:d}}const s=r.definitions?.subgraphs;if(!s)return r;const i=s.map(d=>{if(d.id!==o.subgraphId)return d;const p=d.nodes.map(h=>h.id===o.nodeId?{...h,widgets_values:l.widgets_values??[]}:h);return{...d,nodes:p}});return{...r,definitions:{...r.definitions,subgraphs:i}}}function ud(r,l,o){const s=["fixed","randomize","increment","decrement"];if(Array.isArray(o.widgets_values)){const d=o.widgets_values.find(p=>typeof p=="string"&&s.includes(p.toLowerCase()));if(typeof d=="string"){const p=d.toLowerCase();if(s.includes(p))return p}}const i=Ea(r,l,o);if(i!==null&&Array.isArray(o.widgets_values)){const d=Number(o.widgets_values[i]),p=M0(d);if(p)return p;const m=(o.outputs??[]).some(N=>String(N.name||"").toLowerCase().includes("seed")&&String(N.type||"").toUpperCase().includes("INT")),g=o.widgets_values.slice(i+1),x=g.length>0&&g.every(N=>N===""||N===null||N===void 0),v=o.properties&&("randomMin"in o.properties||"randomMax"in o.properties);if(m&&x&&v)return"randomize"}return"fixed"}function U1(r,l){const o={};for(const s of r.nodes){const i=l[s.type];if(!i?.input)continue;const d=i.input_order?.required||Object.keys(i.input.required||{}),p=i.input_order?.optional||Object.keys(i.input.optional||{}),h=[...d,...p];for(const m of h){const g=i.input.required?.[m]||i.input.optional?.[m];if(!g)continue;const[x]=g;if(!Array.isArray(x)||x.length===0||s.inputs.find(E=>E.name===m)?.link!=null)continue;const N=vl(r,l,s,m);if(N===null)continue;const C=Lo(s,m,N);if(C==null)continue;const w=Xd(C,x,{comboIndexToValue:!0}),S=String(w),M=S.split(/[\\/]/).pop()??S;if(!x.some(E=>{const z=String(E);return z===S||z===M})){const E=String(s.id);o[E]||(o[E]=[]),o[E].push({type:"workflow_load",message:`Missing value: ${S}`,details:"Not found on server.",inputName:m})}}}return o}const ne=ar()($r((r,l)=>{const o=s=>{const{manuallyHiddenNodes:i}=l(),p=Object.keys(s).filter(h=>i[Number(h)]);if(p.length>0){const h={...i};for(const m of p)delete h[Number(m)];r({manuallyHiddenNodes:h})}Zt.getState().setNodeErrors(s)};return{workflowSource:null,workflow:null,embedWorkflow:null,originalWorkflow:null,currentFilename:null,currentWorkflowKey:null,nodeTypes:null,isLoading:!1,savedWorkflowStates:{},isExecuting:!1,executingNodeId:null,executingPromptId:null,progress:0,executionStartTime:null,currentNodeStartTime:null,nodeDurationStats:{},workflowDurationStats:{},nodeOutputs:{},promptOutputs:{},runCount:1,followQueue:!1,workflowLoadedAt:0,connectionHighlightModes:{},connectionButtonsVisible:!0,manuallyHiddenNodes:{},searchQuery:"",searchOpen:!1,collapsedGroups:{},hiddenGroups:{},collapsedSubgraphs:{},hiddenSubgraphs:{},setNodeOutput:(s,i)=>{r(d=>({nodeOutputs:{...d.nodeOutputs,[s]:i}}))},clearNodeOutputs:()=>{r({nodeOutputs:{}})},addPromptOutputs:(s,i)=>{!s||i.length===0||r(d=>({promptOutputs:{...d.promptOutputs,[s]:[...d.promptOutputs[s]??[],...i]}}))},clearPromptOutputs:s=>{if(!s){r({promptOutputs:{}});return}r(i=>{if(!i.promptOutputs[s])return i;const d={...i.promptOutputs};return delete d[s],{promptOutputs:d}})},setRunCount:s=>{r({runCount:Math.max(1,Math.floor(s))})},setFollowQueue:s=>{r({followQueue:s})},cycleConnectionHighlight:s=>{r(i=>{const d=i.connectionHighlightModes[s]??"off",p=d==="off"?"inputs":d==="inputs"?"outputs":d==="outputs"?"both":"off";return{connectionHighlightModes:{...i.connectionHighlightModes,[s]:p}}})},setConnectionHighlightMode:(s,i)=>{r(d=>({connectionHighlightModes:{...d.connectionHighlightModes,[s]:i}}))},toggleConnectionButtonsVisible:()=>{r(s=>({connectionButtonsVisible:!s.connectionButtonsVisible}))},setConnectionButtonsVisible:s=>{r({connectionButtonsVisible:s})},hideNode:s=>{r(i=>({manuallyHiddenNodes:{...i.manuallyHiddenNodes,[s]:!0}}))},setNodeHidden:(s,i)=>{r(d=>{const p={...d.manuallyHiddenNodes};return i?p[s]=!0:delete p[s],{manuallyHiddenNodes:p}})},revealNodeWithParents:s=>{const{workflow:i}=l();if(!i)return;const d=i.definitions?.subgraphs??[];console.log("[revealNodeWithParents] start",{nodeId:s,rootNodeCount:i.nodes?.length??0,subgraphCount:d.length});let p=i.nodes.find(w=>w.id===s);if(!p)for(const w of d){const S=w.nodes?.find(M=>M.id===s);if(S){p=S;break}}if(!p){console.log("[revealNodeWithParents] node not found",{nodeId:s,rootIds:i.nodes?.slice(0,5).map(w=>w.id),subgraphSummaries:d.map(w=>({id:w.id,nodeCount:w.nodes?.length??0,sampleIds:w.nodes?.slice(0,5).map(S=>S.id)??[]}))});return}const h=new Map(d.map(w=>[w.id,w])),m=I1(d),g=Ro(p),x=i.nodes.filter(w=>Ro(w)?.scope!=="subgraph"),v=g?.scope==="subgraph"?g.nodeId:p.id,C=(()=>{const w=new Set,S=[v];if(g?.scope==="subgraph"){const M=h.get(g.subgraphId),j=new Map;for(M?.links?.forEach(E=>{const z=j.get(E.target_id)??[];z.push(E.origin_id),j.set(E.target_id,z)});S.length>0;){const E=S.pop();if(E===void 0)continue;(j.get(E)??[]).forEach(_=>{w.has(_)||(w.add(_),S.push(_))})}return w}for(;S.length>0;){const M=S.pop();if(M===void 0)continue;const j=i.nodes.find(E=>E.id===M);j&&j.inputs?.forEach((E,z)=>{if(E.link===null)return;const _=Ao(i,M,z);if(!_)return;const L=_.node.id;w.has(L)||(w.add(L),S.push(L))})}return w})();console.log("[revealNodeWithParents] parents",{nodeId:s,parentCount:C.size,parents:Array.from(C).slice(0,20)}),console.log("[revealNodeWithParents] found node",{nodeId:p.id,origin:g,hasGroups:(i.groups?.length??0)>0,hiddenNodeCount:Object.keys(l().manuallyHiddenNodes??{}).length}),r(w=>{const S={...w.manuallyHiddenNodes};delete S[s],C.forEach(R=>{delete S[R]});const M={...w.hiddenGroups},j={...w.hiddenSubgraphs},E={...w.collapsedGroups},z={...w.collapsedSubgraphs},_=R=>{R!=null&&(delete M[R],E[R]=!1)},L=R=>{R&&(z[R]=!1,delete j[R])};if(!g||g.scope==="root"){const R=ko(p.id,x,i.groups??[]);console.log("[revealNodeWithParents] root origin",{nodeId:s,groupId:R}),_(R),C.forEach(A=>{const I=ko(A,x,i.groups??[]);_(I)})}else{L(g.subgraphId);const R=h.get(g.subgraphId);if(R){const W=ko(g.nodeId,R.nodes??[],R.groups??[]);console.log("[revealNodeWithParents] subgraph origin",{nodeId:s,subgraphId:g.subgraphId,groupId:W}),_(W)}const A=i.extra?.[E0],I=A&&typeof A=="object"?A[g.subgraphId]:void 0;typeof I=="number"&&(console.log("[revealNodeWithParents] root group mapping",{subgraphId:g.subgraphId,rootGroupId:I}),_(I)),R&&C.forEach(W=>{const K=ko(W,R.nodes??[],R.groups??[]);_(K)});const U=[g.subgraphId],G=new Set;for(;U.length>0;){const W=U.pop();if(!W||G.has(W))continue;G.add(W);const K=m.get(W)??[];console.log("[revealNodeWithParents] parent chain",{current:W,parentCount:K.length});for(const ge of K){L(ge.parentId);const ae=h.get(ge.parentId);if(ae){const re=ko(ge.nodeId,ae.nodes??[],ae.groups??[]);console.log("[revealNodeWithParents] parent expand",{parentId:ge.parentId,parentNodeId:ge.nodeId,parentGroupId:re}),_(re)}G.has(ge.parentId)||U.push(ge.parentId)}}}return{manuallyHiddenNodes:S,hiddenGroups:M,hiddenSubgraphs:j,collapsedGroups:E,collapsedSubgraphs:z}})},showAllHiddenNodes:()=>{r({manuallyHiddenNodes:{},hiddenGroups:{},hiddenSubgraphs:{}})},toggleGroupCollapse:s=>{r(i=>{const d=i.collapsedGroups[s]??!0;return{collapsedGroups:{...i.collapsedGroups,[s]:!d}}})},setGroupCollapsed:(s,i)=>{r(d=>{const p={...d.collapsedGroups};return i?p[s]=!0:delete p[s],{collapsedGroups:p}})},toggleGroupHidden:s=>{r(i=>({hiddenGroups:{...i.hiddenGroups,[s]:!i.hiddenGroups[s]}}))},setGroupHidden:(s,i)=>{r(d=>{const p={...d.hiddenGroups};return i?p[s]=!0:delete p[s],{hiddenGroups:p}})},toggleSubgraphHidden:s=>{r(i=>({hiddenSubgraphs:{...i.hiddenSubgraphs,[s]:!i.hiddenSubgraphs[s]}}))},setSubgraphHidden:(s,i)=>{r(d=>{const p={...d.hiddenSubgraphs};return i?p[s]=!0:delete p[s],{hiddenSubgraphs:p}})},updateGroupTitle:(s,i,d)=>{const{workflow:p}=l();if(!p)return;const h=i.trim();if(d){const x=(p.definitions?.subgraphs??[]).map(v=>{if(v.id!==d)return v;const C=(v.groups??[]).map(w=>w.id===s?{...w,title:h}:w);return{...v,groups:C}});Zt.getState().setError(null),r({workflow:{...p,definitions:{...p.definitions??{},subgraphs:x}}});return}const m=(p.groups??[]).map(g=>g.id===s?{...g,title:h}:g);r({workflow:{...p,groups:m}})},updateSubgraphTitle:(s,i)=>{const{workflow:d}=l();if(!d)return;const p=i.trim(),m=(d.definitions?.subgraphs??[]).map(g=>g.id===s?{...g,name:p}:g);r({workflow:{...d,definitions:{...d.definitions??{},subgraphs:m}}})},bypassAllInGroup:(s,i,d=null)=>{const{workflow:p}=l();if(!p)return;const h=T0(p,s,d);if(h.size===0)return;const m=i?4:0,g=(p.nodes??[]).map(x=>h.has(x.id)?{...x,mode:m}:x);r({workflow:{...p,nodes:g}})},showAllHiddenGroups:()=>{r({hiddenGroups:{}})},toggleSubgraphCollapse:s=>{r(i=>({collapsedSubgraphs:{...i.collapsedSubgraphs,[s]:!(i.collapsedSubgraphs[s]??!0)}}))},setSubgraphCollapsed:(s,i)=>{r(d=>({collapsedSubgraphs:{...d.collapsedSubgraphs,[s]:i}}))},setSearchQuery:s=>{r({searchQuery:s})},setSearchOpen:s=>{r({searchOpen:s})},updateWorkflowDuration:(s,i)=>{!s||i<=0||r(d=>{const p=d.workflowDurationStats[s],h=(p?.count??0)+1,m=p?(p.avgMs*p.count+i)/h:i;return{workflowDurationStats:{...d.workflowDurationStats,[s]:{avgMs:m,count:h}}}})},clearWorkflowCache:()=>{const{currentWorkflowKey:s,savedWorkflowStates:i,originalWorkflow:d,nodeTypes:p}=l(),h={...i};if(s?(delete h[s],Gn.getState().clearPinnedWidgetForKey(s)):Gn.getState().clearCurrentPin(),!d){Sn.getState().setSeedModes({}),Sn.getState().setSeedLastValues({}),r({savedWorkflowStates:h});return}const m={};if(p)for(const g of d.nodes)Ea(d,p,g)!==null&&(m[g.id]=ud(d,p,g));Sn.getState().setSeedModes(m),Sn.getState().setSeedLastValues({}),Zt.getState().setError(null),r({workflow:JSON.parse(JSON.stringify(d)),savedWorkflowStates:h,runCount:1,workflowLoadedAt:Date.now()})},saveCurrentWorkflowState:()=>{const{workflow:s,currentWorkflowKey:i,savedWorkflowStates:d,collapsedGroups:p,hiddenGroups:h,collapsedSubgraphs:m,hiddenSubgraphs:g}=l(),x=Sn.getState().seedModes;if(!s||!i)return;const v=d[i]?.bookmarkedNodeIds??[],N={};for(const C of s.nodes)N[C.id]={mode:C.mode,flags:C.flags?{collapsed:!!C.flags.collapsed}:void 0,widgets_values:C.widgets_values};r({savedWorkflowStates:{...d,[i]:{nodes:N,seedModes:{...x},collapsedGroups:{...p},hiddenGroups:{...h},collapsedSubgraphs:{...m},hiddenSubgraphs:{...g},bookmarkedNodeIds:[...v]}}})},loadWorkflow:(s,i,d)=>{const{currentFilename:p,savedWorkflowStates:h,nodeTypes:m}=l(),g=d?.fresh??!1,x=d?.source??{type:"other"},v=A1(s),N=yg(s),C=Td(v.nodes),w={...v,nodes:C,links:v.links??[],groups:v.groups??[],config:v.config??{},last_node_id:v.last_node_id??Math.max(0,...C.map(I=>I.id)),last_link_id:v.last_link_id??0,version:v.version??.4},S=sd(w,m),M=Gn.getState(),j=i?M.pinnedWidgets[i]:void 0;if(j&&!M.pinnedWidgets[S]&&M.setPinnedWidget(j,S),M.restorePinnedWidgetForWorkflow(S,w),p&&l().saveCurrentWorkflowState(),g&&h[S]){const I={...h};delete I[S],r({savedWorkflowStates:I})}const E={};if(m)for(const I of w.nodes)Ea(w,m,I)!==null&&(E[I.id]=ud(w,m,I));let z=g?null:h[S];!z&&!g&&i&&h[i]&&(z=h[i],r({savedWorkflowStates:{...h,[S]:h[i]}}));const _=s.definitions?.subgraphs??[],L={};for(const I of _)L[I.id]=!0;const R={};for(const I of w.groups??[])R[I.id]=!0;for(const I of _)for(const U of I.groups??[])R[U.id]=!0;let A=w;if(z){const I=w.nodes.map(W=>{const K=z.nodes[W.id];return K?{...W,mode:K.mode??W.mode,flags:K.flags??W.flags,widgets_values:K.widgets_values??W.widgets_values}:W}),U={...w,nodes:I};A=U;let G=N;if(G)for(const W of I)G=ui(G,W);r({workflowSource:x,workflow:U,embedWorkflow:G,originalWorkflow:JSON.parse(JSON.stringify(w)),currentFilename:i||null,currentWorkflowKey:S,collapsedGroups:{...R,...z.collapsedGroups??{}},hiddenGroups:z.hiddenGroups??{},collapsedSubgraphs:{...L,...z.collapsedSubgraphs??{}},hiddenSubgraphs:z.hiddenSubgraphs??{},runCount:1,followQueue:!1,workflowLoadedAt:Date.now()}),Sn.getState().setSeedModes({...E,...z.seedModes}),Sn.getState().setSeedLastValues({}),Ln.getState().setCurrentPanel("workflow"),rr.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}})}else Zt.getState().setError(null),r({workflowSource:x,workflow:w,embedWorkflow:N,originalWorkflow:JSON.parse(JSON.stringify(w)),currentFilename:i||null,currentWorkflowKey:S,collapsedGroups:R,hiddenGroups:{},collapsedSubgraphs:L,hiddenSubgraphs:{},runCount:1,followQueue:!1,workflowLoadedAt:Date.now()}),Sn.getState().setSeedModes(E),Sn.getState().setSeedLastValues({}),Ln.getState().setCurrentPanel("workflow"),rr.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}});if(m){const I=U1(A,m),U=Object.values(I).reduce((G,W)=>G+W.length,0);U>0?(o(I),Zt.getState().setError(`Workflow load error: ${U} input${U===1?"":"s"} reference missing options.`)):Zt.getState().clearNodeErrors()}},unloadWorkflow:()=>{const{currentWorkflowKey:s,savedWorkflowStates:i}=l();if(s){const d={...i};delete d[s],r({savedWorkflowStates:d})}Zt.getState().setError(null),r({workflowSource:null,workflow:null,embedWorkflow:null,originalWorkflow:null,currentFilename:null,currentWorkflowKey:null,collapsedGroups:{},hiddenGroups:{},collapsedSubgraphs:{},hiddenSubgraphs:{},runCount:1,nodeOutputs:{},promptOutputs:{},followQueue:!1,workflowLoadedAt:Date.now(),connectionHighlightModes:{},manuallyHiddenNodes:{}}),Sn.getState().clearSeedState(),Gn.getState().clearCurrentPin(),Ln.getState().setCurrentPanel("workflow"),rr.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}})},setSavedWorkflow:(s,i)=>{Zt.getState().setError(null);const d=sd(s,l().nodeTypes);r({workflow:s,embedWorkflow:yg(s),originalWorkflow:JSON.parse(JSON.stringify(s)),currentFilename:i,currentWorkflowKey:d})},updateNodeWidget:(s,i,d,p)=>{const{workflow:h,embedWorkflow:m}=l();if(!h)return;const g=h.nodes.map(N=>N.id===s?H1(N,i,d,p):N),x=g.find(N=>N.id===s),v=m&&x?ui(m,x):m;r({workflow:{...h,nodes:g},embedWorkflow:v})},updateNodeWidgets:(s,i)=>{const{workflow:d,embedWorkflow:p}=l();if(!d)return;const h=d.nodes.map(x=>x.id===s?V1(x,i):x),m=h.find(x=>x.id===s),g=p&&m?ui(p,m):p;r({workflow:{...d,nodes:h},embedWorkflow:g})},updateNodeTitle:(s,i)=>{const{workflow:d}=l();if(!d)return;const p=i?.trim()??"",h=d.nodes.map(m=>{if(m.id!==s)return m;const g={...m.properties??{}},x={...m,properties:g};return p?(x.title=p,g.title=p):(delete x.title,delete g.title),x});r({workflow:{...d,nodes:h}})},toggleBypass:s=>{const{workflow:i}=l();if(!i)return;const d=i.nodes.map(p=>{if(p.id===s){const m=(p.mode||0)===4?0:4;return{...p,mode:m}}return p});r({workflow:{...i,nodes:d}})},toggleNodeFold:s=>{const{workflow:i}=l();if(!i)return;const d=i.nodes.map(p=>{if(p.id===s){const h=p.flags||{},m=h.collapsed;return{...p,flags:{...h,collapsed:!m}}}return p});r({workflow:{...i,nodes:d}})},setNodeFold:(s,i)=>{const{workflow:d}=l();if(!d)return;const p=d.nodes.map(h=>{if(h.id===s){const m=h.flags||{};return{...h,flags:{...m,collapsed:i}}}return h});r({workflow:{...d,nodes:p}})},ensureNodeExpanded:s=>{const{workflow:i}=l();if(!i||!i.nodes.find(h=>h.id===s)?.flags?.collapsed)return;const p=i.nodes.map(h=>h.id===s?{...h,flags:{...h.flags,collapsed:!1}}:h);r({workflow:{...i,nodes:p}})},scrollToNode:(s,i)=>{const{manuallyHiddenNodes:d}=l(),{searchOpen:p,searchQuery:h,collapsedGroups:m,hiddenGroups:g,collapsedSubgraphs:x,hiddenSubgraphs:v}=l();if(console.log("[scrollToNode] start",{nodeId:s,hidden:!!d[s],searchOpen:p,searchQuery:h,collapsedGroups:Object.keys(m??{}).length,hiddenGroups:Object.keys(g??{}).length,collapsedSubgraphs:Object.keys(x??{}).length,hiddenSubgraphs:Object.keys(v??{}).length}),d[s]&&l().setNodeHidden(s,!1),document.body.dataset.textareaFocus==="true")return;l().ensureNodeExpanded(s);const N=(C,w)=>{const S=document.getElementById(`node-anchor-${s}`)??document.getElementById(`node-${s}`),M=document.getElementById(`node-card-${s}`)??document.getElementById(`node-${s}`);if(!S||!M){console.log("[scrollToNode] missing elements",{nodeId:s,attemptsLeft:C,hasAnchor:!!S,hasNode:!!M}),C>0?requestAnimationFrame(()=>N(C-1,w)):w>0&&setTimeout(()=>N(10,w-1),200);return}const j=S.closest('[data-node-list="true"]');if(console.log("[scrollToNode] found elements",{nodeId:s,hasContainer:!!j}),j){const A=S.getBoundingClientRect(),I=j.getBoundingClientRect(),U=A.top-I.top,G=Math.max(0,j.scrollTop+U);j.scrollTo({top:G,behavior:"smooth"})}else S.scrollIntoView({behavior:"smooth",block:"start"});const E=j||window;let z=null;const _=()=>{document.querySelectorAll(".highlight-pulse").forEach(A=>A.classList.remove("highlight-pulse")),M.classList.add("highlight-pulse"),setTimeout(()=>M.classList.remove("highlight-pulse"),1200),"vibrate"in navigator&&navigator.vibrate(10),i&&window.dispatchEvent(new CustomEvent("node-show-label",{detail:{nodeId:s,label:i}}))},L=()=>{z&&clearTimeout(z),z=setTimeout(()=>{R(),_()},120)},R=()=>{z&&(clearTimeout(z),z=null),E.removeEventListener("scroll",L)};E.addEventListener("scroll",L,{passive:!0}),z=setTimeout(()=>{R(),_()},200)};N(10,2)},setNodeTypes:s=>{r({nodeTypes:s});const{workflow:i,currentWorkflowKey:d,currentFilename:p,savedWorkflowStates:h}=l();if(!i)return;const m=sd(i,s);if(d===m)return;const g={...h};d&&g[d]&&!g[m]?(g[m]=g[d],delete g[d]):!d&&p&&g[p]&&!g[m]&&(g[m]=g[p]);const x=Gn.getState(),v=p?x.pinnedWidgets[p]:void 0,N=d?x.pinnedWidgets[d]:void 0;v&&!x.pinnedWidgets[m]?x.setPinnedWidget(v,m):N&&!x.pinnedWidgets[m]&&x.setPinnedWidget(N,m),r({currentWorkflowKey:m,savedWorkflowStates:g}),x.restorePinnedWidgetForWorkflow(m,i)},setExecutionState:(s,i,d,p)=>{r(h=>{const m=Date.now(),g=s?d??h.executingPromptId:null,x=s?i??h.executingNodeId:null,v={isExecuting:s,executingNodeId:x,executingPromptId:g,progress:p},N=(S,M)=>{if(!S||M<=0||h.workflow?.nodes.find(R=>String(R.id)===S)?.mode===4)return h.nodeDurationStats;const E=String(S),z=h.nodeDurationStats[E],_=(z?.count??0)+1,L=z?(z.avgMs*z.count+M)/_:M;return{...h.nodeDurationStats,[E]:{avgMs:L,count:_}}};if(!s){if(h.currentNodeStartTime&&h.executingNodeId){const S=m-h.currentNodeStartTime;v.nodeDurationStats=N(h.executingNodeId,S)}if(h.executionStartTime&&h.workflow){const S=m-h.executionStartTime,M=ji(h.workflow),j=h.workflowDurationStats[M],E=(j?.count??0)+1,z=j?(j.avgMs*j.count+S)/E:S;v.workflowDurationStats={...h.workflowDurationStats,[M]:{avgMs:z,count:E}}}return v.executionStartTime=null,v.currentNodeStartTime=null,v}const C=g&&g!==h.executingPromptId,w=x&&x!==h.executingNodeId;if(C&&(v.executionStartTime=m,v.currentNodeStartTime=m),w&&h.currentNodeStartTime&&h.executingNodeId){const S=m-h.currentNodeStartTime;v.nodeDurationStats=N(h.executingNodeId,S),v.currentNodeStartTime=m}else h.currentNodeStartTime||(v.currentNodeStartTime=m);return v})},queueWorkflow:async s=>{const i=Sn.getState(),d=i.seedModes,p=i.seedLastValues,{workflow:h,nodeTypes:m,embedWorkflow:g}=l();if(!h||!m){Zt.getState().setError("Node types are still loading. Try again in a moment.");return}Zt.getState().setError(null),r({isLoading:!0});try{let x=h,v=g,N={...p};for(let C=0;C<s;C++){const w={},S=x.nodes.map(_=>{const L=Ea(x,m,_);if(L===null||!Array.isArray(_.widgets_values))return _;const R=d[_.id]??ud(x,m,_),A=L+1;if(typeof _.widgets_values[A]=="string"){if(!R||R==="fixed")return _;const ge=Number(_.widgets_values[L])||0;let ae;switch(R){case"randomize":ae=_o(m,_);break;case"increment":ae=ge+1;break;case"decrement":ae=ge-1;break;default:return _}const re=[..._.widgets_values];return re[L]=ae,{..._,widgets_values:re}}const G=Number(_.widgets_values[L]),W=N[_.id]??null;let K=null;return Zd(G)?K=k1(G,W,m,_):R&&R!=="fixed"&&(R==="randomize"?K=_o(m,_):R==="increment"?K=(typeof W=="number"?W:G)+1:R==="decrement"&&(K=(typeof W=="number"?W:G)-1)),K===null||(w[_.id]=K,N={...N,[_.id]:K}),_});if(x={...x,nodes:S},v){let _=v;for(const L of S)_=ui(_,L);v=_}i.setSeedLastValues(N),r({workflow:x,embedWorkflow:v});const M={},j=new Set,E=new Map;for(const _ of x.nodes){if(_.mode===4)continue;let L=null;if(m[_.type])L=_.type;else{const R=Object.entries(m).find(([,A])=>A.display_name===_.type||A.name===_.type);R&&(L=R[0])}L&&(j.add(_.id),E.set(_.id,L))}for(const _ of x.nodes){if(_.mode===4)continue;const L=E.get(_.id);if(!L)continue;const R=o1(x,m,_,L,j,Qd(x,_.id),w);M[String(_.id)]={class_type:L,inputs:R}}const z=await fetch(`${Bt}/api/prompt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:M,client_id:w0,extra_data:{extra_pnginfo:{workflow:v??x}}})});if(!z.ok){const _=await z.json(),L={};if(_.node_errors)for(const[R,A]of Object.entries(_.node_errors)){const I=A.errors;I&&I.length>0&&(L[R]=I.map(U=>({type:U.type,message:U.message,details:U.details,inputName:U.extra_info?.input_name})))}throw Object.keys(L).length>0&&o(L),new Error(_.error?.message||"Failed to queue prompt")}Zt.getState().clearNodeErrors()}}catch(x){Zt.getState().setError(x instanceof Error?x.message:"Failed to queue workflow")}finally{rt.getState().fetchQueue(),r({isLoading:!1})}},applyControlAfterGenerate:()=>{const{workflow:s}=l();if(!s)return;let i=!1;const d=s.nodes.map(p=>{if(p.type==="PrimitiveNode"){if(!Array.isArray(p.widgets_values))return p;const h=p.outputs?.[0]?.type,m=String(h).toUpperCase();if(m!=="INT"&&m!=="FLOAT")return p;const g=p.widgets_values?.[1];if(!g||g==="fixed")return p;const x=p.widgets_values?.[0];if(typeof x!="number")return p;let v=x;if(g==="increment"?v=m==="INT"?x+1:x+.01:g==="decrement"?v=m==="INT"?x-1:x-.01:g==="randomize"&&(v=m==="INT"?Math.floor(Math.random()*0xffffffffffff):Math.random()),v!==x){i=!0;const N=[...p.widgets_values];return N[0]=v,{...p,widgets_values:N}}}return p});i&&r({workflow:{...s,nodes:d}})}}},{name:"workflow-storage",storage:Fr(()=>localStorage),partialize:r=>({workflow:r.workflow,embedWorkflow:r.embedWorkflow,originalWorkflow:r.originalWorkflow,currentFilename:r.currentFilename,currentWorkflowKey:r.currentWorkflowKey,savedWorkflowStates:r.savedWorkflowStates,runCount:r.runCount,manuallyHiddenNodes:r.manuallyHiddenNodes,collapsedGroups:r.collapsedGroups,hiddenGroups:r.hiddenGroups,collapsedSubgraphs:r.collapsedSubgraphs,hiddenSubgraphs:r.hiddenSubgraphs,connectionButtonsVisible:r.connectionButtonsVisible,isExecuting:r.isExecuting,executingNodeId:r.executingNodeId,executingPromptId:r.executingPromptId,progress:r.progress,executionStartTime:r.executionStartTime,currentNodeStartTime:r.currentNodeStartTime,nodeDurationStats:r.nodeDurationStats,workflowDurationStats:r.workflowDurationStats}),onRehydrateStorage:()=>r=>{}}));function ji(r){const l=[...r.nodes].sort((o,s)=>o.id-s.id).map(o=>({id:o.id,type:o.type,mode:o.mode,inputs:o.inputs?.map(s=>s.link??null)??[],outputs:o.outputs?.map(s=>s.links??[])??[]}));return JSON.stringify({nodes:l,links:r.links??[]})}const _d=ar(r=>({appMenuOpen:!1,setAppMenuOpen:l=>r({appMenuOpen:l})})),Tn=ar((r,l)=>({history:[],isLoading:!1,addHistoryEntry:o=>{r(i=>i.history.some(d=>d.prompt_id===o.prompt_id)?i:{history:[o,...i.history]});const s=rt.getState();if(s.queueItemExpanded[o.prompt_id]===void 0&&s.setQueueItemExpanded(o.prompt_id,!0),o.workflow&&o.durationSeconds){const i=ji(o.workflow);ne.getState().updateWorkflowDuration(i,o.durationSeconds*1e3)}},fetchHistory:async()=>{r({isLoading:!0});try{const o=await u1(50),s=Object.entries(o).map(([d,p])=>{const h=[];for(const M of Object.values(p.outputs))M.images&&h.push(...M.images),M.gifs&&h.push(...M.gifs),M.videos&&h.push(...M.videos);let m=Date.now(),g=null,x=null,v=!1;if(p.status?.messages)for(const[M,j]of p.status.messages)M==="execution_start"&&j.timestamp&&(m=j.timestamp,g=j.timestamp),(M==="execution_end"||M==="execution_success")&&j.timestamp&&(x=j.timestamp),M==="execution_error"&&(v=!0);g===null&&m&&(g=m);const N=g!==null&&x!==null&&x>=g?(x-g)/1e3:void 0,C=p.status?.status_str?.toLowerCase()||"",w=!v&&p.status?.completed!==!1&&!C.includes("error"),S=p.prompt?.[3]?.extra_pnginfo?.workflow;return{prompt_id:d,timestamp:m,durationSeconds:N,success:w,outputs:{images:h},prompt:p.prompt[2],workflow:S}});s.sort((d,p)=>p.timestamp-d.timestamp),r({history:s});const i=rt.getState();for(const d of s)if(i.queueItemExpanded[d.prompt_id]===void 0&&i.setQueueItemExpanded(d.prompt_id,!0),d.workflow&&d.durationSeconds){const p=ji(d.workflow);ne.getState().updateWorkflowDuration(p,d.durationSeconds*1e3)}}catch(o){console.error("Failed to fetch history:",o)}finally{r({isLoading:!1})}},deleteItem:async o=>{try{await g1(o),r(s=>({history:s.history.filter(i=>i.prompt_id!==o)}))}catch(s){console.error("Failed to delete history item:",s)}},clearHistory:async()=>{try{await x1()}catch(o){console.error("Failed to clear history:",o);try{const s=l().history.map(i=>i.prompt_id);await pg(s)}catch(s){console.error("Failed to delete history items:",s)}}finally{r({history:[]})}},clearEmptyItems:async()=>{const o=l().history.filter(s=>s.outputs.images.length===0).map(s=>s.prompt_id);if(o.length!==0)try{await pg(o),r(s=>({history:s.history.filter(i=>!o.includes(i.prompt_id))}))}catch(s){console.error("Failed to delete empty history items:",s)}}})),St=ar()($r((r,l)=>({source:"output",currentFolder:null,folders:[],files:[],isLoading:!1,error:null,viewMode:"grid",showHidden:!1,filter:{search:"",favoritesOnly:!1,type:"all"},sort:{mode:"modified"},favorites:[],selectionMode:!1,selectedIds:[],selectionActionOpen:!1,filterModalOpen:!1,newFolderModalOpen:!1,outputsViewerOpen:!1,setSource:o=>{r({source:o,currentFolder:null,files:[],folders:[],selectionMode:!1,selectedIds:[]}),l().fetchFolders(),l().fetchFiles()},setCurrentFolder:o=>{const{currentFolder:s}=l(),i=s?`${s}/${o}`:o;r({currentFolder:i,files:[],selectionMode:!1,selectedIds:[]}),l().fetchFiles()},navigateToPath:o=>{r({currentFolder:o,files:[],selectionMode:!1,selectedIds:[]}),l().fetchFiles()},navigateUp:()=>{const{currentFolder:o}=l();if(!o)return;const s=o.split("/");s.pop();const i=s.length>0?s.join("/"):null;r({currentFolder:i,files:[],selectionMode:!1,selectedIds:[]}),l().fetchFiles()},fetchFolders:async()=>{try{const{showHidden:o}=l(),s=await v1(o),{source:i}=l();r({folders:i==="output"?s.output:s.input})}catch(o){console.error("Failed to fetch folders:",o)}},fetchFiles:async()=>{const{source:o,currentFolder:s,sort:i,showHidden:d}=l();r({isLoading:!0,error:null});try{const p=await Od(o,1e3,0,i.mode,!1,s,d);r({files:p,isLoading:!1})}catch(p){r({error:p.message,isLoading:!1})}},setFilter:o=>{r(s=>({filter:{...s.filter,...o}}))},setSort:o=>{r({sort:o}),l().fetchFiles()},setViewMode:o=>{r({viewMode:o})},toggleShowHidden:()=>{r(o=>({showHidden:!o.showHidden})),l().fetchFolders(),l().fetchFiles()},toggleFavorite:o=>{r(s=>({favorites:s.favorites.includes(o)?s.favorites.filter(d=>d!==o):[...s.favorites,o]}))},toggleSelectionMode:()=>{r(o=>({selectionMode:!o.selectionMode,selectedIds:[],selectionActionOpen:!1}))},toggleSelection:o=>{r(s=>({selectedIds:s.selectedIds.includes(o)?s.selectedIds.filter(d=>d!==o):[...s.selectedIds,o]}))},selectAll:()=>{const o=l().getDisplayedFiles();r({selectedIds:o.map(s=>s.id)})},selectIds:(o,s="add")=>{r(i=>{if(s==="replace")return{selectedIds:[...o]};const d=new Set(i.selectedIds);return o.forEach(p=>d.add(p)),{selectedIds:Array.from(d)}})},clearSelection:()=>{r({selectedIds:[],selectionActionOpen:!1})},setSelectionActionOpen:o=>{r({selectionActionOpen:o})},setFilterModalOpen:o=>{r({filterModalOpen:o})},setNewFolderModalOpen:o=>{r({newFolderModalOpen:o})},setOutputsViewerOpen:o=>{r({outputsViewerOpen:o})},addFavorites:o=>{r(s=>{const i=new Set(s.favorites);return o.forEach(d=>i.add(d)),{favorites:Array.from(i)}})},removeFavorites:o=>{r(s=>({favorites:s.favorites.filter(i=>!o.includes(i))}))},refresh:()=>{l().fetchFolders(),l().fetchFiles()},getDisplayedFiles:()=>{const{files:o,filter:s,favorites:i,showHidden:d,sort:p}=l();let h=[...o];if(d||(h=h.filter(g=>!g.name.startsWith("."))),s.search){const g=s.search.toLowerCase();h=h.filter(x=>x.name.toLowerCase().includes(g))}s.favoritesOnly&&(h=h.filter(g=>i.includes(g.id))),s.type!=="all"&&(h=h.filter(g=>g.type==="folder"||g.type===s.type));const m=p.mode.endsWith("-reverse")?-1:1;return p.mode.startsWith("name")?h.sort((g,x)=>g.name.localeCompare(x.name)*m):p.mode.startsWith("size")?h.sort((g,x)=>((g.size??0)-(x.size??0))*m):h.sort((g,x)=>((g.date??0)-(x.date??0))*m),h}}),{name:"outputs-storage",version:1,migrate:(r,l)=>{if(l===0){if(r.sort&&!r.sort.mode){const{field:o,order:s}=r.sort;o==="name"?r.sort={mode:s==="asc"?"name":"name-reverse"}:r.sort={mode:s==="desc"?"modified":"modified-reverse"}}r.filter&&!r.filter.type&&(r.filter.type="all")}return r},partialize:r=>({source:r.source,viewMode:r.viewMode,showHidden:r.showHidden,sort:r.sort,filter:r.filter,favorites:r.favorites})}));function G1(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:u.jsx("path",{d:"M12 11V16M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21ZM12.0498 8V8.1L11.9502 8.1002V8H12.0498Z"})})}function L0({className:r}){return u.jsx(G1,{className:r})}function q1(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M19 4H5L10.5 10.5V17L13.5 19V10.5L19 4Z"}),u.jsx("path",{d:"M2.5 9L4.5 7L6.5 9"}),u.jsx("path",{d:"M4.5 7V17"}),u.jsx("path",{d:"M2.5 15L4.5 17L6.5 15"})]})}function W1(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M6 4h9l3 3v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M9 10h6M9 14h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function F1(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M6 4h9l3 3v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M9 10h6M9 14h6M9 18h4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function $1(r){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:u.jsx("path",{d:"M4 20h16M6 16l4-4m0 0l4-4m-4 4l4 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function Y1(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M3 7h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M3 7l9 6 9-6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]})}function bl(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("circle",{cx:"12",cy:"5",r:"2",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"19",r:"2",fill:"currentColor"})]})}function Il(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{d:"M10 17l5-5-5-5v10z"})})}function Wn(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{d:"M7 10l5 5 5-5H7z"})})}function Ci(r){return u.jsx("svg",{viewBox:"0 0 20 20","aria-hidden":"true",...r,children:u.jsx("g",{transform:"translate(-164 -6319)",fill:"currentColor",children:u.jsx("path",{d:"M170.673,6324.726 L170.669,6324.729 C170.266,6325.104 170.244,6325.735 170.62,6326.137 L171.577,6327.158 C171.876,6327.478 171.649,6328 171.212,6328 L165,6328 C164.447,6328 164,6328.448 164,6329 C164,6329.552 164.447,6330 165,6330 L171.197,6330 C171.637,6330 171.862,6330.527 171.558,6330.845 L170.63,6331.819 C170.248,6332.218 170.266,6332.852 170.669,6333.229 C171.068,6333.603 171.695,6333.584 172.071,6333.186 L174.76,6330.338 C175.49,6329.564 175.487,6328.354 174.753,6327.585 L172.067,6324.769 C171.692,6324.376 171.071,6324.357 170.673,6324.726 M182.222,6319 L175.777,6319 C174.8,6319 174,6319.68 174,6321.111 L174,6322.007 C174,6322.555 174.444,6323 174.993,6323 L175.006,6323 C175.555,6323 176,6322.555 176,6322.007 L176,6321.993 C176,6321.445 176.444,6321 176.993,6321 L181.006,6321 C181.555,6321 182,6321.445 182,6321.993 L182,6336.007 C182,6336.555 181.555,6337 181.006,6337 L176.993,6337 C176.444,6337 176,6336.555 176,6336.007 L176,6335.993 C176,6335.445 175.555,6335 175.006,6335 L174.993,6335 C174.444,6335 174,6335.445 174,6335.993 L174,6337.111 C174,6338.293 174.847,6339 175.777,6339 L182.222,6339 C183.204,6339 184,6338.204 184,6337.222 L184,6337.111 L184,6320.778 C184,6319.796 183.204,6319 182.222,6319"})})})}function ef(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M18.4101 3.6512L20.5315 5.77252C21.4101 6.6512 21.4101 8.07582 20.5315 8.9545L9.54019 19.9458C9.17774 20.3082 8.70239 20.536 8.19281 20.5915L4.57509 20.9856C3.78097 21.072 3.11061 20.4017 3.1971 19.6076L3.59111 15.9898C3.64661 15.4803 3.87444 15.0049 4.23689 14.6425L15.2282 3.6512C16.1068 2.77252 17.5315 2.77252 18.4101 3.6512Z",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M15.2282 3.6512C16.1068 2.77252 17.5315 2.77252 18.4101 3.6512L20.5315 5.77252C21.4101 6.6512 21.4101 8.07582 20.5315 8.9545L18.7283 10.7576L13.425 5.45432L15.2282 3.6512Z",stroke:"currentColor",strokeWidth:"1.5"})]})}function Gl(r){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:u.jsx("path",{d:"M6 6l12 12M18 6l-12 12",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})})}function Hl(r){return u.jsx("svg",{viewBox:"0 0 16 16","aria-hidden":"true",...r,children:u.jsx("path",{d:"M6.4 11.2L3.2 8l1.1-1.1 2.1 2.1 5-5L12.5 5l-6.1 6.2Z",fill:"currentColor"})})}function Q1(r){return u.jsx("svg",{viewBox:"0 0 16 16","aria-hidden":"true",...r,children:u.jsx("path",{d:"M4.2 4.2l7.6 7.6m0-7.6l-7.6 7.6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function X1(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M7 18a4 4 0 0 1 0-8 6 6 0 0 1 11.3-2.2A4.5 4.5 0 0 1 18 18H7Z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M12 10v7m0 0l-3-3m3 3l3-3",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Bl(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function dr(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24M1 1l22 22"})})}function Ur(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M3 6h18M8 6V4h8v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),u.jsx("path",{d:"M10 11v6M14 11v6"})]})}function P1(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M15 9l-6 6M9 9l6 6"})]})}function gi(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M23 4v6h-6M1 20v-6h6"}),u.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}function Z1(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:u.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"})})}function _a(r){return u.jsx("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.3",d:"M9.18613 3.09999H6.81377M9.18613 12.9H7.55288c-3.08678 0-5.35171-2.99581-4.60305-6.08843l.3054-1.26158M14.7486 2.1721l-.5931 2.45c-.132.54533-.6065.92789-1.1508.92789h-2.2993c-.77173 0-1.33797-.74895-1.1508-1.5221l.5931-2.45c.132-.54533.6065-.9279 1.1508-.9279h2.2993c.7717 0 1.3379.74896 1.1508 1.52211Zm-8.3033 0-.59309 2.45c-.13201.54533-.60646.92789-1.15076.92789H2.4021c-.7717 0-1.33793-.74895-1.15077-1.5221l.59309-2.45c.13201-.54533.60647-.9279 1.15077-.9279h2.29935c.77169 0 1.33792.74896 1.15076 1.52211Zm8.3033 9.8-.5931 2.45c-.132.5453-.6065.9279-1.1508.9279h-2.2993c-.77173 0-1.33797-.749-1.1508-1.5221l.5931-2.45c.132-.5453.6065-.9279 1.1508-.9279h2.2993c.7717 0 1.3379.7489 1.1508 1.5221Z"})})}function _0(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...r,children:u.jsx("path",{d:"M13 20.74C12.9039 20.7541 12.8062 20.7541 12.71 20.74C12.5724 20.6823 12.4551 20.5849 12.3732 20.4602C12.2912 20.3355 12.2484 20.1892 12.25 20.04V16.7H3.00001C2.81189 16.6956 2.63208 16.6216 2.49538 16.4923C2.35868 16.363 2.27481 16.1876 2.26001 16V8.00002C2.25463 7.89856 2.26965 7.79706 2.30417 7.7015C2.3387 7.60595 2.39204 7.51829 2.46103 7.44371C2.53002 7.36913 2.61326 7.30913 2.70584 7.26727C2.79841 7.22542 2.89844 7.20255 3.00001 7.20002H12.25V4.01002C12.2498 3.86106 12.2946 3.71551 12.3784 3.59241C12.4623 3.4693 12.5813 3.37436 12.72 3.32002C12.8551 3.26039 13.0053 3.24376 13.1502 3.27238C13.2951 3.301 13.4277 3.37349 13.53 3.48002L21.53 11.48C21.6705 11.6206 21.7493 11.8113 21.7493 12.01C21.7493 12.2088 21.6705 12.3994 21.53 12.54L13.53 20.54C13.4601 20.6079 13.377 20.6608 13.2858 20.6952C13.1946 20.7296 13.0973 20.7448 13 20.74ZM3.76001 15.2H13C13.1981 15.2026 13.3874 15.2825 13.5275 15.4226C13.6676 15.5626 13.7474 15.7519 13.75 15.95V18.18L19.93 12L13.75 5.83002V8.00002C13.7477 8.19843 13.6689 8.3883 13.53 8.53002C13.3817 8.65257 13.1919 8.71343 13 8.70002H3.76001V15.2Z",fill:"currentColor"})})}function K1(r){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M10.667 2.667c1.45.008 2.235.072 2.748.585C14 3.837 14 4.78 14 6.666v4c0 1.885 0 2.828-.585 3.414-.586.585-1.529.585-3.415.585H6c-1.886 0-2.829 0-3.414-.585C2 13.494 2 12.55 2 10.666v-4c0-1.886 0-2.829.586-3.414.512-.513 1.297-.577 2.747-.585",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M5.333 2.333c0-.552.448-1 1-1h3.334c.552 0 1 .448 1 1v.667c0 .553-.448 1-1 1H6.333c-.552 0-1-.447-1-1v-.667Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"})]})}function J1(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})})}function eb(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[u.jsx("rect",{x:"9",y:"9",width:"10",height:"12",rx:"2"}),u.jsx("path",{d:"M5 15V5a2 2 0 0 1 2-2h8"})]})}function tb(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[u.jsx("circle",{cx:"12",cy:"12",r:"9"}),u.jsx("path",{d:"M7 12h10"})]})}function ki(r){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"none","aria-hidden":"true",...r,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})})}function Vl(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:u.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}function A0({showSlash:r=!1,...l}){return u.jsxs("svg",{viewBox:"0 0 32 32","aria-hidden":"true",overflow:"visible",...l,children:[u.jsx("path",{d:"M28 28H4a2.002 2.002 0 0 1-2-2V21h2v5h24v-5h2v5a2.002 2.002 0 0 1-2 2Z",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"21",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"16",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"11",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"6",width:"18",height:"2",fill:"currentColor"}),u.jsx("path",{d:"M16 -3l5 4H11l5-4Z",fill:"currentColor"}),r&&u.jsx("line",{x1:"2",y1:"30",x2:"28",y2:"4",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})]})}function nb({progress:r,radius:l=11,...o}){const s=Math.min(100,Math.max(0,r)),i=2*Math.PI*l,d=i*(1-s/100);return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...o,children:u.jsx("circle",{cx:"12",cy:"12",r:l,fill:"none",stroke:"rgba(34,197,94,0.9)",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:i,strokeDashoffset:d})})}function rb(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}function tf(r){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})}function lb(r){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{fillRule:"evenodd",d:"M4 10a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1z",clipRule:"evenodd"})})}function ab(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[u.jsx("circle",{cx:"11",cy:"11",r:"7"}),u.jsx("path",{d:"M20 20l-3.5-3.5"})]})}function ob(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"3",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("circle",{cx:"9",cy:"9",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"15",cy:"15",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"15",cy:"9",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"9",cy:"15",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"})]})}function nf(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}function R0(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{d:"M12 2L1 21h22L12 2zm0 3.5L19.5 19h-15L12 5.5zM11 10v4h2v-4h-2zm0 6v2h2v-2h-2z"})})}function Mi(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:u.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}function bg(r){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:[u.jsx("rect",{x:"3",y:"7",width:"12",height:"10",rx:"2"}),u.jsx("path",{d:"M15 10l5-3v10l-5-3z"})]})}function Do(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{d:"M19.1835 7.80516L16.2188 4.83755C14.1921 2.8089 13.1788 1.79457 12.0904 2.03468C11.0021 2.2748 10.5086 3.62155 9.5217 6.31506L8.85373 8.1381C8.59063 8.85617 8.45908 9.2152 8.22239 9.49292C8.11619 9.61754 7.99536 9.72887 7.86251 9.82451C7.56644 10.0377 7.19811 10.1392 6.46145 10.3423C4.80107 10.8 3.97088 11.0289 3.65804 11.5721C3.5228 11.8069 3.45242 12.0735 3.45413 12.3446C3.45809 12.9715 4.06698 13.581 5.28476 14.8L6.69935 16.2163L2.22345 20.6964C1.92552 20.9946 1.92552 21.4782 2.22345 21.7764C2.52138 22.0746 3.00443 22.0746 3.30236 21.7764L7.77841 17.2961L9.24441 18.7635C10.4699 19.9902 11.0827 20.6036 11.7134 20.6045C11.9792 20.6049 12.2404 20.5358 12.4713 20.4041C13.0192 20.0914 13.2493 19.2551 13.7095 17.5825C13.9119 16.8472 14.013 16.4795 14.2254 16.1835C14.3184 16.054 14.4262 15.9358 14.5468 15.8314C14.8221 15.593 15.1788 15.459 15.8922 15.191L17.7362 14.4981C20.4 13.4973 21.7319 12.9969 21.9667 11.9115C22.2014 10.826 21.1954 9.81905 19.1835 7.80516Z"})})}function Ad(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{d:"M15.9894 4.9502L16.52 4.42014L15.9894 4.9502ZM19.0716 8.03562L18.541 8.56568L19.0716 8.03562ZM8.73837 19.429L8.20777 19.9591L8.73837 19.429ZM4.62169 15.3081L5.15229 14.7781L4.62169 15.3081ZM17.5669 14.9943L17.3032 14.2922L17.5669 14.9943ZM15.6498 15.7146L15.9136 16.4167H15.9136L15.6498 15.7146ZM8.3322 8.38177L7.62798 8.12375L8.3322 8.38177ZM9.02665 6.48636L9.73087 6.74438V6.74438L9.02665 6.48636ZM5.84504 10.6735L6.04438 11.3965L5.84504 10.6735ZM7.30167 10.1351L6.86346 9.52646L6.86346 9.52646L7.30167 10.1351ZM7.67582 9.79038L8.24665 10.2768H8.24665L7.67582 9.79038ZM14.251 16.3805L14.742 16.9475L14.742 16.9475L14.251 16.3805ZM13.3806 18.2012L12.6574 18.0022V18.0022L13.3806 18.2012ZM13.9169 16.7466L13.3075 16.3094L13.3075 16.3094L13.9169 16.7466ZM2.71846 12.7552L1.96848 12.76L1.96848 12.76L2.71846 12.7552ZM2.93045 11.9521L2.28053 11.5778H2.28053L2.93045 11.9521ZM11.3052 21.3431L11.3064 20.5931H11.3064L11.3052 21.3431ZM12.0933 21.1347L11.7215 20.4833L11.7215 20.4833L12.0933 21.1347ZM11.6973 2.03606L11.8588 2.76845L11.6973 2.03606ZM1.4694 21.4699C1.17666 21.763 1.1769 22.2379 1.46994 22.5306C1.76298 22.8233 2.23786 22.8231 2.5306 22.5301L1.4694 21.4699ZM7.18383 17.8721C7.47657 17.5791 7.47633 17.1042 7.18329 16.8114C6.89024 16.5187 6.41537 16.5189 6.12263 16.812L7.18383 17.8721ZM15.4588 5.48026L18.541 8.56568L19.6022 7.50556L16.52 4.42014L15.4588 5.48026ZM9.26897 18.8989L5.15229 14.7781L4.09109 15.8382L8.20777 19.9591L9.26897 18.8989ZM17.3032 14.2922L15.386 15.0125L15.9136 16.4167L17.8307 15.6964L17.3032 14.2922ZM9.03642 8.63979L9.73087 6.74438L8.32243 6.22834L7.62798 8.12375L9.03642 8.63979ZM6.04438 11.3965C6.75583 11.2003 7.29719 11.0625 7.73987 10.7438L6.86346 9.52646C6.69053 9.65097 6.46601 9.72428 5.6457 9.95044L6.04438 11.3965ZM7.62798 8.12375C7.33502 8.92332 7.24338 9.14153 7.10499 9.30391L8.24665 10.2768C8.60041 9.86175 8.7823 9.33337 9.03642 8.63979L7.62798 8.12375ZM7.73987 10.7438C7.92696 10.6091 8.09712 10.4523 8.24665 10.2768L7.10499 9.30391C7.0337 9.38757 6.9526 9.46229 6.86346 9.52646L7.73987 10.7438ZM15.386 15.0125C14.697 15.2714 14.1716 15.4571 13.76 15.8135L14.742 16.9475C14.9028 16.8082 15.1192 16.7152 15.9136 16.4167L15.386 15.0125ZM14.1037 18.4001C14.329 17.5813 14.4021 17.3569 14.5263 17.1838L13.3075 16.3094C12.9902 16.7517 12.8529 17.2919 12.6574 18.0022L14.1037 18.4001ZM13.76 15.8135C13.5903 15.9605 13.4384 16.1269 13.3075 16.3094L14.5263 17.1838C14.5887 17.0968 14.6611 17.0175 14.742 16.9475L13.76 15.8135ZM5.15229 14.7781C4.50615 14.1313 4.06799 13.691 3.78366 13.3338C3.49835 12.9753 3.46889 12.8201 3.46845 12.7505L1.96848 12.76C1.97215 13.3422 2.26127 13.8297 2.61002 14.2679C2.95976 14.7073 3.47115 15.2176 4.09109 15.8382L5.15229 14.7781ZM5.6457 9.95044C4.80048 10.1835 4.10396 10.3743 3.58296 10.5835C3.06341 10.792 2.57116 11.0732 2.28053 11.5778L3.58038 12.3264C3.615 12.2663 3.71693 12.146 4.1418 11.9755C4.56523 11.8055 5.16337 11.6394 6.04438 11.3965L5.6457 9.95044ZM3.46845 12.7505C3.46751 12.6016 3.50616 12.4553 3.58038 12.3264L2.28053 11.5778C2.07354 11.9372 1.96586 12.3452 1.96848 12.76L3.46845 12.7505ZM8.20777 19.9591C8.83164 20.5836 9.34464 21.0987 9.78647 21.4506C10.227 21.8015 10.7179 22.0922 11.3041 22.0931L11.3064 20.5931C11.2369 20.593 11.0814 20.5644 10.721 20.2773C10.3618 19.9912 9.91923 19.5499 9.26897 18.8989L8.20777 19.9591ZM12.6574 18.0022C12.4133 18.8897 12.2462 19.4924 12.0751 19.9188C11.9033 20.3467 11.7821 20.4487 11.7215 20.4833L12.465 21.7861C12.974 21.4956 13.2573 21.0004 13.4671 20.4775C13.6776 19.9532 13.8694 19.2516 14.1037 18.4001L12.6574 18.0022ZM11.3041 22.0931C11.7112 22.0937 12.1114 21.9879 12.465 21.7861L11.7215 20.4833C11.595 20.5555 11.4519 20.5933 11.3064 20.5931L11.3041 22.0931ZM18.541 8.56568C19.6045 9.63022 20.3403 10.3695 20.7917 10.9788C21.2353 11.5774 21.2863 11.8959 21.2321 12.1464L22.6982 12.4634C22.8881 11.5854 22.5382 10.8162 21.9969 10.0857C21.4635 9.36592 20.6305 8.53486 19.6022 7.50556L18.541 8.56568ZM17.8307 15.6964C19.1921 15.1849 20.294 14.773 21.0771 14.3384C21.8718 13.8973 22.5083 13.3416 22.6982 12.4634L21.2321 12.1464C21.178 12.3968 21.0001 12.6655 20.3491 13.0268C19.6865 13.3946 18.7112 13.7632 17.3032 14.2922L17.8307 15.6964ZM16.52 4.42014C15.4841 3.3832 14.6481 2.54353 13.9246 2.00638C13.1908 1.46165 12.4175 1.10912 11.5357 1.30367L11.8588 2.76845C12.1086 2.71335 12.4277 2.7633 13.0304 3.21075C13.6433 3.66579 14.3876 4.40801 15.4588 5.48026L16.52 4.42014ZM9.73087 6.74438C10.2525 5.32075 10.6161 4.33403 10.9812 3.66315C11.3402 3.00338 11.609 2.82357 11.8588 2.76845L11.5357 1.30367C10.654 1.49819 10.1005 2.14332 9.66362 2.94618C9.23278 3.73793 8.82688 4.85154 8.32243 6.22834L9.73087 6.74438ZM2.5306 22.5301L7.18383 17.8721L6.12263 16.812L1.4694 21.4699L2.5306 22.5301Z"})})}function Oi(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:u.jsx("path",{d:"M9 6l6 6-6 6"})})}function D0(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...r,children:u.jsx("path",{d:"M15 19l-7-7 7-7"})})}function Rd({isBypassed:r,...l}){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:r?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M5 12h14"}),u.jsx("path",{d:"M12 5l7 7-7 7"})]}):u.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}function sb({nodeId:r,connectionHighlightMode:l,leftLineCount:o,rightLineCount:s,...i}){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...i,children:[u.jsxs("defs",{children:[u.jsx("clipPath",{id:`node-rect-left-${r}`,children:u.jsx("rect",{x:"0",y:"0",width:"12",height:"24"})}),u.jsx("clipPath",{id:`node-rect-right-${r}`,children:u.jsx("rect",{x:"12",y:"0",width:"12",height:"24"})})]}),l==="off"?u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",className:"text-gray-500"}):u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",strokeLinejoin:"round",clipPath:`url(#node-rect-left-${r})`,className:l==="inputs"||l==="both"?"text-orange-500":"text-gray-500"}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",strokeLinejoin:"round",clipPath:`url(#node-rect-right-${r})`,className:l==="outputs"||l==="both"?"text-orange-500":"text-gray-500"})]}),u.jsxs("g",{className:l==="inputs"||l==="both"?"text-orange-500":"text-gray-500",children:[o===1&&u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),o===2&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"8.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"15.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),o>=3&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-2.743",y2:"6.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-2.743",y2:"17.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})]}),u.jsxs("g",{className:l==="outputs"||l==="both"?"text-orange-500":"text-gray-500",children:[s===1&&u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),s===2&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"8.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"15.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),s>=3&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"26.743",y2:"6.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"26.743",y2:"17.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})]})]})}function ib(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsxs("defs",{children:[u.jsx("clipPath",{id:"legend-trace-left",children:u.jsx("rect",{x:"0",y:"0",width:"12",height:"24"})}),u.jsx("clipPath",{id:"legend-trace-right",children:u.jsx("rect",{x:"12",y:"0",width:"12",height:"24"})})]}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",clipPath:"url(#legend-trace-left)",className:"text-gray-400"}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",clipPath:"url(#legend-trace-right)",className:"text-orange-500"}),u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",className:"text-gray-400"}),u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",className:"text-orange-500"})]})}function z0(r){return u.jsx("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.3",d:"m14.6685 5.7416.6425-2.57c.2028-.811-.4106-1.5967-1.2466-1.5967H2.5782a1.285 1.285 0 0 0-1.2467.9733l-.6425 2.57c-.2027.8111.4107 1.5968 1.2467 1.5968h11.4861a1.285 1.285 0 0 0 1.2467-.9734Zm0 7.7102.6425-2.5701c.2028-.811-.4106-1.5967-1.2466-1.5967h-5.061a1.285 1.285 0 0 0-1.2467.9734l-.6425 2.5701c-.2028.811.4106 1.5966 1.2466 1.5966h5.061a1.285 1.285 0 0 0 1.2467-.9733Zm-10.2802 0 .6425-2.5701c.2027-.811-.4107-1.5967-1.2467-1.5967H2.5782a1.285 1.285 0 0 0-1.2467.9734L.689 12.8285c-.2027.811.4107 1.5966 1.2467 1.5966h1.206a1.285 1.285 0 0 0 1.2466-.9733Z"})})}function ub(r){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:u.jsx("path",{d:"M12 3v10m0 0l-4-4m4 4l4-4M5 19h14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function cb(r){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M10.667 2.667c1.45.008 2.235.072 2.748.585C14 3.837 14 4.78 14 6.666v4c0 1.885 0 2.828-.585 3.414-.586.585-1.529.585-3.415.585H6c-1.886 0-2.829 0-3.414-.585C2 13.494 2 12.55 2 10.666v-4c0-1.886 0-2.829.586-3.414.512-.513 1.297-.577 2.747-.585",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M5.333 2.333c0-.552.448-1 1-1h3.334c.552 0 1 .448 1 1v.667c0 .553-.448 1-1 1H6.333c-.552 0-1-.447-1-1v-.667Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M8 6.667v4.666m0 0L5.667 9m2.333 2.333L10.333 9",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Vr(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M3 7a2 2 0 0 1 2-2h4l2 2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M3 9h18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function db(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M5 4h12l3 3v13H4V5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("rect",{x:"7",y:"4",width:"8",height:"4",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"13",width:"10",height:"6",rx:"1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]})}function fb(r){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...r,children:[u.jsx("path",{d:"M12.667 14H3.333C2.597 14 2 13.403 2 12.667V3.333C2 2.597 2.597 2 3.333 2h7.334L14 5.333v7.334c0 .736-.597 1.333-1.333 1.333Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M11.333 14v-4H4.667v4M4.667 2v3.333h5.333",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function pb(r){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:[u.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),u.jsx("path",{d:"M12 2v3M12 19v3M4.22 4.22l2.12 2.12M17.66 17.66l2.12 2.12M2 12h3M19 12h3M4.22 19.78l2.12-2.12M17.66 6.34l2.12-2.12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"})]})}function mb(r){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:u.jsx("path",{d:"M21 14.5A9 9 0 0 1 9.5 3a7 7 0 1 0 11.5 11.5Z",fill:"currentColor"})})}function hb(r){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",fill:"currentColor",...r,children:u.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"})})}function wg(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}function gb(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function xb(r){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...r,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function yb(r){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...r,children:u.jsx("path",{d:"M8 4h8M8 20h8M9 6h6l-1 4 1 4H9l1-4-1-4Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function vb({progress:r,radius:l=10,trackColor:o="#e5e7eb",progressColor:s="#3b82f6",...i}){const d=Math.min(100,Math.max(0,r)),p=2*Math.PI*l,h=p*(1-d/100);return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...i,children:[u.jsx("circle",{cx:"12",cy:"12",r:l,fill:"none",stroke:o,strokeWidth:"2"}),u.jsx("circle",{cx:"12",cy:"12",r:l,fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeDasharray:p,strokeDashoffset:h})]})}var lr=y0();function bb({open:r,onClose:l,side:o,title:s,children:i}){const d=b.useRef(null);return b.useEffect(()=>{if(!r)return;const p=h=>{h.key==="Escape"&&l()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[r,l]),b.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]),r?lr.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[2300]",children:[u.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:l}),u.jsxs("div",{ref:d,className:`
          absolute top-0 bottom-0 w-[85%] max-w-sm bg-white shadow-xl
          flex flex-col overflow-hidden
          ${o==="left"?"left-0 animate-slide-in-left":"right-0 animate-slide-in-right"}
        `,style:{animation:`${o==="left"?"slideInLeft":"slideInRight"} 0.2s ease-out`},children:[s&&u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s}),u.jsx("button",{onClick:l,className:`w-10 h-10 flex items-center justify-center rounded-full
                         text-gray-500 hover:bg-gray-100 text-2xl`,children:""})]}),u.jsx("div",{className:"flex-1 overflow-auto p-4 overscroll-contain scroll-container",children:i})]}),u.jsx("style",{children:`
        @keyframes slideInLeft {
          from { transform: translateX(-100%); }
          to { transform: translateX(0); }
        }
        @keyframes slideInRight {
          from { transform: translateX(100%); }
          to { transform: translateX(0); }
        }
      `})]}),document.body):null}function Vo({title:r,onBack:l,rightElement:o}){return u.jsxs("div",{className:"flex items-center mb-3",children:[u.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-sm font-semibold text-gray-500 uppercase tracking-wide",children:[u.jsx(D0,{className:"w-5 h-5 text-gray-400"}),u.jsx("span",{children:r})]}),o&&u.jsx("div",{className:"ml-auto",children:o})]})}function wb({onBack:r}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Vo,{title:"Icon Legend",onBack:r}),u.jsxs("div",{className:"space-y-3 overflow-y-auto flex-1 pb-4",children:[u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-500 text-white rounded-lg font-bold text-xs shadow-sm",children:"Run"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Run"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Execute current workflow"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-white border border-gray-200 rounded-lg text-gray-700 shadow-sm overflow-hidden",children:u.jsx(A0,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Queue / Follow"}),u.jsx("p",{className:"text-xs text-gray-500",children:"View queue & follow execution"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-yellow-500 text-white rounded-lg shadow-sm",children:u.jsx(Do,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Pinned Widget"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Quick access to pinned parameter"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full border border-gray-200 text-gray-700 font-bold",children:""}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Input"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Node input connection point"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full border border-gray-200 text-gray-700 font-bold",children:""}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Output"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Node output connection point"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(ib,{className:"w-6 h-6 overflow-visible"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Trace Connections"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Highlight connected nodes"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-500",children:u.jsx(Wn,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Fold / Unfold"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Collapse or expand node card"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(nf,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Bypass"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Skip node execution"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(dr,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Hide"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Hide node from view"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(Bl,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Show"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Make node visible again"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(Ad,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Pin widget"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Pin widget to bottom bar"})]})]})]})]})}function Uo({error:r,onDismiss:l}){return r?u.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[r,u.jsx("button",{onClick:l,className:"ml-2 text-red-500 font-medium",children:"Dismiss"})]}):null}function Sb({error:r,workflow:l,currentFilename:o,isDirty:s,loading:i,theme:d,menuSectionsOpen:p,fileInputRef:h,loadSectionRef:m,saveSectionRef:g,appearanceSectionRef:x,infoSectionRef:v,onDismissError:N,onFileChange:C,onLoadFromFile:w,onToggleSection:S,onOpenUserWorkflows:M,onOpenTemplates:j,onOpenPasteJson:E,onSave:z,onOpenSaveAs:_,onToggleTheme:L,onOpenLegend:R}){return u.jsxs(u.Fragment,{children:[u.jsx("input",{ref:h,type:"file",accept:".json",onChange:C,className:"hidden"}),u.jsx(Uo,{error:r,onDismiss:N}),u.jsxs("section",{ref:m,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>S("load"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.load,children:[u.jsx("span",{children:"Load Workflow"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.load?"rotate-0":"-rotate-90"}`})]}),p.load&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("button",{onClick:M,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(_a,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"My Workflows"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:j,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(z0,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Templates"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:E,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(cb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Paste JSON"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:w,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(Vr,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"From Device"})]})]})]}),u.jsxs("section",{ref:g,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>S("save"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.save,children:[u.jsx("span",{children:"Save Workflow"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.save?"rotate-0":"-rotate-90"}`})]}),p.save&&u.jsxs("div",{className:"space-y-2",children:[o&&u.jsxs("button",{onClick:z,disabled:!l||!s||i,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                           rounded-xl text-left hover:bg-gray-50 min-h-[56px]
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[u.jsx(db,{className:"w-6 h-6 text-gray-600 shrink-0"}),u.jsxs("span",{className:"font-medium text-gray-900 truncate",children:["Save ",o.replace(".json","")]})]}),u.jsxs("button",{onClick:_,disabled:!l,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(fb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Save As..."}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]})]})]}),u.jsx("div",{className:"border-t border-gray-200 mb-6"}),u.jsxs("section",{ref:x,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>S("appearance"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.appearance,children:[u.jsx("span",{children:"Appearance"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.appearance?"rotate-0":"-rotate-90"}`})]}),p.appearance&&u.jsx("div",{className:"space-y-2",children:u.jsxs("button",{onClick:L,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[d==="dark"?u.jsx(mb,{className:"w-6 h-6 text-gray-600"}):u.jsx(pb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:d==="dark"?"Dark mode":"Light mode"})]})})]}),u.jsxs("section",{ref:v,className:"mt-auto pt-6 border-t border-gray-200",children:[u.jsxs("button",{type:"button",onClick:()=>S("info"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.info,children:[u.jsx("span",{children:"About"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.info?"rotate-0":"-rotate-90"}`})]}),p.info&&u.jsxs("div",{className:"space-y-2 pb-4",children:[u.jsxs("a",{href:"https://github.com/cosmicbuffalo/comfyui-mobile-frontend",target:"_blank",rel:"noopener noreferrer",className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(hb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Open in GitHub"}),u.jsx(wg,{className:"w-4 h-4 ml-auto text-gray-400"})]}),u.jsxs("button",{onClick:R,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(gb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Icon Legend"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("a",{href:"https://github.com/cosmicbuffalo/comfyui-mobile-frontend/blob/main/USER_GUIDE.md",target:"_blank",rel:"noopener noreferrer",className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(xb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"User Manual"}),u.jsx(wg,{className:"w-4 h-4 ml-auto text-gray-400"})]})]})]})]})}async function Nb(r){if(navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(r);return}catch{}const l=document.createElement("textarea");l.value=r,l.readOnly=!0,l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.opacity="0",document.body.appendChild(l),l.focus(),l.select(),l.setSelectionRange(0,l.value.length),document.execCommand("copy"),document.body.removeChild(l)}function Sg(r,l,o){const s=r.current;if(s){if(s.focus(),l)s.setSelectionRange(l.start,l.end);else if(o!==void 0){const i=o.length;s.setSelectionRange(i,i)}}}function jb(r){const l=r.current;if(!l)return;const s=l.closest('[data-textarea-root="true"]')?.querySelector('[data-textarea-header="true"]');s?s.scrollIntoView({block:"nearest",behavior:"auto"}):l.scrollIntoView({block:"nearest",behavior:"auto"})}function To({value:r,onChange:l,textareaRef:o,className:s=""}){const[i,d]=b.useState(!1),p=b.useRef(null),h=b.useRef(null),m=()=>{d(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>d(!1),900)},g=N=>{N.preventDefault()},x=async()=>{const N=o.current;N&&(h.current={start:N.selectionStart??0,end:N.selectionEnd??0});const C=o.current?.value??r;await Nb(C),requestAnimationFrame(()=>Sg(o,h.current||void 0)),m()},v=()=>{l(""),requestAnimationFrame(()=>{Sg(o,void 0,""),jb(o)})};return u.jsxs("div",{className:`flex items-center text-[11px] text-gray-500 ${s}`,children:[u.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-1 py-0.5 text-gray-600",onMouseDown:g,onClick:x,"aria-label":"Copy to clipboard",children:[i?u.jsx(Hl,{className:"w-3.5 h-3.5 text-green-500"}):u.jsx(eb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Copy"})]}),u.jsx("span",{className:"text-gray-500/50",children:"|"}),u.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-1 py-0.5 text-red-600",onMouseDown:g,onClick:v,"aria-label":"Clear text",children:[u.jsx(tb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Clear"})]})]})}function Cb({error:r,pastedJson:l,pasteTextareaRef:o,onBack:s,onDismissError:i,onChangeJson:d,onLoad:p}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Vo,{title:"Paste JSON",onBack:s}),u.jsx(Uo,{error:r,onDismiss:i}),u.jsxs("div",{className:"flex-1 flex flex-col space-y-4 overflow-hidden",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Paste your workflow JSON below."}),u.jsxs("div",{className:"group","data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1","data-textarea-header":"true",children:[u.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Workflow JSON"}),u.jsx(To,{value:l,onChange:d,textareaRef:o,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),u.jsx("textarea",{ref:o,value:l,onChange:h=>d(h.target.value),placeholder:'{"last_node_id": ...}',className:"w-full flex-1 p-3 border border-gray-300 rounded-lg font-mono text-xs resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:s,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 min-h-[48px]",children:"Cancel"}),u.jsx("button",{onClick:p,disabled:!l.trim(),className:`flex-1 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600
                       disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px]`,children:"Load"})]})]})]})}function kb({error:r,loading:l,workflow:o,saveFilenameInput:s,onBack:i,onDismissError:d,onSaveFilenameChange:p,onSaveAs:h,onDownload:m}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Vo,{title:"Save Workflow",onBack:i}),u.jsx(Uo,{error:r,onDismiss:d}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-xl",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Save to ComfyUI server:"}),u.jsx("input",{type:"text",value:s,onChange:g=>p(g.target.value),placeholder:"Enter filename (e.g., my_workflow.json)",className:"w-full p-3 border border-gray-300 rounded-lg mb-3"}),u.jsx("button",{onClick:h,disabled:!o||!s.trim()||l,className:`w-full py-3 bg-blue-500 text-white rounded-lg font-medium
                       disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px]`,children:l?"Saving...":"Save As"})]}),u.jsxs("button",{onClick:m,disabled:!o,className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                     rounded-xl text-left hover:bg-gray-50 min-h-[56px]
                     disabled:opacity-50 disabled:cursor-not-allowed`,children:[u.jsx(ub,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Download to Device"})]})]})]})}const Mb={sm:"w-4 h-4 border-2",md:"w-6 h-6 border-2",lg:"w-10 h-10 border-4"},Ob={blue:"border-blue-500 border-t-transparent",gray:"border-gray-200 border-t-gray-500"};function rf({size:r="md",color:l="blue",className:o=""}){return u.jsx("div",{className:`animate-spin rounded-full ${Mb[r]} ${Ob[l]} ${o}`})}function Eb({error:r,loading:l,templates:o,onBack:s,onDismissError:i,onLoadTemplate:d}){const[p,h]=b.useState(""),m=Object.entries(o),g=p.toLowerCase(),x=m.map(([N,C])=>[N,C.filter(w=>w.toLowerCase().includes(g))]).filter(([,N])=>N.length>0),v=m.length>0;return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Vo,{title:"Templates",onBack:s}),u.jsx(Uo,{error:r,onDismiss:i}),!l&&v&&u.jsxs("div",{className:"relative py-2",children:[u.jsx("input",{type:"text",value:p,onChange:N=>h(N.target.value),placeholder:"Search",className:`w-full px-3 py-2 pr-9 bg-white border border-gray-200 rounded-lg
                       text-sm text-gray-900 placeholder-gray-400
                       focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`}),p&&u.jsx("button",{onClick:()=>h(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",children:u.jsx(Gl,{className:"w-4 h-4"})})]}),l?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx(rf,{})}):v?x.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No matching templates"}):u.jsx("div",{className:"space-y-4 overflow-y-auto flex-1",children:x.map(([N,C])=>u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-2",children:N}),u.jsx("div",{className:"space-y-2",children:C.map(w=>u.jsxs("button",{onClick:()=>d(N,w),className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                               rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(z0,{className:"w-5 h-5 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900 truncate",children:w.replace(/\.json$/,"")})]},w))})]},N))}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No templates available"})]})}function Tb(r){const l=new Date,o=new Date(r*1e3),s=l.getTime()-o.getTime(),i=Math.floor(s/(1e3*60*60*24)),d=String(o.getMonth()+1),p=String(o.getDate()),h=String(o.getFullYear()).slice(-2),m=`${d}/${p}/${h}`;return i===0?`${m} (Today)`:i===1?`${m} (Yesterday)`:`${m} (${i} days ago)`}function Lb({error:r,loading:l,userWorkflows:o,onBack:s,onDismissError:i,onLoadWorkflow:d}){const[p,h]=b.useState(""),[m,g]=b.useState("name"),x=o.filter(N=>N.name.toLowerCase().includes(p.toLowerCase())).sort((N,C)=>m==="name"?N.name.localeCompare(C.name):(C.modified??0)-(N.modified??0)),v=u.jsxs("button",{onClick:()=>g(m==="name"?"date":"name"),className:"flex items-center gap-0.5 text-xs font-semibold text-blue-500",children:[u.jsx("span",{children:m==="name"?"NAME":"DATE"}),u.jsx("span",{children:""})]});return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Vo,{title:"My Workflows",onBack:s,rightElement:v}),u.jsx(Uo,{error:r,onDismiss:i}),!l&&o.length>0&&u.jsxs("div",{className:"relative py-2",children:[u.jsx("input",{type:"text",value:p,onChange:N=>h(N.target.value),placeholder:"Search",className:`w-full px-3 py-2 pr-9 bg-white border border-gray-200 rounded-lg
                       text-sm text-gray-900 placeholder-gray-400
                       focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`}),p&&u.jsx("button",{onClick:()=>h(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",children:u.jsx(Gl,{className:"w-4 h-4"})})]}),l?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx(rf,{})}):o.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No saved workflows yet"}):x.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No matching workflows"}):u.jsx("div",{className:"space-y-2 overflow-y-auto flex-1",children:x.map(N=>u.jsxs("button",{onClick:()=>d(N.name),className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(_a,{className:"w-5 h-5 text-gray-600"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:N.name.replace(/\.json$/,"")}),N.modified&&u.jsx("p",{className:"text-xs text-gray-500",children:Tb(N.modified)})]})]},N.path))})]})}const Ei=ar()($r(r=>({theme:"dark",setTheme:l=>{r({theme:l})},toggleTheme:()=>{r(l=>({theme:l.theme==="dark"?"light":"dark"}))}}),{name:"theme-storage",storage:Fr(()=>localStorage)}));function _b({open:r,onClose:l}){const o=ne(le=>le.loadWorkflow),s=ne(le=>le.workflow),i=ne(le=>le.currentFilename),d=ne(le=>le.originalWorkflow),p=ne(le=>le.setSavedWorkflow),h=Ei(le=>le.theme),m=Ei(le=>le.toggleTheme),g=b.useRef(null),x=!!(s&&d&&JSON.stringify(s)!==JSON.stringify(d)),v=b.useRef(null),[N,C]=b.useState(null),[w,S]=b.useState("menu"),[M,j]=b.useState([]),[E,z]=b.useState({}),[_,L]=b.useState(!1),[R,A]=b.useState(i||""),[I,U]=b.useState(""),[G,W]=b.useState({load:!0,save:!0,appearance:!0,info:!0}),K=b.useRef(null),ge=b.useRef(null),ae=b.useRef(null),re=b.useRef(null),D=b.useRef(G);b.useEffect(()=>{const le=D.current,ve=G;!le.load&&ve.load?setTimeout(()=>K.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!le.save&&ve.save?setTimeout(()=>ge.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!le.appearance&&ve.appearance?setTimeout(()=>ae.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!le.info&&ve.info&&setTimeout(()=>re.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100),D.current=ve},[G]),b.useEffect(()=>{r||(S("menu"),C(null),A(i||""),U(""),W({load:!0,save:!0,appearance:!0,info:!0}))},[r,i]),b.useEffect(()=>{w==="userWorkflows"&&(L(!0),c1().then(j).catch(le=>C(le.message)).finally(()=>L(!1)))},[w]),b.useEffect(()=>{w==="templates"&&(L(!0),f1().then(z).catch(le=>C(le.message)).finally(()=>L(!1)))},[w]);const $=le=>{"vibrate"in navigator&&navigator.vibrate(le)},fe=()=>{v.current?.click()},be=async le=>{const ve=le.target.files?.[0];if(ve){try{const Le=await ve.text(),$e=JSON.parse(Le);if(!$e.nodes||!Array.isArray($e.nodes))throw new Error("Invalid workflow: missing nodes array");o($e,ve.name),C(null),l(),$(10)}catch(Le){C(Le instanceof Error?Le.message:"Failed to load workflow")}v.current&&(v.current.value="")}},ye=async le=>{try{L(!0);const ve=await j0(le);o(ve,le,{fresh:!0,source:{type:"user",filename:le}}),C(null),l(),$(10)}catch(ve){C(ve instanceof Error?ve.message:"Failed to load workflow")}finally{L(!1)}},T=async(le,ve)=>{try{L(!0);const Le=await C0(le,ve);o(Le,`${le}/${ve}`,{fresh:!0,source:{type:"template",moduleName:le,templateName:ve}}),C(null),l(),$(10)}catch(Le){C(Le instanceof Error?Le.message:"Failed to load template")}finally{L(!1)}},B=async le=>{if(!s)return;const ve=le.endsWith(".json")?le:`${le}.json`;try{L(!0),await d1(ve,s),p(s,ve),C(null),l(),$(10)}catch(Le){C(Le instanceof Error?Le.message:"Failed to save workflow")}finally{L(!1)}},O=()=>{i?B(i):S("save")},F=()=>{A(i||""),S("save")},X=()=>{R.trim()?B(R):C("Please enter a filename.")},pe=()=>{if(!s)return;const le=JSON.stringify(s,null,2),ve=new Blob([le],{type:"application/json"}),Le=URL.createObjectURL(ve),$e=document.createElement("a");$e.href=Le,$e.download=`${i||`workflow-${Date.now()}`}.json`,$e.click(),URL.revokeObjectURL(Le),$(10),l()},J=()=>{try{const le=JSON.parse(I);if(!le.nodes||!Array.isArray(le.nodes))throw new Error("Invalid workflow: missing nodes array");const ve=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});o(le,`Pasted workflow (${ve})`),C(null),l(),$(10),U("")}catch(le){C(le instanceof Error?le.message:"Failed to parse JSON")}};return u.jsxs(bb,{open:r,onClose:l,side:"left",title:"ComfyUI Mobile",children:[w==="menu"&&u.jsx(Sb,{error:N,workflow:s,currentFilename:i,isDirty:x,loading:_,theme:h,menuSectionsOpen:G,fileInputRef:v,loadSectionRef:K,saveSectionRef:ge,appearanceSectionRef:ae,infoSectionRef:re,onDismissError:()=>C(null),onFileChange:be,onLoadFromFile:fe,onToggleSection:le=>W(ve=>({...ve,[le]:!ve[le]})),onOpenUserWorkflows:()=>S("userWorkflows"),onOpenTemplates:()=>S("templates"),onOpenPasteJson:()=>S("pasteJson"),onSave:O,onOpenSaveAs:F,onToggleTheme:m,onOpenLegend:()=>S("aboutLegend")}),w==="userWorkflows"&&u.jsx(Lb,{error:N,loading:_,userWorkflows:M,onBack:()=>S("menu"),onDismissError:()=>C(null),onLoadWorkflow:ye}),w==="templates"&&u.jsx(Eb,{error:N,loading:_,templates:E,onBack:()=>S("menu"),onDismissError:()=>C(null),onLoadTemplate:T}),w==="save"&&u.jsx(kb,{error:N,loading:_,workflow:s,saveFilenameInput:R,onBack:()=>S("menu"),onDismissError:()=>C(null),onSaveFilenameChange:A,onSaveAs:X,onDownload:pe}),w==="pasteJson"&&u.jsx(Cb,{error:N,pastedJson:I,pasteTextareaRef:g,onBack:()=>S("menu"),onDismissError:()=>C(null),onChangeJson:U,onLoad:J}),w==="aboutLegend"&&u.jsx(wb,{onBack:()=>S("menu")})]})}function Gi({open:r,onDismiss:l,triggerRef:o,contentRef:s,closeOnScroll:i=!0}){b.useEffect(()=>{if(!r)return;const d=h=>{const m=h.target;o.current&&m&&o.current.contains(m)||s.current&&m&&s.current.contains(m)||l()},p=()=>{i&&l()};return document.addEventListener("mousedown",d),i&&document.addEventListener("scroll",p,!0),()=>{document.removeEventListener("mousedown",d),i&&document.removeEventListener("scroll",p,!0)}},[r,l,o,s,i])}function Ab({open:r,onClose:l,onConfirm:o}){if(!r)return null;const s=async()=>{await o(),l()};return u.jsx("div",{id:"clear-history-confirm-overlay",className:"fixed inset-0 z-[1500] bg-black/50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"clear-history-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:i=>i.stopPropagation(),children:[u.jsx("div",{id:"clear-history-title",className:"text-gray-900 text-base font-semibold",children:"Clear history?"}),u.jsx("div",{id:"clear-history-description",className:"text-gray-600 text-sm mt-1",children:"This will permanently remove all completed generations from history. Generated files will still be present in your server's output folder."}),u.jsxs("div",{id:"clear-history-actions",className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:l,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:s,children:"Clear history"})]})]})})}function Rb({open:r,buttonRef:l,menuRef:o,onToggle:s,onClose:i,onGoToWorkflow:d,onOpenClearHistoryConfirm:p}){const h=rt(B=>B.setQueueItemExpanded),m=rt(B=>B.queueItemExpanded),g=rt(B=>B.showQueueMetadata),x=rt(B=>B.toggleShowQueueMetadata),v=rt(B=>B.previewVisibility),N=rt(B=>B.setPreviewVisibility),C=rt(B=>B.previewVisibilityDefault),w=rt(B=>B.setPreviewVisibilityDefault),S=rt(B=>B.pending),M=rt(B=>B.running),j=rt(B=>B.clearQueue),E=Tn(B=>B.history),z=Tn(B=>B.clearEmptyItems),_=S.length>0,L=E.length>0,R=E.some(B=>B.outputs.images.length===0),A=S.length+M.length+E.length>0,I=b.useMemo(()=>{const B=new Set;return S.forEach(O=>B.add(O.prompt_id)),M.forEach(O=>B.add(O.prompt_id)),E.forEach(O=>{O.prompt_id&&B.add(String(O.prompt_id))}),Array.from(B)},[S,M,E]),U=b.useMemo(()=>I.some(B=>m[B]===!1),[I,m]),G=b.useMemo(()=>I.some(B=>m[B]!==!1),[I,m]),W=b.useMemo(()=>{const B=new Set;return E.forEach(O=>{(O.outputs?.images??[]).some(pe=>pe.type!=="output")&&O.prompt_id&&B.add(String(O.prompt_id))}),Array.from(B)},[E]),K=A||W.length>0||C,ge=W.length>0?W.every(B=>v[B]??C):C,ae=()=>{d(),i()},re=async()=>{await j(),i()},D=()=>{I.forEach(B=>h(B,!1)),i()},$=()=>{I.forEach(B=>h(B,!0)),i()},fe=()=>{x(),i()},be=()=>{const B=!ge;w(B),W.forEach(O=>N(O,B)),i()},ye=async()=>{await z(),i()},T=()=>{i(),p()};return u.jsxs("div",{id:"queue-menu-container",className:"relative",children:[u.jsx("button",{ref:l,onClick:s,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Queue options",children:u.jsx(bl,{className:"w-5 h-5 -rotate-90"})}),r?u.jsxs("div",{id:"queue-options-dropdown",ref:o,className:"absolute right-0 top-11 z-50 w-48 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ae,children:[u.jsx(Ci,{className:"w-3 h-3 text-gray-500 rotate-180"}),"Go to workflow"]}),_&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:re,children:[u.jsx(P1,{className:"w-4 h-4 text-gray-500"}),"Cancel all pending"]}),G&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:D,children:[u.jsx(Il,{className:"w-7 h-7 -ml-1 text-gray-500"}),"Fold all"]}),U&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:$,children:[u.jsx(Wn,{className:"w-7 h-7 -ml-1 text-gray-500"}),"Unfold all"]}),L&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:fe,children:[u.jsx(L0,{className:"w-4 h-4 text-gray-500"}),g?"Hide metadata":"Show metadata"]}),K&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:be,children:[ge?u.jsx(dr,{className:"w-4 h-4 text-gray-500"}):u.jsx(Bl,{className:"w-4 h-4 text-gray-500"}),ge?"Hide previews":"Show previews"]}),R&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-gray-600",onClick:ye,children:[u.jsx(Ur,{className:"w-4 h-4"}),"Clear empty items"]}),L&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:T,children:[u.jsx(Ur,{className:"w-4 h-4"}),"Clear history"]})]}):null]})}function Db(){const[r,l]=b.useState(!1),[o,s]=b.useState(!1),i=Ln(m=>m.setCurrentPanel),d=Tn(m=>m.clearHistory),p=b.useRef(null),h=b.useRef(null);return Gi({open:r,onDismiss:()=>l(!1),triggerRef:p,contentRef:h,closeOnScroll:!1}),u.jsxs(u.Fragment,{children:[u.jsx(Rb,{open:r,buttonRef:p,menuRef:h,onToggle:()=>l(m=>!m),onClose:()=>l(!1),onGoToWorkflow:()=>i("workflow"),onOpenClearHistoryConfirm:()=>s(!0)}),u.jsx(Ab,{open:o,onClose:()=>s(!1),onConfirm:d})]})}function zb({open:r,buttonRef:l,menuRef:o,onToggle:s,onClose:i,onGoToWorkflow:d}){const p=St(_=>_.source),h=St(_=>_.viewMode),m=St(_=>_.showHidden),g=St(_=>_.setSource),x=St(_=>_.setViewMode),v=St(_=>_.toggleShowHidden),N=St(_=>_.toggleSelectionMode),C=St(_=>_.setNewFolderModalOpen),w=()=>{C(!0),i()},S=()=>{g(p==="output"?"input":"output"),i()},M=()=>{d(),i()},j=()=>{N(),i()},E=()=>{v(),i()},z=()=>{x(h==="grid"?"list":"grid"),i()};return u.jsxs("div",{id:"outputs-topbar-actions",className:"relative flex items-center gap-1",children:[u.jsx("button",{ref:l,onClick:s,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Outputs options",children:u.jsx(bl,{className:"w-5 h-5 -rotate-90"})}),r?u.jsxs("div",{id:"outputs-options-dropdown",ref:o,className:"absolute right-0 top-11 z-50 w-48 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:S,children:[u.jsx(gi,{className:"w-4 h-4 text-gray-500"}),p==="output"?"Switch to inputs":"Switch to outputs"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:M,children:[u.jsx(Ci,{className:"w-3 h-3 text-gray-500"}),"Go to workflow"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:j,children:[u.jsx(Hl,{className:"w-4 h-4 text-gray-500"}),"Select"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:w,children:[u.jsx(Vr,{className:"w-4 h-4 text-gray-500"}),"New folder"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:E,children:[m?u.jsx(dr,{className:"w-4 h-4 text-gray-500"}):u.jsx(Bl,{className:"w-4 h-4 text-gray-500"}),m?"Hide hidden files":"Show hidden files"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:z,children:[h==="grid"?u.jsx(F1,{className:"w-4 h-4 text-gray-500"}):u.jsx(ob,{className:"w-4 h-4 text-gray-500"}),h==="grid"?"List view":"Grid view"]})]}):null]})}function Bb(){const[r,l]=b.useState(!1),o=Ln(d=>d.setCurrentPanel),s=b.useRef(null),i=b.useRef(null);return Gi({open:r,onDismiss:()=>l(!1),triggerRef:s,contentRef:i,closeOnScroll:!1}),u.jsx(zb,{open:r,buttonRef:s,menuRef:i,onToggle:()=>l(d=>!d),onClose:()=>l(!1),onGoToWorkflow:()=>o("workflow")})}function Ib({action:r,onCancel:l,onContinue:o}){return r?u.jsx("div",{id:"dirty-confirm-overlay",className:"fixed inset-0 z-[1500] bg-black/50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"dirty-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:s=>s.stopPropagation(),children:[u.jsx("div",{id:"dirty-confirm-title",className:"text-gray-900 text-base font-semibold",children:"Unsaved changes"}),u.jsx("div",{id:"dirty-confirm-description",className:"text-gray-600 text-sm mt-1",children:"You have unsaved changes in the current workflow. Continue without saving?"}),u.jsxs("div",{id:"dirty-confirm-actions",className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:l,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:()=>o(r),children:"Continue"})]})]})}):null}const Hb=5;function Vb(r){const l={};for(const o of r)l[o.id]={mode:o.mode,flags:o.flags?{collapsed:!!o.flags.collapsed}:void 0,widgets_values:o.widgets_values};return l}function Ub(r,l,o,s,i,d){return{nodes:Vb(r.nodes),seedModes:{...l},collapsedGroups:{...o},hiddenGroups:{...s},collapsedSubgraphs:{...i},hiddenSubgraphs:{...d}}}function Ng(r,l){if(!r)return[];if(!l.length)return[];const o=new Set(r.nodes.map(s=>s.id));return l.filter(s=>o.has(s))}function jg(r,l){if(r===l)return!0;if(r.length!==l.length)return!1;for(let o=0;o<r.length;o+=1)if(r[o]!==l[o])return!1;return!0}const bn=ar()($r((r,l)=>({bookmarkedNodeIds:[],bookmarkBarSide:"right",bookmarkBarTop:null,bookmarkRepositioningActive:!1,toggleNodeBookmark:o=>{const{bookmarkedNodeIds:s}=l(),{currentWorkflowKey:i,savedWorkflowStates:d,workflow:p,collapsedGroups:h,hiddenGroups:m,collapsedSubgraphs:g,hiddenSubgraphs:x}=ne.getState(),v=Sn.getState().seedModes,C=s.includes(o)?s.filter(w=>w!==o):s.length>=Hb?s:[...s,o];if(C!==s){if(i){let S=d[i];!S&&p&&(S=Ub(p,v,h,m,g,x)),S&&ne.setState({savedWorkflowStates:{...d,[i]:{...S,bookmarkedNodeIds:[...C]}}})}r({bookmarkedNodeIds:C})}},clearNodeBookmarks:()=>{const{currentWorkflowKey:o,savedWorkflowStates:s}=ne.getState();if(o&&s[o]){const i=s[o];ne.setState({savedWorkflowStates:{...s,[o]:{...i,bookmarkedNodeIds:[]}}})}r({bookmarkedNodeIds:[]})},setBookmarkBarPosition:o=>{r(s=>({bookmarkBarSide:o.side??s.bookmarkBarSide,bookmarkBarTop:o.top??s.bookmarkBarTop}))},setBookmarkRepositioningActive:o=>{r({bookmarkRepositioningActive:o})}}),{name:"bookmark-bar-storage",storage:Fr(()=>localStorage),partialize:r=>({bookmarkBarSide:r.bookmarkBarSide,bookmarkBarTop:r.bookmarkBarTop})}));function B0(){const{workflow:r,currentWorkflowKey:l,savedWorkflowStates:o}=ne.getState(),{bookmarkedNodeIds:s}=bn.getState();if(!r){s.length>0&&bn.setState({bookmarkedNodeIds:[]});return}if(!l){const h=Ng(r,s);jg(s,h)||bn.setState({bookmarkedNodeIds:h});return}const d=o[l]?.bookmarkedNodeIds??[],p=Ng(r,d);jg(s,p)||bn.setState({bookmarkedNodeIds:p})}ne.subscribe(()=>{B0()});B0();function Gb({open:r,buttonRef:l,menuRef:o,onToggle:s,onClose:i,onGoToQueue:d,onGoToOutputs:p,onHandleDirtyAction:h}){const m=ne(oe=>oe.workflow),g=ne(oe=>oe.nodeTypes),x=ne(oe=>oe.setNodeFold),v=ne(oe=>oe.setGroupCollapsed),N=ne(oe=>oe.setSubgraphCollapsed),C=ne(oe=>oe.setNodeHidden),w=ne(oe=>oe.showAllHiddenNodes),S=ne(oe=>oe.manuallyHiddenNodes),M=ne(oe=>oe.hiddenGroups),j=ne(oe=>oe.hiddenSubgraphs),E=bn(oe=>oe.bookmarkedNodeIds),z=bn(oe=>oe.clearNodeBookmarks),_=ne(oe=>oe.collapsedGroups),L=ne(oe=>oe.collapsedSubgraphs),R=ne(oe=>oe.workflowSource),A=ne(oe=>oe.loadWorkflow),I=ne(oe=>oe.searchOpen),U=ne(oe=>oe.setSearchOpen),G=ne(oe=>oe.setSearchQuery),W=ne(oe=>oe.connectionButtonsVisible),K=ne(oe=>oe.toggleConnectionButtonsVisible),ge=Tn(oe=>oe.history),ae=!!m,re=b.useMemo(()=>m?.nodes.map(oe=>oe.id)??[],[m]),D=b.useMemo(()=>{if(!m)return[];const oe=m.groups?.map(lt=>lt.id)??[],et=m.definitions?.subgraphs?.flatMap(lt=>lt.groups?.map(jt=>jt.id)??[])??[];return[...oe,...et]},[m]),$=b.useMemo(()=>m?.definitions?.subgraphs?.map(oe=>oe.id)??[],[m]),fe=b.useMemo(()=>m?.nodes.filter(oe=>oe.mode===4).map(oe=>oe.id)??[],[m]),be=b.useMemo(()=>!m||!g?[]:m.nodes.filter(oe=>{if(oe.type==="Fast Groups Bypasser (rgthree)")return!1;const et=Kd(g,oe).filter(jt=>!jt.connected),lt=Jd(g,oe).filter(jt=>!jt.connected);return et.length===0&&lt.length===0}).map(oe=>oe.id),[m,g]),ye=fe.length,T=be.length,B=b.useMemo(()=>Object.values(S).filter(Boolean).length,[S]),O=b.useMemo(()=>fe.filter(oe=>S[oe]).length,[fe,S]),F=b.useMemo(()=>be.filter(oe=>S[oe]).length,[be,S]),X=b.useMemo(()=>m?m.nodes.filter(oe=>!S[oe.id]):[],[m,S]),pe=b.useMemo(()=>X.some(oe=>oe.flags?.collapsed),[X]),J=b.useMemo(()=>X.some(oe=>!oe.flags?.collapsed),[X]),le=b.useMemo(()=>D.some(oe=>_[oe]??!0),[D,_]),ve=b.useMemo(()=>D.some(oe=>_[oe]===!1),[D,_]),Le=b.useMemo(()=>$.some(oe=>L[oe]??!0),[$,L]),$e=b.useMemo(()=>$.some(oe=>L[oe]===!1),[$,L]),ee=pe||le||Le,Ve=J||ve||$e,Ne=b.useMemo(()=>B>0||Object.values(M).some(Boolean)?!0:Object.values(j).some(Boolean),[B,M,j]),Ce=()=>{i()},tt=()=>{d(),Ce()},Qe=()=>{p(),Ce()},we=()=>{G(""),U(!0),Ce()},xe=()=>{K(),Ce()},Ee=()=>{re.forEach(oe=>x(oe,!0)),D.forEach(oe=>v(oe,!0)),$.forEach(oe=>N(oe,!0)),Ce()},Ae=()=>{re.forEach(oe=>x(oe,!1)),D.forEach(oe=>v(oe,!1)),$.forEach(oe=>N(oe,!1)),Ce()},ft=()=>{be.forEach(oe=>C(oe,!0)),Ce()},ut=()=>{O>0?fe.forEach(oe=>C(oe,!1)):fe.forEach(oe=>C(oe,!0)),Ce()},Ze=()=>{w(),Ce()},Se=()=>{z(),Ce()},_e=async()=>{if(!(!R||R.type!=="user")){try{const oe=await j0(R.filename);A(oe,R.filename,{fresh:!0,source:R})}catch(oe){console.error("Failed to reload workflow:",oe)}Ce()}},Xe=async()=>{if(!(!R||R.type!=="template")){try{const oe=await C0(R.moduleName,R.templateName);A(oe,`${R.moduleName}/${R.templateName}`,{fresh:!0,source:R})}catch(oe){console.error("Failed to reload template:",oe)}Ce()}},We=()=>{if(!R||R.type!=="history")return;const oe=ge.find(et=>et.prompt_id===R.promptId);oe?.workflow&&A(oe.workflow,`history-${R.promptId}.json`,{source:R}),Ce()},Pe=()=>{h("clearWorkflowCache")},Ge=()=>{h("unload")},Nt=()=>{h("clearAllCache")};return u.jsxs("div",{id:"workflow-menu-container",className:"relative",children:[u.jsx("button",{ref:l,onClick:s,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Workflow options",children:u.jsx(bl,{className:"w-5 h-5 -rotate-90"})}),r?u.jsxs("div",{id:"workflow-options-dropdown",ref:o,className:"absolute right-0 top-11 z-50 w-52 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:tt,children:[u.jsx(Ci,{className:"w-3 h-3 text-gray-500"}),"Go to queue"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Qe,children:[u.jsx(Ci,{className:"w-3 h-3 text-gray-500 rotate-180"}),"Go to outputs"]}),!I&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:we,children:[u.jsx(ab,{className:"w-4 h-4 text-gray-500"}),"Search"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:xe,children:[W?u.jsx(dr,{className:"w-4 h-4 text-gray-500"}):u.jsx(Bl,{className:"w-4 h-4 text-gray-500"}),W?"Hide connection buttons":"Show connection buttons"]}),Ve&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ee,children:[u.jsx(Il,{className:"w-6 h-6 -ml-1 text-gray-500"}),"Fold all"]}),ee&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ae,children:[u.jsx(Wn,{className:"w-6 h-6 -ml-1 text-gray-500"}),"Unfold all"]}),T>0&&F<T&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ft,children:[u.jsx(dr,{className:"w-4 h-4 text-gray-500"}),"Hide static nodes (",T,")"]}),ye>0&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ut,children:[O>0?u.jsx(Bl,{className:"w-4 h-4 text-gray-500"}):u.jsx(dr,{className:"w-4 h-4 text-gray-500"}),O>0?"Show bypassed nodes":"Hide bypassed nodes"," (",ye,")"]}),Ne&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ze,children:[u.jsx(Bl,{className:"w-4 h-4 text-gray-500"}),"Show all hidden nodes"]}),E.length>0&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Se,children:[u.jsx(Ur,{className:"w-4 h-4 text-gray-500"}),"Clear bookmarks"]}),R&&(R.type==="user"?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:_e,children:[u.jsx(gi,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):R.type==="template"?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Xe,children:[u.jsx(gi,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):R.type==="history"&&ge.find(oe=>oe.prompt_id===R.promptId)?.workflow?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:We,children:[u.jsx(gi,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):null),ae&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Pe,children:[u.jsx(Ur,{className:"w-4 h-4 text-gray-500"}),"Clear workflow cache"]}),ae&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:Ge,children:[u.jsx(Z1,{className:"w-4 h-4"}),"Unload workflow"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:Nt,children:[u.jsx(Ur,{className:"w-4 h-4"}),"Clear all cache"]})]}):null]})}function qb(){const[r,l]=b.useState(null),[o,s]=b.useState(null),i=ne(j=>j.workflow),d=ne(j=>j.originalWorkflow),p=ne(j=>j.clearWorkflowCache),h=ne(j=>j.unloadWorkflow),m=Ln(j=>j.setCurrentPanel),g=ne(j=>j.workflowLoadedAt),x=b.useRef(null),v=b.useRef(null),N=r!==null&&r===g,C=b.useMemo(()=>!!(i&&d&&JSON.stringify(i)!==JSON.stringify(d)),[i,d]);Gi({open:N,onDismiss:()=>l(null),triggerRef:x,contentRef:v,closeOnScroll:!1});const w=async()=>{if(localStorage.clear(),sessionStorage.clear(),"caches"in window){const j=await caches.keys();await Promise.all(j.map(E=>caches.delete(E)))}document.cookie.split(";").forEach(j=>{const[E]=j.split("=");document.cookie=`${E.trim()}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}),window.location.reload()},S=j=>{if(C){l(null),s(j);return}j==="unload"?h():j==="clearWorkflowCache"?p():w(),l(null)},M=async j=>{s(null),j==="unload"?h():j==="clearWorkflowCache"?p():j==="clearAllCache"&&await w()};return u.jsxs(u.Fragment,{children:[u.jsx(Gb,{open:N,buttonRef:x,menuRef:v,onToggle:()=>l(N?null:g),onClose:()=>l(null),onGoToQueue:()=>m("queue"),onGoToOutputs:()=>m("outputs"),onHandleDirtyAction:S}),u.jsx(Ib,{action:o,onCancel:()=>s(null),onContinue:M})]})}function Wb(r){return r==="queue"?['[data-queue-list="true"]','[data-node-list="true"]']:['[data-node-list="true"]','[data-queue-list="true"]']}function Fb({mode:r="workflow"}){const l=b.useRef(null),o=b.useRef(0),s=_d(E=>E.appMenuOpen),i=_d(E=>E.setAppMenuOpen),d=b.useCallback(()=>{const E=Date.now(),z=E-o.current;if(o.current=E,z<300){if(r==="workflow"){window.dispatchEvent(new Event("workflow-scroll-to-top")),"vibrate"in navigator&&navigator.vibrate(10);return}if(r==="outputs"){const L=document.querySelector("#outputs-content-container");L&&(L.scrollTo({top:0,behavior:"auto"}),"vibrate"in navigator&&navigator.vibrate(10));return}const _=Wb(r);for(const L of _){const R=document.querySelector(L);if(R&&R.scrollHeight>0&&!R.closest(".pointer-events-none")){R.scrollTo({top:0,behavior:"smooth"}),"vibrate"in navigator&&navigator.vibrate(10);break}}}},[r]),p=ne(E=>E.workflow),h=ne(E=>E.originalWorkflow),m=ne(E=>E.currentFilename),g=ne(E=>E.manuallyHiddenNodes),x=ne(E=>E.hiddenSubgraphs),v=rt(E=>E.pending),N=Tn(E=>E.history),C=St(E=>E.source),w=p&&h&&JSON.stringify(p)!==JSON.stringify(h),S=b.useMemo(()=>{if(!p)return"";const E=p.nodes.length,z=Object.keys(g).length,_=Object.values(x).some(Boolean);if(z===0&&!_)return`${E} nodes ${w?"[Unsaved]":""}`.trim();const L=_?p.nodes.reduce((A,I)=>{const G=I.properties?.__mobile_origin;if(!G||typeof G!="object"||G.scope!=="subgraph")return A;const K=G.subgraphId;return K&&x[K]?A+1:A},0):0,R=z+L;return`${E} nodes (${R} hidden) ${w?"[Unsaved]":""}`.trim()},[p,g,x,w]);b.useEffect(()=>{const E=l.current;if(!E)return;const z=()=>{const L=E.getBoundingClientRect();document.documentElement.style.setProperty("--top-bar-offset",`${L.height}px`)};z();const _=new ResizeObserver(z);return _.observe(E),()=>_.disconnect()},[]);const M=b.useMemo(()=>{switch(r){case"queue":return"Queue";case"outputs":return C==="output"?"Outputs":"Inputs";default:return m?m.replace(".json",""):p?"Untitled":"ComfyUI Mobile"}},[r,C,m,p]),j=b.useMemo(()=>{switch(r){case"queue":return u.jsx(Db,{});case"outputs":return u.jsx(Bb,{});default:return u.jsx(qb,{})}},[r]);return u.jsxs("div",{id:"top-bar-root",ref:l,className:"fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-[2000] safe-area-top","data-top-bar":"true",children:[u.jsxs("div",{id:"top-bar-content",className:"flex items-center justify-between px-4 py-3",children:[u.jsx("button",{onClick:()=>i(!0),className:`w-10 h-10 flex items-center justify-center rounded-lg
                     text-gray-700 hover:bg-gray-100`,children:u.jsx(rb,{className:"w-6 h-6"})}),u.jsxs("div",{id:"top-bar-title-container",className:"flex-1 text-center min-w-0 px-2 cursor-pointer",onClick:d,children:[u.jsxs("h1",{id:"top-bar-title",className:"font-semibold text-gray-900 text-lg truncate flex items-center justify-center",children:[u.jsx("span",{className:"truncate",children:M}),r==="workflow"&&w&&u.jsx("span",{id:"dirty-indicator",className:"text-blue-500 ml-1 font-bold",children:"*"})]}),r==="workflow"&&p&&u.jsx("p",{className:"node-count-display text-xs text-gray-500",children:S}),r==="queue"&&u.jsxs("p",{className:"run-count-display text-xs text-gray-500",children:[N.length," ",N.length===1?"run":"runs",v.length>0&&` (${v.length} pending)`]})]}),u.jsx("div",{id:"top-bar-right-slot",className:"w-10 h-10 flex items-center justify-center",children:j})]}),u.jsx(_b,{open:s,onClose:()=>i(!1)})]})}function Dd(r,l){const o=new Map;if(l.length===0)return o;const s=[...l].sort((i,d)=>i.id-d.id);for(const i of r){const[d,p]=i.pos,[h,m]=i.size,g=d+h/2,x=p+m/2;for(const v of s){const[N,C,w,S]=v.bounding;if(g>=N&&g<=N+w&&x>=C&&x<=C+S){o.set(i.id,v.id);break}}}return o}function $b(r){const l=r.groups??[];return Dd(r.nodes,l)}function Yb(r){const o=r.properties?.__mobile_origin;if(!o||typeof o!="object")return null;const s=o.scope;if(s==="root"){const i=o.nodeId;return typeof i=="number"?{scope:"root",nodeId:i}:null}if(s==="subgraph"){const i=o.nodeId,d=o.subgraphId;if(typeof i=="number"&&typeof d=="string")return{scope:"subgraph",subgraphId:d,nodeId:i}}return null}function Qb(r,l,o,s,i={},d={}){const p=l.groups??[],h=l.definitions?.subgraphs??[],m=new Map(h.map(G=>[G.id,G])),g=l.extra?.__mobile_subgraph_group_map,x=new Map;if(g&&typeof g=="object")for(const[G,W]of Object.entries(g))(typeof W=="number"||W===null)&&x.set(G,W);for(const G of h)x.has(G.id)||x.set(G.id,null);const v=new Map;for(const G of r){const W=Yb(G);W?.scope==="subgraph"&&W.subgraphId&&v.set(G.id,W.subgraphId)}const N=new Map;for(const G of h)N.set(G.id,[]);for(const G of r){const W=v.get(G.id);W&&N.get(W)?.push(G)}const C=r.filter(G=>!v.has(G.id)),w=Dd(C,p),S=new Map(p.map(G=>[G.id,G])),M=[],j=new Set;for(const G of r){const W=v.get(G.id);if(W){j.has(W)||(M.push({kind:"subgraph",subgraphId:W}),j.add(W));continue}M.push({kind:"node",node:G})}const E=new Map;for(const G of M){const W=G.kind==="node"?w.get(G.node.id):x.get(G.subgraphId)??null;if(W==null)continue;const K=E.get(W);K?K.push(G):E.set(W,[G])}const z=G=>G.kind==="node"?1:d[G.subgraphId]?0:N.get(G.subgraphId)?.length??0,_=(G,W,K)=>({type:"node",node:G,groupId:W,subgraphId:K}),L=G=>{const W=m.get(G);if(!W)return[];const K=N.get(G)??[],ge=W.groups??[];if(ge.length===0)return K.map(ye=>_(ye,null,G));const ae=Dd(K,ge),re=new Map(ge.map(ye=>[ye.id,ye])),D=K.map(ye=>({kind:"node",node:ye})),$=new Map;for(const ye of D){const T=ae.get(ye.node.id);if(T===void 0)continue;const B=$.get(T);B?B.push(ye):$.set(T,[ye])}const fe=[],be=new Set;for(const ye of D){const T=ae.get(ye.node.id);if(T!==void 0){if(be.has(T))continue;const B=re.get(T),O=$.get(T)??[];if(B&&!s[B.id]){const F=O.reduce((J,le)=>J+z(le),0),X=o[B.id]??!0,pe=X?[]:O.map(J=>_(J.node,B.id,G));fe.push({type:"group",group:B,nodeCount:F,isCollapsed:X,subgraphId:G,children:pe})}be.add(T);continue}fe.push(_(ye.node,null,G))}for(const ye of ge)s[ye.id]||be.has(ye.id)||fe.push({type:"group",group:ye,nodeCount:0,isCollapsed:o[ye.id]??!0,subgraphId:G,children:[]});return fe},R=(G,W)=>{if(d[G])return null;const K=m.get(G);if(!K)return null;const ge=N.get(G)??[],ae=i[G]??!0,re=ae?[]:L(G);return{type:"subgraph",subgraph:K,nodeCount:ge.length,isCollapsed:ae,groupId:W,children:re}},A=(G,W,K)=>{if(s[G.id])return null;const ge=W.reduce((D,$)=>D+z($),0),ae=o[G.id]??!0,re=ae?[]:W.map(D=>D.kind==="node"?_(D.node,G.id,K):R(D.subgraphId,G.id)).filter(Boolean);return{type:"group",group:G,nodeCount:ge,isCollapsed:ae,subgraphId:K,children:re}},I=[],U=new Set;for(const G of M){const W=G.kind==="node"?w.get(G.node.id):x.get(G.subgraphId)??null;if(W!=null){if(U.has(W))continue;const K=S.get(W),ge=E.get(W)??[];if(K){const ae=A(K,ge,null);ae&&I.push(ae)}else for(const ae of ge)if(ae.kind==="node")I.push(_(ae.node,null,null));else{const re=R(ae.subgraphId,null);re&&I.push(re)}U.add(W);continue}if(G.kind==="node")I.push(_(G.node,null,null));else{const K=R(G.subgraphId,null);K&&I.push(K)}}for(const G of p){if(U.has(G.id))continue;const W=E.get(G.id)??[],K=A(G,W,null);K&&I.push(K),U.add(G.id)}return I}function Gr(r,l){const o=r.replace("#","");let s,i,d;if(o.length===3)s=parseInt(o[0]+o[0],16),i=parseInt(o[1]+o[1],16),d=parseInt(o[2]+o[2],16);else if(o.length===6)s=parseInt(o.slice(0,2),16),i=parseInt(o.slice(2,4),16),d=parseInt(o.slice(4,6),16);else return"rgba(0, 0, 0, 0)";return`rgba(${s}, ${i}, ${d}, ${l})`}function Go({workflow:r,runKey:l,isRunning:o,workflowDurationStats:s}){const[i,d]=b.useState(null),p=b.useRef(null),h=b.useRef(null),m=b.useRef(null),g=b.useRef(null),x=b.useRef(null),v=b.useRef(0),N=b.useRef(null);return b.useEffect(()=>{let C=null,w=null;const S=()=>{if(!r){N.current!==null&&(N.current=null,d(null)),m.current=null,g.current=null,x.current=null,p.current=null,v.current=0,h.current=null;return}const M=250,j=Date.now();let E=null;if(!l)h.current?(m.current=j+M,h.current=null,v.current=100,E=100):m.current&&j<m.current?E=100:(m.current=null,g.current=null,x.current=null,p.current=null,v.current=0,E=null);else if(m.current&&j<m.current)g.current=l,E=100;else if(g.current&&j>=(m.current??0)&&(h.current=g.current,g.current=null,p.current=j-M,v.current=0,m.current=null),h.current&&l!==h.current)x.current!==l&&(x.current=l,m.current=j+M,v.current=100),E=100;else{h.current!==l&&(p.current=j,h.current=l,v.current=0,m.current=null);const z=Math.max(0,j-(p.current??j)),_=ji(r),L=s[_]?.avgMs??null;let R;if(L){const I=z/L*100;R=Math.min(99,Math.max(0,I))}else{const I=z/1e3;I<=50?R=I:R=50+(I-50)*.5,R=Math.min(90,R)}const A=Math.max(v.current,R);v.current=A,E=Math.round(A)}N.current!==E&&(N.current=E,d(E))};return r?(C=setTimeout(S,0),(o||m.current||l)&&(w=setInterval(S,200))):C=setTimeout(S,0),()=>{C&&clearTimeout(C),w&&clearInterval(w)}},[r,l,o,s]),i}const Xb=new Set(["mp4","webm","mkv","mov","avi","m4v"]);function qo(r){const l=r.split(".").pop()?.toLowerCase()??"";return Xb.has(l)?"video":"image"}function Ca(r){return qo(r)==="video"}function Cg(r){const l=String(r).split(",")[0].trim();return["IMAGE","LATENT","MODEL","CLIP","VAE","CONDITIONING","INT","FLOAT","STRING","BOOLEAN","MASK"].includes(l)?`type-${l}`:"type-default"}function kg(r){return String(r).split(",").map(l=>l.trim().toUpperCase()).filter(Boolean)}const Mg=b.memo(function({slot:l,nodeId:o,direction:s,slotIndex:i,compact:d=!1,hideLabel:p=!1}){const h=ne(ae=>ae.workflow),m=ne(ae=>ae.scrollToNode),g=ne(ae=>ae.revealNodeWithParents),x=ne(ae=>ae.nodeTypes),v=ne(ae=>ae.manuallyHiddenNodes),[N,C]=b.useState(!1),w=b.useRef(null),S=b.useRef(null),[M,j]=b.useState(null),E=b.useRef(null),z=b.useMemo(()=>{if(!h)return[];const ae=[];if(s==="input"){if(l.link!=null){const D=Ao(h,o,i);D&&ae.push(D.node)}}else{const re=Ni(h,o,i);for(const D of re)ae.push(D.node)}return ae},[h,o,s,l,i]),{effectiveNodes:_,directNodes:L,bypassedTargets:R}=b.useMemo(()=>{if(!h)return{effectiveNodes:[],directNodes:[],bypassedTargets:[]};if(Object.keys(v).length===0)return{effectiveNodes:z,directNodes:z,bypassedTargets:[]};const ae=new Map(h.nodes.map(F=>[F.id,F])),re=F=>!!v[F.id],D=new Set,$=F=>{if(D.has(F))return[];D.add(F);const X=ae.get(F);if(!X)return[];const pe=[];return X.outputs?.forEach((J,le)=>{Ni(h,F,le).forEach(Le=>{const $e=Le.node;re($e)?pe.push(...$($e.id)):pe.push($e)})}),pe},fe=F=>{if(D.has(F))return[];D.add(F);const X=ae.get(F);if(!X)return[];const pe=[];return X.inputs?.forEach((J,le)=>{if(J.link===null)return;const ve=Ao(h,F,le);ve&&(re(ve.node)?pe.push(...fe(ve.node.id)):pe.push(ve.node))}),pe},be=[],ye=[];z.forEach(F=>{re(F)?s==="input"?ye.push(...fe(F.id)):ye.push(...$(F.id)):be.push(F)});const T=new Set(be.map(F=>F.id));let O=(F=>{const X=[],pe=new Set;return F.forEach(J=>{T.has(J.id)||pe.has(J.id)||(pe.add(J.id),X.push(J))}),X})(ye);if(s==="input"&&O.length>1){const F=new Set(kg(l.type)),X=O.filter(pe=>pe.outputs?.some(J=>kg(J.type).some(le=>F.has(le))));X.length>0&&(O=X)}return{effectiveNodes:[...be,...O],directNodes:be,bypassedTargets:O}},[z,h,s,l.type,v]),A=_.length,I=A===1?_[0].id:null,U=A>0,G=()=>{if(U){if(A===1&&I!==null){g(I),m(I);return}C(ae=>!ae)}},W=ae=>re=>{re.stopPropagation(),g(ae),m(ae),C(!1)};b.useLayoutEffect(()=>{if(!N)return;const ae=()=>{const re=S.current;if(!re)return;const D=re.getBoundingClientRect(),$=8;j({top:D.bottom+6,...s==="input"?{left:Math.min(D.left,window.innerWidth-$)}:{right:Math.max($,window.innerWidth-D.right)}})};return E.current=ae,ae(),()=>{}},[N,A,s]),b.useEffect(()=>{if(!N)return;const ae=()=>E.current?.(),re=$=>{!w.current||!$.target||S.current?.contains($.target)||w.current.contains($.target)||C(!1)},D=$=>{const fe=$.target;w.current&&fe&&w.current.contains(fe)||C(!1)};return document.addEventListener("mousedown",re),document.addEventListener("scroll",D,!0),window.addEventListener("resize",ae),()=>{document.removeEventListener("mousedown",re),document.removeEventListener("scroll",D,!0),window.removeEventListener("resize",ae)}},[N]);const K=d?"w-7 h-7":"w-10 h-10",ge=d?"text-sm":"text-base";return h?u.jsxs("div",{className:"flex items-center gap-2",children:[s==="input"?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:G,disabled:!U,ref:S,className:`
              flex items-center justify-center rounded-full font-medium
              ${K} flex-shrink-0
              transition-opacity
              ${Cg(l.type)}
              ${U?"opacity-100 cursor-pointer active:scale-95":"opacity-40 cursor-not-allowed"}
            `,children:U&&u.jsx("span",{className:ge,children:""})}),!p&&u.jsx("span",{className:"text-sm text-gray-700 truncate",children:l.localized_name||l.name})]}):u.jsxs(u.Fragment,{children:[!p&&u.jsx("span",{className:"text-sm text-gray-700 truncate",children:l.localized_name||l.name}),A>1&&u.jsx("span",{className:"bg-gray-200 text-gray-700 rounded-full px-2 py-0.5 text-xs font-medium flex-shrink-0",children:A}),u.jsx("button",{onClick:G,disabled:!U,ref:S,className:`
              flex items-center justify-center rounded-full font-medium
              ${K} flex-shrink-0
              transition-opacity
              ${Cg(l.type)}
              ${U?"opacity-100 cursor-pointer active:scale-95":"opacity-40 cursor-not-allowed"}
            `,children:U&&u.jsx("span",{className:ge,children:""})})]}),N&&M&&lr.createPortal(u.jsxs("div",{ref:w,className:"fixed z-[1000] bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:M.top,right:M.right,left:M.left,maxWidth:"calc(100vw - 16px)"},children:[L.map(ae=>{const D=x?.[ae.type]?.display_name||ae.type;return u.jsxs("button",{className:"block text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:W(ae.id),children:[D," #",ae.id]},ae.id)}),L.length>0&&R.length>0&&u.jsx("div",{className:"px-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"h-px flex-1 bg-gray-200"}),u.jsx("span",{className:"text-[10px] text-gray-400",children:"(via bypassed)"}),u.jsx("div",{className:"h-px flex-1 bg-gray-200"})]})}),R.map(ae=>{const D=x?.[ae.type]?.display_name||ae.type;return u.jsxs("button",{className:"block text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:W(ae.id),children:[D," #",ae.id]},`bypassed-${ae.id}`)})]}),document.body)]}):null});function Pb({nodeId:r,inputs:l,outputs:o,allInputs:s,allOutputs:i}){return!ne(p=>p.connectionButtonsVisible)||l.length===0&&o.length===0?null:u.jsxs("div",{className:"mb-3 grid grid-cols-2 gap-3",children:[u.jsx("div",{children:l.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Inputs"}),u.jsx("div",{className:"flex flex-col gap-1.5",children:l.map(p=>{const h=s.findIndex(m=>m.name===p.name);return u.jsx(Mg,{slot:p,nodeId:r,direction:"input",slotIndex:h},`input-${p.name}`)})})]})}),u.jsx("div",{className:"flex flex-col items-end",children:o.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide text-right w-full",children:"Outputs"}),u.jsx("div",{className:"flex flex-col gap-1.5 w-full items-end",children:o.map(p=>{const h=i.findIndex(m=>m.name===p.name);return u.jsx(Mg,{slot:p,nodeId:r,direction:"output",slotIndex:h},`output-${h}`)})})]})})]})}function Zb({nodeId:r,isBypassed:l,onEditLabel:o,pinnableWidgets:s,singlePinnableWidget:i,isSingleWidgetPinned:d,hasPinnedWidget:p,toggleWidgetPin:h,setPinnedWidget:m,isNodeBookmarked:g,canAddNodeBookmark:x,onToggleNodeBookmark:v,toggleBypass:N,hideNode:C,connectionHighlightMode:w,setConnectionHighlightMode:S,leftLineCount:M,rightLineCount:j}){const[E,z]=b.useState(!1),[_,L]=b.useState(!1),R=b.useRef(null),A=b.useRef(null),[I,U]=b.useState(null);b.useEffect(()=>{if(!E)return;const T=()=>{const F=A.current;if(!F)return;const X=F.getBoundingClientRect();U({top:X.bottom+6,left:X.right-160})};T();const B=F=>{!R.current||!F.target||A.current?.contains(F.target)||R.current.contains(F.target)||(z(!1),L(!1))},O=F=>{const X=F.target;R.current&&X&&R.current.contains(X)||(z(!1),L(!1))};return document.addEventListener("mousedown",B),document.addEventListener("scroll",O,!0),window.addEventListener("resize",T),()=>{document.removeEventListener("mousedown",B),document.removeEventListener("scroll",O,!0),window.removeEventListener("resize",T)}},[E]);const G=M>0||j>0,W=()=>{z(!1),L(!1)},K=T=>{T.stopPropagation();const B=M>0,O=j>0;if(!B&&!O)return;const F=B&&O?["off","inputs","outputs","both"]:B?["off","inputs"]:["off","outputs"],X=F.indexOf(w),pe=F[(X+1)%F.length];S(r,pe)},ge=T=>{T.stopPropagation(),z(B=>!B)},ae=T=>{T.stopPropagation(),o(),W()},re=T=>{T.stopPropagation(),N(r),W()},D=T=>{T.stopPropagation(),C(r),W()},$=T=>{T.stopPropagation(),i&&(h(i.widgetIndex,i.name,i.type,i.options),W())},fe=T=>{T.stopPropagation(),m(null),W()},be=T=>{T.stopPropagation(),L(!_)},ye=T=>B=>{B.stopPropagation(),m({nodeId:r,widgetIndex:T.widgetIndex,widgetName:T.name,widgetType:T.type,options:T.options}),W()};return u.jsxs("div",{className:"flex items-center gap-1 relative",onClick:T=>T.stopPropagation(),children:[G&&u.jsx("button",{type:"button",className:"w-8 h-8 flex items-center justify-center","aria-pressed":w!=="off","aria-label":"Highlight connected nodes",onClick:K,children:u.jsx(sb,{className:"w-6 h-6 overflow-visible",nodeId:r,connectionHighlightMode:w,leftLineCount:M,rightLineCount:j})}),u.jsx("button",{onClick:ge,className:"w-8 h-8 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent","aria-label":"Node options",ref:A,children:g?u.jsx(Vl,{className:"w-5 h-5 text-yellow-500"}):u.jsx(bl,{className:"w-5 h-5 -rotate-90"})}),E&&I&&lr.createPortal(u.jsxs("div",{ref:R,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:I.top,left:I.left},children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ae,children:[u.jsx(ef,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),(g||x)&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:T=>{T.stopPropagation(),v(),W()},children:[g?u.jsx(Mi,{className:"w-4 h-4 text-gray-500"}):u.jsx(Vl,{className:"w-4 h-4 text-yellow-500"}),g?"Remove bookmark":"Bookmark node"]}),u.jsx("div",{className:"border-t border-gray-200 my-1"}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:re,children:[u.jsx(Rd,{className:"w-4 h-4 text-gray-500",isBypassed:l}),l?"Engage node":"Bypass node"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:D,children:[u.jsx(dr,{className:"w-4 h-4 text-gray-500"}),"Hide node"]}),s.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"border-t border-gray-200 my-1"}),i?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:$,children:[d?u.jsx(Do,{className:"w-4 h-4 text-fuchsia-500"}):u.jsx(Ad,{className:"w-4 h-4 text-gray-500"}),d?"Remove pin":"Pin widget"]}):u.jsxs(u.Fragment,{children:[p&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:fe,children:[u.jsx(Do,{className:"w-4 h-4 text-fuchsia-500"}),"Remove pin"]}),u.jsxs("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex items-center justify-between",onClick:be,children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx(Ad,{className:"w-4 h-4 text-gray-500"}),"Pin widget"]}),u.jsx(Oi,{className:`w-4 h-4 text-gray-400 transition-transform ${_?"rotate-90":""}`})]}),_&&u.jsx("div",{className:"border-t border-gray-100 bg-gray-50 max-h-48 overflow-auto",children:s.map(T=>u.jsx("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 text-gray-700",onClick:ye(T),children:T.name},T.widgetIndex))})]})]})]}),document.body)]})}function Kb({nodeId:r,open:l,errors:o,anchorRef:s,onClose:i}){const d=x=>{x.stopPropagation(),i()},[p,h]=b.useState(null),m=b.useRef(null),g=Ln(x=>x.currentPanel);return b.useEffect(()=>{l&&g!=="workflow"&&i()},[l,g,i]),b.useEffect(()=>{if(!l)return;const x=()=>{const C=s.current;if(!C)return;const w=C.getBoundingClientRect();h({top:w.bottom+8,left:Math.max(16,Math.min(w.left+w.width/2-140,window.innerWidth-296))})};x();const v=C=>{C.target&&(s.current?.contains(C.target)||m.current?.contains(C.target)||i())},N=()=>{i()};return document.addEventListener("pointerdown",v),document.addEventListener("scroll",N,!0),window.addEventListener("resize",x),()=>{document.removeEventListener("pointerdown",v),document.removeEventListener("scroll",N,!0),window.removeEventListener("resize",x)}},[l,r,i,s]),!l||o.length===0||!p?null:lr.createPortal(u.jsxs("div",{ref:m,id:`error-popover-${r}`,className:"error-popover-root fixed z-[2000] bg-red-50 border border-red-700 rounded-lg shadow-lg w-72 max-h-64 overflow-auto",style:{top:p.top,left:p.left},children:[u.jsxs("div",{id:`error-popover-header-${r}`,className:"popover-header flex items-center justify-between px-3 py-2 border-b border-red-200 bg-red-700",children:[u.jsxs("span",{id:`error-popover-title-${r}`,className:"popover-title text-sm font-semibold text-white",children:[o.length," ",o.length===1?"Error":"Errors"]}),u.jsx("button",{type:"button",onClick:d,className:"w-6 h-6 flex items-center justify-center text-red-200 hover:text-white rounded","aria-label":"Close",children:u.jsx(nf,{className:"w-4 h-4"})})]}),u.jsx("div",{id:`error-popover-body-${r}`,className:"popover-body p-3 space-y-2 bg-red-100",children:o.map((x,v)=>{const N=x.details?.toLowerCase().replace(/[_\s]/g,"")||"",C=x.inputName?.toLowerCase().replace(/[_\s]/g,"")||"",w=!x.details||x.details===x.message||x.inputName&&N===C;return u.jsxs("div",{className:"error-item flex items-start gap-2 text-sm",children:[u.jsx("span",{className:"error-dot mt-1.5 h-1.5 w-1.5 rounded-full bg-red-700 shrink-0","aria-hidden":"true"}),u.jsxs("div",{className:"error-content-wrapper min-w-0",children:[x.inputName&&u.jsx("div",{className:"error-input-name font-medium text-red-900 mb-0.5",children:x.inputName}),u.jsx("div",{className:"error-message-text text-red-800",children:x.message}),!w&&u.jsx("div",{className:"error-details-text text-xs text-red-700 mt-0.5 break-words",children:x.details})]})]},v)})})]}),document.body)}function Jb({noteText:r,noteLinkified:l,noteWidgetIndex:o,isEditingNote:s,setIsEditingNote:i,onUpdateNote:d,noteTextareaRef:p,onNoteTap:h}){const m=x=>{o!==null&&d(x)},g=x=>{o!==null&&d(x.target.value)};return u.jsxs("div",{className:"mb-3 group","data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1.5","data-textarea-header":"true",children:[u.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Note"}),s&&u.jsx(To,{value:r,onChange:m,textareaRef:p,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),s?u.jsx("textarea",{ref:p,value:r,onChange:g,onBlur:()=>i(!1),className:"w-full p-3 border rounded-lg text-base resize-none note-display",rows:Math.min(8,Math.max(3,r.split(`
`).length))}):u.jsx("div",{className:"w-full p-3 border rounded-lg text-base whitespace-pre-wrap break-words note-display",onDoubleClick:()=>i(!0),onTouchEnd:h,children:l})]})}function e2({show:r,previewImage:l,displayName:o,onImageClick:s,isExecuting:i,overallProgress:d,displayNodeProgress:p}){return!r||!l?null:u.jsxs("div",{className:"mb-3",children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Output Preview"}),u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:qn(l.filename,l.subfolder,l.type),alt:`${o} output`,className:"w-full h-auto rounded-lg border border-gray-100",loading:"lazy",onClick:s},"preview"),i&&d!==null&&u.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-lg flex items-end p-3",children:u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs text-white/90 mb-1",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[p,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-white/30 overflow-hidden",children:u.jsx("div",{className:"h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,p))}%`}})}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-white/90 mt-2 mb-1",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[d,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-white/30 overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,d))}%`}})})]})})]})]})}function t2({nodeId:r,displayName:l,isEditingLabel:o,labelValue:s,labelInputRef:i,onLabelChange:d,onLabelBlur:p,isCollapsed:h,isBypassed:m,isExecuting:g,overallProgress:x,hasErrors:v,errorIconRef:N,errorPopoverOpen:C,setErrorPopoverOpen:w,toggleNodeFold:S,rightSlot:M}){const j=()=>{o||S(r)},E=_=>{_.stopPropagation(),S(r)},z=_=>{_.stopPropagation(),w(!C)};return u.jsxs("div",{id:`node-header-${r}`,className:`node-header flex items-center justify-between cursor-pointer gap-3 ${h?"":"mb-3 pb-2 border-b"} ${m?`bg-purple-200 border-purple-300 px-3 -mx-3 -mt-1 pt-1 rounded-t-xl ${h?"pb-1 -mb-1 rounded-b-xl":""}`:h?"":"border-gray-100"}`,onClick:j,children:[u.jsxs("div",{id:`node-title-container-${r}`,className:"flex items-center gap-1 min-w-0",children:[u.jsx("button",{onClick:E,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-400 hover:text-gray-600 shrink-0",children:h?u.jsx(Il,{className:"w-6 h-6"}):u.jsx(Wn,{className:"w-6 h-6"})}),o?u.jsx("input",{ref:i,value:s,onChange:_=>d(_.target.value),onBlur:p,onKeyDown:_=>{(_.key==="Enter"||_.key==="Escape")&&_.currentTarget.blur()},onClick:_=>_.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{id:`node-display-name-${r}`,className:`font-semibold text-gray-900 select-none flex-1 min-w-0 ${h?"whitespace-nowrap overflow-hidden text-ellipsis":"whitespace-normal break-words"}`,children:l}),u.jsxs("span",{id:`node-id-badge-${r}`,className:"text-xs text-gray-400 min-w-[2ch] text-right",children:["#",r]}),v&&u.jsx("button",{ref:N,type:"button",onClick:z,className:"w-5 h-5 flex items-center justify-center text-red-500 hover:text-red-600 shrink-0","aria-label":"View errors",children:u.jsx(R0,{className:"w-4 h-4"})}),g&&h&&x!==null?u.jsxs("div",{id:`node-progress-indicator-${r}`,className:"relative w-6 h-6 flex items-center justify-center",children:[u.jsx(vb,{className:"absolute",width:"24",height:"24",style:{transform:"rotate(-90deg)"},progress:x,radius:10}),u.jsx("span",{id:`node-progress-text-${r}`,className:"text-[8px] font-bold text-blue-600",children:x})]}):null,g&&!h?u.jsx("span",{id:`node-executing-pulse-${r}`,className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}):null]}),u.jsx("div",{id:`node-header-right-slot-${r}`,className:"header-right-slot",children:M})]})}function lf({isOpen:r,title:l,onClose:o,children:s,headerActions:i}){return b.useEffect(()=>{if(r){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=d}}},[r]),r?lr.createPortal(u.jsx("div",{className:"fixed inset-0 z-[2100] bg-gray-400/40 dark:bg-black/50 backdrop-blur-sm safe-area-top",onClick:o,children:u.jsxs("div",{className:"w-full h-full flex flex-col",style:{paddingTop:"env(safe-area-inset-top, 0px)",paddingBottom:"var(--bottom-bar-offset, 0px)"},onClick:d=>d.stopPropagation(),children:[u.jsxs("div",{className:"bg-white dark:bg-[#151a23] p-4 border-b border-gray-200 dark:border-gray-800 shadow-sm relative z-50 min-h-0 overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200 truncate pr-4 pt-1 flex-1",children:l}),u.jsxs("div",{className:"flex items-center gap-2",children:[i,u.jsx("button",{onClick:o,className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Close",children:u.jsx(nf,{className:"w-6 h-6"})})]})]}),u.jsx("div",{className:"mt-2",children:s})]}),u.jsx("div",{className:"flex-1",onClick:o})]})}),document.body):null}function Ma({isPinned:r,onToggle:l}){if(!r||!l)return null;const o=s=>{s.preventDefault(),s.stopPropagation(),l()};return u.jsx("button",{type:"button",onClick:o,className:"flex items-center justify-center transition-colors text-fuchsia-500 hover:text-fuchsia-600","aria-label":"Remove pin",children:u.jsx(Do,{className:"w-5 h-5"})})}function I0(){return typeof window>"u"?!1:window.matchMedia("(pointer: coarse)").matches}function Og({containerClass:r,name:l,value:o,options:s,onChange:i,disabled:d=!1,hideLabel:p=!1,hasPin:h,isPinned:m=!1,onTogglePin:g,maxHeight:x,hasError:v=!1,forceModalOpen:N=!1,onModalClose:C}){const w=W=>{if(!Array.isArray(s))return s?.[W]},S=w("multiline"),M=w("placeholder"),j=String(o??""),E=W=>{i(W.target.value)},[z,_]=b.useState(!1),L=N||z,R=I0(),A=N||R,I=b.useRef(null),U=b.useRef(null);b.useLayoutEffect(()=>{if(!S)return;const W=I.current;W&&(W.style.height="0px",W.style.height=`${W.scrollHeight}px`)},[o,L,S]);const G=()=>{_(!1),C?.()};return A?u.jsxs("div",{className:r,children:[S?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between mb-1 min-h-[18px]",children:[p?u.jsx("span",{className:"block text-sm font-medium text-gray-700"}):u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:l}),u.jsx(To,{value:j,onChange:i,textareaRef:I,className:"opacity-100"})]}),u.jsxs("div",{className:`relative w-full p-3 comfy-input min-h-[100px] text-base group cursor-text ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-10":""} ${v?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&_(!0),children:[u.jsx("div",{className:"whitespace-pre-wrap break-words text-gray-900 dark:text-[#e5e7eb]",children:j||u.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:M})}),h&&u.jsx("div",{className:"absolute right-2 top-2 pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Ma,{isPinned:m,onToggle:g})})})]})]}):u.jsxs(u.Fragment,{children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),u.jsxs("div",{className:`relative w-full p-3 comfy-input text-base min-h-[46px] flex items-center cursor-text ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-16":"pr-6"} ${v?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&_(!0),children:[u.jsx("div",{className:"truncate min-w-0 flex-1 text-gray-900 dark:text-[#e5e7eb]",children:j||u.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:M})}),h&&u.jsx("div",{className:"absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto px-3",children:u.jsx(Ma,{isPinned:m,onToggle:g})})})]})]}),u.jsx(lf,{title:l,isOpen:L,onClose:G,headerActions:S?u.jsx(To,{value:j,onChange:i,textareaRef:I,className:"mr-2"}):null,children:S?u.jsx("textarea",{ref:I,value:j,onChange:W=>i(W.target.value),placeholder:M,className:"w-full p-3 border border-gray-300 rounded-lg min-h-[150px] text-base resize-none outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",autoFocus:!N,disabled:d}):u.jsx("input",{ref:U,type:"text",value:j,onChange:W=>i(W.target.value),placeholder:M,className:"w-full p-3 border border-gray-300 rounded-lg text-base outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",autoFocus:!N,disabled:d})})]}):S?u.jsxs("div",{className:`${r} group`,"data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1 min-h-[18px]","data-textarea-header":"true",children:[p?u.jsx("span",{className:"block text-sm font-medium text-gray-700"}):u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:l}),u.jsx(To,{value:j,onChange:i,textareaRef:I,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("textarea",{ref:I,value:j,onChange:E,placeholder:M,className:`w-full p-3 comfy-input min-h-[100px] text-base resize-none ${x?"overflow-auto":"overflow-hidden"} ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-10":""} ${v?"border-red-700 ring-1 ring-red-700":""}`,style:{overflowAnchor:"none",...x?{maxHeight:x}:{}},disabled:d}),h&&u.jsx("div",{className:"absolute right-2 top-2",children:u.jsx(Ma,{isPinned:m,onToggle:g})})]})]}):u.jsxs("div",{className:r,children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:String(o??""),onChange:W=>i(W.target.value),placeholder:M,className:`w-full p-3 comfy-input text-base ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-16":""} ${v?"border-red-700 ring-1 ring-red-700":""}`,disabled:d}),h&&u.jsx("div",{className:"absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto px-3",children:u.jsx(Ma,{isPinned:m,onToggle:g})})})]})]})}function zd({containerClass:r,name:l,value:o,options:s,onChange:i,disabled:d,type:p,min:h,max:m,step:g,isInt:x,hasError:v=!1}){const[N,C]=b.useState(String(o||0)),w=x??(p?p.toUpperCase()==="INT":Number.isInteger(o)),S=g??s?.step??(w?1:.1),M=h??(s?.min!==void 0?s.min:-1/0),j=m??(s?.max!==void 0?s.max:1/0);b.useEffect(()=>{C(String(o))},[o]);const E=A=>{C(A.target.value)},z=()=>{let A=w?parseInt(N,10):parseFloat(N);isNaN(A)&&(A=o),A=Math.max(M,Math.min(j,A)),i(A),C(String(A))},_=A=>{const I=(w?parseInt(N,10):parseFloat(N))||0,U=Math.max(M,Math.min(j,I+A));i(U)},L=[`number-input-field-${l}`,"w-full p-3 comfy-input text-base text-gray-900",d?"opacity-60 cursor-not-allowed":"",v?"border-red-700 ring-1 ring-red-700":""].filter(Boolean).join(" "),R=["w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 text-gray-700 flex-shrink-0",d?"opacity-60 cursor-not-allowed":"active:scale-95 transition-all"].filter(Boolean).join(" ");return u.jsxs("div",{className:`${r??""} number-control-${l}`,children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),u.jsxs("div",{className:`number-stepper-container-${l} flex items-center gap-2`,children:[u.jsx("input",{className:L,type:"number",value:N,onChange:E,onBlur:z,disabled:d,"aria-label":p?`${l} ${p}`:l}),u.jsx("button",{type:"button",onClick:()=>_(-S),className:R,"aria-label":"Decrease value",disabled:d,children:u.jsx(lb,{className:"w-4 h-4"})}),u.jsx("button",{type:"button",onClick:()=>_(S),className:R,"aria-label":"Increase value",disabled:d,children:u.jsx(tf,{className:"w-4 h-4"})})]})]})}function Ul(r){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},Ul(r)}function n2(r,l){if(Ul(r)!="object"||!r)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var s=o.call(r,l);if(Ul(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(r)}function H0(r){var l=n2(r,"string");return Ul(l)=="symbol"?l:l+""}function Eo(r,l,o){return(l=H0(l))in r?Object.defineProperty(r,l,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[l]=o,r}function Eg(r,l){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);l&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),o.push.apply(o,s)}return o}function Ue(r){for(var l=1;l<arguments.length;l++){var o=arguments[l]!=null?arguments[l]:{};l%2?Eg(Object(o),!0).forEach(function(s){Eo(r,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):Eg(Object(o)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(o,s))})}return r}function r2(r){if(Array.isArray(r))return r}function l2(r,l){var o=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(o!=null){var s,i,d,p,h=[],m=!0,g=!1;try{if(d=(o=o.call(r)).next,l===0){if(Object(o)!==o)return;m=!1}else for(;!(m=(s=d.call(o)).done)&&(h.push(s.value),h.length!==l);m=!0);}catch(x){g=!0,i=x}finally{try{if(!m&&o.return!=null&&(p=o.return(),Object(p)!==p))return}finally{if(g)throw i}}return h}}function Bd(r,l){(l==null||l>r.length)&&(l=r.length);for(var o=0,s=Array(l);o<l;o++)s[o]=r[o];return s}function V0(r,l){if(r){if(typeof r=="string")return Bd(r,l);var o={}.toString.call(r).slice(8,-1);return o==="Object"&&r.constructor&&(o=r.constructor.name),o==="Map"||o==="Set"?Array.from(r):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Bd(r,l):void 0}}function a2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qr(r,l){return r2(r)||l2(r,l)||V0(r,l)||a2()}function o2(r,l){if(r==null)return{};var o={};for(var s in r)if({}.hasOwnProperty.call(r,s)){if(l.indexOf(s)!==-1)continue;o[s]=r[s]}return o}function Yr(r,l){if(r==null)return{};var o,s,i=o2(r,l);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);for(s=0;s<d.length;s++)o=d[s],l.indexOf(o)===-1&&{}.propertyIsEnumerable.call(r,o)&&(i[o]=r[o])}return i}var s2=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function i2(r){var l=r.defaultInputValue,o=l===void 0?"":l,s=r.defaultMenuIsOpen,i=s===void 0?!1:s,d=r.defaultValue,p=d===void 0?null:d,h=r.inputValue,m=r.menuIsOpen,g=r.onChange,x=r.onInputChange,v=r.onMenuClose,N=r.onMenuOpen,C=r.value,w=Yr(r,s2),S=b.useState(h!==void 0?h:o),M=qr(S,2),j=M[0],E=M[1],z=b.useState(m!==void 0?m:i),_=qr(z,2),L=_[0],R=_[1],A=b.useState(C!==void 0?C:p),I=qr(A,2),U=I[0],G=I[1],W=b.useCallback(function(fe,be){typeof g=="function"&&g(fe,be),G(fe)},[g]),K=b.useCallback(function(fe,be){var ye;typeof x=="function"&&(ye=x(fe,be)),E(ye!==void 0?ye:fe)},[x]),ge=b.useCallback(function(){typeof N=="function"&&N(),R(!0)},[N]),ae=b.useCallback(function(){typeof v=="function"&&v(),R(!1)},[v]),re=h!==void 0?h:j,D=m!==void 0?m:L,$=C!==void 0?C:U;return Ue(Ue({},w),{},{inputValue:re,menuIsOpen:D,onChange:W,onInputChange:K,onMenuClose:ae,onMenuOpen:ge,value:$})}function Fe(){return Fe=Object.assign?Object.assign.bind():function(r){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var s in o)({}).hasOwnProperty.call(o,s)&&(r[s]=o[s])}return r},Fe.apply(null,arguments)}function u2(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")}function Tg(r,l){for(var o=0;o<l.length;o++){var s=l[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,H0(s.key),s)}}function c2(r,l,o){return l&&Tg(r.prototype,l),o&&Tg(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}function Id(r,l){return Id=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},Id(r,l)}function d2(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(l&&l.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),l&&Id(r,l)}function Ti(r){return Ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},Ti(r)}function U0(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U0=function(){return!!r})()}function f2(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function p2(r,l){if(l&&(Ul(l)=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f2(r)}function m2(r){var l=U0();return function(){var o,s=Ti(r);if(l){var i=Ti(this).constructor;o=Reflect.construct(s,arguments,i)}else o=s.apply(this,arguments);return p2(this,o)}}function h2(r){if(Array.isArray(r))return Bd(r)}function g2(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function x2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function af(r){return h2(r)||g2(r)||V0(r)||x2()}function y2(r){if(r.sheet)return r.sheet;for(var l=0;l<document.styleSheets.length;l++)if(document.styleSheets[l].ownerNode===r)return document.styleSheets[l]}function v2(r){var l=document.createElement("style");return l.setAttribute("data-emotion",r.key),r.nonce!==void 0&&l.setAttribute("nonce",r.nonce),l.appendChild(document.createTextNode("")),l.setAttribute("data-s",""),l}var b2=(function(){function r(o){var s=this;this._insertTag=function(i){var d;s.tags.length===0?s.insertionPoint?d=s.insertionPoint.nextSibling:s.prepend?d=s.container.firstChild:d=s.before:d=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(i,d),s.tags.push(i)},this.isSpeedy=o.speedy===void 0?!0:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var l=r.prototype;return l.hydrate=function(s){s.forEach(this._insertTag)},l.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(v2(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var d=y2(i);try{d.insertRule(s,d.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(s));this.ctr++},l.flush=function(){this.tags.forEach(function(s){var i;return(i=s.parentNode)==null?void 0:i.removeChild(s)}),this.tags=[],this.ctr=0},r})(),vn="-ms-",Li="-moz-",kt="-webkit-",G0="comm",of="rule",sf="decl",w2="@import",q0="@keyframes",S2="@layer",N2=Math.abs,qi=String.fromCharCode,j2=Object.assign;function C2(r,l){return xn(r,0)^45?(((l<<2^xn(r,0))<<2^xn(r,1))<<2^xn(r,2))<<2^xn(r,3):0}function W0(r){return r.trim()}function k2(r,l){return(r=l.exec(r))?r[0]:r}function Mt(r,l,o){return r.replace(l,o)}function Hd(r,l){return r.indexOf(l)}function xn(r,l){return r.charCodeAt(l)|0}function zo(r,l,o){return r.slice(l,o)}function xr(r){return r.length}function uf(r){return r.length}function ci(r,l){return l.push(r),r}function M2(r,l){return r.map(l).join("")}var Wi=1,La=1,F0=0,_n=0,rn=0,Aa="";function Fi(r,l,o,s,i,d,p){return{value:r,root:l,parent:o,type:s,props:i,children:d,line:Wi,column:La,length:p,return:""}}function Mo(r,l){return j2(Fi("",null,null,"",null,null,0),r,{length:-r.length},l)}function O2(){return rn}function E2(){return rn=_n>0?xn(Aa,--_n):0,La--,rn===10&&(La=1,Wi--),rn}function Fn(){return rn=_n<F0?xn(Aa,_n++):0,La++,rn===10&&(La=1,Wi++),rn}function vr(){return xn(Aa,_n)}function xi(){return _n}function Wo(r,l){return zo(Aa,r,l)}function Bo(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $0(r){return Wi=La=1,F0=xr(Aa=r),_n=0,[]}function Y0(r){return Aa="",r}function yi(r){return W0(Wo(_n-1,Vd(r===91?r+2:r===40?r+1:r)))}function T2(r){for(;(rn=vr())&&rn<33;)Fn();return Bo(r)>2||Bo(rn)>3?"":" "}function L2(r,l){for(;--l&&Fn()&&!(rn<48||rn>102||rn>57&&rn<65||rn>70&&rn<97););return Wo(r,xi()+(l<6&&vr()==32&&Fn()==32))}function Vd(r){for(;Fn();)switch(rn){case r:return _n;case 34:case 39:r!==34&&r!==39&&Vd(rn);break;case 40:r===41&&Vd(r);break;case 92:Fn();break}return _n}function _2(r,l){for(;Fn()&&r+rn!==57;)if(r+rn===84&&vr()===47)break;return"/*"+Wo(l,_n-1)+"*"+qi(r===47?r:Fn())}function A2(r){for(;!Bo(vr());)Fn();return Wo(r,_n)}function R2(r){return Y0(vi("",null,null,null,[""],r=$0(r),0,[0],r))}function vi(r,l,o,s,i,d,p,h,m){for(var g=0,x=0,v=p,N=0,C=0,w=0,S=1,M=1,j=1,E=0,z="",_=i,L=d,R=s,A=z;M;)switch(w=E,E=Fn()){case 40:if(w!=108&&xn(A,v-1)==58){Hd(A+=Mt(yi(E),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:A+=yi(E);break;case 9:case 10:case 13:case 32:A+=T2(w);break;case 92:A+=L2(xi()-1,7);continue;case 47:switch(vr()){case 42:case 47:ci(D2(_2(Fn(),xi()),l,o),m);break;default:A+="/"}break;case 123*S:h[g++]=xr(A)*j;case 125*S:case 59:case 0:switch(E){case 0:case 125:M=0;case 59+x:j==-1&&(A=Mt(A,/\f/g,"")),C>0&&xr(A)-v&&ci(C>32?_g(A+";",s,o,v-1):_g(Mt(A," ","")+";",s,o,v-2),m);break;case 59:A+=";";default:if(ci(R=Lg(A,l,o,g,x,i,h,z,_=[],L=[],v),d),E===123)if(x===0)vi(A,l,R,R,_,d,v,h,L);else switch(N===99&&xn(A,3)===110?100:N){case 100:case 108:case 109:case 115:vi(r,R,R,s&&ci(Lg(r,R,R,0,0,i,h,z,i,_=[],v),L),i,L,v,h,s?_:L);break;default:vi(A,R,R,R,[""],L,0,h,L)}}g=x=C=0,S=j=1,z=A="",v=p;break;case 58:v=1+xr(A),C=w;default:if(S<1){if(E==123)--S;else if(E==125&&S++==0&&E2()==125)continue}switch(A+=qi(E),E*S){case 38:j=x>0?1:(A+="\f",-1);break;case 44:h[g++]=(xr(A)-1)*j,j=1;break;case 64:vr()===45&&(A+=yi(Fn())),N=vr(),x=v=xr(z=A+=A2(xi())),E++;break;case 45:w===45&&xr(A)==2&&(S=0)}}return d}function Lg(r,l,o,s,i,d,p,h,m,g,x){for(var v=i-1,N=i===0?d:[""],C=uf(N),w=0,S=0,M=0;w<s;++w)for(var j=0,E=zo(r,v+1,v=N2(S=p[w])),z=r;j<C;++j)(z=W0(S>0?N[j]+" "+E:Mt(E,/&\f/g,N[j])))&&(m[M++]=z);return Fi(r,l,o,i===0?of:h,m,g,x)}function D2(r,l,o){return Fi(r,l,o,G0,qi(O2()),zo(r,2,-2),0)}function _g(r,l,o,s){return Fi(r,l,o,sf,zo(r,0,s),zo(r,s+1,-1),s)}function Ta(r,l){for(var o="",s=uf(r),i=0;i<s;i++)o+=l(r[i],i,r,l)||"";return o}function z2(r,l,o,s){switch(r.type){case S2:if(r.children.length)break;case w2:case sf:return r.return=r.return||r.value;case G0:return"";case q0:return r.return=r.value+"{"+Ta(r.children,s)+"}";case of:r.value=r.props.join(",")}return xr(o=Ta(r.children,s))?r.return=r.value+"{"+o+"}":""}function B2(r){var l=uf(r);return function(o,s,i,d){for(var p="",h=0;h<l;h++)p+=r[h](o,s,i,d)||"";return p}}function I2(r){return function(l){l.root||(l=l.return)&&r(l)}}function H2(r){var l=Object.create(null);return function(o){return l[o]===void 0&&(l[o]=r(o)),l[o]}}var V2=function(l,o,s){for(var i=0,d=0;i=d,d=vr(),i===38&&d===12&&(o[s]=1),!Bo(d);)Fn();return Wo(l,_n)},U2=function(l,o){var s=-1,i=44;do switch(Bo(i)){case 0:i===38&&vr()===12&&(o[s]=1),l[s]+=V2(_n-1,o,s);break;case 2:l[s]+=yi(i);break;case 4:if(i===44){l[++s]=vr()===58?"&\f":"",o[s]=l[s].length;break}default:l[s]+=qi(i)}while(i=Fn());return l},G2=function(l,o){return Y0(U2($0(l),o))},Ag=new WeakMap,q2=function(l){if(!(l.type!=="rule"||!l.parent||l.length<1)){for(var o=l.value,s=l.parent,i=l.column===s.column&&l.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(l.props.length===1&&o.charCodeAt(0)!==58&&!Ag.get(s))&&!i){Ag.set(l,!0);for(var d=[],p=G2(o,d),h=s.props,m=0,g=0;m<p.length;m++)for(var x=0;x<h.length;x++,g++)l.props[g]=d[m]?p[m].replace(/&\f/g,h[x]):h[x]+" "+p[m]}}},W2=function(l){if(l.type==="decl"){var o=l.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(l.return="",l.value="")}};function Q0(r,l){switch(C2(r,l)){case 5103:return kt+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return kt+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return kt+r+Li+r+vn+r+r;case 6828:case 4268:return kt+r+vn+r+r;case 6165:return kt+r+vn+"flex-"+r+r;case 5187:return kt+r+Mt(r,/(\w+).+(:[^]+)/,kt+"box-$1$2"+vn+"flex-$1$2")+r;case 5443:return kt+r+vn+"flex-item-"+Mt(r,/flex-|-self/,"")+r;case 4675:return kt+r+vn+"flex-line-pack"+Mt(r,/align-content|flex-|-self/,"")+r;case 5548:return kt+r+vn+Mt(r,"shrink","negative")+r;case 5292:return kt+r+vn+Mt(r,"basis","preferred-size")+r;case 6060:return kt+"box-"+Mt(r,"-grow","")+kt+r+vn+Mt(r,"grow","positive")+r;case 4554:return kt+Mt(r,/([^-])(transform)/g,"$1"+kt+"$2")+r;case 6187:return Mt(Mt(Mt(r,/(zoom-|grab)/,kt+"$1"),/(image-set)/,kt+"$1"),r,"")+r;case 5495:case 3959:return Mt(r,/(image-set\([^]*)/,kt+"$1$`$1");case 4968:return Mt(Mt(r,/(.+:)(flex-)?(.*)/,kt+"box-pack:$3"+vn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+kt+r+r;case 4095:case 3583:case 4068:case 2532:return Mt(r,/(.+)-inline(.+)/,kt+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xr(r)-1-l>6)switch(xn(r,l+1)){case 109:if(xn(r,l+4)!==45)break;case 102:return Mt(r,/(.+:)(.+)-([^]+)/,"$1"+kt+"$2-$3$1"+Li+(xn(r,l+3)==108?"$3":"$2-$3"))+r;case 115:return~Hd(r,"stretch")?Q0(Mt(r,"stretch","fill-available"),l)+r:r}break;case 4949:if(xn(r,l+1)!==115)break;case 6444:switch(xn(r,xr(r)-3-(~Hd(r,"!important")&&10))){case 107:return Mt(r,":",":"+kt)+r;case 101:return Mt(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+kt+(xn(r,14)===45?"inline-":"")+"box$3$1"+kt+"$2$3$1"+vn+"$2box$3")+r}break;case 5936:switch(xn(r,l+11)){case 114:return kt+r+vn+Mt(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return kt+r+vn+Mt(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return kt+r+vn+Mt(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return kt+r+vn+r+r}return r}var F2=function(l,o,s,i){if(l.length>-1&&!l.return)switch(l.type){case sf:l.return=Q0(l.value,l.length);break;case q0:return Ta([Mo(l,{value:Mt(l.value,"@","@"+kt)})],i);case of:if(l.length)return M2(l.props,function(d){switch(k2(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ta([Mo(l,{props:[Mt(d,/:(read-\w+)/,":"+Li+"$1")]})],i);case"::placeholder":return Ta([Mo(l,{props:[Mt(d,/:(plac\w+)/,":"+kt+"input-$1")]}),Mo(l,{props:[Mt(d,/:(plac\w+)/,":"+Li+"$1")]}),Mo(l,{props:[Mt(d,/:(plac\w+)/,vn+"input-$1")]})],i)}return""})}},$2=[F2],Y2=function(l){var o=l.key;if(o==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(S){var M=S.getAttribute("data-emotion");M.indexOf(" ")!==-1&&(document.head.appendChild(S),S.setAttribute("data-s",""))})}var i=l.stylisPlugins||$2,d={},p,h=[];p=l.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(S){for(var M=S.getAttribute("data-emotion").split(" "),j=1;j<M.length;j++)d[M[j]]=!0;h.push(S)});var m,g=[q2,W2];{var x,v=[z2,I2(function(S){x.insert(S)})],N=B2(g.concat(i,v)),C=function(M){return Ta(R2(M),N)};m=function(M,j,E,z){x=E,C(M?M+"{"+j.styles+"}":j.styles),z&&(w.inserted[j.name]=!0)}}var w={key:o,sheet:new b2({key:o,container:p,nonce:l.nonce,speedy:l.speedy,prepend:l.prepend,insertionPoint:l.insertionPoint}),nonce:l.nonce,inserted:d,registered:{},insert:m};return w.sheet.hydrate(h),w},cd={exports:{}},Ot={};var Rg;function Q2(){if(Rg)return Ot;Rg=1;var r=typeof Symbol=="function"&&Symbol.for,l=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,d=r?Symbol.for("react.profiler"):60114,p=r?Symbol.for("react.provider"):60109,h=r?Symbol.for("react.context"):60110,m=r?Symbol.for("react.async_mode"):60111,g=r?Symbol.for("react.concurrent_mode"):60111,x=r?Symbol.for("react.forward_ref"):60112,v=r?Symbol.for("react.suspense"):60113,N=r?Symbol.for("react.suspense_list"):60120,C=r?Symbol.for("react.memo"):60115,w=r?Symbol.for("react.lazy"):60116,S=r?Symbol.for("react.block"):60121,M=r?Symbol.for("react.fundamental"):60117,j=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function z(L){if(typeof L=="object"&&L!==null){var R=L.$$typeof;switch(R){case l:switch(L=L.type,L){case m:case g:case s:case d:case i:case v:return L;default:switch(L=L&&L.$$typeof,L){case h:case x:case w:case C:case p:return L;default:return R}}case o:return R}}}function _(L){return z(L)===g}return Ot.AsyncMode=m,Ot.ConcurrentMode=g,Ot.ContextConsumer=h,Ot.ContextProvider=p,Ot.Element=l,Ot.ForwardRef=x,Ot.Fragment=s,Ot.Lazy=w,Ot.Memo=C,Ot.Portal=o,Ot.Profiler=d,Ot.StrictMode=i,Ot.Suspense=v,Ot.isAsyncMode=function(L){return _(L)||z(L)===m},Ot.isConcurrentMode=_,Ot.isContextConsumer=function(L){return z(L)===h},Ot.isContextProvider=function(L){return z(L)===p},Ot.isElement=function(L){return typeof L=="object"&&L!==null&&L.$$typeof===l},Ot.isForwardRef=function(L){return z(L)===x},Ot.isFragment=function(L){return z(L)===s},Ot.isLazy=function(L){return z(L)===w},Ot.isMemo=function(L){return z(L)===C},Ot.isPortal=function(L){return z(L)===o},Ot.isProfiler=function(L){return z(L)===d},Ot.isStrictMode=function(L){return z(L)===i},Ot.isSuspense=function(L){return z(L)===v},Ot.isValidElementType=function(L){return typeof L=="string"||typeof L=="function"||L===s||L===g||L===d||L===i||L===v||L===N||typeof L=="object"&&L!==null&&(L.$$typeof===w||L.$$typeof===C||L.$$typeof===p||L.$$typeof===h||L.$$typeof===x||L.$$typeof===M||L.$$typeof===j||L.$$typeof===E||L.$$typeof===S)},Ot.typeOf=z,Ot}var Dg;function X2(){return Dg||(Dg=1,cd.exports=Q2()),cd.exports}var dd,zg;function P2(){if(zg)return dd;zg=1;var r=X2(),l={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},d={};d[r.ForwardRef]=s,d[r.Memo]=i;function p(w){return r.isMemo(w)?i:d[w.$$typeof]||l}var h=Object.defineProperty,m=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,x=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,N=Object.prototype;function C(w,S,M){if(typeof S!="string"){if(N){var j=v(S);j&&j!==N&&C(w,j,M)}var E=m(S);g&&(E=E.concat(g(S)));for(var z=p(w),_=p(S),L=0;L<E.length;++L){var R=E[L];if(!o[R]&&!(M&&M[R])&&!(_&&_[R])&&!(z&&z[R])){var A=x(S,R);try{h(w,R,A)}catch{}}}}return w}return dd=C,dd}P2();var Z2=!0;function K2(r,l,o){var s="";return o.split(" ").forEach(function(i){r[i]!==void 0?l.push(r[i]+";"):i&&(s+=i+" ")}),s}var X0=function(l,o,s){var i=l.key+"-"+o.name;(s===!1||Z2===!1)&&l.registered[i]===void 0&&(l.registered[i]=o.styles)},J2=function(l,o,s){X0(l,o,s);var i=l.key+"-"+o.name;if(l.inserted[o.name]===void 0){var d=o;do l.insert(o===d?"."+i:"",d,l.sheet,!0),d=d.next;while(d!==void 0)}};function ew(r){for(var l=0,o,s=0,i=r.length;i>=4;++s,i-=4)o=r.charCodeAt(s)&255|(r.charCodeAt(++s)&255)<<8|(r.charCodeAt(++s)&255)<<16|(r.charCodeAt(++s)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,l=(o&65535)*1540483477+((o>>>16)*59797<<16)^(l&65535)*1540483477+((l>>>16)*59797<<16);switch(i){case 3:l^=(r.charCodeAt(s+2)&255)<<16;case 2:l^=(r.charCodeAt(s+1)&255)<<8;case 1:l^=r.charCodeAt(s)&255,l=(l&65535)*1540483477+((l>>>16)*59797<<16)}return l^=l>>>13,l=(l&65535)*1540483477+((l>>>16)*59797<<16),((l^l>>>15)>>>0).toString(36)}var tw={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},nw=/[A-Z]|^ms/g,rw=/_EMO_([^_]+?)_([^]*?)_EMO_/g,P0=function(l){return l.charCodeAt(1)===45},Bg=function(l){return l!=null&&typeof l!="boolean"},fd=H2(function(r){return P0(r)?r:r.replace(nw,"-$&").toLowerCase()}),Ig=function(l,o){switch(l){case"animation":case"animationName":if(typeof o=="string")return o.replace(rw,function(s,i,d){return yr={name:i,styles:d,next:yr},i})}return tw[l]!==1&&!P0(l)&&typeof o=="number"&&o!==0?o+"px":o};function Io(r,l,o){if(o==null)return"";var s=o;if(s.__emotion_styles!==void 0)return s;switch(typeof o){case"boolean":return"";case"object":{var i=o;if(i.anim===1)return yr={name:i.name,styles:i.styles,next:yr},i.name;var d=o;if(d.styles!==void 0){var p=d.next;if(p!==void 0)for(;p!==void 0;)yr={name:p.name,styles:p.styles,next:yr},p=p.next;var h=d.styles+";";return h}return lw(r,l,o)}case"function":{if(r!==void 0){var m=yr,g=o(r);return yr=m,Io(r,l,g)}break}}var x=o;return x}function lw(r,l,o){var s="";if(Array.isArray(o))for(var i=0;i<o.length;i++)s+=Io(r,l,o[i])+";";else for(var d in o){var p=o[d];if(typeof p!="object"){var h=p;Bg(h)&&(s+=fd(d)+":"+Ig(d,h)+";")}else if(Array.isArray(p)&&typeof p[0]=="string"&&l==null)for(var m=0;m<p.length;m++)Bg(p[m])&&(s+=fd(d)+":"+Ig(d,p[m])+";");else{var g=Io(r,l,p);switch(d){case"animation":case"animationName":{s+=fd(d)+":"+g+";";break}default:s+=d+"{"+g+"}"}}}return s}var Hg=/label:\s*([^\s;{]+)\s*(;|$)/g,yr;function Z0(r,l,o){if(r.length===1&&typeof r[0]=="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var s=!0,i="";yr=void 0;var d=r[0];if(d==null||d.raw===void 0)s=!1,i+=Io(o,l,d);else{var p=d;i+=p[0]}for(var h=1;h<r.length;h++)if(i+=Io(o,l,r[h]),s){var m=d;i+=m[h]}Hg.lastIndex=0;for(var g="",x;(x=Hg.exec(i))!==null;)g+="-"+x[1];var v=ew(i)+g;return{name:v,styles:i,next:yr}}var aw=function(l){return l()},ow=lg.useInsertionEffect?lg.useInsertionEffect:!1,sw=ow||aw,K0=b.createContext(typeof HTMLElement<"u"?Y2({key:"css"}):null);K0.Provider;var iw=function(l){return b.forwardRef(function(o,s){var i=b.useContext(K0);return l(o,i,s)})},uw=b.createContext({}),cf={}.hasOwnProperty,Ud="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",cw=function(l,o){var s={};for(var i in o)cf.call(o,i)&&(s[i]=o[i]);return s[Ud]=l,s},dw=function(l){var o=l.cache,s=l.serialized,i=l.isStringTag;return X0(o,s,i),sw(function(){return J2(o,s,i)}),null},fw=iw(function(r,l,o){var s=r.css;typeof s=="string"&&l.registered[s]!==void 0&&(s=l.registered[s]);var i=r[Ud],d=[s],p="";typeof r.className=="string"?p=K2(l.registered,d,r.className):r.className!=null&&(p=r.className+" ");var h=Z0(d,void 0,b.useContext(uw));p+=l.key+"-"+h.name;var m={};for(var g in r)cf.call(r,g)&&g!=="css"&&g!==Ud&&(m[g]=r[g]);return m.className=p,o&&(m.ref=o),b.createElement(b.Fragment,null,b.createElement(dw,{cache:l,serialized:h,isStringTag:typeof i=="string"}),b.createElement(i,m))}),pw=fw,He=function(l,o){var s=arguments;if(o==null||!cf.call(o,"css"))return b.createElement.apply(void 0,s);var i=s.length,d=new Array(i);d[0]=pw,d[1]=cw(l,o);for(var p=2;p<i;p++)d[p]=s[p];return b.createElement.apply(null,d)};(function(r){var l;l||(l=r.JSX||(r.JSX={}))})(He||(He={}));function df(){for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return Z0(l)}function mw(){var r=df.apply(void 0,arguments),l="animation-"+r.name;return{name:l,styles:"@keyframes "+l+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function hw(r,l){return l||(l=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(l)}}))}const gw=Math.min,xw=Math.max,_i=Math.round,di=Math.floor,Ai=r=>({x:r,y:r});function yw(r){const{x:l,y:o,width:s,height:i}=r;return{width:s,height:i,top:o,left:l,right:l+s,bottom:o+i,x:l,y:o}}function $i(){return typeof window<"u"}function J0(r){return tx(r)?(r.nodeName||"").toLowerCase():"#document"}function Wr(r){var l;return(r==null||(l=r.ownerDocument)==null?void 0:l.defaultView)||window}function ex(r){var l;return(l=(tx(r)?r.ownerDocument:r.document)||window.document)==null?void 0:l.documentElement}function tx(r){return $i()?r instanceof Node||r instanceof Wr(r).Node:!1}function vw(r){return $i()?r instanceof Element||r instanceof Wr(r).Element:!1}function ff(r){return $i()?r instanceof HTMLElement||r instanceof Wr(r).HTMLElement:!1}function Vg(r){return!$i()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Wr(r).ShadowRoot}const bw=new Set(["inline","contents"]);function nx(r){const{overflow:l,overflowX:o,overflowY:s,display:i}=pf(r);return/auto|scroll|overlay|hidden|clip/.test(l+s+o)&&!bw.has(i)}function ww(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Sw=new Set(["html","body","#document"]);function Nw(r){return Sw.has(J0(r))}function pf(r){return Wr(r).getComputedStyle(r)}function jw(r){if(J0(r)==="html")return r;const l=r.assignedSlot||r.parentNode||Vg(r)&&r.host||ex(r);return Vg(l)?l.host:l}function rx(r){const l=jw(r);return Nw(l)?r.ownerDocument?r.ownerDocument.body:r.body:ff(l)&&nx(l)?l:rx(l)}function Ri(r,l,o){var s;l===void 0&&(l=[]),o===void 0&&(o=!0);const i=rx(r),d=i===((s=r.ownerDocument)==null?void 0:s.body),p=Wr(i);if(d){const h=Gd(p);return l.concat(p,p.visualViewport||[],nx(i)?i:[],h&&o?Ri(h):[])}return l.concat(i,Ri(i,[],o))}function Gd(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function Cw(r){const l=pf(r);let o=parseFloat(l.width)||0,s=parseFloat(l.height)||0;const i=ff(r),d=i?r.offsetWidth:o,p=i?r.offsetHeight:s,h=_i(o)!==d||_i(s)!==p;return h&&(o=d,s=p),{width:o,height:s,$:h}}function mf(r){return vw(r)?r:r.contextElement}function Ug(r){const l=mf(r);if(!ff(l))return Ai(1);const o=l.getBoundingClientRect(),{width:s,height:i,$:d}=Cw(l);let p=(d?_i(o.width):o.width)/s,h=(d?_i(o.height):o.height)/i;return(!p||!Number.isFinite(p))&&(p=1),(!h||!Number.isFinite(h))&&(h=1),{x:p,y:h}}const kw=Ai(0);function Mw(r){const l=Wr(r);return!ww()||!l.visualViewport?kw:{x:l.visualViewport.offsetLeft,y:l.visualViewport.offsetTop}}function Ow(r,l,o){return!1}function Gg(r,l,o,s){l===void 0&&(l=!1);const i=r.getBoundingClientRect(),d=mf(r);let p=Ai(1);l&&(p=Ug(r));const h=Ow()?Mw(d):Ai(0);let m=(i.left+h.x)/p.x,g=(i.top+h.y)/p.y,x=i.width/p.x,v=i.height/p.y;if(d){const N=Wr(d),C=s;let w=N,S=Gd(w);for(;S&&s&&C!==w;){const M=Ug(S),j=S.getBoundingClientRect(),E=pf(S),z=j.left+(S.clientLeft+parseFloat(E.paddingLeft))*M.x,_=j.top+(S.clientTop+parseFloat(E.paddingTop))*M.y;m*=M.x,g*=M.y,x*=M.x,v*=M.y,m+=z,g+=_,w=Wr(S),S=Gd(w)}}return yw({width:x,height:v,x:m,y:g})}function lx(r,l){return r.x===l.x&&r.y===l.y&&r.width===l.width&&r.height===l.height}function Ew(r,l){let o=null,s;const i=ex(r);function d(){var h;clearTimeout(s),(h=o)==null||h.disconnect(),o=null}function p(h,m){h===void 0&&(h=!1),m===void 0&&(m=1),d();const g=r.getBoundingClientRect(),{left:x,top:v,width:N,height:C}=g;if(h||l(),!N||!C)return;const w=di(v),S=di(i.clientWidth-(x+N)),M=di(i.clientHeight-(v+C)),j=di(x),z={rootMargin:-w+"px "+-S+"px "+-M+"px "+-j+"px",threshold:xw(0,gw(1,m))||1};let _=!0;function L(R){const A=R[0].intersectionRatio;if(A!==m){if(!_)return p();A?p(!1,A):s=setTimeout(()=>{p(!1,1e-7)},1e3)}A===1&&!lx(g,r.getBoundingClientRect())&&p(),_=!1}try{o=new IntersectionObserver(L,{...z,root:i.ownerDocument})}catch{o=new IntersectionObserver(L,z)}o.observe(r)}return p(!0),d}function Tw(r,l,o,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:d=!0,elementResize:p=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:m=!1}=s,g=mf(r),x=i||d?[...g?Ri(g):[],...Ri(l)]:[];x.forEach(j=>{i&&j.addEventListener("scroll",o,{passive:!0}),d&&j.addEventListener("resize",o)});const v=g&&h?Ew(g,o):null;let N=-1,C=null;p&&(C=new ResizeObserver(j=>{let[E]=j;E&&E.target===g&&C&&(C.unobserve(l),cancelAnimationFrame(N),N=requestAnimationFrame(()=>{var z;(z=C)==null||z.observe(l)})),o()}),g&&!m&&C.observe(g),C.observe(l));let w,S=m?Gg(r):null;m&&M();function M(){const j=Gg(r);S&&!lx(S,j)&&o(),S=j,w=requestAnimationFrame(M)}return o(),()=>{var j;x.forEach(E=>{i&&E.removeEventListener("scroll",o),d&&E.removeEventListener("resize",o)}),v?.(),(j=C)==null||j.disconnect(),C=null,m&&cancelAnimationFrame(w)}}var qd=b.useLayoutEffect,Lw=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Di=function(){};function _w(r,l){return l?l[0]==="-"?r+l:r+"__"+l:r}function Aw(r,l){for(var o=arguments.length,s=new Array(o>2?o-2:0),i=2;i<o;i++)s[i-2]=arguments[i];var d=[].concat(s);if(l&&r)for(var p in l)l.hasOwnProperty(p)&&l[p]&&d.push("".concat(_w(r,p)));return d.filter(function(h){return h}).map(function(h){return String(h).trim()}).join(" ")}var qg=function(l){return Gw(l)?l.filter(Boolean):Ul(l)==="object"&&l!==null?[l]:[]},ax=function(l){l.className,l.clearValue,l.cx,l.getStyles,l.getClassNames,l.getValue,l.hasValue,l.isMulti,l.isRtl,l.options,l.selectOption,l.selectProps,l.setValue,l.theme;var o=Yr(l,Lw);return Ue({},o)},Yt=function(l,o,s){var i=l.cx,d=l.getStyles,p=l.getClassNames,h=l.className;return{css:d(o,l),className:i(s??{},p(o,l),h)}};function Yi(r){return[document.documentElement,document.body,window].indexOf(r)>-1}function Rw(r){return Yi(r)?window.innerHeight:r.clientHeight}function ox(r){return Yi(r)?window.pageYOffset:r.scrollTop}function zi(r,l){if(Yi(r)){window.scrollTo(0,l);return}r.scrollTop=l}function Dw(r){var l=getComputedStyle(r),o=l.position==="absolute",s=/(auto|scroll)/;if(l.position==="fixed")return document.documentElement;for(var i=r;i=i.parentElement;)if(l=getComputedStyle(i),!(o&&l.position==="static")&&s.test(l.overflow+l.overflowY+l.overflowX))return i;return document.documentElement}function zw(r,l,o,s){return o*((r=r/s-1)*r*r+1)+l}function fi(r,l){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Di,i=ox(r),d=l-i,p=10,h=0;function m(){h+=p;var g=zw(h,i,d,o);zi(r,g),h<o?window.requestAnimationFrame(m):s(r)}m()}function Wg(r,l){var o=r.getBoundingClientRect(),s=l.getBoundingClientRect(),i=l.offsetHeight/3;s.bottom+i>o.bottom?zi(r,Math.min(l.offsetTop+l.clientHeight-r.offsetHeight+i,r.scrollHeight)):s.top-i<o.top&&zi(r,Math.max(l.offsetTop-i,0))}function Bw(r){var l=r.getBoundingClientRect();return{bottom:l.bottom,height:l.height,left:l.left,right:l.right,top:l.top,width:l.width}}function Fg(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Iw(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var sx=!1,Hw={get passive(){return sx=!0}},pi=typeof window<"u"?window:{};pi.addEventListener&&pi.removeEventListener&&(pi.addEventListener("p",Di,Hw),pi.removeEventListener("p",Di,!1));var Vw=sx;function Uw(r){return r!=null}function Gw(r){return Array.isArray(r)}function mi(r,l,o){return r?l:o}var qw=function(l){for(var o=arguments.length,s=new Array(o>1?o-1:0),i=1;i<o;i++)s[i-1]=arguments[i];var d=Object.entries(l).filter(function(p){var h=qr(p,1),m=h[0];return!s.includes(m)});return d.reduce(function(p,h){var m=qr(h,2),g=m[0],x=m[1];return p[g]=x,p},{})},Ww=["children","innerProps"],Fw=["children","innerProps"];function $w(r){var l=r.maxHeight,o=r.menuEl,s=r.minHeight,i=r.placement,d=r.shouldScroll,p=r.isFixedPosition,h=r.controlHeight,m=Dw(o),g={placement:"bottom",maxHeight:l};if(!o||!o.offsetParent)return g;var x=m.getBoundingClientRect(),v=x.height,N=o.getBoundingClientRect(),C=N.bottom,w=N.height,S=N.top,M=o.offsetParent.getBoundingClientRect(),j=M.top,E=p?window.innerHeight:Rw(m),z=ox(m),_=parseInt(getComputedStyle(o).marginBottom,10),L=parseInt(getComputedStyle(o).marginTop,10),R=j-L,A=E-S,I=R+z,U=v-z-S,G=C-E+z+_,W=z+S-L,K=160;switch(i){case"auto":case"bottom":if(A>=w)return{placement:"bottom",maxHeight:l};if(U>=w&&!p)return d&&fi(m,G,K),{placement:"bottom",maxHeight:l};if(!p&&U>=s||p&&A>=s){d&&fi(m,G,K);var ge=p?A-_:U-_;return{placement:"bottom",maxHeight:ge}}if(i==="auto"||p){var ae=l,re=p?R:I;return re>=s&&(ae=Math.min(re-_-h,l)),{placement:"top",maxHeight:ae}}if(i==="bottom")return d&&zi(m,G),{placement:"bottom",maxHeight:l};break;case"top":if(R>=w)return{placement:"top",maxHeight:l};if(I>=w&&!p)return d&&fi(m,W,K),{placement:"top",maxHeight:l};if(!p&&I>=s||p&&R>=s){var D=l;return(!p&&I>=s||p&&R>=s)&&(D=p?R-L:I-L),d&&fi(m,W,K),{placement:"top",maxHeight:D}}return{placement:"bottom",maxHeight:l};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return g}function Yw(r){var l={bottom:"top",top:"bottom"};return r?l[r]:"bottom"}var ix=function(l){return l==="auto"?"bottom":l},Qw=function(l,o){var s,i=l.placement,d=l.theme,p=d.borderRadius,h=d.spacing,m=d.colors;return Ue((s={label:"menu"},Eo(s,Yw(i),"100%"),Eo(s,"position","absolute"),Eo(s,"width","100%"),Eo(s,"zIndex",1),s),o?{}:{backgroundColor:m.neutral0,borderRadius:p,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:h.menuGutter,marginTop:h.menuGutter})},ux=b.createContext(null),Xw=function(l){var o=l.children,s=l.minMenuHeight,i=l.maxMenuHeight,d=l.menuPlacement,p=l.menuPosition,h=l.menuShouldScrollIntoView,m=l.theme,g=b.useContext(ux)||{},x=g.setPortalPlacement,v=b.useRef(null),N=b.useState(i),C=qr(N,2),w=C[0],S=C[1],M=b.useState(null),j=qr(M,2),E=j[0],z=j[1],_=m.spacing.controlHeight;return qd(function(){var L=v.current;if(L){var R=p==="fixed",A=h&&!R,I=$w({maxHeight:i,menuEl:L,minHeight:s,placement:d,shouldScroll:A,isFixedPosition:R,controlHeight:_});S(I.maxHeight),z(I.placement),x?.(I.placement)}},[i,d,p,h,s,x,_]),o({ref:v,placerProps:Ue(Ue({},l),{},{placement:E||ix(d),maxHeight:w})})},Pw=function(l){var o=l.children,s=l.innerRef,i=l.innerProps;return He("div",Fe({},Yt(l,"menu",{menu:!0}),{ref:s},i),o)},Zw=Pw,Kw=function(l,o){var s=l.maxHeight,i=l.theme.spacing.baseUnit;return Ue({maxHeight:s,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},o?{}:{paddingBottom:i,paddingTop:i})},Jw=function(l){var o=l.children,s=l.innerProps,i=l.innerRef,d=l.isMulti;return He("div",Fe({},Yt(l,"menuList",{"menu-list":!0,"menu-list--is-multi":d}),{ref:i},s),o)},cx=function(l,o){var s=l.theme,i=s.spacing.baseUnit,d=s.colors;return Ue({textAlign:"center"},o?{}:{color:d.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},eS=cx,tS=cx,nS=function(l){var o=l.children,s=o===void 0?"No options":o,i=l.innerProps,d=Yr(l,Ww);return He("div",Fe({},Yt(Ue(Ue({},d),{},{children:s,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),s)},rS=function(l){var o=l.children,s=o===void 0?"Loading...":o,i=l.innerProps,d=Yr(l,Fw);return He("div",Fe({},Yt(Ue(Ue({},d),{},{children:s,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),s)},lS=function(l){var o=l.rect,s=l.offset,i=l.position;return{left:o.left,position:i,top:s,width:o.width,zIndex:1}},aS=function(l){var o=l.appendTo,s=l.children,i=l.controlElement,d=l.innerProps,p=l.menuPlacement,h=l.menuPosition,m=b.useRef(null),g=b.useRef(null),x=b.useState(ix(p)),v=qr(x,2),N=v[0],C=v[1],w=b.useMemo(function(){return{setPortalPlacement:C}},[]),S=b.useState(null),M=qr(S,2),j=M[0],E=M[1],z=b.useCallback(function(){if(i){var A=Bw(i),I=h==="fixed"?0:window.pageYOffset,U=A[N]+I;(U!==j?.offset||A.left!==j?.rect.left||A.width!==j?.rect.width)&&E({offset:U,rect:A})}},[i,h,N,j?.offset,j?.rect.left,j?.rect.width]);qd(function(){z()},[z]);var _=b.useCallback(function(){typeof g.current=="function"&&(g.current(),g.current=null),i&&m.current&&(g.current=Tw(i,m.current,z,{elementResize:"ResizeObserver"in window}))},[i,z]);qd(function(){_()},[_]);var L=b.useCallback(function(A){m.current=A,_()},[_]);if(!o&&h!=="fixed"||!j)return null;var R=He("div",Fe({ref:L},Yt(Ue(Ue({},l),{},{offset:j.offset,position:h,rect:j.rect}),"menuPortal",{"menu-portal":!0}),d),s);return He(ux.Provider,{value:w},o?lr.createPortal(R,o):R)},oS=function(l){var o=l.isDisabled,s=l.isRtl;return{label:"container",direction:s?"rtl":void 0,pointerEvents:o?"none":void 0,position:"relative"}},sS=function(l){var o=l.children,s=l.innerProps,i=l.isDisabled,d=l.isRtl;return He("div",Fe({},Yt(l,"container",{"--is-disabled":i,"--is-rtl":d}),s),o)},iS=function(l,o){var s=l.theme.spacing,i=l.isMulti,d=l.hasValue,p=l.selectProps.controlShouldRenderValue;return Ue({alignItems:"center",display:i&&d&&p?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},o?{}:{padding:"".concat(s.baseUnit/2,"px ").concat(s.baseUnit*2,"px")})},uS=function(l){var o=l.children,s=l.innerProps,i=l.isMulti,d=l.hasValue;return He("div",Fe({},Yt(l,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":d}),s),o)},cS=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},dS=function(l){var o=l.children,s=l.innerProps;return He("div",Fe({},Yt(l,"indicatorsContainer",{indicators:!0}),s),o)},$g,fS=["size"],pS=["innerProps","isRtl","size"],mS={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},dx=function(l){var o=l.size,s=Yr(l,fS);return He("svg",Fe({height:o,width:o,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:mS},s))},hf=function(l){return He(dx,Fe({size:20},l),He("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},fx=function(l){return He(dx,Fe({size:20},l),He("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},px=function(l,o){var s=l.isFocused,i=l.theme,d=i.spacing.baseUnit,p=i.colors;return Ue({label:"indicatorContainer",display:"flex",transition:"color 150ms"},o?{}:{color:s?p.neutral60:p.neutral20,padding:d*2,":hover":{color:s?p.neutral80:p.neutral40}})},hS=px,gS=function(l){var o=l.children,s=l.innerProps;return He("div",Fe({},Yt(l,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),s),o||He(fx,null))},xS=px,yS=function(l){var o=l.children,s=l.innerProps;return He("div",Fe({},Yt(l,"clearIndicator",{indicator:!0,"clear-indicator":!0}),s),o||He(hf,null))},vS=function(l,o){var s=l.isDisabled,i=l.theme,d=i.spacing.baseUnit,p=i.colors;return Ue({label:"indicatorSeparator",alignSelf:"stretch",width:1},o?{}:{backgroundColor:s?p.neutral10:p.neutral20,marginBottom:d*2,marginTop:d*2})},bS=function(l){var o=l.innerProps;return He("span",Fe({},o,Yt(l,"indicatorSeparator",{"indicator-separator":!0})))},wS=mw($g||($g=hw([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),SS=function(l,o){var s=l.isFocused,i=l.size,d=l.theme,p=d.colors,h=d.spacing.baseUnit;return Ue({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},o?{}:{color:s?p.neutral60:p.neutral20,padding:h*2})},pd=function(l){var o=l.delay,s=l.offset;return He("span",{css:df({animation:"".concat(wS," 1s ease-in-out ").concat(o,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},NS=function(l){var o=l.innerProps,s=l.isRtl,i=l.size,d=i===void 0?4:i,p=Yr(l,pS);return He("div",Fe({},Yt(Ue(Ue({},p),{},{innerProps:o,isRtl:s,size:d}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),o),He(pd,{delay:0,offset:s}),He(pd,{delay:160,offset:!0}),He(pd,{delay:320,offset:!s}))},jS=function(l,o){var s=l.isDisabled,i=l.isFocused,d=l.theme,p=d.colors,h=d.borderRadius,m=d.spacing;return Ue({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:m.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},o?{}:{backgroundColor:s?p.neutral5:p.neutral0,borderColor:s?p.neutral10:i?p.primary:p.neutral20,borderRadius:h,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(p.primary):void 0,"&:hover":{borderColor:i?p.primary:p.neutral30}})},CS=function(l){var o=l.children,s=l.isDisabled,i=l.isFocused,d=l.innerRef,p=l.innerProps,h=l.menuIsOpen;return He("div",Fe({ref:d},Yt(l,"control",{control:!0,"control--is-disabled":s,"control--is-focused":i,"control--menu-is-open":h}),p,{"aria-disabled":s||void 0}),o)},kS=CS,MS=["data"],OS=function(l,o){var s=l.theme.spacing;return o?{}:{paddingBottom:s.baseUnit*2,paddingTop:s.baseUnit*2}},ES=function(l){var o=l.children,s=l.cx,i=l.getStyles,d=l.getClassNames,p=l.Heading,h=l.headingProps,m=l.innerProps,g=l.label,x=l.theme,v=l.selectProps;return He("div",Fe({},Yt(l,"group",{group:!0}),m),He(p,Fe({},h,{selectProps:v,theme:x,getStyles:i,getClassNames:d,cx:s}),g),He("div",null,o))},TS=function(l,o){var s=l.theme,i=s.colors,d=s.spacing;return Ue({label:"group",cursor:"default",display:"block"},o?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:d.baseUnit*3,paddingRight:d.baseUnit*3,textTransform:"uppercase"})},LS=function(l){var o=ax(l);o.data;var s=Yr(o,MS);return He("div",Fe({},Yt(l,"groupHeading",{"group-heading":!0}),s))},_S=ES,AS=["innerRef","isDisabled","isHidden","inputClassName"],RS=function(l,o){var s=l.isDisabled,i=l.value,d=l.theme,p=d.spacing,h=d.colors;return Ue(Ue({visibility:s?"hidden":"visible",transform:i?"translateZ(0)":""},DS),o?{}:{margin:p.baseUnit/2,paddingBottom:p.baseUnit/2,paddingTop:p.baseUnit/2,color:h.neutral80})},mx={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},DS={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ue({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},mx)},zS=function(l){return Ue({label:"input",color:"inherit",background:0,opacity:l?0:1,width:"100%"},mx)},BS=function(l){var o=l.cx,s=l.value,i=ax(l),d=i.innerRef,p=i.isDisabled,h=i.isHidden,m=i.inputClassName,g=Yr(i,AS);return He("div",Fe({},Yt(l,"input",{"input-container":!0}),{"data-value":s||""}),He("input",Fe({className:o({input:!0},m),ref:d,style:zS(h),disabled:p},g)))},IS=BS,HS=function(l,o){var s=l.theme,i=s.spacing,d=s.borderRadius,p=s.colors;return Ue({label:"multiValue",display:"flex",minWidth:0},o?{}:{backgroundColor:p.neutral10,borderRadius:d/2,margin:i.baseUnit/2})},VS=function(l,o){var s=l.theme,i=s.borderRadius,d=s.colors,p=l.cropWithEllipsis;return Ue({overflow:"hidden",textOverflow:p||p===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},o?{}:{borderRadius:i/2,color:d.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},US=function(l,o){var s=l.theme,i=s.spacing,d=s.borderRadius,p=s.colors,h=l.isFocused;return Ue({alignItems:"center",display:"flex"},o?{}:{borderRadius:d/2,backgroundColor:h?p.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:p.dangerLight,color:p.danger}})},hx=function(l){var o=l.children,s=l.innerProps;return He("div",s,o)},GS=hx,qS=hx;function WS(r){var l=r.children,o=r.innerProps;return He("div",Fe({role:"button"},o),l||He(hf,{size:14}))}var FS=function(l){var o=l.children,s=l.components,i=l.data,d=l.innerProps,p=l.isDisabled,h=l.removeProps,m=l.selectProps,g=s.Container,x=s.Label,v=s.Remove;return He(g,{data:i,innerProps:Ue(Ue({},Yt(l,"multiValue",{"multi-value":!0,"multi-value--is-disabled":p})),d),selectProps:m},He(x,{data:i,innerProps:Ue({},Yt(l,"multiValueLabel",{"multi-value__label":!0})),selectProps:m},o),He(v,{data:i,innerProps:Ue(Ue({},Yt(l,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(o||"option")},h),selectProps:m}))},$S=FS,YS=function(l,o){var s=l.isDisabled,i=l.isFocused,d=l.isSelected,p=l.theme,h=p.spacing,m=p.colors;return Ue({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},o?{}:{backgroundColor:d?m.primary:i?m.primary25:"transparent",color:s?m.neutral20:d?m.neutral0:"inherit",padding:"".concat(h.baseUnit*2,"px ").concat(h.baseUnit*3,"px"),":active":{backgroundColor:s?void 0:d?m.primary:m.primary50}})},QS=function(l){var o=l.children,s=l.isDisabled,i=l.isFocused,d=l.isSelected,p=l.innerRef,h=l.innerProps;return He("div",Fe({},Yt(l,"option",{option:!0,"option--is-disabled":s,"option--is-focused":i,"option--is-selected":d}),{ref:p,"aria-disabled":s},h),o)},XS=QS,PS=function(l,o){var s=l.theme,i=s.spacing,d=s.colors;return Ue({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},o?{}:{color:d.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},ZS=function(l){var o=l.children,s=l.innerProps;return He("div",Fe({},Yt(l,"placeholder",{placeholder:!0}),s),o)},KS=ZS,JS=function(l,o){var s=l.isDisabled,i=l.theme,d=i.spacing,p=i.colors;return Ue({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o?{}:{color:s?p.neutral40:p.neutral80,marginLeft:d.baseUnit/2,marginRight:d.baseUnit/2})},e3=function(l){var o=l.children,s=l.isDisabled,i=l.innerProps;return He("div",Fe({},Yt(l,"singleValue",{"single-value":!0,"single-value--is-disabled":s}),i),o)},t3=e3,gx={ClearIndicator:yS,Control:kS,DropdownIndicator:gS,DownChevron:fx,CrossIcon:hf,Group:_S,GroupHeading:LS,IndicatorsContainer:dS,IndicatorSeparator:bS,Input:IS,LoadingIndicator:NS,Menu:Zw,MenuList:Jw,MenuPortal:aS,LoadingMessage:rS,NoOptionsMessage:nS,MultiValue:$S,MultiValueContainer:GS,MultiValueLabel:qS,MultiValueRemove:WS,Option:XS,Placeholder:KS,SelectContainer:sS,SingleValue:t3,ValueContainer:uS},n3=function(l){return Ue(Ue({},gx),l.components)},Yg=Number.isNaN||function(l){return typeof l=="number"&&l!==l};function r3(r,l){return!!(r===l||Yg(r)&&Yg(l))}function l3(r,l){if(r.length!==l.length)return!1;for(var o=0;o<r.length;o++)if(!r3(r[o],l[o]))return!1;return!0}function a3(r,l){l===void 0&&(l=l3);var o=null;function s(){for(var i=[],d=0;d<arguments.length;d++)i[d]=arguments[d];if(o&&o.lastThis===this&&l(i,o.lastArgs))return o.lastResult;var p=r.apply(this,i);return o={lastResult:p,lastArgs:i,lastThis:this},p}return s.clear=function(){o=null},s}var o3={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},s3=function(l){return He("span",Fe({css:o3},l))},Qg=s3,i3={guidance:function(l){var o=l.isSearchable,s=l.isMulti,i=l.tabSelectsValue,d=l.context,p=l.isInitialFocus;switch(d){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return p?"".concat(l["aria-label"]||"Select"," is focused ").concat(o?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(l){var o=l.action,s=l.label,i=s===void 0?"":s,d=l.labels,p=l.isDisabled;switch(o){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(d.length>1?"s":""," ").concat(d.join(","),", selected.");case"select-option":return p?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(l){var o=l.context,s=l.focused,i=l.options,d=l.label,p=d===void 0?"":d,h=l.selectValue,m=l.isDisabled,g=l.isSelected,x=l.isAppleDevice,v=function(S,M){return S&&S.length?"".concat(S.indexOf(M)+1," of ").concat(S.length):""};if(o==="value"&&h)return"value ".concat(p," focused, ").concat(v(h,s),".");if(o==="menu"&&x){var N=m?" disabled":"",C="".concat(g?" selected":"").concat(N);return"".concat(p).concat(C,", ").concat(v(i,s),".")}return""},onFilter:function(l){var o=l.inputValue,s=l.resultsMessage;return"".concat(s).concat(o?" for search term "+o:"",".")}},u3=function(l){var o=l.ariaSelection,s=l.focusedOption,i=l.focusedValue,d=l.focusableOptions,p=l.isFocused,h=l.selectValue,m=l.selectProps,g=l.id,x=l.isAppleDevice,v=m.ariaLiveMessages,N=m.getOptionLabel,C=m.inputValue,w=m.isMulti,S=m.isOptionDisabled,M=m.isSearchable,j=m.menuIsOpen,E=m.options,z=m.screenReaderStatus,_=m.tabSelectsValue,L=m.isLoading,R=m["aria-label"],A=m["aria-live"],I=b.useMemo(function(){return Ue(Ue({},i3),v||{})},[v]),U=b.useMemo(function(){var re="";if(o&&I.onChange){var D=o.option,$=o.options,fe=o.removedValue,be=o.removedValues,ye=o.value,T=function(le){return Array.isArray(le)?null:le},B=fe||D||T(ye),O=B?N(B):"",F=$||be||void 0,X=F?F.map(N):[],pe=Ue({isDisabled:B&&S(B,h),label:O,labels:X},o);re=I.onChange(pe)}return re},[o,I,S,h,N]),G=b.useMemo(function(){var re="",D=s||i,$=!!(s&&h&&h.includes(s));if(D&&I.onFocus){var fe={focused:D,label:N(D),isDisabled:S(D,h),isSelected:$,options:d,context:D===s?"menu":"value",selectValue:h,isAppleDevice:x};re=I.onFocus(fe)}return re},[s,i,N,S,I,d,h,x]),W=b.useMemo(function(){var re="";if(j&&E.length&&!L&&I.onFilter){var D=z({count:d.length});re=I.onFilter({inputValue:C,resultsMessage:D})}return re},[d,C,j,I,E,z,L]),K=o?.action==="initial-input-focus",ge=b.useMemo(function(){var re="";if(I.guidance){var D=i?"value":j?"menu":"input";re=I.guidance({"aria-label":R,context:D,isDisabled:s&&S(s,h),isMulti:w,isSearchable:M,tabSelectsValue:_,isInitialFocus:K})}return re},[R,s,i,w,S,M,j,I,h,_,K]),ae=He(b.Fragment,null,He("span",{id:"aria-selection"},U),He("span",{id:"aria-focused"},G),He("span",{id:"aria-results"},W),He("span",{id:"aria-guidance"},ge));return He(b.Fragment,null,He(Qg,{id:g},K&&ae),He(Qg,{"aria-live":A,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},p&&!K&&ae))},c3=u3,Wd=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],d3=new RegExp("["+Wd.map(function(r){return r.letters}).join("")+"]","g"),xx={};for(var md=0;md<Wd.length;md++)for(var hd=Wd[md],gd=0;gd<hd.letters.length;gd++)xx[hd.letters[gd]]=hd.base;var yx=function(l){return l.replace(d3,function(o){return xx[o]})},f3=a3(yx),Xg=function(l){return l.replace(/^\s+|\s+$/g,"")},p3=function(l){return"".concat(l.label," ").concat(l.value)},Fd=function(l){return function(o,s){if(o.data.__isNew__)return!0;var i=Ue({ignoreCase:!0,ignoreAccents:!0,stringify:p3,trim:!0,matchFrom:"any"},l),d=i.ignoreCase,p=i.ignoreAccents,h=i.stringify,m=i.trim,g=i.matchFrom,x=m?Xg(s):s,v=m?Xg(h(o)):h(o);return d&&(x=x.toLowerCase(),v=v.toLowerCase()),p&&(x=f3(x),v=yx(v)),g==="start"?v.substr(0,x.length)===x:v.indexOf(x)>-1}},m3=["innerRef"];function h3(r){var l=r.innerRef,o=Yr(r,m3),s=qw(o,"onExited","in","enter","exit","appear");return He("input",Fe({ref:l},s,{css:df({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var g3=function(l){l.cancelable&&l.preventDefault(),l.stopPropagation()};function x3(r){var l=r.isEnabled,o=r.onBottomArrive,s=r.onBottomLeave,i=r.onTopArrive,d=r.onTopLeave,p=b.useRef(!1),h=b.useRef(!1),m=b.useRef(0),g=b.useRef(null),x=b.useCallback(function(M,j){if(g.current!==null){var E=g.current,z=E.scrollTop,_=E.scrollHeight,L=E.clientHeight,R=g.current,A=j>0,I=_-L-z,U=!1;I>j&&p.current&&(s&&s(M),p.current=!1),A&&h.current&&(d&&d(M),h.current=!1),A&&j>I?(o&&!p.current&&o(M),R.scrollTop=_,U=!0,p.current=!0):!A&&-j>z&&(i&&!h.current&&i(M),R.scrollTop=0,U=!0,h.current=!0),U&&g3(M)}},[o,s,i,d]),v=b.useCallback(function(M){x(M,M.deltaY)},[x]),N=b.useCallback(function(M){m.current=M.changedTouches[0].clientY},[]),C=b.useCallback(function(M){var j=m.current-M.changedTouches[0].clientY;x(M,j)},[x]),w=b.useCallback(function(M){if(M){var j=Vw?{passive:!1}:!1;M.addEventListener("wheel",v,j),M.addEventListener("touchstart",N,j),M.addEventListener("touchmove",C,j)}},[C,N,v]),S=b.useCallback(function(M){M&&(M.removeEventListener("wheel",v,!1),M.removeEventListener("touchstart",N,!1),M.removeEventListener("touchmove",C,!1))},[C,N,v]);return b.useEffect(function(){if(l){var M=g.current;return w(M),function(){S(M)}}},[l,w,S]),function(M){g.current=M}}var Pg=["boxSizing","height","overflow","paddingRight","position"],Zg={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Kg(r){r.cancelable&&r.preventDefault()}function Jg(r){r.stopPropagation()}function e0(){var r=this.scrollTop,l=this.scrollHeight,o=r+this.offsetHeight;r===0?this.scrollTop=1:o===l&&(this.scrollTop=r-1)}function t0(){return"ontouchstart"in window||navigator.maxTouchPoints}var n0=!!(typeof window<"u"&&window.document&&window.document.createElement),Oo=0,ja={capture:!1,passive:!1};function y3(r){var l=r.isEnabled,o=r.accountForScrollbars,s=o===void 0?!0:o,i=b.useRef({}),d=b.useRef(null),p=b.useCallback(function(m){if(n0){var g=document.body,x=g&&g.style;if(s&&Pg.forEach(function(w){var S=x&&x[w];i.current[w]=S}),s&&Oo<1){var v=parseInt(i.current.paddingRight,10)||0,N=document.body?document.body.clientWidth:0,C=window.innerWidth-N+v||0;Object.keys(Zg).forEach(function(w){var S=Zg[w];x&&(x[w]=S)}),x&&(x.paddingRight="".concat(C,"px"))}g&&t0()&&(g.addEventListener("touchmove",Kg,ja),m&&(m.addEventListener("touchstart",e0,ja),m.addEventListener("touchmove",Jg,ja))),Oo+=1}},[s]),h=b.useCallback(function(m){if(n0){var g=document.body,x=g&&g.style;Oo=Math.max(Oo-1,0),s&&Oo<1&&Pg.forEach(function(v){var N=i.current[v];x&&(x[v]=N)}),g&&t0()&&(g.removeEventListener("touchmove",Kg,ja),m&&(m.removeEventListener("touchstart",e0,ja),m.removeEventListener("touchmove",Jg,ja)))}},[s]);return b.useEffect(function(){if(l){var m=d.current;return p(m),function(){h(m)}}},[l,p,h]),function(m){d.current=m}}var v3=function(l){var o=l.target;return o.ownerDocument.activeElement&&o.ownerDocument.activeElement.blur()},b3={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function w3(r){var l=r.children,o=r.lockEnabled,s=r.captureEnabled,i=s===void 0?!0:s,d=r.onBottomArrive,p=r.onBottomLeave,h=r.onTopArrive,m=r.onTopLeave,g=x3({isEnabled:i,onBottomArrive:d,onBottomLeave:p,onTopArrive:h,onTopLeave:m}),x=y3({isEnabled:o}),v=function(C){g(C),x(C)};return He(b.Fragment,null,o&&He("div",{onClick:v3,css:b3}),l(v))}var S3={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},N3=function(l){var o=l.name,s=l.onFocus;return He("input",{required:!0,name:o,tabIndex:-1,"aria-hidden":"true",onFocus:s,css:S3,value:"",onChange:function(){}})},j3=N3;function gf(r){var l;return typeof window<"u"&&window.navigator!=null?r.test(((l=window.navigator.userAgentData)===null||l===void 0?void 0:l.platform)||window.navigator.platform):!1}function C3(){return gf(/^iPhone/i)}function vx(){return gf(/^Mac/i)}function k3(){return gf(/^iPad/i)||vx()&&navigator.maxTouchPoints>1}function M3(){return C3()||k3()}function O3(){return vx()||M3()}var E3=function(l){return l.label},T3=function(l){return l.label},L3=function(l){return l.value},_3=function(l){return!!l.isDisabled},A3={clearIndicator:xS,container:oS,control:jS,dropdownIndicator:hS,group:OS,groupHeading:TS,indicatorsContainer:cS,indicatorSeparator:vS,input:RS,loadingIndicator:SS,loadingMessage:tS,menu:Qw,menuList:Kw,menuPortal:lS,multiValue:HS,multiValueLabel:VS,multiValueRemove:US,noOptionsMessage:eS,option:YS,placeholder:PS,singleValue:JS,valueContainer:iS},R3={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},D3=4,bx=4,z3=38,B3=bx*2,I3={baseUnit:bx,controlHeight:z3,menuGutter:B3},xd={borderRadius:D3,colors:R3,spacing:I3},H3={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Fg(),captureMenuScroll:!Fg(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Fd(),formatGroupLabel:E3,getOptionLabel:T3,getOptionValue:L3,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:_3,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Iw(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(l){var o=l.count;return"".concat(o," result").concat(o!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function r0(r,l,o,s){var i=Nx(r,l,o),d=jx(r,l,o),p=Sx(r,l),h=Bi(r,l);return{type:"option",data:l,isDisabled:i,isSelected:d,label:p,value:h,index:s}}function bi(r,l){return r.options.map(function(o,s){if("options"in o){var i=o.options.map(function(p,h){return r0(r,p,l,h)}).filter(function(p){return a0(r,p)});return i.length>0?{type:"group",data:o,options:i,index:s}:void 0}var d=r0(r,o,l,s);return a0(r,d)?d:void 0}).filter(Uw)}function wx(r){return r.reduce(function(l,o){return o.type==="group"?l.push.apply(l,af(o.options.map(function(s){return s.data}))):l.push(o.data),l},[])}function l0(r,l){return r.reduce(function(o,s){return s.type==="group"?o.push.apply(o,af(s.options.map(function(i){return{data:i.data,id:"".concat(l,"-").concat(s.index,"-").concat(i.index)}}))):o.push({data:s.data,id:"".concat(l,"-").concat(s.index)}),o},[])}function V3(r,l){return wx(bi(r,l))}function a0(r,l){var o=r.inputValue,s=o===void 0?"":o,i=l.data,d=l.isSelected,p=l.label,h=l.value;return(!kx(r)||!d)&&Cx(r,{label:p,value:h,data:i},s)}function U3(r,l){var o=r.focusedValue,s=r.selectValue,i=s.indexOf(o);if(i>-1){var d=l.indexOf(o);if(d>-1)return o;if(i<l.length)return l[i]}return null}function G3(r,l){var o=r.focusedOption;return o&&l.indexOf(o)>-1?o:l[0]}var yd=function(l,o){var s,i=(s=l.find(function(d){return d.data===o}))===null||s===void 0?void 0:s.id;return i||null},Sx=function(l,o){return l.getOptionLabel(o)},Bi=function(l,o){return l.getOptionValue(o)};function Nx(r,l,o){return typeof r.isOptionDisabled=="function"?r.isOptionDisabled(l,o):!1}function jx(r,l,o){if(o.indexOf(l)>-1)return!0;if(typeof r.isOptionSelected=="function")return r.isOptionSelected(l,o);var s=Bi(r,l);return o.some(function(i){return Bi(r,i)===s})}function Cx(r,l,o){return r.filterOption?r.filterOption(l,o):!0}var kx=function(l){var o=l.hideSelectedOptions,s=l.isMulti;return o===void 0?s:o},q3=1,Mx=(function(r){d2(o,r);var l=m2(o);function o(s){var i;if(u2(this,o),i=l.call(this,s),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(m){i.controlRef=m},i.focusedOptionRef=null,i.getFocusedOptionRef=function(m){i.focusedOptionRef=m},i.menuListRef=null,i.getMenuListRef=function(m){i.menuListRef=m},i.inputRef=null,i.getInputRef=function(m){i.inputRef=m},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(m,g){var x=i.props,v=x.onChange,N=x.name;g.name=N,i.ariaOnChange(m,g),v(m,g)},i.setValue=function(m,g,x){var v=i.props,N=v.closeMenuOnSelect,C=v.isMulti,w=v.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:w}),N&&(i.setState({inputIsHiddenAfterUpdate:!C}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(m,{action:g,option:x})},i.selectOption=function(m){var g=i.props,x=g.blurInputOnSelect,v=g.isMulti,N=g.name,C=i.state.selectValue,w=v&&i.isOptionSelected(m,C),S=i.isOptionDisabled(m,C);if(w){var M=i.getOptionValue(m);i.setValue(C.filter(function(j){return i.getOptionValue(j)!==M}),"deselect-option",m)}else if(!S)v?i.setValue([].concat(af(C),[m]),"select-option",m):i.setValue(m,"select-option");else{i.ariaOnChange(m,{action:"select-option",option:m,name:N});return}x&&i.blurInput()},i.removeValue=function(m){var g=i.props.isMulti,x=i.state.selectValue,v=i.getOptionValue(m),N=x.filter(function(w){return i.getOptionValue(w)!==v}),C=mi(g,N,N[0]||null);i.onChange(C,{action:"remove-value",removedValue:m}),i.focusInput()},i.clearValue=function(){var m=i.state.selectValue;i.onChange(mi(i.props.isMulti,[],null),{action:"clear",removedValues:m})},i.popValue=function(){var m=i.props.isMulti,g=i.state.selectValue,x=g[g.length-1],v=g.slice(0,g.length-1),N=mi(m,v,v[0]||null);x&&i.onChange(N,{action:"pop-value",removedValue:x})},i.getFocusedOptionId=function(m){return yd(i.state.focusableOptionsWithIds,m)},i.getFocusableOptionsWithIds=function(){return l0(bi(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];return Aw.apply(void 0,[i.props.classNamePrefix].concat(g))},i.getOptionLabel=function(m){return Sx(i.props,m)},i.getOptionValue=function(m){return Bi(i.props,m)},i.getStyles=function(m,g){var x=i.props.unstyled,v=A3[m](g,x);v.boxSizing="border-box";var N=i.props.styles[m];return N?N(v,g):v},i.getClassNames=function(m,g){var x,v;return(x=(v=i.props.classNames)[m])===null||x===void 0?void 0:x.call(v,g)},i.getElementId=function(m){return"".concat(i.state.instancePrefix,"-").concat(m)},i.getComponents=function(){return n3(i.props)},i.buildCategorizedOptions=function(){return bi(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return wx(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(m,g){i.setState({ariaSelection:Ue({value:m},g)})},i.onMenuMouseDown=function(m){m.button===0&&(m.stopPropagation(),m.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(m){i.blockOptionHover=!1},i.onControlMouseDown=function(m){if(!m.defaultPrevented){var g=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&i.onMenuClose():g&&i.openMenu("first"):(g&&(i.openAfterFocus=!0),i.focusInput()),m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&m.preventDefault()}},i.onDropdownIndicatorMouseDown=function(m){if(!(m&&m.type==="mousedown"&&m.button!==0)&&!i.props.isDisabled){var g=i.props,x=g.isMulti,v=g.menuIsOpen;i.focusInput(),v?(i.setState({inputIsHiddenAfterUpdate:!x}),i.onMenuClose()):i.openMenu("first"),m.preventDefault()}},i.onClearIndicatorMouseDown=function(m){m&&m.type==="mousedown"&&m.button!==0||(i.clearValue(),m.preventDefault(),i.openAfterFocus=!1,m.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(m){typeof i.props.closeMenuOnScroll=="boolean"?m.target instanceof HTMLElement&&Yi(m.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(m)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(m){var g=m.touches,x=g&&g.item(0);x&&(i.initialTouchX=x.clientX,i.initialTouchY=x.clientY,i.userIsDragging=!1)},i.onTouchMove=function(m){var g=m.touches,x=g&&g.item(0);if(x){var v=Math.abs(x.clientX-i.initialTouchX),N=Math.abs(x.clientY-i.initialTouchY),C=5;i.userIsDragging=v>C||N>C}},i.onTouchEnd=function(m){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(m.target)&&i.menuListRef&&!i.menuListRef.contains(m.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(m){i.userIsDragging||i.onControlMouseDown(m)},i.onClearIndicatorTouchEnd=function(m){i.userIsDragging||i.onClearIndicatorMouseDown(m)},i.onDropdownIndicatorTouchEnd=function(m){i.userIsDragging||i.onDropdownIndicatorMouseDown(m)},i.handleInputChange=function(m){var g=i.props.inputValue,x=m.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(x,{action:"input-change",prevInputValue:g}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(m){i.props.onFocus&&i.props.onFocus(m),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(m){var g=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(m),i.onInputChange("",{action:"input-blur",prevInputValue:g}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(m){if(!(i.blockOptionHover||i.state.focusedOption===m)){var g=i.getFocusableOptions(),x=g.indexOf(m);i.setState({focusedOption:m,focusedOptionId:x>-1?i.getFocusedOptionId(m):null})}},i.shouldHideSelectedOptions=function(){return kx(i.props)},i.onValueInputFocus=function(m){m.preventDefault(),m.stopPropagation(),i.focus()},i.onKeyDown=function(m){var g=i.props,x=g.isMulti,v=g.backspaceRemovesValue,N=g.escapeClearsValue,C=g.inputValue,w=g.isClearable,S=g.isDisabled,M=g.menuIsOpen,j=g.onKeyDown,E=g.tabSelectsValue,z=g.openMenuOnFocus,_=i.state,L=_.focusedOption,R=_.focusedValue,A=_.selectValue;if(!S&&!(typeof j=="function"&&(j(m),m.defaultPrevented))){switch(i.blockOptionHover=!0,m.key){case"ArrowLeft":if(!x||C)return;i.focusValue("previous");break;case"ArrowRight":if(!x||C)return;i.focusValue("next");break;case"Delete":case"Backspace":if(C)return;if(R)i.removeValue(R);else{if(!v)return;x?i.popValue():w&&i.clearValue()}break;case"Tab":if(i.isComposing||m.shiftKey||!M||!E||!L||z&&i.isOptionSelected(L,A))return;i.selectOption(L);break;case"Enter":if(m.keyCode===229)break;if(M){if(!L||i.isComposing)return;i.selectOption(L);break}return;case"Escape":M?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:C}),i.onMenuClose()):w&&N&&i.clearValue();break;case" ":if(C)return;if(!M){i.openMenu("first");break}if(!L)return;i.selectOption(L);break;case"ArrowUp":M?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":M?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!M)return;i.focusOption("pageup");break;case"PageDown":if(!M)return;i.focusOption("pagedown");break;case"Home":if(!M)return;i.focusOption("first");break;case"End":if(!M)return;i.focusOption("last");break;default:return}m.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++q3),i.state.selectValue=qg(s.value),s.menuIsOpen&&i.state.selectValue.length){var d=i.getFocusableOptionsWithIds(),p=i.buildFocusableOptions(),h=p.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=d,i.state.focusedOption=p[h],i.state.focusedOptionId=yd(d,p[h])}return i}return c2(o,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Wg(this.menuListRef,this.focusedOptionRef),O3()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var d=this.props,p=d.isDisabled,h=d.menuIsOpen,m=this.state.isFocused;(m&&!p&&i.isDisabled||m&&h&&!i.menuIsOpen)&&this.focusInput(),m&&p&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!m&&!p&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Wg(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,d){this.props.onInputChange(i,d)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var d=this,p=this.state,h=p.selectValue,m=p.isFocused,g=this.buildFocusableOptions(),x=i==="first"?0:g.length-1;if(!this.props.isMulti){var v=g.indexOf(h[0]);v>-1&&(x=v)}this.scrollToFocusedOptionOnUpdate=!(m&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:g[x],focusedOptionId:this.getFocusedOptionId(g[x])},function(){return d.onMenuOpen()})}},{key:"focusValue",value:function(i){var d=this.state,p=d.selectValue,h=d.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var m=p.indexOf(h);h||(m=-1);var g=p.length-1,x=-1;if(p.length){switch(i){case"previous":m===0?x=0:m===-1?x=g:x=m-1;break;case"next":m>-1&&m<g&&(x=m+1);break}this.setState({inputIsHidden:x!==-1,focusedValue:p[x]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",d=this.props.pageSize,p=this.state.focusedOption,h=this.getFocusableOptions();if(h.length){var m=0,g=h.indexOf(p);p||(g=-1),i==="up"?m=g>0?g-1:h.length-1:i==="down"?m=(g+1)%h.length:i==="pageup"?(m=g-d,m<0&&(m=0)):i==="pagedown"?(m=g+d,m>h.length-1&&(m=h.length-1)):i==="last"&&(m=h.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:h[m],focusedValue:null,focusedOptionId:this.getFocusedOptionId(h[m])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(xd):Ue(Ue({},xd),this.props.theme):xd})},{key:"getCommonProps",value:function(){var i=this.clearValue,d=this.cx,p=this.getStyles,h=this.getClassNames,m=this.getValue,g=this.selectOption,x=this.setValue,v=this.props,N=v.isMulti,C=v.isRtl,w=v.options,S=this.hasValue();return{clearValue:i,cx:d,getStyles:p,getClassNames:h,getValue:m,hasValue:S,isMulti:N,isRtl:C,options:w,selectOption:g,selectProps:v,setValue:x,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,d=i.isClearable,p=i.isMulti;return d===void 0?p:d}},{key:"isOptionDisabled",value:function(i,d){return Nx(this.props,i,d)}},{key:"isOptionSelected",value:function(i,d){return jx(this.props,i,d)}},{key:"filterOption",value:function(i,d){return Cx(this.props,i,d)}},{key:"formatOptionLabel",value:function(i,d){if(typeof this.props.formatOptionLabel=="function"){var p=this.props.inputValue,h=this.state.selectValue;return this.props.formatOptionLabel(i,{context:d,inputValue:p,selectValue:h})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var i=this.props,d=i.isDisabled,p=i.isSearchable,h=i.inputId,m=i.inputValue,g=i.tabIndex,x=i.form,v=i.menuIsOpen,N=i.required,C=this.getComponents(),w=C.Input,S=this.state,M=S.inputIsHidden,j=S.ariaSelection,E=this.commonProps,z=h||this.getElementId("input"),_=Ue(Ue(Ue({"aria-autocomplete":"list","aria-expanded":v,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":N,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},v&&{"aria-controls":this.getElementId("listbox")}),!p&&{"aria-readonly":!0}),this.hasValue()?j?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return p?b.createElement(w,Fe({},E,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:z,innerRef:this.getInputRef,isDisabled:d,isHidden:M,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:g,form:x,type:"text",value:m},_)):b.createElement(h3,Fe({id:z,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Di,onFocus:this.onInputFocus,disabled:d,tabIndex:g,inputMode:"none",form:x,value:""},_))})},{key:"renderPlaceholderOrValue",value:function(){var i=this,d=this.getComponents(),p=d.MultiValue,h=d.MultiValueContainer,m=d.MultiValueLabel,g=d.MultiValueRemove,x=d.SingleValue,v=d.Placeholder,N=this.commonProps,C=this.props,w=C.controlShouldRenderValue,S=C.isDisabled,M=C.isMulti,j=C.inputValue,E=C.placeholder,z=this.state,_=z.selectValue,L=z.focusedValue,R=z.isFocused;if(!this.hasValue()||!w)return j?null:b.createElement(v,Fe({},N,{key:"placeholder",isDisabled:S,isFocused:R,innerProps:{id:this.getElementId("placeholder")}}),E);if(M)return _.map(function(I,U){var G=I===L,W="".concat(i.getOptionLabel(I),"-").concat(i.getOptionValue(I));return b.createElement(p,Fe({},N,{components:{Container:h,Label:m,Remove:g},isFocused:G,isDisabled:S,key:W,index:U,removeProps:{onClick:function(){return i.removeValue(I)},onTouchEnd:function(){return i.removeValue(I)},onMouseDown:function(ge){ge.preventDefault()}},data:I}),i.formatOptionLabel(I,"value"))});if(j)return null;var A=_[0];return b.createElement(x,Fe({},N,{data:A,isDisabled:S}),this.formatOptionLabel(A,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),d=i.ClearIndicator,p=this.commonProps,h=this.props,m=h.isDisabled,g=h.isLoading,x=this.state.isFocused;if(!this.isClearable()||!d||m||!this.hasValue()||g)return null;var v={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(d,Fe({},p,{innerProps:v,isFocused:x}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),d=i.LoadingIndicator,p=this.commonProps,h=this.props,m=h.isDisabled,g=h.isLoading,x=this.state.isFocused;if(!d||!g)return null;var v={"aria-hidden":"true"};return b.createElement(d,Fe({},p,{innerProps:v,isDisabled:m,isFocused:x}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),d=i.DropdownIndicator,p=i.IndicatorSeparator;if(!d||!p)return null;var h=this.commonProps,m=this.props.isDisabled,g=this.state.isFocused;return b.createElement(p,Fe({},h,{isDisabled:m,isFocused:g}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),d=i.DropdownIndicator;if(!d)return null;var p=this.commonProps,h=this.props.isDisabled,m=this.state.isFocused,g={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(d,Fe({},p,{innerProps:g,isDisabled:h,isFocused:m}))}},{key:"renderMenu",value:function(){var i=this,d=this.getComponents(),p=d.Group,h=d.GroupHeading,m=d.Menu,g=d.MenuList,x=d.MenuPortal,v=d.LoadingMessage,N=d.NoOptionsMessage,C=d.Option,w=this.commonProps,S=this.state.focusedOption,M=this.props,j=M.captureMenuScroll,E=M.inputValue,z=M.isLoading,_=M.loadingMessage,L=M.minMenuHeight,R=M.maxMenuHeight,A=M.menuIsOpen,I=M.menuPlacement,U=M.menuPosition,G=M.menuPortalTarget,W=M.menuShouldBlockScroll,K=M.menuShouldScrollIntoView,ge=M.noOptionsMessage,ae=M.onMenuScrollToTop,re=M.onMenuScrollToBottom;if(!A)return null;var D=function(O,F){var X=O.type,pe=O.data,J=O.isDisabled,le=O.isSelected,ve=O.label,Le=O.value,$e=S===pe,ee=J?void 0:function(){return i.onOptionHover(pe)},Ve=J?void 0:function(){return i.selectOption(pe)},Ne="".concat(i.getElementId("option"),"-").concat(F),Ce={id:Ne,onClick:Ve,onMouseMove:ee,onMouseOver:ee,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:le};return b.createElement(C,Fe({},w,{innerProps:Ce,data:pe,isDisabled:J,isSelected:le,key:Ne,label:ve,type:X,value:Le,isFocused:$e,innerRef:$e?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(O.data,"menu"))},$;if(this.hasOptions())$=this.getCategorizedOptions().map(function(B){if(B.type==="group"){var O=B.data,F=B.options,X=B.index,pe="".concat(i.getElementId("group"),"-").concat(X),J="".concat(pe,"-heading");return b.createElement(p,Fe({},w,{key:pe,data:O,options:F,Heading:h,headingProps:{id:J,data:B.data},label:i.formatGroupLabel(B.data)}),B.options.map(function(le){return D(le,"".concat(X,"-").concat(le.index))}))}else if(B.type==="option")return D(B,"".concat(B.index))});else if(z){var fe=_({inputValue:E});if(fe===null)return null;$=b.createElement(v,w,fe)}else{var be=ge({inputValue:E});if(be===null)return null;$=b.createElement(N,w,be)}var ye={minMenuHeight:L,maxMenuHeight:R,menuPlacement:I,menuPosition:U,menuShouldScrollIntoView:K},T=b.createElement(Xw,Fe({},w,ye),function(B){var O=B.ref,F=B.placerProps,X=F.placement,pe=F.maxHeight;return b.createElement(m,Fe({},w,ye,{innerRef:O,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:z,placement:X}),b.createElement(w3,{captureEnabled:j,onTopArrive:ae,onBottomArrive:re,lockEnabled:W},function(J){return b.createElement(g,Fe({},w,{innerRef:function(ve){i.getMenuListRef(ve),J(ve)},innerProps:{role:"listbox","aria-multiselectable":w.isMulti,id:i.getElementId("listbox")},isLoading:z,maxHeight:pe,focusedOption:S}),$)}))});return G||U==="fixed"?b.createElement(x,Fe({},w,{appendTo:G,controlElement:this.controlRef,menuPlacement:I,menuPosition:U}),T):T}},{key:"renderFormField",value:function(){var i=this,d=this.props,p=d.delimiter,h=d.isDisabled,m=d.isMulti,g=d.name,x=d.required,v=this.state.selectValue;if(x&&!this.hasValue()&&!h)return b.createElement(j3,{name:g,onFocus:this.onValueInputFocus});if(!(!g||h))if(m)if(p){var N=v.map(function(S){return i.getOptionValue(S)}).join(p);return b.createElement("input",{name:g,type:"hidden",value:N})}else{var C=v.length>0?v.map(function(S,M){return b.createElement("input",{key:"i-".concat(M),name:g,type:"hidden",value:i.getOptionValue(S)})}):b.createElement("input",{name:g,type:"hidden",value:""});return b.createElement("div",null,C)}else{var w=v[0]?this.getOptionValue(v[0]):"";return b.createElement("input",{name:g,type:"hidden",value:w})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,d=this.state,p=d.ariaSelection,h=d.focusedOption,m=d.focusedValue,g=d.isFocused,x=d.selectValue,v=this.getFocusableOptions();return b.createElement(c3,Fe({},i,{id:this.getElementId("live-region"),ariaSelection:p,focusedOption:h,focusedValue:m,isFocused:g,selectValue:x,focusableOptions:v,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),d=i.Control,p=i.IndicatorsContainer,h=i.SelectContainer,m=i.ValueContainer,g=this.props,x=g.className,v=g.id,N=g.isDisabled,C=g.menuIsOpen,w=this.state.isFocused,S=this.commonProps=this.getCommonProps();return b.createElement(h,Fe({},S,{className:x,innerProps:{id:v,onKeyDown:this.onKeyDown},isDisabled:N,isFocused:w}),this.renderLiveRegion(),b.createElement(d,Fe({},S,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:N,isFocused:w,menuIsOpen:C}),b.createElement(m,Fe({},S,{isDisabled:N}),this.renderPlaceholderOrValue(),this.renderInput()),b.createElement(p,Fe({},S,{isDisabled:N}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,d){var p=d.prevProps,h=d.clearFocusValueOnUpdate,m=d.inputIsHiddenAfterUpdate,g=d.ariaSelection,x=d.isFocused,v=d.prevWasFocused,N=d.instancePrefix,C=i.options,w=i.value,S=i.menuIsOpen,M=i.inputValue,j=i.isMulti,E=qg(w),z={};if(p&&(w!==p.value||C!==p.options||S!==p.menuIsOpen||M!==p.inputValue)){var _=S?V3(i,E):[],L=S?l0(bi(i,E),"".concat(N,"-option")):[],R=h?U3(d,E):null,A=G3(d,_),I=yd(L,A);z={selectValue:E,focusedOption:A,focusedOptionId:I,focusableOptionsWithIds:L,focusedValue:R,clearFocusValueOnUpdate:!1}}var U=m!=null&&i!==p?{inputIsHidden:m,inputIsHiddenAfterUpdate:void 0}:{},G=g,W=x&&v;return x&&!W&&(G={value:mi(j,E,E[0]||null),options:E,action:"initial-input-focus"},W=!v),g?.action==="initial-input-focus"&&(G=null),Ue(Ue(Ue({},z),U),{},{prevProps:i,ariaSelection:G,prevWasFocused:W})}}]),o})(b.Component);Mx.defaultProps=H3;var W3=b.forwardRef(function(r,l){var o=i2(r);return b.createElement(Mx,Fe({ref:l},o))}),o0=W3;function vd({containerClass:r,name:l,value:o,options:s,onChange:i,disabled:d=!1,hideLabel:p=!1,hasPin:h,isPinned:m=!1,onTogglePin:g,hasError:x=!1,forceModalOpen:v=!1,onModalClose:N}){const w=Ei(xe=>xe.theme)==="dark",[S,M]=b.useState(!1),j=b.useRef(null),E=b.useRef(null),[z,_]=b.useState([]),[L,R]=b.useState(!1),A=v||S,I=I0(),U=xe=>{if(!Array.isArray(s))return s?.[xe]},G=Array.isArray(s)?s:U("options")??[],W=!!U("image_upload"),K=U("image_folder")??"input",ge="__null__",ae=G.some(xe=>xe===null),re=G.filter(xe=>xe!==null).map(xe=>String(xe)),D=Array.from(new Set([...re,...z])),$=o===null?ge:String(o??""),fe=$.split(/[\\/]/).pop()??$,be=D.includes($)||D.includes(fe),ye=o!=null&&$!==""&&!be,T=be?D.includes($)?$:fe:$,B=[];(o===null||ae)&&B.push({value:ge,label:"None"}),ye&&B.push({value:$,label:$,isMissing:!0}),B.push(...D.map(xe=>({value:xe,label:xe})));const O=B.find(xe=>xe.value===T)??null,F=G.filter(xe=>xe!==null).length,X=v?!0:I&&!(F>0&&F<5),pe=W&&K==="input",J=xe=>{const Ee=xe.replace(/\\/g,"/"),Ae=Ee.lastIndexOf("/"),ft=Ae>=0?Ee.slice(Ae+1):Ee,ut=Ae>=0?Ee.slice(0,Ae):"";return qn(ft,ut,"input")},le=b.useMemo(()=>pe?{DropdownIndicator:null,IndicatorSeparator:null,Option:Ee=>{const{data:Ae}=Ee,ut=Ae.value!==ge&&!Ae.isMissing&&!!Ae.value?J(Ae.value):null;return u.jsx(gx.Option,{...Ee,children:u.jsxs("div",{className:"flex items-center gap-2",children:[ut&&u.jsx("img",{src:ut,alt:"",className:"w-[72px] h-[72px] rounded-sm object-cover bg-gray-100 shrink-0",loading:"lazy",decoding:"async"}),u.jsx("span",{className:"truncate",children:Ae.label})]})})}}:{DropdownIndicator:null,IndicatorSeparator:null},[pe]),ve=["rs-container",h?"rs-has-pin":"rs-no-pin",x?"rs-error":"",ye?"rs-missing":"",d?"rs-disabled":""].filter(Boolean).join(" "),Le=typeof document>"u"?null:document.body,$e=()=>{M(!1),N?.()},ee=xe=>{xe&&i(xe.value===ge?null:xe.value)},Ve=xe=>{ee(xe),$e()},Ne=()=>{d||L||E.current?.click()},Ce=async xe=>{const Ee=xe.target.files?.[0];if(Ee){R(!0);try{const Ae=await k0(Ee,{type:K}),ft=Ae.subfolder?`${Ae.subfolder}/${Ae.name}`:Ae.name;_(ut=>ut.includes(ft)?ut:[...ut,ft]),i(ft)}catch(Ae){console.error("Failed to upload image:",Ae)}finally{R(!1),xe.target.value=""}}},tt=W?u.jsx("button",{type:"button",className:`w-full py-2 px-3 rounded-lg border text-sm font-medium transition-colors ${d||L?"opacity-60 cursor-not-allowed border-gray-200 text-gray-400 bg-white":"border-gray-200 text-gray-700 bg-white hover:border-gray-300 hover:text-gray-900"}`,onClick:Ne,disabled:d||L,children:u.jsxs("span",{className:"inline-flex items-center justify-center gap-2",children:[u.jsx(tf,{className:"w-4 h-4"}),L?"Uploading...":"Load from camera roll"]})}):null,Qe="#111827",we="#6b7280";return X?u.jsxs("div",{className:`${r} combo-control-root combo-control-modal`,children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),u.jsxs("div",{className:`combo-control-trigger relative w-full p-3 comfy-input text-base flex items-center justify-between min-h-[46px] ${d?"opacity-60 cursor-not-allowed":""} ${x?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&M(!0),children:[u.jsx("span",{className:`combo-control-trigger-label truncate min-w-0 flex-1 ${O?"text-gray-900 dark:text-[#e5e7eb]":"text-gray-400 dark:text-gray-500"} ${h?"pr-16":"pr-6"}`,children:O?O.label:"Select..."}),u.jsxs("div",{className:"combo-control-trigger-icons flex items-center absolute right-0 top-0 bottom-0 pointer-events-none",children:[u.jsx("div",{className:"combo-control-chevron px-2 text-gray-400",children:u.jsx(ki,{className:"w-5 h-5"})}),h&&u.jsx("div",{className:"combo-control-pin pointer-events-auto px-2",children:u.jsx(Ma,{isPinned:m,onToggle:g})})]})]}),ye&&u.jsx("div",{className:"mt-1 text-xs text-red-700",children:"Missing on ComfyUI server"}),W&&u.jsxs("div",{className:"combo-control-upload mt-2",children:[tt,u.jsx("input",{ref:E,type:"file",accept:"image/*",className:"hidden",onChange:Ce})]}),u.jsx(lf,{title:l,isOpen:A,onClose:$e,children:u.jsx(o0,{className:ve,classNamePrefix:"rs",options:B,value:O,onChange:Ve,isSearchable:!0,autoFocus:!v,menuIsOpen:v?void 0:!0,controlShouldRenderValue:!0,placeholder:"Search...",filterOption:Fd({ignoreAccents:!0,ignoreCase:!0,trim:!0,matchFrom:"any"}),styles:{menu:xe=>({...xe,position:"static",boxShadow:"none",border:"none",marginTop:"0.5rem",borderRadius:0,backgroundColor:w?"transparent":"#ffffff"}),menuList:xe=>({...xe,maxHeight:"calc(100vh - 160px)",height:"auto",paddingBottom:"2rem",overflowY:"auto",overflowX:"auto",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",touchAction:"pan-y"}),option:(xe,Ee)=>w?xe:{...xe,color:Qe,backgroundColor:Ee.isSelected?"#e5e7eb":Ee.isFocused?"#f3f4f6":"transparent"},singleValue:xe=>({...xe,color:w?xe.color:Qe}),input:xe=>({...xe,color:w?xe.color:Qe}),placeholder:xe=>({...xe,color:w?xe.color:we}),control:xe=>({...xe,borderColor:"#3b82f6",boxShadow:"0 0 0 1px #3b82f6",backgroundColor:w?xe.backgroundColor:"#ffffff",color:w?xe.color:Qe})},components:le,noOptionsMessage:()=>"No matches"})})]}):u.jsxs("div",{className:`${r} combo-control-root combo-control-inline`,children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l}),u.jsxs("div",{className:"combo-control-input-wrapper relative rs-scroll-target",ref:j,children:[u.jsx(o0,{className:ve,classNamePrefix:"rs",options:B,value:O,onChange:ee,isSearchable:!0,isDisabled:d,filterOption:Fd({ignoreAccents:!0,ignoreCase:!0,trim:!0,matchFrom:"any"}),menuPortalTarget:Le,menuPosition:"fixed",menuPlacement:"bottom",menuShouldScrollIntoView:!1,styles:{menuPortal:xe=>({...xe,zIndex:200}),menuList:xe=>({...xe,overflowY:"auto",overflowX:"auto",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",touchAction:"pan-y"}),option:(xe,Ee)=>w?xe:{...xe,color:Qe,backgroundColor:Ee.isSelected?"#e5e7eb":Ee.isFocused?"#f3f4f6":"transparent"},singleValue:xe=>({...xe,color:w?xe.color:Qe}),input:xe=>({...xe,color:w?xe.color:Qe}),placeholder:xe=>({...xe,color:w?xe.color:we})},components:le,noOptionsMessage:()=>"No matches"}),u.jsxs("div",{className:"combo-control-icons absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:[u.jsx("div",{className:"combo-control-chevron px-2 text-gray-400",children:u.jsx(ki,{className:"w-5 h-5"})}),h&&u.jsx("div",{className:"combo-control-pin pointer-events-auto px-2",children:u.jsx(Ma,{isPinned:m,onToggle:g})}),!h&&u.jsx("div",{className:"w-3"})]})]}),ye&&u.jsx("div",{className:"mt-1 text-xs text-red-700",children:"Missing on ComfyUI server"}),W&&u.jsxs("div",{className:"mt-2",children:[tt,u.jsx("input",{ref:E,type:"file",accept:"image/*",className:"hidden",onChange:Ce})]})]})}function cr({name:r,type:l,value:o,options:s,onChange:i,disabled:d=!1,hasError:p=!1,hideLabel:h=!1,compact:m=!1,forceModalOpen:g=!1,onModalClose:x,seedMode:v,onSeedModeChange:N,hasPin:C,isPinned:w=!1,onTogglePin:S,containerClass:M}){const[j,E]=b.useState(!1),z=()=>{d||E(!0)},_=()=>{E(!1),x?.()},L=l==="COMBO"||Array.isArray(s?.options),R=["INT","FLOAT"].includes(l.toUpperCase()),A=l.toUpperCase()==="STRING",I=r.replace(/_/g," "),U=C??(!!S||w),G=M??"space-y-2 w-full",W=M??(m?"mb-0":"mb-3"),K={name:r,value:o,options:s,onChange:i,disabled:d,hideLabel:h,hasError:p,forceModalOpen:g,onModalClose:x,containerClass:G,hasPin:U,isPinned:w,onTogglePin:S},ge=()=>L?u.jsx(vd,{...K}):R?u.jsx(zd,{...K,type:l,seedMode:v,onSeedModeChange:N}):A?u.jsx(Og,{...K}):u.jsxs("div",{className:"unsupported-widget-type text-xs text-gray-400 italic",children:["Unsupported: ",l]}),ae=g||j;if(l==="POWER_LORA_HEADER")return u.jsx("div",{className:`${W} power-lora-header flex items-center justify-between p-3 bg-blue-50/50 dark:bg-blue-900/20 rounded-lg`,children:u.jsxs("div",{className:"power-lora-header-content flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",onChange:re=>i(re.target.checked),className:"w-5 h-5 rounded cursor-pointer",disabled:d}),u.jsx("span",{className:"power-lora-header-label text-sm font-semibold text-blue-900 dark:text-blue-100 uppercase tracking-wider",children:"Toggle All Loras"})]})});if(l==="POWER_LORA"){const re=o||{on:!0,lora:"",strength:1},D=s||{},$=D.choices,fe=D.showSeparate,be=(ye,T)=>{i({...re,[ye]:T})};return u.jsxs("div",{className:`${W} power-lora-row flex flex-col gap-2 p-3 border border-gray-200 dark:border-gray-800 rounded-lg bg-gray-50/50 dark:bg-gray-900/50 ${re.on?"":"opacity-60"}`,children:[u.jsxs("div",{className:"power-lora-row-actions flex items-center gap-2",children:[u.jsx("button",{type:"button",onClick:()=>be("on",!re.on),className:`power-lora-enabled-button flex-1 py-2 rounded-lg text-sm font-semibold transition-colors ${re.on?"bg-blue-600 text-white":"bg-gray-700 text-white"} ${d?"opacity-60 cursor-not-allowed":""}`,disabled:d,children:re.on?"Enabled":"Disabled"}),u.jsx("button",{type:"button",onClick:()=>i(null),className:`power-lora-remove-button flex-1 py-2 rounded-lg text-sm font-semibold bg-red-600 text-white hover:bg-red-700 transition-colors ${d?"opacity-60 cursor-not-allowed":""}`,disabled:d,children:"Remove"})]}),u.jsx("div",{className:"power-lora-row-header flex items-center gap-3",children:u.jsx("div",{className:"power-lora-select flex-grow min-w-0",children:u.jsx(cr,{name:"",hideLabel:!0,compact:!0,type:"COMBO",value:re.lora,options:$,onChange:ye=>be("lora",ye),disabled:d})})}),u.jsxs("div",{className:"power-lora-strengths flex flex-col",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 ml-1",children:fe?"Model strength":"Strength"}),u.jsx("div",{className:"power-lora-strength-row flex items-center gap-3",children:u.jsx("div",{className:"power-lora-strength-input flex-grow",children:u.jsx(cr,{name:"",hideLabel:!0,compact:!0,type:"FLOAT",value:re.strength,options:{min:-10,max:10,step:.01},onChange:ye=>be("strength",ye),disabled:d})})}),fe&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 ml-1",children:"Clip strength"}),fe&&u.jsx("div",{className:"power-lora-strength-row flex items-center gap-3",children:u.jsx("div",{className:"power-lora-strength-input flex-grow",children:u.jsx(cr,{name:"",hideLabel:!0,compact:!0,type:"FLOAT",value:re.strengthTwo??re.strength,options:{min:-10,max:10,step:.01},onChange:ye=>be("strengthTwo",ye),disabled:d})})})]})]})}if(l==="POWER_LORA_ADD"){const re=()=>{i({on:!0,lora:"None",strength:1,model_strength:1,clip_strength:1})};return u.jsx("div",{className:`${W} power-lora-add`,children:u.jsxs("button",{onClick:re,className:"w-full py-2 px-4 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg text-sm font-medium text-gray-500 hover:text-blue-500 hover:border-blue-500 transition-all flex items-center justify-center gap-2",disabled:d,children:[u.jsx(tf,{className:"w-5 h-5"}),"Add Lora"]})})}return A?u.jsx(Og,{...K}):L?u.jsx(vd,{...K}):R?u.jsx(zd,{...K,type:l,seedMode:v,onSeedModeChange:N}):l.toUpperCase()==="BOOLEAN"?u.jsx(vd,{...K,value:String(!!o),options:["true","false"],onChange:re=>i(String(re).toLowerCase()==="true")}):u.jsxs("div",{id:`widget-control-${r}`,className:`widget-control-root ${m?"compact-control":""}`,children:[!h&&u.jsxs("div",{id:`widget-label-container-${r}`,className:"flex items-center justify-between mb-1.5 px-1",children:[u.jsx("label",{id:`widget-label-${r}`,className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider truncate mr-2",children:I}),p&&u.jsx("div",{id:`widget-error-icon-${r}`,className:"text-red-500",title:"Error in this input",children:u.jsx(R0,{className:"w-3.5 h-3.5"})})]}),u.jsxs("div",{id:`widget-trigger-${r}`,className:`
          control-trigger
          relative flex items-center justify-between
          bg-gray-50 border border-gray-200 rounded-xl px-3 py-2.5
          active:bg-gray-100 active:border-gray-300 transition-all
          ${d?"opacity-50 grayscale pointer-events-none":"cursor-pointer"}
          ${p?"border-red-300 bg-red-50/30":""}
        `,onClick:z,children:[u.jsx("div",{id:`widget-value-display-${r}`,className:"value-display flex-1 truncate text-sm font-medium text-gray-900",children:L?o||"Select...":o!=null?String(o):"Empty"}),u.jsx("div",{id:`widget-icon-container-${r}`,className:"icon-container ml-2 text-gray-400"})]}),u.jsx(lf,{isOpen:ae,title:I,onClose:_,children:u.jsx("div",{id:`modal-control-wrapper-${r}`,className:"p-2",children:ge()})})]})}function F3({node:r,isBypassed:l,isKSampler:o,workflowExists:s,nodeTypesExists:i,visibleInputWidgets:d,visibleWidgets:p,errorInputNames:h,onUpdateNodeWidget:m,onUpdateNodeWidgets:g,getWidgetIndexForInput:x,findSeedWidgetIndex:v,setSeedMode:N,isWidgetPinned:C,toggleWidgetPin:w}){const S=Array.isArray(r.widgets_values)?r.widgets_values:[],M=ne(O=>O.nodeTypes),j=ne(O=>O.workflow),E=ne(O=>O.bypassAllInGroup),z=Sn(O=>O.seedModes[r.id]),_=Sn(O=>O.seedLastValues[r.id]??null),L=r.type==="Fast Groups Bypasser (rgthree)",R=!o&&s&&i?v():null,A=R!==null?R+1:null,I=A!==null?S[A]:void 0,U=typeof I=="string",G=!o&&R!==null&&!U,W=G?d.filter(O=>O.name!=="seed"&&O.name!=="noise_seed"):d,K=G?p.filter(O=>O.name!=="seed"&&O.name!=="noise_seed"):p,ge=p.length>0||d.length>0,ae=b.useMemo(()=>{if(!L||!j)return[];const O=r.properties??{},F=typeof O.matchColors=="string"?O.matchColors:"",X=typeof O.matchTitle=="string"?O.matchTitle:"",pe=O.showAllGraphs!==!1,J=typeof O.sort=="string"?O.sort:"position",le=typeof O.customSortAlphabet=="string"?O.customSortAlphabet:"",ve=Se=>{const _e=Se.replace("#","").trim();return/^[0-9a-f]{3}$/i.test(_e)?`#${_e.replace(/(.)/g,"$1$1").toLowerCase()}`:/^[0-9a-f]{6}$/i.test(_e)?`#${_e.toLowerCase()}`:null},Le=Se=>{if(typeof document>"u")return null;const _e=document.createElement("span");if(_e.style.color=Se,!document.body)return null;document.body.appendChild(_e);const Xe=getComputedStyle(_e).color;document.body.removeChild(_e);const We=Xe.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(!We)return null;const[,Pe,Ge,Nt]=We.map(Number);return[Pe,Ge,Nt].some(oe=>Number.isNaN(oe))?null:`#${[Pe,Ge,Nt].map(oe=>oe.toString(16).padStart(2,"0")).join("")}`},$e={nocolor:"#353535",red:"#553333",brown:"#593930",green:"#335533",blue:"#333355",pale_blue:"#3f5159",cyan:"#335555",purple:"#553355",yellow:"#665533",black:"#000000"},ee=Se=>{const _e=[],Xe=Se.trim().toLowerCase();if(Xe){_e.push(Xe);const Ge=$e[Xe.replace(/\s+/g,"")]??$e[Xe];Ge&&_e.push(Ge)}const We=ve(Se);if(We)return _e.push(We),_e;const Pe=Le(Se);return Pe&&_e.push(Pe),_e},Ve=Se=>{const _e=Se.replace("#","").trim();if(!/^[0-9a-f]{6}$/i.test(_e))return null;const Xe=parseInt(_e.slice(0,2),16)/255,We=parseInt(_e.slice(2,4),16)/255,Pe=parseInt(_e.slice(4,6),16)/255,Ge=Math.max(Xe,We,Pe),Nt=Math.min(Xe,We,Pe),oe=Ge-Nt;let et=0;oe!==0&&(Ge===Xe?et=(We-Pe)/oe%6:Ge===We?et=(Pe-Xe)/oe+2:et=(Xe-We)/oe+4,et=Math.round(et*60),et<0&&(et+=360));const lt=(Ge+Nt)/2,jt=oe===0?0:oe/(1-Math.abs(2*lt-1));return{h:et,s:jt,l:lt}},Ne=F.split(",").map(Se=>Se.trim()).filter(Boolean).flatMap(ee),Ce=new Set(Ne),tt=Ne.map(Se=>ve(Se)??Le(Se)).filter(Se=>!!Se).map(Se=>Ve(Se)).filter(Se=>!!Se);let Qe=null;if(X.trim())try{Qe=new RegExp(X,"i")}catch(Se){return console.error(Se),[]}let we=null;if(J==="custom alphabet"){const Se=le.replace(/\n/g,"").trim().toLowerCase();Se&&(we=Se.includes(",")?Se.split(",").map(_e=>_e.trim()).filter(Boolean):Se.split("")),we?.length||(we=null)}const xe=new Map(j.nodes.map(Se=>[Se.id,Se])),Ee=[],Ae=Se=>{if(Ce.size>0){const _e=Se.color?ee(Se.color):[],Xe=Se.color?ve(Se.color):null,We=Xe?Ve(Xe):null,Pe=_e.some(Nt=>Ce.has(Nt))||(Xe?Ce.has(Xe):!1),Ge=!!(We&&tt.some(Nt=>{const oe=Math.abs(Nt.h-We.h);return Math.min(oe,360-oe)<=25}));if(!Pe&&!Ge)return!1}return!(Qe&&!Qe.test(Se.title||""))},ft=(Se,_e)=>{if(!Ae(Se))return;const Xe=T0(j,Se.id,_e);let We=!1;for(const Pe of Xe){const Ge=xe.get(Pe);if(!(!Ge||Ge.mode===4)){We=!0;break}}Ee.push({key:`${_e??"root"}-${Se.id}`,label:Se.title?.trim()||`Group ${Se.id}`,groupId:Se.id,subgraphId:_e,color:Se.color,isEngaged:We,isDisabled:Xe.size===0,group:Se})},ut=r.properties?.__mobile_origin,Ze=ut?.scope==="subgraph"?ut.subgraphId:null;if(pe){for(const Se of j.groups??[])ft(Se,null);for(const Se of j.definitions?.subgraphs??[])for(const _e of Se.groups??[])ft(_e,Se.id)}else if(Ze){const Se=j.definitions?.subgraphs?.find(_e=>_e.id===Ze);for(const _e of Se?.groups??[])ft(_e,Ze)}else for(const Se of j.groups??[])ft(Se,null);return J==="alphanumeric"?Ee.sort((Se,_e)=>Se.label.localeCompare(_e.label)):we?.length?Ee.sort((Se,_e)=>{const Xe=Se.label.toLowerCase(),We=_e.label.toLowerCase();let Pe=-1,Ge=-1;for(const[Nt,oe]of we.entries())if(Pe<0&&Xe.startsWith(oe)&&(Pe=Nt),Ge<0&&We.startsWith(oe)&&(Ge=Nt),Pe>-1&&Ge>-1)break;if(Pe>-1&&Ge>-1){const Nt=Pe-Ge;return Nt===0?Xe.localeCompare(We):Nt}return Pe>-1?-1:Ge>-1?1:Xe.localeCompare(We)}):Ee.sort((Se,_e)=>{const Xe=Se.group.bounding,We=_e.group.bounding;return Xe[1]!==We[1]?Xe[1]-We[1]:Xe[0]-We[0]}),Ee},[L,r.properties,j]),re=O=>()=>{O.isDisabled||E(O.groupId,O.isEngaged,O.subgraphId??void 0)},D=O=>{typeof O=="string"&&["fixed","randomize","increment","decrement"].includes(O)&&N(r.id,O)},$=O=>F=>{m(r.id,O,F),D(F)},fe=O=>F=>{m(r.id,O,F,"seed"),N(r.id,"fixed")},be=O=>()=>{if(!M)return;const F=_o(M,r);m(r.id,O,F,"seed"),N(r.id,"fixed")},ye=O=>()=>{typeof _=="number"&&(m(r.id,O,_,"seed"),N(r.id,"fixed"))},T=O=>F=>{m(r.id,O.widgetIndex,F,O.name)},B=O=>F=>{if(O.type==="POWER_LORA_HEADER"&&typeof F=="boolean"){const{loraIndices:X}=O.options||{};if(X){const pe={},J=r.widgets_values;Array.isArray(J)&&(X.forEach(le=>{const ve=J[le];pe[le]={...ve,on:F}}),g(r.id,pe))}}else m(r.id,O.widgetIndex,F,O.name)};return!ge&&ae.length===0?null:u.jsxs("div",{className:"mb-3",children:[ae.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-300 mb-1.5 uppercase tracking-wide",children:"Groups"}),u.jsx("div",{className:"space-y-2",children:ae.map(O=>u.jsxs("div",{className:`flex items-center justify-between gap-3 rounded-lg border px-3 py-2 bg-gray-50/40 dark:bg-gray-900/60 ${O.isDisabled?"border-gray-200 dark:border-white/10 opacity-60":"border-gray-200 dark:border-white/15"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[u.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:O.color||"#9ca3af"}}),u.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-100 truncate",children:O.label})]}),u.jsx("button",{type:"button",role:"switch","aria-checked":O.isEngaged,onClick:re(O),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${O.isEngaged?"bg-emerald-500":"bg-gray-300"} ${O.isDisabled?"cursor-not-allowed":"cursor-pointer"}`,children:u.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition ${O.isEngaged?"translate-x-5":"translate-x-1"}`})})]},O.key))})]}),ge&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Parameters"}),o&&s&&i&&(()=>{const O=x("seed");if(O===null)return null;const F=S[O],X=O+1,pe=S[X],J=["fixed","increment","decrement","randomize"],ve=!!r.inputs.find(Le=>Le.name==="noise_seed")?.link;return u.jsxs("div",{className:"mb-3",children:[u.jsx(cr,{name:"seed",type:"INT",value:F,onChange:Le=>m(r.id,O,Le,"seed"),disabled:l,hasError:h.has("seed")}),X<S.length&&!ve&&u.jsx(cr,{name:"Control mode",type:"COMBO",value:pe,options:J,onChange:$(X)})]})})(),!o&&s&&i&&(()=>{const O=R;if(O===null)return null;const F=["fixed","randomize","increment","decrement"],X=typeof I=="string"&&!F.includes(I)?[...F,I]:F;if(r.inputs.find(Qe=>Qe.name==="seed"||Qe.name==="noise_seed")?.link!=null)return null;if(U){const Qe=O+1;return u.jsx("div",{className:"mb-3",children:u.jsx(cr,{name:"Seed control",type:"COMBO",value:I,options:X,onChange:$(Qe)})})}const le=d.find(Qe=>Qe.name==="seed"||Qe.name==="noise_seed")?.options??{},ve=typeof le.min=="number"?le.min:void 0,Le=typeof le.max=="number"?le.max:void 0,$e=typeof le.step=="number"?le.step:void 0,ee=Number(S[O]??0),Ve=M0(ee),Ne=z??Ve??"fixed",Ce=Zd(ee)?typeof _=="number"?_:0:ee,tt=h.has("seed")||h.has("noise_seed");return u.jsxs("div",{className:"mb-3",children:[u.jsx(zd,{name:"seed",value:Ce,onChange:fe(O),disabled:l,min:ve,max:Le,step:$e,hasError:tt}),u.jsx(cr,{name:"Seed control",type:"COMBO",value:Ne,options:F,onChange:D}),u.jsxs("div",{className:"grid gap-2 mt-2",children:[u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:()=>N(r.id,"randomize"),disabled:l,children:"Randomize each time"}),u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:be(O),disabled:l,children:"New fixed random"}),u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:ye(O),disabled:l||typeof _!="number",children:"Use last queued seed"})]})]})})(),W.map(O=>u.jsx("div",{className:l?"opacity-80":"",children:u.jsx(cr,{name:O.name,type:O.type,value:O.value,options:O.options,onChange:T(O),disabled:l,isPinned:C(O.widgetIndex),onTogglePin:()=>w(O.widgetIndex,O.name,O.type,O.options),hasError:h.has(O.name)})},`input-widget-${O.name}`)),K.map(O=>u.jsx("div",{className:l?"opacity-80":"",children:u.jsx(cr,{name:O.name,type:O.type,value:O.value,options:O.options,onChange:B(O),disabled:l,isPinned:C(O.widgetIndex),onTogglePin:()=>w(O.widgetIndex,O.name,O.type,O.options),hasError:h.has(O.name)})},`widget-${O.widgetIndex}`)),r.type==="PrimitiveNode"&&(()=>{const O=r.outputs?.[0]?.type,F=String(O).toUpperCase();if(F!=="INT"&&F!=="FLOAT"||S.length<2)return null;const X=S[1],pe=["fixed","increment","decrement","randomize"];return u.jsx("div",{className:"mb-3",children:u.jsx(cr,{name:"Control mode",type:"COMBO",value:X,options:pe,onChange:J=>m(r.id,1,J),disabled:l})})})()]})]})}const $3=[],Y3=b.memo(function({node:l,isExecuting:o,isConnectionHighlighted:s=!1,errorBadgeLabel:i,onImageClick:d,inGroup:p=!1}){const h=ne(se=>se.nodeTypes),m=ne(se=>se.workflow),g=ne(se=>se.updateNodeWidget),x=ne(se=>se.updateNodeWidgets),v=ne(se=>se.updateNodeTitle),N=ne(se=>se.toggleBypass),C=ne(se=>se.toggleNodeFold),w=ne(se=>se.hideNode),S=ne(se=>se.setConnectionHighlightMode),M=ne(se=>se.connectionHighlightModes[l.id]??"off"),j=Sn(se=>se.setSeedMode),E=ne(se=>se.currentWorkflowKey),z=Gn(se=>se.pinnedWidget?.nodeId===l.id?se.pinnedWidget:null),_=Gn(se=>se.setPinnedWidget),L=bn(se=>se.bookmarkedNodeIds),R=bn(se=>se.toggleNodeBookmark),A=ne(se=>se.nodeOutputs[String(l.id)]),I=Zt(se=>se.nodeErrors[String(l.id)]),U=ne(se=>se.progress),G=ne(se=>se.executingPromptId),W=ne(se=>se.workflowDurationStats),K=ne(se=>se.isExecuting),ge=rt(se=>se.running),ae=G||(ge[0]?.prompt_id??null),re=Go({workflow:m,runKey:ae,isRunning:K||ge.length>0,workflowDurationStats:W}),D=re===100?100:U,$=b.useCallback((se,Ke)=>{j(se,Ke,{workflow:m,nodeTypes:h,updateNodeWidgets:x})},[h,j,x,m]),fe=b.useCallback(se=>{_(se,E)},[E,_]),be=A??$3,[ye,T]=b.useState(null),[B,O]=b.useState(!1),F=b.useRef(null),[X,pe]=b.useState(!1),[J,le]=b.useState(!1),[ve,Le]=b.useState(""),$e=b.useRef(null),ee=b.useRef(0),Ve=b.useRef(null),[Ne,Ce]=b.useState(null);b.useEffect(()=>{const se=Ke=>{const It=Ke.detail;if(It.nodeId===l.id){Ce(It.label);const Ht=setTimeout(()=>Ce(null),1e3);return()=>clearTimeout(Ht)}};return window.addEventListener("node-show-label",se),()=>window.removeEventListener("node-show-label",se)},[l.id]);const tt=I&&I.length>0,Qe=b.useMemo(()=>I?new Set(I.map(se=>se.inputName).filter(se=>!!se)):new Set,[I]),we=be.length>0?be[be.length-1]:null,xe=we?`${we.filename}|${we.subfolder}|${we.type}`:null,Ee=ye?`${ye.filename}|${ye.subfolder}|${ye.type}`:null;b.useEffect(()=>{if(!we||xe===Ee)return;const se=qn(we.filename,we.subfolder,we.type),Ke=new Image;Ke.onload=()=>T(we),Ke.src=se},[xe,Ee,we]);const Ae=h?.[l.type],ft=b.useMemo(()=>{const se=l.title;return typeof se=="string"&&se.trim()?se.trim():null},[l]),ut=ft||Ae?.display_name||l.type,Ze=l.type==="KSampler",Se=l.mode===4,_e=!!l.flags?.collapsed,Xe=/LoadImage/i.test(l.type),Pe=b.useMemo(()=>!Xe||!m||!h?null:Q3(m,h,l),[Xe,l,h,m])??ye,Ge=b.useMemo(()=>{const se=Kd(h,l);return Ze?se.filter(Ke=>Ke.name!=="seed"):se},[h,l,Ze]),Nt=b.useMemo(()=>Jd(h,l),[h,l]),oe=b.useMemo(()=>Nt.filter(se=>!se.connected),[Nt]),et=b.useMemo(()=>Ge.filter(se=>!se.connected),[Ge]),lt=b.useMemo(()=>{const se=l.properties,Ke=["text","note","description","label","title"];if(se)for(const Ht of Ke){const cn=se[Ht];if(typeof cn=="string"&&cn.trim())return cn}if(/note|comment|sticky|label/i.test(l.type)&&Array.isArray(l.widgets_values)){const Ht=l.widgets_values.find(cn=>typeof cn=="string"&&cn.trim());if(typeof Ht=="string"&&Ht.trim())return Ht}return null},[l.properties,l.widgets_values,l.type]),jt=b.useMemo(()=>{if(!/note|comment|sticky|label/i.test(l.type)||!Array.isArray(l.widgets_values))return null;const Ke=l.widgets_values.findIndex(It=>typeof It=="string"&&It.trim());return Ke>=0?Ke:null},[l.type,l.widgets_values]),Vt=se=>!m||!h?null:vl(m,h,l,se),$n=()=>!m||!h?null:Ea(m,h,l),fr=se=>{jt!==null&&g(l.id,jt,se)},or=b.useMemo(()=>{if(!lt)return null;const se=[],Ke=/(https?:\/\/[^\s]+)/g;let It=0,Ht,cn=0;for(;(Ht=Ke.exec(lt))!==null;){const[fn]=Ht,Yn=Ht.index;Yn>It&&se.push(lt.slice(It,Yn)),se.push(u.jsx("a",{href:fn,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline break-all",children:fn},`note-link-${cn++}`)),It=Yn+fn.length}return It<lt.length&&se.push(lt.slice(It)),se},[lt]),An=()=>{const se=Date.now();se-ee.current<300&&pe(!0),ee.current=se},ln=b.useMemo(()=>{const se=[];return oe.forEach(Ke=>{se.push({widgetIndex:Ke.widgetIndex,name:Ke.name,type:Ke.type,options:Ke.options})}),et.forEach(Ke=>{se.push({widgetIndex:Ke.widgetIndex,name:Ke.name,type:Ke.type,options:Ke.options})}),se},[oe,et]),an=b.useCallback(se=>{if(se.link!=null)return!1;if(se.widget)return!0;const Ke=Ae?.input?.required?.[se.name]||Ae?.input?.optional?.[se.name];if(!Ke)return!1;const[It,Ht]=Ke;if(Array.isArray(It))return!0;const cn=String(It).toUpperCase(),fn=Object.prototype.hasOwnProperty.call(Ht??{},"default");return["INT","FLOAT","BOOLEAN","STRING"].includes(cn)||fn},[Ae]),on=b.useMemo(()=>l.inputs.filter(se=>!(an(se)||String(se.type).toUpperCase()==="OPT_CONNECTION"&&se.link==null)),[l.inputs,an]),Rn=b.useMemo(()=>l.outputs.filter(se=>!((se.name||"").toLowerCase().replace(/[_\s]/g,"")==="showhelp"||String(se.type).toUpperCase()==="OPT_CONNECTION"&&!se.links?.length)),[l.outputs]),Me=l.outputs.some(se=>String(se.type).toUpperCase()==="IMAGE"),ze=!!(Ae?.output_node||/PreviewImage|SaveImage|SaveAnimatedPNG|SaveAnimatedWEBP|SaveVideo/i.test(l.type)),V=se=>z?.widgetIndex===se,ce=(se,Ke,It,Ht)=>{V(se)?fe(null):fe({nodeId:l.id,widgetIndex:se,widgetName:Ke,widgetType:It,options:Ht})},ue=ln.length===1?ln[0]:null,ke=ue?V(ue.widgetIndex):!1,Be=!!z,Ye=L.includes(l.id),Re=L.length<5||Ye,ot=(Me||ze)&&!!Pe,pt=l.inputs?.filter(se=>se.link!=null).length??0,gt=l.outputs?.reduce((se,Ke)=>se+(Ke.links?.length??0),0)??0,xt=Math.min(3,pt),yt=Math.min(3,gt),vt=Pe?(()=>{const{filename:se,subfolder:Ke,type:It}=Pe,Ht=qn(se,Ke,It),cn=Ke?`${Ke}/${se}`:se,fn=qo(se);return[{src:Ht,alt:ut,filename:se,mediaType:fn,file:{id:`${It}/${cn}`,name:se,type:fn==="video"?"video":"image",fullUrl:Ht}}]})():[];b.useEffect(()=>{if(!J)return;const se=$e.current;se&&(se.focus(),se.select())},[J]);const Dt=()=>{Le(ut),le(!0)},qt=()=>{const se=ve.trim();v(l.id,se.length>0?se:null),le(!1)},Nn=!!(Ne&&!/^error\b/i.test(Ne));return u.jsxs("div",{id:`node-card-wrapper-${l.id}`,className:"relative node-card-outer",children:[u.jsx("div",{id:`node-anchor-${l.id}`,className:"absolute -top-3 left-0 right-0 h-0 node-scroll-anchor"}),Nn&&u.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 z-[100] animate-in fade-in slide-in-from-bottom-2 duration-200",children:u.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg whitespace-nowrap uppercase tracking-tighter ring-2 ring-white",children:Ne})}),i&&u.jsx("div",{className:"absolute top-2 right-2 z-[110] animate-in fade-in duration-150",children:u.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg whitespace-nowrap uppercase tracking-tighter ring-2 ring-white",children:i})}),u.jsxs("div",{id:`node-card-${l.id}`,className:`
        node-card-inner
        ${p?"rounded-lg shadow-sm py-1":"rounded-xl shadow-md px-3 py-1 mb-3"}
        border-2
        ${tt?"border-red-700 shadow-red-200":s?"border-orange-500 shadow-orange-200":o?"border-green-500 shadow-green-200":Se?"border-purple-300":"border-transparent"}
        ${Se?_e?"bg-purple-200":"bg-purple-100/50":"bg-white"}
      `,style:{overflow:"visible"},children:[u.jsx(t2,{nodeId:l.id,displayName:ut,isEditingLabel:J,labelValue:ve,labelInputRef:$e,onLabelChange:Le,onLabelBlur:qt,isCollapsed:_e,isBypassed:Se,isExecuting:o,overallProgress:re,hasErrors:tt,errorIconRef:Ve,errorPopoverOpen:B,setErrorPopoverOpen:O,toggleNodeFold:C,rightSlot:u.jsx(Zb,{nodeId:l.id,isBypassed:Se,onEditLabel:Dt,pinnableWidgets:ln,singlePinnableWidget:ue,isSingleWidgetPinned:ke,hasPinnedWidget:Be,toggleWidgetPin:ce,setPinnedWidget:fe,isNodeBookmarked:Ye,canAddNodeBookmark:Re,onToggleNodeBookmark:()=>R(l.id),toggleBypass:N,hideNode:w,connectionHighlightMode:M,setConnectionHighlightMode:S,leftLineCount:xt,rightLineCount:yt})}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${_e?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden transition-opacity duration-200 ease-out ${_e?"opacity-0":"opacity-100"}`,children:[ft&&u.jsx("div",{className:"node-card-subtitle text-[10px] text-center font-semibold uppercase tracking-wider text-gray-400 mb-2 px-1",children:Ae?.display_name||l.type}),u.jsxs("div",{id:`node-content-${l.id}`,className:`node-expanded-content ${Se?"opacity-60 grayscale":""}`,children:[u.jsx(Pb,{nodeId:l.id,inputs:on,outputs:Rn,allInputs:l.inputs,allOutputs:l.outputs}),u.jsx(F3,{node:l,isBypassed:Se,isKSampler:Ze,workflowExists:!!m,nodeTypesExists:!!h,visibleInputWidgets:oe,visibleWidgets:et,errorInputNames:Qe,onUpdateNodeWidget:g,onUpdateNodeWidgets:x,getWidgetIndexForInput:Vt,findSeedWidgetIndex:$n,setSeedMode:$,isWidgetPinned:V,toggleWidgetPin:ce}),lt&&u.jsx(Jb,{noteText:lt,noteLinkified:or,noteWidgetIndex:jt,isEditingNote:X,setIsEditingNote:pe,onUpdateNote:fr,noteTextareaRef:F,onNoteTap:An}),u.jsx(e2,{show:ot,previewImage:Pe,displayName:ut,onImageClick:()=>d?.(vt,0),isExecuting:!!o,overallProgress:re,displayNodeProgress:D})]})]})})]}),u.jsx(Kb,{nodeId:l.id,open:B&&tt,errors:I??[],anchorRef:Ve,onClose:()=>O(!1)})]})});function Q3(r,l,o){if(!l)return null;const s=vl(r,l,o,"image")??vl(r,l,o,"filename")??vl(r,l,o,"file");if(s==null||!Array.isArray(o.widgets_values))return null;const i=o.widgets_values[s];return X3(i)}function X3(r){if(typeof r=="string"&&r.trim()){const{filename:h,subfolder:m}=s0(r.trim());return{filename:h,subfolder:m,type:"input"}}if(!r||typeof r!="object")return null;const l=r,o=typeof l.filename=="string"?l.filename:typeof l.name=="string"?l.name:null;if(!o||!o.trim())return null;const s=typeof l.subfolder=="string"?l.subfolder:"",i=typeof l.type=="string"?l.type:"input",{filename:d,subfolder:p}=s0(o.trim());return{filename:d,subfolder:s||p,type:i}}function s0(r){const l=r.replace(/^\/+/,""),o=l.split("/").filter(Boolean);return o.length<=1?{filename:l,subfolder:""}:{filename:o.pop()??l,subfolder:o.join("/")}}function P3({group:r,nodeCount:l,isCollapsed:o,subgraphId:s=null,bookmarkNodeId:i=null,hiddenNodeCount:d=0,foldAllLabel:p,onToggleCollapse:h,onToggleFoldAll:m,onBypassAll:g,onHideGroup:x,onShowHiddenNodes:v}){const N=ne(X=>X.updateGroupTitle),C=bn(X=>X.bookmarkedNodeIds),w=bn(X=>X.toggleNodeBookmark),[S,M]=b.useState(!1),[j,E]=b.useState(!1),[z,_]=b.useState(""),L=b.useRef(null),R=b.useRef(null),A=b.useRef(null),[I,U]=b.useState(null);b.useEffect(()=>{if(!S)return;const X=()=>{const le=A.current;if(!le)return;const ve=le.getBoundingClientRect();U({top:ve.bottom+6,left:ve.right-160})};X();const pe=le=>{!R.current||!le.target||A.current?.contains(le.target)||R.current.contains(le.target)||M(!1)},J=le=>{const ve=le.target;R.current&&ve&&R.current.contains(ve)||M(!1)};return document.addEventListener("mousedown",pe),document.addEventListener("scroll",J,!0),window.addEventListener("resize",X),()=>{document.removeEventListener("mousedown",pe),document.removeEventListener("scroll",J,!0),window.removeEventListener("resize",X)}},[S]);const G=Gr(r.color,.22),W=Gr(r.color,.4),K=r.title?.trim()||`Group ${r.id}`;b.useEffect(()=>{if(!j)return;const X=L.current;X&&(X.focus(),X.select())},[j]);const ge=()=>{j||h()},ae=X=>{X.stopPropagation(),h()},re=()=>{N(r.id,z,s),E(!1)},D=X=>{X.stopPropagation(),M(pe=>!pe)},$=X=>{X.stopPropagation(),_(K),E(!0),M(!1)},fe=X=>{X.stopPropagation(),m(),M(!1)},be=X=>pe=>{pe.stopPropagation(),g(X),M(!1)},ye=X=>{X.stopPropagation(),x(),M(!1)},T=X=>{X.stopPropagation(),v?.(),M(!1)},B=i!=null&&C.includes(i),O=i!=null&&(C.length<5||B),F=d>0&&!!v;return u.jsxs("div",{id:`group-header-${r.id}`,className:`group-header flex items-center justify-between cursor-pointer gap-3 px-3 py-2 ${o?"rounded-xl":"rounded-t-xl mb-2"}`,style:{backgroundColor:G,borderColor:W},onClick:ge,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[u.jsx("button",{onClick:ae,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-500 hover:text-gray-700 shrink-0",children:o?u.jsx(Il,{className:"w-6 h-6"}):u.jsx(Wn,{className:"w-6 h-6"})}),j?u.jsx("input",{ref:L,value:z,onChange:X=>_(X.target.value),onBlur:re,onKeyDown:X=>{(X.key==="Enter"||X.key==="Escape")&&X.currentTarget.blur()},onClick:X=>X.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{className:"font-semibold text-gray-900 select-none flex-1 min-w-0 whitespace-nowrap overflow-hidden text-ellipsis",children:K}),o&&u.jsxs("span",{className:"text-sm text-gray-500 shrink-0",children:["(",l," node",l!==1?"s":"",")"]})]}),u.jsxs("div",{className:"flex items-center gap-1",onClick:X=>X.stopPropagation(),children:[u.jsx("button",{onClick:D,className:"w-8 h-8 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent","aria-label":"Group options",ref:A,children:u.jsx(bl,{className:"w-5 h-5 -rotate-90"})}),S&&I&&lr.createPortal(u.jsxs("div",{ref:R,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:I.top,left:I.left},children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:$,children:[u.jsx(ef,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",onClick:X=>{X.stopPropagation(),i!=null&&(w(i),M(!1))},disabled:!O,children:[B?u.jsx(Mi,{className:"w-4 h-4 text-gray-500"}):u.jsx(Vl,{className:"w-4 h-4 text-yellow-500"}),B?"Remove bookmark":"Bookmark node"]}),u.jsx("div",{className:"border-t border-gray-200 my-1"}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:fe,children:[p==="Fold all"?u.jsx(Il,{className:"w-4 h-4 text-gray-500"}):u.jsx(Wn,{className:"w-4 h-4 text-gray-500"}),p]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:be(!0),children:[u.jsx(Rd,{className:"w-4 h-4 text-gray-500",isBypassed:!0}),"Bypass all nodes"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:be(!1),children:[u.jsx(Rd,{className:"w-4 h-4 text-gray-500",isBypassed:!1}),"Engage all nodes"]}),F&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:T,children:[u.jsx(dr,{className:"w-4 h-4 text-gray-500"}),"Show hidden nodes"]}),u.jsx("div",{className:"border-t border-gray-200 my-1"}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ye,children:[u.jsx(dr,{className:"w-4 h-4 text-gray-500"}),"Hide group"]})]}),document.body)]})]})}function Z3({group:r}){const l=Gr(r.color,.15),o=Gr(r.color,.3),s=()=>{document.getElementById(`group-header-${r.id}`)?.scrollIntoView({behavior:"smooth",block:"start"})};return u.jsx("div",{id:`group-footer-${r.id}`,className:"group-footer px-3 py-1.5 -mx-1 rounded-b-xl cursor-pointer",onClick:s,style:{backgroundColor:l,borderColor:o},children:u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 select-none",children:r.title})})}function K3({group:r}){const l=Gr(r.color,.05),o=Gr(r.color,.3),s=Gr(r.color,.4);return u.jsx("div",{id:`group-placeholder-${r.id}`,className:"group-placeholder flex items-center justify-center px-4 py-6 border-l border-r",style:{backgroundColor:l,borderColor:o},children:u.jsx("div",{className:"w-full rounded-lg border-2 border-dashed flex items-center justify-center py-4",style:{borderColor:s},children:u.jsx("span",{className:"text-sm text-gray-400 select-none",children:"No nodes in group"})})})}const i0="rgba(59, 130, 246, 0.14)",u0="rgba(59, 130, 246, 0.25)";function J3({subgraph:r,nodeCount:l,isCollapsed:o,onToggleCollapse:s}){const i=ne(U=>U.updateSubgraphTitle),d=ne(U=>U.setSubgraphHidden),[p,h]=b.useState(!1),[m,g]=b.useState(!1),[x,v]=b.useState(""),N=b.useRef(null),C=b.useRef(null),w=b.useRef(null),[S,M]=b.useState(null),E=(r.name||r.id).trim()||r.id;b.useEffect(()=>{if(!p)return;const U=()=>{const K=w.current;if(!K)return;const ge=K.getBoundingClientRect();M({top:ge.bottom+6,left:ge.right-160})};U();const G=K=>{!C.current||!K.target||w.current?.contains(K.target)||C.current.contains(K.target)||h(!1)},W=K=>{const ge=K.target;C.current&&ge&&C.current.contains(ge)||h(!1)};return document.addEventListener("mousedown",G),document.addEventListener("scroll",W,!0),window.addEventListener("resize",U),()=>{document.removeEventListener("mousedown",G),document.removeEventListener("scroll",W,!0),window.removeEventListener("resize",U)}},[p]),b.useEffect(()=>{if(!m)return;const U=N.current;U&&(U.focus(),U.select())},[m]);const z=()=>{m||s()},_=U=>{U.stopPropagation(),s()},L=()=>{i(r.id,x),g(!1)},R=U=>{U.stopPropagation(),h(G=>!G)},A=U=>{U.stopPropagation(),v(E),g(!0),h(!1)},I=U=>{U.stopPropagation(),d(r.id,!0),h(!1)};return u.jsxs("div",{id:`subgraph-header-${r.id}`,className:`subgraph-header flex items-center justify-between cursor-pointer gap-3 px-3 py-2 ${o?"rounded-xl":"rounded-t-xl mb-3"}`,style:{backgroundColor:`var(--subgraph-bg, ${i0})`,borderColor:`var(--subgraph-border, ${u0})`,"--subgraph-bg":i0,"--subgraph-border":u0},onClick:z,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[u.jsx("button",{onClick:_,className:"w-8 h-8 -ml-2 flex items-center justify-center text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 shrink-0",children:o?u.jsx(Il,{className:"w-6 h-6"}):u.jsx(Wn,{className:"w-6 h-6"})}),m?u.jsx("input",{ref:N,value:x,onChange:U=>v(U.target.value),onBlur:L,onKeyDown:U=>{(U.key==="Enter"||U.key==="Escape")&&U.currentTarget.blur()},onClick:U=>U.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 select-none flex-1 min-w-0 whitespace-nowrap overflow-hidden text-ellipsis",children:E}),o&&u.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400 shrink-0",children:["(",l," node",l!==1?"s":"",")"]})]}),u.jsx("button",{onClick:R,className:"flex items-center text-blue-400 dark:text-blue-500 opacity-60 hover:opacity-100","aria-label":"Subgraph options",ref:w,children:u.jsx(_a,{className:"w-5 h-5"})}),p&&S&&lr.createPortal(u.jsxs("div",{ref:C,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:S.top,left:S.left},children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:A,children:[u.jsx(ef,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:I,children:[u.jsx(dr,{className:"w-4 h-4 text-gray-500"}),"Hide subgraph"]})]}),document.body)]})}const e5="rgba(59, 130, 246, 0.1)",t5="rgba(59, 130, 246, 0.2)";function n5({subgraph:r}){const l=r.name||r.id,o=()=>{document.getElementById(`subgraph-header-${r.id}`)?.scrollIntoView({behavior:"smooth",block:"start"})};return u.jsx("div",{id:`subgraph-footer-${r.id}`,className:"subgraph-footer px-3 py-1.5 -mx-1 rounded-b-xl cursor-pointer",onClick:o,style:{backgroundColor:e5,borderColor:t5},children:u.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-500 select-none",children:l})})}function hi(r){return String(r).split(",").map(l=>l.trim().toUpperCase()).filter(Boolean)}function c0(r){return r.toLowerCase().replace(/[_-]+/g," ").replace(/\s+/g," ").trim()}function r5(r,l){let o=0;for(const s of l)if(s===r[o]&&(o+=1,o>=r.length))return!0;return r.length===0}function d0(r,l){if(!r.trim())return!0;const o=c0(l);return c0(r).split(" ").filter(Boolean).every(s=>o.includes(s)||r5(s,o))}function l5({visible:r,onImageClick:l}){const o=ne(V=>V.workflow),s=ne(V=>V.executingNodeId),i=ne(V=>V.connectionHighlightModes),d=ne(V=>V.manuallyHiddenNodes),p=bn(V=>V.bookmarkBarSide),h=bn(V=>V.bookmarkBarTop),m=bn(V=>V.setBookmarkBarPosition),g=bn(V=>V.setBookmarkRepositioningActive),x=ne(V=>V.ensureNodeExpanded),v=ne(V=>V.scrollToNode),N=ne(V=>V.revealNodeWithParents),C=ne(V=>V.nodeTypes),w=Zt(V=>V.nodeErrors),S=ne(V=>V.searchOpen),M=ne(V=>V.searchQuery),j=ne(V=>V.setSearchQuery),E=ne(V=>V.setSearchOpen),z=ne(V=>V.collapsedGroups),_=ne(V=>V.hiddenGroups),L=ne(V=>V.hiddenSubgraphs),R=ne(V=>V.toggleGroupCollapse),A=ne(V=>V.setGroupCollapsed),I=ne(V=>V.setGroupHidden),U=ne(V=>V.bypassAllInGroup),G=ne(V=>V.collapsedSubgraphs),W=ne(V=>V.toggleSubgraphCollapse),K=ne(V=>V.setSubgraphCollapsed),ge=ne(V=>V.setNodeFold),ae=bn(V=>V.bookmarkedNodeIds),re=b.useRef(null),D=b.useRef(null),$=b.useRef(null),fe=b.useRef(null),[be,ye]=b.useState(0),[T,B]=b.useState(!1),[O,F]=b.useState(!1),[X,pe]=b.useState(null),[J,le]=b.useState({}),ve=b.useRef(new Map),Le=b.useRef(null),$e=b.useRef(null),ee=b.useRef(null),Ve=()=>{j(""),E(!1)},Ne=b.useCallback((V,ce)=>{N(V),window.dispatchEvent(new CustomEvent("workflow-scroll-to-node",{detail:{nodeId:V,label:ce}})),v(V,ce)},[N,v]),Ce=b.useCallback((V,ce)=>()=>{if(T){B(!1),F(!1),pe(null);return}ye(ce),Ne(V)},[T,Ne]),tt=b.useCallback(()=>{if(T){B(!1),F(!1),pe(null);return}const V=(be+1)%ae.length;ye(V),Ne(ae[V])},[ae,be,T,Ne]),Qe=b.useCallback(()=>{Le.current!=null&&(window.clearTimeout(Le.current),Le.current=null)},[]),we=b.useCallback(()=>{const V=getComputedStyle(document.documentElement).getPropertyValue("--bottom-bar-offset"),ce=Number.parseFloat(V);return Number.isFinite(ce)?ce:0},[]),xe=b.useCallback(()=>{const V=re.current,ce=D.current;if(!V||!ce)return null;const ue=V.getBoundingClientRect().height,ke=ce.getBoundingClientRect().height,Be=16,Ye=we()+8,Re=Math.max(Be,ue-ke-Ye);return{minTop:Be,maxTop:Re}},[we]),Ee=b.useCallback(V=>{const ce=xe();return ce?Math.min(Math.max(V,ce.minTop),ce.maxTop):V},[xe]),Ae=b.useCallback((V,ce)=>{const ue=re.current,ke=ee.current;if(!ue||!ke)return;const Be=ue.getBoundingClientRect(),Ye=V-Be.left-ke.x,Re=Ee(ce-Be.top-ke.y);pe({x:Ye,y:Re})},[Ee]),ft=b.useCallback((V,ce)=>{const ue=re.current,ke=D.current;if(!ue||!ke)return;const Be=ke.getBoundingClientRect(),Ye=ue.getBoundingClientRect();ee.current={x:V-Be.left,y:ce-Be.top};const Re=Be.left-Ye.left,ot=Ee(Be.top-Ye.top);pe({x:Re,y:ot}),F(!0)},[Ee]),ut=b.useCallback(V=>{V.pointerType==="mouse"&&V.button!==0||(V.preventDefault(),$e.current={startX:V.clientX,startY:V.clientY,startTime:Date.now(),pointerId:V.pointerId},T?ft(V.clientX,V.clientY):Le.current=window.setTimeout(()=>{B(!0),ft(V.clientX,V.clientY)},500),V.currentTarget.setPointerCapture(V.pointerId))},[T,ft]),Ze=b.useCallback(V=>{if(O){Ae(V.clientX,V.clientY);return}const ce=$e.current;if(!ce)return;const ue=V.clientX-ce.startX,ke=V.clientY-ce.startY;Math.hypot(ue,ke)>8&&Qe()},[Qe,O,Ae]),Se=b.useCallback(()=>{const V=re.current,ce=D.current;if(!V||!ce||!X)return;const ue=V.getBoundingClientRect(),ke=ce.getBoundingClientRect().width,Ye=X.x+ke/2<ue.width/2?"left":"right",Re=Ee(X.y);m({side:Ye,top:Re}),pe(null)},[X,Ee,m]),_e=b.useCallback(V=>{Qe();const ce=$e.current;if($e.current=null,O){Se(),F(!1);return}if(T||!ce)return;const ue=V.clientX-ce.startX,ke=V.clientY-ce.startY,Be=Date.now()-ce.startTime;Math.abs(ue)>40&&Math.abs(ue)>Math.abs(ke)&&Be<500&&m({side:p==="left"?"right":"left"})},[p,Qe,Se,O,T,m]),Xe=b.useCallback(()=>{Qe(),$e.current=null,F(!1),pe(null)},[Qe]),We=b.useMemo(()=>{if(!o)return[];const V=z1(o);return Object.keys(d).length===0?V:V.filter(ce=>!d[ce.id])},[o,d]),Pe=M.trim(),Ge=S&&Pe.length>0,Nt=b.useMemo(()=>o?$b(o):new Map,[o]),oe=b.useMemo(()=>{if(!Ge||!o)return new Set;const V=o.groups??[],ce=new Set;for(const ue of V)d0(Pe,ue.title)&&ce.add(ue.id);return ce},[o,Ge,Pe]),et=b.useMemo(()=>Ge?We.filter(V=>{const ce=Nt.get(V.id);if(ce!==void 0&&oe.has(ce))return!0;const ue=C?.[V.type],ke=V.title,Be=[typeof ke=="string"?ke:"",ue?.display_name??"",V.type,String(V.id)];return d0(Pe,Be.join(" "))}):We,[We,Ge,Pe,C,Nt,oe]),lt=b.useMemo(()=>o?Ge?et.map(V=>({type:"node",node:V,groupId:null,subgraphId:null})):Qb(et,o,z,_,G,L):[],[o,et,z,_,G,L,Ge]),jt=b.useMemo(()=>{const V=new Map;let ce=0;for(const ue of We){const ke=w[String(ue.id)];ke&&ke.length>0&&(ce+=1,V.set(ue.id,ce))}return V},[We,w]),Vt=b.useMemo(()=>{if(!o)return new Set;const V=Object.entries(i).filter(([,Re])=>Re!=="off").map(([Re,ot])=>({id:Number(Re),mode:ot}));if(V.length===0)return new Set;const ce=new Map(o.nodes.map(Re=>[Re.id,Re])),ue=new Set,ke=Re=>!!d[Re.id],Be=(Re,ot,pt)=>{if(ot.has(Re))return[];ot.add(Re);const gt=ce.get(Re);if(!gt)return[];const xt=[];return gt.outputs?.forEach((yt,vt)=>{const Dt=hi(yt.type);if(pt.size>0&&!Dt.some(Nn=>pt.has(Nn)))return;Ni(o,Re,vt).forEach(Nn=>{const se=Nn.node;ke(se)?xt.push(...Be(se.id,ot,pt)):xt.push(se)})}),xt},Ye=(Re,ot,pt)=>{if(ot.has(Re))return[];ot.add(Re);const gt=ce.get(Re);if(!gt)return[];const xt=[];return gt.inputs?.forEach((yt,vt)=>{if(yt.link===null)return;const Dt=hi(yt.type);if(pt.size>0&&!Dt.some(Nn=>pt.has(Nn)))return;const qt=Ao(o,Re,vt);qt&&(ke(qt.node)?xt.push(...Ye(qt.node.id,ot,pt)):xt.push(qt.node))}),xt};return V.forEach(({id:Re,mode:ot})=>{const pt=ce.get(Re);pt&&((ot==="inputs"||ot==="both")&&pt.inputs?.forEach((gt,xt)=>{if(gt.link===null)return;const yt=Ao(o,pt.id,xt);if(!yt)return;if(!ke(yt.node)){ue.add(yt.node.id);return}const vt=new Set(hi(gt.type));Ye(yt.node.id,new Set,vt).forEach(qt=>ue.add(qt.id))}),(ot==="outputs"||ot==="both")&&pt.outputs?.forEach((gt,xt)=>{const yt=new Set(hi(gt.type));Ni(o,pt.id,xt).forEach(Dt=>{const qt=Dt.node;if(!ke(qt)){ue.add(qt.id);return}Be(qt.id,new Set,yt).forEach(se=>ue.add(se.id))})}))}),ue},[o,i,d]);b.useEffect(()=>{const V=ce=>{const ue=ce.detail,ke=typeof ue=="number"?ue:ue.nodeId,Be=typeof ue=="object"?ue.label:void 0;if(typeof ke!="number"||!et.some(xt=>xt.id===ke))return;const Re=jt.get(ke),ot=Be??(Re?`Error #${Re}`:"Error");le(xt=>({...xt,[ke]:ot}));const pt=ve.current.get(ke);pt&&window.clearTimeout(pt);const gt=window.setTimeout(()=>{le(xt=>{const yt={...xt};return delete yt[ke],yt}),ve.current.delete(ke)},2e3);ve.current.set(ke,gt)};return window.addEventListener("workflow-label-error-node",V),()=>window.removeEventListener("workflow-label-error-node",V)},[et,jt]),b.useEffect(()=>{const V=ve.current;return()=>{V.forEach(ce=>window.clearTimeout(ce)),V.clear()}},[]),b.useEffect(()=>{const V=ce=>{const ue=ce.detail,ke=typeof ue=="number"?ue:ue.nodeId,Be=typeof ue=="object"?ue.label:void 0;if(typeof ke!="number")return;x(ke);const Ye=document.getElementById(`node-card-${ke}`);Ye&&Ye.scrollIntoView({behavior:"smooth",block:"start"}),requestAnimationFrame(()=>v(ke,Be))};return window.addEventListener("workflow-scroll-to-node",V),()=>window.removeEventListener("workflow-scroll-to-node",V)},[x,v]),b.useEffect(()=>{S&&($.current&&$.current.scrollTo({top:0,behavior:"auto"}),requestAnimationFrame(()=>fe.current?.focus()))},[S]),b.useEffect(()=>(g(T),()=>g(!1)),[T,g]),b.useEffect(()=>{if(!ae.length)return;const V=window.requestAnimationFrame(()=>{const ce=xe();if(!ce)return;const{minTop:ue,maxTop:ke}=ce;if(h==null)m({top:ke});else{const Be=Math.min(Math.max(h,ue),ke);Be!==h&&m({top:Be})}});return()=>window.cancelAnimationFrame(V)},[ae.length,h,xe,m]),b.useEffect(()=>{if(!T)return;const V=ce=>{const ue=D.current;!ue||!ce.target||ue.contains(ce.target)||(B(!1),F(!1),pe(null),Qe())};return document.addEventListener("pointerdown",V),()=>{document.removeEventListener("pointerdown",V)}},[Qe,T]);const $n=V=>{for(const ce of V){if(ce.type==="node")return ce.node.id;if(ce.type==="group"||ce.type==="subgraph"){const ue=$n(ce.children);if(ue!=null)return ue}}return null},fr=V=>{for(const ce of V){if(ce.type==="node"){if(!ce.node.flags?.collapsed)return!0;continue}if(!ce.isCollapsed||fr(ce.children))return!0}return!1},or=b.useCallback((V,ce)=>{const ue=ke=>{for(const Be of ke){if(Be.type==="node"){ge(Be.node.id,ce);continue}if(Be.type==="group"){A(Be.group.id,ce),ue(Be.children);continue}K(Be.subgraph.id,ce),ue(Be.children)}};ue(V)},[A,ge,K]),An=b.useCallback((V,ce)=>()=>{or(V,ce)},[or]),ln=(V,ce)=>V.map((ue,ke)=>{const Be=`${ce}-${ke}`;if(ue.type==="group"){const Ye=ue.group,Re=Gr(Ye.color,.15),ot=Gr(Ye.color,.4),pt=$n(ue.children),gt=fr(ue.children),xt=gt?"Fold all":"Unfold all",yt=An(ue.children,gt);return u.jsxs("div",{id:`group-wrapper-${ue.group.id}`,className:"group-wrapper shadow-md rounded-xl border mb-3",style:{backgroundColor:Re,borderColor:ot},children:[u.jsx(P3,{group:Ye,nodeCount:ue.nodeCount,isCollapsed:ue.isCollapsed,subgraphId:ue.subgraphId,bookmarkNodeId:pt,foldAllLabel:xt,onToggleCollapse:()=>R(ue.group.id),onToggleFoldAll:yt,onBypassAll:vt=>U(ue.group.id,vt,ue.subgraphId),onHideGroup:()=>I(ue.group.id,!0)}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${ue.isCollapsed?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden px-1 transition-opacity duration-200 ease-out ${ue.isCollapsed?"opacity-0":"opacity-100"}`,children:[ue.children.length>0?ln(ue.children,Be):u.jsx(K3,{group:ue.group}),u.jsx(Z3,{group:ue.group})]})})]},`group-${ue.group.id}-${Be}`)}if(ue.type==="subgraph"){const Ye="rgba(59, 130, 246, 0.08)",Re="rgba(59, 130, 246, 0.25)";return u.jsxs("div",{className:"subgraph-wrapper shadow-md rounded-xl border mb-3",style:{backgroundColor:`var(--subgraph-bg, ${Ye})`,borderColor:`var(--subgraph-border, ${Re})`,"--subgraph-bg":Ye,"--subgraph-border":Re},children:[u.jsx(J3,{subgraph:ue.subgraph,nodeCount:ue.nodeCount,isCollapsed:ue.isCollapsed,onToggleCollapse:()=>W(ue.subgraph.id)}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${ue.isCollapsed?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden px-1 transition-opacity duration-200 ease-out ${ue.isCollapsed?"opacity-0":"opacity-100"}`,children:[ue.children.length>0&&ln(ue.children,Be),u.jsx(n5,{subgraph:ue.subgraph})]})})]},`subgraph-${ue.subgraph.id}-${Be}`)}return u.jsx("div",{id:`node-card-${ue.node.id}`,children:u.jsx(Y3,{node:ue.node,isExecuting:s===String(ue.node.id),isConnectionHighlighted:Vt.has(ue.node.id),errorBadgeLabel:J[ue.node.id]??null,onImageClick:l})},`node-${ue.node.id}-${Be}`)});let an;o?We.length===0?an=u.jsx("div",{id:"node-list-empty",className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{id:"empty-workflow-content",className:"text-center p-8",children:[u.jsx("div",{id:"empty-workflow-icon-container",className:"flex items-center justify-center mb-4",children:u.jsx($1,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{id:"empty-workflow-title",className:"text-lg font-medium",children:"Empty workflow"}),u.jsx("p",{id:"empty-workflow-description",className:"text-sm mt-2",children:"This workflow has no nodes"})]})}):an=u.jsxs("div",{id:"node-list-shell",className:"h-full flex flex-col",children:[S&&u.jsx("div",{className:"node-search-bar px-1 pt-3",children:u.jsxs("div",{className:"flex items-center gap-2 bg-white border border-gray-200 rounded-xl px-3 py-2 shadow-sm",children:[u.jsx("input",{ref:fe,value:M,onChange:V=>j(V.target.value),placeholder:"Search nodes...",className:"comfy-input p-3 flex-1 text-sm text-gray-900 outline-none placeholder:text-gray-400"}),u.jsx("button",{type:"button",onClick:Ve,className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:u.jsx(Gl,{className:"w-4 h-4"})})]})}),u.jsx("div",{id:"node-list-container",ref:$,className:"flex-1 overflow-auto px-4 pt-4 overscroll-contain scroll-container",style:{paddingBottom:"10rem"},"data-node-list":"true",children:lt.length===0?u.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{className:"text-center p-8",children:[u.jsx("p",{className:"text-sm font-medium",children:"No matching nodes"}),u.jsx("p",{className:"text-xs mt-2",children:"Try a different search."})]})}):u.jsx("div",{id:"node-list-inner",children:ln(lt,"root")})})]}):an=u.jsx("div",{id:"node-list-no-workflow",className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{id:"no-workflow-content",className:"text-center p-8",children:[u.jsx("div",{id:"no-workflow-icon-container",className:"flex items-center justify-center mb-4",children:u.jsx(W1,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{id:"no-workflow-title",className:"text-lg font-medium",children:"No workflow loaded"}),u.jsx("p",{id:"no-workflow-description",className:"text-sm mt-2",children:"Open the menu to load a workflow"})]})});const on=X?.y??h??0,Rn=X?`${X.x}px`:p==="left"?"0.75rem":void 0,Me=X?void 0:p==="right"?"0.75rem":void 0,ze={top:`${on}px`,left:Rn,right:Me,opacity:h==null&&X==null?0:1,touchAction:T?"none":"pan-y",pointerEvents:h==null&&X==null?"none":"auto"};return u.jsxs("div",{id:"node-list-wrapper",ref:re,className:"absolute inset-x-0 top-[60px] bottom-0 bg-gray-100",style:{display:r?"block":"none"},children:[an,ae.length>0&&u.jsx("div",{ref:D,className:`absolute z-[200] flex flex-col items-center gap-2 pointer-events-auto ${T?"rounded-2xl ring-2 ring-blue-400/70 bg-white/30 shadow-lg":""}`,style:ze,onPointerDown:ut,onPointerMove:Ze,onPointerUp:_e,onPointerCancel:Xe,children:u.jsxs("div",{className:`flex flex-col items-center gap-2 ${T?"p-2 cursor-grab":""}`,children:[ae.map((V,ce)=>u.jsx("button",{type:"button",className:"w-10 h-10 rounded-full border border-transparent bg-gray-900/10 text-[11px] font-bold text-gray-800 shadow-sm backdrop-blur-sm dark:bg-white/10 dark:text-gray-100 select-none",onClick:Ce(V,ce),children:V},V)),ae.length>1&&u.jsx("button",{type:"button",className:"w-10 h-10 rounded-full border border-transparent bg-gray-900/10 text-gray-600 shadow-sm backdrop-blur-sm flex items-center justify-center dark:bg-white/10 dark:text-gray-200 select-none","aria-label":"Cycle bookmarks",onClick:tt,children:u.jsx(Wn,{className:"w-4 h-4"})})]})})]})}function a5(){const r=Ln(O=>O.currentPanel),l=rr(O=>O.viewerOpen),o=ne(O=>O.workflow),s=ne(O=>O.isExecuting),i=ne(O=>O.progress),d=ne(O=>O.executingNodeId),p=ne(O=>O.executingPromptId),h=ne(O=>O.workflowDurationStats),m=Zt(O=>O.error),g=Zt(O=>O.nodeErrors),x=Zt(O=>O.errorsDismissed),v=Zt(O=>O.setErrorsDismissed),N=ne(O=>O.scrollToNode),C=Zt(O=>O.errorCycleIndex),w=Zt(O=>O.setErrorCycleIndex),S=ne(O=>O.revealNodeWithParents),M=ne(O=>O.nodeTypes),j=rt(O=>O.running),[E,z]=b.useState(null),R=!(r==="queue")&&!(r==="outputs")&&!l,A=Object.values(g).reduce((O,F)=>O+F.length,0),I=A>0,U=!!m?.startsWith("Workflow load error")||I,G=U?"Workflow load error":"Prompt error",W=U&&m?m.replace(/^Workflow load error:\s*/i,""):m??(I?`${A} inputs reference missing options.`:null),K=(!!m||I)&&!x,ge=b.useMemo(()=>{if(!o||!d)return null;const O=o.nodes.find(X=>String(X.id)===d);return O?M?.[O.type]?.display_name||O.type:`Node ${d}`},[o,d,M]),ae=p||(j[0]?.prompt_id??null),re=Go({workflow:o,runKey:ae,isRunning:s||j.length>0,workflowDurationStats:h}),D=re===100?100:i,$=()=>{if(!o||!I)return;const O=o.nodes.filter(J=>g[String(J.id)]?.length).map(J=>J.id);if(O.length===0)return;const F=C%O.length,X=O[F],pe=`Error #${F+1}`;S(X),w((F+1)%O.length),window.dispatchEvent(new CustomEvent("workflow-label-error-node",{detail:{nodeId:X,label:pe}})),window.dispatchEvent(new CustomEvent("workflow-scroll-to-node",{detail:{nodeId:X,label:pe}})),N(X,pe)},fe=O=>{(O.key==="Enter"||O.key===" ")&&(O.preventDefault(),$())},be=O=>{O.stopPropagation()},ye=O=>{O.stopPropagation(),v(!0)},T=()=>{ae&&z(ae)},B=E!==null&&E===ae;return R?u.jsxs("div",{id:"bottom-status-overlay",className:"fixed inset-x-0 bottom-20 z-[2000] flex flex-col items-center gap-3 pointer-events-none",children:[K&&u.jsxs("div",{id:"error-notification-wrapper",className:"relative pointer-events-auto",children:[u.jsx("div",{id:"error-notification-toast",className:"bg-red-100 text-red-900 rounded-xl shadow-lg px-4 py-3 w-[70vw] max-w-sm",role:"button",tabIndex:0,onClick:$,onKeyDown:fe,children:u.jsx("div",{className:"error-toast-content flex items-start justify-between gap-3",children:u.jsxs("div",{className:"error-text-container pr-16",children:[u.jsx("div",{className:"error-title text-sm font-semibold text-red-800",children:G}),u.jsx("div",{className:"error-message mt-1 text-xs text-red-800 break-words",children:W})]})})}),u.jsx("button",{id:"error-dismiss-button",type:"button","aria-label":"Dismiss error",className:"absolute top-3 right-3 shrink-0 px-3 py-1 text-xs font-semibold bg-red-700 text-white rounded-full z-10",onPointerDown:be,onClick:ye,children:"Dismiss"})]}),re!==null&&!B&&u.jsxs("div",{id:"execution-progress-card",className:"relative bg-white border border-gray-200 rounded-xl shadow-lg px-4 py-2 w-[70vw] max-w-sm pointer-events-auto",children:[u.jsx("button",{type:"button","aria-label":"Dismiss progress",className:"absolute top-2 right-2 w-7 h-7 rounded-full flex items-center justify-center text-gray-400 hover:text-gray-600",onClick:T,children:u.jsx(Gl,{className:"w-4 h-4"})}),u.jsx("div",{className:"executing-node-name text-sm font-semibold text-gray-900",children:ge||"Running"}),u.jsxs("div",{className:"node-progress-info mt-2 flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[D,"%"]})]}),u.jsx("div",{className:"node-progress-track mt-1 h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"node-progress-bar h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,D))}%`}})}),re!==null&&u.jsxs("div",{className:"overall-progress-container",children:[u.jsxs("div",{className:"overall-progress-info mt-3 flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[re,"%"]})]}),u.jsx("div",{className:"overall-progress-track mt-1 h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"overall-progress-bar h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,re))}%`}})})]})]})]}):null}function o5({viewerOpen:r,followQueue:l,queueSize:o,overallProgress:s,onToggleFollowQueue:i,onOpenFollowQueue:d}){const p=b.useCallback(()=>{r?i?.():d?.()},[r,i,d]),h=b.useMemo(()=>r?l?"Disable follow queue":"Enable follow queue":"Open image viewer",[r,l]),m=b.useMemo(()=>r&&l?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200",[r,l]);return u.jsxs("button",{onClick:p,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${m}`,"aria-label":h,children:[u.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx(A0,{className:"w-6 h-6",showSlash:r&&!l})}),o>0&&u.jsxs("div",{className:`queue-badge absolute top-0 right-0 translate-x-[18px] -translate-y-[18px] w-6 h-6 rounded-full bg-blue-500 text-white
                     flex items-center justify-center font-bold text-xs border-2 border-white relative z-20`,children:[s!==null&&u.jsx(nb,{className:"absolute z-10 pointer-events-none",width:"24",height:"24",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-90deg)"},progress:s}),o]})]})}function s5(){const r=ne(p=>p.workflow),l=Gn(p=>p.pinnedWidget),o=Gn(p=>p.pinOverlayOpen),s=Gn(p=>p.togglePinOverlay),i=ne(p=>p.updateNodeWidget),d=b.useMemo(()=>{if(!l||!r)return;const p=r.nodes.find(h=>h.id===l.nodeId);if(p)return Lo(p,l.widgetName,l.widgetIndex)},[l,r]);return!o||!l?null:u.jsx("div",{id:"pin-overlay-hidden-anchor",className:"hidden",children:u.jsx(cr,{name:l.widgetName,type:l.widgetType,value:d,options:l.options,onChange:p=>i(l.nodeId,l.widgetIndex,p,l.widgetName),hideLabel:!0,compact:!0,forceModalOpen:!0,onModalClose:s})})}function i5(){const r=St(l=>l.setFilterModalOpen);return u.jsx("button",{onClick:()=>r(!0),className:"relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors bg-gray-100 text-gray-700 hover:bg-gray-200","aria-label":"Filter and sort",children:u.jsx(q1,{className:"w-6 h-6"})})}function u5(){const r=St(s=>s.selectedIds.length),l=St(s=>s.setSelectionActionOpen),o=r===0;return u.jsx("button",{onClick:()=>l(!0),disabled:o,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${o?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,"aria-label":"Selection actions",children:u.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shadow-sm ${o?"border-gray-300 bg-transparent":"bg-blue-600 border-blue-600 text-white"}`,children:!o&&u.jsx(Hl,{className:"w-4 h-4"})})})}function c5(){return St(l=>l.selectionMode)?u.jsx(u5,{}):u.jsx(i5,{})}function d5(){const r=Gn(s=>s.pinnedWidget),l=Gn(s=>s.pinOverlayOpen),o=Gn(s=>s.togglePinOverlay);return r?u.jsx("button",{onClick:o,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${l?"bg-fuchsia-500 text-white":"bg-gray-100 text-fuchsia-500 hover:bg-gray-200"}`,"aria-label":l?"Close pin editor":"Open pin editor",children:u.jsx(Do,{className:"w-6 h-6"})}):null}function f5(){const r=ne(d=>d.workflow),l=ne(d=>d.runCount),o=ne(d=>d.queueWorkflow),s=r!==null,i=()=>{s&&(o(l),"vibrate"in navigator&&navigator.vibrate(20))};return u.jsx("button",{onClick:i,disabled:!s,className:"flex-1 py-3 px-6 rounded-xl font-semibold text-lg min-h-[48px] transition-all "+(s?"bg-blue-500 text-white active:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Run"})}function p5(){const r=ne(i=>i.runCount),l=ne(i=>i.setRunCount),o=()=>{l(r-1)},s=()=>{l(r+1)};return u.jsxs("div",{id:"run-count-selector",className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[u.jsx("button",{onClick:o,disabled:r<=1,className:`w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center
                   text-lg font-medium text-gray-700 disabled:opacity-40 disabled:shadow-none`,children:""}),u.jsx("span",{className:"w-8 text-center font-semibold text-gray-900",children:r}),u.jsx("button",{onClick:s,className:`w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center
                   text-lg font-medium text-gray-700`,children:"+"})]})}function m5(r){const{currentPanel:l,viewerOpen:o=!1,followQueue:s=!1,onToggleFollowQueue:i,onOpenFollowQueue:d}=r,p=l==="outputs",h=ne(j=>j.workflow),m=ne(j=>j.isExecuting),g=ne(j=>j.executingPromptId),x=ne(j=>j.workflowDurationStats),v=rt(j=>j.pending),N=rt(j=>j.running),C=b.useRef(null),w=v.length+N.length,S=g||(N[0]?.prompt_id??null),M=Go({workflow:h,runKey:S,isRunning:m||N.length>0,workflowDurationStats:x});return b.useEffect(()=>{const j=C.current;if(!j)return;const E=()=>{const z=j.getBoundingClientRect();document.documentElement.style.setProperty("--bottom-bar-offset",`${z.height}px`)};return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),u.jsxs("div",{id:"bottom-bar-root",ref:C,className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg safe-area-bottom z-[2200]",children:[u.jsxs("div",{id:"bottom-bar-content",className:"flex items-center gap-3 px-3 py-2 max-w-lg mx-auto",children:[u.jsx(p5,{}),u.jsx(f5,{}),p&&u.jsx(c5,{}),!p&&u.jsx(d5,{}),u.jsx(o5,{viewerOpen:o,followQueue:s,queueSize:w,overallProgress:M,onToggleFollowQueue:i,onOpenFollowQueue:d})]}),u.jsx(s5,{}),u.jsx(a5,{})]})}const f0=r=>Symbol.iterator in r,p0=r=>"entries"in r,m0=(r,l)=>{const o=r instanceof Map?r:new Map(r.entries()),s=l instanceof Map?l:new Map(l.entries());if(o.size!==s.size)return!1;for(const[i,d]of o)if(!s.has(i)||!Object.is(d,s.get(i)))return!1;return!0},h5=(r,l)=>{const o=r[Symbol.iterator](),s=l[Symbol.iterator]();let i=o.next(),d=s.next();for(;!i.done&&!d.done;){if(!Object.is(i.value,d.value))return!1;i=o.next(),d=s.next()}return!!i.done&&!!d.done};function g5(r,l){return Object.is(r,l)?!0:typeof r!="object"||r===null||typeof l!="object"||l===null||Object.getPrototypeOf(r)!==Object.getPrototypeOf(l)?!1:f0(r)&&f0(l)?p0(r)&&p0(l)?m0(r,l):h5(r,l):m0({entries:()=>Object.entries(r)},{entries:()=>Object.entries(l)})}function x5(r){const l=ka.useRef(void 0);return o=>{const s=r(o);return g5(l.current,s)?l.current:l.current=s}}function bd(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}function Ox(r){return Array.isArray(r)&&r.length>=2&&(typeof r[0]=="string"||typeof r[0]=="number")&&typeof r[1]=="number"}function Qi(r){return r.class_type??r.type??null}function xf(r,l){for(const o of l){const s=r.inputs?.[o];if(!Ox(s)&&s!==void 0)return s}}function Oa(r,l){const o=xf(r,l);if(o!=null)return typeof o=="string"?o:String(o)}function wd(r,l){if(!Ox(l))return null;const o=String(l[0]);return r[o]??null}function y5(r){if(!r)return;const l=Oa(r,["sampler_name","sampler","name"]);if(l)return l;if(Qi(r)==="KSamplerSelect"&&Array.isArray(r.widgets_values)){const s=r.widgets_values[0];return s==null?void 0:String(s)}}function v5(r){if(!r)return;const l=Oa(r,["scheduler","scheduler_name","name"]);if(l)return l;if(Qi(r)==="BasicScheduler"&&Array.isArray(r.widgets_values)){const s=r.widgets_values[0];return s==null?void 0:String(s)}}function b5(r){if(!r)return;const l=xf(r,["steps","step_count"]);if(l!==void 0)return l;if(Qi(r)==="BasicScheduler"&&Array.isArray(r.widgets_values)){const s=r.widgets_values[1];return s??void 0}}function w5(r){if(!r)return;const l=xf(r,["cfg","guidance","guidance_scale"]);if(l!==void 0)return l;if(Array.isArray(r.widgets_values)){const o=r.widgets_values[0];return o??void 0}}function yf(r){const l={};if(!bd(r)&&!Array.isArray(r))return l;let o=null;if(Array.isArray(r)&&r.length>=3&&bd(r[2])?o=r[2]:bd(r)&&(o=r),!o)return l;const i=Object.entries(o).sort((d,p)=>Number(d[0])-Number(p[0])).map(([,d])=>d);for(const d of i){const p=Qi(d);if(p){if(p==="CheckpointLoaderSimple"||p==="CheckpointLoader"){const h=d.inputs?.ckpt_name;typeof h=="string"?l.model=h.replace(/\.(safetensors|ckpt|pt)$/i,""):h!=null&&(l.model=String(h).replace(/\.(safetensors|ckpt|pt)$/i,""))}if(p==="KSampler"||p==="KSamplerAdvanced"){if(l.steps===void 0&&d.inputs?.steps!==void 0&&(l.steps=d.inputs.steps),l.cfg===void 0&&d.inputs?.cfg!==void 0&&(l.cfg=d.inputs.cfg),l.sampler===void 0){const h=Oa(d,["sampler_name"]);h&&(l.sampler=h)}if(l.scheduler===void 0){const h=Oa(d,["scheduler"]);h&&(l.scheduler=h)}}if(p==="SamplerCustom"||p==="SamplerCustomAdvanced"){if(l.steps===void 0&&d.inputs?.steps!==void 0&&(l.steps=d.inputs.steps),l.cfg===void 0&&d.inputs?.cfg!==void 0&&(l.cfg=d.inputs.cfg),l.sampler===void 0){const h=Oa(d,["sampler","sampler_name"]),m=wd(o,d.inputs?.sampler),g=h??y5(m);g&&(l.sampler=g)}if(l.scheduler===void 0){const h=Oa(d,["scheduler","scheduler_name"]),m=wd(o,d.inputs?.sigmas??d.inputs?.scheduler),g=h??v5(m);g&&(l.scheduler=g)}if(l.steps===void 0){const h=wd(o,d.inputs?.sigmas??d.inputs?.scheduler),m=b5(h);m!==void 0&&(l.steps=m)}}if(p==="FluxGuidance"&&l.cfg===void 0){const h=w5(d);h!==void 0&&(l.cfg=h)}}}return l}function vf(r,l={}){const{onlyOutput:o=!1,alt:s}=l,i=[];return r.forEach((d,p)=>{const h=d.outputs?.images??[],m=yf(d.prompt),g=d.durationSeconds,x=d.success!==!1;h.forEach((v,N)=>{if(o&&v.type!=="output")return;const C=typeof s=="function"?s(N,p):s,w=v.subfolder?`${v.subfolder}/${v.filename}`:v.filename,S=qo(v.filename),M=S==="video"?"video":"image";i.push({src:qn(v.filename,v.subfolder,v.type),alt:C,mediaType:S,metadata:m,durationSeconds:g,success:x,filename:v.filename,file:{id:`${v.type}/${w}`,name:v.filename,type:M,fullUrl:qn(v.filename,v.subfolder,v.type)}})})}),i}function S5({menuState:r,unifiedList:l,onClose:o,onLoadWorkflow:s,onCopyWorkflow:i,onDownload:d,onBatchDownload:p,onDeleteHistory:h,getBatchSources:m}){const g=r?.promptId??"",x=rt(j=>j.queueItemHideImages[g]),v=rt(j=>j.toggleQueueItemHideImages),N=()=>{r?.workflow&&r.promptId&&s(r.workflow,r.promptId),o()},C=()=>{i(r?.workflow),o()},w=async()=>{const j=r?.promptId?m(r.promptId,l):[];j.length>1?await p(j):r&&await d(r.imageSrc),o()},S=()=>{v(g),o()},M=()=>{r?.promptId&&h(r.promptId),o()};return r?.open?lr.createPortal(u.jsxs("div",{id:"queue-image-menu",className:"fixed z-[1200] bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden w-44",style:{top:r.top,right:r.right},children:[u.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${r.workflow?"":"opacity-50 cursor-not-allowed"}`,onClick:N,disabled:!r.workflow,children:[u.jsx(_a,{className:"w-4 h-4 text-gray-500"}),"Load workflow"]}),u.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${r.workflow?"":"opacity-50 cursor-not-allowed"}`,onClick:C,disabled:!r.workflow,children:[u.jsx(K1,{className:"w-4 h-4 text-gray-500"}),"Copy workflow"]}),u.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:w,children:[u.jsx(J1,{className:"w-4 h-4 text-gray-500"}),r.promptId&&m(r.promptId,l).length>1?"Download batch":"Download"]}),r.hasVideoOutputs&&r.hasImageOutputs&&r.promptId&&u.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:S,children:[x?u.jsx(Bl,{className:"w-4 h-4 text-gray-500"}):u.jsx(dr,{className:"w-4 h-4 text-gray-500"}),x?"Show images":"Hide images"]}),u.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50",onClick:M,children:[u.jsx(Ur,{className:"w-4 h-4"}),"Delete"]})]}),document.body):null}function N5({message:r}){return r?lr.createPortal(u.jsx("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-[1300] bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg text-sm font-medium animate-in fade-in slide-in-from-top-2 duration-200",children:r}),document.body):null}function Ex(r){return"outputs"in r}function j5(r,l){const o=l.find(i=>i.id===r);return!o||o.status!=="done"?[]:Ex(o.data)?(o.data.outputs.images??[]).filter(i=>i.type==="output").map(i=>qn(i.filename,i.subfolder,i.type)):[]}async function Tx(r,l="image.png",o){try{const i=await(await fetch(r)).blob(),d=URL.createObjectURL(i),p=document.createElement("a");p.href=d,p.download=l,document.body.appendChild(p),p.click(),p.remove(),URL.revokeObjectURL(d),o?.(r)}catch(s){console.error("Failed to download image:",s)}}async function C5(r,l){for(const o of r)await Tx(o,"image.png",l)}async function k5(r){try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(r);else{const l=document.createElement("textarea");l.value=r,l.style.position="fixed",l.style.opacity="0",document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l)}return!0}catch(l){return console.error("Failed to copy to clipboard:",l),!1}}function M5({item:r,isActuallyRunning:l,progress:o,overallProgress:s,executingNodeLabel:i,onDelete:d,onStop:p,onImageClick:h,viewerImages:m,runningImages:g,onOpenMenu:x,downloaded:v,isTopDoneItem:N}){const C=rt(we=>we.previewVisibility),w=rt(we=>we.previewVisibilityDefault),S=rt(we=>we.showQueueMetadata),M=rt(we=>we.queueItemExpanded[r.id]),j=rt(we=>we.setQueueItemExpanded),E=rt(we=>we.queueItemHideImages[r.id]),z=b.useRef(new Map),_=b.useRef(new Set),[L,R]=b.useState(new Set),A=r.status==="pending"&&!l,I=r.status==="running"||l,U=r.status==="done",G=M!==void 0,W=G?M:!1,K=b.useRef(U);b.useEffect(()=>{G||j(r.id,!1)},[G,r.id,j]),b.useEffect(()=>{!K.current&&U&&j(r.id,!0),K.current=U},[U,r.id,j]),b.useEffect(()=>{_.current.clear(),R(new Set)},[r.id]);const ge=()=>{j(r.id,!W)},ae=U&&Ex(r.data)?r.data:null,re=b.useMemo(()=>ae?ae.outputs.images:I?g:[],[ae,I,g]),D=!!(r.data.prompt_id?C[r.data.prompt_id]??w:w),{savedImages:$,displayImages:fe}=b.useMemo(()=>{const we=re.filter(Ae=>Ae.type==="output"),xe=re.filter(Ae=>Ae.type!=="output"),Ee=D||we.length===0&&xe.length>0;return{savedImages:we,displayImages:Ee?[...we,...xe]:we}},[D,re]),be=b.useMemo(()=>re.some(we=>Ca(we.filename)),[re]),ye=b.useMemo(()=>re.some(we=>!Ca(we.filename)),[re]),T=b.useMemo(()=>!E||!be?fe:fe.filter(we=>Ca(we.filename)),[fe,be,E]),B=$.map(we=>({src:qn(we.filename,we.subfolder,we.type),alt:"Generation"})),O="aspect-square w-full bg-gray-100 flex flex-col items-center justify-center text-gray-400",F=ae?.durationSeconds,X=ae?ae.success!==!1:!0,pe=O5(F),J=s===100?100:o,le=b.useMemo(()=>!S||!r.data.prompt?null:yf(r.data.prompt),[S,r.data.prompt]),ve=b.useMemo(()=>I?T.map(we=>({src:qn(we.filename,we.subfolder,we.type),alt:"Generation",mediaType:qo(we.filename)})):m,[I,m,T]);b.useEffect(()=>{W&&T.forEach(we=>{if(!Ca(we.filename))return;const xe=qn(we.filename,we.subfolder,we.type);if(_.current.has(xe))return;_.current.add(xe);const Ee=z.current.get(xe);if(!Ee)return;Ee.currentTime=0,R(ft=>{const ut=new Set(ft);return ut.delete(xe),ut});const Ae=Ee.play();Ae&&typeof Ae.catch=="function"&&Ae.catch(()=>{})})},[W,T]);const Le=we=>{we.stopPropagation(),ge()},$e=we=>{we.stopPropagation(),p()},ee=we=>{we.stopPropagation(),d()},Ve=we=>{we.stopPropagation();const xe=we.currentTarget.getBoundingClientRect(),Ee=Math.max(8,window.innerWidth-xe.right),Ae=B[0]?.src||"";x({top:xe.bottom+6,right:Ee,imageSrc:Ae,workflow:ae?.workflow,promptId:r.data.prompt_id||r.id,hasVideoOutputs:be,hasImageOutputs:ye})},Ne=we=>()=>{R(xe=>new Set(xe).add(we))},Ce=we=>()=>{R(xe=>{const Ee=new Set(xe);return Ee.delete(we),Ee})},tt=(we,xe,Ee)=>()=>{const Ae=ve.findIndex(ft=>ft.src===we);h?.(ve,Ae>=0?Ae:xe,Ee)},Qe=we=>xe=>{xe.stopPropagation();const Ee=z.current.get(we);if(!Ee)return;Ee.currentTime=0;const Ae=Ee.play();Ae&&typeof Ae.catch=="function"&&Ae.catch(()=>{})};return u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden transition-all duration-300",children:[u.jsxs("div",{onClick:ge,className:`px-3 py-2 border-b flex justify-between items-center cursor-pointer select-none ${I?"bg-blue-50 border-blue-100":"bg-gray-50 border-gray-100"}`,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[u.jsx("button",{onClick:Le,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-400 hover:text-gray-600 shrink-0",children:W?u.jsx(Wn,{className:"w-6 h-6"}):u.jsx(Il,{className:"w-6 h-6"})}),I&&u.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),A&&u.jsx("span",{className:"text-xs font-bold text-gray-400",children:"PENDING"}),I&&u.jsx("span",{className:"text-xs font-bold text-blue-600",children:"GENERATING"}),U&&u.jsx("span",{className:"text-xs font-bold text-gray-500",children:new Date(r.timestamp||0).toLocaleTimeString()}),I&&!W&&l&&s!=null&&u.jsxs("span",{className:"ml-1 text-xs font-semibold text-blue-600",children:[Math.min(100,Math.max(0,s)),"%"]})]}),u.jsx("div",{className:"flex items-center gap-2",children:I?u.jsx("button",{onClick:$e,className:"px-2 py-1 text-xs font-semibold text-white bg-red-600 rounded hover:bg-red-700",children:"Stop"}):U?u.jsx("button",{className:"w-7 h-7 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent",onClick:Ve,"aria-label":"Image options",children:u.jsx(bl,{className:"w-4 h-4 -rotate-90"})}):u.jsx("button",{onClick:ee,className:"text-gray-400 hover:text-red-500 px-2",title:A?"Remove from Queue":"Delete from History","aria-label":A?"Remove from Queue":"Delete from History",children:u.jsx(Gl,{className:"w-4 h-4"})})})]}),W&&u.jsx("div",{className:"relative w-full animate-in fade-in duration-200",children:T.length>0?u.jsx("div",{className:"flex flex-col",children:(()=>{let we=0,xe=0;return T.map((Ee,Ae)=>{const ft=Ee.type!=="output",ut=ft?++xe:++we,Ze=`${ft?"Preview":"Save"} #${ut}`,Se=qn(Ee.filename,Ee.subfolder,Ee.type),_e=v[Se],Xe=T.length>1;return u.jsxs("div",{className:"relative",children:[pe&&u.jsxs("div",{className:`absolute top-2 left-2 flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold ${X?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:[X?u.jsx(Hl,{className:"w-3.5 h-3.5"}):u.jsx(Q1,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:pe})]}),Ca(Ee.filename)?u.jsxs(u.Fragment,{children:[u.jsx("video",{src:Se,className:"w-full h-auto block",muted:!0,playsInline:!0,preload:"metadata",ref:We=>{We?z.current.set(Se,We):z.current.delete(Se)},onEnded:Ne(Se),onPlay:Ce(Se),onClick:tt(Se,Ae,N)}),L.has(Se)&&u.jsx("button",{type:"button",className:"absolute inset-0 flex items-center justify-center bg-black/35 text-white",onClick:Qe(Se),"aria-label":"Replay video",children:u.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-black/60 text-2xl",children:""})})]}):u.jsx("img",{src:Se,alt:"Generation",className:"w-full h-auto block",loading:"lazy",onClick:tt(Se,Ae,N)}),_e&&u.jsx("div",{className:"absolute bottom-2 right-2 w-7 h-7 rounded-full bg-black/60 text-white flex items-center justify-center",children:u.jsx(X1,{className:"w-4 h-4"})}),Xe&&u.jsx("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/60 text-white text-xs font-medium rounded backdrop-blur-sm shadow-sm pointer-events-none",children:Ze}),le&&u.jsxs("div",{className:`absolute right-2 flex flex-col-reverse items-end gap-1 pointer-events-none ${_e?"bottom-10":"bottom-2"}`,children:[le.model&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["model: ",le.model]}),le.sampler&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["sampler: ",le.sampler]}),le.steps&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["steps: ",le.steps]}),le.cfg&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["cfg: ",le.cfg]})]})]},Ae)})})()}):U?u.jsx("div",{className:O,children:u.jsx("span",{className:"text-sm",children:"No images saved"})}):I?u.jsx("div",{className:O,style:{minHeight:"300px"},children:l&&s!=null?u.jsxs("div",{className:"w-full max-w-xs px-4",children:[u.jsxs("p",{className:"font-semibold text-base text-gray-900 mb-3",children:["Executing: ",i||"Running"]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[J,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,J))}%`}})}),u.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500 mb-1",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[s,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,s))}%`}})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),u.jsx("p",{className:"font-medium text-lg text-blue-600",children:"Generating..."})]})}):u.jsxs("div",{className:O,style:{minHeight:"100px"},children:[u.jsx(yb,{className:"w-8 h-8 text-gray-300"}),u.jsx("span",{className:"text-xs mt-2 opacity-40",children:"Waiting to start..."})]})})]})}function O5(r){const l=r===void 0||Number.isNaN(r)?0:r;return l<10?`${l.toFixed(1)}s`:`${Math.round(l)}s`}function E5({listRef:r,unifiedList:l,visibleCount:o,hasLoadedOnce:s,effectiveExecutingId:i,progress:d,overallProgress:p,executingNodeLabel:h,onDeleteItem:m,onStop:g,onImageClick:x,viewerImages:v,promptOutputs:N,onOpenMenu:C,downloaded:w,firstDoneItemId:S,onScroll:M}){return u.jsxs("div",{ref:r,className:"flex-1 overflow-y-auto p-4 space-y-4 overscroll-contain scroll-container","data-queue-list":"true",onScroll:M,children:[l.length===0&&!s&&u.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-180px)] text-gray-400",children:u.jsxs("div",{className:"text-center",children:[u.jsx(rf,{size:"lg",color:"gray",className:"mx-auto mb-4"}),u.jsx("p",{className:"text-lg",children:"Loading..."})]})}),l.length===0&&s&&u.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-180px)] text-gray-500",children:u.jsxs("div",{className:"text-center p-8",children:[u.jsx("div",{className:"flex items-center justify-center mb-4",children:u.jsx(Y1,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{className:"text-lg font-medium",children:"Queue is empty"}),u.jsx("p",{className:"text-sm mt-2",children:"Run a workflow to see items here"})]})}),l.slice(0,o).map(j=>u.jsx(M5,{item:j,isActuallyRunning:j.id===i,progress:d,overallProgress:p,executingNodeLabel:h,onDelete:()=>m(j),onStop:g,onImageClick:x,viewerImages:v,runningImages:N[j.id]??[],onOpenMenu:C,downloaded:w,isTopDoneItem:j.id===S},j.id)),u.jsx("div",{className:"h-20"})]})}function T5(r,l,o){b.useEffect(()=>{if(!r)return;const s=()=>l(),i=d=>{const p=d.target,h=document.getElementById(o);h&&p&&h.contains(p)||l()};return document.addEventListener("scroll",s,!0),document.addEventListener("mousedown",i),()=>{document.removeEventListener("scroll",s,!0),document.removeEventListener("mousedown",i)}},[r,l,o])}function L5({visible:r,onImageClick:l}){const o=rt(ee=>ee.running),s=rt(ee=>ee.pending),i=rt(ee=>ee.fetchQueue),d=rt(ee=>ee.deleteItem),p=rt(ee=>ee.interrupt),h=ne(ee=>ee.loadWorkflow),m=Ln(ee=>ee.setCurrentPanel),g=ne(ee=>ee.workflow),x=ne(ee=>ee.nodeTypes),v=ne(ee=>ee.executingNodeId),N=ne(ee=>ee.workflowDurationStats),C=ne(ee=>ee.promptOutputs),w=Tn(ee=>ee.history),S=Tn(ee=>ee.fetchHistory),M=Tn(ee=>ee.deleteItem),{isExecuting:j,progress:E,executingPromptId:z}=ne(x5(ee=>({isExecuting:ee.isExecuting,progress:ee.progress,executingPromptId:ee.executingPromptId}))),_=z||(o.length===1?o[0].prompt_id:null),L=b.useMemo(()=>{if(!g||!v)return null;const ee=g.nodes.find(Ne=>String(Ne.id)===v);return ee?x?.[ee.type]?.display_name||ee.type:`Node ${v}`},[g,v,x]),R=Go({workflow:g,runKey:z||_,isRunning:j||!!_,workflowDurationStats:N}),[A,I]=b.useState(null),[U,G]=b.useState({}),[W,K]=b.useState(null),[ge,ae]=b.useState(!1),[re,D]=b.useState(0),$=b.useRef(null),fe=b.useRef(0),be=b.useRef(!1),ye=b.useRef(!1);b.useEffect(()=>{r&&(be.current||ye.current&&$.current&&($.current.scrollTop=0),Promise.all([i(),S()]).then(()=>{ae(!0)})),be.current=r,ye.current||(ye.current=!0)},[r,i,S]),b.useEffect(()=>{!j&&r&&S()},[j,r,S]),T5(!!A?.open,()=>I(null),"queue-image-menu");const T=async ee=>{if(!ee)return;const Ve=JSON.stringify(ee,null,2),Ne=await k5(Ve);K(Ne?"Copied to clipboard":"Failed to copy"),setTimeout(()=>K(null),2e3)},B=async ee=>{await Tx(ee,"image.png",Ve=>{G(Ne=>({...Ne,[Ve]:!0}))})},O=b.useMemo(()=>{const ee={};w.forEach(Ne=>{ee[Ne.prompt_id]={id:Ne.prompt_id,status:"done",data:Ne,timestamp:Ne.timestamp}}),o.forEach(Ne=>{ee[Ne.prompt_id]||(ee[Ne.prompt_id]={id:Ne.prompt_id,status:"running",data:Ne})}),s.forEach(Ne=>{ee[Ne.prompt_id]||(ee[Ne.prompt_id]={id:Ne.prompt_id,status:"pending",data:Ne})}),z&&ee[z]&&(ee[z].status="running");const Ve=Object.values(ee);return Ve.sort((Ne,Ce)=>{const tt={pending:0,running:1,done:2};if(tt[Ne.status]!==tt[Ce.status])return tt[Ne.status]-tt[Ce.status];if(Ne.status==="pending"){const Qe=Ne.data.number;return Ce.data.number-Qe}return Ne.status==="done"?(Ce.timestamp||0)-(Ne.timestamp||0):0}),Ve},[s,o,w,z]),F=b.useMemo(()=>{if(O.length===0)return 0;const ee=O.filter(tt=>tt.status==="pending").length,Ve=O.filter(tt=>tt.status==="running").length,Ce=O.filter(tt=>tt.status==="done").length>0?1:0;return Math.min(O.length,ee+Ve+Ce)},[O]),X=b.useMemo(()=>{const ee=O.filter(Ve=>Ve.status==="done").map(Ve=>Ve.data);return vf(ee,{onlyOutput:!0,alt:"Generation"})},[O]),pe=b.useMemo(()=>O.find(Ve=>Ve.status==="done")?.id??null,[O]);b.useEffect(()=>{r&&(fe.current=O.length,queueMicrotask(()=>{D(ee=>Math.max(ee,F))}))},[r,O.length,F]),b.useEffect(()=>{if(!r)return;const ee=$.current;ee&&(re>=O.length||ee.scrollHeight<=ee.clientHeight+20&&queueMicrotask(()=>{D(Ve=>Math.min(O.length,Ve+10))}))},[r,re,O.length]);const J=ee=>{ee.status==="pending"&&d(ee.id),ee.status==="done"&&M(ee.id)},le=ee=>{const{top:Ve,right:Ne,imageSrc:Ce,workflow:tt,promptId:Qe,hasVideoOutputs:we,hasImageOutputs:xe}=ee;I({open:!0,top:Ve,right:Ne,imageSrc:Ce,workflow:tt,promptId:Qe,hasVideoOutputs:we,hasImageOutputs:xe})},ve=()=>{const ee=$.current;if(!ee)return;ee.scrollHeight-ee.scrollTop-ee.clientHeight<400&&D(Ne=>Math.min(fe.current,Ne+10))},Le=(ee,Ve)=>{h(ee,`history-${Ve}.json`,{source:{type:"history",promptId:Ve}}),m("workflow")},$e=async ee=>{await C5(ee,Ve=>{G(Ne=>({...Ne,[Ve]:!0}))})};return u.jsx("div",{id:"queue-panel-wrapper",className:"absolute inset-x-0 top-[60px] bottom-0",style:{display:r?"block":"none"},children:u.jsxs("div",{className:"flex flex-col bg-gray-100 min-h-full",children:[u.jsx(E5,{listRef:$,unifiedList:O,visibleCount:re,hasLoadedOnce:ge,effectiveExecutingId:_,progress:E,overallProgress:R,executingNodeLabel:L,onDeleteItem:J,onStop:p,onImageClick:l,viewerImages:X,promptOutputs:C,onOpenMenu:le,downloaded:U,firstDoneItemId:pe,onScroll:ve}),u.jsx(S5,{menuState:A,unifiedList:O,onClose:()=>I(null),onLoadWorkflow:Le,onCopyWorkflow:T,onDownload:ee=>B(ee),onBatchDownload:$e,onDeleteHistory:ee=>M(ee),getBatchSources:j5}),u.jsx(N5,{message:W})]})})}let Sd=null,wi=[];function h0(r){return encodeURIComponent(r)}async function _5(){if(wi.length===0)return;const r=[...wi];wi=[];const l=r.map(o=>{const s=new Date(o.timestamp).toISOString(),i=o.data!==void 0?` | ${JSON.stringify(o.data)}`:"";return`${s} ${o.message}${i}`}).join(`
`)+`
`;try{let o="";try{const i=await fetch(`${Bt}/api/userdata/${h0("mobile-debug.log")}`);i.ok&&(o=await i.text())}catch{}const s=o+l;await fetch(`${Bt}/api/userdata/${h0("mobile-debug.log")}?overwrite=true`,{method:"POST",headers:{"Content-Type":"text/plain"},body:s})}catch(o){console.error("[debugLog] Failed to write to server:",o)}}function A5(){Sd||(Sd=setTimeout(()=>{Sd=null,_5()},500))}function $d(r,l){const o={timestamp:Date.now(),message:r,data:l};wi.push(o),l!==void 0?console.log(`[DEBUG] ${r}`,l):console.log(`[DEBUG] ${r}`),A5()}function R5(r,l,o){const s=r.closest("[data-textarea-root]")?.querySelector("[data-textarea-header]"),i=getComputedStyle(document.documentElement),d=parseFloat(i.getPropertyValue("--top-bar-offset"))||0,p=window.visualViewport?.offsetTop??0,h=window.visualViewport?.height??window.innerHeight,m=d+8,g=Lx(r),x=s?.getBoundingClientRect(),v=g===window?{type:"window",scrollY:window.scrollY}:(()=>{const R=g;return{type:"element",tag:R.tagName.toLowerCase(),scrollTop:R.scrollTop,height:R.clientHeight}})();$d("textarea-scroll: start",{reason:o,behavior:l,headerTop:x?.top??null,layoutTopEdge:m,viewportTopEdge:p+d+8,viewportTop:p,viewportHeight:h,topBarOffset:d,container:v,selectionStart:r.selectionStart});const N=z5(r),C=p+d+h*.25,w=p+h-24,S=x?x.top-m:null,M=N-C,j=N>w?N-w:0;let E=0;const z=S!==null&&S>2,_=z?N-S:N,L=_<=w;z&&L?E=S??0:!z&&N<=w?E=0:(E=M,j>E&&(E=j)),E<0&&(E=0),x&&S!==null&&x.top>m+2&&E>S&&(E=S),$d("textarea-scroll: align",{caretTop:N,targetTop:C,visibilityBottom:w,deltaHeader:S,deltaCaret:M,deltaCaretMin:j,caretAfterHeader:_,caretVisibleAfterHeader:L,canAlignHeader:z,delta:E}),Math.abs(E)>8&&_x(g,E,l)}function D5(r){const l=r.closest("[data-textarea-root]")?.querySelector("[data-textarea-header]");if(!l)return;const o=getComputedStyle(document.documentElement),i=(parseFloat(o.getPropertyValue("--top-bar-offset"))||0)+8,d=l.getBoundingClientRect(),p=d.top-i;if(Math.abs(p)<2)return;const h=Lx(r);$d("textarea-scroll: align-header-request",{headerTop:d.top,layoutTopEdge:i,delta:p}),_x(h,p,"auto")}function z5(r){const l=r.getBoundingClientRect(),o=B5(r);return l.top+o-r.scrollTop}function B5(r){const l=r.selectionStart??0,o=r.value,s=document.createElement("div"),i=getComputedStyle(r),d=s.style;d.position="absolute",d.top="0",d.left="-9999px",d.visibility="hidden",d.whiteSpace="pre-wrap",d.wordWrap="break-word",d.overflowWrap="break-word",d.boxSizing=i.boxSizing,d.width=`${r.clientWidth}px`,d.padding=i.padding,d.border=i.border,d.fontFamily=i.fontFamily,d.fontSize=i.fontSize,d.fontWeight=i.fontWeight,d.fontStyle=i.fontStyle,d.letterSpacing=i.letterSpacing,d.lineHeight=i.lineHeight,d.textTransform=i.textTransform,d.textIndent=i.textIndent,d.tabSize=i.tabSize;const p=document.createTextNode(o.slice(0,l)),h=document.createElement("span");h.textContent=o.slice(l,l+1)||" ",h.style.display="inline-block",h.style.width="1px",s.appendChild(p),s.appendChild(h),document.body.appendChild(s);const m=s.getBoundingClientRect(),x=h.getBoundingClientRect().top-m.top;return document.body.removeChild(s),x}function Nd(r){r?document.body.dataset.textareaFocus="true":delete document.body.dataset.textareaFocus}function Lx(r){let l=r?.parentElement??null;for(;l;){const s=getComputedStyle(l).overflowY;if((s==="auto"||s==="scroll")&&l.scrollHeight>l.clientHeight)return l;l=l.parentElement}return window}function _x(r,l,o="smooth"){if(Math.abs(l)<1)return;if(r===window){window.scrollBy({top:l,behavior:o});return}const s=r;s.scrollTo({top:s.scrollTop+l,behavior:o})}function Ax(){const[r,l]=b.useState(!1),o=b.useRef(null),s=b.useRef(null),i=b.useRef(null);return b.useEffect(()=>{const d=h=>{const m=h.target;if(!(m instanceof HTMLElement))return;const g=m.tagName.toLowerCase();if((m.isContentEditable||g==="input"||g==="textarea"||g==="select")&&l(!0),m instanceof HTMLTextAreaElement){Nd(!0);const x=()=>R5(m,"smooth","focus");o.current&&clearTimeout(o.current),s.current&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",s.current),s.current=null),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null);const v=()=>{document.activeElement===m&&(x(),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null))};if(i.current=v,document.addEventListener("selectionchange",v),setTimeout(()=>{i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null)},1200),window.visualViewport){let N=!1;const C=()=>{N=!0,x(),s.current&&(window.visualViewport?.removeEventListener("resize",s.current),s.current=null)};s.current=C,window.visualViewport.addEventListener("resize",C),o.current=setTimeout(()=>{N||x(),setTimeout(x,300),s.current&&(window.visualViewport?.removeEventListener("resize",s.current),s.current=null)},600)}else requestAnimationFrame(x)}},p=()=>{const h=document.activeElement;if(!(h instanceof HTMLElement)){l(!1),Nd(!1),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null);return}const m=h.tagName.toLowerCase(),g=h.isContentEditable||m==="input"||m==="textarea"||m==="select";l(g),Nd(h instanceof HTMLTextAreaElement)};return document.addEventListener("focusin",d),document.addEventListener("focusout",p),()=>{document.removeEventListener("focusin",d),document.removeEventListener("focusout",p),o.current&&clearTimeout(o.current),s.current&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",s.current),s.current=null),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null)}},[]),b.useEffect(()=>{const d=p=>{const m=p.detail?.textarea;m&&D5(m)};return document.addEventListener("textarea-align-header",d),()=>{document.removeEventListener("textarea-align-header",d)}},[]),{isInputFocused:r}}function I5({index:r,total:l,displayName:o}){return u.jsx("div",{id:"media-viewer-header",className:"absolute top-0 inset-x-0 px-3 pt-3 pb-4 bg-gradient-to-b from-black/50 to-transparent",children:u.jsxs("div",{className:"grid grid-cols-3 items-center",children:[u.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[r+1," / ",l]}),u.jsx("div",{className:"justify-self-center text-white/90 text-sm font-medium max-w-[70vw] truncate",children:o}),u.jsx("div",{})]})})}function H5({index:r,total:l,onPrev:o,onNext:s}){return u.jsxs("div",{id:"media-viewer-navigation",className:"hidden sm:block",children:[u.jsx("button",{onClick:o,disabled:r===0,className:"absolute left-3 top-1/2 -translate-y-1/2 p-2 text-white/50 hover:text-white disabled:opacity-0 transition-all pointer-events-auto",children:u.jsx(D0,{className:"w-8 h-8"})}),u.jsx("button",{onClick:s,disabled:r===l-1,className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 text-white/50 hover:text-white disabled:opacity-0 transition-all pointer-events-auto",children:u.jsx(Oi,{className:"w-8 h-8"})})]})}function V5({isVideo:r,onDelete:l,onLoadWorkflow:o,onLoadInWorkflow:s,showMetadataToggle:i,canToggleMetadata:d,onDeleteClick:p,onLoadWorkflowClick:h,onLoadInWorkflowClick:m,onToggleMetadata:g}){return u.jsxs("div",{className:"absolute inset-x-0 px-3 pb-2 pt-2 flex items-center justify-between",style:{bottom:"calc(var(--bottom-bar-offset, 0px) + 4px)"},children:[u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-red-500 flex items-center justify-center hover:bg-black/60 transition-colors ${l?"":"opacity-40 pointer-events-none"}`,onClick:p,"aria-label":"Delete output",children:u.jsx(Ur,{className:"w-5 h-5"})}),!r&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${o?"":"opacity-40 pointer-events-none"}`,onClick:h,"aria-label":"Load workflow",children:u.jsx(_a,{className:"w-5 h-5"})}),u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${s?"":"opacity-40 pointer-events-none"}`,onClick:m,"aria-label":"Use in workflow",children:u.jsx(_0,{className:"w-5 h-5"})}),i&&u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${d?"":"opacity-40 pointer-events-none"}`,onClick:g,"aria-label":"Toggle metadata",children:u.jsx(L0,{className:"w-5 h-5"})})]})]})}function U5({isVideo:r,showMetadataToggle:l,showMetadataOverlay:o,metadataIsLoading:s,metadata:i,durationLabel:d}){return l?u.jsx("div",{className:`absolute right-3 flex flex-col items-end gap-1 pointer-events-none transition-opacity duration-300 ${o?"opacity-100":"opacity-0"}`,style:{bottom:r?"calc(var(--bottom-bar-offset, 0px) + 120px)":"calc(var(--bottom-bar-offset, 0px) + 64px)"},children:s?u.jsx("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:"Loading metadata..."}):i?u.jsxs(u.Fragment,{children:[i.model&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["model: ",i.model]}),i.sampler&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["sampler: ",i.sampler]}),i.steps&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["steps: ",i.steps]}),i.cfg&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["cfg: ",i.cfg]}),d&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["time: ",d]})]}):u.jsx("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:"No metadata found"})}):null}const G5={x:0,y:0};function Rx({open:r,items:l,index:o,onIndexChange:s,onClose:i,onDelete:d,onLoadWorkflow:p,onLoadInWorkflow:h,showMetadataToggle:m=!1,showLoadingPlaceholder:g=!1,loadingProgress:x=0,loadingLabel:v,initialScale:N=1,initialTranslate:C=G5,onTransformChange:w,zoomResetKey:S,overlayZIndex:M=2100}){const j=b.useRef(null),E=b.useRef(null),z=b.useRef(null),_=b.useRef(null),[L,R]=b.useState(1),[A,I]=b.useState({x:0,y:0}),U=b.useRef(1),G=b.useRef({x:0,y:0}),W=b.useRef(null),K=b.useRef(null),ge=b.useRef(null),ae=b.useRef(null),[re,D]=b.useState(null),[$,fe]=b.useState(null),[be,ye]=b.useState(!1),[T,B]=b.useState(!1),O=b.useRef(null),F=b.useRef("fit"),[X,pe]=b.useState({}),[J,le]=b.useState({}),[ve,Le]=b.useState(!1),{isInputFocused:$e}=Ax(),ee=o>=0?l[o]??l[0]??null:null,Ve=ee?.filename??ee?.file?.name??ee?.alt??ee?.src??"",Ne=!!(ee?.mediaType==="video"||ee?.file?.type==="video"||Ve&&Ca(Ve)),Ce=ee?.file?.id??null,tt=Ce?X[Ce]:void 0,Qe=ee?.metadata??(tt===void 0?void 0:tt),we=q5(ee?.durationSeconds),xe=ee?.filename||ee?.alt||"Output",Ee=T&&!be,Ae=m,ft=M+10,ut=Ce?!!J[Ce]:!1,Ze=b.useCallback(()=>{ye(!1),O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{ye(!0)},3e3)},[]),Se=b.useCallback(()=>{Ze(),B(Me=>!Me)},[Ze]),_e=b.useCallback(()=>{!ee||!d||(Ze(),d(ee))},[ee,d,Ze]),Xe=b.useCallback(()=>{!ee||!p||(Ze(),p(ee))},[ee,p,Ze]),We=b.useCallback(()=>{!ee||!h||(Ze(),h(ee))},[ee,h,Ze]);b.useEffect(()=>(r?queueMicrotask(Ze):O.current&&clearTimeout(O.current),()=>{O.current&&clearTimeout(O.current)}),[r,Ze]),b.useLayoutEffect(()=>{r&&(R(N),I(C),U.current=N,G.current=C,W.current=null,K.current=null,ge.current=null,ae.current=null,F.current="fit")},[r,o,N,C]),b.useEffect(()=>{_.current=null,D(null),Le(!1)},[ee?.src]),b.useEffect(()=>{if(r)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[r]),b.useEffect(()=>{r&&w&&w(L,A)},[r,L,A,w]),b.useEffect(()=>{if(!r)return;const Me=ze=>{ze.key==="Escape"&&i()};return document.addEventListener("keydown",Me),()=>document.removeEventListener("keydown",Me)},[r,i]),b.useEffect(()=>{if(!r||!m||!ee?.file||ee.metadata||!Ce||Qe!==void 0||ut)return;const Me=Ce.startsWith("input/")?"input":"output",ze=Ce.startsWith(`${Me}/`)?Ce.slice(Me.length+1):Ce;le(V=>({...V,[Ce]:!0})),w1(ze,Me).then(V=>{const ce=V?.prompt?yf(V.prompt):null,ue=ce&&Object.keys(ce).length>0?ce:null;pe(ke=>({...ke,[Ce]:ue}))}).catch(()=>{pe(V=>({...V,[Ce]:null}))}).finally(()=>{le(V=>({...V,[Ce]:!1}))})},[r,m,ee,Ce,Qe,ut]);const Pe=b.useMemo(()=>!re||!$?null:$.height/re.height,[re,$]),Ge=b.useMemo(()=>Pe===null?1:Math.min(1,Pe),[Pe]),Nt=b.useMemo(()=>Pe===null?1:Math.max(1,Pe),[Pe]),oe=(Me=L,ze=re)=>{if(!ze||!$)return{x:0,y:0};const V=ze.width*Me,ce=ze.height*Me;return{x:V<$.width?($.width-V)/2:0,y:ce<$.height?($.height-ce)/2:0}},et=b.useCallback((Me,ze=L)=>{if(!re||!$)return Me;const V=$.width,ce=$.height,ue=re.width*ze,ke=re.height*ze,Be=ue<=V?0:Math.max(V-ue,Math.min(0,Me.x)),Ye=ke<=ce?0:Math.max(ce-ke,Math.min(0,Me.y));return{x:Be,y:Ye}},[re,$,L]),lt=b.useRef(et),jt=b.useCallback(Me=>{let ze=Ge;if(Me==="cover"?ze=Nt:ze=Ge,F.current=Me,U.current=ze,R(ze),!re||!$)G.current={x:0,y:0},I({x:0,y:0});else{const V=re.width*ze,ce=re.height*ze,ue={x:($.width-V)/2,y:($.height-ce)/2},ke=et(ue,ze);G.current=ke,I(ke)}},[re,et,$,Nt,Ge]),Vt=b.useRef(jt);b.useEffect(()=>{lt.current=et},[et]),b.useEffect(()=>{Vt.current=jt},[jt]);const $n=Me=>{const ze=Me.currentTarget;_.current={width:ze.naturalWidth,height:ze.naturalHeight};const V=j.current;if(!V||ze.naturalWidth===0)return;const ce=V.clientWidth,ue=V.clientHeight,ke=ce/ze.naturalWidth;D({width:ce,height:ze.naturalHeight*ke}),fe({width:ce,height:ue})};b.useEffect(()=>{if(Ne||!r)return;const Me=E.current,ze=j.current;if(!Me||!ze)return;const V=()=>{const ue=_.current,ke=ze.clientWidth,Be=ze.clientHeight;if(fe({width:ke,height:Be}),!ue||ue.width===0)return;const Ye=ke/ue.width,Re=ue.height*Ye;D({width:ke,height:Re});const ot=lt.current(G.current);G.current=ot,I(ot)};V();const ce=new ResizeObserver(V);return ce.observe(ze),()=>ce.disconnect()},[r,ee?.src,Ne]),b.useEffect(()=>{Ne||!r||!re||!$||Vt.current(F.current)},[r,ee?.src,re,$,Ne]),b.useEffect(()=>{r&&S!==void 0&&Vt.current(F.current)},[r,S]);const fr=()=>{Ze(),o>0&&s(o-1)},or=()=>{Ze(),o<l.length-1&&s(o+1)},An=()=>{const Me=E.current;if(!Me)return;const ze=U.current,V=G.current,ce=oe(ze);Me.style.transform=`translate3d(${ce.x+V.x}px, ${ce.y+V.y}px, 0) scale(${ze})`},ln=Me=>{if(Ne){const V=z.current;if(V&&Me.target===V){const ce=V.getBoundingClientRect();if(Me.clientY>ce.bottom-60)return}}Me.currentTarget.setPointerCapture(Me.pointerId);const ze=jd(j.current);if(ze.set(Me.pointerId,{x:Me.clientX,y:Me.clientY}),ze.size===1){if(K.current={x:Me.clientX,y:Me.clientY,time:Date.now()},!Ne){W.current={x:Me.clientX-G.current.x,y:Me.clientY-G.current.y};const V=E.current;V&&(V.style.transition="none")}}else if(ze.size===2&&!Ne){const[V,ce]=Array.from(ze.values()),ue=Math.hypot(ce.x-V.x,ce.y-V.y),ke=(V.x+ce.x)/2,Be=(V.y+ce.y)/2,Ye=j.current?.getBoundingClientRect(),Re=U.current,ot=G.current,pt=oe(Re),gt=Ye?{x:(ke-Ye.left-pt.x-ot.x)/Re,y:(Be-Ye.top-pt.y-ot.y)/Re}:void 0;ge.current={distance:ue,scale:Re,centerX:ke,centerY:Be,imagePoint:gt}}},an=Me=>{const ze=jd(j.current);if(ze.has(Me.pointerId)){if(ze.set(Me.pointerId,{x:Me.clientX,y:Me.clientY}),ze.size===2&&ge.current&&!Ne){const V=ge.current,[ce,ue]=Array.from(ze.values()),ke=Math.hypot(ue.x-ce.x,ue.y-ce.y),Ye=Math.max(Ge,Math.min(5,V.scale*(ke/V.distance)));U.current=Ye;const Re=j.current?.getBoundingClientRect(),ot=(ce.x+ue.x)/2,pt=(ce.y+ue.y)/2;if(Re&&V.imagePoint){const gt=oe(Ye),xt={x:ot-Re.left-gt.x-V.imagePoint.x*Ye,y:pt-Re.top-gt.y-V.imagePoint.y*Ye};G.current=et(xt,Ye)}else G.current=et(G.current,Ye);An();return}if(ze.size===1&&!Ne){const V=U.current;(V>1||re&&j.current&&re.height*V>j.current.clientHeight+1)&&W.current&&(G.current=et({x:Me.clientX-W.current.x,y:Me.clientY-W.current.y},V),An())}}},on=Me=>{const ze=jd(j.current);if(ze.delete(Me.pointerId),ze.size<2){if(ze.size===1&&ge.current){const[V]=Array.from(ze.values());W.current={x:V.x-G.current.x,y:V.y-G.current.y}}ge.current=null}if(ze.size===0){const V=E.current;V&&(V.style.transition="transform 0.05s linear");const ce=Date.now(),ue=ae.current,ke=ue?Me.clientX-ue.x:0,Be=ue?Me.clientY-ue.y:0,Ye=!!(ue&&ce-ue.time<300&&Math.hypot(ke,Be)<24);if(!Ne&&Ye){ae.current=null;const Re=F.current;jt(Re==="fit"?"cover":"fit"),Ze()}else{ae.current={time:ce,x:Me.clientX,y:Me.clientY};const Re=K.current;if(!$e&&Re){const ot=Me.clientX-Re.x,pt=Me.clientY-Re.y,gt=Date.now()-Re.time,xt=Math.abs(ot),yt=Math.abs(pt),vt=U.current,Dt=Math.abs(vt-Ge)<.05||Math.abs(vt-Nt)<.05,qt=gt<250&&xt<10&&yt<10;gt<=350&&xt>60&&xt>yt&&Dt?ot<0?o<l.length-1&&s(o+1):ot>0&&o>0&&s(o-1):qt&&Ze()}R(U.current),I(G.current)}W.current=null}},Rn=Me=>{if(Ne||!Me.ctrlKey)return;Me.preventDefault();const ze=-Me.deltaY*.005,V=Math.max(Ge,Math.min(5,U.current+ze));U.current=V,R(V);const ce=et(G.current,V);G.current=ce,I(ce)};return r?!ee&&!g?lr.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[2000] bg-black flex flex-col items-center justify-center text-white",role:"dialog","aria-modal":"true",children:[u.jsx("button",{className:"absolute top-4 right-4 z-[2010] w-10 h-10 rounded-full bg-black/60 text-white text-xl flex items-center justify-center",onClick:i,"aria-label":"Close viewer",children:""}),u.jsx("p",{className:"text-gray-400 mb-2",children:"No images to display"}),u.jsxs("p",{className:"text-gray-500 text-sm",children:["images: ",l.length,", index: ",o]})]}),document.body):lr.createPortal(u.jsxs("div",{id:"media-viewer-overlay",className:"fixed inset-0 bg-black",style:{zIndex:M},onWheel:Rn,children:[u.jsx("div",{ref:j,className:`absolute inset-x-0 top-0 overflow-hidden ${Ne?"":"touch-none"}`,style:{overscrollBehavior:"contain",height:"calc(100vh - var(--bottom-bar-offset, 0px))",zIndex:1},onPointerDown:ln,onPointerMove:an,onPointerUp:on,onPointerCancel:on,children:g?u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-gray-600 border-t-white rounded-full animate-spin"}),u.jsx("div",{className:"mt-4 w-48 h-2 rounded-full bg-gray-700 overflow-hidden",children:u.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,x))}%`}})}),u.jsx("div",{className:"mt-2 text-sm text-gray-300",children:v??`${Math.min(100,Math.max(0,x))}%`})]}):ee&&u.jsx(u.Fragment,{children:Ne?u.jsxs(u.Fragment,{children:[u.jsx("video",{ref:z,src:ee.src,controls:!0,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-contain select-none",onDragStart:Me=>Me.preventDefault(),onError:()=>Le(!0)}),ve&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-sm bg-black/60",children:"Unable to play this video."})]}):u.jsx("img",{ref:E,src:ee.src,alt:ee.alt||"Generation",className:"w-full h-auto block select-none relative",draggable:!1,onLoad:$n,style:{transform:`translate3d(${oe(L).x+A.x}px, ${oe(L).y+A.y}px, 0) scale(${L})`,transformOrigin:"top left",willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"}})})}),u.jsx("button",{onClick:i,className:`absolute top-3 right-3 w-9 h-9 rounded-full flex items-center justify-center transition-colors ${be?"bg-transparent text-white":"bg-black/60 text-white"}`,style:{zIndex:ft},"aria-label":"Close viewer",children:u.jsx(Gl,{className:"w-6 h-6"})}),u.jsx("div",{className:`absolute inset-0 pointer-events-none transition-opacity duration-300 ${be?"opacity-0":"opacity-100"}`,style:{zIndex:ft},children:ee&&u.jsxs(u.Fragment,{children:[u.jsx(I5,{index:o,total:l.length,displayName:xe}),u.jsx(H5,{index:o,total:l.length,onPrev:fr,onNext:or}),u.jsx(V5,{isVideo:Ne,onDelete:d,onLoadWorkflow:p,onLoadInWorkflow:h,showMetadataToggle:m,canToggleMetadata:Ae,onDeleteClick:_e,onLoadWorkflowClick:Xe,onLoadInWorkflowClick:We,onToggleMetadata:Se}),u.jsx(U5,{isVideo:Ne,showMetadataToggle:m,showMetadataOverlay:Ee,metadataIsLoading:ut,metadata:Qe,durationLabel:we})]})})]}),document.body):null}function jd(r){const l=r;return l?(l.__activePointers||(l.__activePointers=new Map),l.__activePointers):new Map}function q5(r){const l=r===void 0||Number.isNaN(r)?0:r;return l===0?"":l<10?`${l.toFixed(1)}s`:`${Math.round(l)}s`}function Dx({file:r,onCancel:l,onConfirm:o}){return r?u.jsx("div",{id:"outputs-load-workflow-confirm-overlay",className:"fixed inset-0 z-[2200] bg-black/50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-load-workflow-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:s=>s.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Unsaved changes"}),u.jsx("div",{className:"text-gray-600 text-sm mt-1",children:"Are you sure you want to load this workflow? You have unsaved changes."}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:l,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:()=>o(r),children:"Continue"})]})]})}):null}function Ii(r){return r.id.startsWith("input/")?"input":"output"}function Ho(r,l){const s=`${l??Ii(r)}/`;return r.id.startsWith(s)?r.id.slice(s.length):r.id}function W5(r){return`output-${r.replace(/[\\/]/g,"_")}.json`}async function zx(r){const{file:l,source:o,loadWorkflow:s,onLoaded:i,onError:d}=r;try{const p=o??Ii(l),h=Ho(l,p),m=await b1(h,p);s(m,W5(h),{source:{type:"other"}}),i?.()}catch(p){throw d?.(p),p}}function F5(r){const{workflow:l,nodeTypes:o,nodeId:s}=r;if(!l||!o)return null;const i=l.nodes.find(p=>p.id===s);if(!i)return null;const d=["image","filename","file"];for(const p of d){const h=vl(l,o,i,p);if(h!==null)return{node:i,index:h,name:p}}return null}function g0(r,l){const o=r.title,s=typeof o=="string"&&o.trim()?o.trim():null,i=l?.[r.type];return s||i?.display_name||r.type}function $5(r){const l=r.replace(/^\/+/,""),o=l.split("/").filter(Boolean);return o.length<=1?{filename:l,subfolder:""}:{filename:o.pop()??l,subfolder:o.join("/")}}async function Y5(r,l){if(l==="input")return Ho(r,l);const o=Ho(r,l),{filename:s,subfolder:i}=$5(o),d=r.fullUrl||qn(s,i,l),p=await fetch(d);if(!p.ok)throw new Error("Failed to fetch image data.");const h=await p.blob(),m=s||r.name||"image.png",g=new File([h],m,{type:h.type||"image/png"}),x=await k0(g,{type:"input",overwrite:!0}),v=x.subfolder?`${x.subfolder}/${x.name}`:x.name;if(!(await fetch(qn(x.name,x.subfolder??"","input"))).ok)throw new Error("Uploaded image was not found in inputs.");return v}function Bx({open:r,file:l,source:o,onClose:s,onLoaded:i}){const d=ne(E=>E.workflow),p=ne(E=>E.nodeTypes),h=ne(E=>E.setNodeTypes),m=ne(E=>E.updateNodeWidget),g=Zt(E=>E.clearNodeError),x=ne(E=>E.scrollToNode),v=Ln(E=>E.setCurrentPanel),[N,C]=b.useState(null),[w,S]=b.useState(null),M=b.useMemo(()=>d?d.nodes.filter(E=>/loadimage/i.test(E.type)):[],[d]);b.useEffect(()=>{r||(C(null),S(null))},[r]);const j=async E=>{if(!(!l||!d)){S(E),C(null);try{const z=F5({workflow:d,nodeTypes:p,nodeId:E});if(!z)throw new Error("Selected node does not accept image inputs.");const _=await Y5(l,o);if(o!=="input")try{const L=await S0();h(L)}catch(L){console.warn("Failed to refresh node types after upload:",L)}m(z.node.id,z.index,_,z.name),g(z.node.id),v("workflow"),i?.(),setTimeout(()=>{x(z.node.id,g0(z.node,p))},150)}catch(z){console.error("Failed to load image into node:",z),C(z instanceof Error?z.message:"Failed to load image.")}finally{S(null)}}};return!r||!l?null:u.jsx("div",{id:"outputs-load-node-overlay",className:"fixed inset-0 z-[2150] bg-black/50 flex items-center justify-center p-4",onClick:s,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-load-node-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:E=>E.stopPropagation(),children:[u.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:"Load image into node"}),u.jsx("div",{className:"px-4 pt-3 text-xs text-gray-500",children:l.name}),u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[M.length===0&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"No Load Image nodes found in the current workflow."}),M.map(E=>{const z=g0(E,p),_=w===E.id;return u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed",onClick:()=>j(E.id),disabled:w!==null,children:[u.jsxs("span",{className:"text-gray-500 dark:text-gray-300",children:["#",E.id]}),u.jsx("span",{className:"flex-1 text-gray-900 dark:text-gray-100 truncate",children:z}),_&&u.jsx("span",{className:"text-xs text-gray-400",children:"Loading"})]},`load-node-${E.id}`)})]}),N&&u.jsx("div",{className:"px-4 py-2 text-xs text-red-600 border-t border-gray-100",children:N}),u.jsx("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end",children:u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg disabled:opacity-60",onClick:s,disabled:w!==null,children:"Close"})})]})})}function Q5({file:r,onCancel:l,onConfirm:o}){return u.jsx("div",{id:"viewer-delete-confirm-overlay",className:"fixed inset-0 z-[2200] bg-black/50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"viewer-delete-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:s=>s.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Delete file?"}),u.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:['This will permanently delete "',r.name,'" from the server. This cannot be undone.']}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:l,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:o,children:"Delete"})]})]})})}function X5({onClose:r}){const l=rr(J=>J.viewerOpen),o=rr(J=>J.viewerImages),s=rr(J=>J.viewerIndex),i=rr(J=>J.viewerScale),d=rr(J=>J.viewerTranslate),p=ne(J=>J.followQueue),h=rr(J=>J.setViewerState),m=ne(J=>J.workflow),g=ne(J=>J.originalWorkflow),x=ne(J=>J.workflowDurationStats),v=ne(J=>J.isExecuting),N=ne(J=>J.executingPromptId),C=Ln(J=>J.setCurrentPanel),w=ne(J=>J.loadWorkflow),S=rt(J=>J.running),M=Tn(J=>J.history),[j,E]=b.useState(null),[z,_]=b.useState(null),[L,R]=b.useState(null),[A,I]=b.useState(!1),U=b.useRef(null),G=b.useMemo(()=>!!(m&&g&&JSON.stringify(m)!==JSON.stringify(g)),[m,g]),W=b.useMemo(()=>!l||!p?null:M[0]?.prompt_id??null,[l,p,M]),K=N||(S.length===1?S[0].prompt_id:null),ge=Go({workflow:m,runKey:K,isRunning:v||S.length>0,workflowDurationStats:x}),ae=v||S.length>0,re=Math.min(100,Math.max(0,ge??0)),$=!(s>=0?o[s]??o[0]??null:null)&&(p||ae)||s<0&&ae;b.useEffect(()=>{if(!l||!p){U.current=null;return}!U.current&&M[0]?.prompt_id&&(U.current=M[0]?.prompt_id??null)},[l,p,M]),b.useEffect(()=>{if(!l||!p||M.length===0)return;const J=M[0];if(U.current===J.prompt_id||J.outputs.images.filter(Le=>Le.type==="output").length===0)return;const ve=vf(M,{onlyOutput:!0,alt:"Generation"});ve.length!==0&&(U.current=J.prompt_id,h({viewerImages:ve,viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}}))},[l,p,M,h]);const fe=J=>{h({viewerIndex:J})},be=(J,le)=>{h({viewerScale:J,viewerTranslate:le})},ye=J=>{J.file&&E(J.file)},T=async()=>{if(!j)return;const J=j;try{const le=Ho(J);await Ed(le,Ii(J));const ve=o.filter(ee=>ee.file?.id!==J.id),Le=o.findIndex(ee=>ee.file?.id===J.id),$e=ve.length===0?0:Le<0?s:Le<s?s-1:Le===s?Math.min(s,ve.length-1):s;h({viewerImages:ve,viewerIndex:$e}),ve.length===0&&r()}catch(le){console.error("Failed to delete file:",le),window.alert("Failed to delete file.")}finally{E(null)}},B=J=>{if(J.file){if(G){_(J.file);return}O(J.file)}},O=async J=>{try{await zx({file:J,loadWorkflow:w,onLoaded:()=>{r(),queueMicrotask(()=>C("workflow"))}})}catch(le){console.error("Failed to load workflow from file:",le),window.alert("Failed to load workflow from file.")}finally{_(null)}},F=J=>{!J.file||J.file.type!=="image"||(R(J.file),I(!0))},X=()=>{I(!1),R(null)},pe=()=>{X(),r(),queueMicrotask(()=>C("workflow"))};return l?u.jsxs(u.Fragment,{children:[u.jsx(Rx,{open:l,items:o,index:s,onIndexChange:fe,onClose:r,onDelete:ye,onLoadWorkflow:B,onLoadInWorkflow:F,showMetadataToggle:!0,showLoadingPlaceholder:$,loadingProgress:re,loadingLabel:ae?`${re}%`:"Waiting for output",initialScale:i,initialTranslate:d,onTransformChange:be,zoomResetKey:W,overlayZIndex:2100}),u.jsx(Dx,{file:z,onCancel:()=>_(null),onConfirm:O}),u.jsx(Bx,{open:A,file:L,source:L?Ii(L):"output",onClose:X,onLoaded:pe}),j&&u.jsx(Q5,{file:j,onCancel:()=>E(null),onConfirm:T})]}):null}function P5(){const[r,l]=b.useState(!1),o=b.useRef(null),s=b.useRef(null),i=b.useRef({}),d=b.useRef({setExecutionState:ne.getState().setExecutionState,setNodeOutput:ne.getState().setNodeOutput,clearNodeOutputs:ne.getState().clearNodeOutputs,addPromptOutputs:ne.getState().addPromptOutputs,clearPromptOutputs:ne.getState().clearPromptOutputs,applyControlAfterGenerate:ne.getState().applyControlAfterGenerate,updateFromStatus:rt.getState().updateFromStatus,fetchQueue:rt.getState().fetchQueue,addHistoryEntry:Tn.getState().addHistoryEntry,fetchHistory:Tn.getState().fetchHistory});b.useEffect(()=>{d.current={setExecutionState:ne.getState().setExecutionState,setNodeOutput:ne.getState().setNodeOutput,clearNodeOutputs:ne.getState().clearNodeOutputs,addPromptOutputs:ne.getState().addPromptOutputs,clearPromptOutputs:ne.getState().clearPromptOutputs,applyControlAfterGenerate:ne.getState().applyControlAfterGenerate,updateFromStatus:rt.getState().updateFromStatus,fetchQueue:rt.getState().fetchQueue,addHistoryEntry:Tn.getState().addHistoryEntry,fetchHistory:Tn.getState().fetchHistory}},[]);const p=b.useRef(null);return b.useEffect(()=>{const h=x=>{const{setExecutionState:v,setNodeOutput:N,addPromptOutputs:C,clearPromptOutputs:w,updateFromStatus:S,fetchQueue:M,addHistoryEntry:j,fetchHistory:E}=d.current,z=x;switch(z.type){case"status":{const L=z.data.status.exec_info.queue_remaining;S(L),L===0&&v(!1,null,null,0);break}case"progress":{const _=z,{value:L,max:R,node:A,prompt_id:I}=_.data,U=Math.round(L/R*100);v(!0,A||null,I||null,U);break}case"executing":{const _=z,L=_.data.node,R=_.data.prompt_id;if(L===null){if(v(!1,null,null,0),d.current.applyControlAfterGenerate(),R){const A=rt.getState().running.find(U=>U.prompt_id===R),I=i.current[R]||[];A&&j({prompt_id:R,timestamp:Date.now(),outputs:{images:I},prompt:A.prompt}),delete i.current[R],w(R)}M(),E()}else{R&&R!==p.current&&(p.current=R),v(!0,L,R||null,0);const A=rt.getState();R&&!A.running.some(I=>I.prompt_id===R)&&M()}break}case"executed":{const _=z,{node:L,prompt_id:R,output:A}=_.data;A.images&&(i.current[R]||(i.current[R]=[]),i.current[R].push(...A.images),C(R,A.images),N(L,A.images));break}case"execution_error":{v(!1,null,null,0),w(),M(),E();break}}},m=()=>{o.current?.readyState!==WebSocket.OPEN&&(o.current=y1(w0,h,async()=>{l(!0);const{fetchQueue:x,fetchHistory:v,setExecutionState:N}=d.current;await x(),v();const C=rt.getState(),w=ne.getState();if(C.running.length>0&&!w.executingPromptId){const S=C.running[0];N(!0,null,S.prompt_id,0)}},()=>{l(!1),s.current=setTimeout(m,2e3)},()=>{l(!1)}))};m();const g=setInterval(()=>{const{fetchQueue:x,fetchHistory:v}=d.current;rt.getState().running.length>0&&(x(),v())},2e3);return()=>{s.current&&clearTimeout(s.current),o.current&&o.current.close(),clearInterval(g)}},[]),{isConnected:r}}function Z5({onSwipeLeft:r,onSwipeRight:l,onSwipeUp:o,onSwipeDown:s,enabled:i=!0,threshold:d=50,preventScroll:p=!0,deferResetOnSwipe:h=!1,deferResetDurationMs:m=350}){const[g,x]=b.useState(0),[v,N]=b.useState(!1),[C,w]=b.useState(i),S=b.useRef(null),M=b.useRef(null);b.useEffect(()=>{w(i)},[i]);const j=b.useCallback(()=>{S.current=null,N(!1),x(0)},[]),E=b.useCallback(z=>{w(z)},[]);return b.useEffect(()=>{if(!C)return;const z=A=>{if(!(A instanceof HTMLElement))return!1;if(A.isContentEditable)return!0;const I=A.tagName.toLowerCase();return I==="input"||I==="textarea"||I==="select"},_=A=>{if(z(A.target)||z(document.activeElement))return;M.current!==null&&(window.clearTimeout(M.current),M.current=null);const I=A.touches[0];S.current={startX:I.clientX,startY:I.clientY,currentX:I.clientX,currentY:I.clientY,isHorizontal:null,isTracking:!0}},L=A=>{const I=S.current;if(!I?.isTracking)return;const U=A.touches[0],G=U.clientX-I.startX,W=U.clientY-I.startY;if(I.isHorizontal===null){if(Math.abs(G)>20||Math.abs(W)>20){const K=Math.abs(G)>Math.abs(W);I.isHorizontal=K,K?(G>0?!!l:!!r)?N(!0):I.isTracking=!1:(W>0?s:o)||(I.isTracking=!1)}return}I.isHorizontal?(p&&A.cancelable&&A.preventDefault(),I.currentX=U.clientX,x(U.clientX-I.startX)):I.currentY=U.clientY},R=()=>{const A=S.current;if(!A?.isTracking){j();return}const I=A.currentX-A.startX,U=A.currentY-A.startY,G=d||window.innerWidth*.25;let W=!1;A.isHorizontal===!0?I<-G&&r?(r(),W=!0):I>G&&l&&(l(),W=!0):A.isHorizontal===!1&&(U<-G&&o?(o(),W=!0):U>G&&s&&(s(),W=!0)),W?h?(S.current=null,N(!1),M.current!==null&&window.clearTimeout(M.current),M.current=window.setTimeout(()=>{j(),M.current=null},m)):requestAnimationFrame(()=>{j()}):j()};return document.addEventListener("touchstart",_,{passive:!0}),document.addEventListener("touchmove",L,{passive:!1}),document.addEventListener("touchend",R,{passive:!0}),document.addEventListener("touchcancel",R,{passive:!0}),()=>{document.removeEventListener("touchstart",_),document.removeEventListener("touchmove",L),document.removeEventListener("touchend",R),document.removeEventListener("touchcancel",R),M.current!==null&&(window.clearTimeout(M.current),M.current=null),j()}},[C,r,l,o,s,d,p,h,m,j]),{swipeOffset:g,isSwiping:v,setSwipeEnabled:E,resetSwipeState:j}}function K5({open:r,onClose:l,filter:o,sort:s,onChangeFilter:i,onChangeSort:d}){if(!r)return null;const p=s?.mode||"modified",h=p.includes("name")?"name":p.includes("size")?"size":"date",m=(()=>{const x=p.endsWith("reverse");return h==="date"?x?"asc":"desc":x?"desc":"asc"})(),g=(x,v)=>{let N;x==="name"?N=v==="asc"?"name":"name-reverse":x==="size"?N=v==="asc"?"size":"size-reverse":N=v==="desc"?"modified":"modified-reverse",d({mode:N})};return u.jsx("div",{id:"filter-modal-root",className:"fixed inset-0 z-[1600] bg-black/50 flex items-center justify-center p-4",onClick:l,children:u.jsxs("div",{id:"filter-modal-content",className:"bg-white rounded-xl shadow-lg w-full max-w-sm max-h-[90vh] overflow-y-auto",onClick:x=>x.stopPropagation(),children:[u.jsxs("div",{id:"filter-modal-header",className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[u.jsx("h3",{id:"filter-modal-title",className:"font-semibold text-gray-900",children:"Filter & Sort"}),u.jsx("button",{onClick:l,children:u.jsx(Gl,{className:"w-6 h-6 text-gray-500"})})]}),u.jsxs("div",{id:"filter-modal-body",className:"p-4 space-y-6",children:[u.jsxs("div",{id:"sort-group-container",children:[u.jsx("h4",{id:"sort-group-label",className:"text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),u.jsx("div",{id:"sort-options-grid",className:"grid grid-cols-2 gap-2",children:["name","date","size"].map(x=>{const v=h===x,N=v?m==="asc"?"desc":"asc":x==="name"?"asc":"desc";return u.jsxs("button",{className:`sort-option-button px-3 py-2 rounded-lg text-sm border ${v?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,onClick:()=>g(x,N),children:[x==="name"?"Name":x==="size"?"Size":"Date",v&&(m==="asc"?" ":" ")]},x)})})]}),u.jsxs("div",{id:"filter-type-group-container",children:[u.jsx("h4",{id:"filter-type-label",className:"text-sm font-medium text-gray-700 mb-2",children:"File Type"}),u.jsx("div",{id:"filter-type-options",className:"flex gap-2",children:["all","image","video"].map(x=>u.jsx("button",{className:`filter-type-button flex-1 px-3 py-2 rounded-lg text-sm border ${o.type===x?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,onClick:()=>i({type:x}),children:x.charAt(0).toUpperCase()+x.slice(1)},x))})]}),u.jsxs("div",{id:"search-input-container",children:[u.jsx("label",{id:"search-input-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),u.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Search by filename...",value:o.search,onChange:x=>i({search:x.target.value})})]}),u.jsxs("div",{id:"favorites-toggle-container",className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"favOnly",checked:o.favoritesOnly,onChange:x=>i({favoritesOnly:x.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500"}),u.jsx("label",{htmlFor:"favOnly",className:"text-sm text-gray-700",children:"Show Favorites Only"})]})]}),u.jsx("div",{id:"filter-modal-footer",className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-end",children:u.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",onClick:l,children:"Apply"})})]})})}const x0="outputs-folders-collapsed",J5=1440*60*1e3;function e4(r){if(!r)return"Unknown date";const l=new Date,o=new Date(l.getFullYear(),l.getMonth(),l.getDate()),s=new Date(r),i=new Date(s.getFullYear(),s.getMonth(),s.getDate()),d=Math.round((o.getTime()-i.getTime())/J5);return d===0?"Today":d===1?"Yesterday":s.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function Cd({file:r,viewMode:l,selectionMode:o,isSelected:s,isFavorited:i,onNavigateFolder:d,onOpen:p,onMenu:h,onToggleSelection:m}){const g=r.type==="folder",[x,v]=b.useState(!1);b.useEffect(()=>{v(!1)},[r.previewUrl,r.id]);const N=()=>{o?m(r.id):g?d(r.name):p(r)},C=w=>{w.stopPropagation(),h(r,w)};return l==="list"?u.jsxs("div",{className:`file-card-list-item flex items-center gap-3 p-2 hover:bg-gray-50 border-b border-gray-100 last:border-0 ${s?"bg-blue-50":""}`,onClick:N,children:[o&&u.jsx("div",{className:`selection-checkbox w-5 h-5 rounded border flex items-center justify-center flex-shrink-0 ${s?"bg-blue-600 border-blue-600 text-white":"border-gray-300 bg-white"}`,children:s&&u.jsx(Hl,{className:"w-3.5 h-3.5"})}),u.jsx("div",{className:`file-preview-container w-10 h-10 flex-shrink-0 flex items-center justify-center rounded text-gray-500 overflow-hidden relative ${g?"":"bg-gray-100"}`,children:g?u.jsx(Vr,{className:"w-6 h-6 text-amber-500"}):r.previewUrl&&!x?u.jsx("img",{src:r.previewUrl,className:"w-full h-full object-cover",loading:"lazy",onError:()=>v(!0)}):r.type==="video"?u.jsx(bg,{className:"w-5 h-5 text-gray-500"}):u.jsx("span",{className:"text-xs font-bold",children:"IMG"})}),u.jsx("div",{className:"file-info-container flex-1 min-w-0",children:u.jsx("div",{className:"file-name text-sm font-medium text-gray-900 truncate",children:r.name})}),u.jsxs("div",{className:"file-actions-container flex items-center gap-2",children:[i&&u.jsx(Vl,{className:"w-4 h-4 text-yellow-500"}),u.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-700",onClick:C,children:u.jsx(bl,{className:"w-5 h-5 -rotate-90"})})]})]}):u.jsxs("div",{className:"file-card-grid-item flex flex-col gap-1",children:[u.jsxs("div",{className:`relative aspect-square bg-gray-100 rounded-lg overflow-hidden transition-all ${s?"ring-4 ring-blue-500 ring-offset-2":""}`,onClick:N,children:[g?u.jsx("div",{className:"folder-grid-content w-full h-full flex flex-col items-center justify-center text-gray-500",children:u.jsx(Vr,{className:"w-12 h-12 mb-2 text-amber-500"})}):r.previewUrl&&!x?u.jsx("img",{src:r.previewUrl,className:"w-full h-full object-cover",loading:"lazy",onError:()=>v(!0)}):u.jsx("div",{className:"media-placeholder w-full h-full flex items-center justify-center bg-gray-800 text-white font-bold",children:r.type==="video"?u.jsx(bg,{className:"w-10 h-10 text-white/80"}):"IMG"}),o?u.jsx("div",{className:"selection-badge-container absolute top-2 left-2",children:u.jsx("div",{className:`selection-badge w-6 h-6 rounded-full border-2 flex items-center justify-center shadow-sm ${s?"bg-blue-600 border-blue-600 text-white":"border-white bg-black/20"}`,children:s&&u.jsx(Hl,{className:"w-4 h-4"})})}):u.jsxs("div",{className:"file-menu-trigger-container absolute top-1 right-1 flex flex-col items-center gap-1",children:[u.jsx("button",{className:"p-1 bg-gray-500/40 rounded-full text-white hover:bg-gray-500/60",onClick:C,children:u.jsx(bl,{className:"w-4 h-4 -rotate-90"})}),i&&u.jsx(Vl,{className:"w-4 h-4 text-yellow-400 drop-shadow"})]}),r.type==="video"&&u.jsx("div",{className:"video-label absolute top-1 left-1 bg-black/50 px-1 rounded text-[10px] text-white",children:"VID"})]}),u.jsx("div",{className:"file-name text-xs text-gray-700 truncate px-1",children:r.name})]})}function t4({visible:r}){const{source:l,currentFolder:o,isLoading:s,viewMode:i,filter:d,sort:p,favorites:h,selectionMode:m,selectedIds:g,setCurrentFolder:x,navigateToPath:v,fetchFolders:N,fetchFiles:C,toggleFavorite:w,toggleSelection:S,getDisplayedFiles:M,refresh:j,selectIds:E,toggleSelectionMode:z,setFilter:_,setSort:L}=St(),R=St(Q=>Q.selectionActionOpen),A=St(Q=>Q.setSelectionActionOpen),I=St(Q=>Q.filterModalOpen),U=St(Q=>Q.setFilterModalOpen),G=St(Q=>Q.newFolderModalOpen),W=St(Q=>Q.setNewFolderModalOpen),K=St(Q=>Q.setOutputsViewerOpen),ge=St(Q=>Q.addFavorites),ae=St(Q=>Q.removeFavorites),re=St(Q=>Q.clearSelection),D=ne(Q=>Q.loadWorkflow),$=Ln(Q=>Q.setCurrentPanel),fe=ne(Q=>Q.workflow),be=ne(Q=>Q.originalWorkflow),ye=b.useMemo(()=>!!(fe&&be&&JSON.stringify(fe)!==JSON.stringify(be)),[fe,be]),[T,B]=b.useState(null),[O,F]=b.useState(null),[X,pe]=b.useState(null),[J,le]=b.useState(null),[ve,Le]=b.useState(!1),[$e,ee]=b.useState(!1),[Ve,Ne]=b.useState(!1),[Ce,tt]=b.useState(null),[Qe,we]=b.useState([]),[xe,Ee]=b.useState(!1),[Ae,ft]=b.useState(""),[ut,Ze]=b.useState([]),[Se,_e]=b.useState(null),[Xe,We]=b.useState(""),[Pe,Ge]=b.useState(!1),[Nt,oe]=b.useState([]),[et,lt]=b.useState(0),jt=b.useRef(null),Vt=b.useRef(!1),[$n,fr]=b.useState(()=>localStorage.getItem(x0)==="true"),[or,An]=b.useState({}),ln=b.useRef(null),an=b.useRef(null),on=b.useRef(!1),Rn=()=>{F(null),ln.current=null},Me=()=>{Le(!1),pe(null),an.current=null},ze=(Q,je)=>{ln.current=je?.onDeleted??null,F(Q)},V=(Q,je)=>{Q.type==="image"&&(an.current=je?.onLoaded??null,pe(Q),Le(!0))};Gi({open:!!T,onDismiss:()=>B(null),triggerRef:{current:null},contentRef:jt}),b.useEffect(()=>{Vt.current=!1},[l]),b.useEffect(()=>{r&&!Vt.current&&!s&&(Vt.current=!0,N(),C())},[r,N,C,s]),b.useEffect(()=>{!r&&Pe&&(Ge(!1),K(!1))},[r,Pe,K]),b.useEffect(()=>{!r&&I&&U(!1)},[r,I,U]);const ce=M(),ue=St(Q=>Q.sort.mode),ke=Q=>{const Oe=M().filter(mt=>(mt.type==="image"||mt.type==="video")&&mt.fullUrl),Et=Oe.map(mt=>({src:mt.fullUrl,alt:mt.name,mediaType:qo(mt.name),file:mt,filename:mt.name})),Qt=Oe.findIndex(mt=>mt.id===Q.id);Qt>=0&&(oe(Et),lt(Qt),Ge(!0),K(!0))},Be=()=>{Ge(!1),K(!1)},Ye=Q=>{Q.file&&ze(Q.file,{onDeleted:je=>{oe(Oe=>{const Et=Oe.findIndex(mt=>mt.file?.id===je.id),Qt=Oe.filter(mt=>mt.file?.id!==je.id);return lt(mt=>Qt.length===0?0:Et===-1?mt:Et<mt?mt-1:Et===mt?Math.min(mt,Qt.length-1):mt),Qt.length===0&&(Ge(!1),K(!1)),Qt})}})},Re=Q=>{!Q.file||Q.file.type!=="image"||V(Q.file,{onLoaded:()=>{Ge(!1),K(!1)}})},ot=Q=>{Q.file&&br(Q.file,{closeViewer:!0})},{folders:pt,nonFolders:gt}=b.useMemo(()=>{const Q=[],je=[];for(const Oe of ce)Oe.type==="folder"?Q.push(Oe):je.push(Oe);return{folders:Q,nonFolders:je}},[ce]),xt=ue.startsWith("name"),yt=ue.startsWith("size"),vt=d.favoritesOnly||!xt&&!yt,Dt=b.useMemo(()=>{if(xt){const je=[];for(const Oe of gt){const Et=Oe.name?.trim()?.charAt(0).toUpperCase()||"#",Qt=`Starting with ${Et}`,mt=je[je.length-1];mt&&mt.key===Et?mt.files.push(Oe):je.push({key:Et,label:Qt,files:[Oe]})}return je}if(yt){const je=[];for(const Oe of gt){const Qt=(Oe.size??0)/(1024*1024),mt=Qt<1?0:Math.round(Qt),Sr=mt===0?"<1MB":`${mt}MB`,Zo=mt===0?"<1MB":`${mt}MB`,Fl=je[je.length-1];Fl&&Fl.key===Sr?Fl.files.push(Oe):je.push({key:Sr,label:Zo,files:[Oe]})}return je}if(!vt)return[{key:"all",label:"All files",files:gt}];const Q=[];for(const je of gt){const Oe=je.date?new Date(je.date).toISOString().slice(0,10):"unknown",Et=e4(je.date),Qt=Q[Q.length-1];Qt&&Qt.key===Oe?Qt.files.push(je):Q.push({key:Oe,label:Et,files:[je]})}return Q},[gt,vt,xt,yt]),qt=()=>{const Q=!$n;fr(Q),localStorage.setItem(x0,String(Q))},Nn=Q=>{An(je=>({...je,[Q]:!je[Q]}))},se=Q=>{ke(Q)},Ke=(Q,je)=>{je.preventDefault();const Oe=Math.min(je.clientX,window.innerWidth-200),Et=Math.min(je.clientY,window.innerHeight-200);B({file:Q,x:Oe,y:Et})},It=()=>{T&&(w(T.file.id),B(null))},Ht=()=>{T&&(m||z(),E([T.file.id],"replace"),B(null))},cn=()=>{T&&T.file.type==="image"&&(pe(T.file),Le(!0),B(null))},fn=()=>{T&&(F(T.file),B(null))},Yn=()=>{g.length!==0&&(A(!1),ee(!0))},Qr=async(Q,je)=>{try{await zx({file:Q,source:l,loadWorkflow:D,onLoaded:()=>{$("workflow"),je?.closeViewer&&(Ge(!1),K(!1))}})}catch(Oe){console.error("Failed to load workflow from file:",Oe),window.alert("Failed to load workflow from file.")}},br=(Q,je)=>{if(Q.type==="folder"){window.alert("Workflow metadata is not available for folders.");return}if(ye){on.current=!!je?.closeViewer,le(Q);return}Qr(Q,je)},Kt=()=>{if(!T)return;const Q=T.file;B(null),br(Q,{closeViewer:!1})},Fo=async()=>{if(!J)return;const Q=J,je=on.current;on.current=!1,le(null),await Qr(Q,{closeViewer:je})},$o=()=>{on.current=!1,le(null)},wr=async()=>{if(!O)return;const Q=O;try{const je=Ho(O,l);await Ed(je,l),j(),ln.current?.(Q),ln.current=null}catch(je){console.error("Failed to delete file:",je),window.alert("Failed to delete file.")}finally{F(null)}},Xr=async()=>{if(g.length===0){ee(!1);return}try{const Q=`${l}/`,je=g.map(Oe=>Oe.startsWith(Q)?Oe.slice(Q.length):Oe);await Promise.all(je.map(Oe=>Ed(Oe,l))),j(),re()}catch(Q){console.error("Failed to delete selected files:",Q),window.alert("Failed to delete selected files.")}finally{ee(!1)}},Xi=()=>{if(g.length===0)return;g.every(je=>h.includes(je))?ae(g):ge(g),A(!1)},Yo=()=>{g.length!==0&&(A(!1),Ze([...g]),_e(o),tt(o),Ne(!0))},Qo=()=>{T&&(Ze([T.file.id]),_e(o),tt(o),Ne(!0),B(null))},Ra=()=>{Ne(!1),Ze([]),_e(null)},ql=async()=>{if(ut.length!==0)try{const Q=`${l}/`,je=ut.map(Oe=>Oe.startsWith(Q)?Oe.slice(Q.length):Oe);await S1(je,Ce,l),j(),m&&(re(),z())}catch(Q){console.error("Failed to move selected files:",Q),window.alert("Failed to move selected files.")}finally{Ra()}},Wl=async()=>{const Q=Ae.trim();if(!Q)return;const je=Ce?`${Ce}/${Q}`:Q;try{await mg(je,l),ft(""),Ee(!0);const Oe=await Od(l,1e3,0,"modified",!1,Ce);we(Oe.filter(Et=>Et.type==="folder"))}catch(Oe){console.error("Failed to create folder:",Oe),window.alert("Failed to create folder.")}finally{Ee(!1)}},Qn=async()=>{const Q=Xe.trim();if(!Q)return;const je=o?`${o}/${Q}`:Q;try{await mg(je,l),We(""),W(!1),j()}catch(Oe){console.error("Failed to create folder:",Oe),window.alert("Failed to create folder.")}},sn=b.useMemo(()=>{const je=[{name:l==="output"?"Outputs":"Inputs",path:null}];if(o){const Oe=o.split("/");Oe.forEach((Et,Qt)=>{je.push({name:Et,path:Oe.slice(0,Qt+1).join("/")})})}return je},[l,o]),Xo=()=>{const Q=sn.length,je=[];return Q<=3?sn.forEach((Oe,Et)=>{je.push({...Oe,isClickable:Et<Q-1})}):(je.push({...sn[0],isClickable:!0}),je.push({name:"...",path:sn[Q-3].path,isEllipsis:!0,isClickable:!0}),je.push({...sn[Q-2],isClickable:!0}),je.push({...sn[Q-1],isClickable:!1})),u.jsx("div",{id:"outputs-breadcrumb-trail",className:"flex items-center text-sm overflow-hidden whitespace-nowrap",children:je.map((Oe,Et)=>u.jsxs("div",{className:"flex items-center min-w-0",children:[Et>0&&u.jsx("span",{className:"mx-1.5 text-gray-400 shrink-0",children:"/"}),u.jsx("button",{onClick:()=>Oe.isClickable&&v(Oe.path),disabled:!Oe.isClickable,className:`
                truncate transition-colors
                ${Oe.isClickable?"text-blue-600 hover:text-blue-700 active:opacity-70":"text-gray-700 font-medium"}
                ${Oe.isEllipsis?"px-1 bg-gray-100 rounded":""}
              `,title:Oe.name,children:Oe.name})]},Et))})};b.useEffect(()=>{if(!Ve)return;let Q=!1;return(async()=>{Ee(!0);try{const Oe=await Od(l,1e3,0,"modified",!1,Ce);if(Q)return;we(Oe.filter(Et=>Et.type==="folder"))}catch(Oe){if(Q)return;console.error("Failed to load folders:",Oe),we([])}finally{Q||Ee(!1)}})(),()=>{Q=!0}},[Ve,Ce,l]),b.useEffect(()=>{R&&g.length===0&&A(!1)},[R,g.length,A]);const Pi=()=>{const Q=St.getState();Q.clearSelection(),Q.toggleSelectionMode()},Da=()=>{if(!Ce)return;const Q=Ce.split("/");Q.pop(),tt(Q.length?Q.join("/"):null)},Po=Q=>()=>{tt(Ce?`${Ce}/${Q}`:Q)};return u.jsx("div",{id:"outputs-panel-wrapper",className:"absolute inset-x-0 top-[60px] bottom-0",style:{display:r?"block":"none"},children:u.jsxs("div",{id:"outputs-panel-root",className:"h-full bg-white flex flex-col pt-[4px] pb-[80px]",children:[u.jsx("div",{id:"outputs-panel-header",className:"px-4 py-3 flex flex-col gap-3 border-b border-gray-100",children:u.jsxs("div",{id:"outputs-header-top-row",className:"flex items-center justify-between min-h-[24px]",children:[Xo(),m&&u.jsxs("div",{className:"selection-status-container flex items-center gap-2 shrink-0 ml-2",children:[u.jsxs("span",{className:"text-[10px] font-bold text-blue-600 uppercase",children:[g.length," selected"]}),u.jsx("button",{onClick:Pi,className:"text-[10px] text-gray-500 underline uppercase font-bold",children:"Clear"})]})]})}),u.jsxs("div",{id:"outputs-content-container",className:"flex-1 overflow-y-auto p-4",children:[pt.length>0&&u.jsxs("div",{id:"outputs-folders-section",className:"mb-4",children:[u.jsxs("button",{onClick:qt,className:"flex items-center gap-2 w-full text-left mb-2 py-1 text-sm font-medium text-gray-600 hover:text-gray-900",children:[$n?u.jsx(Oi,{className:"w-4 h-4"}):u.jsx(ki,{className:"w-4 h-4"}),u.jsxs("span",{children:["Folders (",pt.length,")"]})]}),!$n&&u.jsx("div",{className:"flex flex-col border border-gray-200 rounded-lg overflow-hidden",children:pt.map(Q=>u.jsx(Cd,{file:Q,viewMode:"list",selectionMode:m,isSelected:g.includes(Q.id),isFavorited:h.includes(Q.id),onNavigateFolder:x,onOpen:se,onMenu:Ke,onToggleSelection:S},Q.id))})]}),u.jsx("div",{id:"outputs-files-section",className:"flex flex-col gap-4",children:Dt.map(Q=>u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center justify-between gap-3",children:[u.jsxs("button",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wide text-gray-500 hover:text-gray-800",onClick:()=>Nn(Q.key),children:[or[Q.key]?u.jsx(Oi,{className:"w-3.5 h-3.5"}):u.jsx(ki,{className:"w-3.5 h-3.5"}),u.jsxs("span",{children:[Q.label," (",Q.files.length,")"]})]}),m&&u.jsx("button",{className:"text-[10px] font-bold uppercase text-blue-600 hover:text-blue-700",onClick:()=>E(Q.files.map(je=>je.id)),children:"Select all"})]}),!or[Q.key]&&(i==="grid"?u.jsx("div",{className:"grid grid-cols-2 gap-4 auto-rows-min",children:Q.files.map(je=>u.jsx(Cd,{file:je,viewMode:i,selectionMode:m,isSelected:g.includes(je.id),isFavorited:h.includes(je.id),onNavigateFolder:x,onOpen:se,onMenu:Ke,onToggleSelection:S},je.id))}):u.jsx("div",{className:"flex flex-col",children:Q.files.map(je=>u.jsx(Cd,{file:je,viewMode:i,selectionMode:m,isSelected:g.includes(je.id),isFavorited:h.includes(je.id),onNavigateFolder:x,onOpen:se,onMenu:Ke,onToggleSelection:S},je.id))}))]},Q.key))}),s&&u.jsx("div",{id:"outputs-loading-indicator",className:"py-4 flex justify-center",children:u.jsx("span",{className:"text-gray-400 text-sm",children:"Loading..."})}),!s&&ce.length===0&&u.jsx("div",{id:"outputs-empty-message",className:"text-center text-gray-400 py-8",children:o?"No images in this folder":l==="output"?"No generated images yet":"No imported images"})]}),T&&u.jsxs(u.Fragment,{children:[u.jsx("div",{id:"outputs-context-menu-overlay",className:"fixed inset-0 z-[1690]",onClick:()=>B(null),onPointerDown:Q=>Q.stopPropagation()}),u.jsxs("div",{id:"outputs-context-menu",ref:jt,className:"fixed z-[1700] bg-white shadow-xl rounded-lg border border-gray-200 w-52 py-1",style:{top:T.y,left:T.x},onPointerDown:Q=>Q.stopPropagation(),onClick:Q=>Q.stopPropagation(),children:[u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:It,children:[h.includes(T.file.id)?u.jsx(Vl,{className:"w-4 h-4"}):u.jsx(Mi,{className:"w-4 h-4"}),h.includes(T.file.id)?"Unfavorite":"Favorite"]}),u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Ht,children:[u.jsx(Hl,{className:"w-4 h-4 text-gray-500"}),"Select"]}),u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Qo,children:[u.jsx(Vr,{className:"w-4 h-4 text-gray-500"}),"Move"]}),T.file.type==="image"&&u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Kt,children:[u.jsx(_a,{className:"w-4 h-4 text-gray-500"}),"Load workflow"]}),T.file.type==="image"&&u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:cn,children:[u.jsx(_0,{className:"w-4 h-4 text-gray-500"}),"Use in workflow"]}),u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:fn,children:[u.jsx(Ur,{className:"w-4 h-4"}),"Delete"]})]})]}),R&&u.jsx("div",{id:"outputs-selection-actions",className:"fixed inset-0 z-[1800] bg-black/40 flex items-center justify-center p-4",onClick:()=>A(!1),role:"dialog","aria-modal":"true",children:u.jsxs("div",{className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:Q=>Q.stopPropagation(),children:[u.jsxs("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:[g.length," selected"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Xi,children:[g.every(Q=>h.includes(Q))?u.jsx(Mi,{className:"w-4 h-4"}):u.jsx(Vl,{className:"w-4 h-4"}),g.every(Q=>h.includes(Q))?"Unfavorite":"Favorite"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Yo,children:[u.jsx(Vr,{className:"w-4 h-4 text-gray-500"}),"Move"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:Yn,children:[u.jsx(Ur,{className:"w-4 h-4"}),"Delete"]}),u.jsx("button",{className:"w-full text-left px-4 py-3 text-sm text-gray-600 hover:bg-gray-50",onClick:()=>A(!1),children:"Cancel"})]})}),Ve&&u.jsx("div",{id:"outputs-move-picker-overlay",className:"fixed inset-0 z-[1850] bg-black/50 flex items-center justify-center p-4",onClick:Ra,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-move-picker",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:Q=>Q.stopPropagation(),children:[u.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:Ce!==Se?u.jsxs(u.Fragment,{children:["Move to ",u.jsx(Vr,{className:"w-4 h-4 text-amber-500 inline"})," ",Ce||"root"]}):"Move to..."}),u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[xe&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"Loading folders..."}),!xe&&Ce&&u.jsx("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Da,children:u.jsx("span",{className:"text-gray-500",children:".."})}),!xe&&Qe.filter(Q=>!ut.includes(Q.id)).length===0&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"No folders"}),!xe&&Qe.filter(Q=>!ut.includes(Q.id)).map(Q=>u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Po(Q.name),children:[u.jsx(Vr,{className:"w-4 h-4 text-amber-500"}),Q.name]},Q.id)),u.jsx("div",{className:"px-4 py-3 border-t border-gray-100",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{value:Ae,onChange:Q=>ft(Q.target.value),placeholder:"New folder",className:"flex-1 border border-gray-200 rounded-lg px-3 py-2 text-sm"}),u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-blue-600 hover:text-blue-700",onClick:Wl,children:"Create"})]})})]}),u.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg",onClick:Ra,children:"Cancel"}),u.jsx("button",{className:`px-3 py-2 text-sm font-medium rounded-lg ${Ce!==Se?"text-white bg-blue-600 hover:bg-blue-700":"text-gray-400 bg-gray-200 cursor-not-allowed"}`,onClick:ql,disabled:Ce===Se,children:"Submit"})]})]})}),O&&u.jsx("div",{id:"outputs-delete-confirm-overlay",className:"fixed inset-0 z-[2100] bg-black/50 flex items-center justify-center p-4",onClick:Rn,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-delete-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:Q=>Q.stopPropagation(),children:[u.jsx("div",{id:"outputs-delete-confirm-title",className:"text-gray-900 text-base font-semibold",children:"Delete file?"}),u.jsx("div",{id:"outputs-delete-confirm-description",className:"text-gray-600 text-sm mt-1",children:O.type==="folder"?`This will permanently delete the folder "${O.name}" and all of its contents from the server. This cannot be undone.`:`This will permanently delete "${O.name}" from the server. This cannot be undone.`}),u.jsxs("div",{id:"outputs-delete-confirm-actions",className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:Rn,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:wr,children:"Delete"})]})]})}),$e&&u.jsx("div",{id:"outputs-delete-selection-overlay",className:"fixed inset-0 z-[1800] bg-black/50 flex items-center justify-center p-4",onClick:()=>ee(!1),role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-delete-selection-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:Q=>Q.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Delete selected files?"}),u.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:["This will permanently delete ",g.length," selected file",g.length===1?"":"s"," from the server. This cannot be undone."]}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:()=>ee(!1),children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:Xr,children:"Delete"})]})]})}),G&&u.jsx("div",{id:"outputs-new-folder-overlay",className:"fixed inset-0 z-[1850] bg-black/50 flex items-center justify-center p-4",onClick:()=>{W(!1),We("")},role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-new-folder-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:Q=>Q.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"New folder"}),u.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:["Create a new folder in ",o?u.jsxs(u.Fragment,{children:[u.jsx(Vr,{className:"w-3.5 h-3.5 text-amber-500 inline"})," ",o]}):"root"]}),u.jsx("input",{value:Xe,onChange:Q=>We(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Qn()},placeholder:"Folder name",className:"mt-3 w-full border border-gray-200 rounded-lg px-3 py-2 text-sm",autoFocus:!0}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:()=>{W(!1),We("")},children:"Cancel"}),u.jsx("button",{className:`px-3 py-2 rounded-lg text-sm font-medium ${Xe.trim()?"text-white bg-blue-600 hover:bg-blue-700":"text-gray-400 bg-gray-200 cursor-not-allowed"}`,onClick:Qn,disabled:!Xe.trim(),children:"Create"})]})]})}),u.jsx(Bx,{open:ve,file:X,source:l,onClose:Me,onLoaded:()=>{Le(!1),pe(null),an.current?.(),an.current=null}}),u.jsx(K5,{open:I,onClose:()=>U(!1),filter:d,sort:p,onChangeFilter:_,onChangeSort:L}),u.jsx(Dx,{file:J,onCancel:$o,onConfirm:Fo}),u.jsx(Rx,{open:Pe,items:Nt,index:et,onClose:Be,onIndexChange:lt,onDelete:Ye,onLoadInWorkflow:Re,onLoadWorkflow:ot,showMetadataToggle:!0})]})})}function n4(){const r=Ln(D=>D.currentPanel),l=Ln(D=>D.setCurrentPanel),o=_d(D=>D.appMenuOpen),s=rr(D=>D.viewerOpen),i=rr(D=>D.setViewerState),d=ne(D=>D.followQueue),p=ne(D=>D.setFollowQueue),h=bn(D=>D.bookmarkRepositioningActive),m=b.useRef(null),{isInputFocused:g}=Ax(),x=St(D=>D.outputsViewerOpen),v=St(D=>D.selectionMode),N=St(D=>D.filterModalOpen),C=St(D=>D.selectionActionOpen),w=St(D=>D.currentFolder),S=St(D=>D.navigateUp);P5();const M=b.useCallback(()=>{r==="workflow"?l("queue"):r==="outputs"&&l("workflow")},[r,l]),j=b.useCallback(()=>{r==="outputs"&&w?S():r==="workflow"?l("outputs"):r==="queue"&&l("workflow")},[r,w,S,l]),E=r==="workflow"||r==="outputs",z=r==="workflow"||r==="queue"||r==="outputs"&&!!w,{swipeOffset:_,isSwiping:L,setSwipeEnabled:R,resetSwipeState:A}=Z5({onSwipeLeft:E?M:void 0,onSwipeRight:z?j:void 0,enabled:!g&&!s&&!o&&!x&&!h&&!v&&!N&&!C}),I=ne(D=>D.setNodeTypes),U=Ei(D=>D.theme),G=ne(D=>D.workflowLoadedAt),W=rt(D=>D.fetchQueue),K=Tn(D=>D.history);b.useEffect(()=>{!L&&_!==0&&A()},[L,_,A]),b.useEffect(()=>{x&&A()},[x,A]);const ge=()=>{i({viewerOpen:!1}),p(!1),R(!0),A()};b.useEffect(()=>{S0().then(D=>{I(D)}).catch(D=>{console.error("Failed to load node types:",D)})},[I]),b.useEffect(()=>{W()},[W]);const ae=(D,$,fe=!0)=>{R(!1),A(),i({viewerImages:D,viewerIndex:$,viewerScale:1,viewerTranslate:{x:0,y:0},viewerOpen:!0}),p(fe)},re=()=>{const D=vf(K,{onlyOutput:!0,alt:"Generation"});R(!1),A();const $=D.length>0?0:-1;i({viewerImages:D,viewerIndex:$,viewerScale:1,viewerTranslate:{x:0,y:0},viewerOpen:!0}),p(!0)};return b.useEffect(()=>{const D=document.documentElement;D.classList.toggle("dark",U==="dark"),D.style.colorScheme=U},[U]),b.useEffect(()=>{G&&queueMicrotask(()=>{p(!1)})},[G,p]),u.jsxs("div",{id:"app-root",className:"min-h-screen bg-gray-100",children:[u.jsx(Fb,{mode:r}),u.jsxs("main",{id:"main-content",ref:m,className:"pt-[60px] pb-[80px] min-h-screen relative",children:[u.jsxs(u.Fragment,{children:[u.jsx(t4,{visible:r==="outputs"}),u.jsx(l5,{visible:r==="workflow",onImageClick:ae}),u.jsx(L5,{visible:r==="queue",onImageClick:ae})]}),u.jsx("div",{id:"bottom-bar-spacer",className:"fixed inset-x-0 bottom-0 bg-gray-100 pointer-events-none z-[1500]",style:{height:"var(--bottom-bar-offset, 80px)"}})]}),u.jsx(m5,{currentPanel:r,viewerOpen:s,followQueue:d,onToggleFollowQueue:()=>p(!d),onOpenFollowQueue:re}),u.jsx(X5,{onClose:ge})]})}Jv.createRoot(document.getElementById("root")).render(u.jsx(b.StrictMode,{children:u.jsx(n4,{})}));
//# sourceMappingURL=index-D-Raqx85.js.map
