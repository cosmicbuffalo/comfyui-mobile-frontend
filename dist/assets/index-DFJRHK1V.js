function x1(n,o){for(var s=0;s<o.length;s++){const l=o[s];if(typeof l!="string"&&!Array.isArray(l)){for(const i in l)if(i!=="default"&&!(i in n)){const c=Object.getOwnPropertyDescriptor(l,i);c&&Object.defineProperty(n,i,c.get?c:{enumerable:!0,get:()=>l[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function s(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(i){if(i.ep)return;i.ep=!0;const c=s(i);fetch(i.href,c)}})();function v1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ud={exports:{}},ea={};var r0;function w1(){if(r0)return ea;r0=1;var n=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function s(l,i,c){var f=null;if(c!==void 0&&(f=""+c),i.key!==void 0&&(f=""+i.key),"key"in i){c={};for(var m in i)m!=="key"&&(c[m]=i[m])}else c=i;return i=c.ref,{$$typeof:n,type:l,key:f,ref:i!==void 0?i:null,props:c}}return ea.Fragment=o,ea.jsx=s,ea.jsxs=s,ea}var s0;function S1(){return s0||(s0=1,Ud.exports=w1()),Ud.exports}var u=S1(),$d={exports:{}},Nt={};var l0;function N1(){if(l0)return Nt;l0=1;var n=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),w=Symbol.iterator;function k(T){return T===null||typeof T!="object"?null:(T=w&&T[w]||T["@@iterator"],typeof T=="function"?T:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,j={};function N(T,A,O){this.props=T,this.context=A,this.refs=j,this.updater=O||C}N.prototype.isReactComponent={},N.prototype.setState=function(T,A){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,A,"setState")},N.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function E(){}E.prototype=N.prototype;function H(T,A,O){this.props=T,this.context=A,this.refs=j,this.updater=O||C}var V=H.prototype=new E;V.constructor=H,S(V,N.prototype),V.isPureReactComponent=!0;var L=Array.isArray;function z(){}var I={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function W(T,A,O){var te=O.ref;return{$$typeof:n,type:T,key:A,ref:te!==void 0?te:null,props:O}}function ie(T,A){return W(T.type,A,T.props)}function de(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function me(T){var A={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(O){return A[O]})}var Ae=/\/+/g;function Ee(T,A){return typeof T=="object"&&T!==null&&T.key!=null?me(""+T.key):A.toString(36)}function Ie(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(z,z):(T.status="pending",T.then(function(A){T.status==="pending"&&(T.status="fulfilled",T.value=A)},function(A){T.status==="pending"&&(T.status="rejected",T.reason=A)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function B(T,A,O,te,X){var pe=typeof T;(pe==="undefined"||pe==="boolean")&&(T=null);var Y=!1;if(T===null)Y=!0;else switch(pe){case"bigint":case"string":case"number":Y=!0;break;case"object":switch(T.$$typeof){case n:case o:Y=!0;break;case b:return Y=T._init,B(Y(T._payload),A,O,te,X)}}if(Y)return X=X(T),Y=te===""?"."+Ee(T,0):te,L(X)?(O="",Y!=null&&(O=Y.replace(Ae,"$&/")+"/"),B(X,A,O,"",function(U){return U})):X!=null&&(de(X)&&(X=ie(X,O+(X.key==null||T&&T.key===X.key?"":(""+X.key).replace(Ae,"$&/")+"/")+Y)),A.push(X)),1;Y=0;var ue=te===""?".":te+":";if(L(T))for(var _=0;_<T.length;_++)te=T[_],pe=ue+Ee(te,_),Y+=B(te,A,O,pe,X);else if(_=k(T),typeof _=="function")for(T=_.call(T),_=0;!(te=T.next()).done;)te=te.value,pe=ue+Ee(te,_++),Y+=B(te,A,O,pe,X);else if(pe==="object"){if(typeof T.then=="function")return B(Ie(T),A,O,te,X);throw A=String(T),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return Y}function le(T,A,O){if(T==null)return T;var te=[],X=0;return B(T,te,"","",function(pe){return A.call(O,pe,X++)}),te}function fe(T){if(T._status===-1){var A=T._result;A=A(),A.then(function(O){(T._status===0||T._status===-1)&&(T._status=1,T._result=O)},function(O){(T._status===0||T._status===-1)&&(T._status=2,T._result=O)}),T._status===-1&&(T._status=0,T._result=A)}if(T._status===1)return T._result.default;throw T._result}var $e=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},Re={map:le,forEach:function(T,A,O){le(T,function(){A.apply(this,arguments)},O)},count:function(T){var A=0;return le(T,function(){A++}),A},toArray:function(T){return le(T,function(A){return A})||[]},only:function(T){if(!de(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Nt.Activity=x,Nt.Children=Re,Nt.Component=N,Nt.Fragment=s,Nt.Profiler=i,Nt.PureComponent=H,Nt.StrictMode=l,Nt.Suspense=p,Nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Nt.__COMPILER_RUNTIME={__proto__:null,c:function(T){return I.H.useMemoCache(T)}},Nt.cache=function(T){return function(){return T.apply(null,arguments)}},Nt.cacheSignal=function(){return null},Nt.cloneElement=function(T,A,O){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var te=S({},T.props),X=T.key;if(A!=null)for(pe in A.key!==void 0&&(X=""+A.key),A)!$.call(A,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&A.ref===void 0||(te[pe]=A[pe]);var pe=arguments.length-2;if(pe===1)te.children=O;else if(1<pe){for(var Y=Array(pe),ue=0;ue<pe;ue++)Y[ue]=arguments[ue+2];te.children=Y}return W(T.type,X,te)},Nt.createContext=function(T){return T={$$typeof:f,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:c,_context:T},T},Nt.createElement=function(T,A,O){var te,X={},pe=null;if(A!=null)for(te in A.key!==void 0&&(pe=""+A.key),A)$.call(A,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(X[te]=A[te]);var Y=arguments.length-2;if(Y===1)X.children=O;else if(1<Y){for(var ue=Array(Y),_=0;_<Y;_++)ue[_]=arguments[_+2];X.children=ue}if(T&&T.defaultProps)for(te in Y=T.defaultProps,Y)X[te]===void 0&&(X[te]=Y[te]);return W(T,pe,X)},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(T){return{$$typeof:m,render:T}},Nt.isValidElement=de,Nt.lazy=function(T){return{$$typeof:b,_payload:{_status:-1,_result:T},_init:fe}},Nt.memo=function(T,A){return{$$typeof:g,type:T,compare:A===void 0?null:A}},Nt.startTransition=function(T){var A=I.T,O={};I.T=O;try{var te=T(),X=I.S;X!==null&&X(O,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(z,$e)}catch(pe){$e(pe)}finally{A!==null&&O.types!==null&&(A.types=O.types),I.T=A}},Nt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Nt.use=function(T){return I.H.use(T)},Nt.useActionState=function(T,A,O){return I.H.useActionState(T,A,O)},Nt.useCallback=function(T,A){return I.H.useCallback(T,A)},Nt.useContext=function(T){return I.H.useContext(T)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(T,A){return I.H.useDeferredValue(T,A)},Nt.useEffect=function(T,A){return I.H.useEffect(T,A)},Nt.useEffectEvent=function(T){return I.H.useEffectEvent(T)},Nt.useId=function(){return I.H.useId()},Nt.useImperativeHandle=function(T,A,O){return I.H.useImperativeHandle(T,A,O)},Nt.useInsertionEffect=function(T,A){return I.H.useInsertionEffect(T,A)},Nt.useLayoutEffect=function(T,A){return I.H.useLayoutEffect(T,A)},Nt.useMemo=function(T,A){return I.H.useMemo(T,A)},Nt.useOptimistic=function(T,A){return I.H.useOptimistic(T,A)},Nt.useReducer=function(T,A,O){return I.H.useReducer(T,A,O)},Nt.useRef=function(T){return I.H.useRef(T)},Nt.useState=function(T){return I.H.useState(T)},Nt.useSyncExternalStore=function(T,A,O){return I.H.useSyncExternalStore(T,A,O)},Nt.useTransition=function(){return I.H.useTransition()},Nt.version="19.2.3",Nt}var a0;function Wf(){return a0||(a0=1,$d.exports=N1()),$d.exports}var y=Wf();const Js=v1(y),i0=x1({__proto__:null,default:Js},[y]);var Fd={exports:{}},ta={},qd={exports:{}},Wd={};var u0;function C1(){return u0||(u0=1,(function(n){function o(B,le){var fe=B.length;B.push(le);e:for(;0<fe;){var $e=fe-1>>>1,Re=B[$e];if(0<i(Re,le))B[$e]=le,B[fe]=Re,fe=$e;else break e}}function s(B){return B.length===0?null:B[0]}function l(B){if(B.length===0)return null;var le=B[0],fe=B.pop();if(fe!==le){B[0]=fe;e:for(var $e=0,Re=B.length,T=Re>>>1;$e<T;){var A=2*($e+1)-1,O=B[A],te=A+1,X=B[te];if(0>i(O,fe))te<Re&&0>i(X,O)?(B[$e]=X,B[te]=fe,$e=te):(B[$e]=O,B[A]=fe,$e=A);else if(te<Re&&0>i(X,fe))B[$e]=X,B[te]=fe,$e=te;else break e}}return le}function i(B,le){var fe=B.sortIndex-le.sortIndex;return fe!==0?fe:B.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();n.unstable_now=function(){return f.now()-m}}var p=[],g=[],b=1,x=null,w=3,k=!1,C=!1,S=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function V(B){for(var le=s(g);le!==null;){if(le.callback===null)l(g);else if(le.startTime<=B)l(g),le.sortIndex=le.expirationTime,o(p,le);else break;le=s(g)}}function L(B){if(S=!1,V(B),!C)if(s(p)!==null)C=!0,z||(z=!0,me());else{var le=s(g);le!==null&&Ie(L,le.startTime-B)}}var z=!1,I=-1,$=5,W=-1;function ie(){return j?!0:!(n.unstable_now()-W<$)}function de(){if(j=!1,z){var B=n.unstable_now();W=B;var le=!0;try{e:{C=!1,S&&(S=!1,E(I),I=-1),k=!0;var fe=w;try{t:{for(V(B),x=s(p);x!==null&&!(x.expirationTime>B&&ie());){var $e=x.callback;if(typeof $e=="function"){x.callback=null,w=x.priorityLevel;var Re=$e(x.expirationTime<=B);if(B=n.unstable_now(),typeof Re=="function"){x.callback=Re,V(B),le=!0;break t}x===s(p)&&l(p),V(B)}else l(p);x=s(p)}if(x!==null)le=!0;else{var T=s(g);T!==null&&Ie(L,T.startTime-B),le=!1}}break e}finally{x=null,w=fe,k=!1}le=void 0}}finally{le?me():z=!1}}}var me;if(typeof H=="function")me=function(){H(de)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Ee=Ae.port2;Ae.port1.onmessage=de,me=function(){Ee.postMessage(null)}}else me=function(){N(de,0)};function Ie(B,le){I=N(function(){B(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(B){switch(w){case 1:case 2:case 3:var le=3;break;default:le=w}var fe=w;w=le;try{return B()}finally{w=fe}},n.unstable_requestPaint=function(){j=!0},n.unstable_runWithPriority=function(B,le){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var fe=w;w=B;try{return le()}finally{w=fe}},n.unstable_scheduleCallback=function(B,le,fe){var $e=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?$e+fe:$e):fe=$e,B){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=fe+Re,B={id:b++,callback:le,priorityLevel:B,startTime:fe,expirationTime:Re,sortIndex:-1},fe>$e?(B.sortIndex=fe,o(g,B),s(p)===null&&B===s(g)&&(S?(E(I),I=-1):S=!0,Ie(L,fe-$e))):(B.sortIndex=Re,o(p,B),C||k||(C=!0,z||(z=!0,me()))),B},n.unstable_shouldYield=ie,n.unstable_wrapCallback=function(B){var le=w;return function(){var fe=w;w=le;try{return B.apply(this,arguments)}finally{w=fe}}}})(Wd)),Wd}var c0;function k1(){return c0||(c0=1,qd.exports=C1()),qd.exports}var Gd={exports:{}},zn={};var d0;function j1(){if(d0)return zn;d0=1;var n=Wf();function o(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var l={d:{f:s,r:function(){throw Error(o(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},i=Symbol.for("react.portal");function c(p,g,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:x==null?null:""+x,children:p,containerInfo:g,implementation:b}}var f=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,zn.createPortal=function(p,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(o(299));return c(p,g,null,b)},zn.flushSync=function(p){var g=f.T,b=l.p;try{if(f.T=null,l.p=2,p)return p()}finally{f.T=g,l.p=b,l.d.f()}},zn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,l.d.C(p,g))},zn.prefetchDNS=function(p){typeof p=="string"&&l.d.D(p)},zn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var b=g.as,x=m(b,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,k=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?l.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:w,fetchPriority:k}):b==="script"&&l.d.X(p,{crossOrigin:x,integrity:w,fetchPriority:k,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},zn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=m(g.as,g.crossOrigin);l.d.M(p,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&l.d.M(p)},zn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,x=m(b,g.crossOrigin);l.d.L(p,b,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},zn.preloadModule=function(p,g){if(typeof p=="string")if(g){var b=m(g.as,g.crossOrigin);l.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else l.d.m(p)},zn.requestFormReset=function(p){l.d.r(p)},zn.unstable_batchedUpdates=function(p,g){return p(g)},zn.useFormState=function(p,g,b){return f.H.useFormState(p,g,b)},zn.useFormStatus=function(){return f.H.useHostTransitionStatus()},zn.version="19.2.3",zn}var f0;function $y(){if(f0)return Gd.exports;f0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(o){console.error(o)}}return n(),Gd.exports=j1(),Gd.exports}var p0;function M1(){if(p0)return ta;p0=1;var n=k1(),o=Wf(),s=$y();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(l(188))}function g(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(l(188));return t!==e?null:e}for(var r=e,a=t;;){var d=r.return;if(d===null)break;var h=d.alternate;if(h===null){if(a=d.return,a!==null){r=a;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===r)return p(d),e;if(h===a)return p(d),t;h=h.sibling}throw Error(l(188))}if(r.return!==a.return)r=d,a=h;else{for(var v=!1,M=d.child;M;){if(M===r){v=!0,r=d,a=h;break}if(M===a){v=!0,a=d,r=h;break}M=M.sibling}if(!v){for(M=h.child;M;){if(M===r){v=!0,r=h,a=d;break}if(M===a){v=!0,a=h,r=d;break}M=M.sibling}if(!v)throw Error(l(189))}}if(r.alternate!==a)throw Error(l(190))}if(r.tag!==3)throw Error(l(188));return r.stateNode.current===r?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,w=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),H=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function me(e){return e===null||typeof e!="object"?null:(e=de&&e[de]||e["@@iterator"],typeof e=="function"?e:null)}var Ae=Symbol.for("react.client.reference");function Ee(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ae?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case N:return"Profiler";case j:return"StrictMode";case L:return"Suspense";case z:return"SuspenseList";case W:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case H:return e.displayName||"Context";case E:return(e._context.displayName||"Context")+".Consumer";case V:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return t=e.displayName||null,t!==null?t:Ee(e.type)||"Memo";case $:t=e._payload,e=e._init;try{return Ee(e(t))}catch{}}return null}var Ie=Array.isArray,B=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},$e=[],Re=-1;function T(e){return{current:e}}function A(e){0>Re||(e.current=$e[Re],$e[Re]=null,Re--)}function O(e,t){Re++,$e[Re]=e.current,e.current=t}var te=T(null),X=T(null),pe=T(null),Y=T(null);function ue(e,t){switch(O(pe,t),O(X,e),O(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Mg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Mg(t),e=Og(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}A(te),O(te,e)}function _(){A(te),A(X),A(pe)}function U(e){e.memoizedState!==null&&O(Y,e);var t=te.current,r=Og(t,e.type);t!==r&&(O(X,e),O(te,r))}function R(e){X.current===e&&(A(te),A(X)),Y.current===e&&(A(Y),Ql._currentValue=fe)}var D,G;function K(e){if(D===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||"",G=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+D+e+G}var Oe=!1;function Ne(e,t){if(!e||Oe)return"";Oe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var He=function(){throw Error()};if(Object.defineProperty(He.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(He,[])}catch(je){var ve=je}Reflect.construct(e,[],He)}else{try{He.call()}catch(je){ve=je}e.call(He.prototype)}}else{try{throw Error()}catch(je){ve=je}(He=e())&&typeof He.catch=="function"&&He.catch(function(){})}}catch(je){if(je&&ve&&typeof je.stack=="string")return[je.stack,ve.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=a.DetermineComponentFrameRoot(),v=h[0],M=h[1];if(v&&M){var q=v.split(`
`),ye=M.split(`
`);for(d=a=0;a<q.length&&!q[a].includes("DetermineComponentFrameRoot");)a++;for(;d<ye.length&&!ye[d].includes("DetermineComponentFrameRoot");)d++;if(a===q.length||d===ye.length)for(a=q.length-1,d=ye.length-1;1<=a&&0<=d&&q[a]!==ye[d];)d--;for(;1<=a&&0<=d;a--,d--)if(q[a]!==ye[d]){if(a!==1||d!==1)do if(a--,d--,0>d||q[a]!==ye[d]){var _e=`
`+q[a].replace(" at new "," at ");return e.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",e.displayName)),_e}while(1<=a&&0<=d);break}}}finally{Oe=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?K(r):""}function we(e,t){switch(e.tag){case 26:case 27:case 5:return K(e.type);case 16:return K("Lazy");case 13:return e.child!==t&&t!==null?K("Suspense Fallback"):K("Suspense");case 19:return K("SuspenseList");case 0:case 15:return Ne(e.type,!1);case 11:return Ne(e.type.render,!1);case 1:return Ne(e.type,!0);case 31:return K("Activity");default:return""}}function J(e){try{var t="",r=null;do t+=we(e,r),r=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var ke=Object.prototype.hasOwnProperty,ee=n.unstable_scheduleCallback,se=n.unstable_cancelCallback,xe=n.unstable_shouldYield,Ue=n.unstable_requestPaint,Le=n.unstable_now,Ve=n.unstable_getCurrentPriorityLevel,F=n.unstable_ImmediatePriority,Se=n.unstable_UserBlockingPriority,Be=n.unstable_NormalPriority,Ge=n.unstable_LowPriority,et=n.unstable_IdlePriority,Ye=n.log,rt=n.unstable_setDisableYieldValue,Pe=null,qe=null;function at(e){if(typeof Ye=="function"&&rt(e),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Pe,e)}catch{}}var pt=Math.clz32?Math.clz32:Yt,Mt=Math.log,Wt=Math.LN2;function Yt(e){return e>>>=0,e===0?32:31-(Mt(e)/Wt|0)|0}var be=256,Q=262144,re=4194304;function ge(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Te(e,t,r){var a=e.pendingLanes;if(a===0)return 0;var d=0,h=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var M=a&134217727;return M!==0?(a=M&~h,a!==0?d=ge(a):(v&=M,v!==0?d=ge(v):r||(r=M&~e,r!==0&&(d=ge(r))))):(M=a&~h,M!==0?d=ge(M):v!==0?d=ge(v):r||(r=a&~e,r!==0&&(d=ge(r)))),d===0?0:t!==0&&t!==d&&(t&h)===0&&(h=d&-d,r=t&-t,h>=r||h===32&&(r&4194048)!==0)?t:d}function Ke(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Me(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function it(){var e=re;return re<<=1,(re&62914560)===0&&(re=4194304),e}function tt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function nt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function st(e,t,r,a,d,h){var v=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var M=e.entanglements,q=e.expirationTimes,ye=e.hiddenUpdates;for(r=v&~r;0<r;){var _e=31-pt(r),He=1<<_e;M[_e]=0,q[_e]=-1;var ve=ye[_e];if(ve!==null)for(ye[_e]=null,_e=0;_e<ve.length;_e++){var je=ve[_e];je!==null&&(je.lane&=-536870913)}r&=~He}a!==0&&wt(e,a,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(v&~t))}function wt(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-pt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|r&261930}function gt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-pt(r),d=1<<a;d&t|e[a]&t&&(e[a]|=t),r&=~d}}function St(e,t){var r=t&-t;return r=(r&42)!==0?1:yt(r),(r&(e.suspendedLanes|t))!==0?0:r}function yt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ft(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Et(){var e=le.p;return e!==0?e:(e=window.event,e===void 0?32:Xg(e.type))}function Ot(e,t){var r=le.p;try{return le.p=e,t()}finally{le.p=r}}var on=Math.random().toString(36).slice(2),Gt="__reactFiber$"+on,Bt="__reactProps$"+on,dn="__reactContainer$"+on,pn="__reactEvents$"+on,Wn="__reactListeners$"+on,Kn="__reactHandles$"+on,no="__reactResources$"+on,oo="__reactMarker$"+on;function P(e){delete e[Gt],delete e[Bt],delete e[pn],delete e[Wn],delete e[Kn]}function De(e){var t=e[Gt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[dn]||r[Gt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=_g(e);e!==null;){if(r=e[Gt])return r;e=_g(e)}return t}e=r,r=e.parentNode}return null}function oe(e){if(e=e[Gt]||e[dn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Je(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function Xe(e){var t=e[no];return t||(t=e[no]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Qe(e){e[oo]=!0}var We=new Set,ne={};function Fe(e,t){Ze(e,t),Ze(e+"Capture",t)}function Ze(e,t){for(ne[e]=t,e=0;e<t.length;e++)We.add(t[e])}var lt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),It={},Zt={};function On(e){return ke.call(Zt,e)?!0:ke.call(It,e)?!1:lt.test(e)?Zt[e]=!0:(It[e]=!0,!1)}function rn(e,t,r){if(On(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function Tn(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function xn(e,t,r,a){if(a===null)e.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+a)}}function vn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Oa(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hu(e,t,r){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,h=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(v){r=""+v,h.call(this,v)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cl(e){if(!e._valueTracker){var t=Oa(e)?"checked":"value";e._valueTracker=Hu(e,t,""+e[t])}}function Ta(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=Oa(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Po(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ea=/[\n"\\]/g;function Bn(e){return e.replace(Ea,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function dl(e,t,r,a,d,h,v,M){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+vn(t)):e.value!==""+vn(t)&&(e.value=""+vn(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?ys(e,v,vn(t)):r!=null?ys(e,v,vn(r)):a!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?e.name=""+vn(M):e.removeAttribute("name")}function Ia(e,t,r,a,d,h,v,M){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||r!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){cl(e);return}r=r!=null?""+vn(r):"",t=t!=null?""+vn(t):r,M||t===e.value||(e.value=t),e.defaultValue=t}a=a??d,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=M?e.checked:!!a,e.defaultChecked=!!a,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),cl(e)}function ys(e,t,r){t==="number"&&Po(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function ro(e,t,r,a){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&a&&(e[r].defaultSelected=!0)}else{for(r=""+vn(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,a&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function La(e,t,r){if(t!=null&&(t=""+vn(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+vn(r):""}function Aa(e,t,r,a){if(t==null){if(a!=null){if(r!=null)throw Error(l(92));if(Ie(a)){if(1<a.length)throw Error(l(93));a=a[0]}r=a}r==null&&(r=""),t=r}r=vn(t),e.defaultValue=r,a=e.textContent,a===r&&a!==""&&a!==null&&(e.value=a),cl(e)}function xr(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Vu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ce(e,t,r){var a=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,r):typeof r!="number"||r===0||Vu.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function ot(e,t,r){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,r!=null){for(var a in r)!r.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var d in t)a=t[d],t.hasOwnProperty(d)&&r[d]!==a&&Ce(e,d,a)}else for(var h in t)t.hasOwnProperty(h)&&Ce(e,h,t[h])}function dt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var an=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rt(e){return wn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function yo(){}var fl=null;function Pr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bs=null,xs=null;function jp(e){var t=oe(e);if(t&&(e=t.stateNode)){var r=e[Bt]||null;e:switch(e=t.stateNode,t.type){case"input":if(dl(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Bn(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var d=a[Bt]||null;if(!d)throw Error(l(90));dl(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<r.length;t++)a=r[t],a.form===e.form&&Ta(a)}break e;case"textarea":La(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&ro(e,!!r.multiple,t,!1)}}}var Ku=!1;function Mp(e,t,r){if(Ku)return e(t,r);Ku=!0;try{var a=e(t);return a}finally{if(Ku=!1,(bs!==null||xs!==null)&&(vi(),bs&&(t=bs,e=xs,xs=bs=null,jp(t),e)))for(t=0;t<e.length;t++)jp(e[t])}}function pl(e,t){var r=e.stateNode;if(r===null)return null;var a=r[Bt]||null;if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(l(231,t,typeof r));return r}var Yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uu=!1;if(Yo)try{var hl={};Object.defineProperty(hl,"passive",{get:function(){Uu=!0}}),window.addEventListener("test",hl,hl),window.removeEventListener("test",hl,hl)}catch{Uu=!1}var vr=null,$u=null,Ra=null;function Op(){if(Ra)return Ra;var e,t=$u,r=t.length,a,d="value"in vr?vr.value:vr.textContent,h=d.length;for(e=0;e<r&&t[e]===d[e];e++);var v=r-e;for(a=1;a<=v&&t[r-a]===d[h-a];a++);return Ra=d.slice(e,1<a?1-a:void 0)}function _a(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Da(){return!0}function Tp(){return!1}function Gn(e){function t(r,a,d,h,v){this._reactName=r,this._targetInst=d,this.type=a,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var M in e)e.hasOwnProperty(M)&&(r=e[M],this[M]=r?r(h):h[M]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Da:Tp,this.isPropagationStopped=Tp,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Da)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Da)},persist:function(){},isPersistent:Da}),t}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ba=Gn(Yr),ml=x({},Yr,{view:0,detail:0}),yx=Gn(ml),Fu,qu,gl,za=x({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gl&&(gl&&e.type==="mousemove"?(Fu=e.screenX-gl.screenX,qu=e.screenY-gl.screenY):qu=Fu=0,gl=e),Fu)},movementY:function(e){return"movementY"in e?e.movementY:qu}}),Ep=Gn(za),bx=x({},za,{dataTransfer:0}),xx=Gn(bx),vx=x({},ml,{relatedTarget:0}),Wu=Gn(vx),wx=x({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),Sx=Gn(wx),Nx=x({},Yr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cx=Gn(Nx),kx=x({},Yr,{data:0}),Ip=Gn(kx),jx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ox={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ox[e])?!!t[e]:!1}function Gu(){return Tx}var Ex=x({},ml,{key:function(e){if(e.key){var t=jx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_a(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gu,charCode:function(e){return e.type==="keypress"?_a(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_a(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ix=Gn(Ex),Lx=x({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lp=Gn(Lx),Ax=x({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gu}),Rx=Gn(Ax),_x=x({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dx=Gn(_x),Bx=x({},za,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zx=Gn(Bx),Hx=x({},Yr,{newState:0,oldState:0}),Vx=Gn(Hx),Kx=[9,13,27,32],Pu=Yo&&"CompositionEvent"in window,yl=null;Yo&&"documentMode"in document&&(yl=document.documentMode);var Ux=Yo&&"TextEvent"in window&&!yl,Ap=Yo&&(!Pu||yl&&8<yl&&11>=yl),Rp=" ",_p=!1;function Dp(e,t){switch(e){case"keyup":return Kx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vs=!1;function $x(e,t){switch(e){case"compositionend":return Bp(t);case"keypress":return t.which!==32?null:(_p=!0,Rp);case"textInput":return e=t.data,e===Rp&&_p?null:e;default:return null}}function Fx(e,t){if(vs)return e==="compositionend"||!Pu&&Dp(e,t)?(e=Op(),Ra=$u=vr=null,vs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ap&&t.locale!=="ko"?null:t.data;default:return null}}var qx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qx[e.type]:t==="textarea"}function Hp(e,t,r,a){bs?xs?xs.push(a):xs=[a]:bs=a,t=Mi(t,"onChange"),0<t.length&&(r=new Ba("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var bl=null,xl=null;function Wx(e){wg(e,0)}function Ha(e){var t=Je(e);if(Ta(t))return e}function Vp(e,t){if(e==="change")return t}var Kp=!1;if(Yo){var Yu;if(Yo){var Qu="oninput"in document;if(!Qu){var Up=document.createElement("div");Up.setAttribute("oninput","return;"),Qu=typeof Up.oninput=="function"}Yu=Qu}else Yu=!1;Kp=Yu&&(!document.documentMode||9<document.documentMode)}function $p(){bl&&(bl.detachEvent("onpropertychange",Fp),xl=bl=null)}function Fp(e){if(e.propertyName==="value"&&Ha(xl)){var t=[];Hp(t,xl,e,Pr(e)),Mp(Wx,t)}}function Gx(e,t,r){e==="focusin"?($p(),bl=t,xl=r,bl.attachEvent("onpropertychange",Fp)):e==="focusout"&&$p()}function Px(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ha(xl)}function Yx(e,t){if(e==="click")return Ha(t)}function Qx(e,t){if(e==="input"||e==="change")return Ha(t)}function Xx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var so=typeof Object.is=="function"?Object.is:Xx;function vl(e,t){if(so(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var d=r[a];if(!ke.call(t,d)||!so(e[d],t[d]))return!1}return!0}function qp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wp(e,t){var r=qp(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qp(r)}}function Gp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Po(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Po(e.document)}return t}function Xu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Zx=Yo&&"documentMode"in document&&11>=document.documentMode,ws=null,Zu=null,wl=null,Ju=!1;function Yp(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ju||ws==null||ws!==Po(a)||(a=ws,"selectionStart"in a&&Xu(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),wl&&vl(wl,a)||(wl=a,a=Mi(Zu,"onSelect"),0<a.length&&(t=new Ba("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=ws)))}function Qr(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ss={animationend:Qr("Animation","AnimationEnd"),animationiteration:Qr("Animation","AnimationIteration"),animationstart:Qr("Animation","AnimationStart"),transitionrun:Qr("Transition","TransitionRun"),transitionstart:Qr("Transition","TransitionStart"),transitioncancel:Qr("Transition","TransitionCancel"),transitionend:Qr("Transition","TransitionEnd")},ec={},Qp={};Yo&&(Qp=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function Xr(e){if(ec[e])return ec[e];if(!Ss[e])return e;var t=Ss[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Qp)return ec[e]=t[r];return e}var Xp=Xr("animationend"),Zp=Xr("animationiteration"),Jp=Xr("animationstart"),Jx=Xr("transitionrun"),ev=Xr("transitionstart"),tv=Xr("transitioncancel"),eh=Xr("transitionend"),th=new Map,tc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tc.push("scrollEnd");function To(e,t){th.set(e,t),Fe(t,[e])}var Va=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},bo=[],Ns=0,nc=0;function Ka(){for(var e=Ns,t=nc=Ns=0;t<e;){var r=bo[t];bo[t++]=null;var a=bo[t];bo[t++]=null;var d=bo[t];bo[t++]=null;var h=bo[t];if(bo[t++]=null,a!==null&&d!==null){var v=a.pending;v===null?d.next=d:(d.next=v.next,v.next=d),a.pending=d}h!==0&&nh(r,d,h)}}function Ua(e,t,r,a){bo[Ns++]=e,bo[Ns++]=t,bo[Ns++]=r,bo[Ns++]=a,nc|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function oc(e,t,r,a){return Ua(e,t,r,a),$a(e)}function Zr(e,t){return Ua(e,null,null,t),$a(e)}function nh(e,t,r){e.lanes|=r;var a=e.alternate;a!==null&&(a.lanes|=r);for(var d=!1,h=e.return;h!==null;)h.childLanes|=r,a=h.alternate,a!==null&&(a.childLanes|=r),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&t!==null&&(d=31-pt(r),e=h.hiddenUpdates,a=e[d],a===null?e[d]=[t]:a.push(t),t.lane=r|536870912),h):null}function $a(e){if(50<$l)throw $l=0,fd=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Cs={};function nv(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lo(e,t,r,a){return new nv(e,t,r,a)}function rc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qo(e,t){var r=e.alternate;return r===null?(r=lo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function oh(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Fa(e,t,r,a,d,h){var v=0;if(a=e,typeof e=="function")rc(e)&&(v=1);else if(typeof e=="string")v=a1(e,r,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case W:return e=lo(31,r,t,d),e.elementType=W,e.lanes=h,e;case S:return Jr(r.children,d,h,t);case j:v=8,d|=24;break;case N:return e=lo(12,r,t,d|2),e.elementType=N,e.lanes=h,e;case L:return e=lo(13,r,t,d),e.elementType=L,e.lanes=h,e;case z:return e=lo(19,r,t,d),e.elementType=z,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:v=10;break e;case E:v=9;break e;case V:v=11;break e;case I:v=14;break e;case $:v=16,a=null;break e}v=29,r=Error(l(130,e===null?"null":typeof e,"")),a=null}return t=lo(v,r,t,d),t.elementType=e,t.type=a,t.lanes=h,t}function Jr(e,t,r,a){return e=lo(7,e,a,t),e.lanes=r,e}function sc(e,t,r){return e=lo(6,e,null,t),e.lanes=r,e}function rh(e){var t=lo(18,null,null,0);return t.stateNode=e,t}function lc(e,t,r){return t=lo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var sh=new WeakMap;function xo(e,t){if(typeof e=="object"&&e!==null){var r=sh.get(e);return r!==void 0?r:(t={value:e,source:t,stack:J(t)},sh.set(e,t),t)}return{value:e,source:t,stack:J(t)}}var ks=[],js=0,qa=null,Sl=0,vo=[],wo=0,wr=null,Bo=1,zo="";function Xo(e,t){ks[js++]=Sl,ks[js++]=qa,qa=e,Sl=t}function lh(e,t,r){vo[wo++]=Bo,vo[wo++]=zo,vo[wo++]=wr,wr=e;var a=Bo;e=zo;var d=32-pt(a)-1;a&=~(1<<d),r+=1;var h=32-pt(t)+d;if(30<h){var v=d-d%5;h=(a&(1<<v)-1).toString(32),a>>=v,d-=v,Bo=1<<32-pt(t)+d|r<<d|a,zo=h+e}else Bo=1<<h|r<<d|a,zo=e}function ac(e){e.return!==null&&(Xo(e,1),lh(e,1,0))}function ic(e){for(;e===qa;)qa=ks[--js],ks[js]=null,Sl=ks[--js],ks[js]=null;for(;e===wr;)wr=vo[--wo],vo[wo]=null,zo=vo[--wo],vo[wo]=null,Bo=vo[--wo],vo[wo]=null}function ah(e,t){vo[wo++]=Bo,vo[wo++]=zo,vo[wo++]=wr,Bo=t.id,zo=t.overflow,wr=e}var Ln=null,un=null,zt=!1,Sr=null,So=!1,uc=Error(l(519));function Nr(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(xo(t,e)),uc}function ih(e){var t=e.stateNode,r=e.type,a=e.memoizedProps;switch(t[Gt]=e,t[Bt]=a,r){case"dialog":At("cancel",t),At("close",t);break;case"iframe":case"object":case"embed":At("load",t);break;case"video":case"audio":for(r=0;r<ql.length;r++)At(ql[r],t);break;case"source":At("error",t);break;case"img":case"image":case"link":At("error",t),At("load",t);break;case"details":At("toggle",t);break;case"input":At("invalid",t),Ia(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":At("invalid",t);break;case"textarea":At("invalid",t),Aa(t,a.value,a.defaultValue,a.children)}r=a.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||a.suppressHydrationWarning===!0||kg(t.textContent,r)?(a.popover!=null&&(At("beforetoggle",t),At("toggle",t)),a.onScroll!=null&&At("scroll",t),a.onScrollEnd!=null&&At("scrollend",t),a.onClick!=null&&(t.onclick=yo),t=!0):t=!1,t||Nr(e,!0)}function uh(e){for(Ln=e.return;Ln;)switch(Ln.tag){case 5:case 31:case 13:So=!1;return;case 27:case 3:So=!0;return;default:Ln=Ln.return}}function Ms(e){if(e!==Ln)return!1;if(!zt)return uh(e),zt=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Md(e.type,e.memoizedProps)),r=!r),r&&un&&Nr(e),uh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));un=Rg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));un=Rg(e)}else t===27?(t=un,Br(e.type)?(e=Ld,Ld=null,un=e):un=t):un=Ln?Co(e.stateNode.nextSibling):null;return!0}function es(){un=Ln=null,zt=!1}function cc(){var e=Sr;return e!==null&&(Xn===null?Xn=e:Xn.push.apply(Xn,e),Sr=null),e}function Nl(e){Sr===null?Sr=[e]:Sr.push(e)}var dc=T(null),ts=null,Zo=null;function Cr(e,t,r){O(dc,t._currentValue),t._currentValue=r}function Jo(e){e._currentValue=dc.current,A(dc)}function fc(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function pc(e,t,r,a){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var v=d.child;h=h.firstContext;e:for(;h!==null;){var M=h;h=d;for(var q=0;q<t.length;q++)if(M.context===t[q]){h.lanes|=r,M=h.alternate,M!==null&&(M.lanes|=r),fc(h.return,r,e),a||(v=null);break e}h=M.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(l(341));v.lanes|=r,h=v.alternate,h!==null&&(h.lanes|=r),fc(v,r,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Os(e,t,r,a){e=null;for(var d=t,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(l(387));if(v=v.memoizedProps,v!==null){var M=d.type;so(d.pendingProps.value,v.value)||(e!==null?e.push(M):e=[M])}}else if(d===Y.current){if(v=d.alternate,v===null)throw Error(l(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Ql):e=[Ql])}d=d.return}e!==null&&pc(t,e,r,a),t.flags|=262144}function Wa(e){for(e=e.firstContext;e!==null;){if(!so(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ns(e){ts=e,Zo=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function An(e){return ch(ts,e)}function Ga(e,t){return ts===null&&ns(e),ch(e,t)}function ch(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},Zo===null){if(e===null)throw Error(l(308));Zo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Zo=Zo.next=t;return r}var ov=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},rv=n.unstable_scheduleCallback,sv=n.unstable_NormalPriority,Sn={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hc(){return{controller:new ov,data:new Map,refCount:0}}function Cl(e){e.refCount--,e.refCount===0&&rv(sv,function(){e.controller.abort()})}var kl=null,mc=0,Ts=0,Es=null;function lv(e,t){if(kl===null){var r=kl=[];mc=0,Ts=bd(),Es={status:"pending",value:void 0,then:function(a){r.push(a)}}}return mc++,t.then(dh,dh),t}function dh(){if(--mc===0&&kl!==null){Es!==null&&(Es.status="fulfilled");var e=kl;kl=null,Ts=0,Es=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function av(e,t){var r=[],a={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var d=0;d<r.length;d++)(0,r[d])(t)},function(d){for(a.status="rejected",a.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),a}var fh=B.S;B.S=function(e,t){Ym=Le(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&lv(e,t),fh!==null&&fh(e,t)};var os=T(null);function gc(){var e=os.current;return e!==null?e:sn.pooledCache}function Pa(e,t){t===null?O(os,os.current):O(os,t.pool)}function ph(){var e=gc();return e===null?null:{parent:Sn._currentValue,pool:e}}var Is=Error(l(460)),yc=Error(l(474)),Ya=Error(l(542)),Qa={then:function(){}};function hh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function mh(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(yo,yo),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,yh(e),e;default:if(typeof t.status=="string")t.then(yo,yo);else{if(e=sn,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=a}},function(a){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,yh(e),e}throw ss=t,Is}}function rs(e){try{var t=e._init;return t(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(ss=r,Is):r}}var ss=null;function gh(){if(ss===null)throw Error(l(459));var e=ss;return ss=null,e}function yh(e){if(e===Is||e===Ya)throw Error(l(483))}var Ls=null,jl=0;function Xa(e){var t=jl;return jl+=1,Ls===null&&(Ls=[]),mh(Ls,e,t)}function Ml(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Za(e,t){throw t.$$typeof===w?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function bh(e){function t(ae,Z){if(e){var he=ae.deletions;he===null?(ae.deletions=[Z],ae.flags|=16):he.push(Z)}}function r(ae,Z){if(!e)return null;for(;Z!==null;)t(ae,Z),Z=Z.sibling;return null}function a(ae){for(var Z=new Map;ae!==null;)ae.key!==null?Z.set(ae.key,ae):Z.set(ae.index,ae),ae=ae.sibling;return Z}function d(ae,Z){return ae=Qo(ae,Z),ae.index=0,ae.sibling=null,ae}function h(ae,Z,he){return ae.index=he,e?(he=ae.alternate,he!==null?(he=he.index,he<Z?(ae.flags|=67108866,Z):he):(ae.flags|=67108866,Z)):(ae.flags|=1048576,Z)}function v(ae){return e&&ae.alternate===null&&(ae.flags|=67108866),ae}function M(ae,Z,he,ze){return Z===null||Z.tag!==6?(Z=sc(he,ae.mode,ze),Z.return=ae,Z):(Z=d(Z,he),Z.return=ae,Z)}function q(ae,Z,he,ze){var ht=he.type;return ht===S?_e(ae,Z,he.props.children,ze,he.key):Z!==null&&(Z.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===$&&rs(ht)===Z.type)?(Z=d(Z,he.props),Ml(Z,he),Z.return=ae,Z):(Z=Fa(he.type,he.key,he.props,null,ae.mode,ze),Ml(Z,he),Z.return=ae,Z)}function ye(ae,Z,he,ze){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==he.containerInfo||Z.stateNode.implementation!==he.implementation?(Z=lc(he,ae.mode,ze),Z.return=ae,Z):(Z=d(Z,he.children||[]),Z.return=ae,Z)}function _e(ae,Z,he,ze,ht){return Z===null||Z.tag!==7?(Z=Jr(he,ae.mode,ze,ht),Z.return=ae,Z):(Z=d(Z,he),Z.return=ae,Z)}function He(ae,Z,he){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=sc(""+Z,ae.mode,he),Z.return=ae,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case k:return he=Fa(Z.type,Z.key,Z.props,null,ae.mode,he),Ml(he,Z),he.return=ae,he;case C:return Z=lc(Z,ae.mode,he),Z.return=ae,Z;case $:return Z=rs(Z),He(ae,Z,he)}if(Ie(Z)||me(Z))return Z=Jr(Z,ae.mode,he,null),Z.return=ae,Z;if(typeof Z.then=="function")return He(ae,Xa(Z),he);if(Z.$$typeof===H)return He(ae,Ga(ae,Z),he);Za(ae,Z)}return null}function ve(ae,Z,he,ze){var ht=Z!==null?Z.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return ht!==null?null:M(ae,Z,""+he,ze);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case k:return he.key===ht?q(ae,Z,he,ze):null;case C:return he.key===ht?ye(ae,Z,he,ze):null;case $:return he=rs(he),ve(ae,Z,he,ze)}if(Ie(he)||me(he))return ht!==null?null:_e(ae,Z,he,ze,null);if(typeof he.then=="function")return ve(ae,Z,Xa(he),ze);if(he.$$typeof===H)return ve(ae,Z,Ga(ae,he),ze);Za(ae,he)}return null}function je(ae,Z,he,ze,ht){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return ae=ae.get(he)||null,M(Z,ae,""+ze,ht);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case k:return ae=ae.get(ze.key===null?he:ze.key)||null,q(Z,ae,ze,ht);case C:return ae=ae.get(ze.key===null?he:ze.key)||null,ye(Z,ae,ze,ht);case $:return ze=rs(ze),je(ae,Z,he,ze,ht)}if(Ie(ze)||me(ze))return ae=ae.get(he)||null,_e(Z,ae,ze,ht,null);if(typeof ze.then=="function")return je(ae,Z,he,Xa(ze),ht);if(ze.$$typeof===H)return je(ae,Z,he,Ga(Z,ze),ht);Za(Z,ze)}return null}function ut(ae,Z,he,ze){for(var ht=null,Vt=null,ct=Z,Tt=Z=0,Dt=null;ct!==null&&Tt<he.length;Tt++){ct.index>Tt?(Dt=ct,ct=null):Dt=ct.sibling;var Kt=ve(ae,ct,he[Tt],ze);if(Kt===null){ct===null&&(ct=Dt);break}e&&ct&&Kt.alternate===null&&t(ae,ct),Z=h(Kt,Z,Tt),Vt===null?ht=Kt:Vt.sibling=Kt,Vt=Kt,ct=Dt}if(Tt===he.length)return r(ae,ct),zt&&Xo(ae,Tt),ht;if(ct===null){for(;Tt<he.length;Tt++)ct=He(ae,he[Tt],ze),ct!==null&&(Z=h(ct,Z,Tt),Vt===null?ht=ct:Vt.sibling=ct,Vt=ct);return zt&&Xo(ae,Tt),ht}for(ct=a(ct);Tt<he.length;Tt++)Dt=je(ct,ae,Tt,he[Tt],ze),Dt!==null&&(e&&Dt.alternate!==null&&ct.delete(Dt.key===null?Tt:Dt.key),Z=h(Dt,Z,Tt),Vt===null?ht=Dt:Vt.sibling=Dt,Vt=Dt);return e&&ct.forEach(function(Ur){return t(ae,Ur)}),zt&&Xo(ae,Tt),ht}function xt(ae,Z,he,ze){if(he==null)throw Error(l(151));for(var ht=null,Vt=null,ct=Z,Tt=Z=0,Dt=null,Kt=he.next();ct!==null&&!Kt.done;Tt++,Kt=he.next()){ct.index>Tt?(Dt=ct,ct=null):Dt=ct.sibling;var Ur=ve(ae,ct,Kt.value,ze);if(Ur===null){ct===null&&(ct=Dt);break}e&&ct&&Ur.alternate===null&&t(ae,ct),Z=h(Ur,Z,Tt),Vt===null?ht=Ur:Vt.sibling=Ur,Vt=Ur,ct=Dt}if(Kt.done)return r(ae,ct),zt&&Xo(ae,Tt),ht;if(ct===null){for(;!Kt.done;Tt++,Kt=he.next())Kt=He(ae,Kt.value,ze),Kt!==null&&(Z=h(Kt,Z,Tt),Vt===null?ht=Kt:Vt.sibling=Kt,Vt=Kt);return zt&&Xo(ae,Tt),ht}for(ct=a(ct);!Kt.done;Tt++,Kt=he.next())Kt=je(ct,ae,Tt,Kt.value,ze),Kt!==null&&(e&&Kt.alternate!==null&&ct.delete(Kt.key===null?Tt:Kt.key),Z=h(Kt,Z,Tt),Vt===null?ht=Kt:Vt.sibling=Kt,Vt=Kt);return e&&ct.forEach(function(b1){return t(ae,b1)}),zt&&Xo(ae,Tt),ht}function tn(ae,Z,he,ze){if(typeof he=="object"&&he!==null&&he.type===S&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case k:e:{for(var ht=he.key;Z!==null;){if(Z.key===ht){if(ht=he.type,ht===S){if(Z.tag===7){r(ae,Z.sibling),ze=d(Z,he.props.children),ze.return=ae,ae=ze;break e}}else if(Z.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===$&&rs(ht)===Z.type){r(ae,Z.sibling),ze=d(Z,he.props),Ml(ze,he),ze.return=ae,ae=ze;break e}r(ae,Z);break}else t(ae,Z);Z=Z.sibling}he.type===S?(ze=Jr(he.props.children,ae.mode,ze,he.key),ze.return=ae,ae=ze):(ze=Fa(he.type,he.key,he.props,null,ae.mode,ze),Ml(ze,he),ze.return=ae,ae=ze)}return v(ae);case C:e:{for(ht=he.key;Z!==null;){if(Z.key===ht)if(Z.tag===4&&Z.stateNode.containerInfo===he.containerInfo&&Z.stateNode.implementation===he.implementation){r(ae,Z.sibling),ze=d(Z,he.children||[]),ze.return=ae,ae=ze;break e}else{r(ae,Z);break}else t(ae,Z);Z=Z.sibling}ze=lc(he,ae.mode,ze),ze.return=ae,ae=ze}return v(ae);case $:return he=rs(he),tn(ae,Z,he,ze)}if(Ie(he))return ut(ae,Z,he,ze);if(me(he)){if(ht=me(he),typeof ht!="function")throw Error(l(150));return he=ht.call(he),xt(ae,Z,he,ze)}if(typeof he.then=="function")return tn(ae,Z,Xa(he),ze);if(he.$$typeof===H)return tn(ae,Z,Ga(ae,he),ze);Za(ae,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,Z!==null&&Z.tag===6?(r(ae,Z.sibling),ze=d(Z,he),ze.return=ae,ae=ze):(r(ae,Z),ze=sc(he,ae.mode,ze),ze.return=ae,ae=ze),v(ae)):r(ae,Z)}return function(ae,Z,he,ze){try{jl=0;var ht=tn(ae,Z,he,ze);return Ls=null,ht}catch(ct){if(ct===Is||ct===Ya)throw ct;var Vt=lo(29,ct,null,ae.mode);return Vt.lanes=ze,Vt.return=ae,Vt}}}var ls=bh(!0),xh=bh(!1),kr=!1;function bc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function jr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Mr(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,($t&2)!==0){var d=a.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),a.pending=t,t=$a(e),nh(e,null,r),t}return Ua(e,a,t,r),$a(e)}function Ol(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,gt(e,r)}}function vc(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var d=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};h===null?d=h=v:h=h.next=v,r=r.next}while(r!==null);h===null?d=h=t:h=h.next=t}else d=h=t;r={baseState:a.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:a.shared,callbacks:a.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var wc=!1;function Tl(){if(wc){var e=Es;if(e!==null)throw e}}function El(e,t,r,a){wc=!1;var d=e.updateQueue;kr=!1;var h=d.firstBaseUpdate,v=d.lastBaseUpdate,M=d.shared.pending;if(M!==null){d.shared.pending=null;var q=M,ye=q.next;q.next=null,v===null?h=ye:v.next=ye,v=q;var _e=e.alternate;_e!==null&&(_e=_e.updateQueue,M=_e.lastBaseUpdate,M!==v&&(M===null?_e.firstBaseUpdate=ye:M.next=ye,_e.lastBaseUpdate=q))}if(h!==null){var He=d.baseState;v=0,_e=ye=q=null,M=h;do{var ve=M.lane&-536870913,je=ve!==M.lane;if(je?(_t&ve)===ve:(a&ve)===ve){ve!==0&&ve===Ts&&(wc=!0),_e!==null&&(_e=_e.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var ut=e,xt=M;ve=t;var tn=r;switch(xt.tag){case 1:if(ut=xt.payload,typeof ut=="function"){He=ut.call(tn,He,ve);break e}He=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=xt.payload,ve=typeof ut=="function"?ut.call(tn,He,ve):ut,ve==null)break e;He=x({},He,ve);break e;case 2:kr=!0}}ve=M.callback,ve!==null&&(e.flags|=64,je&&(e.flags|=8192),je=d.callbacks,je===null?d.callbacks=[ve]:je.push(ve))}else je={lane:ve,tag:M.tag,payload:M.payload,callback:M.callback,next:null},_e===null?(ye=_e=je,q=He):_e=_e.next=je,v|=ve;if(M=M.next,M===null){if(M=d.shared.pending,M===null)break;je=M,M=je.next,je.next=null,d.lastBaseUpdate=je,d.shared.pending=null}}while(!0);_e===null&&(q=He),d.baseState=q,d.firstBaseUpdate=ye,d.lastBaseUpdate=_e,h===null&&(d.shared.lanes=0),Lr|=v,e.lanes=v,e.memoizedState=He}}function vh(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function wh(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)vh(r[e],t)}var As=T(null),Ja=T(0);function Sh(e,t){e=ir,O(Ja,e),O(As,t),ir=e|t.baseLanes}function Sc(){O(Ja,ir),O(As,As.current)}function Nc(){ir=Ja.current,A(As),A(Ja)}var ao=T(null),No=null;function Or(e){var t=e.alternate;O(yn,yn.current&1),O(ao,e),No===null&&(t===null||As.current!==null||t.memoizedState!==null)&&(No=e)}function Cc(e){O(yn,yn.current),O(ao,e),No===null&&(No=e)}function Nh(e){e.tag===22?(O(yn,yn.current),O(ao,e),No===null&&(No=e)):Tr()}function Tr(){O(yn,yn.current),O(ao,ao.current)}function io(e){A(ao),No===e&&(No=null),A(yn)}var yn=T(0);function ei(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Ed(r)||Id(r)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var er=0,kt=null,Jt=null,Nn=null,ti=!1,Rs=!1,as=!1,ni=0,Il=0,_s=null,iv=0;function hn(){throw Error(l(321))}function kc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!so(e[r],t[r]))return!1;return!0}function jc(e,t,r,a,d,h){return er=h,kt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,B.H=e===null||e.memoizedState===null?lm:Kc,as=!1,h=r(a,d),as=!1,Rs&&(h=kh(t,r,a,d)),Ch(e),h}function Ch(e){B.H=Rl;var t=Jt!==null&&Jt.next!==null;if(er=0,Nn=Jt=kt=null,ti=!1,Il=0,_s=null,t)throw Error(l(300));e===null||Cn||(e=e.dependencies,e!==null&&Wa(e)&&(Cn=!0))}function kh(e,t,r,a){kt=e;var d=0;do{if(Rs&&(_s=null),Il=0,Rs=!1,25<=d)throw Error(l(301));if(d+=1,Nn=Jt=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}B.H=am,h=t(r,a)}while(Rs);return h}function uv(){var e=B.H,t=e.useState()[0];return t=typeof t.then=="function"?Ll(t):t,e=e.useState()[0],(Jt!==null?Jt.memoizedState:null)!==e&&(kt.flags|=1024),t}function Mc(){var e=ni!==0;return ni=0,e}function Oc(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function Tc(e){if(ti){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ti=!1}er=0,Nn=Jt=kt=null,Rs=!1,Il=ni=0,_s=null}function Un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?kt.memoizedState=Nn=e:Nn=Nn.next=e,Nn}function bn(){if(Jt===null){var e=kt.alternate;e=e!==null?e.memoizedState:null}else e=Jt.next;var t=Nn===null?kt.memoizedState:Nn.next;if(t!==null)Nn=t,Jt=e;else{if(e===null)throw kt.alternate===null?Error(l(467)):Error(l(310));Jt=e,e={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Nn===null?kt.memoizedState=Nn=e:Nn=Nn.next=e}return Nn}function oi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ll(e){var t=Il;return Il+=1,_s===null&&(_s=[]),e=mh(_s,e,t),t=kt,(Nn===null?t.memoizedState:Nn.next)===null&&(t=t.alternate,B.H=t===null||t.memoizedState===null?lm:Kc),e}function ri(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ll(e);if(e.$$typeof===H)return An(e)}throw Error(l(438,String(e)))}function Ec(e){var t=null,r=kt.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var a=kt.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=oi(),kt.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),a=0;a<e;a++)r[a]=ie;return t.index++,r}function tr(e,t){return typeof t=="function"?t(e):t}function si(e){var t=bn();return Ic(t,Jt,e)}function Ic(e,t,r){var a=e.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=r;var d=e.baseQueue,h=a.pending;if(h!==null){if(d!==null){var v=d.next;d.next=h.next,h.next=v}t.baseQueue=d=h,a.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{t=d.next;var M=v=null,q=null,ye=t,_e=!1;do{var He=ye.lane&-536870913;if(He!==ye.lane?(_t&He)===He:(er&He)===He){var ve=ye.revertLane;if(ve===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),He===Ts&&(_e=!0);else if((er&ve)===ve){ye=ye.next,ve===Ts&&(_e=!0);continue}else He={lane:0,revertLane:ye.revertLane,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},q===null?(M=q=He,v=h):q=q.next=He,kt.lanes|=ve,Lr|=ve;He=ye.action,as&&r(h,He),h=ye.hasEagerState?ye.eagerState:r(h,He)}else ve={lane:He,revertLane:ye.revertLane,gesture:ye.gesture,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},q===null?(M=q=ve,v=h):q=q.next=ve,kt.lanes|=He,Lr|=He;ye=ye.next}while(ye!==null&&ye!==t);if(q===null?v=h:q.next=M,!so(h,e.memoizedState)&&(Cn=!0,_e&&(r=Es,r!==null)))throw r;e.memoizedState=h,e.baseState=v,e.baseQueue=q,a.lastRenderedState=h}return d===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Lc(e){var t=bn(),r=t.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=e;var a=r.dispatch,d=r.pending,h=t.memoizedState;if(d!==null){r.pending=null;var v=d=d.next;do h=e(h,v.action),v=v.next;while(v!==d);so(h,t.memoizedState)||(Cn=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,a]}function jh(e,t,r){var a=kt,d=bn(),h=zt;if(h){if(r===void 0)throw Error(l(407));r=r()}else r=t();var v=!so((Jt||d).memoizedState,r);if(v&&(d.memoizedState=r,Cn=!0),d=d.queue,_c(Th.bind(null,a,d,e),[e]),d.getSnapshot!==t||v||Nn!==null&&Nn.memoizedState.tag&1){if(a.flags|=2048,Ds(9,{destroy:void 0},Oh.bind(null,a,d,r,t),null),sn===null)throw Error(l(349));h||(er&127)!==0||Mh(a,t,r)}return r}function Mh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=kt.updateQueue,t===null?(t=oi(),kt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Oh(e,t,r,a){t.value=r,t.getSnapshot=a,Eh(t)&&Ih(e)}function Th(e,t,r){return r(function(){Eh(t)&&Ih(e)})}function Eh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!so(e,r)}catch{return!0}}function Ih(e){var t=Zr(e,2);t!==null&&Zn(t,e,2)}function Ac(e){var t=Un();if(typeof e=="function"){var r=e;if(e=r(),as){at(!0);try{r()}finally{at(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:e},t}function Lh(e,t,r,a){return e.baseState=r,Ic(e,Jt,typeof a=="function"?a:tr)}function cv(e,t,r,a,d){if(ii(e))throw Error(l(485));if(e=t.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){h.listeners.push(v)}};B.T!==null?r(!0):h.isTransition=!1,a(h),r=t.pending,r===null?(h.next=t.pending=h,Ah(t,h)):(h.next=r.next,t.pending=r.next=h)}}function Ah(e,t){var r=t.action,a=t.payload,d=e.state;if(t.isTransition){var h=B.T,v={};B.T=v;try{var M=r(d,a),q=B.S;q!==null&&q(v,M),Rh(e,t,M)}catch(ye){Rc(e,t,ye)}finally{h!==null&&v.types!==null&&(h.types=v.types),B.T=h}}else try{h=r(d,a),Rh(e,t,h)}catch(ye){Rc(e,t,ye)}}function Rh(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(a){_h(e,t,a)},function(a){return Rc(e,t,a)}):_h(e,t,r)}function _h(e,t,r){t.status="fulfilled",t.value=r,Dh(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,Ah(e,r)))}function Rc(e,t,r){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=r,Dh(t),t=t.next;while(t!==a)}e.action=null}function Dh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Bh(e,t){return t}function zh(e,t){if(zt){var r=sn.formState;if(r!==null){e:{var a=kt;if(zt){if(un){t:{for(var d=un,h=So;d.nodeType!==8;){if(!h){d=null;break t}if(d=Co(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){un=Co(d.nextSibling),a=d.data==="F!";break e}}Nr(a)}a=!1}a&&(t=r[0])}}return r=Un(),r.memoizedState=r.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bh,lastRenderedState:t},r.queue=a,r=om.bind(null,kt,a),a.dispatch=r,a=Ac(!1),h=Vc.bind(null,kt,!1,a.queue),a=Un(),d={state:t,dispatch:null,action:e,pending:null},a.queue=d,r=cv.bind(null,kt,d,h,r),d.dispatch=r,a.memoizedState=e,[t,r,!1]}function Hh(e){var t=bn();return Vh(t,Jt,e)}function Vh(e,t,r){if(t=Ic(e,t,Bh)[0],e=si(tr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Ll(t)}catch(v){throw v===Is?Ya:v}else a=t;t=bn();var d=t.queue,h=d.dispatch;return r!==t.memoizedState&&(kt.flags|=2048,Ds(9,{destroy:void 0},dv.bind(null,d,r),null)),[a,h,e]}function dv(e,t){e.action=t}function Kh(e){var t=bn(),r=Jt;if(r!==null)return Vh(t,r,e);bn(),t=t.memoizedState,r=bn();var a=r.queue.dispatch;return r.memoizedState=e,[t,a,!1]}function Ds(e,t,r,a){return e={tag:e,create:r,deps:a,inst:t,next:null},t=kt.updateQueue,t===null&&(t=oi(),kt.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e),e}function Uh(){return bn().memoizedState}function li(e,t,r,a){var d=Un();kt.flags|=e,d.memoizedState=Ds(1|t,{destroy:void 0},r,a===void 0?null:a)}function ai(e,t,r,a){var d=bn();a=a===void 0?null:a;var h=d.memoizedState.inst;Jt!==null&&a!==null&&kc(a,Jt.memoizedState.deps)?d.memoizedState=Ds(t,h,r,a):(kt.flags|=e,d.memoizedState=Ds(1|t,h,r,a))}function $h(e,t){li(8390656,8,e,t)}function _c(e,t){ai(2048,8,e,t)}function fv(e){kt.flags|=4;var t=kt.updateQueue;if(t===null)t=oi(),kt.updateQueue=t,t.events=[e];else{var r=t.events;r===null?t.events=[e]:r.push(e)}}function Fh(e){var t=bn().memoizedState;return fv({ref:t,nextImpl:e}),function(){if(($t&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function qh(e,t){return ai(4,2,e,t)}function Wh(e,t){return ai(4,4,e,t)}function Gh(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ph(e,t,r){r=r!=null?r.concat([e]):null,ai(4,4,Gh.bind(null,t,e),r)}function Dc(){}function Yh(e,t){var r=bn();t=t===void 0?null:t;var a=r.memoizedState;return t!==null&&kc(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function Qh(e,t){var r=bn();t=t===void 0?null:t;var a=r.memoizedState;if(t!==null&&kc(t,a[1]))return a[0];if(a=e(),as){at(!0);try{e()}finally{at(!1)}}return r.memoizedState=[a,t],a}function Bc(e,t,r){return r===void 0||(er&1073741824)!==0&&(_t&261930)===0?e.memoizedState=t:(e.memoizedState=r,e=Xm(),kt.lanes|=e,Lr|=e,r)}function Xh(e,t,r,a){return so(r,t)?r:As.current!==null?(e=Bc(e,r,a),so(e,t)||(Cn=!0),e):(er&42)===0||(er&1073741824)!==0&&(_t&261930)===0?(Cn=!0,e.memoizedState=r):(e=Xm(),kt.lanes|=e,Lr|=e,t)}function Zh(e,t,r,a,d){var h=le.p;le.p=h!==0&&8>h?h:8;var v=B.T,M={};B.T=M,Vc(e,!1,t,r);try{var q=d(),ye=B.S;if(ye!==null&&ye(M,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var _e=av(q,a);Al(e,t,_e,fo(e))}else Al(e,t,a,fo(e))}catch(He){Al(e,t,{then:function(){},status:"rejected",reason:He},fo())}finally{le.p=h,v!==null&&M.types!==null&&(v.types=M.types),B.T=v}}function pv(){}function zc(e,t,r,a){if(e.tag!==5)throw Error(l(476));var d=Jh(e).queue;Zh(e,d,t,fe,r===null?pv:function(){return em(e),r(a)})}function Jh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:fe},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function em(e){var t=Jh(e);t.next===null&&(t=e.alternate.memoizedState),Al(e,t.next.queue,{},fo())}function Hc(){return An(Ql)}function tm(){return bn().memoizedState}function nm(){return bn().memoizedState}function hv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=fo();e=jr(r);var a=Mr(t,e,r);a!==null&&(Zn(a,t,r),Ol(a,t,r)),t={cache:hc()},e.payload=t;return}t=t.return}}function mv(e,t,r){var a=fo();r={lane:a,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ii(e)?rm(t,r):(r=oc(e,t,r,a),r!==null&&(Zn(r,e,a),sm(r,t,a)))}function om(e,t,r){var a=fo();Al(e,t,r,a)}function Al(e,t,r,a){var d={lane:a,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ii(e))rm(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var v=t.lastRenderedState,M=h(v,r);if(d.hasEagerState=!0,d.eagerState=M,so(M,v))return Ua(e,t,d,0),sn===null&&Ka(),!1}catch{}if(r=oc(e,t,d,a),r!==null)return Zn(r,e,a),sm(r,t,a),!0}return!1}function Vc(e,t,r,a){if(a={lane:2,revertLane:bd(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ii(e)){if(t)throw Error(l(479))}else t=oc(e,r,a,2),t!==null&&Zn(t,e,2)}function ii(e){var t=e.alternate;return e===kt||t!==null&&t===kt}function rm(e,t){Rs=ti=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function sm(e,t,r){if((r&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,gt(e,r)}}var Rl={readContext:An,use:ri,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn};Rl.useEffectEvent=hn;var lm={readContext:An,use:ri,useCallback:function(e,t){return Un().memoizedState=[e,t===void 0?null:t],e},useContext:An,useEffect:$h,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,li(4194308,4,Gh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return li(4194308,4,e,t)},useInsertionEffect:function(e,t){li(4,2,e,t)},useMemo:function(e,t){var r=Un();t=t===void 0?null:t;var a=e();if(as){at(!0);try{e()}finally{at(!1)}}return r.memoizedState=[a,t],a},useReducer:function(e,t,r){var a=Un();if(r!==void 0){var d=r(t);if(as){at(!0);try{r(t)}finally{at(!1)}}}else d=t;return a.memoizedState=a.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},a.queue=e,e=e.dispatch=mv.bind(null,kt,e),[a.memoizedState,e]},useRef:function(e){var t=Un();return e={current:e},t.memoizedState=e},useState:function(e){e=Ac(e);var t=e.queue,r=om.bind(null,kt,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:Dc,useDeferredValue:function(e,t){var r=Un();return Bc(r,e,t)},useTransition:function(){var e=Ac(!1);return e=Zh.bind(null,kt,e.queue,!0,!1),Un().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var a=kt,d=Un();if(zt){if(r===void 0)throw Error(l(407));r=r()}else{if(r=t(),sn===null)throw Error(l(349));(_t&127)!==0||Mh(a,t,r)}d.memoizedState=r;var h={value:r,getSnapshot:t};return d.queue=h,$h(Th.bind(null,a,h,e),[e]),a.flags|=2048,Ds(9,{destroy:void 0},Oh.bind(null,a,h,r,t),null),r},useId:function(){var e=Un(),t=sn.identifierPrefix;if(zt){var r=zo,a=Bo;r=(a&~(1<<32-pt(a)-1)).toString(32)+r,t="_"+t+"R_"+r,r=ni++,0<r&&(t+="H"+r.toString(32)),t+="_"}else r=iv++,t="_"+t+"r_"+r.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Hc,useFormState:zh,useActionState:zh,useOptimistic:function(e){var t=Un();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=Vc.bind(null,kt,!0,r),r.dispatch=t,[e,t]},useMemoCache:Ec,useCacheRefresh:function(){return Un().memoizedState=hv.bind(null,kt)},useEffectEvent:function(e){var t=Un(),r={impl:e};return t.memoizedState=r,function(){if(($t&2)!==0)throw Error(l(440));return r.impl.apply(void 0,arguments)}}},Kc={readContext:An,use:ri,useCallback:Yh,useContext:An,useEffect:_c,useImperativeHandle:Ph,useInsertionEffect:qh,useLayoutEffect:Wh,useMemo:Qh,useReducer:si,useRef:Uh,useState:function(){return si(tr)},useDebugValue:Dc,useDeferredValue:function(e,t){var r=bn();return Xh(r,Jt.memoizedState,e,t)},useTransition:function(){var e=si(tr)[0],t=bn().memoizedState;return[typeof e=="boolean"?e:Ll(e),t]},useSyncExternalStore:jh,useId:tm,useHostTransitionStatus:Hc,useFormState:Hh,useActionState:Hh,useOptimistic:function(e,t){var r=bn();return Lh(r,Jt,e,t)},useMemoCache:Ec,useCacheRefresh:nm};Kc.useEffectEvent=Fh;var am={readContext:An,use:ri,useCallback:Yh,useContext:An,useEffect:_c,useImperativeHandle:Ph,useInsertionEffect:qh,useLayoutEffect:Wh,useMemo:Qh,useReducer:Lc,useRef:Uh,useState:function(){return Lc(tr)},useDebugValue:Dc,useDeferredValue:function(e,t){var r=bn();return Jt===null?Bc(r,e,t):Xh(r,Jt.memoizedState,e,t)},useTransition:function(){var e=Lc(tr)[0],t=bn().memoizedState;return[typeof e=="boolean"?e:Ll(e),t]},useSyncExternalStore:jh,useId:tm,useHostTransitionStatus:Hc,useFormState:Kh,useActionState:Kh,useOptimistic:function(e,t){var r=bn();return Jt!==null?Lh(r,Jt,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Ec,useCacheRefresh:nm};am.useEffectEvent=Fh;function Uc(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:x({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var $c={enqueueSetState:function(e,t,r){e=e._reactInternals;var a=fo(),d=jr(a);d.payload=t,r!=null&&(d.callback=r),t=Mr(e,d,a),t!==null&&(Zn(t,e,a),Ol(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=fo(),d=jr(a);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Mr(e,d,a),t!==null&&(Zn(t,e,a),Ol(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=fo(),a=jr(r);a.tag=2,t!=null&&(a.callback=t),t=Mr(e,a,r),t!==null&&(Zn(t,e,r),Ol(t,e,r))}};function im(e,t,r,a,d,h,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,h,v):t.prototype&&t.prototype.isPureReactComponent?!vl(r,a)||!vl(d,h):!0}function um(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&$c.enqueueReplaceState(t,t.state,null)}function is(e,t){var r=t;if("ref"in t){r={};for(var a in t)a!=="ref"&&(r[a]=t[a])}if(e=e.defaultProps){r===t&&(r=x({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}function cm(e){Va(e)}function dm(e){console.error(e)}function fm(e){Va(e)}function ui(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function pm(e,t,r){try{var a=e.onCaughtError;a(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Fc(e,t,r){return r=jr(r),r.tag=3,r.payload={element:null},r.callback=function(){ui(e,t)},r}function hm(e){return e=jr(e),e.tag=3,e}function mm(e,t,r,a){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var h=a.value;e.payload=function(){return d(h)},e.callback=function(){pm(t,r,a)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){pm(t,r,a),typeof d!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var M=a.stack;this.componentDidCatch(a.value,{componentStack:M!==null?M:""})})}function gv(e,t,r,a,d){if(r.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=r.alternate,t!==null&&Os(t,r,d,!0),r=ao.current,r!==null){switch(r.tag){case 31:case 13:return No===null?wi():r.alternate===null&&mn===0&&(mn=3),r.flags&=-257,r.flags|=65536,r.lanes=d,a===Qa?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([a]):t.add(a),md(e,a,d)),!1;case 22:return r.flags|=65536,a===Qa?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([a]):r.add(a)),md(e,a,d)),!1}throw Error(l(435,r.tag))}return md(e,a,d),wi(),!1}if(zt)return t=ao.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,a!==uc&&(e=Error(l(422),{cause:a}),Nl(xo(e,r)))):(a!==uc&&(t=Error(l(423),{cause:a}),Nl(xo(t,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,a=xo(a,r),d=Fc(e.stateNode,a,d),vc(e,d),mn!==4&&(mn=2)),!1;var h=Error(l(520),{cause:a});if(h=xo(h,r),Ul===null?Ul=[h]:Ul.push(h),mn!==4&&(mn=2),t===null)return!0;a=xo(a,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=Fc(r.stateNode,a,e),vc(r,e),!1;case 1:if(t=r.type,h=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Ar===null||!Ar.has(h))))return r.flags|=65536,d&=-d,r.lanes|=d,d=hm(d),mm(d,e,r,a),vc(r,d),!1}r=r.return}while(r!==null);return!1}var qc=Error(l(461)),Cn=!1;function Rn(e,t,r,a){t.child=e===null?xh(t,null,r,a):ls(t,e.child,r,a)}function gm(e,t,r,a,d){r=r.render;var h=t.ref;if("ref"in a){var v={};for(var M in a)M!=="ref"&&(v[M]=a[M])}else v=a;return ns(t),a=jc(e,t,r,v,h,d),M=Mc(),e!==null&&!Cn?(Oc(e,t,d),nr(e,t,d)):(zt&&M&&ac(t),t.flags|=1,Rn(e,t,a,d),t.child)}function ym(e,t,r,a,d){if(e===null){var h=r.type;return typeof h=="function"&&!rc(h)&&h.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=h,bm(e,t,h,a,d)):(e=Fa(r.type,null,a,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Jc(e,d)){var v=h.memoizedProps;if(r=r.compare,r=r!==null?r:vl,r(v,a)&&e.ref===t.ref)return nr(e,t,d)}return t.flags|=1,e=Qo(h,a),e.ref=t.ref,e.return=t,t.child=e}function bm(e,t,r,a,d){if(e!==null){var h=e.memoizedProps;if(vl(h,a)&&e.ref===t.ref)if(Cn=!1,t.pendingProps=a=h,Jc(e,d))(e.flags&131072)!==0&&(Cn=!0);else return t.lanes=e.lanes,nr(e,t,d)}return Wc(e,t,r,a,d)}function xm(e,t,r,a){var d=a.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|r:r,e!==null){for(a=t.child=e.child,d=0;a!==null;)d=d|a.lanes|a.childLanes,a=a.sibling;a=d&~h}else a=0,t.child=null;return vm(e,t,h,r,a)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Pa(t,h!==null?h.cachePool:null),h!==null?Sh(t,h):Sc(),Nh(t);else return a=t.lanes=536870912,vm(e,t,h!==null?h.baseLanes|r:r,r,a)}else h!==null?(Pa(t,h.cachePool),Sh(t,h),Tr(),t.memoizedState=null):(e!==null&&Pa(t,null),Sc(),Tr());return Rn(e,t,d,r),t.child}function _l(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function vm(e,t,r,a,d){var h=gc();return h=h===null?null:{parent:Sn._currentValue,pool:h},t.memoizedState={baseLanes:r,cachePool:h},e!==null&&Pa(t,null),Sc(),Nh(t),e!==null&&Os(e,t,a,!0),t.childLanes=d,null}function ci(e,t){return t=fi({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function wm(e,t,r){return ls(t,e.child,null,r),e=ci(t,t.pendingProps),e.flags|=2,io(t),t.memoizedState=null,e}function yv(e,t,r){var a=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(zt){if(a.mode==="hidden")return e=ci(t,a),t.lanes=536870912,_l(null,e);if(Cc(t),(e=un)?(e=Ag(e,So),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wr!==null?{id:Bo,overflow:zo}:null,retryLane:536870912,hydrationErrors:null},r=rh(e),r.return=t,t.child=r,Ln=t,un=null)):e=null,e===null)throw Nr(t);return t.lanes=536870912,null}return ci(t,a)}var h=e.memoizedState;if(h!==null){var v=h.dehydrated;if(Cc(t),d)if(t.flags&256)t.flags&=-257,t=wm(e,t,r);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(Cn||Os(e,t,r,!1),d=(r&e.childLanes)!==0,Cn||d){if(a=sn,a!==null&&(v=St(a,r),v!==0&&v!==h.retryLane))throw h.retryLane=v,Zr(e,v),Zn(a,e,v),qc;wi(),t=wm(e,t,r)}else e=h.treeContext,un=Co(v.nextSibling),Ln=t,zt=!0,Sr=null,So=!1,e!==null&&ah(t,e),t=ci(t,a),t.flags|=4096;return t}return e=Qo(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function di(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(l(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function Wc(e,t,r,a,d){return ns(t),r=jc(e,t,r,a,void 0,d),a=Mc(),e!==null&&!Cn?(Oc(e,t,d),nr(e,t,d)):(zt&&a&&ac(t),t.flags|=1,Rn(e,t,r,d),t.child)}function Sm(e,t,r,a,d,h){return ns(t),t.updateQueue=null,r=kh(t,a,r,d),Ch(e),a=Mc(),e!==null&&!Cn?(Oc(e,t,h),nr(e,t,h)):(zt&&a&&ac(t),t.flags|=1,Rn(e,t,r,h),t.child)}function Nm(e,t,r,a,d){if(ns(t),t.stateNode===null){var h=Cs,v=r.contextType;typeof v=="object"&&v!==null&&(h=An(v)),h=new r(a,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=$c,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=a,h.state=t.memoizedState,h.refs={},bc(t),v=r.contextType,h.context=typeof v=="object"&&v!==null?An(v):Cs,h.state=t.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(Uc(t,r,v,a),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(v=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),v!==h.state&&$c.enqueueReplaceState(h,h.state,null),El(t,a,h,d),Tl(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){h=t.stateNode;var M=t.memoizedProps,q=is(r,M);h.props=q;var ye=h.context,_e=r.contextType;v=Cs,typeof _e=="object"&&_e!==null&&(v=An(_e));var He=r.getDerivedStateFromProps;_e=typeof He=="function"||typeof h.getSnapshotBeforeUpdate=="function",M=t.pendingProps!==M,_e||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(M||ye!==v)&&um(t,h,a,v),kr=!1;var ve=t.memoizedState;h.state=ve,El(t,a,h,d),Tl(),ye=t.memoizedState,M||ve!==ye||kr?(typeof He=="function"&&(Uc(t,r,He,a),ye=t.memoizedState),(q=kr||im(t,r,q,a,ve,ye,v))?(_e||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=ye),h.props=a,h.state=ye,h.context=v,a=q):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{h=t.stateNode,xc(e,t),v=t.memoizedProps,_e=is(r,v),h.props=_e,He=t.pendingProps,ve=h.context,ye=r.contextType,q=Cs,typeof ye=="object"&&ye!==null&&(q=An(ye)),M=r.getDerivedStateFromProps,(ye=typeof M=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==He||ve!==q)&&um(t,h,a,q),kr=!1,ve=t.memoizedState,h.state=ve,El(t,a,h,d),Tl();var je=t.memoizedState;v!==He||ve!==je||kr||e!==null&&e.dependencies!==null&&Wa(e.dependencies)?(typeof M=="function"&&(Uc(t,r,M,a),je=t.memoizedState),(_e=kr||im(t,r,_e,a,ve,je,q)||e!==null&&e.dependencies!==null&&Wa(e.dependencies))?(ye||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(a,je,q),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(a,je,q)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&ve===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ve===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=je),h.props=a,h.state=je,h.context=q,a=_e):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&ve===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ve===e.memoizedState||(t.flags|=1024),a=!1)}return h=a,di(e,t),a=(t.flags&128)!==0,h||a?(h=t.stateNode,r=a&&typeof r.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&a?(t.child=ls(t,e.child,null,d),t.child=ls(t,null,r,d)):Rn(e,t,r,d),t.memoizedState=h.state,e=t.child):e=nr(e,t,d),e}function Cm(e,t,r,a){return es(),t.flags|=256,Rn(e,t,r,a),t.child}var Gc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pc(e){return{baseLanes:e,cachePool:ph()}}function Yc(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=co),e}function km(e,t,r){var a=t.pendingProps,d=!1,h=(t.flags&128)!==0,v;if((v=h)||(v=e!==null&&e.memoizedState===null?!1:(yn.current&2)!==0),v&&(d=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(zt){if(d?Or(t):Tr(),(e=un)?(e=Ag(e,So),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wr!==null?{id:Bo,overflow:zo}:null,retryLane:536870912,hydrationErrors:null},r=rh(e),r.return=t,t.child=r,Ln=t,un=null)):e=null,e===null)throw Nr(t);return Id(e)?t.lanes=32:t.lanes=536870912,null}var M=a.children;return a=a.fallback,d?(Tr(),d=t.mode,M=fi({mode:"hidden",children:M},d),a=Jr(a,d,r,null),M.return=t,a.return=t,M.sibling=a,t.child=M,a=t.child,a.memoizedState=Pc(r),a.childLanes=Yc(e,v,r),t.memoizedState=Gc,_l(null,a)):(Or(t),Qc(t,M))}var q=e.memoizedState;if(q!==null&&(M=q.dehydrated,M!==null)){if(h)t.flags&256?(Or(t),t.flags&=-257,t=Xc(e,t,r)):t.memoizedState!==null?(Tr(),t.child=e.child,t.flags|=128,t=null):(Tr(),M=a.fallback,d=t.mode,a=fi({mode:"visible",children:a.children},d),M=Jr(M,d,r,null),M.flags|=2,a.return=t,M.return=t,a.sibling=M,t.child=a,ls(t,e.child,null,r),a=t.child,a.memoizedState=Pc(r),a.childLanes=Yc(e,v,r),t.memoizedState=Gc,t=_l(null,a));else if(Or(t),Id(M)){if(v=M.nextSibling&&M.nextSibling.dataset,v)var ye=v.dgst;v=ye,a=Error(l(419)),a.stack="",a.digest=v,Nl({value:a,source:null,stack:null}),t=Xc(e,t,r)}else if(Cn||Os(e,t,r,!1),v=(r&e.childLanes)!==0,Cn||v){if(v=sn,v!==null&&(a=St(v,r),a!==0&&a!==q.retryLane))throw q.retryLane=a,Zr(e,a),Zn(v,e,a),qc;Ed(M)||wi(),t=Xc(e,t,r)}else Ed(M)?(t.flags|=192,t.child=e.child,t=null):(e=q.treeContext,un=Co(M.nextSibling),Ln=t,zt=!0,Sr=null,So=!1,e!==null&&ah(t,e),t=Qc(t,a.children),t.flags|=4096);return t}return d?(Tr(),M=a.fallback,d=t.mode,q=e.child,ye=q.sibling,a=Qo(q,{mode:"hidden",children:a.children}),a.subtreeFlags=q.subtreeFlags&65011712,ye!==null?M=Qo(ye,M):(M=Jr(M,d,r,null),M.flags|=2),M.return=t,a.return=t,a.sibling=M,t.child=a,_l(null,a),a=t.child,M=e.child.memoizedState,M===null?M=Pc(r):(d=M.cachePool,d!==null?(q=Sn._currentValue,d=d.parent!==q?{parent:q,pool:q}:d):d=ph(),M={baseLanes:M.baseLanes|r,cachePool:d}),a.memoizedState=M,a.childLanes=Yc(e,v,r),t.memoizedState=Gc,_l(e.child,a)):(Or(t),r=e.child,e=r.sibling,r=Qo(r,{mode:"visible",children:a.children}),r.return=t,r.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=r,t.memoizedState=null,r)}function Qc(e,t){return t=fi({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function fi(e,t){return e=lo(22,e,null,t),e.lanes=0,e}function Xc(e,t,r){return ls(t,e.child,null,r),e=Qc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jm(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),fc(e.return,t,r)}function Zc(e,t,r,a,d,h){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:d,treeForkCount:h}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=r,v.tailMode=d,v.treeForkCount=h)}function Mm(e,t,r){var a=t.pendingProps,d=a.revealOrder,h=a.tail;a=a.children;var v=yn.current,M=(v&2)!==0;if(M?(v=v&1|2,t.flags|=128):v&=1,O(yn,v),Rn(e,t,a,r),a=zt?Sl:0,!M&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jm(e,r,t);else if(e.tag===19)jm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&ei(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Zc(t,!1,d,r,h,a);break;case"backwards":case"unstable_legacy-backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&ei(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Zc(t,!0,r,null,h,a);break;case"together":Zc(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function nr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Lr|=t.lanes,(r&t.childLanes)===0)if(e!==null){if(Os(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,r=Qo(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Qo(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Jc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Wa(e)))}function bv(e,t,r){switch(t.tag){case 3:ue(t,t.stateNode.containerInfo),Cr(t,Sn,e.memoizedState.cache),es();break;case 27:case 5:U(t);break;case 4:ue(t,t.stateNode.containerInfo);break;case 10:Cr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Cc(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(Or(t),t.flags|=128,null):(r&t.child.childLanes)!==0?km(e,t,r):(Or(t),e=nr(e,t,r),e!==null?e.sibling:null);Or(t);break;case 19:var d=(e.flags&128)!==0;if(a=(r&t.childLanes)!==0,a||(Os(e,t,r,!1),a=(r&t.childLanes)!==0),d){if(a)return Mm(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),O(yn,yn.current),a)break;return null;case 22:return t.lanes=0,xm(e,t,r,t.pendingProps);case 24:Cr(t,Sn,e.memoizedState.cache)}return nr(e,t,r)}function Om(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)Cn=!0;else{if(!Jc(e,r)&&(t.flags&128)===0)return Cn=!1,bv(e,t,r);Cn=(e.flags&131072)!==0}else Cn=!1,zt&&(t.flags&1048576)!==0&&lh(t,Sl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=rs(t.elementType),t.type=e,typeof e=="function")rc(e)?(a=is(e,a),t.tag=1,t=Nm(null,t,e,a,r)):(t.tag=0,t=Wc(null,t,e,a,r));else{if(e!=null){var d=e.$$typeof;if(d===V){t.tag=11,t=gm(null,t,e,a,r);break e}else if(d===I){t.tag=14,t=ym(null,t,e,a,r);break e}}throw t=Ee(e)||e,Error(l(306,t,""))}}return t;case 0:return Wc(e,t,t.type,t.pendingProps,r);case 1:return a=t.type,d=is(a,t.pendingProps),Nm(e,t,a,d,r);case 3:e:{if(ue(t,t.stateNode.containerInfo),e===null)throw Error(l(387));a=t.pendingProps;var h=t.memoizedState;d=h.element,xc(e,t),El(t,a,null,r);var v=t.memoizedState;if(a=v.cache,Cr(t,Sn,a),a!==h.cache&&pc(t,[Sn],r,!0),Tl(),a=v.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=Cm(e,t,a,r);break e}else if(a!==d){d=xo(Error(l(424)),t),Nl(d),t=Cm(e,t,a,r);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,un=Co(e.firstChild),Ln=t,zt=!0,Sr=null,So=!0,r=xh(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(es(),a===d){t=nr(e,t,r);break e}Rn(e,t,a,r)}t=t.child}return t;case 26:return di(e,t),e===null?(r=Hg(t.type,null,t.pendingProps,null))?t.memoizedState=r:zt||(r=t.type,e=t.pendingProps,a=Oi(pe.current).createElement(r),a[Gt]=t,a[Bt]=e,_n(a,r,e),Qe(a),t.stateNode=a):t.memoizedState=Hg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return U(t),e===null&&zt&&(a=t.stateNode=Dg(t.type,t.pendingProps,pe.current),Ln=t,So=!0,d=un,Br(t.type)?(Ld=d,un=Co(a.firstChild)):un=d),Rn(e,t,t.pendingProps.children,r),di(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&zt&&((d=a=un)&&(a=Pv(a,t.type,t.pendingProps,So),a!==null?(t.stateNode=a,Ln=t,un=Co(a.firstChild),So=!1,d=!0):d=!1),d||Nr(t)),U(t),d=t.type,h=t.pendingProps,v=e!==null?e.memoizedProps:null,a=h.children,Md(d,h)?a=null:v!==null&&Md(d,v)&&(t.flags|=32),t.memoizedState!==null&&(d=jc(e,t,uv,null,null,r),Ql._currentValue=d),di(e,t),Rn(e,t,a,r),t.child;case 6:return e===null&&zt&&((e=r=un)&&(r=Yv(r,t.pendingProps,So),r!==null?(t.stateNode=r,Ln=t,un=null,e=!0):e=!1),e||Nr(t)),null;case 13:return km(e,t,r);case 4:return ue(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ls(t,null,a,r):Rn(e,t,a,r),t.child;case 11:return gm(e,t,t.type,t.pendingProps,r);case 7:return Rn(e,t,t.pendingProps,r),t.child;case 8:return Rn(e,t,t.pendingProps.children,r),t.child;case 12:return Rn(e,t,t.pendingProps.children,r),t.child;case 10:return a=t.pendingProps,Cr(t,t.type,a.value),Rn(e,t,a.children,r),t.child;case 9:return d=t.type._context,a=t.pendingProps.children,ns(t),d=An(d),a=a(d),t.flags|=1,Rn(e,t,a,r),t.child;case 14:return ym(e,t,t.type,t.pendingProps,r);case 15:return bm(e,t,t.type,t.pendingProps,r);case 19:return Mm(e,t,r);case 31:return yv(e,t,r);case 22:return xm(e,t,r,t.pendingProps);case 24:return ns(t),a=An(Sn),e===null?(d=gc(),d===null&&(d=sn,h=hc(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=r),d=h),t.memoizedState={parent:a,cache:d},bc(t),Cr(t,Sn,d)):((e.lanes&r)!==0&&(xc(e,t),El(t,null,null,r),Tl()),d=e.memoizedState,h=t.memoizedState,d.parent!==a?(d={parent:a,cache:a},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Cr(t,Sn,a)):(a=h.cache,Cr(t,Sn,a),a!==d.cache&&pc(t,[Sn],r,!0))),Rn(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function or(e){e.flags|=4}function ed(e,t,r,a,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(tg())e.flags|=8192;else throw ss=Qa,yc}else e.flags&=-16777217}function Tm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Fg(t))if(tg())e.flags|=8192;else throw ss=Qa,yc}function pi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?it():536870912,e.lanes|=t,Vs|=t)}function Dl(e,t){if(!zt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function cn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,a|=d.subtreeFlags&65011712,a|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,a|=d.subtreeFlags,a|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function xv(e,t,r){var a=t.pendingProps;switch(ic(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(t),null;case 1:return cn(t),null;case 3:return r=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Jo(Sn),_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ms(t)?or(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,cc())),cn(t),null;case 26:var d=t.type,h=t.memoizedState;return e===null?(or(t),h!==null?(cn(t),Tm(t,h)):(cn(t),ed(t,d,null,a,r))):h?h!==e.memoizedState?(or(t),cn(t),Tm(t,h)):(cn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&or(t),cn(t),ed(t,d,e,a,r)),null;case 27:if(R(t),r=pe.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&or(t);else{if(!a){if(t.stateNode===null)throw Error(l(166));return cn(t),null}e=te.current,Ms(t)?ih(t):(e=Dg(d,a,r),t.stateNode=e,or(t))}return cn(t),null;case 5:if(R(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&or(t);else{if(!a){if(t.stateNode===null)throw Error(l(166));return cn(t),null}if(h=te.current,Ms(t))ih(t);else{var v=Oi(pe.current);switch(h){case 1:h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=v.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof a.is=="string"?v.createElement("select",{is:a.is}):v.createElement("select"),a.multiple?h.multiple=!0:a.size&&(h.size=a.size);break;default:h=typeof a.is=="string"?v.createElement(d,{is:a.is}):v.createElement(d)}}h[Gt]=t,h[Bt]=a;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)h.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=h;e:switch(_n(h,d,a),d){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&or(t)}}return cn(t),ed(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&or(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(l(166));if(e=pe.current,Ms(t)){if(e=t.stateNode,r=t.memoizedProps,a=null,d=Ln,d!==null)switch(d.tag){case 27:case 5:a=d.memoizedProps}e[Gt]=t,e=!!(e.nodeValue===r||a!==null&&a.suppressHydrationWarning===!0||kg(e.nodeValue,r)),e||Nr(t,!0)}else e=Oi(e).createTextNode(a),e[Gt]=t,t.stateNode=e}return cn(t),null;case 31:if(r=t.memoizedState,e===null||e.memoizedState!==null){if(a=Ms(t),r!==null){if(e===null){if(!a)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[Gt]=t}else es(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;cn(t),e=!1}else r=cc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return t.flags&256?(io(t),t):(io(t),null);if((t.flags&128)!==0)throw Error(l(558))}return cn(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Ms(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(l(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));d[Gt]=t}else es(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;cn(t),d=!1}else d=cc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(io(t),t):(io(t),null)}return io(t),(t.flags&128)!==0?(t.lanes=r,t):(r=a!==null,e=e!==null&&e.memoizedState!==null,r&&(a=t.child,d=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(d=a.alternate.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==d&&(a.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),pi(t,t.updateQueue),cn(t),null);case 4:return _(),e===null&&Sd(t.stateNode.containerInfo),cn(t),null;case 10:return Jo(t.type),cn(t),null;case 19:if(A(yn),a=t.memoizedState,a===null)return cn(t),null;if(d=(t.flags&128)!==0,h=a.rendering,h===null)if(d)Dl(a,!1);else{if(mn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=ei(e),h!==null){for(t.flags|=128,Dl(a,!1),e=h.updateQueue,t.updateQueue=e,pi(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)oh(r,e),r=r.sibling;return O(yn,yn.current&1|2),zt&&Xo(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&Le()>bi&&(t.flags|=128,d=!0,Dl(a,!1),t.lanes=4194304)}else{if(!d)if(e=ei(h),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,pi(t,e),Dl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!h.alternate&&!zt)return cn(t),null}else 2*Le()-a.renderingStartTime>bi&&r!==536870912&&(t.flags|=128,d=!0,Dl(a,!1),t.lanes=4194304);a.isBackwards?(h.sibling=t.child,t.child=h):(e=a.last,e!==null?e.sibling=h:t.child=h,a.last=h)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Le(),e.sibling=null,r=yn.current,O(yn,d?r&1|2:r&1),zt&&Xo(t,a.treeForkCount),e):(cn(t),null);case 22:case 23:return io(t),Nc(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(r&536870912)!==0&&(t.flags&128)===0&&(cn(t),t.subtreeFlags&6&&(t.flags|=8192)):cn(t),r=t.updateQueue,r!==null&&pi(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==r&&(t.flags|=2048),e!==null&&A(os),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Jo(Sn),cn(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function vv(e,t){switch(ic(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jo(Sn),_(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return R(t),null;case 31:if(t.memoizedState!==null){if(io(t),t.alternate===null)throw Error(l(340));es()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(io(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));es()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return A(yn),null;case 4:return _(),null;case 10:return Jo(t.type),null;case 22:case 23:return io(t),Nc(),e!==null&&A(os),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Jo(Sn),null;case 25:return null;default:return null}}function Em(e,t){switch(ic(t),t.tag){case 3:Jo(Sn),_();break;case 26:case 27:case 5:R(t);break;case 4:_();break;case 31:t.memoizedState!==null&&io(t);break;case 13:io(t);break;case 19:A(yn);break;case 10:Jo(t.type);break;case 22:case 23:io(t),Nc(),e!==null&&A(os);break;case 24:Jo(Sn)}}function Bl(e,t){try{var r=t.updateQueue,a=r!==null?r.lastEffect:null;if(a!==null){var d=a.next;r=d;do{if((r.tag&e)===e){a=void 0;var h=r.create,v=r.inst;a=h(),v.destroy=a}r=r.next}while(r!==d)}}catch(M){Xt(t,t.return,M)}}function Er(e,t,r){try{var a=t.updateQueue,d=a!==null?a.lastEffect:null;if(d!==null){var h=d.next;a=h;do{if((a.tag&e)===e){var v=a.inst,M=v.destroy;if(M!==void 0){v.destroy=void 0,d=t;var q=r,ye=M;try{ye()}catch(_e){Xt(d,q,_e)}}}a=a.next}while(a!==h)}}catch(_e){Xt(t,t.return,_e)}}function Im(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{wh(t,r)}catch(a){Xt(e,e.return,a)}}}function Lm(e,t,r){r.props=is(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(a){Xt(e,t,a)}}function zl(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof r=="function"?e.refCleanup=r(a):r.current=a}}catch(d){Xt(e,t,d)}}function Ho(e,t){var r=e.ref,a=e.refCleanup;if(r!==null)if(typeof a=="function")try{a()}catch(d){Xt(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){Xt(e,t,d)}else r.current=null}function Am(e){var t=e.type,r=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&a.focus();break e;case"img":r.src?a.src=r.src:r.srcSet&&(a.srcset=r.srcSet)}}catch(d){Xt(e,e.return,d)}}function td(e,t,r){try{var a=e.stateNode;Uv(a,e.type,r,t),a[Bt]=t}catch(d){Xt(e,e.return,d)}}function Rm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Br(e.type)||e.tag===4}function nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Br(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function od(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=yo));else if(a!==4&&(a===27&&Br(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(od(e,t,r),e=e.sibling;e!==null;)od(e,t,r),e=e.sibling}function hi(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(a===27&&Br(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(hi(e,t,r),e=e.sibling;e!==null;)hi(e,t,r),e=e.sibling}function _m(e){var t=e.stateNode,r=e.memoizedProps;try{for(var a=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);_n(t,a,r),t[Gt]=e,t[Bt]=r}catch(h){Xt(e,e.return,h)}}var rr=!1,kn=!1,rd=!1,Dm=typeof WeakSet=="function"?WeakSet:Set,In=null;function wv(e,t){if(e=e.containerInfo,kd=_i,e=Pp(e),Xu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var d=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var v=0,M=-1,q=-1,ye=0,_e=0,He=e,ve=null;t:for(;;){for(var je;He!==r||d!==0&&He.nodeType!==3||(M=v+d),He!==h||a!==0&&He.nodeType!==3||(q=v+a),He.nodeType===3&&(v+=He.nodeValue.length),(je=He.firstChild)!==null;)ve=He,He=je;for(;;){if(He===e)break t;if(ve===r&&++ye===d&&(M=v),ve===h&&++_e===a&&(q=v),(je=He.nextSibling)!==null)break;He=ve,ve=He.parentNode}He=je}r=M===-1||q===-1?null:{start:M,end:q}}else r=null}r=r||{start:0,end:0}}else r=null;for(jd={focusedElem:e,selectionRange:r},_i=!1,In=t;In!==null;)if(t=In,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,In=e;else for(;In!==null;){switch(t=In,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)d=e[r],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,r=t,d=h.memoizedProps,h=h.memoizedState,a=r.stateNode;try{var ut=is(r.type,d);e=a.getSnapshotBeforeUpdate(ut,h),a.__reactInternalSnapshotBeforeUpdate=e}catch(xt){Xt(r,r.return,xt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)Td(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Td(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,In=e;break}In=t.return}}function Bm(e,t,r){var a=r.flags;switch(r.tag){case 0:case 11:case 15:lr(e,r),a&4&&Bl(5,r);break;case 1:if(lr(e,r),a&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(v){Xt(r,r.return,v)}else{var d=is(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Xt(r,r.return,v)}}a&64&&Im(r),a&512&&zl(r,r.return);break;case 3:if(lr(e,r),a&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{wh(e,t)}catch(v){Xt(r,r.return,v)}}break;case 27:t===null&&a&4&&_m(r);case 26:case 5:lr(e,r),t===null&&a&4&&Am(r),a&512&&zl(r,r.return);break;case 12:lr(e,r);break;case 31:lr(e,r),a&4&&Vm(e,r);break;case 13:lr(e,r),a&4&&Km(e,r),a&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Ev.bind(null,r),Qv(e,r))));break;case 22:if(a=r.memoizedState!==null||rr,!a){t=t!==null&&t.memoizedState!==null||kn,d=rr;var h=kn;rr=a,(kn=t)&&!h?ar(e,r,(r.subtreeFlags&8772)!==0):lr(e,r),rr=d,kn=h}break;case 30:break;default:lr(e,r)}}function zm(e){var t=e.alternate;t!==null&&(e.alternate=null,zm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&P(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var fn=null,Pn=!1;function sr(e,t,r){for(r=r.child;r!==null;)Hm(e,t,r),r=r.sibling}function Hm(e,t,r){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Pe,r)}catch{}switch(r.tag){case 26:kn||Ho(r,t),sr(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:kn||Ho(r,t);var a=fn,d=Pn;Br(r.type)&&(fn=r.stateNode,Pn=!1),sr(e,t,r),Gl(r.stateNode),fn=a,Pn=d;break;case 5:kn||Ho(r,t);case 6:if(a=fn,d=Pn,fn=null,sr(e,t,r),fn=a,Pn=d,fn!==null)if(Pn)try{(fn.nodeType===9?fn.body:fn.nodeName==="HTML"?fn.ownerDocument.body:fn).removeChild(r.stateNode)}catch(h){Xt(r,t,h)}else try{fn.removeChild(r.stateNode)}catch(h){Xt(r,t,h)}break;case 18:fn!==null&&(Pn?(e=fn,Ig(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),Ps(e)):Ig(fn,r.stateNode));break;case 4:a=fn,d=Pn,fn=r.stateNode.containerInfo,Pn=!0,sr(e,t,r),fn=a,Pn=d;break;case 0:case 11:case 14:case 15:Er(2,r,t),kn||Er(4,r,t),sr(e,t,r);break;case 1:kn||(Ho(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"&&Lm(r,t,a)),sr(e,t,r);break;case 21:sr(e,t,r);break;case 22:kn=(a=kn)||r.memoizedState!==null,sr(e,t,r),kn=a;break;default:sr(e,t,r)}}function Vm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ps(e)}catch(r){Xt(t,t.return,r)}}}function Km(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ps(e)}catch(r){Xt(t,t.return,r)}}function Sv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Dm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Dm),t;default:throw Error(l(435,e.tag))}}function mi(e,t){var r=Sv(e);t.forEach(function(a){if(!r.has(a)){r.add(a);var d=Iv.bind(null,e,a);a.then(d,d)}})}function Yn(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var d=r[a],h=e,v=t,M=v;e:for(;M!==null;){switch(M.tag){case 27:if(Br(M.type)){fn=M.stateNode,Pn=!1;break e}break;case 5:fn=M.stateNode,Pn=!1;break e;case 3:case 4:fn=M.stateNode.containerInfo,Pn=!0;break e}M=M.return}if(fn===null)throw Error(l(160));Hm(h,v,d),fn=null,Pn=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Um(t,e),t=t.sibling}var Eo=null;function Um(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Yn(t,e),Qn(e),a&4&&(Er(3,e,e.return),Bl(3,e),Er(5,e,e.return));break;case 1:Yn(t,e),Qn(e),a&512&&(kn||r===null||Ho(r,r.return)),a&64&&rr&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?a:r.concat(a))));break;case 26:var d=Eo;if(Yn(t,e),Qn(e),a&512&&(kn||r===null||Ho(r,r.return)),a&4){var h=r!==null?r.memoizedState:null;if(a=e.memoizedState,r===null)if(a===null)if(e.stateNode===null){e:{a=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(a){case"title":h=d.getElementsByTagName("title")[0],(!h||h[oo]||h[Gt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(a),d.head.insertBefore(h,d.querySelector("head > title"))),_n(h,a,r),h[Gt]=e,Qe(h),a=h;break e;case"link":var v=Ug("link","href",d).get(a+(r.href||""));if(v){for(var M=0;M<v.length;M++)if(h=v[M],h.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&h.getAttribute("rel")===(r.rel==null?null:r.rel)&&h.getAttribute("title")===(r.title==null?null:r.title)&&h.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(M,1);break t}}h=d.createElement(a),_n(h,a,r),d.head.appendChild(h);break;case"meta":if(v=Ug("meta","content",d).get(a+(r.content||""))){for(M=0;M<v.length;M++)if(h=v[M],h.getAttribute("content")===(r.content==null?null:""+r.content)&&h.getAttribute("name")===(r.name==null?null:r.name)&&h.getAttribute("property")===(r.property==null?null:r.property)&&h.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&h.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(M,1);break t}}h=d.createElement(a),_n(h,a,r),d.head.appendChild(h);break;default:throw Error(l(468,a))}h[Gt]=e,Qe(h),a=h}e.stateNode=a}else $g(d,e.type,e.stateNode);else e.stateNode=Kg(d,a,e.memoizedProps);else h!==a?(h===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):h.count--,a===null?$g(d,e.type,e.stateNode):Kg(d,a,e.memoizedProps)):a===null&&e.stateNode!==null&&td(e,e.memoizedProps,r.memoizedProps)}break;case 27:Yn(t,e),Qn(e),a&512&&(kn||r===null||Ho(r,r.return)),r!==null&&a&4&&td(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Yn(t,e),Qn(e),a&512&&(kn||r===null||Ho(r,r.return)),e.flags&32){d=e.stateNode;try{xr(d,"")}catch(ut){Xt(e,e.return,ut)}}a&4&&e.stateNode!=null&&(d=e.memoizedProps,td(e,d,r!==null?r.memoizedProps:d)),a&1024&&(rd=!0);break;case 6:if(Yn(t,e),Qn(e),a&4){if(e.stateNode===null)throw Error(l(162));a=e.memoizedProps,r=e.stateNode;try{r.nodeValue=a}catch(ut){Xt(e,e.return,ut)}}break;case 3:if(Ii=null,d=Eo,Eo=Ti(t.containerInfo),Yn(t,e),Eo=d,Qn(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Ps(t.containerInfo)}catch(ut){Xt(e,e.return,ut)}rd&&(rd=!1,$m(e));break;case 4:a=Eo,Eo=Ti(e.stateNode.containerInfo),Yn(t,e),Qn(e),Eo=a;break;case 12:Yn(t,e),Qn(e);break;case 31:Yn(t,e),Qn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,mi(e,a)));break;case 13:Yn(t,e),Qn(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(yi=Le()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,mi(e,a)));break;case 22:d=e.memoizedState!==null;var q=r!==null&&r.memoizedState!==null,ye=rr,_e=kn;if(rr=ye||d,kn=_e||q,Yn(t,e),kn=_e,rr=ye,Qn(e),a&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(r===null||q||rr||kn||us(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){q=r=t;try{if(h=q.stateNode,d)v=h.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{M=q.stateNode;var He=q.memoizedProps.style,ve=He!=null&&He.hasOwnProperty("display")?He.display:null;M.style.display=ve==null||typeof ve=="boolean"?"":(""+ve).trim()}}catch(ut){Xt(q,q.return,ut)}}}else if(t.tag===6){if(r===null){q=t;try{q.stateNode.nodeValue=d?"":q.memoizedProps}catch(ut){Xt(q,q.return,ut)}}}else if(t.tag===18){if(r===null){q=t;try{var je=q.stateNode;d?Lg(je,!0):Lg(q.stateNode,!1)}catch(ut){Xt(q,q.return,ut)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(r=a.retryQueue,r!==null&&(a.retryQueue=null,mi(e,r))));break;case 19:Yn(t,e),Qn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,mi(e,a)));break;case 30:break;case 21:break;default:Yn(t,e),Qn(e)}}function Qn(e){var t=e.flags;if(t&2){try{for(var r,a=e.return;a!==null;){if(Rm(a)){r=a;break}a=a.return}if(r==null)throw Error(l(160));switch(r.tag){case 27:var d=r.stateNode,h=nd(e);hi(e,h,d);break;case 5:var v=r.stateNode;r.flags&32&&(xr(v,""),r.flags&=-33);var M=nd(e);hi(e,M,v);break;case 3:case 4:var q=r.stateNode.containerInfo,ye=nd(e);od(e,ye,q);break;default:throw Error(l(161))}}catch(_e){Xt(e,e.return,_e)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $m(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;$m(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function lr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Bm(e,t.alternate,t),t=t.sibling}function us(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Er(4,t,t.return),us(t);break;case 1:Ho(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&Lm(t,t.return,r),us(t);break;case 27:Gl(t.stateNode);case 26:case 5:Ho(t,t.return),us(t);break;case 22:t.memoizedState===null&&us(t);break;case 30:us(t);break;default:us(t)}e=e.sibling}}function ar(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,d=e,h=t,v=h.flags;switch(h.tag){case 0:case 11:case 15:ar(d,h,r),Bl(4,h);break;case 1:if(ar(d,h,r),a=h,d=a.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(ye){Xt(a,a.return,ye)}if(a=h,d=a.updateQueue,d!==null){var M=a.stateNode;try{var q=d.shared.hiddenCallbacks;if(q!==null)for(d.shared.hiddenCallbacks=null,d=0;d<q.length;d++)vh(q[d],M)}catch(ye){Xt(a,a.return,ye)}}r&&v&64&&Im(h),zl(h,h.return);break;case 27:_m(h);case 26:case 5:ar(d,h,r),r&&a===null&&v&4&&Am(h),zl(h,h.return);break;case 12:ar(d,h,r);break;case 31:ar(d,h,r),r&&v&4&&Vm(d,h);break;case 13:ar(d,h,r),r&&v&4&&Km(d,h);break;case 22:h.memoizedState===null&&ar(d,h,r),zl(h,h.return);break;case 30:break;default:ar(d,h,r)}t=t.sibling}}function sd(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Cl(r))}function ld(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Cl(e))}function Io(e,t,r,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Fm(e,t,r,a),t=t.sibling}function Fm(e,t,r,a){var d=t.flags;switch(t.tag){case 0:case 11:case 15:Io(e,t,r,a),d&2048&&Bl(9,t);break;case 1:Io(e,t,r,a);break;case 3:Io(e,t,r,a),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Cl(e)));break;case 12:if(d&2048){Io(e,t,r,a),e=t.stateNode;try{var h=t.memoizedProps,v=h.id,M=h.onPostCommit;typeof M=="function"&&M(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(q){Xt(t,t.return,q)}}else Io(e,t,r,a);break;case 31:Io(e,t,r,a);break;case 13:Io(e,t,r,a);break;case 23:break;case 22:h=t.stateNode,v=t.alternate,t.memoizedState!==null?h._visibility&2?Io(e,t,r,a):Hl(e,t):h._visibility&2?Io(e,t,r,a):(h._visibility|=2,Bs(e,t,r,a,(t.subtreeFlags&10256)!==0||!1)),d&2048&&sd(v,t);break;case 24:Io(e,t,r,a),d&2048&&ld(t.alternate,t);break;default:Io(e,t,r,a)}}function Bs(e,t,r,a,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,v=t,M=r,q=a,ye=v.flags;switch(v.tag){case 0:case 11:case 15:Bs(h,v,M,q,d),Bl(8,v);break;case 23:break;case 22:var _e=v.stateNode;v.memoizedState!==null?_e._visibility&2?Bs(h,v,M,q,d):Hl(h,v):(_e._visibility|=2,Bs(h,v,M,q,d)),d&&ye&2048&&sd(v.alternate,v);break;case 24:Bs(h,v,M,q,d),d&&ye&2048&&ld(v.alternate,v);break;default:Bs(h,v,M,q,d)}t=t.sibling}}function Hl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,a=t,d=a.flags;switch(a.tag){case 22:Hl(r,a),d&2048&&sd(a.alternate,a);break;case 24:Hl(r,a),d&2048&&ld(a.alternate,a);break;default:Hl(r,a)}t=t.sibling}}var Vl=8192;function zs(e,t,r){if(e.subtreeFlags&Vl)for(e=e.child;e!==null;)qm(e,t,r),e=e.sibling}function qm(e,t,r){switch(e.tag){case 26:zs(e,t,r),e.flags&Vl&&e.memoizedState!==null&&i1(r,Eo,e.memoizedState,e.memoizedProps);break;case 5:zs(e,t,r);break;case 3:case 4:var a=Eo;Eo=Ti(e.stateNode.containerInfo),zs(e,t,r),Eo=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Vl,Vl=16777216,zs(e,t,r),Vl=a):zs(e,t,r));break;default:zs(e,t,r)}}function Wm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Kl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var a=t[r];In=a,Pm(a,e)}Wm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gm(e),e=e.sibling}function Gm(e){switch(e.tag){case 0:case 11:case 15:Kl(e),e.flags&2048&&Er(9,e,e.return);break;case 3:Kl(e);break;case 12:Kl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,gi(e)):Kl(e);break;default:Kl(e)}}function gi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var a=t[r];In=a,Pm(a,e)}Wm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Er(8,t,t.return),gi(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,gi(t));break;default:gi(t)}e=e.sibling}}function Pm(e,t){for(;In!==null;){var r=In;switch(r.tag){case 0:case 11:case 15:Er(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var a=r.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Cl(r.memoizedState.cache)}if(a=r.child,a!==null)a.return=r,In=a;else e:for(r=e;In!==null;){a=In;var d=a.sibling,h=a.return;if(zm(a),a===r){In=null;break e}if(d!==null){d.return=h,In=d;break e}In=h}}}var Nv={getCacheForType:function(e){var t=An(Sn),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return An(Sn).controller.signal}},Cv=typeof WeakMap=="function"?WeakMap:Map,$t=0,sn=null,Lt=null,_t=0,Qt=0,uo=null,Ir=!1,Hs=!1,ad=!1,ir=0,mn=0,Lr=0,cs=0,id=0,co=0,Vs=0,Ul=null,Xn=null,ud=!1,yi=0,Ym=0,bi=1/0,xi=null,Ar=null,En=0,Rr=null,Ks=null,ur=0,cd=0,dd=null,Qm=null,$l=0,fd=null;function fo(){return($t&2)!==0&&_t!==0?_t&-_t:B.T!==null?bd():Et()}function Xm(){if(co===0)if((_t&536870912)===0||zt){var e=Q;Q<<=1,(Q&3932160)===0&&(Q=262144),co=e}else co=536870912;return e=ao.current,e!==null&&(e.flags|=32),co}function Zn(e,t,r){(e===sn&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)&&(Us(e,0),_r(e,_t,co,!1)),nt(e,r),(($t&2)===0||e!==sn)&&(e===sn&&(($t&2)===0&&(cs|=r),mn===4&&_r(e,_t,co,!1)),Vo(e))}function Zm(e,t,r){if(($t&6)!==0)throw Error(l(327));var a=!r&&(t&127)===0&&(t&e.expiredLanes)===0||Ke(e,t),d=a?Mv(e,t):hd(e,t,!0),h=a;do{if(d===0){Hs&&!a&&_r(e,t,0,!1);break}else{if(r=e.current.alternate,h&&!kv(r)){d=hd(e,t,!1),h=!1;continue}if(d===2){if(h=t,e.errorRecoveryDisabledLanes&h)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var M=e;d=Ul;var q=M.current.memoizedState.isDehydrated;if(q&&(Us(M,v).flags|=256),v=hd(M,v,!1),v!==2){if(ad&&!q){M.errorRecoveryDisabledLanes|=h,cs|=h,d=4;break e}h=Xn,Xn=d,h!==null&&(Xn===null?Xn=h:Xn.push.apply(Xn,h))}d=v}if(h=!1,d!==2)continue}}if(d===1){Us(e,0),_r(e,t,0,!0);break}e:{switch(a=e,h=d,h){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:_r(a,t,co,!Ir);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(d=yi+300-Le(),10<d)){if(_r(a,t,co,!Ir),Te(a,0,!0)!==0)break e;ur=t,a.timeoutHandle=Tg(Jm.bind(null,a,r,Xn,xi,ud,t,co,cs,Vs,Ir,h,"Throttled",-0,0),d);break e}Jm(a,r,Xn,xi,ud,t,co,cs,Vs,Ir,h,null,-0,0)}}break}while(!0);Vo(e)}function Jm(e,t,r,a,d,h,v,M,q,ye,_e,He,ve,je){if(e.timeoutHandle=-1,He=t.subtreeFlags,He&8192||(He&16785408)===16785408){He={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:yo},qm(t,h,He);var ut=(h&62914560)===h?yi-Le():(h&4194048)===h?Ym-Le():0;if(ut=u1(He,ut),ut!==null){ur=h,e.cancelPendingCommit=ut(ag.bind(null,e,t,h,r,a,d,v,M,q,_e,He,null,ve,je)),_r(e,h,v,!ye);return}}ag(e,t,h,r,a,d,v,M,q)}function kv(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var a=0;a<r.length;a++){var d=r[a],h=d.getSnapshot;d=d.value;try{if(!so(h(),d))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _r(e,t,r,a){t&=~id,t&=~cs,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var d=t;0<d;){var h=31-pt(d),v=1<<h;a[h]=-1,d&=~v}r!==0&&wt(e,r,t)}function vi(){return($t&6)===0?(Fl(0),!1):!0}function pd(){if(Lt!==null){if(Qt===0)var e=Lt.return;else e=Lt,Zo=ts=null,Tc(e),Ls=null,jl=0,e=Lt;for(;e!==null;)Em(e.alternate,e),e=e.return;Lt=null}}function Us(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,qv(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),ur=0,pd(),sn=e,Lt=r=Qo(e.current,null),_t=t,Qt=0,uo=null,Ir=!1,Hs=Ke(e,t),ad=!1,Vs=co=id=cs=Lr=mn=0,Xn=Ul=null,ud=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var d=31-pt(a),h=1<<d;t|=e[d],a&=~h}return ir=t,Ka(),r}function eg(e,t){kt=null,B.H=Rl,t===Is||t===Ya?(t=gh(),Qt=3):t===yc?(t=gh(),Qt=4):Qt=t===qc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,uo=t,Lt===null&&(mn=1,ui(e,xo(t,e.current)))}function tg(){var e=ao.current;return e===null?!0:(_t&4194048)===_t?No===null:(_t&62914560)===_t||(_t&536870912)!==0?e===No:!1}function ng(){var e=B.H;return B.H=Rl,e===null?Rl:e}function og(){var e=B.A;return B.A=Nv,e}function wi(){mn=4,Ir||(_t&4194048)!==_t&&ao.current!==null||(Hs=!0),(Lr&134217727)===0&&(cs&134217727)===0||sn===null||_r(sn,_t,co,!1)}function hd(e,t,r){var a=$t;$t|=2;var d=ng(),h=og();(sn!==e||_t!==t)&&(xi=null,Us(e,t)),t=!1;var v=mn;e:do try{if(Qt!==0&&Lt!==null){var M=Lt,q=uo;switch(Qt){case 8:pd(),v=6;break e;case 3:case 2:case 9:case 6:ao.current===null&&(t=!0);var ye=Qt;if(Qt=0,uo=null,$s(e,M,q,ye),r&&Hs){v=0;break e}break;default:ye=Qt,Qt=0,uo=null,$s(e,M,q,ye)}}jv(),v=mn;break}catch(_e){eg(e,_e)}while(!0);return t&&e.shellSuspendCounter++,Zo=ts=null,$t=a,B.H=d,B.A=h,Lt===null&&(sn=null,_t=0,Ka()),v}function jv(){for(;Lt!==null;)rg(Lt)}function Mv(e,t){var r=$t;$t|=2;var a=ng(),d=og();sn!==e||_t!==t?(xi=null,bi=Le()+500,Us(e,t)):Hs=Ke(e,t);e:do try{if(Qt!==0&&Lt!==null){t=Lt;var h=uo;t:switch(Qt){case 1:Qt=0,uo=null,$s(e,t,h,1);break;case 2:case 9:if(hh(h)){Qt=0,uo=null,sg(t);break}t=function(){Qt!==2&&Qt!==9||sn!==e||(Qt=7),Vo(e)},h.then(t,t);break e;case 3:Qt=7;break e;case 4:Qt=5;break e;case 7:hh(h)?(Qt=0,uo=null,sg(t)):(Qt=0,uo=null,$s(e,t,h,7));break;case 5:var v=null;switch(Lt.tag){case 26:v=Lt.memoizedState;case 5:case 27:var M=Lt;if(v?Fg(v):M.stateNode.complete){Qt=0,uo=null;var q=M.sibling;if(q!==null)Lt=q;else{var ye=M.return;ye!==null?(Lt=ye,Si(ye)):Lt=null}break t}}Qt=0,uo=null,$s(e,t,h,5);break;case 6:Qt=0,uo=null,$s(e,t,h,6);break;case 8:pd(),mn=6;break e;default:throw Error(l(462))}}Ov();break}catch(_e){eg(e,_e)}while(!0);return Zo=ts=null,B.H=a,B.A=d,$t=r,Lt!==null?0:(sn=null,_t=0,Ka(),mn)}function Ov(){for(;Lt!==null&&!xe();)rg(Lt)}function rg(e){var t=Om(e.alternate,e,ir);e.memoizedProps=e.pendingProps,t===null?Si(e):Lt=t}function sg(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Sm(r,t,t.pendingProps,t.type,void 0,_t);break;case 11:t=Sm(r,t,t.pendingProps,t.type.render,t.ref,_t);break;case 5:Tc(t);default:Em(r,t),t=Lt=oh(t,ir),t=Om(r,t,ir)}e.memoizedProps=e.pendingProps,t===null?Si(e):Lt=t}function $s(e,t,r,a){Zo=ts=null,Tc(t),Ls=null,jl=0;var d=t.return;try{if(gv(e,d,t,r,_t)){mn=1,ui(e,xo(r,e.current)),Lt=null;return}}catch(h){if(d!==null)throw Lt=d,h;mn=1,ui(e,xo(r,e.current)),Lt=null;return}t.flags&32768?(zt||a===1?e=!0:Hs||(_t&536870912)!==0?e=!1:(Ir=e=!0,(a===2||a===9||a===3||a===6)&&(a=ao.current,a!==null&&a.tag===13&&(a.flags|=16384))),lg(t,e)):Si(t)}function Si(e){var t=e;do{if((t.flags&32768)!==0){lg(t,Ir);return}e=t.return;var r=xv(t.alternate,t,ir);if(r!==null){Lt=r;return}if(t=t.sibling,t!==null){Lt=t;return}Lt=t=e}while(t!==null);mn===0&&(mn=5)}function lg(e,t){do{var r=vv(e.alternate,e);if(r!==null){r.flags&=32767,Lt=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){Lt=e;return}Lt=e=r}while(e!==null);mn=6,Lt=null}function ag(e,t,r,a,d,h,v,M,q){e.cancelPendingCommit=null;do Ni();while(En!==0);if(($t&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(h=t.lanes|t.childLanes,h|=nc,st(e,r,h,v,M,q),e===sn&&(Lt=sn=null,_t=0),Ks=t,Rr=e,ur=r,cd=h,dd=d,Qm=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Lv(Be,function(){return fg(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=B.T,B.T=null,d=le.p,le.p=2,v=$t,$t|=4;try{wv(e,t,r)}finally{$t=v,le.p=d,B.T=a}}En=1,ig(),ug(),cg()}}function ig(){if(En===1){En=0;var e=Rr,t=Ks,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=B.T,B.T=null;var a=le.p;le.p=2;var d=$t;$t|=4;try{Um(t,e);var h=jd,v=Pp(e.containerInfo),M=h.focusedElem,q=h.selectionRange;if(v!==M&&M&&M.ownerDocument&&Gp(M.ownerDocument.documentElement,M)){if(q!==null&&Xu(M)){var ye=q.start,_e=q.end;if(_e===void 0&&(_e=ye),"selectionStart"in M)M.selectionStart=ye,M.selectionEnd=Math.min(_e,M.value.length);else{var He=M.ownerDocument||document,ve=He&&He.defaultView||window;if(ve.getSelection){var je=ve.getSelection(),ut=M.textContent.length,xt=Math.min(q.start,ut),tn=q.end===void 0?xt:Math.min(q.end,ut);!je.extend&&xt>tn&&(v=tn,tn=xt,xt=v);var ae=Wp(M,xt),Z=Wp(M,tn);if(ae&&Z&&(je.rangeCount!==1||je.anchorNode!==ae.node||je.anchorOffset!==ae.offset||je.focusNode!==Z.node||je.focusOffset!==Z.offset)){var he=He.createRange();he.setStart(ae.node,ae.offset),je.removeAllRanges(),xt>tn?(je.addRange(he),je.extend(Z.node,Z.offset)):(he.setEnd(Z.node,Z.offset),je.addRange(he))}}}}for(He=[],je=M;je=je.parentNode;)je.nodeType===1&&He.push({element:je,left:je.scrollLeft,top:je.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<He.length;M++){var ze=He[M];ze.element.scrollLeft=ze.left,ze.element.scrollTop=ze.top}}_i=!!kd,jd=kd=null}finally{$t=d,le.p=a,B.T=r}}e.current=t,En=2}}function ug(){if(En===2){En=0;var e=Rr,t=Ks,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=B.T,B.T=null;var a=le.p;le.p=2;var d=$t;$t|=4;try{Bm(e,t.alternate,t)}finally{$t=d,le.p=a,B.T=r}}En=3}}function cg(){if(En===4||En===3){En=0,Ue();var e=Rr,t=Ks,r=ur,a=Qm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?En=5:(En=0,Ks=Rr=null,dg(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Ar=null),ft(r),t=t.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Pe,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=B.T,d=le.p,le.p=2,B.T=null;try{for(var h=e.onRecoverableError,v=0;v<a.length;v++){var M=a[v];h(M.value,{componentStack:M.stack})}}finally{B.T=t,le.p=d}}(ur&3)!==0&&Ni(),Vo(e),d=e.pendingLanes,(r&261930)!==0&&(d&42)!==0?e===fd?$l++:($l=0,fd=e):$l=0,Fl(0)}}function dg(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Cl(t)))}function Ni(){return ig(),ug(),cg(),fg()}function fg(){if(En!==5)return!1;var e=Rr,t=cd;cd=0;var r=ft(ur),a=B.T,d=le.p;try{le.p=32>r?32:r,B.T=null,r=dd,dd=null;var h=Rr,v=ur;if(En=0,Ks=Rr=null,ur=0,($t&6)!==0)throw Error(l(331));var M=$t;if($t|=4,Gm(h.current),Fm(h,h.current,v,r),$t=M,Fl(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Pe,h)}catch{}return!0}finally{le.p=d,B.T=a,dg(e,t)}}function pg(e,t,r){t=xo(r,t),t=Fc(e.stateNode,t,2),e=Mr(e,t,2),e!==null&&(nt(e,2),Vo(e))}function Xt(e,t,r){if(e.tag===3)pg(e,e,r);else for(;t!==null;){if(t.tag===3){pg(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ar===null||!Ar.has(a))){e=xo(r,e),r=hm(2),a=Mr(t,r,2),a!==null&&(mm(r,a,t,e),nt(a,2),Vo(a));break}}t=t.return}}function md(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new Cv;var d=new Set;a.set(t,d)}else d=a.get(t),d===void 0&&(d=new Set,a.set(t,d));d.has(r)||(ad=!0,d.add(r),e=Tv.bind(null,e,t,r),t.then(e,e))}function Tv(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,sn===e&&(_t&r)===r&&(mn===4||mn===3&&(_t&62914560)===_t&&300>Le()-yi?($t&2)===0&&Us(e,0):id|=r,Vs===_t&&(Vs=0)),Vo(e)}function hg(e,t){t===0&&(t=it()),e=Zr(e,t),e!==null&&(nt(e,t),Vo(e))}function Ev(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),hg(e,r)}function Iv(e,t){var r=0;switch(e.tag){case 31:case 13:var a=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(l(314))}a!==null&&a.delete(t),hg(e,r)}function Lv(e,t){return ee(e,t)}var Ci=null,Fs=null,gd=!1,ki=!1,yd=!1,Dr=0;function Vo(e){e!==Fs&&e.next===null&&(Fs===null?Ci=Fs=e:Fs=Fs.next=e),ki=!0,gd||(gd=!0,Rv())}function Fl(e,t){if(!yd&&ki){yd=!0;do for(var r=!1,a=Ci;a!==null;){if(e!==0){var d=a.pendingLanes;if(d===0)var h=0;else{var v=a.suspendedLanes,M=a.pingedLanes;h=(1<<31-pt(42|e)+1)-1,h&=d&~(v&~M),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(r=!0,bg(a,h))}else h=_t,h=Te(a,a===sn?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(h&3)===0||Ke(a,h)||(r=!0,bg(a,h));a=a.next}while(r);yd=!1}}function Av(){mg()}function mg(){ki=gd=!1;var e=0;Dr!==0&&Fv()&&(e=Dr);for(var t=Le(),r=null,a=Ci;a!==null;){var d=a.next,h=gg(a,t);h===0?(a.next=null,r===null?Ci=d:r.next=d,d===null&&(Fs=r)):(r=a,(e!==0||(h&3)!==0)&&(ki=!0)),a=d}En!==0&&En!==5||Fl(e),Dr!==0&&(Dr=0)}function gg(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var v=31-pt(h),M=1<<v,q=d[v];q===-1?((M&r)===0||(M&a)!==0)&&(d[v]=Me(M,t)):q<=t&&(e.expiredLanes|=M),h&=~M}if(t=sn,r=_t,r=Te(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,r===0||e===t&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&se(a),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Ke(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(a!==null&&se(a),ft(r)){case 2:case 8:r=Se;break;case 32:r=Be;break;case 268435456:r=et;break;default:r=Be}return a=yg.bind(null,e),r=ee(r,a),e.callbackPriority=t,e.callbackNode=r,t}return a!==null&&a!==null&&se(a),e.callbackPriority=2,e.callbackNode=null,2}function yg(e,t){if(En!==0&&En!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Ni()&&e.callbackNode!==r)return null;var a=_t;return a=Te(e,e===sn?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Zm(e,a,t),gg(e,Le()),e.callbackNode!=null&&e.callbackNode===r?yg.bind(null,e):null)}function bg(e,t){if(Ni())return null;Zm(e,t,!0)}function Rv(){Wv(function(){($t&6)!==0?ee(F,Av):mg()})}function bd(){if(Dr===0){var e=Ts;e===0&&(e=be,be<<=1,(be&261888)===0&&(be=256)),Dr=e}return Dr}function xg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Rt(""+e)}function vg(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function _v(e,t,r,a,d){if(t==="submit"&&r&&r.stateNode===d){var h=xg((d[Bt]||null).action),v=a.submitter;v&&(t=(t=v[Bt]||null)?xg(t.formAction):v.getAttribute("formAction"),t!==null&&(h=t,v=null));var M=new Ba("action","action",null,a,d);e.push({event:M,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Dr!==0){var q=v?vg(d,v):new FormData(d);zc(r,{pending:!0,data:q,method:d.method,action:h},null,q)}}else typeof h=="function"&&(M.preventDefault(),q=v?vg(d,v):new FormData(d),zc(r,{pending:!0,data:q,method:d.method,action:h},h,q))},currentTarget:d}]})}}for(var xd=0;xd<tc.length;xd++){var vd=tc[xd],Dv=vd.toLowerCase(),Bv=vd[0].toUpperCase()+vd.slice(1);To(Dv,"on"+Bv)}To(Xp,"onAnimationEnd"),To(Zp,"onAnimationIteration"),To(Jp,"onAnimationStart"),To("dblclick","onDoubleClick"),To("focusin","onFocus"),To("focusout","onBlur"),To(Jx,"onTransitionRun"),To(ev,"onTransitionStart"),To(tv,"onTransitionCancel"),To(eh,"onTransitionEnd"),Ze("onMouseEnter",["mouseout","mouseover"]),Ze("onMouseLeave",["mouseout","mouseover"]),Ze("onPointerEnter",["pointerout","pointerover"]),Ze("onPointerLeave",["pointerout","pointerover"]),Fe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ql));function wg(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],d=a.event;a=a.listeners;e:{var h=void 0;if(t)for(var v=a.length-1;0<=v;v--){var M=a[v],q=M.instance,ye=M.currentTarget;if(M=M.listener,q!==h&&d.isPropagationStopped())break e;h=M,d.currentTarget=ye;try{h(d)}catch(_e){Va(_e)}d.currentTarget=null,h=q}else for(v=0;v<a.length;v++){if(M=a[v],q=M.instance,ye=M.currentTarget,M=M.listener,q!==h&&d.isPropagationStopped())break e;h=M,d.currentTarget=ye;try{h(d)}catch(_e){Va(_e)}d.currentTarget=null,h=q}}}}function At(e,t){var r=t[pn];r===void 0&&(r=t[pn]=new Set);var a=e+"__bubble";r.has(a)||(Sg(t,e,2,!1),r.add(a))}function wd(e,t,r){var a=0;t&&(a|=4),Sg(r,e,a,t)}var ji="_reactListening"+Math.random().toString(36).slice(2);function Sd(e){if(!e[ji]){e[ji]=!0,We.forEach(function(r){r!=="selectionchange"&&(zv.has(r)||wd(r,!1,e),wd(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ji]||(t[ji]=!0,wd("selectionchange",!1,t))}}function Sg(e,t,r,a){switch(Xg(t)){case 2:var d=f1;break;case 8:d=p1;break;default:d=Bd}r=d.bind(null,t,r,e),d=void 0,!Uu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),a?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function Nd(e,t,r,a,d){var h=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var v=a.tag;if(v===3||v===4){var M=a.stateNode.containerInfo;if(M===d)break;if(v===4)for(v=a.return;v!==null;){var q=v.tag;if((q===3||q===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;M!==null;){if(v=De(M),v===null)return;if(q=v.tag,q===5||q===6||q===26||q===27){a=h=v;continue e}M=M.parentNode}}a=a.return}Mp(function(){var ye=h,_e=Pr(r),He=[];e:{var ve=th.get(e);if(ve!==void 0){var je=Ba,ut=e;switch(e){case"keypress":if(_a(r)===0)break e;case"keydown":case"keyup":je=Ix;break;case"focusin":ut="focus",je=Wu;break;case"focusout":ut="blur",je=Wu;break;case"beforeblur":case"afterblur":je=Wu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=Ep;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=xx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=Rx;break;case Xp:case Zp:case Jp:je=Sx;break;case eh:je=Dx;break;case"scroll":case"scrollend":je=yx;break;case"wheel":je=zx;break;case"copy":case"cut":case"paste":je=Cx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Lp;break;case"toggle":case"beforetoggle":je=Vx}var xt=(t&4)!==0,tn=!xt&&(e==="scroll"||e==="scrollend"),ae=xt?ve!==null?ve+"Capture":null:ve;xt=[];for(var Z=ye,he;Z!==null;){var ze=Z;if(he=ze.stateNode,ze=ze.tag,ze!==5&&ze!==26&&ze!==27||he===null||ae===null||(ze=pl(Z,ae),ze!=null&&xt.push(Wl(Z,ze,he))),tn)break;Z=Z.return}0<xt.length&&(ve=new je(ve,ut,null,r,_e),He.push({event:ve,listeners:xt}))}}if((t&7)===0){e:{if(ve=e==="mouseover"||e==="pointerover",je=e==="mouseout"||e==="pointerout",ve&&r!==fl&&(ut=r.relatedTarget||r.fromElement)&&(De(ut)||ut[dn]))break e;if((je||ve)&&(ve=_e.window===_e?_e:(ve=_e.ownerDocument)?ve.defaultView||ve.parentWindow:window,je?(ut=r.relatedTarget||r.toElement,je=ye,ut=ut?De(ut):null,ut!==null&&(tn=c(ut),xt=ut.tag,ut!==tn||xt!==5&&xt!==27&&xt!==6)&&(ut=null)):(je=null,ut=ye),je!==ut)){if(xt=Ep,ze="onMouseLeave",ae="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(xt=Lp,ze="onPointerLeave",ae="onPointerEnter",Z="pointer"),tn=je==null?ve:Je(je),he=ut==null?ve:Je(ut),ve=new xt(ze,Z+"leave",je,r,_e),ve.target=tn,ve.relatedTarget=he,ze=null,De(_e)===ye&&(xt=new xt(ae,Z+"enter",ut,r,_e),xt.target=he,xt.relatedTarget=tn,ze=xt),tn=ze,je&&ut)t:{for(xt=Hv,ae=je,Z=ut,he=0,ze=ae;ze;ze=xt(ze))he++;ze=0;for(var ht=Z;ht;ht=xt(ht))ze++;for(;0<he-ze;)ae=xt(ae),he--;for(;0<ze-he;)Z=xt(Z),ze--;for(;he--;){if(ae===Z||Z!==null&&ae===Z.alternate){xt=ae;break t}ae=xt(ae),Z=xt(Z)}xt=null}else xt=null;je!==null&&Ng(He,ve,je,xt,!1),ut!==null&&tn!==null&&Ng(He,tn,ut,xt,!0)}}e:{if(ve=ye?Je(ye):window,je=ve.nodeName&&ve.nodeName.toLowerCase(),je==="select"||je==="input"&&ve.type==="file")var Vt=Vp;else if(zp(ve))if(Kp)Vt=Qx;else{Vt=Px;var ct=Gx}else je=ve.nodeName,!je||je.toLowerCase()!=="input"||ve.type!=="checkbox"&&ve.type!=="radio"?ye&&dt(ye.elementType)&&(Vt=Vp):Vt=Yx;if(Vt&&(Vt=Vt(e,ye))){Hp(He,Vt,r,_e);break e}ct&&ct(e,ve,ye),e==="focusout"&&ye&&ve.type==="number"&&ye.memoizedProps.value!=null&&ys(ve,"number",ve.value)}switch(ct=ye?Je(ye):window,e){case"focusin":(zp(ct)||ct.contentEditable==="true")&&(ws=ct,Zu=ye,wl=null);break;case"focusout":wl=Zu=ws=null;break;case"mousedown":Ju=!0;break;case"contextmenu":case"mouseup":case"dragend":Ju=!1,Yp(He,r,_e);break;case"selectionchange":if(Zx)break;case"keydown":case"keyup":Yp(He,r,_e)}var Tt;if(Pu)e:{switch(e){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else vs?Dp(e,r)&&(Dt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Dt="onCompositionStart");Dt&&(Ap&&r.locale!=="ko"&&(vs||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&vs&&(Tt=Op()):(vr=_e,$u="value"in vr?vr.value:vr.textContent,vs=!0)),ct=Mi(ye,Dt),0<ct.length&&(Dt=new Ip(Dt,e,null,r,_e),He.push({event:Dt,listeners:ct}),Tt?Dt.data=Tt:(Tt=Bp(r),Tt!==null&&(Dt.data=Tt)))),(Tt=Ux?$x(e,r):Fx(e,r))&&(Dt=Mi(ye,"onBeforeInput"),0<Dt.length&&(ct=new Ip("onBeforeInput","beforeinput",null,r,_e),He.push({event:ct,listeners:Dt}),ct.data=Tt)),_v(He,e,ye,r,_e)}wg(He,t)})}function Wl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Mi(e,t){for(var r=t+"Capture",a=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=pl(e,r),d!=null&&a.unshift(Wl(e,d,h)),d=pl(e,t),d!=null&&a.push(Wl(e,d,h))),e.tag===3)return a;e=e.return}return[]}function Hv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ng(e,t,r,a,d){for(var h=t._reactName,v=[];r!==null&&r!==a;){var M=r,q=M.alternate,ye=M.stateNode;if(M=M.tag,q!==null&&q===a)break;M!==5&&M!==26&&M!==27||ye===null||(q=ye,d?(ye=pl(r,h),ye!=null&&v.unshift(Wl(r,ye,q))):d||(ye=pl(r,h),ye!=null&&v.push(Wl(r,ye,q)))),r=r.return}v.length!==0&&e.push({event:t,listeners:v})}var Vv=/\r\n?/g,Kv=/\u0000|\uFFFD/g;function Cg(e){return(typeof e=="string"?e:""+e).replace(Vv,`
`).replace(Kv,"")}function kg(e,t){return t=Cg(t),Cg(e)===t}function en(e,t,r,a,d,h){switch(r){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||xr(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&xr(e,""+a);break;case"className":Tn(e,"class",a);break;case"tabIndex":Tn(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(e,r,a);break;case"style":ot(e,a,h);break;case"data":if(t!=="object"){Tn(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(r);break}a=Rt(""+a),e.setAttribute(r,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(r==="formAction"?(t!=="input"&&en(e,t,"name",d.name,d,null),en(e,t,"formEncType",d.formEncType,d,null),en(e,t,"formMethod",d.formMethod,d,null),en(e,t,"formTarget",d.formTarget,d,null)):(en(e,t,"encType",d.encType,d,null),en(e,t,"method",d.method,d,null),en(e,t,"target",d.target,d,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(r);break}a=Rt(""+a),e.setAttribute(r,a);break;case"onClick":a!=null&&(e.onclick=yo);break;case"onScroll":a!=null&&At("scroll",e);break;case"onScrollEnd":a!=null&&At("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(l(61));if(r=a.__html,r!=null){if(d.children!=null)throw Error(l(60));e.innerHTML=r}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}r=Rt(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(r,""+a):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":a===!0?e.setAttribute(r,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(r,a):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(r,a):e.removeAttribute(r);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(r):e.setAttribute(r,a);break;case"popover":At("beforetoggle",e),At("toggle",e),rn(e,"popover",a);break;case"xlinkActuate":xn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":xn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":xn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":xn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":xn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":xn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":xn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":xn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":xn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":rn(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=an.get(r)||r,rn(e,r,a))}}function Cd(e,t,r,a,d,h){switch(r){case"style":ot(e,a,h);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(l(61));if(r=a.__html,r!=null){if(d.children!=null)throw Error(l(60));e.innerHTML=r}}break;case"children":typeof a=="string"?xr(e,a):(typeof a=="number"||typeof a=="bigint")&&xr(e,""+a);break;case"onScroll":a!=null&&At("scroll",e);break;case"onScrollEnd":a!=null&&At("scrollend",e);break;case"onClick":a!=null&&(e.onclick=yo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ne.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),t=r.slice(2,d?r.length-7:void 0),h=e[Bt]||null,h=h!=null?h[r]:null,typeof h=="function"&&e.removeEventListener(t,h,d),typeof a=="function")){typeof h!="function"&&h!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,a,d);break e}r in e?e[r]=a:a===!0?e.setAttribute(r,""):rn(e,r,a)}}}function _n(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",e),At("load",e);var a=!1,d=!1,h;for(h in r)if(r.hasOwnProperty(h)){var v=r[h];if(v!=null)switch(h){case"src":a=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:en(e,t,h,v,r,null)}}d&&en(e,t,"srcSet",r.srcSet,r,null),a&&en(e,t,"src",r.src,r,null);return;case"input":At("invalid",e);var M=h=v=d=null,q=null,ye=null;for(a in r)if(r.hasOwnProperty(a)){var _e=r[a];if(_e!=null)switch(a){case"name":d=_e;break;case"type":v=_e;break;case"checked":q=_e;break;case"defaultChecked":ye=_e;break;case"value":h=_e;break;case"defaultValue":M=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(l(137,t));break;default:en(e,t,a,_e,r,null)}}Ia(e,h,M,q,ye,v,d,!1);return;case"select":At("invalid",e),a=v=h=null;for(d in r)if(r.hasOwnProperty(d)&&(M=r[d],M!=null))switch(d){case"value":h=M;break;case"defaultValue":v=M;break;case"multiple":a=M;default:en(e,t,d,M,r,null)}t=h,r=v,e.multiple=!!a,t!=null?ro(e,!!a,t,!1):r!=null&&ro(e,!!a,r,!0);return;case"textarea":At("invalid",e),h=d=a=null;for(v in r)if(r.hasOwnProperty(v)&&(M=r[v],M!=null))switch(v){case"value":a=M;break;case"defaultValue":d=M;break;case"children":h=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(l(91));break;default:en(e,t,v,M,r,null)}Aa(e,a,d,h);return;case"option":for(q in r)r.hasOwnProperty(q)&&(a=r[q],a!=null)&&(q==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":en(e,t,q,a,r,null));return;case"dialog":At("beforetoggle",e),At("toggle",e),At("cancel",e),At("close",e);break;case"iframe":case"object":At("load",e);break;case"video":case"audio":for(a=0;a<ql.length;a++)At(ql[a],e);break;case"image":At("error",e),At("load",e);break;case"details":At("toggle",e);break;case"embed":case"source":case"link":At("error",e),At("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ye in r)if(r.hasOwnProperty(ye)&&(a=r[ye],a!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:en(e,t,ye,a,r,null)}return;default:if(dt(t)){for(_e in r)r.hasOwnProperty(_e)&&(a=r[_e],a!==void 0&&Cd(e,t,_e,a,r,void 0));return}}for(M in r)r.hasOwnProperty(M)&&(a=r[M],a!=null&&en(e,t,M,a,r,null))}function Uv(e,t,r,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,v=null,M=null,q=null,ye=null,_e=null;for(je in r){var He=r[je];if(r.hasOwnProperty(je)&&He!=null)switch(je){case"checked":break;case"value":break;case"defaultValue":q=He;default:a.hasOwnProperty(je)||en(e,t,je,null,a,He)}}for(var ve in a){var je=a[ve];if(He=r[ve],a.hasOwnProperty(ve)&&(je!=null||He!=null))switch(ve){case"type":h=je;break;case"name":d=je;break;case"checked":ye=je;break;case"defaultChecked":_e=je;break;case"value":v=je;break;case"defaultValue":M=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(l(137,t));break;default:je!==He&&en(e,t,ve,je,a,He)}}dl(e,v,M,q,ye,_e,h,d);return;case"select":je=v=M=ve=null;for(h in r)if(q=r[h],r.hasOwnProperty(h)&&q!=null)switch(h){case"value":break;case"multiple":je=q;default:a.hasOwnProperty(h)||en(e,t,h,null,a,q)}for(d in a)if(h=a[d],q=r[d],a.hasOwnProperty(d)&&(h!=null||q!=null))switch(d){case"value":ve=h;break;case"defaultValue":M=h;break;case"multiple":v=h;default:h!==q&&en(e,t,d,h,a,q)}t=M,r=v,a=je,ve!=null?ro(e,!!r,ve,!1):!!a!=!!r&&(t!=null?ro(e,!!r,t,!0):ro(e,!!r,r?[]:"",!1));return;case"textarea":je=ve=null;for(M in r)if(d=r[M],r.hasOwnProperty(M)&&d!=null&&!a.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:en(e,t,M,null,a,d)}for(v in a)if(d=a[v],h=r[v],a.hasOwnProperty(v)&&(d!=null||h!=null))switch(v){case"value":ve=d;break;case"defaultValue":je=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(l(91));break;default:d!==h&&en(e,t,v,d,a,h)}La(e,ve,je);return;case"option":for(var ut in r)ve=r[ut],r.hasOwnProperty(ut)&&ve!=null&&!a.hasOwnProperty(ut)&&(ut==="selected"?e.selected=!1:en(e,t,ut,null,a,ve));for(q in a)ve=a[q],je=r[q],a.hasOwnProperty(q)&&ve!==je&&(ve!=null||je!=null)&&(q==="selected"?e.selected=ve&&typeof ve!="function"&&typeof ve!="symbol":en(e,t,q,ve,a,je));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xt in r)ve=r[xt],r.hasOwnProperty(xt)&&ve!=null&&!a.hasOwnProperty(xt)&&en(e,t,xt,null,a,ve);for(ye in a)if(ve=a[ye],je=r[ye],a.hasOwnProperty(ye)&&ve!==je&&(ve!=null||je!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(l(137,t));break;default:en(e,t,ye,ve,a,je)}return;default:if(dt(t)){for(var tn in r)ve=r[tn],r.hasOwnProperty(tn)&&ve!==void 0&&!a.hasOwnProperty(tn)&&Cd(e,t,tn,void 0,a,ve);for(_e in a)ve=a[_e],je=r[_e],!a.hasOwnProperty(_e)||ve===je||ve===void 0&&je===void 0||Cd(e,t,_e,ve,a,je);return}}for(var ae in r)ve=r[ae],r.hasOwnProperty(ae)&&ve!=null&&!a.hasOwnProperty(ae)&&en(e,t,ae,null,a,ve);for(He in a)ve=a[He],je=r[He],!a.hasOwnProperty(He)||ve===je||ve==null&&je==null||en(e,t,He,ve,a,je)}function jg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $v(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,r=performance.getEntriesByType("resource"),a=0;a<r.length;a++){var d=r[a],h=d.transferSize,v=d.initiatorType,M=d.duration;if(h&&M&&jg(v)){for(v=0,M=d.responseEnd,a+=1;a<r.length;a++){var q=r[a],ye=q.startTime;if(ye>M)break;var _e=q.transferSize,He=q.initiatorType;_e&&jg(He)&&(q=q.responseEnd,v+=_e*(q<M?1:(M-ye)/(q-ye)))}if(--a,t+=8*(h+v)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var kd=null,jd=null;function Oi(e){return e.nodeType===9?e:e.ownerDocument}function Mg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Og(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Md(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Od=null;function Fv(){var e=window.event;return e&&e.type==="popstate"?e===Od?!1:(Od=e,!0):(Od=null,!1)}var Tg=typeof setTimeout=="function"?setTimeout:void 0,qv=typeof clearTimeout=="function"?clearTimeout:void 0,Eg=typeof Promise=="function"?Promise:void 0,Wv=typeof queueMicrotask=="function"?queueMicrotask:typeof Eg<"u"?function(e){return Eg.resolve(null).then(e).catch(Gv)}:Tg;function Gv(e){setTimeout(function(){throw e})}function Br(e){return e==="head"}function Ig(e,t){var r=t,a=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"||r==="/&"){if(a===0){e.removeChild(d),Ps(t);return}a--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")a++;else if(r==="html")Gl(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Gl(r);for(var h=r.firstChild;h;){var v=h.nextSibling,M=h.nodeName;h[oo]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&h.rel.toLowerCase()==="stylesheet"||r.removeChild(h),h=v}}else r==="body"&&Gl(e.ownerDocument.body);r=d}while(r);Ps(t)}function Lg(e,t){var r=e;e=0;do{var a=r.nextSibling;if(r.nodeType===1?t?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(t?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=a}while(r)}function Td(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Td(r),P(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Pv(e,t,r,a){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[oo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Co(e.nextSibling),e===null)break}return null}function Yv(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Co(e.nextSibling),e===null))return null;return e}function Ag(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Co(e.nextSibling),e===null))return null;return e}function Ed(e){return e.data==="$?"||e.data==="$~"}function Id(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Qv(e,t){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||r.readyState!=="loading")t();else{var a=function(){t(),r.removeEventListener("DOMContentLoaded",a)};r.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Co(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ld=null;function Rg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(t===0)return Co(e.nextSibling);t--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||t++}e=e.nextSibling}return null}function _g(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(t===0)return e;t--}else r!=="/$"&&r!=="/&"||t++}e=e.previousSibling}return null}function Dg(e,t,r){switch(t=Oi(r),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Gl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);P(e)}var ko=new Map,Bg=new Set;function Ti(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var cr=le.d;le.d={f:Xv,r:Zv,D:Jv,C:e1,L:t1,m:n1,X:r1,S:o1,M:s1};function Xv(){var e=cr.f(),t=vi();return e||t}function Zv(e){var t=oe(e);t!==null&&t.tag===5&&t.type==="form"?em(t):cr.r(e)}var qs=typeof document>"u"?null:document;function zg(e,t,r){var a=qs;if(a&&typeof t=="string"&&t){var d=Bn(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),Bg.has(d)||(Bg.add(d),e={rel:e,crossOrigin:r,href:t},a.querySelector(d)===null&&(t=a.createElement("link"),_n(t,"link",e),Qe(t),a.head.appendChild(t)))}}function Jv(e){cr.D(e),zg("dns-prefetch",e,null)}function e1(e,t){cr.C(e,t),zg("preconnect",e,t)}function t1(e,t,r){cr.L(e,t,r);var a=qs;if(a&&e&&t){var d='link[rel="preload"][as="'+Bn(t)+'"]';t==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+Bn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+Bn(r.imageSizes)+'"]')):d+='[href="'+Bn(e)+'"]';var h=d;switch(t){case"style":h=Ws(e);break;case"script":h=Gs(e)}ko.has(h)||(e=x({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),ko.set(h,e),a.querySelector(d)!==null||t==="style"&&a.querySelector(Pl(h))||t==="script"&&a.querySelector(Yl(h))||(t=a.createElement("link"),_n(t,"link",e),Qe(t),a.head.appendChild(t)))}}function n1(e,t){cr.m(e,t);var r=qs;if(r&&e){var a=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Bn(a)+'"][href="'+Bn(e)+'"]',h=d;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Gs(e)}if(!ko.has(h)&&(e=x({rel:"modulepreload",href:e},t),ko.set(h,e),r.querySelector(d)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Yl(h)))return}a=r.createElement("link"),_n(a,"link",e),Qe(a),r.head.appendChild(a)}}}function o1(e,t,r){cr.S(e,t,r);var a=qs;if(a&&e){var d=Xe(a).hoistableStyles,h=Ws(e);t=t||"default";var v=d.get(h);if(!v){var M={loading:0,preload:null};if(v=a.querySelector(Pl(h)))M.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},r),(r=ko.get(h))&&Ad(e,r);var q=v=a.createElement("link");Qe(q),_n(q,"link",e),q._p=new Promise(function(ye,_e){q.onload=ye,q.onerror=_e}),q.addEventListener("load",function(){M.loading|=1}),q.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Ei(v,t,a)}v={type:"stylesheet",instance:v,count:1,state:M},d.set(h,v)}}}function r1(e,t){cr.X(e,t);var r=qs;if(r&&e){var a=Xe(r).hoistableScripts,d=Gs(e),h=a.get(d);h||(h=r.querySelector(Yl(d)),h||(e=x({src:e,async:!0},t),(t=ko.get(d))&&Rd(e,t),h=r.createElement("script"),Qe(h),_n(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},a.set(d,h))}}function s1(e,t){cr.M(e,t);var r=qs;if(r&&e){var a=Xe(r).hoistableScripts,d=Gs(e),h=a.get(d);h||(h=r.querySelector(Yl(d)),h||(e=x({src:e,async:!0,type:"module"},t),(t=ko.get(d))&&Rd(e,t),h=r.createElement("script"),Qe(h),_n(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},a.set(d,h))}}function Hg(e,t,r,a){var d=(d=pe.current)?Ti(d):null;if(!d)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=Ws(r.href),r=Xe(d).hoistableStyles,a=r.get(t),a||(a={type:"style",instance:null,count:0,state:null},r.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Ws(r.href);var h=Xe(d).hoistableStyles,v=h.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,v),(h=d.querySelector(Pl(e)))&&!h._p&&(v.instance=h,v.state.loading=5),ko.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ko.set(e,r),h||l1(d,e,r,v.state))),t&&a===null)throw Error(l(528,""));return v}if(t&&a!==null)throw Error(l(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Gs(r),r=Xe(d).hoistableScripts,a=r.get(t),a||(a={type:"script",instance:null,count:0,state:null},r.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Ws(e){return'href="'+Bn(e)+'"'}function Pl(e){return'link[rel="stylesheet"]['+e+"]"}function Vg(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function l1(e,t,r,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),_n(t,"link",r),Qe(t),e.head.appendChild(t))}function Gs(e){return'[src="'+Bn(e)+'"]'}function Yl(e){return"script[async]"+e}function Kg(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Bn(r.href)+'"]');if(a)return t.instance=a,Qe(a),a;var d=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Qe(a),_n(a,"style",d),Ei(a,r.precedence,e),t.instance=a;case"stylesheet":d=Ws(r.href);var h=e.querySelector(Pl(d));if(h)return t.state.loading|=4,t.instance=h,Qe(h),h;a=Vg(r),(d=ko.get(d))&&Ad(a,d),h=(e.ownerDocument||e).createElement("link"),Qe(h);var v=h;return v._p=new Promise(function(M,q){v.onload=M,v.onerror=q}),_n(h,"link",a),t.state.loading|=4,Ei(h,r.precedence,e),t.instance=h;case"script":return h=Gs(r.src),(d=e.querySelector(Yl(h)))?(t.instance=d,Qe(d),d):(a=r,(d=ko.get(h))&&(a=x({},r),Rd(a,d)),e=e.ownerDocument||e,d=e.createElement("script"),Qe(d),_n(d,"link",a),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Ei(a,r.precedence,e));return t.instance}function Ei(e,t,r){for(var a=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=a.length?a[a.length-1]:null,h=d,v=0;v<a.length;v++){var M=a[v];if(M.dataset.precedence===t)h=M;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function Ad(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Rd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ii=null;function Ug(e,t,r){if(Ii===null){var a=new Map,d=Ii=new Map;d.set(r,a)}else d=Ii,a=d.get(r),a||(a=new Map,d.set(r,a));if(a.has(e))return a;for(a.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var h=r[d];if(!(h[oo]||h[Gt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var v=h.getAttribute(t)||"";v=e+v;var M=a.get(v);M?M.push(h):a.set(v,[h])}}return a}function $g(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function a1(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Fg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function i1(e,t,r,a){if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=Ws(a.href),h=t.querySelector(Pl(d));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Li.bind(e),t.then(e,e)),r.state.loading|=4,r.instance=h,Qe(h);return}h=t.ownerDocument||t,a=Vg(a),(d=ko.get(d))&&Ad(a,d),h=h.createElement("link"),Qe(h);var v=h;v._p=new Promise(function(M,q){v.onload=M,v.onerror=q}),_n(h,"link",a),r.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Li.bind(e),t.addEventListener("load",r),t.addEventListener("error",r))}}var _d=0;function u1(e,t){return e.stylesheets&&e.count===0&&Ri(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var a=setTimeout(function(){if(e.stylesheets&&Ri(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&_d===0&&(_d=62500*$v());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ri(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>_d?50:800)+t);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(d)}}:null}function Li(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ri(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ai=null;function Ri(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ai=new Map,t.forEach(c1,e),Ai=null,Li.call(e))}function c1(e,t){if(!(t.state.loading&4)){var r=Ai.get(e);if(r)var a=r.get(null);else{r=new Map,Ai.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var v=d[h];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),a=v)}a&&r.set(null,a)}d=t.instance,v=d.getAttribute("data-precedence"),h=r.get(v)||a,h===a&&r.set(null,d),r.set(v,d),this.count++,a=Li.bind(this),d.addEventListener("load",a),d.addEventListener("error",a),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var Ql={$$typeof:H,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function d1(e,t,r,a,d,h,v,M,q){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tt(0),this.hiddenUpdates=tt(null),this.identifierPrefix=a,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function qg(e,t,r,a,d,h,v,M,q,ye,_e,He){return e=new d1(e,t,r,v,q,ye,_e,He,M),t=1,h===!0&&(t|=24),h=lo(3,null,null,t),e.current=h,h.stateNode=e,t=hc(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:a,isDehydrated:r,cache:t},bc(h),e}function Wg(e){return e?(e=Cs,e):Cs}function Gg(e,t,r,a,d,h){d=Wg(d),a.context===null?a.context=d:a.pendingContext=d,a=jr(t),a.payload={element:r},h=h===void 0?null:h,h!==null&&(a.callback=h),r=Mr(e,a,t),r!==null&&(Zn(r,e,t),Ol(r,e,t))}function Pg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Dd(e,t){Pg(e,t),(e=e.alternate)&&Pg(e,t)}function Yg(e){if(e.tag===13||e.tag===31){var t=Zr(e,67108864);t!==null&&Zn(t,e,67108864),Dd(e,67108864)}}function Qg(e){if(e.tag===13||e.tag===31){var t=fo();t=yt(t);var r=Zr(e,t);r!==null&&Zn(r,e,t),Dd(e,t)}}var _i=!0;function f1(e,t,r,a){var d=B.T;B.T=null;var h=le.p;try{le.p=2,Bd(e,t,r,a)}finally{le.p=h,B.T=d}}function p1(e,t,r,a){var d=B.T;B.T=null;var h=le.p;try{le.p=8,Bd(e,t,r,a)}finally{le.p=h,B.T=d}}function Bd(e,t,r,a){if(_i){var d=zd(a);if(d===null)Nd(e,t,a,Di,r),Zg(e,a);else if(m1(d,e,t,r,a))a.stopPropagation();else if(Zg(e,a),t&4&&-1<h1.indexOf(e)){for(;d!==null;){var h=oe(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var v=ge(h.pendingLanes);if(v!==0){var M=h;for(M.pendingLanes|=2,M.entangledLanes|=2;v;){var q=1<<31-pt(v);M.entanglements[1]|=q,v&=~q}Vo(h),($t&6)===0&&(bi=Le()+500,Fl(0))}}break;case 31:case 13:M=Zr(h,2),M!==null&&Zn(M,h,2),vi(),Dd(h,2)}if(h=zd(a),h===null&&Nd(e,t,a,Di,r),h===d)break;d=h}d!==null&&a.stopPropagation()}else Nd(e,t,a,null,r)}}function zd(e){return e=Pr(e),Hd(e)}var Di=null;function Hd(e){if(Di=null,e=De(e),e!==null){var t=c(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=f(t),e!==null)return e;e=null}else if(r===31){if(e=m(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Di=e,null}function Xg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ve()){case F:return 2;case Se:return 8;case Be:case Ge:return 32;case et:return 268435456;default:return 32}default:return 32}}var Vd=!1,zr=null,Hr=null,Vr=null,Xl=new Map,Zl=new Map,Kr=[],h1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zg(e,t){switch(e){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":Xl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(t.pointerId)}}function Jl(e,t,r,a,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:h,targetContainers:[d]},t!==null&&(t=oe(t),t!==null&&Yg(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function m1(e,t,r,a,d){switch(t){case"focusin":return zr=Jl(zr,e,t,r,a,d),!0;case"dragenter":return Hr=Jl(Hr,e,t,r,a,d),!0;case"mouseover":return Vr=Jl(Vr,e,t,r,a,d),!0;case"pointerover":var h=d.pointerId;return Xl.set(h,Jl(Xl.get(h)||null,e,t,r,a,d)),!0;case"gotpointercapture":return h=d.pointerId,Zl.set(h,Jl(Zl.get(h)||null,e,t,r,a,d)),!0}return!1}function Jg(e){var t=De(e.target);if(t!==null){var r=c(t);if(r!==null){if(t=r.tag,t===13){if(t=f(r),t!==null){e.blockedOn=t,Ot(e.priority,function(){Qg(r)});return}}else if(t===31){if(t=m(r),t!==null){e.blockedOn=t,Ot(e.priority,function(){Qg(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=zd(e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);fl=a,r.target.dispatchEvent(a),fl=null}else return t=oe(r),t!==null&&Yg(t),e.blockedOn=r,!1;t.shift()}return!0}function e0(e,t,r){Bi(e)&&r.delete(t)}function g1(){Vd=!1,zr!==null&&Bi(zr)&&(zr=null),Hr!==null&&Bi(Hr)&&(Hr=null),Vr!==null&&Bi(Vr)&&(Vr=null),Xl.forEach(e0),Zl.forEach(e0)}function zi(e,t){e.blockedOn===t&&(e.blockedOn=null,Vd||(Vd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,g1)))}var Hi=null;function t0(e){Hi!==e&&(Hi=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Hi===e&&(Hi=null);for(var t=0;t<e.length;t+=3){var r=e[t],a=e[t+1],d=e[t+2];if(typeof a!="function"){if(Hd(a||r)===null)continue;break}var h=oe(r);h!==null&&(e.splice(t,3),t-=3,zc(h,{pending:!0,data:d,method:r.method,action:a},a,d))}}))}function Ps(e){function t(q){return zi(q,e)}zr!==null&&zi(zr,e),Hr!==null&&zi(Hr,e),Vr!==null&&zi(Vr,e),Xl.forEach(t),Zl.forEach(t);for(var r=0;r<Kr.length;r++){var a=Kr[r];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Kr.length&&(r=Kr[0],r.blockedOn===null);)Jg(r),r.blockedOn===null&&Kr.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(a=0;a<r.length;a+=3){var d=r[a],h=r[a+1],v=d[Bt]||null;if(typeof h=="function")v||t0(r);else if(v){var M=null;if(h&&h.hasAttribute("formAction")){if(d=h,v=h[Bt]||null)M=v.formAction;else if(Hd(d)!==null)continue}else M=v.action;typeof M=="function"?r[a+1]=M:(r.splice(a,3),a-=3),t0(r)}}}function n0(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),a||setTimeout(r,20)}function r(){if(!a&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(r,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function Kd(e){this._internalRoot=e}Vi.prototype.render=Kd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var r=t.current,a=fo();Gg(r,a,e,t,null,null)},Vi.prototype.unmount=Kd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gg(e.current,2,null,e,null,null),vi(),t[dn]=null}};function Vi(e){this._internalRoot=e}Vi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Kr.length&&t!==0&&t<Kr[r].priority;r++);Kr.splice(r,0,e),r===0&&Jg(e)}};var o0=o.version;if(o0!=="19.2.3")throw Error(l(527,o0,"19.2.3"));le.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=g(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var y1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ki=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ki.isDisabled&&Ki.supportsFiber)try{Pe=Ki.inject(y1),qe=Ki}catch{}}return ta.createRoot=function(e,t){if(!i(e))throw Error(l(299));var r=!1,a="",d=cm,h=dm,v=fm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=qg(e,1,!1,null,null,r,a,null,d,h,v,n0),e[dn]=t.current,Sd(e),new Kd(t)},ta.hydrateRoot=function(e,t,r){if(!i(e))throw Error(l(299));var a=!1,d="",h=cm,v=dm,M=fm,q=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(M=r.onRecoverableError),r.formState!==void 0&&(q=r.formState)),t=qg(e,1,!0,t,r??null,a,d,q,h,v,M,n0),t.context=Wg(null),r=t.current,a=fo(),a=yt(a),d=jr(a),d.callback=null,Mr(r,d,a),r=a,t.current.lanes=r,nt(t,r),Vo(t),e[dn]=t.current,Sd(e),new Vi(t)},ta.version="19.2.3",ta}var h0;function O1(){if(h0)return Fd.exports;h0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(o){console.error(o)}}return n(),Fd.exports=M1(),Fd.exports}var T1=O1();const m0=n=>{let o;const s=new Set,l=(g,b)=>{const x=typeof g=="function"?g(o):g;if(!Object.is(x,o)){const w=o;o=b??(typeof x!="object"||x===null)?x:Object.assign({},o,x),s.forEach(k=>k(o,w))}},i=()=>o,m={setState:l,getState:i,getInitialState:()=>p,subscribe:g=>(s.add(g),()=>s.delete(g))},p=o=n(l,i,m);return m},E1=(n=>n?m0(n):m0),I1=n=>n;function L1(n,o=I1){const s=Js.useSyncExternalStore(n.subscribe,Js.useCallback(()=>o(n.getState()),[n,o]),Js.useCallback(()=>o(n.getInitialState()),[n,o]));return Js.useDebugValue(s),s}const g0=n=>{const o=E1(n),s=l=>L1(o,l);return Object.assign(s,o),s},Oo=(n=>n?g0(n):g0);function gr(n,o){let s;try{s=n()}catch{return}return{getItem:i=>{var c;const f=p=>p===null?null:JSON.parse(p,void 0),m=(c=s.getItem(i))!=null?c:null;return m instanceof Promise?m.then(f):f(m)},setItem:(i,c)=>s.setItem(i,JSON.stringify(c,void 0)),removeItem:i=>s.removeItem(i)}}const wf=n=>o=>{try{const s=n(o);return s instanceof Promise?s:{then(l){return wf(l)(s)},catch(l){return this}}}catch(s){return{then(l){return this},catch(l){return wf(l)(s)}}}},A1=(n,o)=>(s,l,i)=>{let c={storage:gr(()=>localStorage),partialize:S=>S,version:0,merge:(S,j)=>({...j,...S}),...o},f=!1;const m=new Set,p=new Set;let g=c.storage;if(!g)return n((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),s(...S)},l,i);const b=()=>{const S=c.partialize({...l()});return g.setItem(c.name,{state:S,version:c.version})},x=i.setState;i.setState=(S,j)=>(x(S,j),b());const w=n((...S)=>(s(...S),b()),l,i);i.getInitialState=()=>w;let k;const C=()=>{var S,j;if(!g)return;f=!1,m.forEach(E=>{var H;return E((H=l())!=null?H:w)});const N=((j=c.onRehydrateStorage)==null?void 0:j.call(c,(S=l())!=null?S:w))||void 0;return wf(g.getItem.bind(g))(c.name).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==c.version){if(c.migrate){const H=c.migrate(E.state,E.version);return H instanceof Promise?H.then(V=>[!0,V]):[!0,H]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,E.state];return[!1,void 0]}).then(E=>{var H;const[V,L]=E;if(k=c.merge(L,(H=l())!=null?H:w),s(k,!0),V)return b()}).then(()=>{N?.(k,void 0),k=l(),f=!0,p.forEach(E=>E(k))}).catch(E=>{N?.(void 0,E)})};return i.persist={setOptions:S=>{c={...c,...S},S.storage&&(g=S.storage)},clearStorage:()=>{g?.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>C(),hasHydrated:()=>f,onHydrate:S=>(m.add(S),()=>{m.delete(S)}),onFinishHydration:S=>(p.add(S),()=>{p.delete(S)})},c.skipHydration||C(),k||w},yr=A1,Mo=Oo()(n=>({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0},setViewerState:o=>{n(s=>{const l={viewerOpen:o.viewerOpen??s.viewerOpen,viewerImages:o.viewerImages??s.viewerImages,viewerIndex:o.viewerIndex??s.viewerIndex,viewerScale:o.viewerScale??s.viewerScale,viewerTranslate:o.viewerTranslate??s.viewerTranslate};return l.viewerOpen===s.viewerOpen&&l.viewerIndex===s.viewerIndex&&l.viewerScale===s.viewerScale&&l.viewerTranslate.x===s.viewerTranslate.x&&l.viewerTranslate.y===s.viewerTranslate.y&&l.viewerImages===s.viewerImages?s:{...s,...l}})}})),ln=Oo()(yr(n=>({error:null,nodeErrors:{},errorCycleIndex:0,errorsDismissed:!1,setError:o=>{n({error:o,errorsDismissed:!1})},setNodeErrors:o=>{n({nodeErrors:o,errorCycleIndex:0,errorsDismissed:!1})},clearNodeErrors:()=>{n({error:null,nodeErrors:{},errorCycleIndex:0,errorsDismissed:!1})},clearNodeError:o=>{n(s=>{const l={...s.nodeErrors};return delete l[String(o)],{nodeErrors:l}})},setErrorCycleIndex:o=>{n({errorCycleIndex:o})},setErrorsDismissed:o=>{n({errorsDismissed:o})}}),{name:"workflow-errors-storage",storage:gr(()=>localStorage),partialize:n=>({error:n.error,nodeErrors:n.nodeErrors,errorCycleIndex:n.errorCycleIndex,errorsDismissed:n.errorsDismissed}),onRehydrateStorage:()=>n=>{if(!n)return;const o=Object.values(n.nodeErrors||{}).reduce((s,l)=>s+l.length,0);o>0&&!n.error&&n.setError(`Workflow load error: ${o} input${o===1?"":"s"} reference missing options.`),o>0&&n.setErrorCycleIndex(0)}}));function Fy(n){return!!n&&typeof n=="object"&&!Array.isArray(n)}function R1(n){if(!(!String(n.type||"").startsWith("Primitive")&&n.type!=="PrimitiveNode")){if(Array.isArray(n.widgets_values))return n.widgets_values[0];if(Fy(n.widgets_values)){const s=n.widgets_values.value;return s!==void 0?s:n.widgets_values[0]}}}function ua(n,o,s){const l=n.widgets_values;if(Array.isArray(l))return s===void 0||s<0||s>=l.length?void 0:l[s];if(Fy(l)){if(l[o]!==void 0)return l[o];if(n.type==="VHS_VideoCombine"&&o==="save_image"&&l.save_output!==void 0)return l.save_output}}function Gf(n,o){const s=n.widget_idx_map?.[String(o)];return s||(n.extra?.widget_idx_map?.[String(o)]??null)}function Tu(n){if(Array.isArray(n))return!0;const o=String(n).toUpperCase();return o==="INT"||o==="FLOAT"||o==="BOOLEAN"||o==="STRING"}function Pf(n,o,s){if(Array.isArray(o)){if(s?.comboIndexToValue&&typeof n=="number"&&Number.isFinite(n)){const l=Math.trunc(n);return o[l]??n}return n}if(o==="INT"&&typeof n=="string"&&n.trim()!==""&&!Number.isNaN(Number(n)))return Math.trunc(Number(n));if(o==="FLOAT"&&typeof n=="string"&&n.trim()!==""&&!Number.isNaN(Number(n)))return Number(n);if(o==="BOOLEAN"&&typeof n=="string"){if(n.toLowerCase()==="true")return!0;if(n.toLowerCase()==="false")return!1}return n}function _1(n,o,s){if(o.length===0)return n;const l=Pf(n,o,{comboIndexToValue:!0}),i=String(l),c=i.split(/[\\/]/).pop()??i,f=o.find(p=>String(p)===i);if(f!==void 0)return f;const m=o.find(p=>String(p)===c);return m!==void 0?m:s!==void 0&&o.some(p=>String(p)===String(s))?s:o[0]}function qy(n,o){const s=n.links.find(f=>f[0]===o);if(!s)return null;const l=s[1],i=s[2],c=n.nodes.find(f=>f.id===l);if(!c)return null;if(c.mode===4||c.type==="Reroute"){const f=c.outputs[i];if(!f)return null;const m=c.inputs.find(p=>{if(p.link===null)return!1;const g=String(p.type).toUpperCase(),b=String(f.type).toUpperCase();return g===b||g==="*"||b==="*"});return m?.link!=null?qy(n,m.link):null}return{nodeId:l,slotIndex:i}}function D1(n,o,s,l,i,c,f){const m={};for(const C of s.inputs)if(C.link!=null){const S=qy(n,C.link);if(S)if(i.has(S.nodeId))m[C.name]=[String(S.nodeId),S.slotIndex];else{const j=n.nodes.find(N=>N.id===S.nodeId);if(j){const N=R1(j);N!==void 0?m[C.name]=N:console.warn(`[workflowInputs] Missing source node for input '${C.name}' on node ${s.id} (${s.type}).`,{sourceNodeId:S.nodeId,sourceNodeType:j.type,sourceAllowed:!1})}}}const p=o[l];if(!p?.input)return m;const g=p.input_order?.required||Object.keys(p.input.required||{}),b=p.input_order?.optional||Object.keys(p.input.optional||{}),x=[...g,...b];let w=0;const k=Array.isArray(s.widgets_values)?s.widgets_values:null;for(const C of x)try{const S=p.input.required?.[C]||p.input.optional?.[C];if(!S)continue;const[j]=S,N=s.inputs.find(W=>W.name===C),E=N?.link!=null,H=!!N?.widget&&!E,V=!!N,L=S[1]?.default,z=Object.prototype.hasOwnProperty.call(S[1]??{},"default");if(Tu(j)||H||!V){let W=c?.[C];if(W===void 0&&(W=w),C==="seed"&&f?.[s.id]!==void 0&&!(C in m))m[C]=f[s.id];else if(W!==void 0&&!E&&!(C in m)){const ie=ua(s,C,W);ie!==void 0&&(Array.isArray(j)?m[C]=_1(ie,j,L):m[C]=Pf(ie,j))}else!E&&z&&!(C in m)&&(m[C]=L);W!==void 0&&(w=Math.max(w,W+1)),String(j)==="INT"&&(C==="seed"||C==="noise_seed")&&(W!==void 0?w=Math.max(w,W+2):w=Math.max(w,w+1))}}catch(S){console.error(`Error processing input '${C}' for node ${s.id} (${s.type}):`,S)}if(c)for(const[C,S]of Object.entries(c)){if(!(C in m)&&k&&S<k.length){const j=k[S];j!=null&&(m[C]=j)}if(!(C in m)&&!k){const j=ua(s,C,S);j!=null&&(m[C]=j)}}return(l==="Power Lora Loader (rgthree)"||s.type==="Power Lora Loader (rgthree)")&&k&&k.forEach((C,S)=>{if(typeof C=="object"&&C!==null&&"lora"in C&&!(Object.values(c||{}).some(N=>N===S)||c===null&&S<w)){const N=`lora_${S}`;N in m||(m[N]=C)}}),f?.[s.id]!==void 0&&!("seed"in m)&&!("noise_seed"in m)&&(m.seed=f[s.id]),m}const nn="";function B1(){const n="comfyui-mobile-client-id";let o=localStorage.getItem(n);return o||(o="mobile-"+Math.random().toString(36).substring(2,15),localStorage.setItem(n,o)),o}const Wy=B1();async function Yf(){const n=await fetch(`${nn}/api/object_info`);if(!n.ok)throw new Error("Failed to fetch node types");return n.json()}async function z1(){const n=await fetch(`${nn}/api/queue`);if(!n.ok)throw new Error("Failed to fetch queue");return n.json()}async function H1(n){const o=`${nn}/api/history?max_items=${n}`,s=await fetch(o);if(!s.ok)throw new Error("Failed to fetch history");return s.json()}async function V1(){const n=await fetch(`${nn}/api/v2/userdata?path=workflows`);if(!n.ok){if(n.status===404)return[];throw new Error("Failed to list user workflows")}return(await n.json()).filter(s=>s.type==="file"&&s.name.endsWith(".json"))}function Gy(n){return encodeURIComponent(n)}async function Qf(n){const o=await fetch(`${nn}/api/userdata/${Gy("workflows/"+n)}`);if(!o.ok)throw new Error("Failed to load workflow");return o.json()}async function Py(n,o){if(!(await fetch(`${nn}/api/userdata/${Gy("workflows/"+n)}?overwrite=true`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw new Error("Failed to save workflow")}async function K1(){const n=await fetch(`${nn}/api/workflow_templates`);if(!n.ok)throw new Error("Failed to fetch templates");return n.json()}async function Xf(n,o){const s=await fetch(`${nn}/api/workflow_templates/${encodeURIComponent(n)}/${encodeURIComponent(o)}`);if(!s.ok)throw new Error("Failed to load template");return s.json()}async function U1(){await fetch(`${nn}/api/interrupt`,{method:"POST"})}async function $1(){await fetch(`${nn}/api/queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clear:!0})})}async function F1(n){await fetch(`${nn}/api/queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:[n]})})}async function Yy(n,o){const s=new FormData;s.append("image",n),o?.type&&s.append("type",o.type),o?.subfolder&&s.append("subfolder",o.subfolder),o?.overwrite!==void 0&&s.append("overwrite",o.overwrite?"true":"false");const l=await fetch(`${nn}/upload/image`,{method:"POST",body:s});if(!l.ok)throw new Error("Failed to upload image");return l.json()}async function q1(n){await fetch(`${nn}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:[n]})})}async function y0(n){n.length!==0&&await fetch(`${nn}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:n})})}async function W1(){await fetch(`${nn}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clear:!0})})}function mo(n,o,s){return`${nn}/view?filename=${encodeURIComponent(n)}&subfolder=${encodeURIComponent(o)}&type=${encodeURIComponent(s)}`}function G1(n,o,s,l,i){const f=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws?clientId=${n}`,m=new WebSocket(f);return m.onopen=()=>{s?.()},m.onmessage=p=>{try{const g=JSON.parse(p.data);o(g)}catch(g){console.error("[WS] Failed to parse message:",g)}},m.onclose=()=>{l?.()},m.onerror=p=>{console.error("[WS] Error:",p),i?.(p)},m}async function Sf(n="",o=!1,s="output",l){const i=new URLSearchParams;n&&i.set("path",n),o&&i.set("recursive","true"),s&&i.set("source",s),l&&i.set("showHidden","true");const c=await fetch(`${nn}/mobile/api/files?${i}`);if(!c.ok)throw new Error("Failed to fetch files");return c.json()}async function P1(n){const o=await Sf("",!1,"output",n),s=await Sf("",!1,"input",n),l=o.files.filter(c=>c.type==="dir").map(c=>c.name);return{input:s.files.filter(c=>c.type==="dir").map(c=>c.name),output:l}}async function Nf(n,o=1e3,s=0,l="modified",i=!1,c=null,f){return(await Sf(c||"",i,n,f)).files.map(p=>{if(p.type==="dir")return{id:`${n}/${p.path}`,name:p.name,type:"folder",date:p.date,size:p.size};const g=p.folder||(p.path.includes("/")?p.path.substring(0,p.path.lastIndexOf("/")):"");return{id:`${n}/${p.path}`,name:p.name,type:p.type,previewUrl:`${nn}/mobile/api/thumbnail?filename=${encodeURIComponent(p.name)}&subfolder=${encodeURIComponent(g)}&source=${n}`,fullUrl:`${nn}/view?filename=${encodeURIComponent(p.name)}&type=${n}&subfolder=${encodeURIComponent(g)}`,date:p.date,size:p.size}})}async function Cf(n,o="output"){const s=await fetch(`${nn}/mobile/api/files`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:n,source:o})});if(!s.ok){const l=await s.json();throw new Error(l.error||"Failed to delete file")}}async function Y1(n,o="output"){const s=new URLSearchParams({path:n,source:o}),l=await fetch(`${nn}/mobile/api/file-metadata?${s.toString()}`);if(!l.ok){const c=await l.json().catch(()=>({}));throw new Error(c.error||"Failed to load file metadata")}const i=await l.json();if(!i.workflow)throw new Error("No workflow metadata found");return i.workflow}async function Q1(n,o="output"){const s=new URLSearchParams({path:n,source:o}),l=await fetch(`${nn}/mobile/api/image-metadata?${s.toString()}`);if(!l.ok){const i=await l.json().catch(()=>({}));throw new Error(i.error||"Failed to load image metadata")}return l.json()}async function X1(n,o,s="output"){const l=await fetch(`${nn}/mobile/api/files/move`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sources:n,destination:o??"",source:s})});if(!l.ok){const i=await l.json().catch(()=>({}));throw new Error(i.error||"Failed to move files")}}async function b0(n,o="output"){const s=await fetch(`${nn}/mobile/api/files/mkdir`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:n,source:o})});if(!s.ok){const l=await s.json().catch(()=>({}));throw new Error(l.error||"Failed to create folder")}}async function Z1(n,o,s="output"){const l=await fetch(`${nn}/mobile/api/files/rename`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:n,newName:o,source:s})});if(!l.ok){const i=await l.json().catch(()=>({}));throw new Error(i.error||"Failed to rename file")}}const jt=Oo()(yr((n,o)=>({running:[],pending:[],isLoading:!1,lastExecutedId:null,queueItemExpanded:{},queueItemUserToggled:{},queueItemHideImages:{},showQueueMetadata:!1,previewVisibility:{},previewVisibilityDefault:!1,fetchQueue:async()=>{const{running:s}=o();n({isLoading:!0});try{const l=await z1(),i=l.queue_running.map(f=>({number:f[0],prompt_id:f[1],prompt:f[2],extra:f[3],outputs_to_execute:f[4]})),c=l.queue_pending.map(f=>({number:f[0],prompt_id:f[1],prompt:f[2],extra:f[3],outputs_to_execute:f[4]}));s.length>0&&i.length===0&&(n({lastExecutedId:s[0].prompt_id}),setTimeout(()=>n({lastExecutedId:null}),100)),n({running:i,pending:c})}catch(l){console.error("Failed to fetch queue:",l)}finally{n({isLoading:!1})}},clearQueue:async()=>{try{await $1(),n({pending:[]})}catch(s){console.error("Failed to clear queue:",s)}},deleteItem:async s=>{try{await F1(s),n(l=>({pending:l.pending.filter(i=>i.prompt_id!==s)}))}catch(l){console.error("Failed to delete queue item:",l)}},interrupt:async()=>{try{await U1()}catch(s){console.error("Failed to interrupt execution:",s)}},updateFromStatus:s=>{const{pending:l}=o();s!==l.length&&o().fetchQueue()},setQueueItemExpanded:(s,l)=>{n(i=>({queueItemExpanded:{...i.queueItemExpanded,[s]:l}}))},setQueueItemUserToggled:(s,l)=>{n(i=>({queueItemUserToggled:{...i.queueItemUserToggled,[s]:l}}))},setQueueItemHideImages:(s,l)=>{n(i=>({queueItemHideImages:{...i.queueItemHideImages,[s]:l}}))},toggleQueueItemHideImages:s=>{n(l=>({queueItemHideImages:{...l.queueItemHideImages,[s]:!l.queueItemHideImages[s]}}))},setShowQueueMetadata:s=>{n({showQueueMetadata:s})},toggleShowQueueMetadata:()=>{n(s=>({showQueueMetadata:!s.showQueueMetadata}))},setPreviewVisibility:(s,l)=>{n(i=>({previewVisibility:{...i.previewVisibility,[s]:l}}))},togglePreviewVisibility:s=>{n(l=>({previewVisibility:{...l.previewVisibility,[s]:!l.previewVisibility[s]}}))},setPreviewVisibilityDefault:s=>{n({previewVisibilityDefault:s})}}),{name:"queue-storage",storage:gr(()=>localStorage),partialize:n=>({queueItemExpanded:n.queueItemExpanded,queueItemUserToggled:n.queueItemUserToggled,queueItemHideImages:n.queueItemHideImages,showQueueMetadata:n.showQueueMetadata,previewVisibility:n.previewVisibility,previewVisibilityDefault:n.previewVisibilityDefault})})),eo=Oo()(yr(n=>({currentPanel:"workflow",setCurrentPanel:o=>{n({currentPanel:o})}}),{name:"navigation-storage",storage:gr(()=>localStorage),partialize:n=>({currentPanel:n.currentPanel})})),ho=Oo()(yr((n,o)=>({pinnedWidgets:{},pinnedWidget:null,pinOverlayOpen:!1,setPinnedWidget:(s,l)=>{const{pinnedWidgets:i}=o();if(l&&s)n({pinnedWidget:s,pinnedWidgets:{...i,[l]:s}});else if(l&&!s){const c={...i};delete c[l],n({pinnedWidget:null,pinnedWidgets:c})}else n({pinnedWidget:s})},setPinOverlayOpen:s=>{n({pinOverlayOpen:s})},togglePinOverlay:()=>{n(s=>({pinOverlayOpen:!s.pinOverlayOpen}))},clearPinnedWidgetForKey:s=>{if(!s){n({pinnedWidget:null,pinOverlayOpen:!1});return}n(l=>{const i={...l.pinnedWidgets};return delete i[s],{pinnedWidgets:i,pinnedWidget:null,pinOverlayOpen:!1}})},restorePinnedWidgetForWorkflow:(s,l)=>{if(!s){n({pinnedWidget:null,pinOverlayOpen:!1});return}const i=o().pinnedWidgets[s];if(!i){n({pinnedWidget:null,pinOverlayOpen:!1});return}const c=l.nodes.some(f=>f.id===i.nodeId);n({pinnedWidget:c?i:null,pinOverlayOpen:!1})},clearCurrentPin:()=>{n({pinnedWidget:null,pinOverlayOpen:!1})}}),{name:"pinned-widget-storage",storage:gr(()=>localStorage),partialize:n=>({pinnedWidgets:n.pinnedWidgets,pinnedWidget:n.pinnedWidget,pinOverlayOpen:n.pinOverlayOpen})})),Zf=-1,Eu=-2,Iu=-3,Ui=0x4000000000000,pu=new Set([Zf,Eu,Iu]);function Jf(n){return pu.has(n)}function Qy(n){return n===Zf?"randomize":n===Eu?"increment":n===Iu?"decrement":null}function J1(n){return n==="randomize"?Zf:n==="increment"?Eu:n==="decrement"?Iu:null}function Fr(n,o,s,l){if(!o)return null;const c=Gf(n,s.id)?.[l];if(c!==void 0)return c;const f=o[s.type];if(!f?.input)return null;const m=f.input_order?.required||Object.keys(f.input.required||{}),p=f.input_order?.optional||Object.keys(f.input.optional||{}),g=[...m,...p];let b=0;for(const x of g){const w=f.input.required?.[x]||f.input.optional?.[x];if(!w)continue;const[k]=w,C=s.inputs.find(V=>V.name===x),S=C?.link!=null,j=!!C?.widget&&!S,N=!!C;if(Tu(k)||j||!N){if(x===l)return b;b+=1,String(k)==="INT"&&(x==="seed"||x==="noise_seed")&&(b+=1)}}return null}function nl(n,o,s){const l=Fr(n,o,s,"seed")??Fr(n,o,s,"noise_seed");if(l!==null)return l;if(!o)return s.outputs?.some(x=>String(x.name||"").toLowerCase().includes("seed")&&String(x.type||"").toUpperCase().includes("INT"))&&Array.isArray(s.widgets_values)&&s.widgets_values.length>0?0:null;const i=o[s.type];if(!i?.input)return s.outputs?.some(x=>String(x.name||"").toLowerCase().includes("seed")&&String(x.type||"").toUpperCase().includes("INT"))&&Array.isArray(s.widgets_values)&&s.widgets_values.length>0?0:null;const c=Gf(n,s.id),f=i.input_order?.required||Object.keys(i.input.required||{}),m=i.input_order?.optional||Object.keys(i.input.optional||{}),p=[...f,...m];let g=0;for(const b of p){const x=i.input.required?.[b]||i.input.optional?.[b];if(!x)continue;const[w]=x,k=s.inputs.find(E=>E.name===b),C=k?.link!=null,S=!!k?.widget&&!C,j=!!k;if(Tu(w)||S||!j){const H=c?.[b]??g;if(String(w)==="INT"&&b.toLowerCase().includes("seed"))return H;g+=1,String(w)==="INT"&&(b==="seed"||b==="noise_seed")&&(g+=1)}}return null}function ew(n,o){const s=n[o.type];if(!s?.input)return 1;const i=(s.input.required?.seed||s.input.optional?.seed)?.[1],c=typeof i?.step=="number"?i.step:1;return c>0?c:1}function tw(n){const o=Number(n.properties?.randomMin??0),s=Number(n.properties?.randomMax??Ui),l=Number.isFinite(o)?Math.max(-Ui,o):0,i=Number.isFinite(s)?Math.min(Ui,s):Ui;return l<=i?{min:l,max:i}:{min:i,max:l}}function ca(n,o){const s=ew(n,o),{min:l,max:i}=tw(o),c=s>0?s/10:1,f=i-l;let m=l+Math.random()*f;return c>0&&(m=Math.round((m-l)/c)*c+l),m>i&&(m=i),m<l&&(m=l),pu.has(m)&&(m=0),m}function nw(n,o,s,l){if(pu.has(n)){if(typeof o=="number"&&!pu.has(o)){if(n===Eu)return o+1;if(n===Iu)return o-1}return ca(s,l)}return Number.isFinite(n)?n:0}const $n=Oo()(yr((n,o)=>({seedModes:{},seedLastValues:{},setSeedMode:(s,l,i)=>{const{seedModes:c,seedLastValues:f}=o();if(i?.workflow&&i.nodeTypes){const{workflow:m,nodeTypes:p,updateNodeWidgets:g}=i,b=m.nodes.find(x=>x.id===s);if(b){const x=nl(m,p,b);if(x!==null&&Array.isArray(b.widgets_values)){const w=x+1,k=typeof b.widgets_values[w]=="string",C={};if(k)C[w]=l;else{const S=J1(l);if(S!==null&&l!=="fixed")C[x]=S;else if(l==="fixed"){const j=Number(b.widgets_values[x]);if(Jf(j)){const N=f[s],E=typeof N=="number"?N:ca(p,b);C[x]=E}}}Object.keys(C).length>0&&g(s,C)}}}n({seedModes:{...c,[s]:l}})},setSeedModes:s=>{n({seedModes:s})},setSeedLastValues:s=>{n({seedLastValues:s})},clearSeedState:()=>{n({seedModes:{},seedLastValues:{}})}}),{name:"seed-storage",storage:gr(()=>localStorage),partialize:n=>({seedModes:n.seedModes,seedLastValues:n.seedLastValues})}));function x0(n,o){return n&&n[o]||null}function Xy(n,o){try{if(o.type==="PrimitiveNode"){const p=o.outputs?.[0]?.type;if(!p)return[];const g=String(p).toUpperCase(),b=Array.isArray(o.widgets_values)?o.widgets_values[0]:void 0;return[{name:o.outputs?.[0]?.name||"value",type:g,options:void 0,value:b,widgetIndex:0,isCombo:!1,connected:!1,inputIndex:-1}]}if(o.type==="Power Lora Loader (rgthree)"){const p=[],g=o.properties?.["Show Strengths"]==="Separate Model & Clip";let b=[];if(n){const x=x0(n,"LoraLoader");if(x?.input?.required?.lora_name){const[w]=x.input.required.lora_name;Array.isArray(w)&&(b=w)}}if(Array.isArray(o.widgets_values)){const x=o.widgets_values,w=[];x.forEach((k,C)=>{typeof k=="object"&&k!==null&&"lora"in k&&"strength"in k&&w.push(C)}),w.length>0&&(p.push({name:"Loras",type:"POWER_LORA_HEADER",options:{loraIndices:w},value:null,widgetIndex:-1,isCombo:!1,connected:!1,inputIndex:-1}),w.forEach(k=>{const C=x[k];p.push({name:"Lora",type:"POWER_LORA",options:{choices:b.length>0?b:void 0,showSeparate:g},value:C,widgetIndex:k,isCombo:!1,connected:!1,inputIndex:-1})})),p.push({name:"Add Lora",type:"POWER_LORA_ADD",options:void 0,value:null,widgetIndex:o.widgets_values.length,isCombo:!1,connected:!1,inputIndex:-1})}return p}const s=x0(n,o.type);if(!s?.input)return o.outputs?.some(g=>String(g.name||"").toLowerCase().includes("seed")&&String(g.type||"").toUpperCase().includes("INT"))&&Array.isArray(o.widgets_values)&&o.widgets_values.length>0?[{name:"seed",type:"INT",options:void 0,value:o.widgets_values[0],widgetIndex:0,isCombo:!1,connected:!1,inputIndex:-1}]:[];const l=s.input_order?.required||Object.keys(s.input.required||{}),i=s.input_order?.optional||Object.keys(s.input.optional||{}),c=[];let f=0;const m=(p,g)=>{if(!g)return;const[b,x]=g,w=o.inputs.findIndex(L=>L.name===p),k=w>=0?o.inputs[w]:void 0,C=k?.link!=null,S=!!k?.widget&&!C,j=!!k,N=Object.prototype.hasOwnProperty.call(x??{},"default"),E=Tu(b)||S||!j||N,H=Array.isArray(b),V=H?{...x??{},options:b}:x;if(E){const L=ua(o,p,f);c.push({name:p,type:H?"COMBO":String(b),options:V,value:L,widgetIndex:f,isCombo:H,connected:!!C,inputIndex:w})}E&&(f+=1,String(b)==="INT"&&(p==="seed"||p==="noise_seed")&&(f+=1))};for(const p of l){const g=s.input.required?.[p];g&&m(p,g)}for(const p of i){const g=s.input.optional?.[p];g&&m(p,g)}return c}catch(s){return console.error(`Error collecting widget definitions for node ${o.id} (${o.type}):`,s),[]}}function ep(n,o){return Xy(n,o).filter(s=>!s.isCombo).map(s=>({name:s.name,type:s.type,options:s.options,value:s.value,widgetIndex:s.widgetIndex,connected:s.connected,inputIndex:s.inputIndex}))}function tp(n,o){return Xy(n,o).filter(s=>s.isCombo).map(s=>({name:s.name,type:s.type,value:s.value,options:s.options,widgetIndex:s.widgetIndex,connected:s.connected,inputIndex:s.inputIndex}))}function ow(n){let o=5381;for(let s=0;s<n.length;s+=1)o=(o<<5)+o+n.charCodeAt(s),o&=4294967295;return(o>>>0).toString(16).padStart(8,"0")}function rw(n,o){if(!n)return!1;const s=ep(n,o).filter(i=>!i.connected),l=tp(n,o).filter(i=>!i.connected);return s.length===0&&l.length===0}function sw(n){const o=n.nodes??[],s=n.definitions?.subgraphs?.flatMap(l=>l.nodes??[])??[];return[...o,...s]}function Pd(n,o){const i=sw(n).filter(c=>!rw(o,c)).map(c=>c.type).sort().join("|");return`wf_${ow(i)}`}const v0="__mobile_origin",$i="__mobile_subgraph_group_map";function Yd(n,o,s){const l={...n.properties??{}};return s&&l[v0]===void 0&&(l[v0]=s),{...n,id:o,inputs:(n.inputs??[]).map(i=>({...i,link:null})),outputs:(n.outputs??[]).map(i=>({...i,links:[]})),widgets_values:n.widgets_values??[],flags:n.flags??{},properties:l,mode:n.mode??0,order:n.order??0}}function lw(n,o){if(!o||o.length===0)return null;const s=[...o].sort((g,b)=>g.id-b.id),[l,i]=n.pos,[c,f]=n.size,m=l+c/2,p=i+f/2;for(const g of s){const[b,x,w,k]=g.bounding;if(m>=b&&m<=b+w&&p>=x&&p<=x+k)return g.id}return null}function w0(n,o){const s=new Map,l=new Map;return o.forEach((i,c)=>{i?.name&&l.set(i.name,c)}),n.forEach((i,c)=>{const f=i?.name;if(f&&l.has(f)){s.set(c,l.get(f));return}c<o.length&&s.set(c,c)}),s}function aw(n,o){const s=new Map;for(const l of n)l.inputs=(l.inputs??[]).map(i=>({...i,link:null})),l.outputs=(l.outputs??[]).map(i=>({...i,links:[]})),s.set(l.id,l);for(const l of o){const[i,c,f,m,p]=l,g=s.get(c),b=s.get(m),x=g?.outputs?.[f],w=b?.inputs?.[p];x&&(x.links||(x.links=[]),x.links.push(i)),w&&(w.link=i)}return n}function iw(n,o){const s=n.nodes.filter(C=>o.has(C.type));if(s.length===0)return{workflow:n,changed:!1};const l=new Set(s.map(C=>C.id));let i=Math.max(0,...n.nodes.map(C=>C.id))+1;const c=[],f=n.groups??[],m=n.extra??{},p=typeof m[$i]=="object"&&m[$i]!==null?m[$i]:{},g={};for(const[C,S]of Object.entries(p))(typeof S=="number"||S===null)&&(g[C]=S);const b=new Map;for(const C of n.nodes){if(!l.has(C.id)){c.push(Yd(C,C.id,{scope:"root",nodeId:C.id}));continue}const S=o.get(C.type);if(!S){c.push(Yd(C,C.id,{scope:"root",nodeId:C.id}));continue}const j=lw(C,f);g[S.id]=j??null;const N=w0(C.inputs??[],S.inputs??[]),E=w0(C.outputs??[],S.outputs??[]),H=new Map,V=new Map,L=new Map,z=[];for(const I of S.nodes??[]){const $=i++;H.set(I.id,$),c.push(Yd(I,$,{scope:"subgraph",subgraphId:S.id,nodeId:I.id}))}for(const I of S.links??[]){const $=I.origin_id,W=I.target_id;if($===-10){const me=H.get(W);if(me!==void 0){const Ae=V.get(I.origin_slot)??[];Ae.push({origin_id:-10,origin_slot:I.origin_slot,target_id:me,target_slot:I.target_slot,type:I.type}),V.set(I.origin_slot,Ae)}continue}if(W===-20){const me=H.get($);if(me!==void 0){const Ae=L.get(I.target_slot)??[];Ae.push({origin_id:me,origin_slot:I.origin_slot,target_id:-20,target_slot:I.target_slot,type:I.type}),L.set(I.target_slot,Ae)}continue}const ie=H.get($),de=H.get(W);ie!==void 0&&de!==void 0&&z.push({origin_id:ie,origin_slot:I.origin_slot,target_id:de,target_slot:I.target_slot,type:I.type})}b.set(C.id,{inputSlotMap:N,outputSlotMap:E,inputTargets:V,outputSources:L,internalLinks:z})}const x=[],w=n.links??[];for(const C of w){const[,S,j,N,E,H]=C,V=l.has(S),L=l.has(N);if(!V&&!L){x.push({origin_id:S,origin_slot:j,target_id:N,target_slot:E,type:H});continue}if(V&&L){const z=b.get(S),I=b.get(N),$=z?.outputSlotMap.get(j),W=I?.inputSlotMap.get(E);if($===void 0||W===void 0)continue;const ie=z?.outputSources.get($)??[],de=I?.inputTargets.get(W)??[];for(const me of ie)for(const Ae of de)x.push({origin_id:me.origin_id,origin_slot:me.origin_slot,target_id:Ae.target_id,target_slot:Ae.target_slot,type:me.type});continue}if(V){const z=b.get(S),I=z?.outputSlotMap.get(j);if(I===void 0)continue;const $=z?.outputSources.get(I)??[];for(const W of $)x.push({origin_id:W.origin_id,origin_slot:W.origin_slot,target_id:N,target_slot:E,type:W.type});continue}if(L){const z=b.get(N),I=z?.inputSlotMap.get(E);if(I===void 0)continue;const $=z?.inputTargets.get(I)??[];for(const W of $)x.push({origin_id:S,origin_slot:j,target_id:W.target_id,target_slot:W.target_slot,type:W.type})}}for(const C of b.values())x.push(...C.internalLinks);const k=x.map((C,S)=>[S+1,C.origin_id,C.origin_slot,C.target_id,C.target_slot,C.type]);return aw(c,k),{workflow:{...n,extra:{...m,[$i]:g},nodes:c,links:k,last_node_id:Math.max(0,...c.map(C=>C.id)),last_link_id:k.length},changed:!0}}function uw(n){const o=n.definitions?.subgraphs??[];if(o.length===0)return n;const s=new Map;for(const i of o)i?.id&&s.set(i.id,i);let l=n;for(let i=0;i<o.length+4;i+=1){const{workflow:c,changed:f}=iw(l,s);if(!f)break;l=c}return l}function cw(n){const o=new Map,s=new Map,l=new Map;for(const i of n.nodes)o.set(i.id,i),s.set(i.id,[]),l.set(i.id,[]);for(const i of n.links){const[,c,,f]=i,m=s.get(f);m&&!m.includes(c)&&m.push(c);const p=l.get(c);p&&!p.includes(f)&&p.push(f)}return{nodes:o,dependencies:s,dependents:l}}function dw(n){return["SaveImage","PreviewImage","SaveAnimatedWEBP","SaveAnimatedPNG","SaveVideo","SaveAudio"].some(s=>n.type.includes(s))||n.outputs.length===0||n.outputs.every(s=>!s.links||s.links.length===0)}function fw(n){if(n.nodes.length===0)return[];const o=cw(n),s=new Set,l=[];function i(f){if(s.has(f))return;s.add(f);const m=o.nodes.get(f);if(!m)return;const p=o.dependencies.get(f)||[];for(const g of p)i(g);l.push(m)}const c=n.nodes.filter(dw);if(c.length===0)for(const f of n.nodes)(o.dependents.get(f.id)||[]).length===0&&c.push(f);for(const f of c)i(f.id);for(const f of n.nodes)s.has(f.id)||i(f.id);return l}function rl(n,o,s){const l=n.nodes.find(g=>g.id===o);if(!l||!l.inputs[s])return null;const i=l.inputs[s].link;if(i===null)return null;const c=n.links.find(g=>g[0]===i);if(!c)return null;const[,f,m]=c,p=n.nodes.find(g=>g.id===f);return p?{node:p,outputIndex:m}:null}function da(n,o,s){const l=n.nodes.find(f=>f.id===o);if(!l||!l.outputs[s])return[];const i=l.outputs[s].links||[],c=[];for(const f of i){const m=n.links.find(x=>x[0]===f);if(!m)continue;const[,,,p,g]=m,b=n.nodes.find(x=>x.id===p);b&&c.push({node:b,inputIndex:g})}return c}function fa(n){if(n==null)return[];if(Array.isArray(n))return n.flatMap(s=>fa(s)).filter(Boolean);const o=String(n);return o?o.split(",").map(s=>s.trim().toUpperCase()).filter(Boolean):[]}function S0(n){return!(n==="*"||n==="OPT_CONNECTION")}function N0(n,o){const s=fa(n),l=fa(o);return s.length===0||l.length===0?!1:s.includes("*")||l.includes("*")?!0:s.some(i=>l.includes(i))}function np(n,o){const s=fa(n).filter(S0),l=fa(o).filter(S0);return s.length===0||l.length===0?!1:s.some(i=>l.includes(i))}function pw(n,o,s,l){const i=n.nodes.find(m=>m.id===s);if(!i)return[];const c=i.inputs[l];if(!c)return[];const f=[];for(const m of n.nodes)if(m.id!==s&&m.mode!==4)for(let p=0;p<m.outputs.length;p++){const g=m.outputs[p];if(np(g.type,c.type)){f.push({node:m,outputIndex:p});break}}return f}function hw(n,o){const s=[];for(const[l,i]of Object.entries(n)){const c=i.output??[];for(let f=0;f<c.length;f++)if(np(c[f],o)){s.push({typeName:l,def:i,outputIndex:f});break}}return s}function mw(n,o,s){const l=n.nodes.find(f=>f.id===o);if(!l)return[];const i=l.outputs?.[s];if(!i)return[];const c=[];for(const f of n.nodes)if(f.id!==o&&f.mode!==4)for(let m=0;m<(f.inputs?.length??0);m+=1){const p=f.inputs[m];if(np(i.type,p.type)){c.push({node:f,inputIndex:m});break}}return c}function pa(n,o){const s=new Map;if(!o||o.length===0)return s;const l=[...o].sort((i,c)=>{const f=i.bounding[2]*i.bounding[3],m=c.bounding[2]*c.bounding[3];return f!==m?f-m:i.id-c.id});for(const i of n){const[c,f]=i.pos,[m,p]=i.size,g=c+m/2,b=f+p/2;for(const x of l){const[w,k,C,S]=x.bounding;if(g>=w&&g<=w+C&&b>=k&&b<=k+S){s.set(i.id,x.id);break}}}return s}function lu(){return{root:[],groups:{},subgraphs:{},hiddenBlocks:{}}}function op(n){const o=n.split("/").filter(Boolean);if(o.length===0||o[0]!=="root")return null;const s=o.slice(1);if(s.length===0)return null;const l=m=>{const p=m.indexOf(":");if(p<=0)return null;const g=m.slice(0,p),b=m.slice(p+1);return g!=="node"&&g!=="group"&&g!=="subgraph"||b.length===0?null:{type:g,rawId:b}};let i=null;for(let m=0;m<s.length-1;m+=1){const p=l(s[m]);if(!p||p.type==="node")return null;p.type==="subgraph"&&(i=p.rawId)}const c=l(s[s.length-1]);if(!c)return null;if(c.type==="subgraph")return{type:"subgraph",subgraphId:c.rawId};const f=Number(c.rawId);return Number.isFinite(f)?c.type==="group"?{type:"group",groupId:f,subgraphId:i}:{type:"node",nodeId:f,subgraphId:i}:null}function Ht(n){if(n.type==="group"&&n.groupKey)return n.groupKey;const o=n.subgraphId==null?"root":`root/subgraph:${n.subgraphId}`;return n.type==="group"?`${o}/group:${n.groupId}`:n.type==="node"?`${o}/node:${n.nodeId}`:`root/subgraph:${n.subgraphId}`}function gw(n,o){return n.type!==o.type?!1:n.type==="node"&&o.type==="node"?n.id===o.id:n.type==="group"&&o.type==="group"?n.stableKey===o.stableKey:n.type==="subgraph"&&o.type==="subgraph"?n.id===o.id:n.type==="hiddenBlock"&&o.type==="hiddenBlock"?n.blockId===o.blockId:!1}function yw(n){const s=n.properties?.__mobile_origin;if(!s||typeof s!="object")return null;const l=s.scope;if(l==="root")return{scope:"root"};if(l==="subgraph"){const i=s.subgraphId;if(typeof i=="string")return{scope:"subgraph",subgraphId:i}}return null}function bw(n,o,s){const l=o.groups??[],i=o.definitions?.subgraphs??[],c=new Map;for(const z of n){const I=yw(z);I?.scope==="subgraph"&&I.subgraphId&&c.set(z.id,I.subgraphId)}const f=n.filter(z=>!c.has(z.id)),m=pa(f,l),p=new Map;for(const z of i){const I=n.filter(W=>c.get(W.id)===z.id),$=z.groups??[];$.length>0&&p.set(z.id,pa(I,$))}const g=o.extra?.__mobile_subgraph_group_map,b=new Map;if(g&&typeof g=="object")for(const[z,I]of Object.entries(g))(typeof I=="number"||I===null)&&b.set(z,I);const x=lu();for(const z of i)x.subgraphs[z.id]=[];const w=z=>{const I=new Map;for(const $ of z){const[W,ie,de,me]=$.bounding,Ae=W+de/2,Ee=ie+me/2,Ie=de*me;let B=null,le=Number.POSITIVE_INFINITY;for(const fe of z){if(fe.id===$.id)continue;const[$e,Re,T,A]=fe.bounding,O=T*A;if(O<=Ie)continue;const te=W>=$e&&ie>=Re&&W+de<=$e+T&&ie+me<=Re+A,X=Ae>=$e&&Ae<=$e+T&&Ee>=Re&&Ee<=Re+A;!te&&!X||O<le&&(le=O,B=fe.id)}I.set($.id,B)}return I};function k(z,I,$){const W=[];let ie=[],de=0;const me=()=>{if(ie.length===0)return;const Ae=`hidden-${I}-${de}`;de++,x.hiddenBlocks[Ae]=[...ie],W.push({type:"hiddenBlock",blockId:Ae}),ie=[]};for(const Ae of z)Ae.type==="node"&&s[Ht({type:"node",nodeId:Ae.id,subgraphId:$})]?ie.push(Ae.id):(me(),W.push(Ae));return me(),W}for(const z of i){const I=n.filter(le=>c.get(le.id)===z.id),$=p.get(z.id),W=z.groups??[],ie=w(W),de=new Map,me=new Map((z.groups??[]).map(le=>[le.id,le])),Ae=new Set,Ee=[],Ie=le=>de.get(le)??Ht({type:"group",groupId:le,subgraphId:z.id}),B=le=>{const fe=[],$e=new Set;let Re=le;for(;Re!=null&&!$e.has(Re);)fe.push(Re),$e.add(Re),Re=ie.get(Re)??null;fe.reverse();for(const T of fe){if(Ae.has(T))continue;const A=ie.get(T)??null,O=me.get(T)?.stableKey??`legacy-group-${z.id}-${T}`;de.set(T,O);const te={type:"group",id:T,subgraphId:z.id,stableKey:O};if(A==null)Ee.push(te);else{const X=Ie(A);x.groups[X]??=[],x.groups[X].push(te)}Ae.add(T)}};for(const le of I){const fe=$?.get(le.id);if(fe===void 0){Ee.push({type:"node",id:le.id});continue}B(fe),x.groups[Ie(fe)]??=[],x.groups[Ie(fe)].push({type:"node",id:le.id})}for(const le of W)B(le.id);for(const le of W){const fe=Ie(le.id);x.groups[fe]=k(x.groups[fe]??[],`group-${fe}`,z.id)}x.subgraphs[z.id]=k(Ee,`subgraph-${z.id}`,z.id)}const C=w(l),S=new Set,j=new Set,N=[],E=new Map,H=new Map(l.map(z=>[z.id,z])),V=z=>E.get(z)??Ht({type:"group",groupId:z,subgraphId:null}),L=z=>{const I=[],$=new Set;let W=z;for(;W!=null&&!$.has(W);)I.push(W),$.add(W),W=C.get(W)??null;I.reverse();for(const ie of I){if(S.has(ie))continue;const de=C.get(ie)??null,me=H.get(ie)?.stableKey??`legacy-group-root-${ie}`;E.set(ie,me);const Ae={type:"group",id:ie,subgraphId:null,stableKey:me};if(de==null)N.push(Ae);else{const Ee=V(de);x.groups[Ee]??=[],x.groups[Ee].push(Ae)}S.add(ie)}};for(const z of f){const I=m.get(z.id);if(I===void 0){N.push({type:"node",id:z.id});continue}L(I),x.groups[V(I)]??=[],x.groups[V(I)].push({type:"node",id:z.id})}for(const z of i){if(j.has(z.id))continue;const I=b.get(z.id);I!=null?(L(I),x.groups[V(I)]??=[],x.groups[V(I)].push({type:"subgraph",id:z.id})):N.push({type:"subgraph",id:z.id}),j.add(z.id)}for(const z of l)L(z.id);for(const z of l){const I=V(z.id);x.groups[I]=k(x.groups[I]??[],`group-${I}`,null)}return x.root=k(N,"root",null),x}function C0(n,o){const s=f=>{const m=[];for(const p of f)if(!(p.type==="node"&&p.id===o)){if(p.type==="hiddenBlock"){const g=n.hiddenBlocks[p.blockId];if(g&&g.filter(x=>x!==o).length===0)continue}m.push(p)}return m},l={};for(const[f,m]of Object.entries(n.hiddenBlocks)){const p=m.filter(g=>g!==o);p.length>0&&(l[f]=p)}const i={};for(const[f,m]of Object.entries(n.groups))i[f]=s(m);const c={};for(const[f,m]of Object.entries(n.subgraphs))c[f]=s(m);return{root:s(n.root),groups:i,subgraphs:c,hiddenBlocks:l}}function xw(n,o,s){const l={type:"node",id:o};if(s?.subgraphId){const i=n.subgraphs[s.subgraphId]??[];if(s.groupId!=null){const c=Ht({type:"group",groupId:s.groupId,subgraphId:s.subgraphId}),f=Object.keys(n.groups).find(p=>p===c)??c,m=n.groups[f]??[];return{...n,groups:{...n.groups,[f]:[...m,l]}}}return{...n,subgraphs:{...n.subgraphs,[s.subgraphId]:[...i,l]}}}if(s?.groupId!=null){const i=Ht({type:"group",groupId:s.groupId,subgraphId:s.subgraphId??null}),c=Object.keys(n.groups).find(m=>m===i)??i,f=n.groups[c]??[];return{...n,groups:{...n.groups,[c]:[...f,l]}}}return{...n,root:[...n.root,l]}}function vw(n,o){const s=n.groups[o]??[],l=m=>{const p=[];for(const g of m)g.type==="group"&&g.stableKey===o?p.push(...s):p.push(g);return p},i={...n.groups};delete i[o];let c=n.root;n.root.some(m=>m.type==="group"&&m.stableKey===o)&&(c=l(n.root));for(const[m,p]of Object.entries(i))p.some(g=>g.type==="group"&&g.stableKey===o)&&(i[m]=l(p));const f={...n.subgraphs};for(const[m,p]of Object.entries(f))p.some(g=>g.type==="group"&&g.stableKey===o)&&(f[m]=l(p));return{root:c,groups:i,subgraphs:f,hiddenBlocks:n.hiddenBlocks}}function ww(n,o,s,l,i,c){const f=(w,k)=>k.scope==="root"?w.root:k.scope==="group"?w.groups[k.groupKey]??[]:w.subgraphs[k.subgraphId]??[],m=(w,k,C)=>k.scope==="root"?{...w,root:C}:k.scope==="group"?{...w,groups:{...w.groups,[k.groupKey]:C}}:{...w,subgraphs:{...w.subgraphs,[k.subgraphId]:C}};if(s.scope===i.scope&&(s.scope==="root"||s.scope==="group"&&i.scope==="group"&&s.groupKey===i.groupKey||s.scope==="subgraph"&&i.scope==="subgraph"&&s.subgraphId===i.subgraphId)){const w=[...f(n,s)],[k]=w.splice(l,1);if(!k)return n;const C=c>l?c-1:c;return w.splice(C,0,k),m(n,s,w)}const g=[...f(n,s)];g.splice(l,1);let b=m(n,s,g);const x=[...f(b,i)];return x.splice(c,0,o),b=m(b,i,x),b}function Zy(n){const o=[],s=l=>{for(const i of l)if(i.type==="node")o.push(i.id);else if(i.type==="group"){const c=n.groups[i.stableKey];c&&s(c)}else if(i.type==="subgraph"){const c=n.subgraphs[i.id];c&&s(c)}else if(i.type==="hiddenBlock"){const c=n.hiddenBlocks[i.blockId];c&&o.push(...c)}};return s(n.root),o}function Sw(n,o){return o.scope==="root"?n.root:o.scope==="group"?n.groups[o.groupKey]??[]:n.subgraphs[o.subgraphId]??[]}function Jy(n,o){const s=(i,c)=>{const f=i.findIndex(m=>gw(m,o));return f>=0?{containerId:c,index:f}:null},l=s(n.root,{scope:"root"});if(l)return l;for(const[i,c]of Object.entries(n.groups)){const f=s(c,{scope:"group",groupKey:i});if(f)return f}for(const[i,c]of Object.entries(n.subgraphs)){const f=s(c,{scope:"subgraph",subgraphId:i});if(f)return f}return null}function Nw(n,o,s=250){const l=n.nodes.find(i=>i.id===o);return l?[l.pos[0]+s,l.pos[1]]:null}function k0(n){return n.nodes.length===0?[0,0]:[0,Math.max(...n.nodes.map(s=>s.pos[1]+(s.size?.[1]??100)))+80]}function Cw(n,o,s,l=24){const[i,c,f,m]=o.bounding,[p,g]=s,b=i+l,x=c+48,w=Math.max(b,i+f-p-l),k=Math.max(x,c+m-g-l);return[Math.min(Math.max(n[0],b),w),Math.min(Math.max(n[1],x),k)]}function eb(n,o){const s=(l,i,c,f)=>{for(const m of l){if(o({ref:m,groupKeys:i,subgraphIds:c,currentSubgraphId:f}))return{groupKeys:i,subgraphIds:c,currentSubgraphId:f};if(m.type==="group"){const p=s(n.groups[m.stableKey]??[],[...i,m.stableKey],c,f);if(p)return p;continue}if(m.type==="subgraph"){const p=s(n.subgraphs[m.id]??[],i,[...c,m.id],m.id);if(p)return p}}return null};return s(n.root,[],[],null)}const kf="__mobile_origin",$r="__mobile_subgraph_group_map";let kw=0;function ds(n,o){return bw(fw(n),n,o)}function jw(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?`sk_${crypto.randomUUID()}`:`sk_${Math.random().toString(36).slice(2)}_${Date.now().toString(36)}`}function Mw(n){const o=[],s=new Set,l=new Set,i=(c,f)=>{for(const m of c){if(m.type==="node"){o.push(Ht({type:"node",nodeId:m.id,subgraphId:f}));continue}if(m.type==="group"){if(o.push(m.stableKey),s.has(m.stableKey))continue;s.add(m.stableKey),i(n.groups[m.stableKey]??[],m.subgraphId);continue}if(m.type==="subgraph"){const p=Ht({type:"subgraph",subgraphId:m.id});if(o.push(p),l.has(m.id))continue;l.add(m.id),i(n.subgraphs[m.id]??[],m.id)}}};return i(n.root,null),o}function j0(n){const o=op(n);return o?o.type==="node"?`node:${o.nodeId}`:o.type==="group"?`group:${o.subgraphId??"root"}:${o.groupId}`:`subgraph:${o.subgraphId}`:`unknown:${n}`}function Lo(n,o,s){const l=Mw(n),i=new Map;for(const[p,g]of Object.entries(s)){const b=j0(g),x=i.get(b)??[];x.push(p),i.set(b,x)}const c=new Set,f={},m={};for(const p of l){let g=o[p];if(g&&c.has(g)&&(g=void 0),!g){const b=j0(p),x=i.get(b)??[];for(;x.length>0;){const w=x.shift();if(!(!w||c.has(w))){g=w;break}}i.set(b,x)}g||(g=jw()),c.add(g),f[p]=g,m[g]=p}return{layoutToStable:f,stableToLayout:m}}function Ow(n,o){const s=new Set(o.nodes.map(i=>i.id)),l=new Set(Zy(n));if(s.size!==l.size)return!1;for(const i of s)if(!l.has(i))return!1;return!0}function ha(n,o=null){return Ht({type:"node",nodeId:n,subgraphId:o})}function Tw(n){const o=po(n);return ha(n.id,o?.scope==="subgraph"?o.subgraphId:null)}const M0=new WeakMap;function Ew(n){const o=M0.get(n);if(o)return o;const s=new Map;for(const l of n.nodes){const i=Tw(l),c=s.get(l.id);c?c.includes(i)||c.push(i):s.set(l.id,[i])}return M0.set(n,s),s}function aa(n,o,s=null){if(s!=null)return[ha(o,s)];const l=Ew(n).get(o)??[];return l.length>0?[...l]:[ha(o,null)]}function Qd(n,o){if(!o)return{};const s={};for(const[l,i]of Object.entries(o)){if(!i)continue;if(l.includes(":node:")||l.includes("/node:")){const f=op(l);if(f?.type==="node"){s[ha(f.nodeId,f.subgraphId)]=!0;continue}const m=l.match(/^(root|subgraph:(.*)):node:(\d+)$/);if(!m)continue;const p=Number(m[3]);if(!Number.isFinite(p))continue;s[ha(p,m[1]==="root"?null:m[2]??null)]=!0;continue}const c=Number(l);if(Number.isFinite(c))for(const f of aa(n,c))s[f]=!0}return s}function O0(n){const o=i=>i.map(c=>c.type!=="group"?c:{...c}),s={};for(const[i,c]of Object.entries(n.groups)){const f=i,m=o(c);s[f]?s[f]=[...s[f],...m]:s[f]=m}const l={};for(const[i,c]of Object.entries(n.subgraphs))l[i]=o(c);return{...n,root:o(n.root),groups:s,subgraphs:l}}function Fi(n,o,s=null){const l=new Set,i=c=>{for(const f of c)f.type==="group"?(f.id===o&&f.subgraphId===s&&l.add(f.stableKey),i(n.groups[f.stableKey]??[])):f.type==="subgraph"&&i(n.subgraphs[f.id]??[])};return i(n.root),[...l]}function rp(n,o){return o[n]??null}function Iw(n,o){const s=new Set,l=[];for(const i of n){const c=rp(i,o);!c||s.has(c)||(s.add(c),l.push(c))}return l}function Lw(n,o,s=null){const l=[],i=new Set;for(const[c,f]of Object.entries(n)){if(i.has(f))continue;const m=op(c);m?.type==="node"&&m.nodeId===o&&(s!==null&&m.subgraphId!==s||(i.add(f),l.push(f)))}return l}function fs(n,o,s,l=null){const i=Lw(o,s,l);return i.length>0?i:Iw(aa(n,s,l),o)}function Hn(n,o,s){const l=n.nodes.find(i=>i.stableKey===o);if(l){const i=po(l);return{nodeId:l.id,subgraphId:i?.scope==="subgraph"?i.subgraphId:null}}return null}function qi(n,o,s){const l=(n.groups??[]).find(i=>i.stableKey===o);if(l)return{type:"group",groupId:l.id,subgraphId:null,stableKey:o};for(const i of n.definitions?.subgraphs??[]){if(i.stableKey===o)return{type:"subgraph",subgraphId:i.id,stableKey:o};const c=(i.groups??[]).find(f=>f.stableKey===o);if(c)return{type:"group",groupId:c.id,subgraphId:i.id,stableKey:o}}return null}function Wi(n,o){return(n.definitions?.subgraphs??[]).find(l=>l.id===o)?.stableKey??null}function Aw(n,o){const s=l=>{for(const i of l)if(i.type==="group"){if(i.stableKey===o)return i.subgraphId??null;const c=s(n.groups[i.stableKey]??[]);if(c!==null)return c}else if(i.type==="subgraph"){const c=s(n.subgraphs[i.id]??[]);if(c!==null)return c}return null};return s(n.root)}function Xd(n,o){if(!n)return{};const s={};for(const[l,i]of Object.entries(n)){if(!i)continue;const c=rp(l,o);c&&(s[c]=!0)}return s}function Rw(n,o){if(!n)return{};const s={};for(const[l,i]of Object.entries(n)){if(i!==!0)continue;const c=rp(l,o);c&&(s[c]=!0)}return s}function Gi(n,o,s){if(!n)return{};const l={};for(const[i,c]of Object.entries(n)){if(!c)continue;if(s[i]){l[i]=!0;continue}const f=o[i];f&&(l[f]=!0)}return l}function Zd(n,o,s){if(!n)return{};const l={};for(const[i,c]of Object.entries(n)){if(c!==!0)continue;if(s[i]){l[i]=!0;continue}const f=o[i];f&&(l[f]=!0)}return l}function Pi(n,o){if(!n)return{};const s={};for(const[l,i]of Object.entries(n)){if(!i)continue;const c=o[l];c&&(s[c]=!0)}return s}function jf(n){return n.map(o=>({...o,widgets_values:o.widgets_values??[],inputs:o.inputs??[],outputs:o.outputs??[],flags:o.flags??{},properties:o.properties??{},mode:o.mode??0,order:o.order??0}))}function T0(n){const o=JSON.parse(JSON.stringify(n));return o.nodes=jf(o.nodes??[]),o.links=o.links??[],o.groups=o.groups??[],o.config=o.config??{},o.definitions?.subgraphs&&(o.definitions.subgraphs=o.definitions.subgraphs.map(s=>({...s,nodes:jf(s.nodes??[]),links:s.links??[]}))),o.last_node_id=o.last_node_id??Math.max(0,...o.nodes.map(s=>s.id)),o.last_link_id=o.last_link_id??0,o.version=o.version??.4,o}function E0(n){if(!("stableKey"in n))return n;const{stableKey:o,...s}=n;return s}function I0(n){if(!("stableKey"in n))return n;const{stableKey:o,...s}=n;return s}function hu(n){const o=n.nodes.map(E0),s=(n.groups??[]).map(I0),l=o.some((m,p)=>m!==n.nodes[p])||s.some((m,p)=>m!==(n.groups??[])[p]),i=n.definitions?.subgraphs;if(!i)return l?{...n,nodes:o,groups:s}:n;let c=!1;const f=i.map(m=>{const p=m.nodes.map(E0),g=(m.groups??[]).map(I0);let b=p.some((k,C)=>k!==m.nodes[C])||g.some((k,C)=>k!==(m.groups??[])[C]);if(m.stableKey!=null&&(b=!0),!b)return m;c=!0;const{stableKey:x,...w}=m;return{...w,nodes:p,groups:g}});return!l&&!c?n:{...n,nodes:o,groups:s,definitions:{...n.definitions??{},subgraphs:f}}}function po(n){if(!n)return null;const s=n.properties?.[kf];if(!s||typeof s!="object")return null;const l=s.scope;if(l==="root"){const i=s.nodeId;return typeof i=="number"?{scope:"root",nodeId:i}:null}if(l==="subgraph"){const i=s.nodeId,c=s.subgraphId;if(typeof i=="number"&&typeof c=="string")return{scope:"subgraph",subgraphId:c,nodeId:i}}return null}function _w(n){const o=po(n);return Ht({type:"node",nodeId:n.id,subgraphId:o?.scope==="subgraph"?o.subgraphId:null})}function L0(n,o,s=null){return n.map(l=>{const i=s===null?_w(l):Ht({type:"node",nodeId:l.id,subgraphId:s}),c=o[i];return!c||l.stableKey===c?l:{...l,stableKey:c}})}function A0(n,o,s){return n.map(l=>{const i=Ht({type:"group",groupId:l.id,subgraphId:s}),c=o[i];return!c||l.stableKey===c?l:{...l,stableKey:c}})}function jo(n,o){const s=L0(n.nodes,o),l=A0(n.groups??[],o,null),i=s.some((g,b)=>g!==n.nodes[b]),c=l.some((g,b)=>g!==(n.groups??[])[b]),f=n.definitions?.subgraphs;if(!f)return i||c?{...n,nodes:s,groups:l}:n;let m=!1;const p=f.map(g=>{const b=L0(g.nodes??[],o,g.id),x=A0(g.groups??[],o,g.id),w=Ht({type:"subgraph",subgraphId:g.id}),k=o[w];return b.some((S,j)=>S!==(g.nodes??[])[j])||x.some((S,j)=>S!==(g.groups??[])[j])||k!=null&&g.stableKey!==k?(m=!0,{...g,stableKey:k??g.stableKey,nodes:b,groups:x}):g});return!i&&!c&&!m?n:{...n,nodes:s,groups:l,definitions:{...n.definitions??{},subgraphs:p}}}function mu(n,o){const s=new Set,l=Array.from(n);for(;l.length>0;){const i=l.pop();if(!i||s.has(i))continue;s.add(i);const c=o.get(i);if(c)for(const f of c)s.has(f)||l.push(f)}return s}function Dw(n){const o=new Set(n.map(l=>l.id)),s=new Map;for(const l of n)for(const i of l.nodes??[]){if(!o.has(i.type))continue;const c=s.get(i.type)??[];c.push({parentId:l.id,nodeId:i.id}),s.set(i.type,c)}return s}function na(n,o,s){return!s||s.length===0?null:pa(o,s).get(n)??null}function Bw(n,o){const s=eb(n,({ref:l,currentSubgraphId:i})=>l.type==="node"&&o.type==="node"?l.id===o.id:l.type==="group"&&o.type==="group"?o.id===l.id&&(o.subgraphId??null)===i:l.type==="subgraph"&&o.type==="subgraph"?o.id===l.id:!1);return s?{groupKeys:s.groupKeys,subgraphIds:s.subgraphIds}:null}function Mf(n,o,s=null){const l=n.nodes??[],i=n.groups??[],c=n.definitions?.subgraphs??[],f=new Map(c.map(w=>[w.id,w])),m=new Set(c.map(w=>w.id)),p=new Map,g=[];for(const w of l){const k=po(w);if(k?.scope==="subgraph"){const C=p.get(k.subgraphId);C?C.push(w):p.set(k.subgraphId,[w])}else g.push(w)}const b=new Map;for(const w of c){const k=new Set;for(const C of w.nodes??[])m.has(C.type)&&k.add(C.type);k.size>0&&b.set(w.id,k)}const x=new Set;if(s){const w=f.get(s);if(!w)return x;const k=w.groups??[];if(!k.find(L=>L.id===o))return x;const S=w.nodes??[],j=pa(S,k),N=new Set,E=new Set;for(const L of S)j.get(L.id)===o&&(m.has(L.type)?N.add(L.type):E.add(L.id));const H=p.get(s)??[];for(const L of H){const z=po(L);z?.scope==="subgraph"&&E.has(z.nodeId)&&x.add(L.id)}const V=mu(N,b);for(const L of V){const z=p.get(L)??[];for(const I of z)x.add(I.id)}}else{if(!i.find(N=>N.id===o))return x;const k=pa(g,i);for(const N of g)k.get(N.id)===o&&x.add(N.id);const C=n.extra?.[$r],S=new Set;if(C&&typeof C=="object")for(const[N,E]of Object.entries(C))E===o&&S.add(N);const j=mu(S,b);for(const N of j){const E=p.get(N)??[];for(const H of E)x.add(H.id)}}return x}function tb(n){const o=n.definitions?.subgraphs??[],s=new Set(o.map(i=>i.id)),l=new Map;for(const i of o){const c=new Set;for(const f of i.nodes??[])s.has(f.type)&&c.add(f.type);c.size>0&&l.set(i.id,c)}return l}function R0(n,o){const s=tb(n),l=mu([o],s),i=new Set;for(const c of n.nodes??[]){const f=po(c);f?.scope==="subgraph"&&l.has(f.subgraphId)&&i.add(c.id)}return i}function zw(n,o){return n.scope==="subgraph"?n.subgraphId:n.scope==="root"?null:Aw(o,n.groupKey)}function Hw(n,o){const s=new Map;let l=Math.max(0,...o.map(c=>c.id))+1;const i=n.map(c=>{const f=l++;return s.set(c.id,f),{...c,id:f}});return{idMap:s,promotedGroups:i}}function _0(n,o){if(o.size===0)return n;const s=new Set;for(const c of n.links??[])(o.has(c[1])||o.has(c[3]))&&s.add(c[0]);const l=(n.links??[]).filter(c=>!s.has(c[0])),i=(n.nodes??[]).filter(c=>!o.has(c.id)).map(c=>{const f=(c.inputs??[]).map(p=>p.link!=null&&s.has(p.link)?{...p,link:null}:p),m=(c.outputs??[]).map(p=>{const g=(p.links??[]).filter(b=>!s.has(b));return{...p,links:g.length>0?g:null}});return{...c,inputs:f,outputs:m}});return{...n,nodes:i,links:l}}function Vw(n,o,s,l){if(!Array.isArray(n.widgets_values)){const c={...n.widgets_values||{}};return l?(c[l]=s,n.type==="VHS_VideoCombine"&&l==="save_image"&&"save_output"in c&&(c.save_output=s)):o>=0&&(c[String(o)]=s),{...n,widgets_values:c}}let i=[...n.widgets_values];return o>=i.length?i.push(s):i[o]=s,n.type==="Power Lora Loader (rgthree)"&&(i=i.filter(c=>c!==null)),{...n,widgets_values:i}}function Kw(n,o){if(!Array.isArray(n.widgets_values))return n;const s=[...n.widgets_values];for(const[l,i]of Object.entries(o)){const c=parseInt(l,10);s[c]=i}return{...n,widgets_values:s}}function Yi(n,o){const s=po(o)??{scope:"root",nodeId:o.id};if(s.scope==="root"){const c=n.nodes.map(f=>f.id===s.nodeId?{...f,widgets_values:o.widgets_values??[]}:f);return{...n,nodes:c}}const l=n.definitions?.subgraphs;if(!l)return n;const i=l.map(c=>{if(c.id!==s.subgraphId)return c;const f=c.nodes.map(m=>m.id===s.nodeId?{...m,widgets_values:o.widgets_values??[]}:m);return{...c,nodes:f}});return{...n,definitions:{...n.definitions,subgraphs:i}}}function Jd(n,o,s){const l=["fixed","randomize","increment","decrement"];if(Array.isArray(s.widgets_values)){const c=s.widgets_values.find(f=>typeof f=="string"&&l.includes(f.toLowerCase()));if(typeof c=="string"){const f=c.toLowerCase();if(l.includes(f))return f}}const i=nl(n,o,s);if(i!==null&&Array.isArray(s.widgets_values)){const c=Number(s.widgets_values[i]),f=Qy(c);if(f)return f;const p=(s.outputs??[]).some(w=>String(w.name||"").toLowerCase().includes("seed")&&String(w.type||"").toUpperCase().includes("INT")),g=s.widgets_values.slice(i+1),b=g.length>0&&g.every(w=>w===""||w===null||w===void 0),x=s.properties&&("randomMin"in s.properties||"randomMax"in s.properties);if(p&&b&&x)return"randomize"}return"fixed"}function Uw(n,o){const s={};for(const l of n.nodes){const i=o[l.type];if(!i?.input)continue;const c=i.input_order?.required||Object.keys(i.input.required||{}),f=i.input_order?.optional||Object.keys(i.input.optional||{}),m=[...c,...f];for(const p of m){const g=i.input.required?.[p]||i.input.optional?.[p];if(!g)continue;const[b]=g;if(!Array.isArray(b)||b.length===0||l.inputs.find(E=>E.name===p)?.link!=null)continue;const w=Fr(n,o,l,p);if(w===null)continue;const k=ua(l,p,w);if(k==null)continue;const C=Pf(k,b,{comboIndexToValue:!0}),S=String(C),j=S.split(/[\\/]/).pop()??S;if(!b.some(E=>{const H=String(E);return H===S||H===j})){const E=String(l.id);s[E]||(s[E]=[]),s[E].push({type:"workflow_load",message:`Missing value: ${S}`,details:"Not found on server.",inputName:p})}}}return s}const ce=Oo()(yr((n,o)=>{const s=_=>{const{hiddenItems:U,workflow:R,stableKeyByPointer:D}=o();if(!R){ln.getState().setNodeErrors(_);return}const K=Object.keys(_).filter(Oe=>{const Ne=Number(Oe);return Number.isFinite(Ne)?fs(R,D,Ne).some(we=>!!U[we]):!1});if(K.length>0){const Oe={...U};for(const Ne of K){const we=Number(Ne);if(Number.isFinite(we))for(const J of fs(R,D,we))delete Oe[J]}n({hiddenItems:Oe})}ln.getState().setNodeErrors(_)},l=(_,U)=>{const{workflow:R,hiddenItems:D,connectionHighlightModes:G,mobileLayout:K,stableKeyByPointer:Oe,pointerByStableKey:Ne}=o();if(!R)return;const we=Hn(R,_);if(!we)return;const{nodeId:J,subgraphId:ke}=we;if(!R.nodes.some(qe=>{if(qe.id!==J)return!1;const at=po(qe);return ke==null?at?.scope!=="subgraph":at?.scope==="subgraph"&&at.subgraphId===ke}))return;const ee=new Set,se=R.links.filter(qe=>{const at=qe[3]===J;return at&&ee.add(qe[0]),at}),xe=R.links.filter(qe=>{const at=qe[1]===J;return at&&ee.add(qe[0]),at});let Ue=R.last_link_id;const Le=new Map,Ve=new Map,F=[];if(U)for(const qe of xe){const[,,,at,pt,Mt]=qe,Wt=se.find(Ke=>N0(Ke[5],Mt));if(!Wt)continue;const[,Yt,be]=Wt;Ue+=1;const Q=[Ue,Yt,be,at,pt,Mt];F.push(Q);const re=`${at}:${pt}`;Le.set(re,Q[0]);const ge=`${Yt}:${be}`,Te=Ve.get(ge)??[];Te.push(Q[0]),Ve.set(ge,Te)}const Se=[...R.links.filter(qe=>!ee.has(qe[0])),...F],Be=R.nodes.filter(qe=>qe.id!==J).map(qe=>{const at=qe.inputs.map((Mt,Wt)=>{const Yt=`${qe.id}:${Wt}`,be=Le.get(Yt);return be!=null?{...Mt,link:be}:Mt.link!=null&&ee.has(Mt.link)?{...Mt,link:null}:Mt}),pt=qe.outputs.map((Mt,Wt)=>{const be=(Mt.links??[]).filter(Te=>!ee.has(Te)),Q=`${qe.id}:${Wt}`,re=Ve.get(Q)??[],ge=[...be,...re];return{...Mt,links:ge.length>0?ge:null}});return{...qe,inputs:at,outputs:pt}}),Ge={...D};for(const qe of fs(R,Oe,J,ke))delete Ge[qe];for(const qe of aa(R,J,ke))delete Ge[qe];const et={...G};delete et[J];const Ye=C0(K,J),rt=Lo(Ye,Oe,Ne),Pe=jo({...R,nodes:Be,links:Se,last_link_id:Ue},rt.layoutToStable);n({workflow:Pe,hiddenItems:Ge,connectionHighlightModes:et,mobileLayout:Ye,stableKeyByPointer:rt.layoutToStable,pointerByStableKey:rt.stableToLayout})},i=(_,U,R,D,G)=>{const{workflow:K,pointerByStableKey:Oe}=o();if(!K)return;const Ne=Hn(K,_),we=Hn(K,R);if(!Ne||!we)return;const J=Ne.nodeId,ke=we.nodeId,ee=K.nodes.find(Be=>Be.id===J),se=K.nodes.find(Be=>Be.id===ke);if(!ee||!se)return;let xe=[...K.links],Ue=K.last_link_id;const Le=se.inputs[D]?.link;Le!=null&&(xe=xe.filter(Be=>Be[0]!==Le)),Ue++;const Ve=Ue,F=[Ve,J,U,ke,D,G];xe.push(F);const Se=K.nodes.map(Be=>{if(Be.id===ke){const Ge=[...Be.inputs];return Ge[D]={...Ge[D],link:Ve},{...Be,inputs:Ge}}if(Be.id===J){const Ge=[...Be.outputs],rt=[...(Ge[U]?.links??[]).filter(Pe=>Pe!==Le),Ve];return Ge[U]={...Ge[U],links:rt},{...Be,outputs:Ge}}if(Le!=null&&Be.id!==J&&Be.outputs.some(et=>et.links?.includes(Le))){const et=Be.outputs.map(Ye=>{if(Ye.links?.includes(Le)){const rt=Ye.links.filter(Pe=>Pe!==Le);return{...Ye,links:rt.length>0?rt:null}}return Ye});return{...Be,outputs:et}}return Be});n({workflow:{...K,nodes:Se,links:xe,last_link_id:Ue}})},c=(_,U)=>{const{workflow:R,pointerByStableKey:D}=o();if(!R)return;const G=Hn(R,_);if(!G)return;const K=G.nodeId,Oe=R.nodes.find(ke=>ke.id===K);if(!Oe)return;const Ne=Oe.inputs[U]?.link;if(Ne==null)return;const we=R.links.filter(ke=>ke[0]!==Ne),J=R.nodes.map(ke=>{if(ke.id===K){const se=[...ke.inputs];return se[U]={...se[U],link:null},{...ke,inputs:se}}if(ke.outputs.some(se=>se.links?.includes(Ne))){const se=ke.outputs.map(xe=>{if(xe.links?.includes(Ne)){const Ue=xe.links.filter(Le=>Le!==Ne);return{...xe,links:Ue.length>0?Ue:null}}return xe});return{...ke,outputs:se}}return ke});n({workflow:{...R,nodes:J,links:we}})},f=(_,U)=>{const{workflow:R,nodeTypes:D,mobileLayout:G}=o();if(!R||!D)return null;const K=D[_];if(!K)return null;const Oe=R.last_node_id+1,Ne=[],we=K.input?.required??{},J=K.input?.optional??{},ke=K.input_order?.required??Object.keys(we),ee=K.input_order?.optional??Object.keys(J);for(const Ye of ke){const rt=we[Ye];if(!rt)continue;const[Pe]=rt;if(Array.isArray(Pe))continue;const qe=String(Pe).toUpperCase();["INT","FLOAT","BOOLEAN","STRING"].includes(qe)||Ne.push({name:Ye,type:String(Pe),link:null})}for(const Ye of ee){const rt=J[Ye];if(!rt)continue;const[Pe]=rt;if(Array.isArray(Pe))continue;const qe=String(Pe).toUpperCase();["INT","FLOAT","BOOLEAN","STRING"].includes(qe)||Ne.push({name:Ye,type:String(Pe),link:null})}const se=(K.output??[]).map((Ye,rt)=>({name:K.output_name?.[rt]??Ye,type:Ye,links:null,slot_index:rt})),xe=[];for(const Ye of ke){const rt=we[Ye];if(!rt)continue;const[Pe,qe]=rt;if(Array.isArray(Pe)){xe.push(Pe[0]??"");continue}const at=String(Pe).toUpperCase();at==="INT"||at==="FLOAT"?xe.push(qe?.default??0):at==="STRING"?xe.push(qe?.default??""):at==="BOOLEAN"&&xe.push(qe?.default??!1)}for(const Ye of ee){const rt=J[Ye];if(!rt)continue;const[Pe,qe]=rt;if(Array.isArray(Pe)){xe.push(Pe[0]??"");continue}const at=String(Pe).toUpperCase();at==="INT"||at==="FLOAT"?xe.push(qe?.default??0):at==="STRING"?xe.push(qe?.default??""):at==="BOOLEAN"&&xe.push(qe?.default??!1)}let Ue=[0,0];if(U?.nearNodeStableKey){const Ye=Hn(R,U.nearNodeStableKey,o().pointerByStableKey);Ye&&(Ue=Nw(R,Ye.nodeId)??Ue)}else if(U?.inSubgraphId){const Ye=R.nodes.filter(rt=>{const Pe=po(rt);return Pe?.scope==="subgraph"&&Pe.subgraphId===U.inSubgraphId});if(Ye.length>0){const rt=Math.max(...Ye.map(qe=>qe.pos[1]+(qe.size?.[1]??100)));Ue=[Math.min(...Ye.map(qe=>qe.pos[0])),rt+80]}else Ue=k0(R)}else Ue=k0(R);if(U?.inGroupId!=null){const rt=[...R.groups??[],...(R.definitions?.subgraphs??[]).flatMap(Pe=>Pe.groups??[])].find(Pe=>Pe.id===U.inGroupId);rt&&(Ue=Cw(Ue,rt,[200,100]))}const Le={};U?.inSubgraphId&&(Le[kf]={scope:"subgraph",subgraphId:U.inSubgraphId,nodeId:Oe});const Ve={id:Oe,type:_,pos:Ue,size:[200,100],flags:{},order:0,mode:0,inputs:Ne,outputs:se,properties:Le,widgets_values:xe},F=xw(G,Oe,{groupId:U?.inGroupId??void 0,subgraphId:U?.inSubgraphId??void 0}),{stableKeyByPointer:Se,pointerByStableKey:Be}=o(),Ge=Lo(F,Se,Be),et=jo({...R,nodes:[...R.nodes,Ve],last_node_id:Oe},Ge.layoutToStable);return n({workflow:et,mobileLayout:F,stableKeyByPointer:Ge.layoutToStable,pointerByStableKey:Ge.stableToLayout}),Oe},m=(_,U,R)=>{const{workflow:D,nodeTypes:G,pointerByStableKey:K}=o();if(!D||!G)return null;const Oe=Hn(D,U);if(!Oe)return null;const Ne=Oe.nodeId,we=D.nodes.find(Ve=>Ve.id===Ne);if(!we)return null;const J=we.inputs[R];if(!J)return null;const ke=G[_];if(!ke)return null;const ee=J.type.toUpperCase(),se=(ke.output??[]).findIndex(Ve=>N0(String(Ve),ee));if(se<0)return null;const xe=o().addNode(_,{nearNodeStableKey:U});if(xe===null)return null;const Ue=Ht({type:"node",nodeId:xe,subgraphId:Oe.subgraphId}),Le=o().stableKeyByPointer[Ue];return Le?(o().connectNodes(Le,se,U,R,J.type),xe):null},p=(_,U)=>{n(R=>({...(()=>{const D=R.workflow?Hn(R.workflow,_,R.pointerByStableKey):null;if(!D)return{};const G=String(D.nodeId);return{nodeOutputs:{...R.nodeOutputs,[G]:U}}})()}))},g=_=>{n(U=>{const R=U.workflow?Hn(U.workflow,_,U.pointerByStableKey):null;if(!R)return{};const D=R.nodeId,G=U.connectionHighlightModes[D]??"off",K=G==="off"?"inputs":G==="inputs"?"outputs":G==="outputs"?"both":"off";return{connectionHighlightModes:{...U.connectionHighlightModes,[D]:K}}})},b=(_,U)=>{n(R=>({...(()=>{const D=R.workflow?Hn(R.workflow,_,R.pointerByStableKey):null;return D?{connectionHighlightModes:{...R.connectionHighlightModes,[D.nodeId]:U}}:{}})()}))},x=(_,U)=>{_&&n(R=>{const D={...R.hiddenItems};return U?D[_]=!0:delete D[_],{hiddenItems:D}})},w=_=>{const{workflow:U,pointerByStableKey:R}=o();if(!U)return;const D=Hn(U,_);if(!D)return;const G=U.definitions?.subgraphs??[],K=D.subgraphId??null,Oe=U.nodes.find(Le=>{if(Le.id!==D.nodeId)return!1;const Ve=po(Le);return K===null?Ve?.scope!=="subgraph":Ve?.scope==="subgraph"&&Ve.subgraphId===K});if(!Oe)return;const Ne=new Map(G.map(Le=>[Le.id,Le])),we=Dw(G),J=po(Oe),ke=U.nodes.filter(Le=>po(Le)?.scope!=="subgraph"),ee=J?.scope==="subgraph"?J.nodeId:Oe.id,xe=(()=>{const Le=new Set,Ve=[ee];if(J?.scope==="subgraph"){const F=Ne.get(J.subgraphId),Se=new Map;for(F?.links?.forEach(Be=>{const Ge=Se.get(Be.target_id)??[];Ge.push(Be.origin_id),Se.set(Be.target_id,Ge)});Ve.length>0;){const Be=Ve.pop();if(Be===void 0)continue;(Se.get(Be)??[]).forEach(et=>{Le.has(et)||(Le.add(et),Ve.push(et))})}return Le}for(;Ve.length>0;){const F=Ve.pop();if(F===void 0)continue;const Se=U.nodes.find(Be=>Be.id===F);Se&&Se.inputs?.forEach((Be,Ge)=>{if(Be.link===null)return;const et=rl(U,F,Ge);if(!et)return;const Ye=et.node.id;Le.has(Ye)||(Le.add(Ye),Ve.push(Ye))})}return Le})(),Ue=J?.scope==="subgraph"?J.subgraphId:null;n(Le=>{const Ve={...Le.hiddenItems};for(const Ge of fs(U,Le.stableKeyByPointer,D.nodeId,K))delete Ve[Ge];xe.forEach(Ge=>{for(const et of fs(U,Le.stableKeyByPointer,Ge,Ue))delete Ve[et]});const F={...Le.collapsedItems},Se=(Ge,et=null)=>{if(Ge!=null)for(const Ye of Fi(Le.mobileLayout,Ge,et))delete Ve[Ye],delete F[Ye]},Be=Ge=>{if(!Ge)return;const et=Wi(U,Ge);et&&(delete F[et],delete Ve[et])};if(!J||J.scope==="root"){const Ge=na(Oe.id,ke,U.groups??[]);Se(Ge,null),xe.forEach(et=>{const Ye=na(et,ke,U.groups??[]);Se(Ye,null)})}else{Be(J.subgraphId);const Ge=Ne.get(J.subgraphId);if(Ge){const qe=na(J.nodeId,Ge.nodes??[],Ge.groups??[]);Se(qe,J.subgraphId)}const et=U.extra?.[$r],Ye=et&&typeof et=="object"?et[J.subgraphId]:void 0;typeof Ye=="number"&&Se(Ye,null),Ge&&xe.forEach(qe=>{const at=na(qe,Ge.nodes??[],Ge.groups??[]);Se(at,J.subgraphId)});const rt=[J.subgraphId],Pe=new Set;for(;rt.length>0;){const qe=rt.pop();if(!qe||Pe.has(qe))continue;Pe.add(qe);const at=we.get(qe)??[];for(const pt of at){Be(pt.parentId);const Mt=Ne.get(pt.parentId);if(Mt){const Wt=na(pt.nodeId,Mt.nodes??[],Mt.groups??[]);Se(Wt,pt.parentId)}Pe.has(pt.parentId)||rt.push(pt.parentId)}}}return{hiddenItems:Ve,collapsedItems:F}})},k=(_,U,R,D)=>{const{workflow:G,embedWorkflow:K,pointerByStableKey:Oe}=o();if(!G)return;const Ne=Hn(G,_);if(!Ne)return;const we=Ne.nodeId,J=G.nodes.map(se=>se.id===we?Vw(se,U,R,D):se),ke=J.find(se=>se.id===we),ee=K&&ke?Yi(K,ke):K;n({workflow:{...G,nodes:J},embedWorkflow:ee}),ln.getState().clearNodeError(we)},C=(_,U)=>{const{workflow:R,embedWorkflow:D,pointerByStableKey:G}=o();if(!R)return;const K=Hn(R,_);if(!K)return;const Oe=K.nodeId,Ne=R.nodes.map(ke=>ke.id===Oe?Kw(ke,U):ke),we=Ne.find(ke=>ke.id===Oe),J=D&&we?Yi(D,we):D;n({workflow:{...R,nodes:Ne},embedWorkflow:J}),ln.getState().clearNodeError(Oe)},S=(_,U)=>{const{workflow:R,pointerByStableKey:D}=o();if(!R)return;const G=Hn(R,_);if(!G)return;const K=G.nodeId,Oe=U?.trim()??"",Ne=R.nodes.map(we=>{if(we.id!==K)return we;const J={...we.properties??{}},ke={...we,properties:J};return Oe?(ke.title=Oe,J.title=Oe):(delete ke.title,delete J.title),ke});n({workflow:{...R,nodes:Ne}})},j=_=>{const{workflow:U,pointerByStableKey:R}=o();if(!U)return;const D=Hn(U,_);if(!D)return;const G=D.nodeId,K=U.nodes.map(Oe=>{if(Oe.id===G){const we=(Oe.mode||0)===4?0:4;return{...Oe,mode:we}}return Oe});n({workflow:{...U,nodes:K}})},N=(_,U)=>{const{hiddenItems:R,workflow:D,pointerByStableKey:G}=o();if(!D)return;const K=Hn(D,_);if(!K)return;const Oe=K.nodeId;if(R[_]&&o().setItemHidden(_,!1),document.body.dataset.textareaFocus==="true")return;o().setItemCollapsed(_,!1);const we=(J,ke)=>{const ee=document.getElementById(`node-anchor-${Oe}`)??document.getElementById(`node-${Oe}`),se=document.getElementById(`node-card-${Oe}`)??document.getElementById(`node-${Oe}`);if(!ee||!se){J>0?requestAnimationFrame(()=>we(J-1,ke)):ke>0&&setTimeout(()=>we(10,ke-1),200);return}const xe=ee.closest('[data-node-list="true"]');if(xe){const Be=ee.getBoundingClientRect(),Ge=xe.getBoundingClientRect(),et=Be.top-Ge.top,Ye=Math.max(0,xe.scrollTop+et);xe.scrollTo({top:Ye,behavior:"smooth"})}else ee.scrollIntoView({behavior:"smooth",block:"start"});const Ue=xe||window;let Le=null;const Ve=()=>{document.querySelectorAll(".highlight-pulse").forEach(Be=>Be.classList.remove("highlight-pulse")),se.classList.add("highlight-pulse"),setTimeout(()=>se.classList.remove("highlight-pulse"),1200),"vibrate"in navigator&&navigator.vibrate(10),U&&window.dispatchEvent(new CustomEvent("node-show-label",{detail:{nodeId:Oe,label:U}}))},F=()=>{Le&&clearTimeout(Le),Le=setTimeout(()=>{Se(),Ve()},120)},Se=()=>{Le&&(clearTimeout(Le),Le=null),Ue.removeEventListener("scroll",F)};Ue.addEventListener("scroll",F,{passive:!0}),Le=setTimeout(()=>{Se(),Ve()},200)};we(10,2)},E=(_,U,R,D)=>{n(G=>{const K=Date.now(),Oe=_&&U&&G.workflow?(()=>{const xe=Hn(G.workflow,U,G.pointerByStableKey);return xe?String(xe.nodeId):null})():null,Ne=_?R??G.executingPromptId:null,we=_?Oe??G.executingNodeId:null,J={isExecuting:_,executingNodeId:we,executingPromptId:Ne,progress:D},ke=(xe,Ue)=>{if(!xe||Ue<=0||G.workflow?.nodes.find(Ge=>String(Ge.id)===xe)?.mode===4)return G.nodeDurationStats;const Ve=String(xe),F=G.nodeDurationStats[Ve],Se=(F?.count??0)+1,Be=F?(F.avgMs*F.count+Ue)/Se:Ue;return{...G.nodeDurationStats,[Ve]:{avgMs:Be,count:Se}}};if(!_){if(G.currentNodeStartTime&&G.executingNodeId){const xe=K-G.currentNodeStartTime;J.nodeDurationStats=ke(G.executingNodeId,xe)}if(G.executionStartTime&&G.workflow){const xe=K-G.executionStartTime,Ue=gu(G.workflow),Le=G.workflowDurationStats[Ue],Ve=(Le?.count??0)+1,F=Le?(Le.avgMs*Le.count+xe)/Ve:xe;J.workflowDurationStats={...G.workflowDurationStats,[Ue]:{avgMs:F,count:Ve}}}return J.executionStartTime=null,J.currentNodeStartTime=null,J}const ee=Ne&&Ne!==G.executingPromptId,se=we&&we!==G.executingNodeId;if(ee&&(J.executionStartTime=K,J.currentNodeStartTime=K),se&&G.currentNodeStartTime&&G.executingNodeId){const xe=K-G.currentNodeStartTime;J.nodeDurationStats=ke(G.executingNodeId,xe),J.currentNodeStartTime=K}else G.currentNodeStartTime||(J.currentNodeStartTime=K);return J})},H=_=>{n(U=>{const R=O0(_),D=Lo(R,U.stableKeyByPointer,U.pointerByStableKey);return{workflow:U.workflow?jo(U.workflow,D.layoutToStable):U.workflow,mobileLayout:R,stableKeyByPointer:D.layoutToStable,pointerByStableKey:D.stableToLayout}})},V=(_,U,R)=>{const{currentFilename:D,savedWorkflowStates:G,nodeTypes:K}=o(),Oe=R?.fresh??!1,Ne=R?.source??{type:"other"};ln.getState().clearNodeErrors();const we=uw(_),J=T0(_),ke=jf(we.nodes),ee={...we,nodes:ke,links:we.links??[],groups:we.groups??[],config:we.config??{},last_node_id:we.last_node_id??Math.max(0,...ke.map(Se=>Se.id)),last_link_id:we.last_link_id??0,version:we.version??.4},se=Pd(ee,K),xe=ho.getState(),Ue=U?xe.pinnedWidgets[U]:void 0;if(Ue&&!xe.pinnedWidgets[se]&&xe.setPinnedWidget(Ue,se),xe.restorePinnedWidgetForWorkflow(se,ee),D&&o().saveCurrentWorkflowState(),Oe&&G[se]){const Se={...G};delete Se[se],n({savedWorkflowStates:Se})}const Le={};if(K)for(const Se of ee.nodes)nl(ee,K,Se)!==null&&(Le[Se.id]=Jd(ee,K,Se));let Ve=Oe?null:G[se];!Ve&&!Oe&&U&&G[U]&&(Ve=G[U],n({savedWorkflowStates:{...G,[se]:G[U]}}));let F=ee;if(Ve){const Se=ee.nodes.map(re=>{const ge=Ve.nodes[re.id];return ge?{...re,mode:ge.mode??re.mode,flags:ge.flags??re.flags,widgets_values:ge.widgets_values??re.widgets_values}:re}),Be={...ee,nodes:Se},Ge=Qd(Be,o().hiddenItems),et={...Ve.collapsedItems??{}},Ye={...Ve.hiddenItems??{}},rt=ds(Be,Ge),Pe=Lo(rt,o().stableKeyByPointer,o().pointerByStableKey),qe=Xd(Ge,Pe.layoutToStable),at=Rw(et,Pe.layoutToStable),pt=Xd(Ye,Pe.layoutToStable),Mt=Zd({...et,...at},Pe.layoutToStable,Pe.stableToLayout),Wt=Gi({...Ye,...pt},Pe.layoutToStable,Pe.stableToLayout),Yt={},be=jo(Be,Pe.layoutToStable);F=be;let Q=J;if(Q)for(const re of be.nodes)Q=Yi(Q,re);n({workflowSource:Ne,workflow:be,embedWorkflow:Q,originalWorkflow:JSON.parse(JSON.stringify(be)),currentFilename:U||null,currentWorkflowKey:se,collapsedItems:{...Yt,...Mt},hiddenItems:{...Wt,...qe},mobileLayout:rt,stableKeyByPointer:Pe.layoutToStable,pointerByStableKey:Pe.stableToLayout,runCount:1,followQueue:!1,workflowLoadedAt:Date.now()}),$n.getState().setSeedModes({...Le,...Ve.seedModes}),$n.getState().setSeedLastValues({}),eo.getState().setCurrentPanel("workflow"),Mo.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}})}else{const Se=o(),Be=Se.currentWorkflowKey===se,Ge=Qd(ee,o().hiddenItems),et=ds(ee,Ge),Ye=Lo(et,o().stableKeyByPointer,o().pointerByStableKey),rt=jo(ee,Ye.layoutToStable),Pe=Xd(Ge,Ye.layoutToStable),qe={},at=Be?Zd(Se.collapsedItems,Ye.layoutToStable,Ye.stableToLayout):{};ln.getState().setError(null),n({workflowSource:Ne,workflow:rt,embedWorkflow:J,originalWorkflow:JSON.parse(JSON.stringify(rt)),currentFilename:U||null,currentWorkflowKey:se,collapsedItems:{...qe,...at},mobileLayout:et,stableKeyByPointer:Ye.layoutToStable,pointerByStableKey:Ye.stableToLayout,hiddenItems:Pe,runCount:1,followQueue:!1,workflowLoadedAt:Date.now()}),$n.getState().setSeedModes(Le),$n.getState().setSeedLastValues({}),eo.getState().setCurrentPanel("workflow"),Mo.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}})}if(K){const Se=Uw(F,K),Be=Object.values(Se).reduce((Ge,et)=>Ge+et.length,0);Be>0?(s(Se),ln.getState().setError(`Workflow load error: ${Be} input${Be===1?"":"s"} reference missing options.`)):ln.getState().clearNodeErrors()}},L=()=>{const{currentWorkflowKey:_,savedWorkflowStates:U}=o();if(_){const R={...U};delete R[_],n({savedWorkflowStates:R})}ln.getState().clearNodeErrors(),n({workflowSource:null,workflow:null,embedWorkflow:null,originalWorkflow:null,currentFilename:null,currentWorkflowKey:null,collapsedItems:{},hiddenItems:{},mobileLayout:lu(),stableKeyByPointer:{},pointerByStableKey:{},runCount:1,nodeOutputs:{},promptOutputs:{},followQueue:!1,workflowLoadedAt:Date.now(),connectionHighlightModes:{}}),$n.getState().clearSeedState(),ho.getState().clearCurrentPin(),eo.getState().setCurrentPanel("workflow"),Mo.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}})},z=(_,U)=>{ln.getState().setError(null);const R=Pd(_,o().nodeTypes),D=ds(_,Pi(o().hiddenItems,o().pointerByStableKey)),G=Lo(D,o().stableKeyByPointer,o().pointerByStableKey),K=jo(_,G.layoutToStable);n({workflow:K,embedWorkflow:T0(K),originalWorkflow:JSON.parse(JSON.stringify(K)),currentFilename:U,currentWorkflowKey:R,mobileLayout:D,stableKeyByPointer:G.layoutToStable,pointerByStableKey:G.stableToLayout})},I=_=>{n({nodeTypes:_});const{workflow:U,currentWorkflowKey:R,currentFilename:D,savedWorkflowStates:G}=o();if(!U)return;const K=Pd(U,_);if(R===K)return;const Oe={...G};R&&Oe[R]&&!Oe[K]?(Oe[K]=Oe[R],delete Oe[R]):!R&&D&&Oe[D]&&!Oe[K]&&(Oe[K]=Oe[D]);const Ne=ho.getState(),we=D?Ne.pinnedWidgets[D]:void 0,J=R?Ne.pinnedWidgets[R]:void 0;we&&!Ne.pinnedWidgets[K]?Ne.setPinnedWidget(we,K):J&&!Ne.pinnedWidgets[K]&&Ne.setPinnedWidget(J,K),n({currentWorkflowKey:K,savedWorkflowStates:Oe}),Ne.restorePinnedWidgetForWorkflow(K,U)},$=()=>{const{workflow:_,currentWorkflowKey:U,savedWorkflowStates:R,collapsedItems:D,hiddenItems:G}=o(),K=$n.getState().seedModes;if(!_||!U)return;const Oe=R[U]?.bookmarkedItems??[],Ne={};for(const we of _.nodes)Ne[we.id]={mode:we.mode,flags:we.flags?{collapsed:!!we.flags.collapsed}:void 0,widgets_values:we.widgets_values};n({savedWorkflowStates:{...R,[U]:{nodes:Ne,seedModes:{...K},collapsedItems:{...D},hiddenItems:{...G},bookmarkedItems:[...Oe]}}})},W=()=>{n({nodeOutputs:{}})},ie=(_,U)=>{!_||U.length===0||n(R=>({promptOutputs:{...R.promptOutputs,[_]:[...R.promptOutputs[_]??[],...U]}}))},de=_=>{if(!_){n({promptOutputs:{}});return}n(U=>{if(!U.promptOutputs[_])return U;const R={...U.promptOutputs};return delete R[_],{promptOutputs:R}})},me=_=>{n({runCount:Math.max(1,Math.floor(_))})},Ae=_=>{n({followQueue:_})},Ee=()=>{n(_=>({connectionButtonsVisible:!_.connectionButtonsVisible}))},Ie=()=>{n({hiddenItems:{}})},B=(_,U)=>{n(R=>{const D={...R.collapsedItems};return U?D[_]=!0:delete D[_],{collapsedItems:D}})},le=(_,U)=>{const{workflow:R,pointerByStableKey:D}=o();if(!R)return;const G=qi(R,_);if(!G)return;if(G.type==="group"){const we=Mf(R,G.groupId,G.subgraphId);if(we.size===0)return;const J=U?4:0,ke=(R.nodes??[]).map(ee=>we.has(ee.id)?{...ee,mode:J}:ee);n({workflow:{...R,nodes:ke}});return}if(G.type!=="subgraph")return;const K=R0(R,G.subgraphId);if(K.size===0)return;const Oe=U?4:0,Ne=(R.nodes??[]).map(we=>K.has(we.id)?{...we,mode:Oe}:we);n({workflow:{...R,nodes:Ne}})},fe=(_,U)=>{const{workflow:R,stableKeyByPointer:D,pointerByStableKey:G}=o();if(!R)return;const K=qi(R,_);if(!K)return;if(K.type==="group"){const{hiddenItems:re,connectionHighlightModes:ge,mobileLayout:Te,collapsedItems:Ke}=o(),Me=K.groupId,it=K.subgraphId??null,tt=Fi(Te,Me,it),nt=new Set(tt);nt.add(K.stableKey);const st=nt.size>0?[...nt]:[K.stableKey],gt=U?.deleteNodes??!1?Mf(R,Me,it):new Set;let St=R;if(it){const dn=(R.definitions?.subgraphs??[]).map(pn=>pn.id!==it?pn:{...pn,groups:(pn.groups??[]).filter(Wn=>Wn.id!==Me)});St={...R,definitions:{...R.definitions??{},subgraphs:dn}}}else{let Bt=R.extra;const dn=R.extra?.[$r];if(dn&&typeof dn=="object"){let pn=!1;const Wn={};for(const[Kn,no]of Object.entries(dn))no===Me?(Wn[Kn]=null,pn=!0):Wn[Kn]=no;pn&&(Bt={...R.extra??{},[$r]:Wn})}St={...R,groups:(R.groups??[]).filter(pn=>pn.id!==Me),extra:Bt}}gt.size>0&&(St=_0(St,gt));const yt={...re},ft={...ge};for(const Bt of gt){for(const dn of fs(R,D,Bt))delete yt[dn];for(const dn of aa(R,Bt))delete yt[dn];delete ft[Bt]}let Et=Te;for(const Bt of gt)Et=C0(Et,Bt);for(const Bt of st)Et=vw(Et,Bt);const Ot={...Ke};for(const Bt of st)delete Ot[Bt],delete yt[Bt];const on=Lo(Et,D,G),Gt=jo(St,on.layoutToStable);n({workflow:Gt,hiddenItems:yt,connectionHighlightModes:ft,mobileLayout:Et,stableKeyByPointer:on.layoutToStable,pointerByStableKey:on.stableToLayout,collapsedItems:Ot});return}if(K.type!=="subgraph")return;const{hiddenItems:Oe,connectionHighlightModes:Ne,mobileLayout:we,collapsedItems:J}=o(),ke=U?.deleteNodes??!1,ee=K.subgraphId,se=R.definitions?.subgraphs??[],xe=se.find(re=>re.id===ee);if(!xe)return;const Le=Jy(we,{type:"subgraph",id:ee}),Ve=Le?zw(Le.containerId,we):null;if(ke){const re=tb(R),ge=mu([ee],re),Te=R0(R,ee),Ke={...Oe},Me={...Ne};for(const Ot of Te){for(const on of fs(R,D,Ot))delete Ke[on];for(const on of aa(R,Ot))delete Ke[on];delete Me[Ot]}const it=se.filter(Ot=>!ge.has(Ot.id));let tt=R.extra;const nt=R.extra?.[$r];if(nt&&typeof nt=="object"){const Ot={};for(const[on,Gt]of Object.entries(nt))ge.has(on)||(Ot[on]=Gt);tt={...R.extra??{},[$r]:Ot}}let st=_0(R,Te);st={...st,definitions:{...st.definitions??{},subgraphs:it},extra:tt};const wt=ds(st,Pi(Ke,G)),gt=Lo(wt,D,G),St=jo(st,gt.layoutToStable),yt={...J},ft={...Ke},Et=new Set(se.filter(Ot=>ge.has(Ot.id)).map(Ot=>Ot.stableKey).filter(Ot=>typeof Ot=="string"));for(const Ot of Et)delete yt[Ot],delete ft[Ot];n({workflow:St,hiddenItems:ft,connectionHighlightModes:Me,mobileLayout:wt,stableKeyByPointer:gt.layoutToStable,pointerByStableKey:gt.stableToLayout,collapsedItems:yt});return}const F=Ve==null?R.groups??[]:se.find(re=>re.id===Ve)?.groups??[],{idMap:Se,promotedGroups:Be}=Hw(xe.groups??[],F),Ge=(R.nodes??[]).map(re=>{const ge=po(re);if(ge?.scope!=="subgraph"||ge.subgraphId!==ee)return re;const Te={...re.properties??{}};return Te[kf]=Ve==null?{scope:"root",nodeId:ge.nodeId}:{scope:"subgraph",subgraphId:Ve,nodeId:ge.nodeId},{...re,properties:Te}}),et=se.filter(re=>re.id!==ee).map(re=>Ve!=null&&re.id===Ve?{...re,groups:[...re.groups??[],...Be]}:re);let Ye=R.groups??[];Ve==null&&Be.length>0&&(Ye=[...Ye,...Be]);let rt=R.extra;const Pe=R.extra?.[$r];if(Pe&&typeof Pe=="object"){const re={};for(const[ge,Te]of Object.entries(Pe))ge!==ee&&(re[ge]=Te);rt={...R.extra??{},[$r]:re}}const qe={...R,nodes:Ge,groups:Ye,definitions:{...R.definitions??{},subgraphs:et},extra:rt},at=ds(qe,Pi(Oe,G)),pt=Lo(at,D,G),Mt={...J},Wt={...Oe},Yt=xe.stableKey??Wi(R,ee);Yt&&(delete Mt[Yt],delete Wt[Yt]);const be=re=>{const ge={};for(const[Te,Ke]of Object.entries(re)){if(!Ke)continue;const Me=qi(R,Te);if(Me?.type==="group"&&Me.subgraphId===ee){const it=Se.get(Me.groupId);if(it==null)continue;const tt=Fi(at,it,Ve);for(const nt of tt)ge[nt]=!0;continue}ge[Te]=!0}return ge},Q=jo(qe,pt.layoutToStable);n(()=>({workflow:Q,mobileLayout:at,stableKeyByPointer:pt.layoutToStable,pointerByStableKey:pt.stableToLayout,collapsedItems:be(Mt),hiddenItems:Wt}))},$e=(_,U)=>{const{workflow:R,pointerByStableKey:D}=o();if(!R)return;const G=qi(R,_);if(!G)return;const K=U.trim();if(G.type==="group"){const{groupId:Oe,subgraphId:Ne}=G;if(Ne){const ke=(R.definitions?.subgraphs??[]).map(ee=>{if(ee.id!==Ne)return ee;const xe=(ee.groups??[]).map(Ue=>Ue.id===Oe?{...Ue,title:K}:Ue);return{...ee,groups:xe}});ln.getState().setError(null),n({workflow:{...R,definitions:{...R.definitions??{},subgraphs:ke}}});return}const we=(R.groups??[]).map(J=>J.id===Oe?{...J,title:K}:J);n({workflow:{...R,groups:we}});return}if(G.type==="subgraph"){const Oe=G.subgraphId,we=(R.definitions?.subgraphs??[]).map(J=>J.id===Oe?{...J,name:K}:J);n({workflow:{...R,definitions:{...R.definitions??{},subgraphs:we}}})}},Re=_=>{n({searchQuery:_})},T=_=>{n({searchOpen:_})},A=_=>{n({addNodeModalRequest:{id:++kw,groupId:_?.groupId??null,subgraphId:_?.subgraphId??null}})},O=()=>{n({addNodeModalRequest:null})},te=_=>{n(U=>{const R=Bw(U.mobileLayout,_);if(!R)return{};const D={...U.collapsedItems};for(const G of R.groupKeys)delete D[G];for(const G of R.subgraphIds){const K=U.workflow?Wi(U.workflow,G):null;K&&delete D[K]}if(_.type==="group")for(const G of Fi(U.mobileLayout,_.id,_.subgraphId??null))D[G]=!0;else if(_.type==="subgraph"){const G=U.workflow?Wi(U.workflow,_.id):null;G&&(D[G]=!0)}return{collapsedItems:D}})},X=(_,U)=>{!_||U<=0||n(R=>{const D=R.workflowDurationStats[_],G=(D?.count??0)+1,K=D?(D.avgMs*D.count+U)/G:U;return{workflowDurationStats:{...R.workflowDurationStats,[_]:{avgMs:K,count:G}}}})},pe=()=>{const{currentWorkflowKey:_,savedWorkflowStates:U,originalWorkflow:R,nodeTypes:D}=o(),G={...U};if(_?(delete G[_],ho.getState().clearPinnedWidgetForKey(_)):ho.getState().clearCurrentPin(),!R){$n.getState().setSeedModes({}),$n.getState().setSeedLastValues({}),n({savedWorkflowStates:G});return}const K={};if(D)for(const Ne of R.nodes)nl(R,D,Ne)!==null&&(K[Ne.id]=Jd(R,D,Ne));const Oe=JSON.parse(JSON.stringify(R));$n.getState().setSeedModes(K),$n.getState().setSeedLastValues({}),ln.getState().setError(null),n({savedWorkflowStates:G,...(()=>{const Ne=ds(Oe,Pi(o().hiddenItems,o().pointerByStableKey)),we=Lo(Ne,{},{});return{workflow:jo(Oe,we.layoutToStable),mobileLayout:Ne,stableKeyByPointer:we.layoutToStable,pointerByStableKey:we.stableToLayout}})(),runCount:1,workflowLoadedAt:Date.now()})},Y=()=>{const{workflow:_}=o();if(!_)return;let U=!1;const R=_.nodes.map(D=>{if(D.type==="PrimitiveNode"){if(!Array.isArray(D.widgets_values))return D;const G=D.outputs?.[0]?.type,K=String(G).toUpperCase();if(K!=="INT"&&K!=="FLOAT")return D;const Oe=D.widgets_values?.[1];if(!Oe||Oe==="fixed")return D;const Ne=D.widgets_values?.[0];if(typeof Ne!="number")return D;let we=Ne;if(Oe==="increment"?we=K==="INT"?Ne+1:Ne+.01:Oe==="decrement"?we=K==="INT"?Ne-1:Ne-.01:Oe==="randomize"&&(we=K==="INT"?Math.floor(Math.random()*0xffffffffffff):Math.random()),we!==Ne){U=!0;const J=[...D.widgets_values];return J[0]=we,{...D,widgets_values:J}}}return D});U&&n({workflow:{..._,nodes:R}})},ue=async _=>{const U=$n.getState(),R=U.seedModes,D=U.seedLastValues,{workflow:G,nodeTypes:K,embedWorkflow:Oe}=o();if(!G||!K){ln.getState().setError("Node types are still loading. Try again in a moment.");return}ln.getState().setError(null),n({isLoading:!0});try{let Ne=G,we=Oe,J={...D};for(let ke=0;ke<_;ke++){const ee={},se=Ne.nodes.map(F=>{const Se=nl(Ne,K,F);if(Se===null||!Array.isArray(F.widgets_values))return F;const Be=R[F.id]??Jd(Ne,K,F),Ge=Se+1;if(typeof F.widgets_values[Ge]=="string"){if(!Be||Be==="fixed")return F;const at=Number(F.widgets_values[Se])||0;let pt;switch(Be){case"randomize":pt=ca(K,F);break;case"increment":pt=at+1;break;case"decrement":pt=at-1;break;default:return F}const Mt=[...F.widgets_values];return Mt[Se]=pt,{...F,widgets_values:Mt}}const rt=Number(F.widgets_values[Se]),Pe=J[F.id]??null;let qe=null;return Jf(rt)?qe=nw(rt,Pe,K,F):Be&&Be!=="fixed"&&(Be==="randomize"?qe=ca(K,F):Be==="increment"?qe=(typeof Pe=="number"?Pe:rt)+1:Be==="decrement"&&(qe=(typeof Pe=="number"?Pe:rt)-1)),qe===null||(ee[F.id]=qe,J={...J,[F.id]:qe}),F});if(Ne={...Ne,nodes:se},we){let F=we;for(const Se of se)F=Yi(F,Se);we=F}U.setSeedLastValues(J),n({workflow:Ne,embedWorkflow:we});const xe={},Ue=new Set,Le=new Map;for(const F of Ne.nodes){if(F.mode===4)continue;let Se=null;if(K[F.type])Se=F.type;else{const Be=Object.entries(K).find(([,Ge])=>Ge.display_name===F.type||Ge.name===F.type);Be&&(Se=Be[0])}Se&&(Ue.add(F.id),Le.set(F.id,Se))}for(const F of Ne.nodes){if(F.mode===4)continue;const Se=Le.get(F.id);if(!Se)continue;const Be=D1(Ne,K,F,Se,Ue,Gf(Ne,F.id),ee);xe[String(F.id)]={class_type:Se,inputs:Be}}const Ve=await fetch(`${nn}/api/prompt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:xe,client_id:Wy,extra_data:{extra_pnginfo:{workflow:hu(we??Ne)}}})});if(!Ve.ok){const F=await Ve.json(),Se={};if(F.node_errors)for(const[Be,Ge]of Object.entries(F.node_errors)){const et=Ge.errors;et&&et.length>0&&(Se[Be]=et.map(Ye=>({type:Ye.type,message:Ye.message,details:Ye.details,inputName:Ye.extra_info?.input_name})))}throw Object.keys(Se).length>0&&s(Se),new Error(F.error?.message||"Failed to queue prompt")}ln.getState().clearNodeErrors()}}catch(Ne){ln.getState().setError(Ne instanceof Error?Ne.message:"Failed to queue workflow")}finally{jt.getState().fetchQueue(),n({isLoading:!1})}};return{workflowSource:null,workflow:null,embedWorkflow:null,originalWorkflow:null,currentFilename:null,currentWorkflowKey:null,nodeTypes:null,isLoading:!1,savedWorkflowStates:{},isExecuting:!1,executingNodeId:null,executingPromptId:null,progress:0,executionStartTime:null,currentNodeStartTime:null,nodeDurationStats:{},workflowDurationStats:{},nodeOutputs:{},promptOutputs:{},runCount:1,followQueue:!1,workflowLoadedAt:0,connectionHighlightModes:{},connectionButtonsVisible:!0,searchQuery:"",searchOpen:!1,addNodeModalRequest:null,collapsedItems:{},hiddenItems:{},stableKeyByPointer:{},pointerByStableKey:{},mobileLayout:lu(),setMobileLayout:H,addNode:f,addNodeAndConnect:m,deleteNode:l,deleteContainer:fe,connectNodes:i,disconnectInput:c,setNodeOutput:p,clearNodeOutputs:W,requestAddNodeModal:A,clearAddNodeModalRequest:O,toggleBypass:j,bypassAllInContainer:le,updateNodeWidget:k,updateNodeWidgets:C,updateNodeTitle:S,updateContainerTitle:$e,setExecutionState:E,addPromptOutputs:ie,clearPromptOutputs:de,queueWorkflow:ue,applyControlAfterGenerate:Y,setRunCount:me,setFollowQueue:Ae,cycleConnectionHighlight:g,setConnectionHighlightMode:b,toggleConnectionButtonsVisible:Ee,setSearchQuery:Re,setSearchOpen:T,prepareRepositionScrollTarget:te,scrollToNode:N,setItemHidden:x,revealNodeWithParents:w,showAllHiddenNodes:Ie,setItemCollapsed:B,setNodeTypes:I,loadWorkflow:V,unloadWorkflow:L,setSavedWorkflow:z,clearWorkflowCache:pe,updateWorkflowDuration:X,saveCurrentWorkflowState:$}},{name:"workflow-storage",storage:gr(()=>localStorage),partialize:n=>({workflow:n.workflow,embedWorkflow:n.embedWorkflow,originalWorkflow:n.originalWorkflow,currentFilename:n.currentFilename,currentWorkflowKey:n.currentWorkflowKey,savedWorkflowStates:n.savedWorkflowStates,runCount:n.runCount,hiddenItems:n.hiddenItems,collapsedItems:n.collapsedItems,stableKeyByPointer:n.stableKeyByPointer,pointerByStableKey:n.pointerByStableKey,connectionButtonsVisible:n.connectionButtonsVisible,mobileLayout:n.mobileLayout,isExecuting:n.isExecuting,executingNodeId:n.executingNodeId,executingPromptId:n.executingPromptId,progress:n.progress,executionStartTime:n.executionStartTime,currentNodeStartTime:n.currentNodeStartTime,nodeDurationStats:n.nodeDurationStats,workflowDurationStats:n.workflowDurationStats}),onRehydrateStorage:()=>n=>{if(n)if(n.workflow){const o=n.mobileLayout?O0(n.mobileLayout):null,s=Qd(n.workflow,n.hiddenItems??{});n.mobileLayout=o&&Ow(o,n.workflow)?o:ds(n.workflow,s);const l=Lo(n.mobileLayout,n.stableKeyByPointer??{},n.pointerByStableKey??{});n.workflow=jo(n.workflow,l.layoutToStable),n.originalWorkflow&&(n.originalWorkflow=jo(n.originalWorkflow,l.layoutToStable)),n.stableKeyByPointer=l.layoutToStable,n.pointerByStableKey=l.stableToLayout,n.hiddenItems=Gi(n.hiddenItems,l.layoutToStable,l.stableToLayout),n.collapsedItems=Zd(n.collapsedItems,l.layoutToStable,l.stableToLayout),n.hiddenItems=Gi(n.hiddenItems,l.layoutToStable,l.stableToLayout),n.hiddenItems=Gi(n.hiddenItems,l.layoutToStable,l.stableToLayout)}else n.mobileLayout=lu(),n.stableKeyByPointer={},n.pointerByStableKey={}}}));function gu(n){const o=[...n.nodes].sort((s,l)=>s.id-l.id).map(s=>({id:s.id,type:s.type,mode:s.mode,inputs:s.inputs?.map(l=>l.link??null)??[],outputs:s.outputs?.map(l=>l.links??[])??[]}));return JSON.stringify({nodes:o,links:n.links??[]})}const Of=Oo(n=>({appMenuOpen:!1,setAppMenuOpen:o=>n({appMenuOpen:o})})),qn=Oo((n,o)=>({history:[],isLoading:!1,addHistoryEntry:s=>{n(i=>i.history.some(c=>c.prompt_id===s.prompt_id)?i:{history:[s,...i.history]});const l=jt.getState();if(l.queueItemExpanded[s.prompt_id]===void 0&&l.setQueueItemExpanded(s.prompt_id,!0),s.workflow&&s.durationSeconds){const i=gu(s.workflow);ce.getState().updateWorkflowDuration(i,s.durationSeconds*1e3)}},fetchHistory:async()=>{n({isLoading:!0});try{const s=await H1(50),l=Object.entries(s).map(([c,f])=>{const m=[];for(const j of Object.values(f.outputs))j.images&&m.push(...j.images),j.gifs&&m.push(...j.gifs),j.videos&&m.push(...j.videos);let p=Date.now(),g=null,b=null,x=!1;if(f.status?.messages)for(const[j,N]of f.status.messages)j==="execution_start"&&N.timestamp&&(p=N.timestamp,g=N.timestamp),(j==="execution_end"||j==="execution_success")&&N.timestamp&&(b=N.timestamp),j==="execution_error"&&(x=!0);g===null&&p&&(g=p);const w=g!==null&&b!==null&&b>=g?(b-g)/1e3:void 0,k=f.status?.status_str?.toLowerCase()||"",C=!x&&f.status?.completed!==!1&&!k.includes("error"),S=f.prompt?.[3]?.extra_pnginfo?.workflow;return{prompt_id:c,timestamp:p,durationSeconds:w,success:C,outputs:{images:m},prompt:f.prompt[2],workflow:S}});l.sort((c,f)=>f.timestamp-c.timestamp),n({history:l});const i=jt.getState();for(const c of l)if(i.queueItemExpanded[c.prompt_id]===void 0&&i.setQueueItemExpanded(c.prompt_id,!0),c.workflow&&c.durationSeconds){const f=gu(c.workflow);ce.getState().updateWorkflowDuration(f,c.durationSeconds*1e3)}}catch(s){console.error("Failed to fetch history:",s)}finally{n({isLoading:!1})}},deleteItem:async s=>{try{await q1(s),n(l=>({history:l.history.filter(i=>i.prompt_id!==s)}))}catch(l){console.error("Failed to delete history item:",l)}},clearHistory:async()=>{try{await W1()}catch(s){console.error("Failed to clear history:",s);try{const l=o().history.map(i=>i.prompt_id);await y0(l)}catch(l){console.error("Failed to delete history items:",l)}}finally{n({history:[]})}},clearEmptyItems:async()=>{const s=o().history.filter(l=>l.outputs.images.length===0).map(l=>l.prompt_id);if(s.length!==0)try{await y0(s),n(l=>({history:l.history.filter(i=>!s.includes(i.prompt_id))}))}catch(l){console.error("Failed to delete empty history items:",l)}}})),Ut=Oo()(yr((n,o)=>({source:"output",currentFolder:null,folders:[],files:[],isLoading:!1,error:null,viewMode:"grid",showHidden:!1,filter:{search:"",favoritesOnly:!1,type:"all"},sort:{mode:"modified"},favorites:[],selectionMode:!1,selectedIds:[],selectionActionOpen:!1,filterModalOpen:!1,newFolderModalOpen:!1,outputsViewerOpen:!1,setSource:s=>{n({source:s,currentFolder:null,files:[],folders:[],selectionMode:!1,selectedIds:[]}),o().fetchFolders(),o().fetchFiles()},setCurrentFolder:s=>{const{currentFolder:l}=o(),i=l?`${l}/${s}`:s;n({currentFolder:i,files:[],selectionMode:!1,selectedIds:[]}),o().fetchFiles()},navigateToPath:s=>{n({currentFolder:s,files:[],selectionMode:!1,selectedIds:[]}),o().fetchFiles()},navigateUp:()=>{const{currentFolder:s}=o();if(!s)return;const l=s.split("/");l.pop();const i=l.length>0?l.join("/"):null;n({currentFolder:i,files:[],selectionMode:!1,selectedIds:[]}),o().fetchFiles()},fetchFolders:async()=>{try{const{showHidden:s}=o(),l=await P1(s),{source:i}=o();n({folders:i==="output"?l.output:l.input})}catch(s){console.error("Failed to fetch folders:",s)}},fetchFiles:async()=>{const{source:s,currentFolder:l,sort:i,showHidden:c}=o();n({isLoading:!0,error:null});try{const f=await Nf(s,1e3,0,i.mode,!1,l,c);n({files:f,isLoading:!1})}catch(f){n({error:f.message,isLoading:!1})}},setFilter:s=>{n(l=>({filter:{...l.filter,...s}}))},setSort:s=>{n({sort:s}),o().fetchFiles()},setViewMode:s=>{n({viewMode:s})},toggleShowHidden:()=>{n(s=>({showHidden:!s.showHidden})),o().fetchFolders(),o().fetchFiles()},toggleFavorite:s=>{n(l=>({favorites:l.favorites.includes(s)?l.favorites.filter(c=>c!==s):[...l.favorites,s]}))},toggleSelectionMode:()=>{n(s=>({selectionMode:!s.selectionMode,selectedIds:[],selectionActionOpen:!1}))},toggleSelection:s=>{n(l=>({selectedIds:l.selectedIds.includes(s)?l.selectedIds.filter(c=>c!==s):[...l.selectedIds,s]}))},selectAll:()=>{const s=o().getDisplayedFiles();n({selectedIds:s.map(l=>l.id)})},selectIds:(s,l="add")=>{n(i=>{if(l==="replace")return{selectedIds:[...s]};const c=new Set(i.selectedIds);return s.forEach(f=>c.add(f)),{selectedIds:Array.from(c)}})},clearSelection:()=>{n({selectedIds:[],selectionActionOpen:!1})},setSelectionActionOpen:s=>{n({selectionActionOpen:s})},setFilterModalOpen:s=>{n({filterModalOpen:s})},setNewFolderModalOpen:s=>{n({newFolderModalOpen:s})},setOutputsViewerOpen:s=>{n({outputsViewerOpen:s})},addFavorites:s=>{n(l=>{const i=new Set(l.favorites);return s.forEach(c=>i.add(c)),{favorites:Array.from(i)}})},removeFavorites:s=>{n(l=>({favorites:l.favorites.filter(i=>!s.includes(i))}))},refresh:()=>{o().fetchFolders(),o().fetchFiles()},getDisplayedFiles:()=>{const{files:s,filter:l,favorites:i,showHidden:c,sort:f}=o();let m=[...s];if(c||(m=m.filter(g=>!g.name.startsWith("."))),l.search){const g=l.search.toLowerCase();m=m.filter(b=>b.name.toLowerCase().includes(g))}l.favoritesOnly&&(m=m.filter(g=>i.includes(g.id))),l.type!=="all"&&(m=m.filter(g=>g.type==="folder"||g.type===l.type));const p=f.mode.endsWith("-reverse")?-1:1;return f.mode.startsWith("name")?m.sort((g,b)=>g.name.localeCompare(b.name)*p):f.mode.startsWith("size")?m.sort((g,b)=>((g.size??0)-(b.size??0))*p):m.sort((g,b)=>((g.date??0)-(b.date??0))*p),m}}),{name:"outputs-storage",version:1,migrate:(n,o)=>{if(o===0){if(n.sort&&!n.sort.mode){const{field:s,order:l}=n.sort;s==="name"?n.sort={mode:l==="asc"?"name":"name-reverse"}:n.sort={mode:l==="desc"?"modified":"modified-reverse"}}n.filter&&!n.filter.type&&(n.filter.type="all")}return n},partialize:n=>({source:n.source,viewMode:n.viewMode,showHidden:n.showHidden,sort:n.sort,filter:n.filter,favorites:n.favorites})}));var Mn=$y();function $w({open:n,onClose:o,side:s,title:l,children:i}){const c=y.useRef(null);return y.useEffect(()=>{if(!n)return;const f=m=>{m.key==="Escape"&&o()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[n,o]),y.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),n?Mn.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[2300]",children:[u.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:o}),u.jsxs("div",{ref:c,className:`
          absolute top-0 bottom-0 w-[85%] max-w-sm bg-white shadow-xl
          flex flex-col overflow-hidden
          ${s==="left"?"left-0 animate-slide-in-left":"right-0 animate-slide-in-right"}
        `,style:{animation:`${s==="left"?"slideInLeft":"slideInRight"} 0.2s ease-out`},children:[l&&u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:l}),u.jsx("button",{onClick:o,className:`w-10 h-10 flex items-center justify-center rounded-full
                         text-gray-500 hover:bg-gray-100 text-2xl`,children:""})]}),u.jsx("div",{className:"flex-1 overflow-auto p-4 overscroll-contain scroll-container",children:i})]}),u.jsx("style",{children:`
        @keyframes slideInLeft {
          from { transform: translateX(-100%); }
          to { transform: translateX(0); }
        }
        @keyframes slideInRight {
          from { transform: translateX(100%); }
          to { transform: translateX(0); }
        }
      `})]}),document.body):null}function Fw(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...n,children:u.jsx("path",{d:"M12 11V16M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21ZM12.0498 8V8.1L11.9502 8.1002V8H12.0498Z"})})}function nb({className:n}){return u.jsx(Fw,{className:n})}function qw(n){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M19 4H5L10.5 10.5V17L13.5 19V10.5L19 4Z"}),u.jsx("path",{d:"M2.5 9L4.5 7L6.5 9"}),u.jsx("path",{d:"M4.5 7V17"}),u.jsx("path",{d:"M2.5 15L4.5 17L6.5 15"})]})}function Ww(n){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M6 4h9l3 3v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M9 10h6M9 14h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function Gw(n){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M6 4h9l3 3v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M9 10h6M9 14h6M9 18h4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function Pw(n){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:u.jsx("path",{d:"M4 20h16M6 16l4-4m0 0l4-4m-4 4l4 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function Yw(n){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M3 7h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M3 7l9 6 9-6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]})}function Qw(n){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,style:{transform:"rotate(90deg)",...n.style??{}},children:[u.jsx("circle",{cx:"12",cy:"5",r:"2",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"19",r:"2",fill:"currentColor"})]})}function hs(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...n,children:u.jsx("path",{d:"M10 17l5-5-5-5v10z"})})}function Jn(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...n,children:u.jsx("path",{d:"M7 10l5 5 5-5H7z"})})}function yu(n){return u.jsx("svg",{viewBox:"0 0 20 20","aria-hidden":"true",...n,children:u.jsx("g",{transform:"translate(-164 -6319)",fill:"currentColor",children:u.jsx("path",{d:"M170.673,6324.726 L170.669,6324.729 C170.266,6325.104 170.244,6325.735 170.62,6326.137 L171.577,6327.158 C171.876,6327.478 171.649,6328 171.212,6328 L165,6328 C164.447,6328 164,6328.448 164,6329 C164,6329.552 164.447,6330 165,6330 L171.197,6330 C171.637,6330 171.862,6330.527 171.558,6330.845 L170.63,6331.819 C170.248,6332.218 170.266,6332.852 170.669,6333.229 C171.068,6333.603 171.695,6333.584 172.071,6333.186 L174.76,6330.338 C175.49,6329.564 175.487,6328.354 174.753,6327.585 L172.067,6324.769 C171.692,6324.376 171.071,6324.357 170.673,6324.726 M182.222,6319 L175.777,6319 C174.8,6319 174,6319.68 174,6321.111 L174,6322.007 C174,6322.555 174.444,6323 174.993,6323 L175.006,6323 C175.555,6323 176,6322.555 176,6322.007 L176,6321.993 C176,6321.445 176.444,6321 176.993,6321 L181.006,6321 C181.555,6321 182,6321.445 182,6321.993 L182,6336.007 C182,6336.555 181.555,6337 181.006,6337 L176.993,6337 C176.444,6337 176,6336.555 176,6336.007 L176,6335.993 C176,6335.445 175.555,6335 175.006,6335 L174.993,6335 C174.444,6335 174,6335.445 174,6335.993 L174,6337.111 C174,6338.293 174.847,6339 175.777,6339 L182.222,6339 C183.204,6339 184,6338.204 184,6337.222 L184,6337.111 L184,6320.778 C184,6319.796 183.204,6319 182.222,6319"})})})}function sp(n){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M18.4101 3.6512L20.5315 5.77252C21.4101 6.6512 21.4101 8.07582 20.5315 8.9545L9.54019 19.9458C9.17774 20.3082 8.70239 20.536 8.19281 20.5915L4.57509 20.9856C3.78097 21.072 3.11061 20.4017 3.1971 19.6076L3.59111 15.9898C3.64661 15.4803 3.87444 15.0049 4.23689 14.6425L15.2282 3.6512C16.1068 2.77252 17.5315 2.77252 18.4101 3.6512Z",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M15.2282 3.6512C16.1068 2.77252 17.5315 2.77252 18.4101 3.6512L20.5315 5.77252C21.4101 6.6512 21.4101 8.07582 20.5315 8.9545L18.7283 10.7576L13.425 5.45432L15.2282 3.6512Z",stroke:"currentColor",strokeWidth:"1.5"})]})}function wa(n){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:u.jsx("path",{d:"M6 6l12 12M18 6l-12 12",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})})}function Go(n){return u.jsx("svg",{viewBox:"0 0 16 16","aria-hidden":"true",...n,children:u.jsx("path",{d:"M6.4 11.2L3.2 8l1.1-1.1 2.1 2.1 5-5L12.5 5l-6.1 6.2Z",fill:"currentColor"})})}function Xw(n){return u.jsx("svg",{viewBox:"0 0 16 16","aria-hidden":"true",...n,children:u.jsx("path",{d:"M4.2 4.2l7.6 7.6m0-7.6l-7.6 7.6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function Zw(n){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M7 18a4 4 0 0 1 0-8 6 6 0 0 1 11.3-2.2A4.5 4.5 0 0 1 18 18H7Z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M12 10v7m0 0l-3-3m3 3l3-3",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function dr(n){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function Fo(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...n,children:u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24M1 1l22 22"})})}function Do(n){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M3 6h18M8 6V4h8v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),u.jsx("path",{d:"M10 11v6M14 11v6"})]})}function Jw(n){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...n,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M15 9l-6 6M9 9l6 6"})]})}function lp(n){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M23 4v6h-6M1 20v-6h6"}),u.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}function e2(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...n,children:u.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"})})}function gs(n){return u.jsx("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...n,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.3",d:"M9.18613 3.09999H6.81377M9.18613 12.9H7.55288c-3.08678 0-5.35171-2.99581-4.60305-6.08843l.3054-1.26158M14.7486 2.1721l-.5931 2.45c-.132.54533-.6065.92789-1.1508.92789h-2.2993c-.77173 0-1.33797-.74895-1.1508-1.5221l.5931-2.45c.132-.54533.6065-.9279 1.1508-.9279h2.2993c.7717 0 1.3379.74896 1.1508 1.52211Zm-8.3033 0-.59309 2.45c-.13201.54533-.60646.92789-1.15076.92789H2.4021c-.7717 0-1.33793-.74895-1.15077-1.5221l.59309-2.45c.13201-.54533.60647-.9279 1.15077-.9279h2.29935c.77169 0 1.33792.74896 1.15076 1.52211Zm8.3033 9.8-.5931 2.45c-.132.5453-.6065.9279-1.1508.9279h-2.2993c-.77173 0-1.33797-.749-1.1508-1.5221l.5931-2.45c.132-.5453.6065-.9279 1.1508-.9279h2.2993c.7717 0 1.3379.7489 1.1508 1.5221Z"})})}function ob(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...n,children:u.jsx("path",{d:"M13 20.74C12.9039 20.7541 12.8062 20.7541 12.71 20.74C12.5724 20.6823 12.4551 20.5849 12.3732 20.4602C12.2912 20.3355 12.2484 20.1892 12.25 20.04V16.7H3.00001C2.81189 16.6956 2.63208 16.6216 2.49538 16.4923C2.35868 16.363 2.27481 16.1876 2.26001 16V8.00002C2.25463 7.89856 2.26965 7.79706 2.30417 7.7015C2.3387 7.60595 2.39204 7.51829 2.46103 7.44371C2.53002 7.36913 2.61326 7.30913 2.70584 7.26727C2.79841 7.22542 2.89844 7.20255 3.00001 7.20002H12.25V4.01002C12.2498 3.86106 12.2946 3.71551 12.3784 3.59241C12.4623 3.4693 12.5813 3.37436 12.72 3.32002C12.8551 3.26039 13.0053 3.24376 13.1502 3.27238C13.2951 3.301 13.4277 3.37349 13.53 3.48002L21.53 11.48C21.6705 11.6206 21.7493 11.8113 21.7493 12.01C21.7493 12.2088 21.6705 12.3994 21.53 12.54L13.53 20.54C13.4601 20.6079 13.377 20.6608 13.2858 20.6952C13.1946 20.7296 13.0973 20.7448 13 20.74ZM3.76001 15.2H13C13.1981 15.2026 13.3874 15.2825 13.5275 15.4226C13.6676 15.5626 13.7474 15.7519 13.75 15.95V18.18L19.93 12L13.75 5.83002V8.00002C13.7477 8.19843 13.6689 8.3883 13.53 8.53002C13.3817 8.65257 13.1919 8.71343 13 8.70002H3.76001V15.2Z",fill:"currentColor"})})}function t2(n){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M10.667 2.667c1.45.008 2.235.072 2.748.585C14 3.837 14 4.78 14 6.666v4c0 1.885 0 2.828-.585 3.414-.586.585-1.529.585-3.415.585H6c-1.886 0-2.829 0-3.414-.585C2 13.494 2 12.55 2 10.666v-4c0-1.886 0-2.829.586-3.414.512-.513 1.297-.577 2.747-.585",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M5.333 2.333c0-.552.448-1 1-1h3.334c.552 0 1 .448 1 1v.667c0 .553-.448 1-1 1H6.333c-.552 0-1-.447-1-1v-.667Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"})]})}function n2(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...n,children:u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})})}function o2(n){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...n,children:[u.jsx("rect",{x:"9",y:"9",width:"10",height:"12",rx:"2"}),u.jsx("path",{d:"M5 15V5a2 2 0 0 1 2-2h8"})]})}function r2(n){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...n,children:[u.jsx("circle",{cx:"12",cy:"12",r:"9"}),u.jsx("path",{d:"M7 12h10"})]})}function bu(n){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"none","aria-hidden":"true",...n,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})})}function qr(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...n,children:u.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}function rb({showSlash:n=!1,...o}){return u.jsxs("svg",{viewBox:"0 0 32 32","aria-hidden":"true",overflow:"visible",...o,children:[u.jsx("path",{d:"M28 28H4a2.002 2.002 0 0 1-2-2V21h2v5h24v-5h2v5a2.002 2.002 0 0 1-2 2Z",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"21",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"16",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"11",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"6",width:"18",height:"2",fill:"currentColor"}),u.jsx("path",{d:"M16 -3l5 4H11l5-4Z",fill:"currentColor"}),n&&u.jsx("line",{x1:"2",y1:"30",x2:"28",y2:"4",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})]})}const Ct={transparent:"transparent",transparentBlack:"rgba(0, 0, 0, 0)",surface:{white:"#ffffff",darkPanel:"#151a23",gray100:"#f3f4f6",gray200:"#e5e7eb"},text:{primary:"#111827",secondary:"#6b7280",onDark:"#e5e7eb"},border:{gray200:"#e5e7eb",focusBlue:"#3b82f6"},status:{success:"#22c55e",successStrong:"rgba(34,197,94,0.9)",warning:"#facc15",danger:"#f97316"},brand:{blue500:"#3b82f6",subgraphBackground08:"rgba(59, 130, 246, 0.08)",subgraphBackground10:"rgba(59, 130, 246, 0.10)",subgraphBackground14:"rgba(59, 130, 246, 0.14)",subgraphBorder20:"rgba(59, 130, 246, 0.20)",subgraphBorder25:"rgba(59, 130, 246, 0.25)"},workflow:{defaultGroupDot:"#9ca3af",fastGroupBypassColors:{nocolor:"#353535",red:"#553333",brown:"#593930",green:"#335533",blue:"#333355",pale_blue:"#3f5159",cyan:"#335555",purple:"#553355",yellow:"#665533",black:"#000000"}}};function s2({progress:n,radius:o=11,...s}){const l=Math.min(100,Math.max(0,n)),i=2*Math.PI*o,c=i*(1-l/100);return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...s,children:u.jsx("circle",{cx:"12",cy:"12",r:o,fill:"none",stroke:Ct.status.successStrong,strokeWidth:"2",strokeLinecap:"round",strokeDasharray:i,strokeDashoffset:c})})}function ap(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...n,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}function Gr(n){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...n,children:u.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})}function l2(n){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...n,children:u.jsx("path",{fillRule:"evenodd",d:"M4 10a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1z",clipRule:"evenodd"})})}function sb(n){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...n,children:[u.jsx("circle",{cx:"11",cy:"11",r:"7"}),u.jsx("path",{d:"M20 20l-3.5-3.5"})]})}function a2(n){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:[u.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"3",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("circle",{cx:"9",cy:"9",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"15",cy:"15",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"15",cy:"9",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"9",cy:"15",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"})]})}function lb(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...n,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}function ab(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...n,children:u.jsx("path",{d:"M12 2L1 21h22L12 2zm0 3.5L19.5 19h-15L12 5.5zM11 10v4h2v-4h-2zm0 6v2h2v-2h-2z"})})}function Lu(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...n,children:u.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}function D0(n){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...n,children:[u.jsx("rect",{x:"3",y:"7",width:"12",height:"10",rx:"2"}),u.jsx("path",{d:"M15 10l5-3v10l-5-3z"})]})}function ma(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...n,children:u.jsx("path",{d:"M19.1835 7.80516L16.2188 4.83755C14.1921 2.8089 13.1788 1.79457 12.0904 2.03468C11.0021 2.2748 10.5086 3.62155 9.5217 6.31506L8.85373 8.1381C8.59063 8.85617 8.45908 9.2152 8.22239 9.49292C8.11619 9.61754 7.99536 9.72887 7.86251 9.82451C7.56644 10.0377 7.19811 10.1392 6.46145 10.3423C4.80107 10.8 3.97088 11.0289 3.65804 11.5721C3.5228 11.8069 3.45242 12.0735 3.45413 12.3446C3.45809 12.9715 4.06698 13.581 5.28476 14.8L6.69935 16.2163L2.22345 20.6964C1.92552 20.9946 1.92552 21.4782 2.22345 21.7764C2.52138 22.0746 3.00443 22.0746 3.30236 21.7764L7.77841 17.2961L9.24441 18.7635C10.4699 19.9902 11.0827 20.6036 11.7134 20.6045C11.9792 20.6049 12.2404 20.5358 12.4713 20.4041C13.0192 20.0914 13.2493 19.2551 13.7095 17.5825C13.9119 16.8472 14.013 16.4795 14.2254 16.1835C14.3184 16.054 14.4262 15.9358 14.5468 15.8314C14.8221 15.593 15.1788 15.459 15.8922 15.191L17.7362 14.4981C20.4 13.4973 21.7319 12.9969 21.9667 11.9115C22.2014 10.826 21.1954 9.81905 19.1835 7.80516Z"})})}function Tf(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...n,children:u.jsx("path",{d:"M15.9894 4.9502L16.52 4.42014L15.9894 4.9502ZM19.0716 8.03562L18.541 8.56568L19.0716 8.03562ZM8.73837 19.429L8.20777 19.9591L8.73837 19.429ZM4.62169 15.3081L5.15229 14.7781L4.62169 15.3081ZM17.5669 14.9943L17.3032 14.2922L17.5669 14.9943ZM15.6498 15.7146L15.9136 16.4167H15.9136L15.6498 15.7146ZM8.3322 8.38177L7.62798 8.12375L8.3322 8.38177ZM9.02665 6.48636L9.73087 6.74438V6.74438L9.02665 6.48636ZM5.84504 10.6735L6.04438 11.3965L5.84504 10.6735ZM7.30167 10.1351L6.86346 9.52646L6.86346 9.52646L7.30167 10.1351ZM7.67582 9.79038L8.24665 10.2768H8.24665L7.67582 9.79038ZM14.251 16.3805L14.742 16.9475L14.742 16.9475L14.251 16.3805ZM13.3806 18.2012L12.6574 18.0022V18.0022L13.3806 18.2012ZM13.9169 16.7466L13.3075 16.3094L13.3075 16.3094L13.9169 16.7466ZM2.71846 12.7552L1.96848 12.76L1.96848 12.76L2.71846 12.7552ZM2.93045 11.9521L2.28053 11.5778H2.28053L2.93045 11.9521ZM11.3052 21.3431L11.3064 20.5931H11.3064L11.3052 21.3431ZM12.0933 21.1347L11.7215 20.4833L11.7215 20.4833L12.0933 21.1347ZM11.6973 2.03606L11.8588 2.76845L11.6973 2.03606ZM1.4694 21.4699C1.17666 21.763 1.1769 22.2379 1.46994 22.5306C1.76298 22.8233 2.23786 22.8231 2.5306 22.5301L1.4694 21.4699ZM7.18383 17.8721C7.47657 17.5791 7.47633 17.1042 7.18329 16.8114C6.89024 16.5187 6.41537 16.5189 6.12263 16.812L7.18383 17.8721ZM15.4588 5.48026L18.541 8.56568L19.6022 7.50556L16.52 4.42014L15.4588 5.48026ZM9.26897 18.8989L5.15229 14.7781L4.09109 15.8382L8.20777 19.9591L9.26897 18.8989ZM17.3032 14.2922L15.386 15.0125L15.9136 16.4167L17.8307 15.6964L17.3032 14.2922ZM9.03642 8.63979L9.73087 6.74438L8.32243 6.22834L7.62798 8.12375L9.03642 8.63979ZM6.04438 11.3965C6.75583 11.2003 7.29719 11.0625 7.73987 10.7438L6.86346 9.52646C6.69053 9.65097 6.46601 9.72428 5.6457 9.95044L6.04438 11.3965ZM7.62798 8.12375C7.33502 8.92332 7.24338 9.14153 7.10499 9.30391L8.24665 10.2768C8.60041 9.86175 8.7823 9.33337 9.03642 8.63979L7.62798 8.12375ZM7.73987 10.7438C7.92696 10.6091 8.09712 10.4523 8.24665 10.2768L7.10499 9.30391C7.0337 9.38757 6.9526 9.46229 6.86346 9.52646L7.73987 10.7438ZM15.386 15.0125C14.697 15.2714 14.1716 15.4571 13.76 15.8135L14.742 16.9475C14.9028 16.8082 15.1192 16.7152 15.9136 16.4167L15.386 15.0125ZM14.1037 18.4001C14.329 17.5813 14.4021 17.3569 14.5263 17.1838L13.3075 16.3094C12.9902 16.7517 12.8529 17.2919 12.6574 18.0022L14.1037 18.4001ZM13.76 15.8135C13.5903 15.9605 13.4384 16.1269 13.3075 16.3094L14.5263 17.1838C14.5887 17.0968 14.6611 17.0175 14.742 16.9475L13.76 15.8135ZM5.15229 14.7781C4.50615 14.1313 4.06799 13.691 3.78366 13.3338C3.49835 12.9753 3.46889 12.8201 3.46845 12.7505L1.96848 12.76C1.97215 13.3422 2.26127 13.8297 2.61002 14.2679C2.95976 14.7073 3.47115 15.2176 4.09109 15.8382L5.15229 14.7781ZM5.6457 9.95044C4.80048 10.1835 4.10396 10.3743 3.58296 10.5835C3.06341 10.792 2.57116 11.0732 2.28053 11.5778L3.58038 12.3264C3.615 12.2663 3.71693 12.146 4.1418 11.9755C4.56523 11.8055 5.16337 11.6394 6.04438 11.3965L5.6457 9.95044ZM3.46845 12.7505C3.46751 12.6016 3.50616 12.4553 3.58038 12.3264L2.28053 11.5778C2.07354 11.9372 1.96586 12.3452 1.96848 12.76L3.46845 12.7505ZM8.20777 19.9591C8.83164 20.5836 9.34464 21.0987 9.78647 21.4506C10.227 21.8015 10.7179 22.0922 11.3041 22.0931L11.3064 20.5931C11.2369 20.593 11.0814 20.5644 10.721 20.2773C10.3618 19.9912 9.91923 19.5499 9.26897 18.8989L8.20777 19.9591ZM12.6574 18.0022C12.4133 18.8897 12.2462 19.4924 12.0751 19.9188C11.9033 20.3467 11.7821 20.4487 11.7215 20.4833L12.465 21.7861C12.974 21.4956 13.2573 21.0004 13.4671 20.4775C13.6776 19.9532 13.8694 19.2516 14.1037 18.4001L12.6574 18.0022ZM11.3041 22.0931C11.7112 22.0937 12.1114 21.9879 12.465 21.7861L11.7215 20.4833C11.595 20.5555 11.4519 20.5933 11.3064 20.5931L11.3041 22.0931ZM18.541 8.56568C19.6045 9.63022 20.3403 10.3695 20.7917 10.9788C21.2353 11.5774 21.2863 11.8959 21.2321 12.1464L22.6982 12.4634C22.8881 11.5854 22.5382 10.8162 21.9969 10.0857C21.4635 9.36592 20.6305 8.53486 19.6022 7.50556L18.541 8.56568ZM17.8307 15.6964C19.1921 15.1849 20.294 14.773 21.0771 14.3384C21.8718 13.8973 22.5083 13.3416 22.6982 12.4634L21.2321 12.1464C21.178 12.3968 21.0001 12.6655 20.3491 13.0268C19.6865 13.3946 18.7112 13.7632 17.3032 14.2922L17.8307 15.6964ZM16.52 4.42014C15.4841 3.3832 14.6481 2.54353 13.9246 2.00638C13.1908 1.46165 12.4175 1.10912 11.5357 1.30367L11.8588 2.76845C12.1086 2.71335 12.4277 2.7633 13.0304 3.21075C13.6433 3.66579 14.3876 4.40801 15.4588 5.48026L16.52 4.42014ZM9.73087 6.74438C10.2525 5.32075 10.6161 4.33403 10.9812 3.66315C11.3402 3.00338 11.609 2.82357 11.8588 2.76845L11.5357 1.30367C10.654 1.49819 10.1005 2.14332 9.66362 2.94618C9.23278 3.73793 8.82688 4.85154 8.32243 6.22834L9.73087 6.74438ZM2.5306 22.5301L7.18383 17.8721L6.12263 16.812L1.4694 21.4699L2.5306 22.5301Z"})})}function ip(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...n,children:u.jsx("path",{d:"M9 6l6 6-6 6"})})}function i2(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...n,children:u.jsx("path",{d:"M15 19l-7-7 7-7"})})}function Ef({isBypassed:n,...o}){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...o,children:n?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M5 12h14"}),u.jsx("path",{d:"M12 5l7 7-7 7"})]}):u.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}function ib({nodeId:n,connectionHighlightMode:o,leftLineCount:s,rightLineCount:l,inactiveColor:i=Ct.text.secondary,inputHighlightColor:c=Ct.status.danger,outputHighlightColor:f=Ct.status.danger,offLineColor:m=i,...p}){const g=o==="inputs"||o==="both",b=o==="outputs"||o==="both",x=g?c:m,w=b?f:m;return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...p,children:[u.jsxs("defs",{children:[u.jsx("clipPath",{id:`node-rect-left-${n}`,children:u.jsx("rect",{x:"0",y:"0",width:"12",height:"24"})}),u.jsx("clipPath",{id:`node-rect-right-${n}`,children:u.jsx("rect",{x:"12",y:"0",width:"12",height:"24"})})]}),u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:x,strokeWidth:"1.6",fill:"none",strokeLinejoin:"round",clipPath:`url(#node-rect-left-${n})`}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:w,strokeWidth:"1.6",fill:"none",strokeLinejoin:"round",clipPath:`url(#node-rect-right-${n})`})]}),u.jsxs("g",{style:{color:x},children:[s===1&&u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),s===2&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"8.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"15.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),s>=3&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-2.743",y2:"6.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-2.743",y2:"17.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})]}),u.jsxs("g",{style:{color:w},children:[l===1&&u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),l===2&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"8.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"15.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),l>=3&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"26.743",y2:"6.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"26.743",y2:"17.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})]})]})}function u2(n){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:[u.jsxs("defs",{children:[u.jsx("clipPath",{id:"legend-trace-left",children:u.jsx("rect",{x:"0",y:"0",width:"12",height:"24"})}),u.jsx("clipPath",{id:"legend-trace-right",children:u.jsx("rect",{x:"12",y:"0",width:"12",height:"24"})})]}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",clipPath:"url(#legend-trace-left)",className:"text-gray-400"}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",clipPath:"url(#legend-trace-right)",className:"text-orange-500"}),u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",className:"text-gray-400"}),u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",className:"text-orange-500"})]})}function ub(n){return u.jsx("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...n,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.3",d:"m14.6685 5.7416.6425-2.57c.2028-.811-.4106-1.5967-1.2466-1.5967H2.5782a1.285 1.285 0 0 0-1.2467.9733l-.6425 2.57c-.2027.8111.4107 1.5968 1.2467 1.5968h11.4861a1.285 1.285 0 0 0 1.2467-.9734Zm0 7.7102.6425-2.5701c.2028-.811-.4106-1.5967-1.2466-1.5967h-5.061a1.285 1.285 0 0 0-1.2467.9734l-.6425 2.5701c-.2028.811.4106 1.5966 1.2466 1.5966h5.061a1.285 1.285 0 0 0 1.2467-.9733Zm-10.2802 0 .6425-2.5701c.2027-.811-.4107-1.5967-1.2467-1.5967H2.5782a1.285 1.285 0 0 0-1.2467.9734L.689 12.8285c-.2027.811.4107 1.5966 1.2467 1.5966h1.206a1.285 1.285 0 0 0 1.2466-.9733Z"})})}function c2(n){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:u.jsx("path",{d:"M12 3v10m0 0l-4-4m4 4l4-4M5 19h14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function d2(n){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M10.667 2.667c1.45.008 2.235.072 2.748.585C14 3.837 14 4.78 14 6.666v4c0 1.885 0 2.828-.585 3.414-.586.585-1.529.585-3.415.585H6c-1.886 0-2.829 0-3.414-.585C2 13.494 2 12.55 2 10.666v-4c0-1.886 0-2.829.586-3.414.512-.513 1.297-.577 2.747-.585",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M5.333 2.333c0-.552.448-1 1-1h3.334c.552 0 1 .448 1 1v.667c0 .553-.448 1-1 1H6.333c-.552 0-1-.447-1-1v-.667Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M8 6.667v4.666m0 0L5.667 9m2.333 2.333L10.333 9",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function fr(n){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M3 7a2 2 0 0 1 2-2h4l2 2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M3 9h18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function cb(n){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M5 4h12l3 3v13H4V5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("rect",{x:"7",y:"4",width:"8",height:"4",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"13",width:"10",height:"6",rx:"1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]})}function db(n){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M12.667 14H3.333C2.597 14 2 13.403 2 12.667V3.333C2 2.597 2.597 2 3.333 2h7.334L14 5.333v7.334c0 .736-.597 1.333-1.333 1.333Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M11.333 14v-4H4.667v4M4.667 2v3.333h5.333",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function f2(n){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:[u.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),u.jsx("path",{d:"M12 2v3M12 19v3M4.22 4.22l2.12 2.12M17.66 17.66l2.12 2.12M2 12h3M19 12h3M4.22 19.78l2.12-2.12M17.66 6.34l2.12-2.12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"})]})}function p2(n){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:u.jsx("path",{d:"M21 14.5A9 9 0 0 1 9.5 3a7 7 0 1 0 11.5 11.5Z",fill:"currentColor"})})}function h2(n){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",fill:"currentColor",...n,children:u.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"})})}function B0(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...n,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}function m2(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...n,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function g2(n){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...n,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function y2(n){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n,children:u.jsx("path",{d:"M8 4h8M8 20h8M9 6h6l-1 4 1 4H9l1-4-1-4Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function fb(n){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...n,children:[u.jsx("path",{d:"M12 3v18"}),u.jsx("path",{d:"m8 7 4-4 4 4"}),u.jsx("path",{d:"m8 17 4 4 4-4"})]})}function b2({progress:n,radius:o=10,trackColor:s=Ct.border.gray200,progressColor:l=Ct.brand.blue500,...i}){const c=Math.min(100,Math.max(0,n)),f=2*Math.PI*o,m=f*(1-c/100);return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...i,children:[u.jsx("circle",{cx:"12",cy:"12",r:o,fill:"none",stroke:s,strokeWidth:"2"}),u.jsx("circle",{cx:"12",cy:"12",r:o,fill:"none",stroke:l,strokeWidth:"2",strokeLinecap:"round",strokeDasharray:f,strokeDashoffset:m})]})}function Sa({title:n,onBack:o,rightElement:s}){return u.jsxs("div",{className:"flex items-center mb-3",children:[u.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-sm font-semibold text-gray-500 uppercase tracking-wide",children:[u.jsx(i2,{className:"w-5 h-5 text-gray-400"}),u.jsx("span",{children:n})]}),s&&u.jsx("div",{className:"ml-auto",children:s})]})}function x2({icon:n,title:o,description:s}){return u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[n,u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:o}),u.jsx("p",{className:"text-xs text-gray-500",children:s})]})]})}function v2(){return[{icon:u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-500 text-white rounded-lg font-bold text-xs shadow-sm",children:"Run"}),title:"Run",description:"Execute current workflow"},{icon:u.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-white border border-gray-200 rounded-lg text-gray-700 shadow-sm overflow-hidden",children:u.jsx(rb,{className:"w-5 h-5"})}),title:"Queue / Follow",description:"View queue & follow execution"},{icon:u.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-yellow-500 text-white rounded-lg shadow-sm",children:u.jsx(ma,{className:"w-5 h-5"})}),title:"Pinned Widget",description:"Quick access to pinned parameter"},{icon:u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full border border-gray-200 text-gray-700 font-bold",children:""}),title:"Input",description:"Node input connection point"},{icon:u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full border border-gray-200 text-gray-700 font-bold",children:""}),title:"Output",description:"Node output connection point"},{icon:u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(u2,{className:"w-6 h-6 overflow-visible"})}),title:"Trace Connections",description:"Highlight connected nodes"},{icon:u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-500",children:u.jsx(Jn,{className:"w-6 h-6"})}),title:"Fold / Unfold",description:"Collapse or expand node card"},{icon:u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(lb,{className:"w-5 h-5"})}),title:"Bypass",description:"Skip node execution"},{icon:u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(Fo,{className:"w-5 h-5"})}),title:"Hide",description:"Hide node from view"},{icon:u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(dr,{className:"w-5 h-5"})}),title:"Show",description:"Make node visible again"},{icon:u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(Tf,{className:"w-5 h-5"})}),title:"Pin widget",description:"Pin widget to bottom bar"}]}function w2({onBack:n}){const o=v2();return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Sa,{title:"Icon Legend",onBack:n}),u.jsx("div",{className:"space-y-3 overflow-y-auto flex-1 pb-4",children:o.map(s=>u.jsx(x2,{icon:s.icon,title:s.title,description:s.description},s.title))})]})}function Na({error:n,onDismiss:o}){return n?u.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[n,u.jsx("button",{onClick:o,className:"ml-2 text-red-500 font-medium",children:"Dismiss"})]}):null}function S2({error:n,workflow:o,currentFilename:s,isDirty:l,loading:i,theme:c,menuSectionsOpen:f,fileInputRef:m,loadSectionRef:p,saveSectionRef:g,appearanceSectionRef:b,infoSectionRef:x,onDismissError:w,onFileChange:k,onLoadFromFile:C,onToggleSection:S,onOpenUserWorkflows:j,onOpenTemplates:N,onOpenPasteJson:E,onSave:H,onOpenSaveAs:V,onToggleTheme:L,onOpenLegend:z}){return u.jsxs(u.Fragment,{children:[u.jsx("input",{ref:m,type:"file",accept:".json",onChange:k,className:"hidden"}),u.jsx(Na,{error:n,onDismiss:w}),u.jsxs("section",{ref:p,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>S("load"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":f.load,children:[u.jsx("span",{children:"Load Workflow"}),u.jsx(Jn,{className:`w-5 h-5 text-gray-400 transition-transform ${f.load?"rotate-0":"-rotate-90"}`})]}),f.load&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("button",{onClick:j,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(gs,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"My Workflows"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:N,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(ub,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Templates"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:E,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(d2,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Paste JSON"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:C,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(fr,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"From Device"})]})]})]}),u.jsxs("section",{ref:g,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>S("save"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":f.save,children:[u.jsx("span",{children:"Save Workflow"}),u.jsx(Jn,{className:`w-5 h-5 text-gray-400 transition-transform ${f.save?"rotate-0":"-rotate-90"}`})]}),f.save&&u.jsxs("div",{className:"space-y-2",children:[s&&u.jsxs("button",{onClick:H,disabled:!o||!l||i,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                           rounded-xl text-left hover:bg-gray-50 min-h-[56px]
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[u.jsx(cb,{className:"w-6 h-6 text-gray-600 shrink-0"}),u.jsxs("span",{className:"font-medium text-gray-900 truncate",children:["Save ",s.replace(".json","")]})]}),u.jsxs("button",{onClick:V,disabled:!o,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(db,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Save As..."}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]})]})]}),u.jsx("div",{className:"border-t border-gray-200 mb-6"}),u.jsxs("section",{ref:b,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>S("appearance"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":f.appearance,children:[u.jsx("span",{children:"Appearance"}),u.jsx(Jn,{className:`w-5 h-5 text-gray-400 transition-transform ${f.appearance?"rotate-0":"-rotate-90"}`})]}),f.appearance&&u.jsx("div",{className:"space-y-2",children:u.jsxs("button",{onClick:L,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[c==="dark"?u.jsx(p2,{className:"w-6 h-6 text-gray-600"}):u.jsx(f2,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:c==="dark"?"Dark mode":"Light mode"})]})})]}),u.jsxs("section",{ref:x,className:"mt-auto pt-6 border-t border-gray-200",children:[u.jsxs("button",{type:"button",onClick:()=>S("info"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":f.info,children:[u.jsx("span",{children:"About"}),u.jsx(Jn,{className:`w-5 h-5 text-gray-400 transition-transform ${f.info?"rotate-0":"-rotate-90"}`})]}),f.info&&u.jsxs("div",{className:"space-y-2 pb-4",children:[u.jsxs("a",{href:"https://github.com/cosmicbuffalo/comfyui-mobile-frontend",target:"_blank",rel:"noopener noreferrer",className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(h2,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Open in GitHub"}),u.jsx(B0,{className:"w-4 h-4 ml-auto text-gray-400"})]}),u.jsxs("button",{onClick:z,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(m2,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Icon Legend"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("a",{href:"https://github.com/cosmicbuffalo/comfyui-mobile-frontend/blob/main/USER_GUIDE.md",target:"_blank",rel:"noopener noreferrer",className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(g2,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"User Manual"}),u.jsx(B0,{className:"w-4 h-4 ml-auto text-gray-400"})]})]})]})]})}async function N2(n){if(navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(n);return}catch{}const o=document.createElement("textarea");o.value=n,o.readOnly=!0,o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.opacity="0",document.body.appendChild(o),o.focus(),o.select(),o.setSelectionRange(0,o.value.length),document.execCommand("copy"),document.body.removeChild(o)}function z0(n,o,s){const l=n.current;if(l){if(l.focus(),o)l.setSelectionRange(o.start,o.end);else if(s!==void 0){const i=s.length;l.setSelectionRange(i,i)}}}function C2(n){const o=n.current;if(!o)return;const l=o.closest('[data-textarea-root="true"]')?.querySelector('[data-textarea-header="true"]');l?l.scrollIntoView({block:"nearest",behavior:"auto"}):o.scrollIntoView({block:"nearest",behavior:"auto"})}function ia({value:n,onChange:o,textareaRef:s,className:l=""}){const[i,c]=y.useState(!1),f=y.useRef(null),m=y.useRef(null),p=()=>{c(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>c(!1),900)},g=w=>{w.preventDefault()},b=async()=>{const w=s.current;w&&(m.current={start:w.selectionStart??0,end:w.selectionEnd??0});const k=s.current?.value??n;await N2(k),requestAnimationFrame(()=>z0(s,m.current||void 0)),p()},x=()=>{o(""),requestAnimationFrame(()=>{z0(s,void 0,""),C2(s)})};return u.jsxs("div",{className:`flex items-center text-[11px] text-gray-500 ${l}`,children:[u.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-1 py-0.5 text-gray-600",onMouseDown:g,onClick:b,"aria-label":"Copy to clipboard",children:[i?u.jsx(Go,{className:"w-3.5 h-3.5 text-green-500"}):u.jsx(o2,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Copy"})]}),u.jsx("span",{className:"text-gray-500/50",children:"|"}),u.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-1 py-0.5 text-red-600",onMouseDown:g,onClick:x,"aria-label":"Clear text",children:[u.jsx(r2,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Clear"})]})]})}function k2({error:n,pastedJson:o,pasteTextareaRef:s,onBack:l,onDismissError:i,onChangeJson:c,onLoad:f}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Sa,{title:"Paste JSON",onBack:l}),u.jsx(Na,{error:n,onDismiss:i}),u.jsxs("div",{className:"flex-1 flex flex-col space-y-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Paste your workflow JSON below."}),u.jsxs("div",{className:"group","data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1","data-textarea-header":"true",children:[u.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Workflow JSON"}),u.jsx(ia,{value:o,onChange:c,textareaRef:s,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),u.jsx("textarea",{ref:s,value:o,onChange:m=>c(m.target.value),placeholder:'{"last_node_id": ...}',className:"w-full flex-1 p-3 border border-gray-300 rounded-lg font-mono text-xs resize-none outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:l,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 min-h-[48px]",children:"Cancel"}),u.jsx("button",{onClick:f,disabled:!o.trim(),className:`flex-1 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600
                       disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px]`,children:"Load"})]})]})]})}function j2({error:n,loading:o,workflow:s,saveFilenameInput:l,onBack:i,onDismissError:c,onSaveFilenameChange:f,onSaveAs:m,onDownload:p}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Sa,{title:"Save Workflow",onBack:i}),u.jsx(Na,{error:n,onDismiss:c}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-xl",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Save to ComfyUI server:"}),u.jsx("input",{type:"text",value:l,onChange:g=>f(g.target.value),placeholder:"Enter filename (e.g., my_workflow.json)",className:"w-full p-3 border border-gray-300 rounded-lg mb-3"}),u.jsx("button",{onClick:m,disabled:!s||!l.trim()||o,className:`w-full py-3 bg-blue-500 text-white rounded-lg font-medium
                       disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px]`,children:o?"Saving...":"Save As"})]}),u.jsxs("button",{onClick:p,disabled:!s,className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                     rounded-xl text-left hover:bg-gray-50 min-h-[56px]
                     disabled:opacity-50 disabled:cursor-not-allowed`,children:[u.jsx(c2,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Download to Device"})]})]})]})}function Ca({value:n,onChange:o,onClear:s,placeholder:l="Search...",autoFocus:i=!1,className:c="",inputClassName:f="",disabled:m=!1,readOnly:p=!1,inputRef:g,showClearButton:b=!0}){const x=b&&n.trim().length>0&&!m&&!p;return u.jsxs("div",{className:`relative ${c}`.trim(),children:[u.jsx(sb,{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"}),u.jsx("input",{ref:g,value:n,onChange:w=>o(w.target.value),placeholder:l,className:`w-full rounded-lg border border-gray-200 pl-9 pr-9 py-2 text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${f}`.trim(),autoFocus:i,disabled:m,readOnly:p}),x&&u.jsx("button",{type:"button",onClick:()=>{if(s){s();return}o("")},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:u.jsx(wa,{className:"w-4 h-4"})})]})}const M2={sm:"w-4 h-4 border-2",md:"w-6 h-6 border-2",lg:"w-10 h-10 border-4"},O2={blue:"border-blue-500 border-t-transparent",gray:"border-gray-200 border-t-gray-500"};function up({size:n="md",color:o="blue",className:s=""}){return u.jsx("div",{className:`animate-spin rounded-full ${M2[n]} ${O2[o]} ${s}`})}function T2({error:n,loading:o,templates:s,onBack:l,onDismissError:i,onLoadTemplate:c}){const[f,m]=y.useState(""),p=Object.entries(s),g=f.toLowerCase(),b=p.map(([w,k])=>[w,k.filter(C=>C.toLowerCase().includes(g))]).filter(([,w])=>w.length>0),x=p.length>0;return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Sa,{title:"Templates",onBack:l}),u.jsx(Na,{error:n,onDismiss:i}),!o&&x&&u.jsx("div",{className:"py-2",children:u.jsx(Ca,{value:f,onChange:m,placeholder:"Search",inputClassName:"bg-white"})}),o?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx(up,{})}):x?b.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No matching templates"}):u.jsx("div",{className:"space-y-4 overflow-y-auto flex-1",children:b.map(([w,k])=>u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-2",children:w}),u.jsx("div",{className:"space-y-2",children:k.map(C=>u.jsxs("button",{onClick:()=>c(w,C),className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                               rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(ub,{className:"w-5 h-5 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900 truncate",children:C.replace(/\.json$/,"")})]},C))})]},w))}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No templates available"})]})}function E2(n){const o=new Date,s=new Date(n*1e3),l=o.getTime()-s.getTime(),i=Math.floor(l/(1e3*60*60*24)),c=String(s.getMonth()+1),f=String(s.getDate()),m=String(s.getFullYear()).slice(-2),p=`${c}/${f}/${m}`;return i===0?`${p} (Today)`:i===1?`${p} (Yesterday)`:`${p} (${i} days ago)`}function I2({error:n,loading:o,userWorkflows:s,onBack:l,onDismissError:i,onLoadWorkflow:c}){const[f,m]=y.useState(""),[p,g]=y.useState("name"),b=s.filter(w=>w.name.toLowerCase().includes(f.toLowerCase())).sort((w,k)=>p==="name"?w.name.localeCompare(k.name):(k.modified??0)-(w.modified??0)),x=u.jsxs("button",{onClick:()=>g(p==="name"?"date":"name"),className:"flex items-center gap-0.5 text-xs font-semibold text-blue-500",children:[u.jsx("span",{children:p==="name"?"NAME":"DATE"}),u.jsx("span",{children:""})]});return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Sa,{title:"My Workflows",onBack:l,rightElement:x}),u.jsx(Na,{error:n,onDismiss:i}),!o&&s.length>0&&u.jsx("div",{className:"py-2",children:u.jsx(Ca,{value:f,onChange:m,placeholder:"Search",inputClassName:"bg-white"})}),o?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx(up,{})}):s.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No saved workflows yet"}):b.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No matching workflows"}):u.jsx("div",{className:"space-y-2 overflow-y-auto flex-1",children:b.map(w=>u.jsxs("button",{onClick:()=>c(w.name),className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(gs,{className:"w-5 h-5 text-gray-600"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:w.name.replace(/\.json$/,"")}),w.modified&&u.jsx("p",{className:"text-xs text-gray-500",children:E2(w.modified)})]})]},w.path))})]})}const sl=Oo()(yr(n=>({theme:"dark",setTheme:o=>{n({theme:o})},toggleTheme:()=>{n(o=>({theme:o.theme==="dark"?"light":"dark"}))}}),{name:"theme-storage",storage:gr(()=>localStorage)}));function L2({open:n,onClose:o}){const s=ce(ue=>ue.loadWorkflow),l=ce(ue=>ue.workflow),i=ce(ue=>ue.currentFilename),c=ce(ue=>ue.originalWorkflow),f=ce(ue=>ue.setSavedWorkflow),m=sl(ue=>ue.theme),p=sl(ue=>ue.toggleTheme),g=y.useRef(null),b=!!(l&&c&&JSON.stringify(l)!==JSON.stringify(c)),x=y.useRef(null),[w,k]=y.useState(null),[C,S]=y.useState("menu"),[j,N]=y.useState([]),[E,H]=y.useState({}),[V,L]=y.useState(!1),[z,I]=y.useState(i||""),[$,W]=y.useState(""),[ie,de]=y.useState({load:!0,save:!0,appearance:!0,info:!0}),me=y.useRef(null),Ae=y.useRef(null),Ee=y.useRef(null),Ie=y.useRef(null),B=y.useRef(ie);y.useEffect(()=>{const ue=B.current,_=ie;!ue.load&&_.load?setTimeout(()=>me.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!ue.save&&_.save?setTimeout(()=>Ae.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!ue.appearance&&_.appearance?setTimeout(()=>Ee.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!ue.info&&_.info&&setTimeout(()=>Ie.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100),B.current=_},[ie]),y.useEffect(()=>{n||(S("menu"),k(null),I(i||""),W(""),de({load:!0,save:!0,appearance:!0,info:!0}))},[n,i]),y.useEffect(()=>{C==="userWorkflows"&&(L(!0),V1().then(N).catch(ue=>k(ue.message)).finally(()=>L(!1)))},[C]),y.useEffect(()=>{C==="templates"&&(L(!0),K1().then(H).catch(ue=>k(ue.message)).finally(()=>L(!1)))},[C]);const le=ue=>{"vibrate"in navigator&&navigator.vibrate(ue)},fe=()=>{x.current?.click()},$e=async ue=>{const _=ue.target.files?.[0];if(_){try{const U=await _.text(),R=JSON.parse(U);if(!R.nodes||!Array.isArray(R.nodes))throw new Error("Invalid workflow: missing nodes array");s(R,_.name),k(null),o(),le(10)}catch(U){k(U instanceof Error?U.message:"Failed to load workflow")}x.current&&(x.current.value="")}},Re=async ue=>{try{L(!0);const _=await Qf(ue);s(_,ue,{fresh:!0,source:{type:"user",filename:ue}}),k(null),o(),le(10)}catch(_){k(_ instanceof Error?_.message:"Failed to load workflow")}finally{L(!1)}},T=async(ue,_)=>{try{L(!0);const U=await Xf(ue,_);s(U,`${ue}/${_}`,{fresh:!0,source:{type:"template",moduleName:ue,templateName:_}}),k(null),o(),le(10)}catch(U){k(U instanceof Error?U.message:"Failed to load template")}finally{L(!1)}},A=async ue=>{if(!l)return;const _=ue.endsWith(".json")?ue:`${ue}.json`;try{L(!0),await Py(_,hu(l)),f(l,_),k(null),o(),le(10)}catch(U){k(U instanceof Error?U.message:"Failed to save workflow")}finally{L(!1)}},O=()=>{i?A(i):S("save")},te=()=>{I(i||""),S("save")},X=()=>{z.trim()?A(z):k("Please enter a filename.")},pe=()=>{if(!l)return;const ue=JSON.stringify(hu(l),null,2),_=new Blob([ue],{type:"application/json"}),U=URL.createObjectURL(_),R=document.createElement("a");R.href=U,R.download=`${i||`workflow-${Date.now()}`}.json`,R.click(),URL.revokeObjectURL(U),le(10),o()},Y=()=>{try{const ue=JSON.parse($);if(!ue.nodes||!Array.isArray(ue.nodes))throw new Error("Invalid workflow: missing nodes array");const _=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});s(ue,`Pasted workflow (${_})`),k(null),o(),le(10),W("")}catch(ue){k(ue instanceof Error?ue.message:"Failed to parse JSON")}};return u.jsxs($w,{open:n,onClose:o,side:"left",title:"ComfyUI Mobile",children:[C==="menu"&&u.jsx(S2,{error:w,workflow:l,currentFilename:i,isDirty:b,loading:V,theme:m,menuSectionsOpen:ie,fileInputRef:x,loadSectionRef:me,saveSectionRef:Ae,appearanceSectionRef:Ee,infoSectionRef:Ie,onDismissError:()=>k(null),onFileChange:$e,onLoadFromFile:fe,onToggleSection:ue=>de(_=>({..._,[ue]:!_[ue]})),onOpenUserWorkflows:()=>S("userWorkflows"),onOpenTemplates:()=>S("templates"),onOpenPasteJson:()=>S("pasteJson"),onSave:O,onOpenSaveAs:te,onToggleTheme:p,onOpenLegend:()=>S("aboutLegend")}),C==="userWorkflows"&&u.jsx(I2,{error:w,loading:V,userWorkflows:j,onBack:()=>S("menu"),onDismissError:()=>k(null),onLoadWorkflow:Re}),C==="templates"&&u.jsx(T2,{error:w,loading:V,templates:E,onBack:()=>S("menu"),onDismissError:()=>k(null),onLoadTemplate:T}),C==="save"&&u.jsx(j2,{error:w,loading:V,workflow:l,saveFilenameInput:z,onBack:()=>S("menu"),onDismissError:()=>k(null),onSaveFilenameChange:I,onSaveAs:X,onDownload:pe}),C==="pasteJson"&&u.jsx(k2,{error:w,pastedJson:$,pasteTextareaRef:g,onBack:()=>S("menu"),onDismissError:()=>k(null),onChangeJson:W,onLoad:Y}),C==="aboutLegend"&&u.jsx(w2,{onBack:()=>S("menu")})]})}function il({open:n,onDismiss:o,triggerRef:s,contentRef:l,ignoreScrollWithinContent:i=!1}){y.useEffect(()=>{if(!n)return;const c=m=>{const p=m.target;s.current&&p&&s.current.contains(p)||l.current&&p&&l.current.contains(p)||o()},f=m=>{if(i){const p=m.target;if(l.current&&p&&l.current.contains(p))return}o()};return document.addEventListener("mousedown",c),document.addEventListener("scroll",f,!0),()=>{document.removeEventListener("mousedown",c),document.removeEventListener("scroll",f,!0)}},[n,o,s,l,i])}function qo({onClose:n,title:o,description:s,actions:l,actionsLayout:i="inline",zIndex:c=2200}){const f=m=>m==="danger"?"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700":m==="primary"?"px-3 py-2 rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700":"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100";return u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",style:{zIndex:c},onClick:n,role:"dialog","aria-modal":"true",children:u.jsxs("div",{className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:m=>m.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:o}),s&&u.jsx("div",{className:"text-gray-600 text-sm mt-1",children:s}),u.jsx("div",{className:i==="stack"?"mt-4 flex flex-col gap-2":"mt-4 flex justify-end gap-2",children:l.map(m=>u.jsx("button",{className:`${f(m.variant)} ${m.className??""}`.trim(),onClick:m.onClick,children:m.label},m.label))})]})})}function Wr({onClick:n,ariaLabel:o,buttonRef:s,icon:l,buttonSize:i=10,iconSize:c=5}){return u.jsx("button",{type:"button",onClick:n,"aria-label":o,className:`w-${i} h-${i} flex items-center justify-center rounded-lg bg-transparent hover:bg-transparent text-inherit`,ref:s,children:l??u.jsx(Qw,{className:`w-${c} h-${c}`})})}const A2={default:{row:"text-gray-900 hover:bg-gray-50",icon:"text-gray-500"},muted:{row:"text-gray-600 hover:bg-gray-50",icon:"text-gray-500"},danger:{row:"text-red-600 hover:bg-red-50",icon:"text-red-500"},primary:{row:"text-blue-600 hover:bg-blue-50",icon:"text-blue-500"}};function hr({items:n,className:o,itemClassName:s}){return u.jsx("div",{className:`bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden ${o??""}`.trim(),children:n.map(l=>{if(l.type==="divider")return u.jsx("div",{className:`border-t border-gray-200 my-1 ${l.className??""}`.trim()},l.key);if(l.type==="custom")return l.hidden?null:u.jsx("div",{children:typeof l.render=="function"?l.render():l.render},l.key);if(l.hidden)return null;const i=A2[l.color??"default"];return u.jsxs("button",{type:"button",className:["w-full flex items-center gap-2 text-left px-3 py-2 text-sm",l.rightSlot?"justify-between":"",i.row,l.disabled?"opacity-50 cursor-not-allowed":"",s??"",l.className??""].join(" ").trim(),onClick:l.onClick,disabled:l.disabled,children:[u.jsxs("span",{className:"flex items-center gap-2 min-w-0",children:[l.icon?u.jsx("span",{className:i.icon,children:l.icon}):null,u.jsx("span",{className:"truncate",children:l.label})]}),l.rightSlot?u.jsx("span",{className:"shrink-0",children:l.rightSlot}):null]},l.key)})})}function R2({open:n,buttonRef:o,menuRef:s,onToggle:l,onClose:i,onGoToWorkflow:c,onOpenClearHistoryConfirm:f}){const m=jt(A=>A.setQueueItemExpanded),p=jt(A=>A.queueItemExpanded),g=jt(A=>A.showQueueMetadata),b=jt(A=>A.toggleShowQueueMetadata),x=jt(A=>A.previewVisibility),w=jt(A=>A.setPreviewVisibility),k=jt(A=>A.previewVisibilityDefault),C=jt(A=>A.setPreviewVisibilityDefault),S=jt(A=>A.pending),j=jt(A=>A.running),N=jt(A=>A.clearQueue),E=qn(A=>A.history),H=qn(A=>A.clearEmptyItems),V=S.length>0,L=E.length>0,z=E.some(A=>A.outputs.images.length===0),I=S.length+j.length+E.length>0,$=y.useMemo(()=>{const A=new Set;return S.forEach(O=>A.add(O.prompt_id)),j.forEach(O=>A.add(O.prompt_id)),E.forEach(O=>{O.prompt_id&&A.add(String(O.prompt_id))}),Array.from(A)},[S,j,E]),W=y.useMemo(()=>$.some(A=>p[A]===!1),[$,p]),ie=y.useMemo(()=>$.some(A=>p[A]!==!1),[$,p]),de=y.useMemo(()=>{const A=new Set;return E.forEach(O=>{(O.outputs?.images??[]).some(pe=>pe.type!=="output")&&O.prompt_id&&A.add(String(O.prompt_id))}),Array.from(A)},[E]),me=I||de.length>0||k,Ae=de.length>0?de.every(A=>x[A]??k):k,Ee=()=>{c(),i()},Ie=async()=>{await N(),i()},B=()=>{$.forEach(A=>m(A,!1)),i()},le=()=>{$.forEach(A=>m(A,!0)),i()},fe=()=>{b(),i()},$e=()=>{const A=!Ae;C(A),de.forEach(O=>w(O,A)),i()},Re=async()=>{await H(),i()},T=()=>{i(),f()};return u.jsxs("div",{id:"queue-menu-container",className:"relative",children:[u.jsx(Wr,{buttonRef:o,onClick:l,ariaLabel:"Queue options"}),n?u.jsx("div",{id:"queue-options-dropdown",ref:s,className:"absolute right-0 top-11 z-50 w-48",children:u.jsx(hr,{items:[{key:"go-to-workflow",label:"Go to workflow",icon:u.jsx(yu,{className:"w-3 h-3 rotate-180"}),onClick:Ee},{key:"cancel-pending",label:"Cancel all pending",icon:u.jsx(Jw,{className:"w-4 h-4"}),onClick:Ie,hidden:!V},{key:"fold-all",label:"Fold all",icon:u.jsx(hs,{className:"w-7 h-7 -ml-1"}),onClick:B,hidden:!ie},{key:"unfold-all",label:"Unfold all",icon:u.jsx(Jn,{className:"w-7 h-7 -ml-1"}),onClick:le,hidden:!W},{key:"toggle-metadata",label:g?"Hide metadata":"Show metadata",icon:u.jsx(nb,{className:"w-4 h-4"}),onClick:fe,hidden:!L},{key:"toggle-previews",label:Ae?"Hide previews":"Show previews",icon:Ae?u.jsx(Fo,{className:"w-4 h-4"}):u.jsx(dr,{className:"w-4 h-4"}),onClick:$e,hidden:!me},{key:"clear-empty",label:"Clear empty items",icon:u.jsx(Do,{className:"w-4 h-4"}),onClick:Re,color:"muted",hidden:!z},{key:"clear-history",label:"Clear history",icon:u.jsx(Do,{className:"w-4 h-4"}),onClick:T,color:"danger",hidden:!L}]})}):null]})}function _2(){const[n,o]=y.useState(!1),[s,l]=y.useState(!1),i=eo(p=>p.setCurrentPanel),c=qn(p=>p.clearHistory),f=y.useRef(null),m=y.useRef(null);return il({open:n,onDismiss:()=>o(!1),triggerRef:f,contentRef:m}),u.jsxs(u.Fragment,{children:[u.jsx(R2,{open:n,buttonRef:f,menuRef:m,onToggle:()=>o(p=>!p),onClose:()=>o(!1),onGoToWorkflow:()=>i("workflow"),onOpenClearHistoryConfirm:()=>l(!0)}),s&&Mn.createPortal(u.jsx(qo,{onClose:()=>l(!1),title:"Clear history?",description:"This will permanently remove all completed generations from history. Generated files will still be present in your server's output folder.",actions:[{label:"Cancel",onClick:()=>l(!1),variant:"secondary"},{label:"Clear history",onClick:()=>{(async()=>(await c(),l(!1)))()},variant:"danger"}]}),document.body)]})}function D2({open:n,buttonRef:o,menuRef:s,onToggle:l,onClose:i,onGoToWorkflow:c}){const f=Ut(V=>V.source),m=Ut(V=>V.viewMode),p=Ut(V=>V.showHidden),g=Ut(V=>V.setSource),b=Ut(V=>V.setViewMode),x=Ut(V=>V.toggleShowHidden),w=Ut(V=>V.toggleSelectionMode),k=Ut(V=>V.setNewFolderModalOpen),C=()=>{k(!0),i()},S=()=>{g(f==="output"?"input":"output"),i()},j=()=>{c(),i()},N=()=>{w(),i()},E=()=>{x(),i()},H=()=>{b(m==="grid"?"list":"grid"),i()};return u.jsxs("div",{id:"outputs-topbar-actions",className:"relative flex items-center gap-1",children:[u.jsx(Wr,{buttonRef:o,onClick:l,ariaLabel:"Outputs options"}),n?u.jsx("div",{id:"outputs-options-dropdown",ref:s,className:"absolute right-0 top-11 z-50 w-48",children:u.jsx(hr,{items:[{key:"toggle-source",label:f==="output"?"Switch to inputs":"Switch to outputs",icon:u.jsx(lp,{className:"w-4 h-4"}),onClick:S},{key:"go-to-workflow",label:"Go to workflow",icon:u.jsx(yu,{className:"w-3 h-3"}),onClick:j},{key:"select",label:"Select",icon:u.jsx(Go,{className:"w-4 h-4"}),onClick:N},{key:"new-folder",label:"New folder",icon:u.jsx(fr,{className:"w-4 h-4"}),onClick:C},{key:"toggle-hidden",label:p?"Hide hidden files":"Show hidden files",icon:p?u.jsx(Fo,{className:"w-4 h-4"}):u.jsx(dr,{className:"w-4 h-4"}),onClick:E},{key:"toggle-view",label:m==="grid"?"List view":"Grid view",icon:m==="grid"?u.jsx(Gw,{className:"w-4 h-4"}):u.jsx(a2,{className:"w-4 h-4"}),onClick:H}]})}):null]})}function B2(){const[n,o]=y.useState(!1),s=eo(c=>c.setCurrentPanel),l=y.useRef(null),i=y.useRef(null);return il({open:n,onDismiss:()=>o(!1),triggerRef:l,contentRef:i}),u.jsx(D2,{open:n,buttonRef:l,menuRef:i,onToggle:()=>o(c=>!c),onClose:()=>o(!1),onGoToWorkflow:()=>s("workflow")})}const z2=5;function H2(n){const o={};for(const s of n)o[s.id]={mode:s.mode,flags:s.flags?{collapsed:!!s.flags.collapsed}:void 0,widgets_values:s.widgets_values};return o}function V2(n,o,s,l){return{nodes:H2(n.nodes),seedModes:{...o},collapsedItems:{...s},hiddenItems:{...l}}}function H0(n,o){if(n===o)return!0;if(n.length!==o.length)return!1;for(let s=0;s<n.length;s+=1)if(n[s]!==o[s])return!1;return!0}function V0(n){const{workflow:o}=ce.getState();if(!o)return[];const s=new Set;for(const c of o.nodes??[])c.stableKey&&s.add(c.stableKey);for(const c of o.groups??[])c.stableKey&&s.add(c.stableKey);for(const c of o.definitions?.subgraphs??[]){c.stableKey&&s.add(c.stableKey);for(const f of c.groups??[])f.stableKey&&s.add(f.stableKey)}const l=[],i=new Set;for(const c of n)!c||i.has(c)||s.has(c)&&(i.add(c),l.push(c));return l}const Fn=Oo()(yr((n,o)=>({bookmarkedItems:[],bookmarkBarSide:"right",bookmarkBarTop:null,bookmarkRepositioningActive:!1,toggleBookmark:s=>{if(!s)return;const{bookmarkedItems:l}=o(),{currentWorkflowKey:i,savedWorkflowStates:c,workflow:f,collapsedItems:m,hiddenItems:p}=ce.getState(),g=$n.getState().seedModes,x=l.includes(s)?l.filter(w=>w!==s):l.length>=z2?l:[...l,s];if(x!==l){if(i){let k=c[i];!k&&f&&(k=V2(f,g,m,p)),k&&ce.setState({savedWorkflowStates:{...c,[i]:{...k,bookmarkedItems:[...x]}}})}n({bookmarkedItems:x})}},clearBookmarks:()=>{const{currentWorkflowKey:s,savedWorkflowStates:l}=ce.getState();if(s&&l[s]){const i=l[s];ce.setState({savedWorkflowStates:{...l,[s]:{...i,bookmarkedItems:[]}}})}n({bookmarkedItems:[]})},setBookmarkBarPosition:s=>{n(l=>({bookmarkBarSide:s.side??l.bookmarkBarSide,bookmarkBarTop:s.top??l.bookmarkBarTop}))},setBookmarkRepositioningActive:s=>{n({bookmarkRepositioningActive:s})}}),{name:"bookmark-bar-storage",storage:gr(()=>localStorage),partialize:n=>({bookmarkBarSide:n.bookmarkBarSide,bookmarkBarTop:n.bookmarkBarTop})}));function K2(){const{workflow:n,currentWorkflowKey:o,savedWorkflowStates:s}=ce.getState(),{bookmarkedItems:l}=Fn.getState();if(!n){l.length>0&&Fn.setState({bookmarkedItems:[]});return}if(!o){const f=V0(l);H0(l,f)||Fn.setState({bookmarkedItems:f});return}const i=s[o],c=V0(i?.bookmarkedItems??[]);H0(l,c)||Fn.setState({bookmarkedItems:c})}ce.subscribe(()=>{K2()});function U2({open:n,buttonRef:o,menuRef:s,onToggle:l,onClose:i,onGoToQueue:c,onGoToOutputs:f,onAddNode:m,onOpenWorkflowActions:p}){const g=ce(F=>F.workflow),b=ce(F=>F.nodeTypes),x=ce(F=>F.setItemCollapsed),w=ce(F=>F.setItemHidden),k=ce(F=>F.showAllHiddenNodes),C=ce(F=>F.hiddenItems),S=Fn(F=>F.bookmarkedItems),j=Fn(F=>F.clearBookmarks),N=ce(F=>F.collapsedItems),E=ce(F=>F.workflowSource),H=ce(F=>F.loadWorkflow),V=ce(F=>F.searchOpen),L=ce(F=>F.setSearchOpen),z=ce(F=>F.setSearchQuery),I=ce(F=>F.connectionButtonsVisible),$=ce(F=>F.toggleConnectionButtonsVisible),W=qn(F=>F.history),ie=y.useCallback((F,Se)=>!!F[Se],[]),de=!!g,me=y.useMemo(()=>g?.nodes.map(F=>F.stableKey??null).filter(F=>F!=null)??[],[g]),Ae=y.useMemo(()=>[...g?.groups??[],...(g?.definitions?.subgraphs??[]).flatMap(Se=>Se.groups??[])].map(Se=>Se.stableKey??null).filter(Se=>Se!=null),[g]),Ee=y.useMemo(()=>(g?.definitions?.subgraphs?.map(F=>F.stableKey??null)??[]).filter(F=>F!=null),[g]),Ie=y.useMemo(()=>g?.nodes.filter(F=>F.mode===4)??[],[g]),B=y.useMemo(()=>!g||!b?[]:g.nodes.filter(F=>{if(F.type==="Fast Groups Bypasser (rgthree)")return!1;const Se=ep(b,F).filter(Ge=>!Ge.connected),Be=tp(b,F).filter(Ge=>!Ge.connected);return Se.length===0&&Be.length===0}),[g,b]),le=Ie.length,fe=B.length,$e=y.useMemo(()=>Object.values(C).filter(Boolean).length,[C]),Re=y.useMemo(()=>Ie.filter(F=>(()=>{const Se=F.stableKey;return Se?C[Se]:!1})()).length,[Ie,C]),T=y.useMemo(()=>B.filter(F=>(()=>{const Se=F.stableKey;return Se?C[Se]:!1})()).length,[B,C]),A=y.useMemo(()=>g?g.nodes.filter(F=>(()=>{const Se=F.stableKey;return Se?!C[Se]:!0})()):[],[g,C]),O=y.useMemo(()=>A.some(F=>{const Se=F.stableKey??null;return Se?N[Se]===!0:!1}),[N,A]),te=y.useMemo(()=>A.some(F=>{const Se=F.stableKey??null;return Se?N[Se]!==!0:!0}),[N,A]),X=y.useMemo(()=>Ae.some(F=>N[F]===!0),[Ae,N]),pe=y.useMemo(()=>Ae.some(F=>(N[F]??!1)===!1),[Ae,N]),Y=y.useMemo(()=>Ee.some(F=>N[F]??!1),[Ee,N]),ue=y.useMemo(()=>Ee.some(F=>(N[F]??!1)===!1),[Ee,N]),_=O||X||Y,U=te||pe||ue,R=y.useMemo(()=>$e>0||Ae.some(Se=>ie(C,Se))?!0:Ee.some(Se=>C[Se]===!0),[$e,C,Ae,Ee,ie]),[D,G]=y.useState(!1),K=()=>{i()},Oe=()=>{c(),K()},Ne=()=>{f(),K()},we=()=>{z(""),L(!0),K()},J=()=>{m(),K()},ke=()=>{me.forEach(F=>x(F,!0)),Ae.forEach(F=>x(F,!0)),Ee.forEach(F=>x(F,!0)),K()},ee=()=>{me.forEach(F=>x(F,!1)),Ae.forEach(F=>x(F,!1)),Ee.forEach(F=>x(F,!1)),K()},se=()=>{k(),Ae.forEach(F=>w(F,!1)),Ee.forEach(F=>w(F,!1))},xe=()=>{j(),K()},Ue=async()=>{if(!(!E||E.type!=="user")){try{const F=await Qf(E.filename);H(F,E.filename,{fresh:!0,source:E})}catch(F){console.error("Failed to reload workflow:",F)}K()}},Le=async()=>{if(!(!E||E.type!=="template")){try{const F=await Xf(E.moduleName,E.templateName);H(F,`${E.moduleName}/${E.templateName}`,{fresh:!0,source:E})}catch(F){console.error("Failed to reload template:",F)}K()}},Ve=()=>{if(!E||E.type!=="history")return;const F=W.find(Se=>Se.prompt_id===E.promptId);F?.workflow&&H(F.workflow,`history-${E.promptId}.json`,{source:E}),K()};return u.jsxs("div",{id:"workflow-menu-container",className:"relative",children:[u.jsx(Wr,{buttonRef:o,onClick:l,ariaLabel:"Workflow options"}),n?u.jsx("div",{id:"workflow-options-dropdown",ref:s,className:"absolute right-0 top-11 z-50 w-52",children:u.jsx(hr,{items:[{key:"go-to-queue",label:"Go to queue",icon:u.jsx(yu,{className:"w-3 h-3"}),onClick:Oe},{key:"go-to-outputs",label:"Go to outputs",icon:u.jsx(yu,{className:"w-3 h-3 rotate-180"}),onClick:Ne},{key:"search",label:"Search",icon:u.jsx(sb,{className:"w-4 h-4"}),onClick:we,hidden:V},{key:"add-node",label:"Add node",icon:u.jsx(Gr,{className:"w-4 h-4"}),onClick:J,hidden:!de},{key:"hide-show",label:"Hide / Show",icon:u.jsx(dr,{className:"w-4 h-4"}),onClick:()=>{G(!0),K()}},{key:"fold-all",label:"Fold all",icon:u.jsx(hs,{className:"w-6 h-6 -ml-1"}),onClick:ke,hidden:!U},{key:"unfold-all",label:"Unfold all",icon:u.jsx(Jn,{className:"w-6 h-6 -ml-1"}),onClick:ee,hidden:!_},{key:"clear-bookmarks",label:"Clear bookmarks",icon:u.jsx(Do,{className:"w-4 h-4"}),onClick:xe,hidden:S.length===0},{key:"reload-workflow",label:"Reload workflow",icon:u.jsx(lp,{className:"w-4 h-4"}),onClick:E?.type==="user"?Ue:E?.type==="template"?Le:E?.type==="history"&&W.find(F=>F.prompt_id===E.promptId)?.workflow?Ve:void 0,hidden:!E||E.type==="history"&&!W.find(F=>F.prompt_id===E.promptId)?.workflow},{key:"workflow-actions",label:"Workflow actions",icon:u.jsx(gs,{className:"w-4 h-4"}),onClick:()=>{p(),K()}}]})}):null,D&&u.jsx("div",{className:"fixed inset-0 z-[2150] bg-black/50 flex items-center justify-center p-4",onClick:()=>G(!1),role:"dialog","aria-modal":"true",children:u.jsxs("div",{className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:F=>F.stopPropagation(),children:[u.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:"Hide / Show"}),u.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:u.jsx(hr,{itemClassName:"px-4 py-3",items:[{key:"static-nodes",label:T<fe?`Hide static nodes (${fe})`:`Show static nodes (${fe})`,icon:T<fe?u.jsx(Fo,{className:"w-4 h-4"}):u.jsx(dr,{className:"w-4 h-4"}),onClick:()=>{T<fe?B.forEach(F=>{const Se=F.stableKey??null;Se&&w(Se,!0)}):B.forEach(F=>{const Se=F.stableKey??null;Se&&w(Se,!1)})},hidden:fe===0},{key:"bypassed-nodes",label:Re>0?`Show bypassed nodes (${le})`:`Hide bypassed nodes (${le})`,icon:Re>0?u.jsx(dr,{className:"w-4 h-4"}):u.jsx(Fo,{className:"w-4 h-4"}),onClick:()=>{Re>0?Ie.forEach(F=>{const Se=F.stableKey??null;Se&&w(Se,!1)}):Ie.forEach(F=>{const Se=F.stableKey??null;Se&&w(Se,!0)})},hidden:le===0},{key:"toggle-connection-buttons",label:I?"Hide connection buttons":"Show connection buttons",icon:I?u.jsx(Fo,{className:"w-4 h-4"}):u.jsx(dr,{className:"w-4 h-4"}),onClick:$},{key:"show-all-hidden",label:"Show all hidden nodes",icon:u.jsx(dr,{className:"w-4 h-4"}),onClick:se,hidden:!R}]})}),u.jsx("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end",children:u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg",onClick:()=>G(!1),children:"Cancel"})})]})})]})}function Ys({icon:n,label:o,onClick:s,disabled:l,description:i,tone:c="default"}){const f=c==="danger";return u.jsxs("button",{className:`w-full flex items-start gap-3 text-left px-4 py-3 disabled:opacity-50 ${f?"text-red-600 hover:bg-red-50":"hover:bg-gray-50"}`,onClick:s,disabled:l,children:[u.jsx("span",{className:"shrink-0 self-start mt-[3px]",children:n}),u.jsxs("span",{className:"flex flex-col min-w-0",children:[u.jsx("span",{className:`text-sm ${f?"text-red-600":"text-gray-900"}`,children:o}),i?u.jsx("span",{className:"text-xs text-gray-500",children:i}):null]})]})}function $2(){const[n,o]=y.useState(null),[s,l]=y.useState(null),[i,c]=y.useState(!1),[f,m]=y.useState(!1),[p,g]=y.useState(""),[b,x]=y.useState(null),[w,k]=y.useState(!1),C=ce(T=>T.workflow),S=ce(T=>T.originalWorkflow),j=ce(T=>T.currentFilename),N=ce(T=>T.workflowSource),E=ce(T=>T.loadWorkflow),H=ce(T=>T.setSavedWorkflow),V=ce(T=>T.clearWorkflowCache),L=ce(T=>T.unloadWorkflow),z=ce(T=>T.requestAddNodeModal),I=eo(T=>T.setCurrentPanel),$=ce(T=>T.workflowLoadedAt),W=qn(T=>T.history),ie=y.useRef(null),de=y.useRef(null),me=n!==null&&n===$,Ae=y.useMemo(()=>!!(C&&S&&JSON.stringify(C)!==JSON.stringify(S)),[C,S]);il({open:me,onDismiss:()=>o(null),triggerRef:ie,contentRef:de});const Ee=async()=>{if(localStorage.clear(),sessionStorage.clear(),"caches"in window){const T=await caches.keys();await Promise.all(T.map(A=>caches.delete(A)))}document.cookie.split(";").forEach(T=>{const[A]=T.split("=");document.cookie=`${A.trim()}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}),window.location.reload()},Ie=async T=>{if(!C)return;const A=T.endsWith(".json")?T:`${T}.json`;try{k(!0),await Py(A,hu(C)),H(C,A),x(null),m(!1),c(!1)}catch(O){x(O instanceof Error?O.message:"Failed to save workflow")}finally{k(!1)}},B=async()=>{if(!N){S&&E(S,j??void 0,{fresh:!0,source:{type:"other"}});return}if(N.type==="user"){const T=await Qf(N.filename);E(T,N.filename,{fresh:!0,source:N});return}if(N.type==="template"){const T=await Xf(N.moduleName,N.templateName);E(T,`${N.moduleName}/${N.templateName}`,{fresh:!0,source:N});return}if(N.type==="history"){const T=W.find(A=>A.prompt_id===N.promptId);T?.workflow&&E(T.workflow,`history-${N.promptId}.json`,{fresh:!0,source:N});return}S&&E(S,j??void 0,{fresh:!0,source:N})},le=T=>{if(Ae){l(T);return}T==="unload"?L():T==="clearWorkflowCache"?V():T==="clearAllCache"?Ee():B(),c(!1)},fe=async T=>{l(null);try{k(!0),T==="unload"?L():T==="clearWorkflowCache"?V():T==="clearAllCache"?await Ee():await B(),c(!1)}catch(A){x(A instanceof Error?A.message:"Failed to complete action")}finally{k(!1)}},$e=()=>{o(null),x(null),c(!0)},Re=()=>{z({groupId:null,subgraphId:null})};return u.jsxs(u.Fragment,{children:[u.jsx(U2,{open:me,buttonRef:ie,menuRef:de,onToggle:()=>o(me?null:$),onClose:()=>o(null),onGoToQueue:()=>I("queue"),onGoToOutputs:()=>I("outputs"),onAddNode:Re,onOpenWorkflowActions:$e}),i&&u.jsx("div",{className:"fixed inset-0 z-[1450] bg-black/50 flex items-center justify-center p-4",onClick:()=>c(!1),role:"dialog","aria-modal":"true",children:u.jsxs("div",{className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:T=>T.stopPropagation(),children:[u.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:"Workflow actions"}),b&&u.jsx("div",{className:"px-4 py-2 text-sm text-red-700 bg-red-50 border-b border-red-100",children:b}),u.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[u.jsx(Ys,{icon:u.jsx(cb,{className:"w-4 h-4 text-gray-500"}),label:"Save",onClick:()=>{if(C){if(!j){g(j??""),m(!0);return}Ie(j)}},disabled:!C||!Ae||w}),u.jsx(Ys,{icon:u.jsx(db,{className:"w-4 h-4 text-gray-500"}),label:"Save as",onClick:()=>{g(j??""),m(!0)},disabled:!C||w}),Ae&&u.jsx(Ys,{icon:u.jsx(lp,{className:"w-4 h-4 text-red-500"}),label:"Discard changes",tone:"danger",onClick:()=>le("discardChanges"),disabled:w}),u.jsx("div",{className:"border-t border-gray-200"}),u.jsx(Ys,{icon:u.jsx(Do,{className:"w-5 h-5 text-gray-500"}),label:"Clear workflow cache",description:"(hidden nodes, folds, etc.)",onClick:()=>le("clearWorkflowCache"),disabled:!C||w}),u.jsx(Ys,{icon:u.jsx(e2,{className:"w-5 h-5 text-red-500"}),label:"Unload workflow",description:"Close the current workflow panel state",tone:"danger",onClick:()=>le("unload"),disabled:!C||w}),u.jsx(Ys,{icon:u.jsx(Do,{className:"w-5 h-5 text-red-500"}),label:"Clear device cache",description:"Reset local storage and reload app",tone:"danger",onClick:()=>le("clearAllCache"),disabled:w})]}),u.jsx("div",{className:"border-t border-gray-100 p-3",children:u.jsx("button",{className:"w-full px-4 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",onClick:()=>c(!1),children:"Close"})})]})}),f&&u.jsx("div",{className:"fixed inset-0 z-[1460] bg-black/50 flex items-center justify-center p-4",onClick:()=>m(!1),role:"dialog","aria-modal":"true",children:u.jsxs("div",{className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:T=>T.stopPropagation(),children:[u.jsx("div",{className:"text-base font-semibold text-gray-900 mb-3",children:"Save as"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:p,onChange:T=>g(T.target.value),className:"w-full border border-gray-300 rounded-lg px-3 pr-9 py-2 text-sm text-gray-900 focus:outline-none focus:border-2 focus:border-blue-500",placeholder:"workflow.json",autoFocus:!0}),p.length>0&&u.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",onClick:()=>g(""),"aria-label":"Clear filename",children:u.jsx(wa,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:()=>m(!1),children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",onClick:()=>{const T=p.trim();if(!T){x("Please enter a filename.");return}Ie(T)},disabled:!C||w,children:"Save"})]})]})}),s&&Mn.createPortal(u.jsx(qo,{onClose:()=>l(null),title:"Unsaved changes",description:"You have unsaved changes in the current workflow. Continue without saving?",actions:[{label:"Cancel",onClick:()=>l(null),className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100"},{label:s==="discardChanges"?"Discard changes":"Continue",onClick:()=>{fe(s)},className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700"}]}),document.body)]})}function F2({onClick:n}){return u.jsx("button",{type:"button",onClick:n,"aria-label":"Menu",className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100",children:u.jsx(ap,{className:"w-6 h-6"})})}function q2({title:n,mode:o,isDirty:s,hasWorkflow:l,nodeCountLabel:i,historyLength:c,pendingLength:f,onTap:m}){return u.jsxs("div",{id:"top-bar-title-container",className:"flex-1 text-center min-w-0 px-2 cursor-pointer",onClick:m,children:[u.jsxs("h1",{id:"top-bar-title",className:"font-semibold text-gray-900 text-lg truncate flex items-center justify-center",children:[u.jsx("span",{className:"truncate",children:n}),o==="workflow"&&s&&u.jsx("span",{id:"dirty-indicator",className:"text-blue-500 ml-1 font-bold",children:"*"})]}),o==="workflow"&&l&&u.jsx("p",{className:"node-count-display text-xs text-gray-500",children:i}),o==="queue"&&u.jsxs("p",{className:"run-count-display text-xs text-gray-500",children:[c," ",c===1?"run":"runs",f>0&&` (${f} pending)`]})]})}function W2(n){return n==="queue"?['[data-queue-list="true"]','[data-node-list="true"]']:['[data-node-list="true"]','[data-queue-list="true"]']}function G2({mode:n="workflow"}){const o=y.useRef(null),s=y.useRef(0),l=Of(N=>N.appMenuOpen),i=Of(N=>N.setAppMenuOpen),c=y.useCallback(()=>{const N=Date.now(),E=N-s.current;if(s.current=N,E<300){if(n==="workflow"){window.dispatchEvent(new Event("workflow-scroll-to-top")),"vibrate"in navigator&&navigator.vibrate(10);return}if(n==="outputs"){const V=document.querySelector("#outputs-content-container");V&&(V.scrollTo({top:0,behavior:"auto"}),"vibrate"in navigator&&navigator.vibrate(10));return}const H=W2(n);for(const V of H){const L=document.querySelector(V);if(L&&L.scrollHeight>0&&!L.closest(".pointer-events-none")){L.scrollTo({top:0,behavior:"smooth"}),"vibrate"in navigator&&navigator.vibrate(10);break}}}},[n]),f=ce(N=>N.workflow),m=ce(N=>N.originalWorkflow),p=ce(N=>N.currentFilename),g=ce(N=>N.hiddenItems),b=jt(N=>N.pending),x=qn(N=>N.history),w=Ut(N=>N.source),k=f&&m&&JSON.stringify(f)!==JSON.stringify(m),C=y.useMemo(()=>{if(!f)return"";const N=f.nodes.length,E=Object.keys(g).length,H=Object.values(g).some(Boolean);if(E===0&&!H)return`${N} nodes ${k?"[Unsaved]":""}`.trim();const V=H?f.nodes.reduce((z,I)=>{const W=I.properties?.__mobile_origin;if(!W||typeof W!="object"||W.scope!=="subgraph")return z;const de=W.subgraphId,me=de?f.definitions?.subgraphs?.find(Ae=>Ae.id===de)?.stableKey:null;return me&&g[me]?z+1:z},0):0,L=E+V;return`${N} nodes (${L} hidden) ${k?"[Unsaved]":""}`.trim()},[f,g,k]);y.useEffect(()=>{const N=o.current;if(!N)return;const E=()=>{const V=N.getBoundingClientRect();document.documentElement.style.setProperty("--top-bar-offset",`${V.height}px`)};E();const H=new ResizeObserver(E);return H.observe(N),()=>H.disconnect()},[]);const S=y.useMemo(()=>{switch(n){case"queue":return"Queue";case"outputs":return w==="output"?"Outputs":"Inputs";default:return p?p.replace(".json",""):f?"Untitled":"ComfyUI Mobile"}},[n,w,p,f]),j=y.useMemo(()=>{switch(n){case"queue":return u.jsx(_2,{});case"outputs":return u.jsx(B2,{});default:return u.jsx($2,{})}},[n]);return u.jsxs("div",{id:"top-bar-root",ref:o,className:"fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-[2000] safe-area-top","data-top-bar":"true",children:[u.jsxs("div",{id:"top-bar-content",className:"flex items-center justify-between px-4 py-3",children:[u.jsx(F2,{onClick:()=>i(!0)}),u.jsx(q2,{title:S,mode:n,isDirty:!!k,hasWorkflow:!!f,nodeCountLabel:C,historyLength:x.length,pendingLength:b.length,onTap:c}),u.jsx("div",{id:"top-bar-right-slot",className:"w-10 h-10 flex items-center justify-center",children:j})]}),u.jsx(L2,{open:l,onClose:()=>i(!1)})]})}function P2(){const n=ce(x=>x.setMobileLayout),o=ce(x=>x.prepareRepositionScrollTarget),[s,l]=y.useState(!1),[i,c]=y.useState(null),[f,m]=y.useState(null),p=y.useCallback(x=>{let w;x.type==="node"?w=`[data-reposition-item="node-${x.id}"]`:x.type==="group"?w=`[data-reposition-item="group-${Ht({type:"group",groupId:x.id,subgraphId:x.subgraphId??null})}"]`:w=`[data-reposition-item="subgraph-${x.id}"]`;const k=document.querySelector(w);m(k?{viewportTop:k.getBoundingClientRect().top}:null),c(x),l(!0)},[]),g=y.useCallback((x,w,k)=>{n(x),l(!1),c(null),m(null),o(w),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let C;if(w.type==="node"?C=`[data-reposition-item="node-${w.id}"]`:w.type==="group"?C=`[data-reposition-item="group-${Ht({type:"group",groupId:w.id,subgraphId:w.subgraphId??null})}"]`:C=`[data-reposition-item="subgraph-${w.id}"]`,C){const S=document.querySelector(C);if(!S)return;if(k){const j=document.querySelector('[data-node-list="true"]');if(j){const E=S.getBoundingClientRect().top-k.viewportTop;Math.abs(E)>.5&&(j.scrollTop+=E);return}}S.scrollIntoView({behavior:"auto",block:"center"})}})})},[o,n]),b=y.useCallback(()=>{l(!1),c(null),m(null)},[]);return{overlayOpen:s,initialTarget:i,initialViewportAnchor:f,openOverlay:p,commitAndClose:g,cancelOverlay:b}}function ga(n){const o=n.replace("#","").trim();return/^[0-9a-f]{3}$/i.test(o)?`#${o.replace(/(.)/g,"$1$1").toLowerCase()}`:/^[0-9a-f]{6}$/i.test(o)?`#${o.toLowerCase()}`:null}function pb(n){if(typeof document>"u"||!document.body)return null;const o=document.createElement("span");o.style.color=n,document.body.appendChild(o);const s=getComputedStyle(o).color;document.body.removeChild(o);const l=s.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(!l)return null;const[,i,c,f]=l.map(Number);return[i,c,f].some(m=>Number.isNaN(m))?null:`#${[i,c,f].map(m=>m.toString(16).padStart(2,"0")).join("")}`}function K0(n,o){const s=new Set,l=n.trim().toLowerCase();if(l&&(s.add(l),o)){const f=o[l.replace(/\s+/g,"")]??o[l];f&&s.add(f)}const i=ga(n);if(i)return s.add(i),[...s];const c=pb(n);return c&&s.add(c),[...s]}function U0(n){const o=ga(n);if(!o)return null;const s=parseInt(o.slice(1,3),16)/255,l=parseInt(o.slice(3,5),16)/255,i=parseInt(o.slice(5,7),16)/255,c=Math.max(s,l,i),f=Math.min(s,l,i),m=c-f;let p=0;m!==0&&(c===s?p=(l-i)/m%6:c===l?p=(i-s)/m+2:p=(s-l)/m+4,p=Math.round(p*60),p<0&&(p+=360));const g=(c+f)/2,b=m===0?0:m/(1-Math.abs(2*g-1));return{h:p,s:b,l:g}}function Y2(n,o,s,l={},i={}){const c=(S,j)=>{const N=i[j];return N?!!S[N]:!!S[j]},f=(S,j,N)=>{const E=i[j];return E?S[E]??N:S[j]??N},m=new Map(o.nodes.map(S=>[S.id,S])),p=o.groups??[],g=o.definitions?.subgraphs??[],b=new Map(g.map(S=>[S.id,S])),x=new Map(p.map(S=>[S.id,S])),w=new Map;for(const S of g){const j=new Map;for(const N of S.groups??[])j.set(N.id,N);w.set(S.id,j)}const k=(S,j,N=new Set,E=new Set)=>{let H=0;for(const V of S)if(V.type==="node"){const L=Ht({type:"node",nodeId:V.id,subgraphId:j});c(l,L)||(H+=1)}else if(V.type==="hiddenBlock"){const L=n.hiddenBlocks[V.blockId]??[];H+=L.filter(z=>{const I=Ht({type:"node",nodeId:z,subgraphId:j});return!c(l,I)}).length}else if(V.type==="group"){if(N.has(V.stableKey))continue;N.add(V.stableKey),H+=k(n.groups[V.stableKey]??[],V.subgraphId,N,E),N.delete(V.stableKey)}else if(V.type==="subgraph"){if(E.has(V.id))continue;E.add(V.id),H+=k(n.subgraphs[V.id]??[],V.id,N,E),E.delete(V.id)}return H},C=(S,j,N,E=new Set,H=new Set)=>{const V=[];for(const L of S){if(L.type==="hiddenBlock"){const ie=n.hiddenBlocks[L.blockId]??[];if(ie.length===0)continue;V.push({type:"hiddenBlock",blockId:L.blockId,nodeIds:ie,count:ie.length});continue}if(L.type==="node"){const ie=Ht({type:"node",nodeId:L.id,subgraphId:N});if(c(l,ie))continue;const de=m.get(L.id);if(!de)continue;V.push({type:"node",node:de,groupId:j,subgraphId:N});continue}if(L.type==="group"){if(c(l,L.stableKey)||E.has(L.stableKey))continue;let ie;if(L.subgraphId&&(ie=w.get(L.subgraphId)?.get(L.id)),ie??=x.get(L.id),!ie)for(const Ee of w.values()){const Ie=Ee.get(L.id);if(Ie){ie=Ie;break}}if(!ie)continue;const de=n.groups[L.stableKey]??[],me=f(s,L.stableKey,!1);E.add(L.stableKey);const Ae=me?[]:C(de,L.id,L.subgraphId,E,H);E.delete(L.stableKey),V.push({type:"group",group:ie,stableKey:L.stableKey,nodeCount:k(de,L.subgraphId),isCollapsed:me,subgraphId:L.subgraphId,children:Ae});continue}if(c(l,Ht({type:"subgraph",subgraphId:L.id}))||H.has(L.id))continue;const z=b.get(L.id);if(!z)continue;const I=n.subgraphs[L.id]??[],$=f(s,Ht({type:"subgraph",subgraphId:L.id}),!1);H.add(L.id);const W=$?[]:C(I,null,L.id,E,H);H.delete(L.id),V.push({type:"subgraph",subgraph:z,nodeCount:k(I,L.id),isCollapsed:$,groupId:j,children:W})}return V};return C(n.root,null,null)}function Ro(n,o){const s=ga(n);if(!s)return Ct.transparentBlack;const l=s.slice(1),i=parseInt(l.slice(0,2),16),c=parseInt(l.slice(2,4),16),f=parseInt(l.slice(4,6),16);return`rgba(${i}, ${c}, ${f}, ${o})`}function $0({containerKey:n,indexLabel:o,targetKey:s,height:l}){return u.jsx("div",{"data-reposition-placeholder":"true",className:"mb-3",style:{height:`${l}px`}},`placeholder-${n}-${o}-${s}`)}function F0({containerType:n,containerDataKey:o,dataKey:s,title:l,nodeCount:i,isTarget:c,isCollapsed:f,canToggleCollapse:m,isDragging:p,isDropTarget:g,isHighlighted:b,backgroundColor:x,borderColor:w,headerBackgroundColor:k,onToggleCollapse:C,childrenContent:S}){const j=`${i} node${i!==1?"s":""}${n==="subgraph"?" (subgraph)":""}`;return u.jsxs("div",{"data-container-type":n,className:`rounded-xl mb-3 shadow-md ${p?"overflow-visible":"overflow-hidden"} transition-shadow ${c?"border-blue-500 border-2 ring-2 ring-blue-400":"border"} ${b&&!c?"ring-2 ring-blue-500 transition-all":""} ${g?"ring-2 ring-blue-300 ring-dashed":""}`,style:{backgroundColor:x,borderColor:w,...c?{touchAction:"none"}:{},...c?{animation:p?"none":"node-card-wiggle 180ms ease-in-out infinite alternate"}:{}},"data-reposition-item":s,children:[u.jsxs("div",{"data-reposition-header":o,className:`flex items-center justify-between cursor-pointer gap-1 px-3 py-2 ${f?"rounded-xl":"rounded-t-xl mb-2"}`,style:{backgroundColor:k,borderColor:w},onClick:N=>{m&&(N.stopPropagation(),C())},children:[u.jsx("span",{"data-reposition-handle":s,className:"touch-none w-8 h-8 -ml-2 flex items-center justify-center shrink-0",children:u.jsx(ap,{className:`w-5 h-5 ${c?"text-blue-500":"text-gray-500"}`})}),u.jsx("span",{className:"font-semibold text-gray-900 flex-1 min-w-0 truncate",children:l}),u.jsx("span",{className:"ml-auto text-sm shrink-0 text-gray-500",children:j}),f?u.jsx(hs,{className:`w-6 h-6 shrink-0 ${m?"text-gray-500":"text-gray-500 opacity-50"}`}):u.jsx(Jn,{className:"w-6 h-6 shrink-0 text-gray-500"})]}),S,!f&&u.jsx("div",{"data-reposition-footer":o,className:`px-3 py-1.5 rounded-b-xl select-none ${m?"cursor-pointer":""}`,style:{backgroundColor:k,borderColor:w},onClick:N=>{m&&(N.stopPropagation(),C())},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:"text-xs flex-1 min-w-0 truncate text-gray-500",children:l}),u.jsxs("div",{className:"ml-auto flex items-center gap-1",children:[u.jsx("span",{className:"text-xs shrink-0 text-gray-500",children:j}),u.jsx(Jn,{className:`w-6 h-6 shrink-0 rotate-180 ${m?"text-gray-500":"text-gray-500 opacity-50"}`})]})]})})]})}function Q2({blockId:n,nodeCount:o}){return u.jsxs("div",{className:"bg-gray-200 rounded-lg px-3 py-2 mb-3 text-sm text-gray-500 text-center","data-reposition-item":`hidden-${n}`,children:[o," hidden node",o!==1?"s":""]},`hidden-${n}`)}function X2({dataKey:n,nodeId:o,displayName:s,isTarget:l,isBypassed:i,isDragging:c,borderClass:f,borderStyle:m,isHighlighted:p}){return u.jsxs("div",{className:`flex min-h-10 items-center gap-1 rounded-xl border-2 px-3 py-1 mb-3 shadow-md select-none ${f} ${i?"bg-purple-200":"bg-white"} ${p&&!l?"ring-2 ring-blue-500 transition-all":""}`,style:l?{...m??{},touchAction:"none",animation:c?"none":"node-card-wiggle 180ms ease-in-out infinite alternate"}:m,"data-reposition-item":n,children:[u.jsx("span",{"data-reposition-handle":n,className:"touch-none flex h-8 w-8 items-center justify-center -ml-2 shrink-0",children:u.jsx(ap,{className:`w-5 h-5 ${l?"text-blue-500":"text-gray-300"}`})}),u.jsx("span",{className:"font-semibold min-w-0 flex-1 truncate text-gray-900",children:s}),u.jsxs("span",{className:"text-xs text-gray-400 shrink-0",children:["#",o]})]},n)}function Z2({onCancel:n,onDone:o}){return u.jsxs("div",{className:"fixed bottom-6 left-0 right-0 z-[2301] flex justify-center gap-4",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[u.jsx("button",{type:"button",className:"px-5 py-2.5 rounded-full bg-white border border-gray-300 text-sm font-medium text-gray-700 shadow-lg",onClick:n,children:"Cancel"}),u.jsx("button",{type:"button",className:"px-5 py-2.5 rounded-full bg-blue-600 text-sm font-semibold text-white shadow-lg",onClick:o,children:"Done"})]})}function J2({nodeId:n,canShowConnectionsToggle:o,connectionHighlightEnabled:s,onToggleConnections:l,connectionMode:i,leftLineCount:c,rightLineCount:f,inputHighlightColor:m,outputHighlightColor:p}){return u.jsx("div",{className:"bg-white border-b border-gray-200",style:{height:"var(--top-bar-offset, 69px)"},children:u.jsxs("div",{className:"h-full px-4 flex items-center justify-between",children:[u.jsx("div",{className:"w-10 h-10"}),u.jsx("h2",{className:"text-lg font-semibold text-gray-900 text-center",children:"Reposition Nodes"}),u.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:o&&u.jsx("button",{type:"button",className:"w-8 h-8 flex items-center justify-center","aria-label":"Highlight node connections","aria-pressed":s,onClick:l,children:u.jsx(ib,{className:"w-6 h-6 overflow-visible",nodeId:n,connectionHighlightMode:i,leftLineCount:c,rightLineCount:f,inactiveColor:Ct.text.secondary,offLineColor:Ct.text.secondary,inputHighlightColor:m,outputHighlightColor:p})})})]})})}function eS({scrollContainerRef:n,isDragging:o,isPointerArmedForDrag:s,onPointerDown:l,onPointerMove:i,onPointerUp:c,onPointerCancel:f,children:m}){return u.jsx("div",{ref:n,className:"flex-1 overflow-auto px-4 pt-4 pb-40",style:{touchAction:o||s?"none":"pan-y"},onPointerDown:l,onPointerMove:i,onPointerUp:c,onPointerCancel:f,children:m})}function ef(n){return n.type==="node"?`node-${n.id}`:n.type==="group"?`group-${Ht({type:"group",groupId:n.id,subgraphId:n.subgraphId??null})}`:`subgraph-${n.id}`}function tS(n){return n.type==="node"?`node-${n.id}`:n.type==="group"?`group-${n.stableKey}`:n.type==="subgraph"?`subgraph-${n.id}`:`hidden-${n.blockId}`}function Qs(n,o){return n.scope!==o.scope?!1:n.scope==="root"?!0:n.scope==="group"&&o.scope==="group"?n.groupKey===o.groupKey:n.scope==="subgraph"&&o.scope==="subgraph"?n.subgraphId===o.subgraphId:!1}function Qi(n){return n.scope==="root"?"root":n.scope==="group"?`group-${n.groupKey}`:`subgraph-${n.subgraphId}`}function nS(n){return{groupKeys:Object.keys(n.groups),subgraphIds:Object.keys(n.subgraphs)}}function q0(n,o,s){const l=[];return o.forEach((i,c)=>{if(i===s)return;const f=n.querySelector(`[data-reposition-item="${i}"]`);if(!f)return;const m=f.getBoundingClientRect();l.push({idx:c,top:m.top,bottom:m.bottom,height:m.height})}),l}function oS(n,o,s){const l=Math.max(n.top,o.top),i=Math.min(n.bottom,o.bottom);return Math.max(0,i-l)>=n.height*s}function W0(n,o,s,l,i,c){if(!(n.bottom>=o.top&&n.top<=o.bottom))return!1;if(!s||!l)return oS(n,o,c);if(i){const g=n.bottom>s.top+s.height*c,b=n.bottom>l.top+l.height*c;return g&&!b}const m=n.top<l.bottom-l.height*c,p=n.top<s.bottom-s.height*c;return m&&!p}function G0(n,o,s,l,i){if(n.length===0)return 0;if(o){let f=0;for(const m of n){const p=m.top+m.height*i;if(l>p){f=m.idx+1;continue}break}return f}let c=n.length;for(let f=n.length-1;f>=0;f-=1){const m=n[f],p=m.bottom-m.height*i;if(s<p){c=m.idx;continue}break}return c}const P0=5,Xi=.625,tf=Ct.status.success,nf=Ct.status.warning,rS=Ct.status.danger,Zi=Ct.brand.blue500;function sS({mobileLayout:n,initialTarget:o,initialViewportAnchor:s=null,onDone:l,onCancel:i}){const c=ce(be=>be.workflow),f=ce(be=>be.nodeTypes),m=ce(be=>be.executingNodeId),p=ce(be=>be.collapsedItems),g=ce(be=>be.stableKeyByPointer),b=ln(be=>be.nodeErrors),x=y.useCallback(be=>g[be]??be,[g]),[w,k]=y.useState(()=>JSON.parse(JSON.stringify(n))),[C,S]=y.useState(!1),[j,N]=y.useState(o),[E,H]=y.useState(null),[V,L]=y.useState(null),[z,I]=y.useState(!1),$=y.useRef(null),W=y.useRef(0),ie=y.useRef(0),de=y.useRef(0),me=y.useRef(!0),Ae=y.useRef(-1),Ee=y.useRef(null),Ie=y.useRef(0),B=y.useRef(0),le=y.useRef(0),fe=y.useRef(null),$e=y.useRef(null),Re=y.useRef(null),T=y.useRef(null),A=y.useRef(!1),O=y.useRef(!1),te=y.useRef(!1),X=y.useRef(null),[pe,Y]=y.useState(null),[ue,_]=y.useState(()=>{const be={...p??{}};return o.type==="group"&&(be[x(Ht({type:"group",groupId:o.id,subgraphId:o.subgraphId??null}))]=!0),o.type==="subgraph"&&(be[x(Ht({type:"subgraph",subgraphId:o.id}))]=!0),be}),[U,R]=y.useState(null),[D,G]=y.useState(null),K=ef(j),Oe=U===K,Ne=y.useMemo(()=>{const be=j.type==="node"?{type:"node",id:j.id}:j.type==="group"?{type:"group",id:j.id,subgraphId:j.subgraphId??null,stableKey:Ht({type:"group",groupId:j.id,subgraphId:j.subgraphId??null})}:{type:"subgraph",id:j.id},Q=(ge,Te)=>ge.type!==Te.type?!1:ge.type==="node"&&Te.type==="node"?ge.id===Te.id:ge.type==="group"&&Te.type==="group"?ge.stableKey===Te.stableKey:ge.type==="subgraph"&&Te.type==="subgraph"?ge.id===Te.id:ge.type==="hiddenBlock"&&Te.type==="hiddenBlock"?ge.blockId===Te.blockId:!1,re=(ge,Te,Ke)=>{for(const Me of ge){if(Q(Me,be))return{groupIds:new Set(Te),subgraphIds:new Set(Ke)};if(Me.type==="group"){const it=re(w.groups[Me.stableKey]??[],[...Te,Me.stableKey],Ke);if(it)return it}else if(Me.type==="subgraph"){const it=re(w.subgraphs[Me.id]??[],Te,[...Ke,Me.id]);if(it)return it}}return null};return re(w.root,[],[])??{groupIds:new Set,subgraphIds:new Set}},[w,j]),we=y.useMemo(()=>{if(!c||j.type!=="node")return{hasConnections:!1,hasUpstream:!1,hasDownstream:!1,leftLineCount:0,rightLineCount:0,upstreamNodeIds:new Set,downstreamNodeIds:new Set};const be=c.nodes.find(Ke=>Ke.id===j.id);if(!be)return{hasConnections:!1,hasUpstream:!1,hasDownstream:!1,leftLineCount:0,rightLineCount:0,upstreamNodeIds:new Set,downstreamNodeIds:new Set};const Q=new Set;be.inputs.forEach((Ke,Me)=>{if(Ke.link==null)return;const it=rl(c,be.id,Me);it&&Q.add(it.node.id)});const re=new Set;be.outputs.forEach((Ke,Me)=>{if(!Ke.links||Ke.links.length===0)return;const it=da(c,be.id,Me);for(const tt of it)re.add(tt.node.id)}),Q.delete(be.id),re.delete(be.id);const ge=be.inputs.filter(Ke=>Ke.link!=null).length,Te=be.outputs.reduce((Ke,Me)=>Ke+(Me.links?.length??0),0);return{hasConnections:ge>0||Te>0,hasUpstream:Q.size>0,hasDownstream:re.size>0,leftLineCount:Math.min(3,ge),rightLineCount:Math.min(3,Te),upstreamNodeIds:Q,downstreamNodeIds:re}},[c,j]),J=y.useMemo(()=>new Map((c?.nodes??[]).map(be=>[be.id,be])),[c]),ke=y.useMemo(()=>{const be=new Map;for(const re of c?.groups??[])be.set(re.id,re);const Q=new Map;for(const re of c?.definitions?.subgraphs??[]){const ge=new Map;for(const Te of re.groups??[])ge.set(Te.id,Te);Q.set(re.id,ge)}return{rootMap:be,bySubgraph:Q}},[c]),ee=y.useMemo(()=>new Map((c?.definitions?.subgraphs??[]).map(be=>[be.id,be])),[c]),se=y.useMemo(()=>{const be=new Map,Q=new Set,re=new Set,ge=Te=>{for(const Ke of Te){if(Ke.type==="group"){if(be.set(Ke.stableKey,{id:Ke.id,subgraphId:Ke.subgraphId??null}),Q.has(Ke.stableKey))continue;Q.add(Ke.stableKey),ge(w.groups[Ke.stableKey]??[]);continue}if(Ke.type==="subgraph"){if(re.has(Ke.id))continue;re.add(Ke.id),ge(w.subgraphs[Ke.id]??[])}}};return ge(w.root),be},[w]);y.useEffect(()=>{const be=ef(j);let Q=null;return A.current?A.current=!1:requestAnimationFrame(()=>{const re=T.current,ge=re?.querySelector(`[data-reposition-item="${be}"]`);if(!ge)return;const Te=!O.current;if(Te&&!te.current&&s&&re){const it=ge.getBoundingClientRect().top-s.viewportTop;Math.abs(it)>.5&&(re.scrollTop+=it),te.current=!0,O.current=!0;return}const Ke=Te?"auto":"smooth";ge.scrollIntoView({behavior:Ke,block:"center"}),O.current=!0}),Q=requestAnimationFrame(()=>{Y(be)}),X.current!=null&&window.clearTimeout(X.current),X.current=window.setTimeout(()=>{Y(null),X.current=null},1500),()=>{Q!=null&&window.cancelAnimationFrame(Q),X.current!=null&&window.clearTimeout(X.current)}},[j,s]);const xe=y.useCallback(be=>{if(be.startsWith("node-")){const Q=parseInt(be.slice(5),10);return Number.isFinite(Q)?{target:{type:"node",id:Q},itemRef:{type:"node",id:Q}}:null}if(be.startsWith("group-")){const Q=be.slice(6),re=se.get(Q);if(!re)return null;const{id:ge,subgraphId:Te}=re;return{target:{type:"group",id:ge,subgraphId:Te},itemRef:{type:"group",id:ge,subgraphId:Te,stableKey:Q}}}if(be.startsWith("subgraph-")){const Q=be.slice(9);return{target:{type:"subgraph",id:Q},itemRef:{type:"subgraph",id:Q}}}return null},[se]),Ue=y.useCallback(be=>{const re=be.target.closest("[data-reposition-item]")?.dataset.repositionItem??null,Ke=be.target.closest("[data-reposition-handle]")?.dataset.repositionHandle??null??(re===K?K:null);if(!Ke)return;const Me=xe(Ke);if(!Me)return;const it=Jy(w,Me.itemRef);if(!it)return;if(be.preventDefault(),Ke!==K){const gt=Me.target;if(gt.type==="group"){const St=gt.id,yt=gt.subgraphId??null;_(ft=>({...ft,[x(Ht({type:"group",groupId:St,subgraphId:yt}))]:!0}))}else if(gt.type==="subgraph"){const St=gt.id;_(yt=>({...yt,[x(Ht({type:"subgraph",subgraphId:St}))]:!0}))}A.current=!0,N(Me.target)}const tt=Me.itemRef.type==="node"||Me.itemRef.type==="group",nt=tt?nS(w):{groupKeys:[],subgraphIds:[]},st=new Set,wt=new Set;if(Me.itemRef.type==="group"){const gt=St=>{for(const yt of St){if(yt.type==="group"){st.has(yt.stableKey)||(st.add(yt.stableKey),gt(w.groups[yt.stableKey]??[]));continue}yt.type==="subgraph"&&(wt.has(yt.id)||(wt.add(yt.id),gt(w.subgraphs[yt.id]??[])))}};st.add(Me.itemRef.stableKey),gt(w.groups[Me.itemRef.stableKey]??[])}$.current={pointerId:be.pointerId,startX:be.clientX,startY:be.clientY,origIndex:it.index,containerId:it.containerId,targetKey:Ke,targetRef:Me.itemRef,target:Me.target,allGroupKeys:nt.groupKeys,allSubgraphIds:nt.subgraphIds,crossContainerEnabled:tt,disallowedGroupKeys:st,disallowedSubgraphIds:wt},W.current=0,Ae.current=it.index,Ee.current=it.containerId,de.current=be.clientY,me.current=!0,I(!0),T.current&&(T.current.style.touchAction="none")},[w,K,xe,x]),Le=y.useCallback((be,Q,re,ge)=>{if(!Q.crossContainerEnabled)return Q.containerId;let Te={scope:"root"},Ke=1/0;for(const Me of Q.allGroupKeys){if(Q.targetRef.type==="group"&&Q.targetRef.stableKey===Me||Q.disallowedGroupKeys.has(Me)||(ue[x(Me)]??!1))continue;const it=`group-${Me}`,tt=be.querySelector(`[data-reposition-item="${it}"]`);if(!tt)continue;const nt=tt.getBoundingClientRect(),st=tt.querySelector(`[data-reposition-header="${it}"]`),wt=tt.querySelector(`[data-reposition-footer="${it}"]`),gt=st?.getBoundingClientRect()??null,St=wt?.getBoundingClientRect()??null;if(!W0(re,nt,gt,St,ge,Xi))continue;const yt=nt.width*nt.height;yt<Ke&&(Ke=yt,Te={scope:"group",groupKey:Me})}for(const Me of Q.allSubgraphIds){if(Q.targetRef.type==="subgraph"&&Q.targetRef.id===Me||Q.disallowedSubgraphIds.has(Me)||(ue[x(Ht({type:"subgraph",subgraphId:Me}))]??!1))continue;const it=be.querySelector(`[data-reposition-item="subgraph-${Me}"]`);if(!it)continue;const tt=it.getBoundingClientRect(),nt=it.querySelector(`[data-reposition-header="subgraph-${Me}"]`),st=it.querySelector(`[data-reposition-footer="subgraph-${Me}"]`),wt=nt?.getBoundingClientRect()??null,gt=st?.getBoundingClientRect()??null;if(!W0(re,tt,wt,gt,ge,Xi))continue;const St=tt.width*tt.height;St<Ke&&(Ke=St,Te={scope:"subgraph",subgraphId:Me})}return Te},[ue,x]),Ve=y.useCallback((be,Q,re,ge,Te)=>{const Me=Sw(w,re).map(tS);if(Qs(re,Q.containerId)){const nt=Me.filter(gt=>gt!==Q.targetKey),st=q0(be,nt),wt=G0(st,Te,ge.top,ge.bottom,Xi);return wt<=Q.origIndex?wt:wt+1}const tt=q0(be,Me);return G0(tt,Te,ge.top,ge.bottom,Xi)},[w]),F=y.useCallback((be,Q,re,ge)=>{G(Te=>{const Ke={targetKey:be.targetKey,sourceContainer:be.containerId,sourceIndex:be.origIndex,hoverContainer:Q,insertIndex:re,placeholderHeight:ge};return Te&&Te.targetKey===Ke.targetKey&&Qs(Te.sourceContainer,Ke.sourceContainer)&&Te.sourceIndex===Ke.sourceIndex&&Qs(Te.hoverContainer,Ke.hoverContainer)&&Te.insertIndex===Ke.insertIndex&&Te.placeholderHeight===Ke.placeholderHeight?Te:Ke})},[]),Se=y.useCallback(be=>{const Q=$.current;if(!Q||be.pointerId!==Q.pointerId)return;const re=be.clientY-Q.startY,ge=be.clientX-Q.startX;if(!C){if(Math.abs(ge)>Math.abs(re)&&Math.abs(ge)>P0){$.current=null,I(!1),T.current&&(T.current.style.touchAction="");return}if(Math.abs(re)<P0)return;S(!0);const yt=T.current;if(yt){const ft=yt.querySelector(`[data-reposition-item="${Q.targetKey}"]`);if(ft){const Et=ft.getBoundingClientRect();Ie.current=Et.top,B.current=Et.left,le.current=ft.offsetHeight||Et.height,ft.style.position="fixed",ft.style.top=`${Et.top}px`,ft.style.left=`${Et.left}px`,ft.style.width=`${Et.width}px`,ft.style.zIndex="70",ft.style.pointerEvents="none",G({targetKey:Q.targetKey,sourceContainer:Q.containerId,sourceIndex:Q.origIndex,hoverContainer:Q.containerId,insertIndex:Q.origIndex,placeholderHeight:le.current})}}try{T.current?.setPointerCapture(be.pointerId)}catch{}de.current=be.clientY,me.current=re>=0;return}W.current=re,ie.current=ge;const Te=T.current;if(!Te)return;const Ke=Te.querySelector(`[data-reposition-item="${Q.targetKey}"]`);Ke&&(Ke.style.top=`${Ie.current+re}px`,Ke.style.left=`${B.current}px`);const Me=Ke?.getBoundingClientRect();if(!Me)return;const it=le.current||Ke?.offsetHeight||Me.height,tt=be.clientY-de.current;tt!==0&&(me.current=tt>0);const nt=me.current;de.current=be.clientY;const st=Le(Te,Q,Me,nt);Ee.current=st;const wt=Qs(st,Q.containerId),gt=st.scope==="group"?`group-${st.groupKey}`:st.scope==="subgraph"?`subgraph-${st.subgraphId}`:null,St=st.scope==="group"?ue[x(st.groupKey)]??!1:st.scope==="subgraph"?ue[x(Ht({type:"subgraph",subgraphId:st.subgraphId}))]??!1:!1;gt&&St&&!wt?$e.current!==gt&&(fe.current!=null&&window.clearTimeout(fe.current),$e.current=gt,fe.current=window.setTimeout(()=>{const yt=Ee.current;yt&&(yt.scope==="group"?_(ft=>({...ft,[x(yt.groupKey)]:!1})):yt.scope==="subgraph"&&_(ft=>({...ft,[x(Ht({type:"subgraph",subgraphId:yt.subgraphId}))]:!1})),fe.current=null)},350)):fe.current!=null&&(window.clearTimeout(fe.current),fe.current=null,$e.current=null),H(!wt&&st.scope==="group"?st.groupKey:null),L(!wt&&st.scope==="subgraph"?st.subgraphId:null),Ae.current=Ve(Te,Q,st,Me,nt),F(Q,st,Ae.current,it)},[C,Le,Ve,F,ue,x]),Be=y.useCallback(()=>{const be=T.current;if(!be)return;be.querySelectorAll("[data-reposition-item]").forEach(re=>{re.style.transform="",re.style.zIndex="",re.style.position="",re.style.top="",re.style.left="",re.style.width="",re.style.pointerEvents="",re.style.transition="",re.style.marginTop=""})},[]),Ge=y.useCallback(be=>{const Q=$.current;if(Q&&be.pointerId===Q.pointerId){if(C){try{T.current?.releasePointerCapture(be.pointerId)}catch{}Be(),fe.current!=null&&(window.clearTimeout(fe.current),fe.current=null),$e.current=null;const re=Ee.current??Q.containerId,ge=Ae.current;if(!Qs(re,Q.containerId)||ge!==Q.origIndex){const Ke=ww(w,Q.targetRef,Q.containerId,Q.origIndex,re,ge);k(Ke),Re.current=Q.target}S(!1),H(null),L(null),G(null)}$.current=null,W.current=0,ie.current=0,Ae.current=-1,Ee.current=null,Ie.current=0,B.current=0,le.current=0,de.current=0,me.current=!0,I(!1),T.current&&(T.current.style.touchAction="")}},[C,w,Be]),et=y.useCallback(be=>{if($.current){if(C){try{T.current?.releasePointerCapture(be.pointerId)}catch{}Be(),fe.current!=null&&(window.clearTimeout(fe.current),fe.current=null),$e.current=null,S(!1),H(null),L(null),G(null)}$.current=null,W.current=0,ie.current=0,Ae.current=-1,Ee.current=null,Ie.current=0,B.current=0,le.current=0,de.current=0,me.current=!0,I(!1),T.current&&(T.current.style.touchAction="")}},[C,Be]);y.useEffect(()=>()=>{fe.current!=null&&window.clearTimeout(fe.current)},[]);const Ye=()=>{const be=Re.current??j,Q=T.current?.querySelector(`[data-reposition-item="${ef(be)}"]`),re=Q?{viewportTop:Q.getBoundingClientRect().top}:null;l(w,be,re)},rt=be=>{_(Q=>{const re=x(be),ge=Q[re]??!1;return{...Q,[re]:!ge}})},Pe=be=>{const Q=x(Ht({type:"subgraph",subgraphId:be}));_(re=>{const ge=re[Q]??!1;return{...re,[Q]:!ge}})},qe=be=>{const Q=J.get(be);return Q?(typeof Q.title=="string"&&Q.title.trim()?Q.title.trim():null)||f?.[Q.type]?.display_name||Q.type:`Node #${be}`},at=be=>{if(K===`node-${be}`)return"";const Q=J.get(be);return Q?b[String(be)]?.length>0?"border-red-700 shadow-red-200":m===String(be)?"border-green-500 shadow-green-200":Q.mode===4?"border-purple-300":"border-transparent":"border-transparent"},pt=be=>J.get(be)?.mode===4;function Mt(be){let Q=0;for(const re of be)re.type==="node"?Q+=1:re.type==="hiddenBlock"?Q+=w.hiddenBlocks[re.blockId]?.length??0:re.type==="group"?Q+=Mt(w.groups[re.stableKey]??[]):re.type==="subgraph"&&(Q+=Mt(w.subgraphs[re.id]??[]));return Q}const Wt=(be,Q)=>{const re=[],ge=D!=null&&Qs(Q,D.hoverContainer);let Te=-1;ge&&D&&(Te=D.insertIndex,Te<0&&(Te=0),Te>be.length&&(Te=be.length));const Ke=Me=>{!ge||!D||Te===Me&&re.push(u.jsx($0,{containerKey:Qi(Q),indexLabel:String(Me),targetKey:D.targetKey,height:D.placeholderHeight},`placeholder-${Qi(Q)}-${Me}-${D.targetKey}`))};return be.forEach((Me,it)=>{if(Ke(it),Me.type==="hiddenBlock"){const tt=w.hiddenBlocks[Me.blockId]??[];re.push(u.jsx(Q2,{blockId:Me.blockId,nodeCount:tt.length},`hidden-${Me.blockId}`));return}if(Me.type==="node"){const tt=`node-${Me.id}`,nt=tt===K,st=pt(Me.id),wt=Oe&&we.hasConnections,gt=wt&&we.upstreamNodeIds.has(Me.id),St=wt&&we.downstreamNodeIds.has(Me.id),yt=nt?"border-blue-500 ring-2 ring-blue-400":gt||St?"":at(Me.id),ft={},Et="7px";wt&&(nt?(ft.borderTopColor=Zi,ft.borderBottomColor=Zi,ft.borderLeftColor=we.hasUpstream?tf:Zi,ft.borderRightColor=we.hasDownstream?nf:Zi,we.hasUpstream&&(ft.borderLeftWidth=Et),we.hasDownstream&&(ft.borderRightWidth=Et)):(gt||St)&&(ft.borderColor=rS,gt&&(ft.borderRightColor=tf,ft.borderRightWidth=Et),St&&(ft.borderLeftColor=nf,ft.borderLeftWidth=Et))),re.push(u.jsx(X2,{dataKey:tt,nodeId:Me.id,displayName:qe(Me.id),isTarget:nt,isBypassed:st,isDragging:C,borderClass:yt,borderStyle:Object.keys(ft).length>0?ft:void 0,isHighlighted:pe===tt},tt));return}if(Me.type==="group"){const tt=Me.subgraphId==null?ke.rootMap.get(Me.id):ke.bySubgraph.get(Me.subgraphId)?.get(Me.id);if(!tt)return null;const nt=`group-${Me.stableKey}`,st=nt===K,wt=ue[x(Me.stableKey)]??!1,gt=Ne.groupIds.has(Me.stableKey),St=!st&&!gt,yt=Ro(tt.color,.15),ft=st?void 0:Ro(tt.color,.4),Et=tt.title?.trim()||`Group ${Me.id}`,Ot=w.groups[Me.stableKey]??[],on=Mt(Ot),Gt=E===Me.stableKey;re.push(u.jsx(F0,{containerType:"group",containerDataKey:nt,dataKey:nt,title:Et,nodeCount:on,isTarget:st,isCollapsed:wt,canToggleCollapse:St,isDragging:C,isDropTarget:Gt,isHighlighted:pe===nt,backgroundColor:yt,borderColor:ft,headerBackgroundColor:Ro(tt.color,.22),onToggleCollapse:()=>rt(Me.stableKey),childrenContent:!wt&&Ot.length>0?u.jsx("div",{className:"px-1",children:Wt(Ot,{scope:"group",groupKey:Me.stableKey})}):null},nt));return}if(Me.type==="subgraph"){const tt=ee.get(Me.id);if(!tt)return null;const nt=`subgraph-${Me.id}`,st=nt===K,wt=ue[x(Ht({type:"subgraph",subgraphId:Me.id}))]??!1,gt=Ne.subgraphIds.has(Me.id),St=!st&&!gt,yt=tt.name||tt.id,ft=w.subgraphs[Me.id]??[],Et=Mt(ft),Ot=V===Me.id;re.push(u.jsx(F0,{containerType:"subgraph",containerDataKey:`subgraph-${Me.id}`,dataKey:nt,title:yt,nodeCount:Et,isTarget:st,isCollapsed:wt,canToggleCollapse:St,isDragging:C,isDropTarget:Ot,isHighlighted:pe===nt,backgroundColor:Ct.brand.subgraphBackground08,borderColor:st?void 0:Ct.brand.subgraphBorder25,headerBackgroundColor:Ct.brand.subgraphBackground14,onToggleCollapse:()=>Pe(Me.id),childrenContent:!wt&&ft.length>0?u.jsx("div",{className:"px-1",children:Wt(ft,{scope:"subgraph",subgraphId:Me.id})}):null},nt));return}}),ge&&D&&Te===be.length&&re.push(u.jsx($0,{containerKey:Qi(Q),indexLabel:"end",targetKey:D.targetKey,height:D.placeholderHeight},`placeholder-${Qi(Q)}-end-${D.targetKey}`)),re},Yt=y.useRef(null);return y.useEffect(()=>{const be=Yt.current;if(!be)return;const Q=re=>re.stopPropagation();return be.addEventListener("touchstart",Q,!0),be.addEventListener("touchmove",Q,!0),be.addEventListener("touchend",Q,!0),be.addEventListener("touchcancel",Q,!0),()=>{be.removeEventListener("touchstart",Q,!0),be.removeEventListener("touchmove",Q,!0),be.removeEventListener("touchend",Q,!0),be.removeEventListener("touchcancel",Q,!0)}},[]),Mn.createPortal(u.jsxs("div",{ref:Yt,className:"fixed inset-0 z-[2300] bg-gray-100 flex flex-col",children:[u.jsx(J2,{nodeId:j.type==="node"?j.id:0,canShowConnectionsToggle:j.type==="node"&&we.hasConnections,connectionHighlightEnabled:Oe,onToggleConnections:()=>R(be=>be===K?null:K),connectionMode:Oe?we.hasUpstream&&we.hasDownstream?"both":we.hasUpstream?"inputs":"outputs":"off",leftLineCount:we.leftLineCount,rightLineCount:we.rightLineCount,inputHighlightColor:tf,outputHighlightColor:nf}),u.jsxs(eS,{scrollContainerRef:T,isDragging:C,isPointerArmedForDrag:z,onPointerDown:Ue,onPointerMove:Se,onPointerUp:Ge,onPointerCancel:et,children:[Wt(w.root,{scope:"root"}),u.jsx("div",{"data-reposition-footer":"root",className:"h-10"})]}),u.jsx(Z2,{onCancel:i,onDone:Ye})]}),document.body)}function If(n,o,s){const l=s?.parentHidden??!1,i=s?.parentSubgraphId??null,c=s?.visitedGroups??new Set,f=s?.visitedSubgraphs??new Set,m=s?.hiddenNodeKeys??new Set,p=s?.hiddenGroupKeys??new Set,g=s?.hiddenSubgraphIds??new Set,{layout:b,hiddenItems:x,stableKeyByPointer:w}=o,k=(S,j)=>{const N=w[j];return N?!!S[N]:!!S[j]};let C=0;for(const S of n){if(S.type==="node"){const H=Ht({type:"node",nodeId:S.id,subgraphId:i});(l||k(x,H))&&(C+=1),k(x,H)&&m.add(H);continue}if(S.type==="hiddenBlock"){const H=b.hiddenBlocks[S.blockId]??[];for(const V of H){const L=Ht({type:"node",nodeId:V,subgraphId:i});(l||k(x,L))&&(C+=1),k(x,L)&&m.add(L)}continue}if(S.type==="group"){if(c.has(S.stableKey))continue;const H=l||k(x,S.stableKey);k(x,S.stableKey)&&p.add(S.stableKey),c.add(S.stableKey);const V=If(b.groups[S.stableKey]??[],o,{parentHidden:H,parentSubgraphId:S.subgraphId,visitedGroups:c,visitedSubgraphs:f,hiddenNodeKeys:m,hiddenGroupKeys:p,hiddenSubgraphIds:g});C+=V.hiddenNodeCount,c.delete(S.stableKey);continue}if(f.has(S.id))continue;const j=Ht({type:"subgraph",subgraphId:S.id}),N=l||k(x,j);k(x,j)&&g.add(S.id),f.add(S.id);const E=If(b.subgraphs[S.id]??[],o,{parentHidden:N,parentSubgraphId:S.id,visitedGroups:c,visitedSubgraphs:f,hiddenNodeKeys:m,hiddenGroupKeys:p,hiddenSubgraphIds:g});C+=E.hiddenNodeCount,f.delete(S.id)}return{hiddenNodeKeys:m,hiddenGroupKeys:p,hiddenSubgraphIds:g,hiddenNodeCount:C}}function ka({workflow:n,runKey:o,isRunning:s,workflowDurationStats:l}){const[i,c]=y.useState(null),f=y.useRef(null),m=y.useRef(null),p=y.useRef(null),g=y.useRef(null),b=y.useRef(null),x=y.useRef(0),w=y.useRef(null);return y.useEffect(()=>{let k=null,C=null;const S=()=>{if(!n){w.current!==null&&(w.current=null,c(null)),p.current=null,g.current=null,b.current=null,f.current=null,x.current=0,m.current=null;return}const j=250,N=Date.now();let E=null;if(!o)m.current?(p.current=N+j,m.current=null,x.current=100,E=100):p.current&&N<p.current?E=100:(p.current=null,g.current=null,b.current=null,f.current=null,x.current=0,E=null);else if(p.current&&N<p.current)g.current=o,E=100;else if(g.current&&N>=(p.current??0)&&(m.current=g.current,g.current=null,f.current=N-j,x.current=0,p.current=null),m.current&&o!==m.current)b.current!==o&&(b.current=o,p.current=N+j,x.current=100),E=100;else{m.current!==o&&(f.current=N,m.current=o,x.current=0,p.current=null);const H=Math.max(0,N-(f.current??N)),V=gu(n),L=l[V]?.avgMs??null;let z;if(L){const $=H/L*100;z=Math.min(99,Math.max(0,$))}else{const $=H/1e3;$<=50?z=$:z=50+($-50)*.5,z=Math.min(90,z)}const I=Math.max(x.current,z);x.current=I,E=Math.round(I)}w.current!==E&&(w.current=E,c(E))};return n?(k=setTimeout(S,0),(s||p.current||o)&&(C=setInterval(S,200))):k=setTimeout(S,0),()=>{k&&clearTimeout(k),C&&clearInterval(C)}},[n,o,s,l]),i}function lS(){const n=ce(f=>f.workflowLoadedAt),[o,s]=y.useState(null),l=o===n,i=y.useCallback(f=>{s(f?n:null)},[n]),c=y.useCallback(()=>{s(null)},[]);return{errorPopoverOpen:l,setErrorPopoverOpen:i,resetErrorPopover:c}}const aS=new Set(["mp4","webm","mkv","mov","avi","m4v"]);function ja(n){const o=n.split(".").pop()?.toLowerCase()??"";return aS.has(o)?"video":"image"}function Zs(n){return ja(n)==="video"}function cp({open:n,buttonRef:o,menuRef:s,repositionToken:l,menuWidth:i=176,horizontalAnchorOffset:c=160,viewportPadding:f=8,bottomBarReserve:m=104}){const[p,g]=y.useState(null),b=y.useCallback(()=>{g(null)},[]);return y.useLayoutEffect(()=>{if(!n)return;const x=()=>{const C=o.current,S=s.current;if(!C||!S)return;const j=C.getBoundingClientRect(),N=S.getBoundingClientRect().height,E=j.bottom,H=j.top-N,V=window.innerHeight-m,L=E+N<=V,z=H>=f,$=Math.max(f,Math.min(L?E:z?H:E,V-N)),W=Math.max(f,Math.min(j.right-c,window.innerWidth-i-f));g({top:$,left:W})};x();const w=requestAnimationFrame(x),k=requestAnimationFrame(x);return window.addEventListener("resize",x),()=>{cancelAnimationFrame(w),cancelAnimationFrame(k),window.removeEventListener("resize",x)}},[n,o,s,i,c,f,m,l]),{menuPosition:p,menuStyle:{top:p?.top??-9999,left:p?.left??-9999,visibility:p?"visible":"hidden"},resetMenuPosition:b}}function iS({nodeId:n,nodeStableKey:o,isBypassed:s,onEditLabel:l,pinnableWidgets:i,singlePinnableWidget:c,isSingleWidgetPinned:f,hasPinnedWidget:m,toggleWidgetPin:p,setPinnedWidget:g,isNodeBookmarked:b,canAddNodeBookmark:x,onToggleNodeBookmark:w,toggleBypass:k,setItemHidden:C,onDeleteNode:S,onMoveNode:j,connectionHighlightMode:N,setConnectionHighlightMode:E,leftLineCount:H,rightLineCount:V}){const[L,z]=y.useState(!1),[I,$]=y.useState(!1),W=y.useRef(null),ie=y.useRef(null),de=()=>{z(!1),$(!1),Ae()},{menuStyle:me,resetMenuPosition:Ae}=cp({open:L,buttonRef:ie,menuRef:W,repositionToken:I});il({open:L,onDismiss:de,triggerRef:ie,contentRef:W,ignoreScrollWithinContent:!0});const Ee=H>0||V>0,Ie=te=>{if(te.stopPropagation(),!o)return;const X=H>0,pe=V>0;if(!X&&!pe)return;const Y=X&&pe?["off","inputs","outputs","both"]:X?["off","inputs"]:["off","outputs"],ue=Y.indexOf(N),_=Y[(ue+1)%Y.length];E(o,_)},B=te=>{te.stopPropagation(),Ae(),z(X=>!X)},le=te=>{te.stopPropagation(),l(),de()},fe=te=>{te.stopPropagation(),o&&(k(o),de())},$e=te=>{te.stopPropagation(),o&&(C(o,!0),de())},Re=te=>{te.stopPropagation(),c&&(p(c.widgetIndex,c.name,c.type,c.options),de())},T=te=>{te.stopPropagation(),g(null),de()},A=te=>{te.stopPropagation(),$(!I)},O=te=>X=>{X.stopPropagation(),g({nodeId:n,widgetIndex:te.widgetIndex,widgetName:te.name,widgetType:te.type,options:te.options}),de()};return u.jsxs("div",{className:"flex items-center gap-1 relative",onClick:te=>te.stopPropagation(),children:[Ee&&u.jsx("button",{type:"button",className:"w-8 h-8 flex items-center justify-center","aria-pressed":N!=="off","aria-label":"Highlight connected nodes",onClick:Ie,children:u.jsx(ib,{className:"w-6 h-6 overflow-visible",nodeId:n,connectionHighlightMode:N,leftLineCount:H,rightLineCount:V})}),u.jsx(Wr,{onClick:B,buttonRef:ie,ariaLabel:"Node options",buttonSize:8,iconSize:5,icon:b?u.jsx(qr,{className:"w-5 h-5 text-yellow-500"}):void 0}),L&&Mn.createPortal(u.jsx("div",{ref:W,className:"fixed z-[1000] w-44",style:me,children:u.jsx(hr,{items:[{key:"edit-label",label:"Edit Label",icon:u.jsx(sp,{className:"w-4 h-4"}),onClick:le},{key:"toggle-bookmark",label:b?"Remove bookmark":"Bookmark node",icon:b?u.jsx(Lu,{className:"w-4 h-4"}):u.jsx(qr,{className:"w-4 h-4 text-yellow-500"}),onClick:te=>{te.stopPropagation(),w(),de()},hidden:!(b||x)},{type:"divider",key:"divider-node-actions"},{key:"toggle-bypass",label:s?"Engage node":"Bypass node",icon:u.jsx(Ef,{className:"w-4 h-4",isBypassed:s}),onClick:fe},{key:"hide-node",label:"Hide node",icon:u.jsx(Fo,{className:"w-4 h-4"}),onClick:$e},{key:"move-node",label:"Move",icon:u.jsx(fb,{className:"w-4 h-4"}),onClick:te=>{te.stopPropagation(),j(),de()}},{type:"divider",key:"divider-pin",className:i.length>0?"":"hidden"},{key:"pin-single-widget",label:f?"Remove pin":"Pin widget",icon:f?u.jsx(ma,{className:"w-4 h-4 text-fuchsia-500"}):u.jsx(Tf,{className:"w-4 h-4"}),onClick:Re,hidden:!(i.length>0&&c)},{key:"remove-pin",label:"Remove pin",icon:u.jsx(ma,{className:"w-4 h-4 text-fuchsia-500"}),onClick:T,hidden:!(i.length>0&&!c&&m)},{key:"pin-widget-submenu",label:"Pin widget",icon:u.jsx(Tf,{className:"w-4 h-4"}),rightSlot:u.jsx(ip,{className:`w-4 h-4 text-gray-400 transition-transform ${I?"rotate-90":""}`}),onClick:A,hidden:!(i.length>0&&!c)},{type:"custom",key:"pin-widget-items",hidden:!(i.length>0&&!c&&I),render:u.jsx("div",{className:"border-t border-gray-100 bg-gray-50 max-h-48 overflow-auto",children:i.map(te=>u.jsx("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 text-gray-700",onClick:O(te),children:te.name},te.widgetIndex))})},{type:"divider",key:"divider-delete"},{key:"delete-node",label:"Delete node",icon:u.jsx(Do,{className:"w-4 h-4"}),color:"danger",onClick:te=>{te.stopPropagation(),S(),de()}}]})}),document.body)]})}function uS({nodeId:n,open:o,errors:s,anchorRef:l,onClose:i}){const c=b=>{b.stopPropagation(),i()},[f,m]=y.useState(null),p=y.useRef(null),g=eo(b=>b.currentPanel);return y.useEffect(()=>{o&&g!=="workflow"&&i()},[o,g,i]),y.useEffect(()=>{if(!o)return;const b=()=>{const k=l.current;if(!k)return;const C=k.getBoundingClientRect();m({top:C.bottom+8,left:Math.max(16,Math.min(C.left+C.width/2-140,window.innerWidth-296))})};b();const x=k=>{k.target&&(l.current?.contains(k.target)||p.current?.contains(k.target)||i())},w=()=>{i()};return document.addEventListener("pointerdown",x),document.addEventListener("scroll",w,!0),window.addEventListener("resize",b),()=>{document.removeEventListener("pointerdown",x),document.removeEventListener("scroll",w,!0),window.removeEventListener("resize",b)}},[o,n,i,l]),!o||s.length===0||!f?null:Mn.createPortal(u.jsxs("div",{ref:p,id:`error-popover-${n}`,className:"error-popover-root fixed z-[2000] bg-red-50 border border-red-700 rounded-lg shadow-lg w-72 max-h-64 overflow-hidden",style:{top:f.top,left:f.left},children:[u.jsxs("div",{id:`error-popover-header-${n}`,className:"popover-header flex items-center justify-between px-3 py-2 border-b border-red-200 bg-red-700",children:[u.jsxs("span",{id:`error-popover-title-${n}`,className:"popover-title text-sm font-semibold text-white",children:[s.length," ",s.length===1?"Error":"Errors"]}),u.jsx("button",{type:"button",onClick:c,className:"w-6 h-6 flex items-center justify-center text-red-200 hover:text-white rounded","aria-label":"Close",children:u.jsx(lb,{className:"w-4 h-4"})})]}),u.jsx("div",{id:`error-popover-body-${n}`,className:"popover-body p-3 space-y-2 bg-red-100",children:s.map((b,x)=>{const w=b.details?.toLowerCase().replace(/[_\s]/g,"")||"",k=b.inputName?.toLowerCase().replace(/[_\s]/g,"")||"",C=!b.details||b.details===b.message||b.inputName&&w===k;return u.jsxs("div",{className:"error-item flex items-start gap-2 text-sm",children:[u.jsx("span",{className:"error-dot mt-1.5 h-1.5 w-1.5 rounded-full bg-red-700 shrink-0","aria-hidden":"true"}),u.jsxs("div",{className:"error-content-wrapper min-w-0",children:[b.inputName&&u.jsx("div",{className:"error-input-name font-medium text-red-800 mb-0.5",children:b.inputName}),u.jsx("div",{className:"error-message-text text-red-800",children:b.message}),!C&&u.jsx("div",{className:"error-details-text text-xs text-red-700 mt-0.5 break-words",children:b.details})]})]},x)})})]}),document.body)}function cS({noteText:n,noteLinkified:o,noteWidgetIndex:s,isEditingNote:l,setIsEditingNote:i,onUpdateNote:c,noteTextareaRef:f,onNoteTap:m}){const p=b=>{s!==null&&c(b)},g=b=>{s!==null&&c(b.target.value)};return u.jsxs("div",{className:"mb-3 group","data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1.5","data-textarea-header":"true",children:[u.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Note"}),l&&u.jsx(ia,{value:n,onChange:p,textareaRef:f,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),l?u.jsx("textarea",{ref:f,value:n,onChange:g,onBlur:()=>i(!1),className:"w-full p-3 border rounded-lg text-base resize-none note-display",rows:Math.min(8,Math.max(3,n.split(`
`).length))}):u.jsx("div",{className:"w-full p-3 border rounded-lg text-base whitespace-pre-wrap break-words note-display",onDoubleClick:()=>i(!0),onTouchEnd:m,children:o})]})}function dS({show:n,previewImage:o,displayName:s,onImageClick:l,isExecuting:i,overallProgress:c,displayNodeProgress:f}){return!n||!o?null:u.jsxs("div",{className:"mb-3",children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Output Preview"}),u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:mo(o.filename,o.subfolder,o.type),alt:`${s} output`,className:"w-full h-auto rounded-lg border border-gray-100",loading:"lazy",onClick:l},"preview"),i&&c!==null&&u.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-lg flex items-end p-3",children:u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs text-white/90 mb-1",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[f,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-white/30 overflow-hidden",children:u.jsx("div",{className:"h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,f))}%`}})}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-white/90 mt-2 mb-1",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[c,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-white/30 overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,c))}%`}})})]})})]})]})}function fS({nodeId:n,displayName:o,isEditingLabel:s,labelValue:l,labelInputRef:i,onLabelChange:c,onLabelBlur:f,isCollapsed:m,isBypassed:p,isExecuting:g,overallProgress:b,hasErrors:x,errorIconRef:w,errorPopoverOpen:k,setErrorPopoverOpen:C,toggleNodeFold:S,rightSlot:j}){const N=()=>{s||S()},E=V=>{V.stopPropagation(),S()},H=V=>{V.stopPropagation(),C(!k)};return u.jsxs("div",{id:`node-header-${n}`,className:`node-header flex items-center justify-between cursor-pointer gap-3 ${m?"":"mb-3 pb-2 border-b"} ${p?`bg-purple-200 border-purple-300 px-3 -mx-3 -mt-1 pt-1 rounded-t-xl ${m?"pb-1 -mb-1 rounded-b-xl":""}`:m?"":"border-gray-100"}`,onClick:N,children:[u.jsxs("div",{id:`node-title-container-${n}`,className:"flex items-center gap-1 min-w-0",children:[u.jsx("button",{onClick:E,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-400 hover:text-gray-600 shrink-0",children:m?u.jsx(hs,{className:"w-6 h-6"}):u.jsx(Jn,{className:"w-6 h-6"})}),s?u.jsx("input",{ref:i,value:l,onChange:V=>c(V.target.value),onBlur:f,onKeyDown:V=>{(V.key==="Enter"||V.key==="Escape")&&V.currentTarget.blur()},onClick:V=>V.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{id:`node-display-name-${n}`,className:`font-semibold text-gray-900 select-none flex-1 min-w-0 ${m?"whitespace-nowrap overflow-hidden text-ellipsis":"whitespace-normal break-words"}`,children:o}),u.jsxs("span",{id:`node-id-badge-${n}`,className:"text-xs text-gray-400 min-w-[2ch] text-right",children:["#",n]}),x&&u.jsx("button",{ref:w,type:"button",onClick:H,className:"w-5 h-5 flex items-center justify-center text-red-500 hover:text-red-600 shrink-0","aria-label":"View errors",children:u.jsx(ab,{className:"w-4 h-4"})}),g&&m&&b!==null?u.jsxs("div",{id:`node-progress-indicator-${n}`,className:"relative w-6 h-6 flex items-center justify-center",children:[u.jsx(b2,{className:"absolute",width:"24",height:"24",style:{transform:"rotate(-90deg)"},progress:b,radius:10}),u.jsx("span",{id:`node-progress-text-${n}`,className:"text-[8px] font-bold text-blue-600",children:b})]}):null,g&&!m?u.jsx("span",{id:`node-executing-pulse-${n}`,className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}):null]}),u.jsx("div",{id:`node-header-right-slot-${n}`,className:"header-right-slot",children:j})]})}function pS({nodeId:n,displayName:o,hasConnections:s,onCancel:l,onDelete:i}){const c=[s?{label:"Delete & Reconnect",onClick:()=>i(!0),className:"w-full px-4 py-2.5 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 active:bg-red-800"}:null,{label:s?"Delete & Disconnect":"Delete",onClick:()=>i(!1),className:s?"w-full px-4 py-2.5 text-sm font-medium text-red-700 bg-red-50 rounded-lg hover:bg-red-100 active:bg-red-200":"w-full px-4 py-2.5 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 active:bg-red-800"},{label:"Cancel",onClick:l,className:"w-full px-4 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 active:bg-gray-300"}].filter(f=>f!==null);return Mn.createPortal(u.jsx(qo,{onClose:l,title:"Delete node",description:u.jsxs(u.Fragment,{children:["Delete ",u.jsx("span",{className:"font-medium text-gray-700",children:o})," (#",n,")?"]}),actionsLayout:"stack",actions:c}),document.body)}function hS({label:n}){return u.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 z-[100] animate-in fade-in slide-in-from-bottom-2 duration-200",children:u.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg whitespace-nowrap uppercase tracking-tighter ring-2 ring-white",children:n})})}function $o(n){return n.toLowerCase().replace(/[_-]+/g," ").replace(/\s+/g," ").trim()}function Lf(n,o){if(!n.trim())return!0;const s=$o(o);return $o(n).split(" ").filter(Boolean).every(l=>s.includes(l))}function xu(n,o){if(!n)return!0;let s=0;for(const l of o)if(l===n[s]&&(s+=1),s>=n.length)return!0;return!1}function Ao(n,o){if(!n)return 0;const s=$o(n),l=$o(o);return l?l===s?120:l.startsWith(s)?90:l.includes(s)?70:xu(s,l)?40:0:0}function sa(n){return n.replace(/^custom_nodes\./,"").replace(/[._-]+/g," ").replace(/\s+/g," ").trim()}function hb(n){const o=String(n).split(",")[0].trim().toUpperCase();return["IMAGE","LATENT","MODEL","CLIP","VAE","CONDITIONING","INT","FLOAT","STRING","BOOLEAN","MASK"].includes(o)?`type-${o}`:"type-default"}function mb(n,o,s,l){const i=o.trim(),c=n.map(f=>{const{displayName:m,typeName:p,category:g="",pack:b=""}=s(f),x=`${m} ${p} ${g} ${b}`;if(!(!i||Lf(i,x)||xu($o(i),$o(x))))return null;const k=i?Ao(i,m)*10+Ao(i,p)*4:0;return{item:f,score:k}}).filter(f=>f!==null);return c.sort((f,m)=>m.score!==f.score?m.score-f.score:l(f.item)-l(m.item)),c.map(f=>f.item)}function mS({nodeId:n,displayName:o,pack:s,outputName:l,outputType:i,inputName:c,isConnected:f,onSelect:m}){return u.jsx("button",{type:"button",className:`w-full text-left rounded-xl border px-4 py-3 shadow-sm transition ${f?"border-blue-300 bg-white":"border-gray-200 bg-white hover:border-gray-300 active:scale-[0.998]"}`,onClick:m,children:u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2 min-w-0",children:[u.jsxs("span",{className:"truncate",children:[o," ",u.jsxs("span",{className:"text-gray-400",children:["#",n]})]}),f&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-blue-100 text-blue-700 text-[10px] font-medium shrink-0",children:[u.jsx(Go,{className:"w-3 h-3"}),"Currently connected"]})]}),u.jsx("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:s||"Core"}),u.jsxs("div",{className:"text-xs text-gray-700 mt-1 inline-flex items-center gap-1.5",children:[u.jsx("span",{className:`inline-flex h-5 w-5 items-center justify-center rounded-full text-[11px] font-bold ${hb(i)}`,children:""}),u.jsxs("span",{className:"truncate",children:[l," -> ",c]})]})]})})}function ya({onClick:n,ariaLabel:o="Close",variant:s="default",buttonSize:l=10,iconSize:i=6,isIdle:c,zIndex:f}){const m=typeof c=="boolean"||typeof f=="number",p=m?"viewer":s;return u.jsx("button",{onClick:n,className:`transition-colors flex items-center justify-center rounded-full ${p==="viewer"?`absolute top-3 right-3 w-${l} h-${l} text-white ${c?"bg-transparent":"bg-black/60"}`:p==="plain"?`w-${l} h-${l} text-gray-500 bg-transparent hover:bg-transparent`:`w-${l} h-${l} bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700`}`.trim(),style:m&&typeof f=="number"?{zIndex:f}:void 0,"aria-label":o,children:u.jsx(wa,{className:`w-${i} h-${i}`})})}function gb({isOpen:n,onClose:o,title:s,searchQuery:l,onSearchQueryChange:i,searchPlaceholder:c,onBack:f,backLabel:m="Back",children:p,footer:g,zIndex:b=2100}){return n?Mn.createPortal(u.jsx("div",{className:"fixed inset-0 bg-gray-400/40 backdrop-blur-sm",style:{zIndex:b},onClick:o,children:u.jsxs("div",{className:"w-full h-full flex flex-col",onClick:x=>x.stopPropagation(),children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between safe-area-inset-top",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[f&&u.jsx("button",{type:"button",className:"text-sm text-blue-600 font-medium",onClick:f,children:m}),u.jsx("h2",{className:"text-base font-semibold text-gray-900",children:s})]}),u.jsx(ya,{onClick:o,variant:"plain",buttonSize:8,iconSize:5})]}),u.jsx("div",{className:"bg-white px-4 py-2 border-b border-gray-100",children:u.jsx(Ca,{value:l,onChange:i,placeholder:c,autoFocus:!0})}),p,g??u.jsx("div",{className:"flex-shrink-0 h-12 bg-white border-t border-gray-200 flex items-center justify-center",children:u.jsx("button",{type:"button",className:"text-sm text-gray-500 font-medium",onClick:o,children:"Cancel"})})]})}),document.body):null}function yb({title:n,subtitle:o,onSelect:s,outputType:l,outputName:i,inputName:c,titleClassName:f="text-sm font-semibold text-gray-900 truncate"}){return u.jsx("button",{type:"button",className:"w-full text-left rounded-xl border border-gray-200 bg-white px-4 py-3 shadow-sm hover:border-gray-300 active:scale-[0.998] transition",onClick:s,children:u.jsxs("div",{className:"min-w-0",children:[u.jsx("div",{className:f,children:n}),u.jsx("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:o||"Core"}),l&&i&&c&&u.jsxs("div",{className:"text-xs text-gray-700 mt-1 inline-flex items-center gap-1.5",children:[u.jsx("span",{className:`inline-flex h-5 w-5 items-center justify-center rounded-full text-[11px] font-bold ${hb(l)}`,children:""}),u.jsxs("span",{className:"truncate",children:[String(i)," -> ",c]})]})]})})}function au({query:n,message:o}){return n.trim()?u.jsx("div",{className:"px-4 py-8 text-center text-sm text-gray-500",children:o}):null}function ps(n,o){return`${n}:${o}`}function gS(n,o){if(n.size!==o.size)return!1;for(const s of n)if(!o.has(s))return!1;return!0}function Y0(n){const{isOpen:o,onClose:s,nodeId:l,mode:i}=n,c=ce(X=>X.workflow),f=ce(X=>X.nodeTypes),m=ce(X=>X.connectNodes),p=ce(X=>X.disconnectInput),g=ce(X=>X.addNodeAndConnect),b=ce(X=>X.scrollToNode),[x,w]=y.useState(""),[k,C]=y.useState("pick"),[S,j]=y.useState(()=>{if(i!=="output"||!c)return new Set;const X=new Set;for(const pe of c.links){const[,Y,ue,_,U]=pe;Y===l&&ue===n.outputIndex&&X.add(ps(_,U))}return X}),[N,E]=y.useState(!1),H=y.useMemo(()=>c?c.nodes.find(pe=>pe.id===l)?.stableKey??null:null,[l,c]),V=X=>c?c.nodes.find(Y=>Y.id===X)?.stableKey??null:null,L=y.useMemo(()=>i!=="input"||!c||!f?[]:pw(c,f,l,n.inputIndex),[i,c,f,l,n]),z=y.useMemo(()=>{if(i!=="input")return[];const X=x.trim(),pe=L.map(Y=>{const{node:ue}=Y,_=f?.[ue.type],U=ue.title,R=typeof U=="string"&&U.trim()?U.trim():_?.display_name||ue.type,D=`${R} ${_?.display_name??""} ${ue.type} ${String(ue.id)}`;if(!(!X||Lf(X,D)||xu($o(X),$o(D))))return null;const K=Ao(X,R)*4+Ao(X,_?.display_name??"")*3+Ao(X,ue.type)*2+Ao(X,String(ue.id));return{...Y,score:K}}).filter(Boolean);return pe.sort((Y,ue)=>ue.score-Y.score||Y.node.id-ue.node.id),pe},[i,L,x,f]),I=y.useMemo(()=>i!=="input"||!f?[]:hw(f,n.inputType).map((X,pe)=>({...X,index:pe})),[i,f,n]),$=y.useMemo(()=>i!=="input"?[]:mb(I,x,X=>{const pe=String(X.def.display_name??X.def.name??X.typeName??""),Y=String(X.def.name??X.typeName??""),ue=sa(X.def.python_module||X.def.category?.split("/")[0]||"Core");return{displayName:pe,typeName:Y,category:String(X.def.category??""),pack:ue}},X=>X.index),[i,I,x]),W=y.useMemo(()=>{if(i!=="output"||!c||!f)return[];const X=mw(c,l,n.outputIndex),pe=new Set;for(const U of c.links){const[,R,D,G,K]=U;R===l&&D===n.outputIndex&&pe.add(ps(G,K))}const Y=x.trim(),_=X.map(({node:U,inputIndex:R})=>{const D=f[U.type],G=U.title,K=typeof G=="string"&&G.trim()?G.trim():D?.display_name||U.type,Oe=sa(String(D?.python_module??D?.category?.split("/")[0]??"Core")),Ne=U.inputs?.[R];if(!Ne)return null;const we=Ne.localized_name||Ne.name||`Input ${R+1}`,J=String(Ne.type),ke=ps(U.id,R),ee=pe.has(ke);let se=!1,xe=null;const Ue=Ne.link;if(Ue!=null&&!ee){const Se=c.links.find(Be=>Be[0]===Ue);if(Se){se=!0;const[,Be]=Se,Ge=c.nodes.find(et=>et.id===Be);Ge&&(xe=`${f[Ge.type]?.display_name||Ge.type} #${Ge.id}`)}}const Le=`${K} ${D?.display_name??""} ${U.type} ${String(U.id)} ${we}`;if(!(!Y||Lf(Y,Le)||xu($o(Y),$o(Le))))return null;const F=Ao(Y,K)*4+Ao(Y,we)*3+Ao(Y,D?.display_name??"")*2+Ao(Y,U.type)*2+Ao(Y,String(U.id));return{nodeId:U.id,inputIndex:R,displayName:K,pack:Oe,inputName:we,inputType:J,currentlyConnectedFromThisOutput:ee,hasExistingLink:se,existingSourceLabel:xe,score:F}}).filter(U=>U!==null);return _.sort((U,R)=>R.score-U.score||U.nodeId-R.nodeId),_},[i,c,f,l,n,x]),ie=y.useMemo(()=>i!=="output"?new Set:new Set(W.filter(X=>X.currentlyConnectedFromThisOutput).map(X=>ps(X.nodeId,X.inputIndex))),[i,W]),de=y.useMemo(()=>{const X=new Map;for(const pe of W)X.set(ps(pe.nodeId,pe.inputIndex),pe);return X},[W]),me=y.useMemo(()=>i!=="output"?!1:!gS(S,ie),[i,S,ie]),Ae=y.useMemo(()=>{if(i!=="output")return[];const X=[];for(const pe of S){if(ie.has(pe))continue;const Y=de.get(pe);Y?.hasExistingLink&&X.push(Y)}return X},[i,S,ie,de]),Ee=(X,pe)=>{if(i!=="input")return;const Y=V(X);!Y||!H||(m(Y,pe,H,n.inputIndex,n.inputType),s(),b(Y))},Ie=()=>{i==="input"&&H&&(p(H,n.inputIndex),s())},B=X=>{if(i!=="input"||!H)return;const pe=g(X,H,n.inputIndex);if(s(),pe!==null){const Y=V(pe);Y&&b(Y)}},le=(X,pe)=>{const Y=ps(X,pe);j(ue=>{const _=new Set(ue);return _.has(Y)?_.delete(Y):_.add(Y),_})},fe=()=>{if(i==="output"){for(const X of ie){if(S.has(X))continue;const pe=de.get(X);if(!pe)continue;const Y=V(pe.nodeId);Y&&p(Y,pe.inputIndex)}for(const X of S){if(ie.has(X))continue;const pe=de.get(X);if(!pe)continue;const Y=V(pe.nodeId);!Y||!H||m(H,n.outputIndex,Y,pe.inputIndex,pe.inputType)}s()}},$e=()=>{if(i==="output"){if(Ae.length>0){E(!0);return}fe()}},Re=i==="input"?k==="pick"?`Connect ${n.inputName}`:"Add new node":`Connect ${n.outputName}`,T=i==="input"?k==="pick"?"Search existing nodes...":"Search node types...":"Search target nodes...",A=()=>{if(i!=="input")return null;const X=n;return u.jsxs("div",{className:"px-3 pt-3 pb-20 flex flex-col gap-2",children:[z.map(({node:pe,outputIndex:Y})=>{const ue=f?.[pe.type],_=pe.title,U=typeof _=="string"&&_.trim()?_.trim():ue?.display_name||pe.type,R=sa(String(ue?.python_module??ue?.category?.split("/")[0]??"Core")),D=pe.outputs?.[Y],G=D?.localized_name||D?.name||`Output ${Y+1}`,K=String(D?.type??X.inputType),Oe=pe.id===X.currentlyConnectedNodeId;return u.jsx(mS,{nodeId:pe.id,displayName:U,pack:R,outputName:G,outputType:K,inputName:X.inputName,isConnected:Oe,onSelect:()=>Ee(pe.id,Y)},pe.id)}),z.length===0&&u.jsx(au,{query:x,message:"No matching nodes found"}),u.jsxs("button",{type:"button",className:"w-full text-left rounded-xl bg-blue-50 px-4 py-3 flex items-center gap-3 hover:bg-blue-100 active:scale-[0.998] transition",onClick:()=>{C("addNew"),w("")},children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:u.jsx(Gr,{className:"w-4 h-4 text-blue-600"})}),u.jsx("span",{className:"text-sm font-semibold text-blue-700",children:"Add new node..."})]}),X.currentlyConnectedNodeId!==null&&u.jsx("button",{type:"button",className:"w-full text-left rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm font-semibold text-red-600 hover:bg-red-100 active:scale-[0.998] transition",onClick:Ie,children:"Disconnect"})]})},O=()=>{if(i!=="input")return null;const X=n;return u.jsxs("div",{className:"px-3 pt-3 pb-20 flex flex-col gap-2",children:[$.length===0&&u.jsx(au,{query:x,message:"No matching node types found"}),$.map(({typeName:pe,def:Y,outputIndex:ue})=>{const _=sa(String(Y.python_module??Y.category?.split("/")[0]??"Core")),U=String(Y.output?.[ue]??X.inputType),R=Y.output_name?.[ue]??Y.output?.[ue]??"Output";return u.jsx(yb,{title:String(Y.display_name),subtitle:_||"Core",outputType:U,outputName:String(R),inputName:X.inputName,titleClassName:"text-sm font-medium text-gray-900 truncate",onSelect:()=>B(pe)},pe)})]})},te=()=>{if(i!=="output")return null;const X=n;return u.jsxs("div",{className:"px-3 pt-3 pb-20 flex flex-col gap-2",children:[W.map(pe=>{const Y=ps(pe.nodeId,pe.inputIndex),ue=S.has(Y);return u.jsx("button",{type:"button",className:`w-full text-left rounded-xl border px-4 py-3 shadow-sm transition ${ue?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300 active:scale-[0.998]"}`,onClick:()=>le(pe.nodeId,pe.inputIndex),children:u.jsxs("div",{className:"flex items-start justify-between gap-3",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsxs("div",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2 min-w-0",children:[u.jsxs("span",{className:"truncate",children:[pe.displayName," ",u.jsxs("span",{className:"text-gray-400",children:["#",pe.nodeId]})]}),pe.currentlyConnectedFromThisOutput&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-blue-100 text-blue-700 text-[10px] font-medium shrink-0",children:[u.jsx(Go,{className:"w-3 h-3"}),"Connected"]}),pe.hasExistingLink&&u.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-amber-100 text-amber-700 text-[10px] font-medium shrink-0",children:"Already linked"})]}),u.jsx("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:pe.pack||"Core"}),u.jsxs("div",{className:"text-xs text-gray-700 mt-1 truncate",children:[X.outputName," ","->"," ",pe.inputName]}),pe.hasExistingLink&&pe.existingSourceLabel&&u.jsxs("div",{className:"text-xs text-amber-700 mt-1 truncate",children:["Currently from ",pe.existingSourceLabel]})]}),u.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center ${ue?"bg-blue-600 border-blue-600":"bg-white border-gray-300"}`,children:ue&&u.jsx(Go,{className:"w-3 h-3 text-white"})})]})},Y)}),W.length===0&&u.jsx(au,{query:x,message:"No matching target nodes found"})]})};return u.jsxs(gb,{isOpen:o,onClose:s,title:Re,searchQuery:x,onSearchQueryChange:w,searchPlaceholder:T,onBack:i==="input"&&k==="addNew"?()=>{C("pick"),w("")}:void 0,footer:i==="output"?u.jsxs("div",{className:"flex-shrink-0 h-12 bg-white border-t border-gray-200 flex items-center justify-end gap-2 px-3",children:[u.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-lg text-sm text-gray-700 border border-gray-300 hover:bg-gray-50",onClick:s,children:"Cancel"}),u.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-lg text-sm text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",onClick:$e,disabled:!me,children:"Apply"})]}):void 0,children:[u.jsx("div",{className:"flex-1 overflow-auto bg-white",children:i==="input"?k==="pick"?A():O():te()}),i==="output"&&N&&u.jsx(qo,{onClose:()=>E(!1),title:"Overwrite existing connections?",description:"Some selected inputs are already connected. Continuing will disconnect their current source and reconnect to this output.",actions:[{label:"Cancel",onClick:()=>E(!1),className:"px-3 py-1.5 rounded-lg text-sm text-gray-700 border border-gray-300 hover:bg-gray-50"},{label:"Overwrite",onClick:()=>{E(!1),fe()},className:"px-3 py-1.5 rounded-lg text-sm text-white bg-red-600 hover:bg-red-700"}]})]})}function yS(n,o,s,l){const i=n.nodes.find(b=>b.id===o);if(!i||i.type!=="Reroute")return l;let c=null;const f=[],m=new Set,p=i.inputs[0]?.link;if(p!=null){const b=n.links.find(x=>x[0]===p);if(b){const x=b[1],w=b[2],C=n.nodes.find(S=>S.id===x)?.outputs[w];c=C?.localized_name||C?.name||null}}for(const b of i.outputs){const x=b.links??[];for(const w of x){const k=n.links.find(H=>H[0]===w);if(!k)continue;const C=k[3],S=k[4],N=n.nodes.find(H=>H.id===C)?.inputs[S],E=N?.localized_name||N?.name||null;E&&!m.has(E)&&(m.add(E),f.push(E))}}const g=f.map((b,x)=>x<f.length-1?`${b}/`:b).join(`
`);return f.length>1?g:s==="input"?c||g||l:g||c||l}function bS({direction:n,hasConnection:o,isEmptyRequiredInput:s=!1,hideLabel:l,resolvedLabel:i,shouldWrapResolvedLabel:c,sizeClass:f,arrowClass:m,typeClass:p,buttonRef:g,connectionCount:b,onClick:x,onPointerDown:w,onPointerMove:k,onPointerUp:C}){const S=n==="input",j=S?!o&&!s:!1,N=!S&&!o;return u.jsxs(u.Fragment,{children:[S?null:!l&&u.jsx("span",{className:`text-sm text-gray-700 flex-1 min-w-0 ${c?"whitespace-pre-line break-words leading-tight text-right":"truncate"}`,children:i}),!S&&b>1&&u.jsx("span",{className:"bg-gray-200 text-gray-700 rounded-full px-2 py-0.5 text-xs font-medium flex-shrink-0",children:b}),u.jsx("button",{onClick:x,onPointerDown:w,onPointerMove:k,onPointerUp:C,onPointerCancel:C,disabled:j,ref:g,className:`
          flex items-center justify-center rounded-full font-medium box-border
          ${S?"border-2":""}
          ${f} flex-shrink-0
          transition-opacity
          ${p}
          ${S&&s?"opacity-100 cursor-pointer border-red-500":"border-transparent"}
          ${j?"opacity-40 cursor-not-allowed":""}
          ${!j&&N?"opacity-40 cursor-pointer active:scale-95":""}
          ${!j&&!N?"opacity-100 cursor-pointer active:scale-95":""}
        `,children:S?u.jsxs(u.Fragment,{children:[o&&u.jsx("span",{className:m,children:""}),s&&!o&&u.jsx("span",{className:m,children:"+"})]}):o&&u.jsx("span",{className:m,children:""})}),!S&&l?null:S&&!l&&u.jsx("span",{className:`text-sm flex-1 min-w-0 ${c?"whitespace-pre-line break-words leading-tight":"truncate"} ${s?"text-red-600 font-medium":"text-gray-700"}`,children:i})]})}function xS(n){const o=String(n).split(",")[0].trim();return["IMAGE","LATENT","MODEL","CLIP","VAE","CONDITIONING","INT","FLOAT","STRING","BOOLEAN","MASK"].includes(o)?`type-${o}`:"type-default"}function Q0(n){return String(n).split(",").map(o=>o.trim().toUpperCase()).filter(Boolean)}const X0=y.memo(function({slot:o,nodeId:s,direction:l,slotIndex:i,compact:c=!1,hideLabel:f=!1,isRequired:m=!1}){const p=ce(_=>_.workflow),g=ce(_=>_.scrollToNode),b=ce(_=>_.revealNodeWithParents),x=ce(_=>_.nodeTypes),w=ce(_=>_.hiddenItems),[k,C]=y.useState(!1),[S,j]=y.useState(!1),N=y.useRef(null),E=y.useRef(null),[H,V]=y.useState(null),L=y.useRef(null),z=y.useRef(null),I=y.useRef(null),$=y.useRef(!1),W=y.useMemo(()=>{const _=o.localized_name||o.name;return p?yS(p,s,l,_):_},[p,l,o.localized_name,o.name,s]),ie=y.useMemo(()=>{if(!p)return[];const _=[];if(l==="input"){if(o.link!=null){const R=rl(p,s,i);R&&_.push(R.node)}}else{const U=da(p,s,i);for(const R of U)_.push(R.node)}return _},[p,s,l,o,i]),{effectiveNodes:de,directNodes:me,bypassedTargets:Ae}=y.useMemo(()=>{if(!p)return{effectiveNodes:[],directNodes:[],bypassedTargets:[]};if(Object.keys(w).length===0)return{effectiveNodes:ie,directNodes:ie,bypassedTargets:[]};const _=new Map(p.nodes.map(ke=>[ke.id,ke])),U=ke=>!!(ke.stableKey&&w[ke.stableKey]),R=new Set,D=ke=>{if(R.has(ke))return[];R.add(ke);const ee=_.get(ke);if(!ee)return[];const se=[];return ee.outputs?.forEach((xe,Ue)=>{da(p,ke,Ue).forEach(Ve=>{const F=Ve.node;U(F)?se.push(...D(F.id)):se.push(F)})}),se},G=ke=>{if(R.has(ke))return[];R.add(ke);const ee=_.get(ke);if(!ee)return[];const se=[];return ee.inputs?.forEach((xe,Ue)=>{if(xe.link===null)return;const Le=rl(p,ke,Ue);Le&&(U(Le.node)?se.push(...G(Le.node.id)):se.push(Le.node))}),se},K=[],Oe=[];ie.forEach(ke=>{U(ke)?l==="input"?Oe.push(...G(ke.id)):Oe.push(...D(ke.id)):K.push(ke)});const Ne=new Set(K.map(ke=>ke.id));let J=(ke=>{const ee=[],se=new Set;return ke.forEach(xe=>{Ne.has(xe.id)||se.has(xe.id)||(se.add(xe.id),ee.push(xe))}),ee})(Oe);if(l==="input"&&J.length>1){const ke=new Set(Q0(o.type)),ee=J.filter(se=>se.outputs?.some(xe=>Q0(xe.type).some(Ue=>ke.has(Ue))));ee.length>0&&(J=ee)}return{effectiveNodes:[...K,...J],directNodes:K,bypassedTargets:J}},[ie,p,l,o.type,w]),Ee=de.length,Ie=Ee===1?de[0].id:null,B=Ee>0,le=l==="input"&&!B&&m,fe=y.useCallback(()=>{z.current!=null&&(window.clearTimeout(z.current),z.current=null)},[]),$e=y.useCallback(_=>_.stableKey??null,[]),Re=()=>{if($.current){$.current=!1;return}if(le){j(!0);return}if(B){if(Ee===1&&Ie!==null){const _=de[0],U=_?$e(_):null;U&&(b(U),g(U));return}C(_=>!_)}},T=y.useCallback(_=>{(l!=="input"||B)&&(I.current={x:_.clientX,y:_.clientY},$.current=!1,z.current=window.setTimeout(()=>{z.current=null,$.current=!0,j(!0)},500))},[l,B]),A=y.useCallback(_=>{if(!I.current)return;const U=_.clientX-I.current.x,R=_.clientY-I.current.y;Math.hypot(U,R)>8&&fe()},[fe]),O=y.useCallback(()=>{fe(),I.current=null},[fe]),te=_=>U=>{U.stopPropagation();const R=de.find(G=>G.id===_),D=R?$e(R):null;D&&(b(D),g(D)),C(!1)};y.useLayoutEffect(()=>{if(!k)return;const _=()=>{const U=E.current;if(!U)return;const R=U.getBoundingClientRect(),D=8;V({top:R.bottom+6,...l==="input"?{left:Math.min(R.left,window.innerWidth-D)}:{right:Math.max(D,window.innerWidth-R.right)}})};return L.current=_,_(),()=>{}},[k,Ee,l]),y.useEffect(()=>{if(!k)return;const _=()=>L.current?.(),U=D=>{!N.current||!D.target||E.current?.contains(D.target)||N.current.contains(D.target)||C(!1)},R=D=>{const G=D.target;N.current&&G&&N.current.contains(G)||C(!1)};return document.addEventListener("mousedown",U),document.addEventListener("scroll",R,!0),window.addEventListener("resize",_),()=>{document.removeEventListener("mousedown",U),document.removeEventListener("scroll",R,!0),window.removeEventListener("resize",_)}},[k]),y.useEffect(()=>()=>fe(),[fe]);const X=c?"w-7 h-7":"w-10 h-10",pe=c?"text-sm":"text-base";if(!p)return null;const Y=l==="input"&&B&&Ie!==null?Ie:null,ue=W.includes("/")||W.includes(`
`);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(bS,{direction:l,hasConnection:B,isEmptyRequiredInput:le,hideLabel:f,resolvedLabel:W,shouldWrapResolvedLabel:ue,sizeClass:X,arrowClass:pe,typeClass:xS(o.type),buttonRef:E,connectionCount:Ee,onClick:Re,onPointerDown:T,onPointerMove:A,onPointerUp:O}),k&&H&&Mn.createPortal(u.jsx("div",{ref:N,className:"fixed z-[1000]",style:{top:H.top,right:H.right,left:H.left,maxWidth:"calc(100vw - 16px)"},children:u.jsx(hr,{items:[...me.map(_=>{const R=x?.[_.type]?.display_name||_.type;return{key:`direct-${_.id}`,label:`${R} #${_.id}`,onClick:te(_.id)}}),{type:"custom",key:"bypassed-label",hidden:!(me.length>0&&Ae.length>0),render:u.jsx("div",{className:"px-3 py-1",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"h-px flex-1 bg-gray-200"}),u.jsx("span",{className:"text-[10px] text-gray-400",children:"(via bypassed)"}),u.jsx("div",{className:"h-px flex-1 bg-gray-200"})]})})},...Ae.map(_=>{const R=x?.[_.type]?.display_name||_.type;return{key:`bypassed-${_.id}`,label:`${R} #${_.id}`,onClick:te(_.id)}})]})}),document.body),S&&(l==="input"?u.jsx(Y0,{mode:"input",isOpen:S,onClose:()=>j(!1),nodeId:s,inputIndex:i,inputType:o.type,inputName:W,currentlyConnectedNodeId:Y}):u.jsx(Y0,{mode:"output",isOpen:S,onClose:()=>j(!1),nodeId:s,outputIndex:i,outputType:o.type,outputName:W}))]})});function vS({nodeId:n,nodeType:o,inputs:s,outputs:l,allInputs:i,allOutputs:c}){const f=ce(g=>g.connectionButtonsVisible),m=ce(g=>g.nodeTypes),p=y.useMemo(()=>{if(!o||!m)return new Set;const g=m[o];return g?.input?.required?new Set(Object.keys(g.input.required)):new Set},[o,m]);return!f||s.length===0&&l.length===0?null:u.jsxs("div",{className:"node-connections mb-3 grid grid-cols-2 gap-3",children:[u.jsx("div",{children:s.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Inputs"}),u.jsx("div",{className:"flex flex-col gap-1.5",children:s.map(g=>{const b=i.findIndex(x=>x.name===g.name);return u.jsx(X0,{slot:g,nodeId:n,direction:"input",slotIndex:b,isRequired:p.has(g.name)},`input-${g.name}`)})})]})}),u.jsx("div",{className:"flex flex-col items-end",children:l.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide text-right w-full",children:"Outputs"}),u.jsx("div",{className:"flex flex-col gap-1.5 w-full items-end",children:l.map(g=>{const b=c.findIndex(x=>x.name===g.name);return u.jsx(X0,{slot:g,nodeId:n,direction:"output",slotIndex:b},`output-${b}`)})})]})})]})}function wS({nodeId:n,nodeType:o,inputs:s,outputs:l,allInputs:i,allOutputs:c}){return u.jsx(vS,{nodeId:n,nodeType:o,inputs:s,outputs:l,allInputs:i,allOutputs:c})}function SS({title:n,onClose:o,headerActions:s,isDark:l}){return u.jsx("div",{className:"bg-white p-4 border-b border-gray-200 dark:border-gray-800 shadow-sm relative z-50 min-h-0 overflow-y-auto shrink-0",style:{maxHeight:"var(--top-bar-offset)",...l?{backgroundColor:Ct.surface.darkPanel}:{}},children:u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200 truncate pr-4 pt-1 flex-1",children:n}),u.jsxs("div",{className:"flex items-center gap-2",children:[s,u.jsx(ya,{onClick:o})]})]})})}function dp({isOpen:n,title:o,onClose:s,children:l,headerActions:i}){const f=sl(m=>m.theme)==="dark";return y.useEffect(()=>{if(n){const m=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=m}}},[n]),n?Mn.createPortal(u.jsx("div",{className:"fixed inset-0 z-[2100] bg-gray-400/40 dark:bg-black/50 backdrop-blur-sm safe-area-top",onClick:s,children:u.jsxs("div",{className:"w-full h-full flex flex-col",style:{paddingTop:"env(--top-bar-offset, 0px)",paddingBottom:"var(--bottom-bar-offset, 0px)"},onClick:m=>m.stopPropagation(),children:[u.jsx(SS,{title:o,onClose:s,headerActions:i,isDark:f}),u.jsx("div",{className:"mt-2 px-4 pb-4",children:l}),u.jsx("div",{className:"flex-1",onClick:s})]})}),document.body):null}function el({isPinned:n,onToggle:o}){if(!n||!o)return null;const s=l=>{l.preventDefault(),l.stopPropagation(),o()};return u.jsx("button",{type:"button",onClick:s,className:"flex items-center justify-center transition-colors text-fuchsia-500 hover:text-fuchsia-600","aria-label":"Remove pin",children:u.jsx(ma,{className:"w-5 h-5"})})}function bb(){return typeof window>"u"?!1:window.matchMedia("(pointer: coarse)").matches}function Z0({containerClass:n,name:o,value:s,options:l,onChange:i,disabled:c=!1,hideLabel:f=!1,hasPin:m,isPinned:p=!1,onTogglePin:g,hasError:b=!1,forceModalOpen:x=!1,onModalClose:w}){const k=me=>{if(!Array.isArray(l))return l?.[me]},C=k("multiline"),S=k("placeholder"),j=String(s??""),N=me=>{i(me.target.value)},[E,H]=y.useState(!1),V=x||E,z=sl(me=>me.theme)==="dark",I=bb(),$=x||I,W=y.useRef(null),ie=y.useRef(null);y.useLayoutEffect(()=>{if(!C)return;const me=W.current;me&&(me.style.height="0px",me.style.height=`${me.scrollHeight}px`)},[s,V,C]);const de=()=>{H(!1),w?.()};return $?u.jsxs("div",{className:n,children:[C?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between mb-1 min-h-[18px]",children:[f?u.jsx("span",{className:"block text-sm font-medium text-gray-700"}):u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:o}),u.jsx(ia,{value:j,onChange:i,textareaRef:W,className:"opacity-100"})]}),u.jsxs("div",{className:`relative w-full p-3 comfy-input min-h-[100px] text-base group cursor-text ${c?"opacity-60 cursor-not-allowed":""} ${m?"pr-10":""} ${b?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!c&&H(!0),children:[u.jsx("div",{className:"whitespace-pre-wrap break-words text-gray-900",style:z?{color:Ct.text.onDark}:void 0,children:j||u.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:S})}),m&&u.jsx("div",{className:"absolute right-2 top-2 pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto",children:u.jsx(el,{isPinned:p,onToggle:g})})})]})]}):u.jsxs(u.Fragment,{children:[!f&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o}),u.jsxs("div",{className:`relative w-full p-3 comfy-input text-base min-h-[46px] flex items-center cursor-text ${c?"opacity-60 cursor-not-allowed":""} ${m?"pr-16":"pr-6"} ${b?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!c&&H(!0),children:[u.jsx("div",{className:"truncate min-w-0 flex-1 text-gray-900",style:z?{color:Ct.text.onDark}:void 0,children:j||u.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:S})}),m&&u.jsx("div",{className:"absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto px-3",children:u.jsx(el,{isPinned:p,onToggle:g})})})]})]}),u.jsx(dp,{title:o,isOpen:V,onClose:de,headerActions:C?u.jsx(ia,{value:j,onChange:i,textareaRef:W,className:"mr-2"}):null,children:C?u.jsx("textarea",{ref:W,value:j,onChange:me=>i(me.target.value),placeholder:S,className:"w-full p-3 border border-gray-300 rounded-lg min-h-[150px] text-base resize-none outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",autoFocus:!x,disabled:c}):u.jsx("input",{ref:ie,type:"text",value:j,onChange:me=>i(me.target.value),placeholder:S,className:"w-full p-3 border border-gray-300 rounded-lg text-base outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",autoFocus:!x,disabled:c})})]}):C?u.jsxs("div",{className:`${n} group`,"data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1 min-h-[18px]","data-textarea-header":"true",children:[f?u.jsx("span",{className:"block text-sm font-medium text-gray-700"}):u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:o}),u.jsx(ia,{value:j,onChange:i,textareaRef:W,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("textarea",{ref:W,value:j,onChange:N,placeholder:S,className:`w-full p-3 comfy-input min-h-[100px] text-base resize-none overflow-hidden ${c?"opacity-60 cursor-not-allowed":""} ${m?"pr-10":""} ${b?"border-red-700 ring-1 ring-red-700":""}`,style:{overflowAnchor:"none"},disabled:c}),m&&u.jsx("div",{className:"absolute right-2 top-2",children:u.jsx(el,{isPinned:p,onToggle:g})})]})]}):u.jsxs("div",{className:n,children:[!f&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:String(s??""),onChange:me=>i(me.target.value),placeholder:S,className:`w-full p-3 comfy-input text-base ${c?"opacity-60 cursor-not-allowed":""} ${m?"pr-16":""} ${b?"border-red-700 ring-1 ring-red-700":""}`,disabled:c}),m&&u.jsx("div",{className:"absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto px-3",children:u.jsx(el,{isPinned:p,onToggle:g})})})]})]})}function Af({containerClass:n,name:o,value:s,options:l,onChange:i,disabled:c,type:f,min:m,max:p,step:g,isInt:b,hasError:x=!1}){const[w,k]=y.useState(String(s||0)),C=b??(f?f.toUpperCase()==="INT":Number.isInteger(s)),S=g??l?.step??(C?1:.1),j=m??(l?.min!==void 0?l.min:-1/0),N=p??(l?.max!==void 0?l.max:1/0);y.useEffect(()=>{k(String(s))},[s]);const E=I=>{k(I.target.value)},H=()=>{let I=C?parseInt(w,10):parseFloat(w);isNaN(I)&&(I=s),I=Math.max(j,Math.min(N,I)),i(I),k(String(I))},V=I=>{const $=(C?parseInt(w,10):parseFloat(w))||0,W=Math.max(j,Math.min(N,$+I));i(W)},L=[`number-input-field-${o}`,"w-full p-3 comfy-input text-base text-gray-900",c?"opacity-60 cursor-not-allowed":"",x?"border-red-700 ring-1 ring-red-700":""].filter(Boolean).join(" "),z=["w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 text-gray-700 flex-shrink-0",c?"opacity-60 cursor-not-allowed":"active:scale-95 transition-all"].filter(Boolean).join(" ");return u.jsxs("div",{className:`${n??""} number-control-${o}`,children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o}),u.jsxs("div",{className:`number-stepper-container-${o} flex items-center gap-2`,children:[u.jsx("input",{className:L,type:"number",value:w,onChange:E,onBlur:H,disabled:c,"aria-label":f?`${o} ${f}`:o}),u.jsx("button",{type:"button",onClick:()=>V(-S),className:z,"aria-label":"Decrease value",disabled:c,children:u.jsx(l2,{className:"w-4 h-4"})}),u.jsx("button",{type:"button",onClick:()=>V(S),className:z,"aria-label":"Increase value",disabled:c,children:u.jsx(Gr,{className:"w-4 h-4"})})]})]})}function ms(n){"@babel/helpers - typeof";return ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ms(n)}function NS(n,o){if(ms(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var l=s.call(n,o);if(ms(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(n)}function xb(n){var o=NS(n,"string");return ms(o)=="symbol"?o:o+""}function la(n,o,s){return(o=xb(o))in n?Object.defineProperty(n,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[o]=s,n}function J0(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);o&&(l=l.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),s.push.apply(s,l)}return s}function bt(n){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?arguments[o]:{};o%2?J0(Object(s),!0).forEach(function(l){la(n,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):J0(Object(s)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(s,l))})}return n}function CS(n){if(Array.isArray(n))return n}function kS(n,o){var s=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(s!=null){var l,i,c,f,m=[],p=!0,g=!1;try{if(c=(s=s.call(n)).next,o===0){if(Object(s)!==s)return;p=!1}else for(;!(p=(l=c.call(s)).done)&&(m.push(l.value),m.length!==o);p=!0);}catch(b){g=!0,i=b}finally{try{if(!p&&s.return!=null&&(f=s.return(),Object(f)!==f))return}finally{if(g)throw i}}return m}}function Rf(n,o){(o==null||o>n.length)&&(o=n.length);for(var s=0,l=Array(o);s<o;s++)l[s]=n[s];return l}function vb(n,o){if(n){if(typeof n=="string")return Rf(n,o);var s={}.toString.call(n).slice(8,-1);return s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set"?Array.from(n):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Rf(n,o):void 0}}function jS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pr(n,o){return CS(n)||kS(n,o)||vb(n,o)||jS()}function MS(n,o){if(n==null)return{};var s={};for(var l in n)if({}.hasOwnProperty.call(n,l)){if(o.indexOf(l)!==-1)continue;s[l]=n[l]}return s}function br(n,o){if(n==null)return{};var s,l,i=MS(n,o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(l=0;l<c.length;l++)s=c[l],o.indexOf(s)===-1&&{}.propertyIsEnumerable.call(n,s)&&(i[s]=n[s])}return i}var OS=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function TS(n){var o=n.defaultInputValue,s=o===void 0?"":o,l=n.defaultMenuIsOpen,i=l===void 0?!1:l,c=n.defaultValue,f=c===void 0?null:c,m=n.inputValue,p=n.menuIsOpen,g=n.onChange,b=n.onInputChange,x=n.onMenuClose,w=n.onMenuOpen,k=n.value,C=br(n,OS),S=y.useState(m!==void 0?m:s),j=pr(S,2),N=j[0],E=j[1],H=y.useState(p!==void 0?p:i),V=pr(H,2),L=V[0],z=V[1],I=y.useState(k!==void 0?k:f),$=pr(I,2),W=$[0],ie=$[1],de=y.useCallback(function(fe,$e){typeof g=="function"&&g(fe,$e),ie(fe)},[g]),me=y.useCallback(function(fe,$e){var Re;typeof b=="function"&&(Re=b(fe,$e)),E(Re!==void 0?Re:fe)},[b]),Ae=y.useCallback(function(){typeof w=="function"&&w(),z(!0)},[w]),Ee=y.useCallback(function(){typeof x=="function"&&x(),z(!1)},[x]),Ie=m!==void 0?m:N,B=p!==void 0?p:L,le=k!==void 0?k:W;return bt(bt({},C),{},{inputValue:Ie,menuIsOpen:B,onChange:de,onInputChange:me,onMenuClose:Ee,onMenuOpen:Ae,value:le})}function vt(){return vt=Object.assign?Object.assign.bind():function(n){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var l in s)({}).hasOwnProperty.call(s,l)&&(n[l]=s[l])}return n},vt.apply(null,arguments)}function ES(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function ey(n,o){for(var s=0;s<o.length;s++){var l=o[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,xb(l.key),l)}}function IS(n,o,s){return o&&ey(n.prototype,o),s&&ey(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n}function _f(n,o){return _f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,l){return s.__proto__=l,s},_f(n,o)}function LS(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),o&&_f(n,o)}function vu(n){return vu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},vu(n)}function wb(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wb=function(){return!!n})()}function AS(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function RS(n,o){if(o&&(ms(o)=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AS(n)}function _S(n){var o=wb();return function(){var s,l=vu(n);if(o){var i=vu(this).constructor;s=Reflect.construct(l,arguments,i)}else s=l.apply(this,arguments);return RS(this,s)}}function DS(n){if(Array.isArray(n))return Rf(n)}function BS(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function zS(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fp(n){return DS(n)||BS(n)||vb(n)||zS()}function HS(n){if(n.sheet)return n.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===n)return document.styleSheets[o]}function VS(n){var o=document.createElement("style");return o.setAttribute("data-emotion",n.key),n.nonce!==void 0&&o.setAttribute("nonce",n.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}var KS=(function(){function n(s){var l=this;this._insertTag=function(i){var c;l.tags.length===0?l.insertionPoint?c=l.insertionPoint.nextSibling:l.prepend?c=l.container.firstChild:c=l.before:c=l.tags[l.tags.length-1].nextSibling,l.container.insertBefore(i,c),l.tags.push(i)},this.isSpeedy=s.speedy===void 0?!0:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var o=n.prototype;return o.hydrate=function(l){l.forEach(this._insertTag)},o.insert=function(l){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(VS(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var c=HS(i);try{c.insertRule(l,c.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(l));this.ctr++},o.flush=function(){this.tags.forEach(function(l){var i;return(i=l.parentNode)==null?void 0:i.removeChild(l)}),this.tags=[],this.ctr=0},n})(),Vn="-ms-",wu="-moz-",Ft="-webkit-",Sb="comm",pp="rule",hp="decl",US="@import",Nb="@keyframes",$S="@layer",FS=Math.abs,Au=String.fromCharCode,qS=Object.assign;function WS(n,o){return Dn(n,0)^45?(((o<<2^Dn(n,0))<<2^Dn(n,1))<<2^Dn(n,2))<<2^Dn(n,3):0}function Cb(n){return n.trim()}function GS(n,o){return(n=o.exec(n))?n[0]:n}function qt(n,o,s){return n.replace(o,s)}function Df(n,o){return n.indexOf(o)}function Dn(n,o){return n.charCodeAt(o)|0}function ba(n,o,s){return n.slice(o,s)}function Ko(n){return n.length}function mp(n){return n.length}function Ji(n,o){return o.push(n),n}function PS(n,o){return n.map(o).join("")}var Ru=1,ll=1,kb=0,to=0,jn=0,ul="";function _u(n,o,s,l,i,c,f){return{value:n,root:o,parent:s,type:l,props:i,children:c,line:Ru,column:ll,length:f,return:""}}function oa(n,o){return qS(_u("",null,null,"",null,null,0),n,{length:-n.length},o)}function YS(){return jn}function QS(){return jn=to>0?Dn(ul,--to):0,ll--,jn===10&&(ll=1,Ru--),jn}function go(){return jn=to<kb?Dn(ul,to++):0,ll++,jn===10&&(ll=1,Ru++),jn}function Wo(){return Dn(ul,to)}function iu(){return to}function Ma(n,o){return ba(ul,n,o)}function xa(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function jb(n){return Ru=ll=1,kb=Ko(ul=n),to=0,[]}function Mb(n){return ul="",n}function uu(n){return Cb(Ma(to-1,Bf(n===91?n+2:n===40?n+1:n)))}function XS(n){for(;(jn=Wo())&&jn<33;)go();return xa(n)>2||xa(jn)>3?"":" "}function ZS(n,o){for(;--o&&go()&&!(jn<48||jn>102||jn>57&&jn<65||jn>70&&jn<97););return Ma(n,iu()+(o<6&&Wo()==32&&go()==32))}function Bf(n){for(;go();)switch(jn){case n:return to;case 34:case 39:n!==34&&n!==39&&Bf(jn);break;case 40:n===41&&Bf(n);break;case 92:go();break}return to}function JS(n,o){for(;go()&&n+jn!==57;)if(n+jn===84&&Wo()===47)break;return"/*"+Ma(o,to-1)+"*"+Au(n===47?n:go())}function e3(n){for(;!xa(Wo());)go();return Ma(n,to)}function t3(n){return Mb(cu("",null,null,null,[""],n=jb(n),0,[0],n))}function cu(n,o,s,l,i,c,f,m,p){for(var g=0,b=0,x=f,w=0,k=0,C=0,S=1,j=1,N=1,E=0,H="",V=i,L=c,z=l,I=H;j;)switch(C=E,E=go()){case 40:if(C!=108&&Dn(I,x-1)==58){Df(I+=qt(uu(E),"&","&\f"),"&\f")!=-1&&(N=-1);break}case 34:case 39:case 91:I+=uu(E);break;case 9:case 10:case 13:case 32:I+=XS(C);break;case 92:I+=ZS(iu()-1,7);continue;case 47:switch(Wo()){case 42:case 47:Ji(n3(JS(go(),iu()),o,s),p);break;default:I+="/"}break;case 123*S:m[g++]=Ko(I)*N;case 125*S:case 59:case 0:switch(E){case 0:case 125:j=0;case 59+b:N==-1&&(I=qt(I,/\f/g,"")),k>0&&Ko(I)-x&&Ji(k>32?ny(I+";",l,s,x-1):ny(qt(I," ","")+";",l,s,x-2),p);break;case 59:I+=";";default:if(Ji(z=ty(I,o,s,g,b,i,m,H,V=[],L=[],x),c),E===123)if(b===0)cu(I,o,z,z,V,c,x,m,L);else switch(w===99&&Dn(I,3)===110?100:w){case 100:case 108:case 109:case 115:cu(n,z,z,l&&Ji(ty(n,z,z,0,0,i,m,H,i,V=[],x),L),i,L,x,m,l?V:L);break;default:cu(I,z,z,z,[""],L,0,m,L)}}g=b=k=0,S=N=1,H=I="",x=f;break;case 58:x=1+Ko(I),k=C;default:if(S<1){if(E==123)--S;else if(E==125&&S++==0&&QS()==125)continue}switch(I+=Au(E),E*S){case 38:N=b>0?1:(I+="\f",-1);break;case 44:m[g++]=(Ko(I)-1)*N,N=1;break;case 64:Wo()===45&&(I+=uu(go())),w=Wo(),b=x=Ko(H=I+=e3(iu())),E++;break;case 45:C===45&&Ko(I)==2&&(S=0)}}return c}function ty(n,o,s,l,i,c,f,m,p,g,b){for(var x=i-1,w=i===0?c:[""],k=mp(w),C=0,S=0,j=0;C<l;++C)for(var N=0,E=ba(n,x+1,x=FS(S=f[C])),H=n;N<k;++N)(H=Cb(S>0?w[N]+" "+E:qt(E,/&\f/g,w[N])))&&(p[j++]=H);return _u(n,o,s,i===0?pp:m,p,g,b)}function n3(n,o,s){return _u(n,o,s,Sb,Au(YS()),ba(n,2,-2),0)}function ny(n,o,s,l){return _u(n,o,s,hp,ba(n,0,l),ba(n,l+1,-1),l)}function ol(n,o){for(var s="",l=mp(n),i=0;i<l;i++)s+=o(n[i],i,n,o)||"";return s}function o3(n,o,s,l){switch(n.type){case $S:if(n.children.length)break;case US:case hp:return n.return=n.return||n.value;case Sb:return"";case Nb:return n.return=n.value+"{"+ol(n.children,l)+"}";case pp:n.value=n.props.join(",")}return Ko(s=ol(n.children,l))?n.return=n.value+"{"+s+"}":""}function r3(n){var o=mp(n);return function(s,l,i,c){for(var f="",m=0;m<o;m++)f+=n[m](s,l,i,c)||"";return f}}function s3(n){return function(o){o.root||(o=o.return)&&n(o)}}function l3(n){var o=Object.create(null);return function(s){return o[s]===void 0&&(o[s]=n(s)),o[s]}}var a3=function(o,s,l){for(var i=0,c=0;i=c,c=Wo(),i===38&&c===12&&(s[l]=1),!xa(c);)go();return Ma(o,to)},i3=function(o,s){var l=-1,i=44;do switch(xa(i)){case 0:i===38&&Wo()===12&&(s[l]=1),o[l]+=a3(to-1,s,l);break;case 2:o[l]+=uu(i);break;case 4:if(i===44){o[++l]=Wo()===58?"&\f":"",s[l]=o[l].length;break}default:o[l]+=Au(i)}while(i=go());return o},u3=function(o,s){return Mb(i3(jb(o),s))},oy=new WeakMap,c3=function(o){if(!(o.type!=="rule"||!o.parent||o.length<1)){for(var s=o.value,l=o.parent,i=o.column===l.column&&o.line===l.line;l.type!=="rule";)if(l=l.parent,!l)return;if(!(o.props.length===1&&s.charCodeAt(0)!==58&&!oy.get(l))&&!i){oy.set(o,!0);for(var c=[],f=u3(s,c),m=l.props,p=0,g=0;p<f.length;p++)for(var b=0;b<m.length;b++,g++)o.props[g]=c[p]?f[p].replace(/&\f/g,m[b]):m[b]+" "+f[p]}}},d3=function(o){if(o.type==="decl"){var s=o.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(o.return="",o.value="")}};function Ob(n,o){switch(WS(n,o)){case 5103:return Ft+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ft+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Ft+n+wu+n+Vn+n+n;case 6828:case 4268:return Ft+n+Vn+n+n;case 6165:return Ft+n+Vn+"flex-"+n+n;case 5187:return Ft+n+qt(n,/(\w+).+(:[^]+)/,Ft+"box-$1$2"+Vn+"flex-$1$2")+n;case 5443:return Ft+n+Vn+"flex-item-"+qt(n,/flex-|-self/,"")+n;case 4675:return Ft+n+Vn+"flex-line-pack"+qt(n,/align-content|flex-|-self/,"")+n;case 5548:return Ft+n+Vn+qt(n,"shrink","negative")+n;case 5292:return Ft+n+Vn+qt(n,"basis","preferred-size")+n;case 6060:return Ft+"box-"+qt(n,"-grow","")+Ft+n+Vn+qt(n,"grow","positive")+n;case 4554:return Ft+qt(n,/([^-])(transform)/g,"$1"+Ft+"$2")+n;case 6187:return qt(qt(qt(n,/(zoom-|grab)/,Ft+"$1"),/(image-set)/,Ft+"$1"),n,"")+n;case 5495:case 3959:return qt(n,/(image-set\([^]*)/,Ft+"$1$`$1");case 4968:return qt(qt(n,/(.+:)(flex-)?(.*)/,Ft+"box-pack:$3"+Vn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ft+n+n;case 4095:case 3583:case 4068:case 2532:return qt(n,/(.+)-inline(.+)/,Ft+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ko(n)-1-o>6)switch(Dn(n,o+1)){case 109:if(Dn(n,o+4)!==45)break;case 102:return qt(n,/(.+:)(.+)-([^]+)/,"$1"+Ft+"$2-$3$1"+wu+(Dn(n,o+3)==108?"$3":"$2-$3"))+n;case 115:return~Df(n,"stretch")?Ob(qt(n,"stretch","fill-available"),o)+n:n}break;case 4949:if(Dn(n,o+1)!==115)break;case 6444:switch(Dn(n,Ko(n)-3-(~Df(n,"!important")&&10))){case 107:return qt(n,":",":"+Ft)+n;case 101:return qt(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ft+(Dn(n,14)===45?"inline-":"")+"box$3$1"+Ft+"$2$3$1"+Vn+"$2box$3")+n}break;case 5936:switch(Dn(n,o+11)){case 114:return Ft+n+Vn+qt(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Ft+n+Vn+qt(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Ft+n+Vn+qt(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Ft+n+Vn+n+n}return n}var f3=function(o,s,l,i){if(o.length>-1&&!o.return)switch(o.type){case hp:o.return=Ob(o.value,o.length);break;case Nb:return ol([oa(o,{value:qt(o.value,"@","@"+Ft)})],i);case pp:if(o.length)return PS(o.props,function(c){switch(GS(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ol([oa(o,{props:[qt(c,/:(read-\w+)/,":"+wu+"$1")]})],i);case"::placeholder":return ol([oa(o,{props:[qt(c,/:(plac\w+)/,":"+Ft+"input-$1")]}),oa(o,{props:[qt(c,/:(plac\w+)/,":"+wu+"$1")]}),oa(o,{props:[qt(c,/:(plac\w+)/,Vn+"input-$1")]})],i)}return""})}},p3=[f3],h3=function(o){var s=o.key;if(s==="css"){var l=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(l,function(S){var j=S.getAttribute("data-emotion");j.indexOf(" ")!==-1&&(document.head.appendChild(S),S.setAttribute("data-s",""))})}var i=o.stylisPlugins||p3,c={},f,m=[];f=o.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(S){for(var j=S.getAttribute("data-emotion").split(" "),N=1;N<j.length;N++)c[j[N]]=!0;m.push(S)});var p,g=[c3,d3];{var b,x=[o3,s3(function(S){b.insert(S)})],w=r3(g.concat(i,x)),k=function(j){return ol(t3(j),w)};p=function(j,N,E,H){b=E,k(j?j+"{"+N.styles+"}":N.styles),H&&(C.inserted[N.name]=!0)}}var C={key:s,sheet:new KS({key:s,container:f,nonce:o.nonce,speedy:o.speedy,prepend:o.prepend,insertionPoint:o.insertionPoint}),nonce:o.nonce,inserted:c,registered:{},insert:p};return C.sheet.hydrate(m),C},of={exports:{}},Pt={};var ry;function m3(){if(ry)return Pt;ry=1;var n=typeof Symbol=="function"&&Symbol.for,o=n?Symbol.for("react.element"):60103,s=n?Symbol.for("react.portal"):60106,l=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,c=n?Symbol.for("react.profiler"):60114,f=n?Symbol.for("react.provider"):60109,m=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.async_mode"):60111,g=n?Symbol.for("react.concurrent_mode"):60111,b=n?Symbol.for("react.forward_ref"):60112,x=n?Symbol.for("react.suspense"):60113,w=n?Symbol.for("react.suspense_list"):60120,k=n?Symbol.for("react.memo"):60115,C=n?Symbol.for("react.lazy"):60116,S=n?Symbol.for("react.block"):60121,j=n?Symbol.for("react.fundamental"):60117,N=n?Symbol.for("react.responder"):60118,E=n?Symbol.for("react.scope"):60119;function H(L){if(typeof L=="object"&&L!==null){var z=L.$$typeof;switch(z){case o:switch(L=L.type,L){case p:case g:case l:case c:case i:case x:return L;default:switch(L=L&&L.$$typeof,L){case m:case b:case C:case k:case f:return L;default:return z}}case s:return z}}}function V(L){return H(L)===g}return Pt.AsyncMode=p,Pt.ConcurrentMode=g,Pt.ContextConsumer=m,Pt.ContextProvider=f,Pt.Element=o,Pt.ForwardRef=b,Pt.Fragment=l,Pt.Lazy=C,Pt.Memo=k,Pt.Portal=s,Pt.Profiler=c,Pt.StrictMode=i,Pt.Suspense=x,Pt.isAsyncMode=function(L){return V(L)||H(L)===p},Pt.isConcurrentMode=V,Pt.isContextConsumer=function(L){return H(L)===m},Pt.isContextProvider=function(L){return H(L)===f},Pt.isElement=function(L){return typeof L=="object"&&L!==null&&L.$$typeof===o},Pt.isForwardRef=function(L){return H(L)===b},Pt.isFragment=function(L){return H(L)===l},Pt.isLazy=function(L){return H(L)===C},Pt.isMemo=function(L){return H(L)===k},Pt.isPortal=function(L){return H(L)===s},Pt.isProfiler=function(L){return H(L)===c},Pt.isStrictMode=function(L){return H(L)===i},Pt.isSuspense=function(L){return H(L)===x},Pt.isValidElementType=function(L){return typeof L=="string"||typeof L=="function"||L===l||L===g||L===c||L===i||L===x||L===w||typeof L=="object"&&L!==null&&(L.$$typeof===C||L.$$typeof===k||L.$$typeof===f||L.$$typeof===m||L.$$typeof===b||L.$$typeof===j||L.$$typeof===N||L.$$typeof===E||L.$$typeof===S)},Pt.typeOf=H,Pt}var sy;function g3(){return sy||(sy=1,of.exports=m3()),of.exports}var rf,ly;function y3(){if(ly)return rf;ly=1;var n=g3(),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},l={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};c[n.ForwardRef]=l,c[n.Memo]=i;function f(C){return n.isMemo(C)?i:c[C.$$typeof]||o}var m=Object.defineProperty,p=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,b=Object.getOwnPropertyDescriptor,x=Object.getPrototypeOf,w=Object.prototype;function k(C,S,j){if(typeof S!="string"){if(w){var N=x(S);N&&N!==w&&k(C,N,j)}var E=p(S);g&&(E=E.concat(g(S)));for(var H=f(C),V=f(S),L=0;L<E.length;++L){var z=E[L];if(!s[z]&&!(j&&j[z])&&!(V&&V[z])&&!(H&&H[z])){var I=b(S,z);try{m(C,z,I)}catch{}}}}return C}return rf=k,rf}y3();var b3=!0;function x3(n,o,s){var l="";return s.split(" ").forEach(function(i){n[i]!==void 0?o.push(n[i]+";"):i&&(l+=i+" ")}),l}var Tb=function(o,s,l){var i=o.key+"-"+s.name;(l===!1||b3===!1)&&o.registered[i]===void 0&&(o.registered[i]=s.styles)},v3=function(o,s,l){Tb(o,s,l);var i=o.key+"-"+s.name;if(o.inserted[s.name]===void 0){var c=s;do o.insert(s===c?"."+i:"",c,o.sheet,!0),c=c.next;while(c!==void 0)}};function w3(n){for(var o=0,s,l=0,i=n.length;i>=4;++l,i-=4)s=n.charCodeAt(l)&255|(n.charCodeAt(++l)&255)<<8|(n.charCodeAt(++l)&255)<<16|(n.charCodeAt(++l)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,o=(s&65535)*1540483477+((s>>>16)*59797<<16)^(o&65535)*1540483477+((o>>>16)*59797<<16);switch(i){case 3:o^=(n.charCodeAt(l+2)&255)<<16;case 2:o^=(n.charCodeAt(l+1)&255)<<8;case 1:o^=n.charCodeAt(l)&255,o=(o&65535)*1540483477+((o>>>16)*59797<<16)}return o^=o>>>13,o=(o&65535)*1540483477+((o>>>16)*59797<<16),((o^o>>>15)>>>0).toString(36)}var S3={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},N3=/[A-Z]|^ms/g,C3=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Eb=function(o){return o.charCodeAt(1)===45},ay=function(o){return o!=null&&typeof o!="boolean"},sf=l3(function(n){return Eb(n)?n:n.replace(N3,"-$&").toLowerCase()}),iy=function(o,s){switch(o){case"animation":case"animationName":if(typeof s=="string")return s.replace(C3,function(l,i,c){return Uo={name:i,styles:c,next:Uo},i})}return S3[o]!==1&&!Eb(o)&&typeof s=="number"&&s!==0?s+"px":s};function va(n,o,s){if(s==null)return"";var l=s;if(l.__emotion_styles!==void 0)return l;switch(typeof s){case"boolean":return"";case"object":{var i=s;if(i.anim===1)return Uo={name:i.name,styles:i.styles,next:Uo},i.name;var c=s;if(c.styles!==void 0){var f=c.next;if(f!==void 0)for(;f!==void 0;)Uo={name:f.name,styles:f.styles,next:Uo},f=f.next;var m=c.styles+";";return m}return k3(n,o,s)}case"function":{if(n!==void 0){var p=Uo,g=s(n);return Uo=p,va(n,o,g)}break}}var b=s;return b}function k3(n,o,s){var l="";if(Array.isArray(s))for(var i=0;i<s.length;i++)l+=va(n,o,s[i])+";";else for(var c in s){var f=s[c];if(typeof f!="object"){var m=f;ay(m)&&(l+=sf(c)+":"+iy(c,m)+";")}else if(Array.isArray(f)&&typeof f[0]=="string"&&o==null)for(var p=0;p<f.length;p++)ay(f[p])&&(l+=sf(c)+":"+iy(c,f[p])+";");else{var g=va(n,o,f);switch(c){case"animation":case"animationName":{l+=sf(c)+":"+g+";";break}default:l+=c+"{"+g+"}"}}}return l}var uy=/label:\s*([^\s;{]+)\s*(;|$)/g,Uo;function Ib(n,o,s){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var l=!0,i="";Uo=void 0;var c=n[0];if(c==null||c.raw===void 0)l=!1,i+=va(s,o,c);else{var f=c;i+=f[0]}for(var m=1;m<n.length;m++)if(i+=va(s,o,n[m]),l){var p=c;i+=p[m]}uy.lastIndex=0;for(var g="",b;(b=uy.exec(i))!==null;)g+="-"+b[1];var x=w3(i)+g;return{name:x,styles:i,next:Uo}}var j3=function(o){return o()},M3=i0.useInsertionEffect?i0.useInsertionEffect:!1,O3=M3||j3,Lb=y.createContext(typeof HTMLElement<"u"?h3({key:"css"}):null);Lb.Provider;var T3=function(o){return y.forwardRef(function(s,l){var i=y.useContext(Lb);return o(s,i,l)})},E3=y.createContext({}),gp={}.hasOwnProperty,zf="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",I3=function(o,s){var l={};for(var i in s)gp.call(s,i)&&(l[i]=s[i]);return l[zf]=o,l},L3=function(o){var s=o.cache,l=o.serialized,i=o.isStringTag;return Tb(s,l,i),O3(function(){return v3(s,l,i)}),null},A3=T3(function(n,o,s){var l=n.css;typeof l=="string"&&o.registered[l]!==void 0&&(l=o.registered[l]);var i=n[zf],c=[l],f="";typeof n.className=="string"?f=x3(o.registered,c,n.className):n.className!=null&&(f=n.className+" ");var m=Ib(c,void 0,y.useContext(E3));f+=o.key+"-"+m.name;var p={};for(var g in n)gp.call(n,g)&&g!=="css"&&g!==zf&&(p[g]=n[g]);return p.className=f,s&&(p.ref=s),y.createElement(y.Fragment,null,y.createElement(L3,{cache:o,serialized:m,isStringTag:typeof i=="string"}),y.createElement(i,p))}),R3=A3,mt=function(o,s){var l=arguments;if(s==null||!gp.call(s,"css"))return y.createElement.apply(void 0,l);var i=l.length,c=new Array(i);c[0]=R3,c[1]=I3(o,s);for(var f=2;f<i;f++)c[f]=l[f];return y.createElement.apply(null,c)};(function(n){var o;o||(o=n.JSX||(n.JSX={}))})(mt||(mt={}));function yp(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return Ib(o)}function _3(){var n=yp.apply(void 0,arguments),o="animation-"+n.name;return{name:o,styles:"@keyframes "+o+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function D3(n,o){return o||(o=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(o)}}))}const B3=Math.min,z3=Math.max,Su=Math.round,eu=Math.floor,Nu=n=>({x:n,y:n});function H3(n){const{x:o,y:s,width:l,height:i}=n;return{width:l,height:i,top:s,left:o,right:o+l,bottom:s+i,x:o,y:s}}function Du(){return typeof window<"u"}function Ab(n){return _b(n)?(n.nodeName||"").toLowerCase():"#document"}function mr(n){var o;return(n==null||(o=n.ownerDocument)==null?void 0:o.defaultView)||window}function Rb(n){var o;return(o=(_b(n)?n.ownerDocument:n.document)||window.document)==null?void 0:o.documentElement}function _b(n){return Du()?n instanceof Node||n instanceof mr(n).Node:!1}function V3(n){return Du()?n instanceof Element||n instanceof mr(n).Element:!1}function bp(n){return Du()?n instanceof HTMLElement||n instanceof mr(n).HTMLElement:!1}function cy(n){return!Du()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof mr(n).ShadowRoot}const K3=new Set(["inline","contents"]);function Db(n){const{overflow:o,overflowX:s,overflowY:l,display:i}=xp(n);return/auto|scroll|overlay|hidden|clip/.test(o+l+s)&&!K3.has(i)}function U3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const $3=new Set(["html","body","#document"]);function F3(n){return $3.has(Ab(n))}function xp(n){return mr(n).getComputedStyle(n)}function q3(n){if(Ab(n)==="html")return n;const o=n.assignedSlot||n.parentNode||cy(n)&&n.host||Rb(n);return cy(o)?o.host:o}function Bb(n){const o=q3(n);return F3(o)?n.ownerDocument?n.ownerDocument.body:n.body:bp(o)&&Db(o)?o:Bb(o)}function Cu(n,o,s){var l;o===void 0&&(o=[]),s===void 0&&(s=!0);const i=Bb(n),c=i===((l=n.ownerDocument)==null?void 0:l.body),f=mr(i);if(c){const m=Hf(f);return o.concat(f,f.visualViewport||[],Db(i)?i:[],m&&s?Cu(m):[])}return o.concat(i,Cu(i,[],s))}function Hf(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function W3(n){const o=xp(n);let s=parseFloat(o.width)||0,l=parseFloat(o.height)||0;const i=bp(n),c=i?n.offsetWidth:s,f=i?n.offsetHeight:l,m=Su(s)!==c||Su(l)!==f;return m&&(s=c,l=f),{width:s,height:l,$:m}}function vp(n){return V3(n)?n:n.contextElement}function dy(n){const o=vp(n);if(!bp(o))return Nu(1);const s=o.getBoundingClientRect(),{width:l,height:i,$:c}=W3(o);let f=(c?Su(s.width):s.width)/l,m=(c?Su(s.height):s.height)/i;return(!f||!Number.isFinite(f))&&(f=1),(!m||!Number.isFinite(m))&&(m=1),{x:f,y:m}}const G3=Nu(0);function P3(n){const o=mr(n);return!U3()||!o.visualViewport?G3:{x:o.visualViewport.offsetLeft,y:o.visualViewport.offsetTop}}function Y3(n,o,s){return!1}function fy(n,o,s,l){o===void 0&&(o=!1);const i=n.getBoundingClientRect(),c=vp(n);let f=Nu(1);o&&(f=dy(n));const m=Y3()?P3(c):Nu(0);let p=(i.left+m.x)/f.x,g=(i.top+m.y)/f.y,b=i.width/f.x,x=i.height/f.y;if(c){const w=mr(c),k=l;let C=w,S=Hf(C);for(;S&&l&&k!==C;){const j=dy(S),N=S.getBoundingClientRect(),E=xp(S),H=N.left+(S.clientLeft+parseFloat(E.paddingLeft))*j.x,V=N.top+(S.clientTop+parseFloat(E.paddingTop))*j.y;p*=j.x,g*=j.y,b*=j.x,x*=j.y,p+=H,g+=V,C=mr(S),S=Hf(C)}}return H3({width:b,height:x,x:p,y:g})}function zb(n,o){return n.x===o.x&&n.y===o.y&&n.width===o.width&&n.height===o.height}function Q3(n,o){let s=null,l;const i=Rb(n);function c(){var m;clearTimeout(l),(m=s)==null||m.disconnect(),s=null}function f(m,p){m===void 0&&(m=!1),p===void 0&&(p=1),c();const g=n.getBoundingClientRect(),{left:b,top:x,width:w,height:k}=g;if(m||o(),!w||!k)return;const C=eu(x),S=eu(i.clientWidth-(b+w)),j=eu(i.clientHeight-(x+k)),N=eu(b),H={rootMargin:-C+"px "+-S+"px "+-j+"px "+-N+"px",threshold:z3(0,B3(1,p))||1};let V=!0;function L(z){const I=z[0].intersectionRatio;if(I!==p){if(!V)return f();I?f(!1,I):l=setTimeout(()=>{f(!1,1e-7)},1e3)}I===1&&!zb(g,n.getBoundingClientRect())&&f(),V=!1}try{s=new IntersectionObserver(L,{...H,root:i.ownerDocument})}catch{s=new IntersectionObserver(L,H)}s.observe(n)}return f(!0),c}function X3(n,o,s,l){l===void 0&&(l={});const{ancestorScroll:i=!0,ancestorResize:c=!0,elementResize:f=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:p=!1}=l,g=vp(n),b=i||c?[...g?Cu(g):[],...Cu(o)]:[];b.forEach(N=>{i&&N.addEventListener("scroll",s,{passive:!0}),c&&N.addEventListener("resize",s)});const x=g&&m?Q3(g,s):null;let w=-1,k=null;f&&(k=new ResizeObserver(N=>{let[E]=N;E&&E.target===g&&k&&(k.unobserve(o),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var H;(H=k)==null||H.observe(o)})),s()}),g&&!p&&k.observe(g),k.observe(o));let C,S=p?fy(n):null;p&&j();function j(){const N=fy(n);S&&!zb(S,N)&&s(),S=N,C=requestAnimationFrame(j)}return s(),()=>{var N;b.forEach(E=>{i&&E.removeEventListener("scroll",s),c&&E.removeEventListener("resize",s)}),x?.(),(N=k)==null||N.disconnect(),k=null,p&&cancelAnimationFrame(C)}}var Vf=y.useLayoutEffect,Z3=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],ku=function(){};function J3(n,o){return o?o[0]==="-"?n+o:n+"__"+o:n}function eN(n,o){for(var s=arguments.length,l=new Array(s>2?s-2:0),i=2;i<s;i++)l[i-2]=arguments[i];var c=[].concat(l);if(o&&n)for(var f in o)o.hasOwnProperty(f)&&o[f]&&c.push("".concat(J3(n,f)));return c.filter(function(m){return m}).map(function(m){return String(m).trim()}).join(" ")}var py=function(o){return uN(o)?o.filter(Boolean):ms(o)==="object"&&o!==null?[o]:[]},Hb=function(o){o.className,o.clearValue,o.cx,o.getStyles,o.getClassNames,o.getValue,o.hasValue,o.isMulti,o.isRtl,o.options,o.selectOption,o.selectProps,o.setValue,o.theme;var s=br(o,Z3);return bt({},s)},gn=function(o,s,l){var i=o.cx,c=o.getStyles,f=o.getClassNames,m=o.className;return{css:c(s,o),className:i(l??{},f(s,o),m)}};function Bu(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function tN(n){return Bu(n)?window.innerHeight:n.clientHeight}function Vb(n){return Bu(n)?window.pageYOffset:n.scrollTop}function ju(n,o){if(Bu(n)){window.scrollTo(0,o);return}n.scrollTop=o}function nN(n){var o=getComputedStyle(n),s=o.position==="absolute",l=/(auto|scroll)/;if(o.position==="fixed")return document.documentElement;for(var i=n;i=i.parentElement;)if(o=getComputedStyle(i),!(s&&o.position==="static")&&l.test(o.overflow+o.overflowY+o.overflowX))return i;return document.documentElement}function oN(n,o,s,l){return s*((n=n/l-1)*n*n+1)+o}function tu(n,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ku,i=Vb(n),c=o-i,f=10,m=0;function p(){m+=f;var g=oN(m,i,c,s);ju(n,g),m<s?window.requestAnimationFrame(p):l(n)}p()}function hy(n,o){var s=n.getBoundingClientRect(),l=o.getBoundingClientRect(),i=o.offsetHeight/3;l.bottom+i>s.bottom?ju(n,Math.min(o.offsetTop+o.clientHeight-n.offsetHeight+i,n.scrollHeight)):l.top-i<s.top&&ju(n,Math.max(o.offsetTop-i,0))}function rN(n){var o=n.getBoundingClientRect();return{bottom:o.bottom,height:o.height,left:o.left,right:o.right,top:o.top,width:o.width}}function my(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function sN(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var Kb=!1,lN={get passive(){return Kb=!0}},nu=typeof window<"u"?window:{};nu.addEventListener&&nu.removeEventListener&&(nu.addEventListener("p",ku,lN),nu.removeEventListener("p",ku,!1));var aN=Kb;function iN(n){return n!=null}function uN(n){return Array.isArray(n)}function ou(n,o,s){return n?o:s}var cN=function(o){for(var s=arguments.length,l=new Array(s>1?s-1:0),i=1;i<s;i++)l[i-1]=arguments[i];var c=Object.entries(o).filter(function(f){var m=pr(f,1),p=m[0];return!l.includes(p)});return c.reduce(function(f,m){var p=pr(m,2),g=p[0],b=p[1];return f[g]=b,f},{})},dN=["children","innerProps"],fN=["children","innerProps"];function pN(n){var o=n.maxHeight,s=n.menuEl,l=n.minHeight,i=n.placement,c=n.shouldScroll,f=n.isFixedPosition,m=n.controlHeight,p=nN(s),g={placement:"bottom",maxHeight:o};if(!s||!s.offsetParent)return g;var b=p.getBoundingClientRect(),x=b.height,w=s.getBoundingClientRect(),k=w.bottom,C=w.height,S=w.top,j=s.offsetParent.getBoundingClientRect(),N=j.top,E=f?window.innerHeight:tN(p),H=Vb(p),V=parseInt(getComputedStyle(s).marginBottom,10),L=parseInt(getComputedStyle(s).marginTop,10),z=N-L,I=E-S,$=z+H,W=x-H-S,ie=k-E+H+V,de=H+S-L,me=160;switch(i){case"auto":case"bottom":if(I>=C)return{placement:"bottom",maxHeight:o};if(W>=C&&!f)return c&&tu(p,ie,me),{placement:"bottom",maxHeight:o};if(!f&&W>=l||f&&I>=l){c&&tu(p,ie,me);var Ae=f?I-V:W-V;return{placement:"bottom",maxHeight:Ae}}if(i==="auto"||f){var Ee=o,Ie=f?z:$;return Ie>=l&&(Ee=Math.min(Ie-V-m,o)),{placement:"top",maxHeight:Ee}}if(i==="bottom")return c&&ju(p,ie),{placement:"bottom",maxHeight:o};break;case"top":if(z>=C)return{placement:"top",maxHeight:o};if($>=C&&!f)return c&&tu(p,de,me),{placement:"top",maxHeight:o};if(!f&&$>=l||f&&z>=l){var B=o;return(!f&&$>=l||f&&z>=l)&&(B=f?z-L:$-L),c&&tu(p,de,me),{placement:"top",maxHeight:B}}return{placement:"bottom",maxHeight:o};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return g}function hN(n){var o={bottom:"top",top:"bottom"};return n?o[n]:"bottom"}var Ub=function(o){return o==="auto"?"bottom":o},mN=function(o,s){var l,i=o.placement,c=o.theme,f=c.borderRadius,m=c.spacing,p=c.colors;return bt((l={label:"menu"},la(l,hN(i),"100%"),la(l,"position","absolute"),la(l,"width","100%"),la(l,"zIndex",1),l),s?{}:{backgroundColor:p.neutral0,borderRadius:f,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:m.menuGutter,marginTop:m.menuGutter})},$b=y.createContext(null),gN=function(o){var s=o.children,l=o.minMenuHeight,i=o.maxMenuHeight,c=o.menuPlacement,f=o.menuPosition,m=o.menuShouldScrollIntoView,p=o.theme,g=y.useContext($b)||{},b=g.setPortalPlacement,x=y.useRef(null),w=y.useState(i),k=pr(w,2),C=k[0],S=k[1],j=y.useState(null),N=pr(j,2),E=N[0],H=N[1],V=p.spacing.controlHeight;return Vf(function(){var L=x.current;if(L){var z=f==="fixed",I=m&&!z,$=pN({maxHeight:i,menuEl:L,minHeight:l,placement:c,shouldScroll:I,isFixedPosition:z,controlHeight:V});S($.maxHeight),H($.placement),b?.($.placement)}},[i,c,f,m,l,b,V]),s({ref:x,placerProps:bt(bt({},o),{},{placement:E||Ub(c),maxHeight:C})})},yN=function(o){var s=o.children,l=o.innerRef,i=o.innerProps;return mt("div",vt({},gn(o,"menu",{menu:!0}),{ref:l},i),s)},bN=yN,xN=function(o,s){var l=o.maxHeight,i=o.theme.spacing.baseUnit;return bt({maxHeight:l,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},s?{}:{paddingBottom:i,paddingTop:i})},vN=function(o){var s=o.children,l=o.innerProps,i=o.innerRef,c=o.isMulti;return mt("div",vt({},gn(o,"menuList",{"menu-list":!0,"menu-list--is-multi":c}),{ref:i},l),s)},Fb=function(o,s){var l=o.theme,i=l.spacing.baseUnit,c=l.colors;return bt({textAlign:"center"},s?{}:{color:c.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},wN=Fb,SN=Fb,NN=function(o){var s=o.children,l=s===void 0?"No options":s,i=o.innerProps,c=br(o,dN);return mt("div",vt({},gn(bt(bt({},c),{},{children:l,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),l)},CN=function(o){var s=o.children,l=s===void 0?"Loading...":s,i=o.innerProps,c=br(o,fN);return mt("div",vt({},gn(bt(bt({},c),{},{children:l,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),l)},kN=function(o){var s=o.rect,l=o.offset,i=o.position;return{left:s.left,position:i,top:l,width:s.width,zIndex:1}},jN=function(o){var s=o.appendTo,l=o.children,i=o.controlElement,c=o.innerProps,f=o.menuPlacement,m=o.menuPosition,p=y.useRef(null),g=y.useRef(null),b=y.useState(Ub(f)),x=pr(b,2),w=x[0],k=x[1],C=y.useMemo(function(){return{setPortalPlacement:k}},[]),S=y.useState(null),j=pr(S,2),N=j[0],E=j[1],H=y.useCallback(function(){if(i){var I=rN(i),$=m==="fixed"?0:window.pageYOffset,W=I[w]+$;(W!==N?.offset||I.left!==N?.rect.left||I.width!==N?.rect.width)&&E({offset:W,rect:I})}},[i,m,w,N?.offset,N?.rect.left,N?.rect.width]);Vf(function(){H()},[H]);var V=y.useCallback(function(){typeof g.current=="function"&&(g.current(),g.current=null),i&&p.current&&(g.current=X3(i,p.current,H,{elementResize:"ResizeObserver"in window}))},[i,H]);Vf(function(){V()},[V]);var L=y.useCallback(function(I){p.current=I,V()},[V]);if(!s&&m!=="fixed"||!N)return null;var z=mt("div",vt({ref:L},gn(bt(bt({},o),{},{offset:N.offset,position:m,rect:N.rect}),"menuPortal",{"menu-portal":!0}),c),l);return mt($b.Provider,{value:C},s?Mn.createPortal(z,s):z)},MN=function(o){var s=o.isDisabled,l=o.isRtl;return{label:"container",direction:l?"rtl":void 0,pointerEvents:s?"none":void 0,position:"relative"}},ON=function(o){var s=o.children,l=o.innerProps,i=o.isDisabled,c=o.isRtl;return mt("div",vt({},gn(o,"container",{"--is-disabled":i,"--is-rtl":c}),l),s)},TN=function(o,s){var l=o.theme.spacing,i=o.isMulti,c=o.hasValue,f=o.selectProps.controlShouldRenderValue;return bt({alignItems:"center",display:i&&c&&f?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},s?{}:{padding:"".concat(l.baseUnit/2,"px ").concat(l.baseUnit*2,"px")})},EN=function(o){var s=o.children,l=o.innerProps,i=o.isMulti,c=o.hasValue;return mt("div",vt({},gn(o,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":c}),l),s)},IN=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},LN=function(o){var s=o.children,l=o.innerProps;return mt("div",vt({},gn(o,"indicatorsContainer",{indicators:!0}),l),s)},gy,AN=["size"],RN=["innerProps","isRtl","size"],_N={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},qb=function(o){var s=o.size,l=br(o,AN);return mt("svg",vt({height:s,width:s,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:_N},l))},wp=function(o){return mt(qb,vt({size:20},o),mt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Wb=function(o){return mt(qb,vt({size:20},o),mt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Gb=function(o,s){var l=o.isFocused,i=o.theme,c=i.spacing.baseUnit,f=i.colors;return bt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},s?{}:{color:l?f.neutral60:f.neutral20,padding:c*2,":hover":{color:l?f.neutral80:f.neutral40}})},DN=Gb,BN=function(o){var s=o.children,l=o.innerProps;return mt("div",vt({},gn(o,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),l),s||mt(Wb,null))},zN=Gb,HN=function(o){var s=o.children,l=o.innerProps;return mt("div",vt({},gn(o,"clearIndicator",{indicator:!0,"clear-indicator":!0}),l),s||mt(wp,null))},VN=function(o,s){var l=o.isDisabled,i=o.theme,c=i.spacing.baseUnit,f=i.colors;return bt({label:"indicatorSeparator",alignSelf:"stretch",width:1},s?{}:{backgroundColor:l?f.neutral10:f.neutral20,marginBottom:c*2,marginTop:c*2})},KN=function(o){var s=o.innerProps;return mt("span",vt({},s,gn(o,"indicatorSeparator",{"indicator-separator":!0})))},UN=_3(gy||(gy=D3([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),$N=function(o,s){var l=o.isFocused,i=o.size,c=o.theme,f=c.colors,m=c.spacing.baseUnit;return bt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},s?{}:{color:l?f.neutral60:f.neutral20,padding:m*2})},lf=function(o){var s=o.delay,l=o.offset;return mt("span",{css:yp({animation:"".concat(UN," 1s ease-in-out ").concat(s,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:l?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},FN=function(o){var s=o.innerProps,l=o.isRtl,i=o.size,c=i===void 0?4:i,f=br(o,RN);return mt("div",vt({},gn(bt(bt({},f),{},{innerProps:s,isRtl:l,size:c}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),s),mt(lf,{delay:0,offset:l}),mt(lf,{delay:160,offset:!0}),mt(lf,{delay:320,offset:!l}))},qN=function(o,s){var l=o.isDisabled,i=o.isFocused,c=o.theme,f=c.colors,m=c.borderRadius,p=c.spacing;return bt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:p.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},s?{}:{backgroundColor:l?f.neutral5:f.neutral0,borderColor:l?f.neutral10:i?f.primary:f.neutral20,borderRadius:m,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(f.primary):void 0,"&:hover":{borderColor:i?f.primary:f.neutral30}})},WN=function(o){var s=o.children,l=o.isDisabled,i=o.isFocused,c=o.innerRef,f=o.innerProps,m=o.menuIsOpen;return mt("div",vt({ref:c},gn(o,"control",{control:!0,"control--is-disabled":l,"control--is-focused":i,"control--menu-is-open":m}),f,{"aria-disabled":l||void 0}),s)},GN=WN,PN=["data"],YN=function(o,s){var l=o.theme.spacing;return s?{}:{paddingBottom:l.baseUnit*2,paddingTop:l.baseUnit*2}},QN=function(o){var s=o.children,l=o.cx,i=o.getStyles,c=o.getClassNames,f=o.Heading,m=o.headingProps,p=o.innerProps,g=o.label,b=o.theme,x=o.selectProps;return mt("div",vt({},gn(o,"group",{group:!0}),p),mt(f,vt({},m,{selectProps:x,theme:b,getStyles:i,getClassNames:c,cx:l}),g),mt("div",null,s))},XN=function(o,s){var l=o.theme,i=l.colors,c=l.spacing;return bt({label:"group",cursor:"default",display:"block"},s?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:c.baseUnit*3,paddingRight:c.baseUnit*3,textTransform:"uppercase"})},ZN=function(o){var s=Hb(o);s.data;var l=br(s,PN);return mt("div",vt({},gn(o,"groupHeading",{"group-heading":!0}),l))},JN=QN,eC=["innerRef","isDisabled","isHidden","inputClassName"],tC=function(o,s){var l=o.isDisabled,i=o.value,c=o.theme,f=c.spacing,m=c.colors;return bt(bt({visibility:l?"hidden":"visible",transform:i?"translateZ(0)":""},nC),s?{}:{margin:f.baseUnit/2,paddingBottom:f.baseUnit/2,paddingTop:f.baseUnit/2,color:m.neutral80})},Pb={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},nC={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":bt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Pb)},oC=function(o){return bt({label:"input",color:"inherit",background:0,opacity:o?0:1,width:"100%"},Pb)},rC=function(o){var s=o.cx,l=o.value,i=Hb(o),c=i.innerRef,f=i.isDisabled,m=i.isHidden,p=i.inputClassName,g=br(i,eC);return mt("div",vt({},gn(o,"input",{"input-container":!0}),{"data-value":l||""}),mt("input",vt({className:s({input:!0},p),ref:c,style:oC(m),disabled:f},g)))},sC=rC,lC=function(o,s){var l=o.theme,i=l.spacing,c=l.borderRadius,f=l.colors;return bt({label:"multiValue",display:"flex",minWidth:0},s?{}:{backgroundColor:f.neutral10,borderRadius:c/2,margin:i.baseUnit/2})},aC=function(o,s){var l=o.theme,i=l.borderRadius,c=l.colors,f=o.cropWithEllipsis;return bt({overflow:"hidden",textOverflow:f||f===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},s?{}:{borderRadius:i/2,color:c.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},iC=function(o,s){var l=o.theme,i=l.spacing,c=l.borderRadius,f=l.colors,m=o.isFocused;return bt({alignItems:"center",display:"flex"},s?{}:{borderRadius:c/2,backgroundColor:m?f.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:f.dangerLight,color:f.danger}})},Yb=function(o){var s=o.children,l=o.innerProps;return mt("div",l,s)},uC=Yb,cC=Yb;function dC(n){var o=n.children,s=n.innerProps;return mt("div",vt({role:"button"},s),o||mt(wp,{size:14}))}var fC=function(o){var s=o.children,l=o.components,i=o.data,c=o.innerProps,f=o.isDisabled,m=o.removeProps,p=o.selectProps,g=l.Container,b=l.Label,x=l.Remove;return mt(g,{data:i,innerProps:bt(bt({},gn(o,"multiValue",{"multi-value":!0,"multi-value--is-disabled":f})),c),selectProps:p},mt(b,{data:i,innerProps:bt({},gn(o,"multiValueLabel",{"multi-value__label":!0})),selectProps:p},s),mt(x,{data:i,innerProps:bt(bt({},gn(o,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(s||"option")},m),selectProps:p}))},pC=fC,hC=function(o,s){var l=o.isDisabled,i=o.isFocused,c=o.isSelected,f=o.theme,m=f.spacing,p=f.colors;return bt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},s?{}:{backgroundColor:c?p.primary:i?p.primary25:"transparent",color:l?p.neutral20:c?p.neutral0:"inherit",padding:"".concat(m.baseUnit*2,"px ").concat(m.baseUnit*3,"px"),":active":{backgroundColor:l?void 0:c?p.primary:p.primary50}})},mC=function(o){var s=o.children,l=o.isDisabled,i=o.isFocused,c=o.isSelected,f=o.innerRef,m=o.innerProps;return mt("div",vt({},gn(o,"option",{option:!0,"option--is-disabled":l,"option--is-focused":i,"option--is-selected":c}),{ref:f,"aria-disabled":l},m),s)},gC=mC,yC=function(o,s){var l=o.theme,i=l.spacing,c=l.colors;return bt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},s?{}:{color:c.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},bC=function(o){var s=o.children,l=o.innerProps;return mt("div",vt({},gn(o,"placeholder",{placeholder:!0}),l),s)},xC=bC,vC=function(o,s){var l=o.isDisabled,i=o.theme,c=i.spacing,f=i.colors;return bt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},s?{}:{color:l?f.neutral40:f.neutral80,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},wC=function(o){var s=o.children,l=o.isDisabled,i=o.innerProps;return mt("div",vt({},gn(o,"singleValue",{"single-value":!0,"single-value--is-disabled":l}),i),s)},SC=wC,Qb={ClearIndicator:HN,Control:GN,DropdownIndicator:BN,DownChevron:Wb,CrossIcon:wp,Group:JN,GroupHeading:ZN,IndicatorsContainer:LN,IndicatorSeparator:KN,Input:sC,LoadingIndicator:FN,Menu:bN,MenuList:vN,MenuPortal:jN,LoadingMessage:CN,NoOptionsMessage:NN,MultiValue:pC,MultiValueContainer:uC,MultiValueLabel:cC,MultiValueRemove:dC,Option:gC,Placeholder:xC,SelectContainer:ON,SingleValue:SC,ValueContainer:EN},NC=function(o){return bt(bt({},Qb),o.components)},yy=Number.isNaN||function(o){return typeof o=="number"&&o!==o};function CC(n,o){return!!(n===o||yy(n)&&yy(o))}function kC(n,o){if(n.length!==o.length)return!1;for(var s=0;s<n.length;s++)if(!CC(n[s],o[s]))return!1;return!0}function jC(n,o){o===void 0&&(o=kC);var s=null;function l(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];if(s&&s.lastThis===this&&o(i,s.lastArgs))return s.lastResult;var f=n.apply(this,i);return s={lastResult:f,lastArgs:i,lastThis:this},f}return l.clear=function(){s=null},l}var MC={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},OC=function(o){return mt("span",vt({css:MC},o))},by=OC,TC={guidance:function(o){var s=o.isSearchable,l=o.isMulti,i=o.tabSelectsValue,c=o.context,f=o.isInitialFocus;switch(c){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return f?"".concat(o["aria-label"]||"Select"," is focused ").concat(s?",type to refine list":"",", press Down to open the menu, ").concat(l?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(o){var s=o.action,l=o.label,i=l===void 0?"":l,c=o.labels,f=o.isDisabled;switch(s){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(c.length>1?"s":""," ").concat(c.join(","),", selected.");case"select-option":return f?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(o){var s=o.context,l=o.focused,i=o.options,c=o.label,f=c===void 0?"":c,m=o.selectValue,p=o.isDisabled,g=o.isSelected,b=o.isAppleDevice,x=function(S,j){return S&&S.length?"".concat(S.indexOf(j)+1," of ").concat(S.length):""};if(s==="value"&&m)return"value ".concat(f," focused, ").concat(x(m,l),".");if(s==="menu"&&b){var w=p?" disabled":"",k="".concat(g?" selected":"").concat(w);return"".concat(f).concat(k,", ").concat(x(i,l),".")}return""},onFilter:function(o){var s=o.inputValue,l=o.resultsMessage;return"".concat(l).concat(s?" for search term "+s:"",".")}},EC=function(o){var s=o.ariaSelection,l=o.focusedOption,i=o.focusedValue,c=o.focusableOptions,f=o.isFocused,m=o.selectValue,p=o.selectProps,g=o.id,b=o.isAppleDevice,x=p.ariaLiveMessages,w=p.getOptionLabel,k=p.inputValue,C=p.isMulti,S=p.isOptionDisabled,j=p.isSearchable,N=p.menuIsOpen,E=p.options,H=p.screenReaderStatus,V=p.tabSelectsValue,L=p.isLoading,z=p["aria-label"],I=p["aria-live"],$=y.useMemo(function(){return bt(bt({},TC),x||{})},[x]),W=y.useMemo(function(){var Ie="";if(s&&$.onChange){var B=s.option,le=s.options,fe=s.removedValue,$e=s.removedValues,Re=s.value,T=function(ue){return Array.isArray(ue)?null:ue},A=fe||B||T(Re),O=A?w(A):"",te=le||$e||void 0,X=te?te.map(w):[],pe=bt({isDisabled:A&&S(A,m),label:O,labels:X},s);Ie=$.onChange(pe)}return Ie},[s,$,S,m,w]),ie=y.useMemo(function(){var Ie="",B=l||i,le=!!(l&&m&&m.includes(l));if(B&&$.onFocus){var fe={focused:B,label:w(B),isDisabled:S(B,m),isSelected:le,options:c,context:B===l?"menu":"value",selectValue:m,isAppleDevice:b};Ie=$.onFocus(fe)}return Ie},[l,i,w,S,$,c,m,b]),de=y.useMemo(function(){var Ie="";if(N&&E.length&&!L&&$.onFilter){var B=H({count:c.length});Ie=$.onFilter({inputValue:k,resultsMessage:B})}return Ie},[c,k,N,$,E,H,L]),me=s?.action==="initial-input-focus",Ae=y.useMemo(function(){var Ie="";if($.guidance){var B=i?"value":N?"menu":"input";Ie=$.guidance({"aria-label":z,context:B,isDisabled:l&&S(l,m),isMulti:C,isSearchable:j,tabSelectsValue:V,isInitialFocus:me})}return Ie},[z,l,i,C,S,j,N,$,m,V,me]),Ee=mt(y.Fragment,null,mt("span",{id:"aria-selection"},W),mt("span",{id:"aria-focused"},ie),mt("span",{id:"aria-results"},de),mt("span",{id:"aria-guidance"},Ae));return mt(y.Fragment,null,mt(by,{id:g},me&&Ee),mt(by,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},f&&!me&&Ee))},IC=EC,Kf=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],LC=new RegExp("["+Kf.map(function(n){return n.letters}).join("")+"]","g"),Xb={};for(var af=0;af<Kf.length;af++)for(var uf=Kf[af],cf=0;cf<uf.letters.length;cf++)Xb[uf.letters[cf]]=uf.base;var Zb=function(o){return o.replace(LC,function(s){return Xb[s]})},AC=jC(Zb),xy=function(o){return o.replace(/^\s+|\s+$/g,"")},RC=function(o){return"".concat(o.label," ").concat(o.value)},Uf=function(o){return function(s,l){if(s.data.__isNew__)return!0;var i=bt({ignoreCase:!0,ignoreAccents:!0,stringify:RC,trim:!0,matchFrom:"any"},o),c=i.ignoreCase,f=i.ignoreAccents,m=i.stringify,p=i.trim,g=i.matchFrom,b=p?xy(l):l,x=p?xy(m(s)):m(s);return c&&(b=b.toLowerCase(),x=x.toLowerCase()),f&&(b=AC(b),x=Zb(x)),g==="start"?x.substr(0,b.length)===b:x.indexOf(b)>-1}},_C=["innerRef"];function DC(n){var o=n.innerRef,s=br(n,_C),l=cN(s,"onExited","in","enter","exit","appear");return mt("input",vt({ref:o},l,{css:yp({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var BC=function(o){o.cancelable&&o.preventDefault(),o.stopPropagation()};function zC(n){var o=n.isEnabled,s=n.onBottomArrive,l=n.onBottomLeave,i=n.onTopArrive,c=n.onTopLeave,f=y.useRef(!1),m=y.useRef(!1),p=y.useRef(0),g=y.useRef(null),b=y.useCallback(function(j,N){if(g.current!==null){var E=g.current,H=E.scrollTop,V=E.scrollHeight,L=E.clientHeight,z=g.current,I=N>0,$=V-L-H,W=!1;$>N&&f.current&&(l&&l(j),f.current=!1),I&&m.current&&(c&&c(j),m.current=!1),I&&N>$?(s&&!f.current&&s(j),z.scrollTop=V,W=!0,f.current=!0):!I&&-N>H&&(i&&!m.current&&i(j),z.scrollTop=0,W=!0,m.current=!0),W&&BC(j)}},[s,l,i,c]),x=y.useCallback(function(j){b(j,j.deltaY)},[b]),w=y.useCallback(function(j){p.current=j.changedTouches[0].clientY},[]),k=y.useCallback(function(j){var N=p.current-j.changedTouches[0].clientY;b(j,N)},[b]),C=y.useCallback(function(j){if(j){var N=aN?{passive:!1}:!1;j.addEventListener("wheel",x,N),j.addEventListener("touchstart",w,N),j.addEventListener("touchmove",k,N)}},[k,w,x]),S=y.useCallback(function(j){j&&(j.removeEventListener("wheel",x,!1),j.removeEventListener("touchstart",w,!1),j.removeEventListener("touchmove",k,!1))},[k,w,x]);return y.useEffect(function(){if(o){var j=g.current;return C(j),function(){S(j)}}},[o,C,S]),function(j){g.current=j}}var vy=["boxSizing","height","overflow","paddingRight","position"],wy={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Sy(n){n.cancelable&&n.preventDefault()}function Ny(n){n.stopPropagation()}function Cy(){var n=this.scrollTop,o=this.scrollHeight,s=n+this.offsetHeight;n===0?this.scrollTop=1:s===o&&(this.scrollTop=n-1)}function ky(){return"ontouchstart"in window||navigator.maxTouchPoints}var jy=!!(typeof window<"u"&&window.document&&window.document.createElement),ra=0,Xs={capture:!1,passive:!1};function HC(n){var o=n.isEnabled,s=n.accountForScrollbars,l=s===void 0?!0:s,i=y.useRef({}),c=y.useRef(null),f=y.useCallback(function(p){if(jy){var g=document.body,b=g&&g.style;if(l&&vy.forEach(function(C){var S=b&&b[C];i.current[C]=S}),l&&ra<1){var x=parseInt(i.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,k=window.innerWidth-w+x||0;Object.keys(wy).forEach(function(C){var S=wy[C];b&&(b[C]=S)}),b&&(b.paddingRight="".concat(k,"px"))}g&&ky()&&(g.addEventListener("touchmove",Sy,Xs),p&&(p.addEventListener("touchstart",Cy,Xs),p.addEventListener("touchmove",Ny,Xs))),ra+=1}},[l]),m=y.useCallback(function(p){if(jy){var g=document.body,b=g&&g.style;ra=Math.max(ra-1,0),l&&ra<1&&vy.forEach(function(x){var w=i.current[x];b&&(b[x]=w)}),g&&ky()&&(g.removeEventListener("touchmove",Sy,Xs),p&&(p.removeEventListener("touchstart",Cy,Xs),p.removeEventListener("touchmove",Ny,Xs)))}},[l]);return y.useEffect(function(){if(o){var p=c.current;return f(p),function(){m(p)}}},[o,f,m]),function(p){c.current=p}}var VC=function(o){var s=o.target;return s.ownerDocument.activeElement&&s.ownerDocument.activeElement.blur()},KC={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function UC(n){var o=n.children,s=n.lockEnabled,l=n.captureEnabled,i=l===void 0?!0:l,c=n.onBottomArrive,f=n.onBottomLeave,m=n.onTopArrive,p=n.onTopLeave,g=zC({isEnabled:i,onBottomArrive:c,onBottomLeave:f,onTopArrive:m,onTopLeave:p}),b=HC({isEnabled:s}),x=function(k){g(k),b(k)};return mt(y.Fragment,null,s&&mt("div",{onClick:VC,css:KC}),o(x))}var $C={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},FC=function(o){var s=o.name,l=o.onFocus;return mt("input",{required:!0,name:s,tabIndex:-1,"aria-hidden":"true",onFocus:l,css:$C,value:"",onChange:function(){}})},qC=FC;function Sp(n){var o;return typeof window<"u"&&window.navigator!=null?n.test(((o=window.navigator.userAgentData)===null||o===void 0?void 0:o.platform)||window.navigator.platform):!1}function WC(){return Sp(/^iPhone/i)}function Jb(){return Sp(/^Mac/i)}function GC(){return Sp(/^iPad/i)||Jb()&&navigator.maxTouchPoints>1}function PC(){return WC()||GC()}function YC(){return Jb()||PC()}var QC=function(o){return o.label},XC=function(o){return o.label},ZC=function(o){return o.value},JC=function(o){return!!o.isDisabled},e4={clearIndicator:zN,container:MN,control:qN,dropdownIndicator:DN,group:YN,groupHeading:XN,indicatorsContainer:IN,indicatorSeparator:VN,input:tC,loadingIndicator:$N,loadingMessage:SN,menu:mN,menuList:xN,menuPortal:kN,multiValue:lC,multiValueLabel:aC,multiValueRemove:iC,noOptionsMessage:wN,option:hC,placeholder:yC,singleValue:vC,valueContainer:TN},t4={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},n4=4,ex=4,o4=38,r4=ex*2,s4={baseUnit:ex,controlHeight:o4,menuGutter:r4},df={borderRadius:n4,colors:t4,spacing:s4},l4={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:my(),captureMenuScroll:!my(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Uf(),formatGroupLabel:QC,getOptionLabel:XC,getOptionValue:ZC,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:JC,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!sN(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(o){var s=o.count;return"".concat(s," result").concat(s!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function My(n,o,s,l){var i=ox(n,o,s),c=rx(n,o,s),f=nx(n,o),m=Mu(n,o);return{type:"option",data:o,isDisabled:i,isSelected:c,label:f,value:m,index:l}}function du(n,o){return n.options.map(function(s,l){if("options"in s){var i=s.options.map(function(f,m){return My(n,f,o,m)}).filter(function(f){return Ty(n,f)});return i.length>0?{type:"group",data:s,options:i,index:l}:void 0}var c=My(n,s,o,l);return Ty(n,c)?c:void 0}).filter(iN)}function tx(n){return n.reduce(function(o,s){return s.type==="group"?o.push.apply(o,fp(s.options.map(function(l){return l.data}))):o.push(s.data),o},[])}function Oy(n,o){return n.reduce(function(s,l){return l.type==="group"?s.push.apply(s,fp(l.options.map(function(i){return{data:i.data,id:"".concat(o,"-").concat(l.index,"-").concat(i.index)}}))):s.push({data:l.data,id:"".concat(o,"-").concat(l.index)}),s},[])}function a4(n,o){return tx(du(n,o))}function Ty(n,o){var s=n.inputValue,l=s===void 0?"":s,i=o.data,c=o.isSelected,f=o.label,m=o.value;return(!lx(n)||!c)&&sx(n,{label:f,value:m,data:i},l)}function i4(n,o){var s=n.focusedValue,l=n.selectValue,i=l.indexOf(s);if(i>-1){var c=o.indexOf(s);if(c>-1)return s;if(i<o.length)return o[i]}return null}function u4(n,o){var s=n.focusedOption;return s&&o.indexOf(s)>-1?s:o[0]}var ff=function(o,s){var l,i=(l=o.find(function(c){return c.data===s}))===null||l===void 0?void 0:l.id;return i||null},nx=function(o,s){return o.getOptionLabel(s)},Mu=function(o,s){return o.getOptionValue(s)};function ox(n,o,s){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(o,s):!1}function rx(n,o,s){if(s.indexOf(o)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(o,s);var l=Mu(n,o);return s.some(function(i){return Mu(n,i)===l})}function sx(n,o,s){return n.filterOption?n.filterOption(o,s):!0}var lx=function(o){var s=o.hideSelectedOptions,l=o.isMulti;return s===void 0?l:s},c4=1,ax=(function(n){LS(s,n);var o=_S(s);function s(l){var i;if(ES(this,s),i=o.call(this,l),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(p){i.controlRef=p},i.focusedOptionRef=null,i.getFocusedOptionRef=function(p){i.focusedOptionRef=p},i.menuListRef=null,i.getMenuListRef=function(p){i.menuListRef=p},i.inputRef=null,i.getInputRef=function(p){i.inputRef=p},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(p,g){var b=i.props,x=b.onChange,w=b.name;g.name=w,i.ariaOnChange(p,g),x(p,g)},i.setValue=function(p,g,b){var x=i.props,w=x.closeMenuOnSelect,k=x.isMulti,C=x.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:C}),w&&(i.setState({inputIsHiddenAfterUpdate:!k}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(p,{action:g,option:b})},i.selectOption=function(p){var g=i.props,b=g.blurInputOnSelect,x=g.isMulti,w=g.name,k=i.state.selectValue,C=x&&i.isOptionSelected(p,k),S=i.isOptionDisabled(p,k);if(C){var j=i.getOptionValue(p);i.setValue(k.filter(function(N){return i.getOptionValue(N)!==j}),"deselect-option",p)}else if(!S)x?i.setValue([].concat(fp(k),[p]),"select-option",p):i.setValue(p,"select-option");else{i.ariaOnChange(p,{action:"select-option",option:p,name:w});return}b&&i.blurInput()},i.removeValue=function(p){var g=i.props.isMulti,b=i.state.selectValue,x=i.getOptionValue(p),w=b.filter(function(C){return i.getOptionValue(C)!==x}),k=ou(g,w,w[0]||null);i.onChange(k,{action:"remove-value",removedValue:p}),i.focusInput()},i.clearValue=function(){var p=i.state.selectValue;i.onChange(ou(i.props.isMulti,[],null),{action:"clear",removedValues:p})},i.popValue=function(){var p=i.props.isMulti,g=i.state.selectValue,b=g[g.length-1],x=g.slice(0,g.length-1),w=ou(p,x,x[0]||null);b&&i.onChange(w,{action:"pop-value",removedValue:b})},i.getFocusedOptionId=function(p){return ff(i.state.focusableOptionsWithIds,p)},i.getFocusableOptionsWithIds=function(){return Oy(du(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var p=arguments.length,g=new Array(p),b=0;b<p;b++)g[b]=arguments[b];return eN.apply(void 0,[i.props.classNamePrefix].concat(g))},i.getOptionLabel=function(p){return nx(i.props,p)},i.getOptionValue=function(p){return Mu(i.props,p)},i.getStyles=function(p,g){var b=i.props.unstyled,x=e4[p](g,b);x.boxSizing="border-box";var w=i.props.styles[p];return w?w(x,g):x},i.getClassNames=function(p,g){var b,x;return(b=(x=i.props.classNames)[p])===null||b===void 0?void 0:b.call(x,g)},i.getElementId=function(p){return"".concat(i.state.instancePrefix,"-").concat(p)},i.getComponents=function(){return NC(i.props)},i.buildCategorizedOptions=function(){return du(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return tx(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(p,g){i.setState({ariaSelection:bt({value:p},g)})},i.onMenuMouseDown=function(p){p.button===0&&(p.stopPropagation(),p.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(p){i.blockOptionHover=!1},i.onControlMouseDown=function(p){if(!p.defaultPrevented){var g=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?p.target.tagName!=="INPUT"&&p.target.tagName!=="TEXTAREA"&&i.onMenuClose():g&&i.openMenu("first"):(g&&(i.openAfterFocus=!0),i.focusInput()),p.target.tagName!=="INPUT"&&p.target.tagName!=="TEXTAREA"&&p.preventDefault()}},i.onDropdownIndicatorMouseDown=function(p){if(!(p&&p.type==="mousedown"&&p.button!==0)&&!i.props.isDisabled){var g=i.props,b=g.isMulti,x=g.menuIsOpen;i.focusInput(),x?(i.setState({inputIsHiddenAfterUpdate:!b}),i.onMenuClose()):i.openMenu("first"),p.preventDefault()}},i.onClearIndicatorMouseDown=function(p){p&&p.type==="mousedown"&&p.button!==0||(i.clearValue(),p.preventDefault(),i.openAfterFocus=!1,p.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(p){typeof i.props.closeMenuOnScroll=="boolean"?p.target instanceof HTMLElement&&Bu(p.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(p)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(p){var g=p.touches,b=g&&g.item(0);b&&(i.initialTouchX=b.clientX,i.initialTouchY=b.clientY,i.userIsDragging=!1)},i.onTouchMove=function(p){var g=p.touches,b=g&&g.item(0);if(b){var x=Math.abs(b.clientX-i.initialTouchX),w=Math.abs(b.clientY-i.initialTouchY),k=5;i.userIsDragging=x>k||w>k}},i.onTouchEnd=function(p){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(p.target)&&i.menuListRef&&!i.menuListRef.contains(p.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(p){i.userIsDragging||i.onControlMouseDown(p)},i.onClearIndicatorTouchEnd=function(p){i.userIsDragging||i.onClearIndicatorMouseDown(p)},i.onDropdownIndicatorTouchEnd=function(p){i.userIsDragging||i.onDropdownIndicatorMouseDown(p)},i.handleInputChange=function(p){var g=i.props.inputValue,b=p.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(b,{action:"input-change",prevInputValue:g}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(p){i.props.onFocus&&i.props.onFocus(p),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(p){var g=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(p),i.onInputChange("",{action:"input-blur",prevInputValue:g}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(p){if(!(i.blockOptionHover||i.state.focusedOption===p)){var g=i.getFocusableOptions(),b=g.indexOf(p);i.setState({focusedOption:p,focusedOptionId:b>-1?i.getFocusedOptionId(p):null})}},i.shouldHideSelectedOptions=function(){return lx(i.props)},i.onValueInputFocus=function(p){p.preventDefault(),p.stopPropagation(),i.focus()},i.onKeyDown=function(p){var g=i.props,b=g.isMulti,x=g.backspaceRemovesValue,w=g.escapeClearsValue,k=g.inputValue,C=g.isClearable,S=g.isDisabled,j=g.menuIsOpen,N=g.onKeyDown,E=g.tabSelectsValue,H=g.openMenuOnFocus,V=i.state,L=V.focusedOption,z=V.focusedValue,I=V.selectValue;if(!S&&!(typeof N=="function"&&(N(p),p.defaultPrevented))){switch(i.blockOptionHover=!0,p.key){case"ArrowLeft":if(!b||k)return;i.focusValue("previous");break;case"ArrowRight":if(!b||k)return;i.focusValue("next");break;case"Delete":case"Backspace":if(k)return;if(z)i.removeValue(z);else{if(!x)return;b?i.popValue():C&&i.clearValue()}break;case"Tab":if(i.isComposing||p.shiftKey||!j||!E||!L||H&&i.isOptionSelected(L,I))return;i.selectOption(L);break;case"Enter":if(p.keyCode===229)break;if(j){if(!L||i.isComposing)return;i.selectOption(L);break}return;case"Escape":j?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:k}),i.onMenuClose()):C&&w&&i.clearValue();break;case" ":if(k)return;if(!j){i.openMenu("first");break}if(!L)return;i.selectOption(L);break;case"ArrowUp":j?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":j?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!j)return;i.focusOption("pageup");break;case"PageDown":if(!j)return;i.focusOption("pagedown");break;case"Home":if(!j)return;i.focusOption("first");break;case"End":if(!j)return;i.focusOption("last");break;default:return}p.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++c4),i.state.selectValue=py(l.value),l.menuIsOpen&&i.state.selectValue.length){var c=i.getFocusableOptionsWithIds(),f=i.buildFocusableOptions(),m=f.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=c,i.state.focusedOption=f[m],i.state.focusedOptionId=ff(c,f[m])}return i}return IS(s,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&hy(this.menuListRef,this.focusedOptionRef),YC()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var c=this.props,f=c.isDisabled,m=c.menuIsOpen,p=this.state.isFocused;(p&&!f&&i.isDisabled||p&&m&&!i.menuIsOpen)&&this.focusInput(),p&&f&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!p&&!f&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(hy(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,c){this.props.onInputChange(i,c)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var c=this,f=this.state,m=f.selectValue,p=f.isFocused,g=this.buildFocusableOptions(),b=i==="first"?0:g.length-1;if(!this.props.isMulti){var x=g.indexOf(m[0]);x>-1&&(b=x)}this.scrollToFocusedOptionOnUpdate=!(p&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:g[b],focusedOptionId:this.getFocusedOptionId(g[b])},function(){return c.onMenuOpen()})}},{key:"focusValue",value:function(i){var c=this.state,f=c.selectValue,m=c.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var p=f.indexOf(m);m||(p=-1);var g=f.length-1,b=-1;if(f.length){switch(i){case"previous":p===0?b=0:p===-1?b=g:b=p-1;break;case"next":p>-1&&p<g&&(b=p+1);break}this.setState({inputIsHidden:b!==-1,focusedValue:f[b]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",c=this.props.pageSize,f=this.state.focusedOption,m=this.getFocusableOptions();if(m.length){var p=0,g=m.indexOf(f);f||(g=-1),i==="up"?p=g>0?g-1:m.length-1:i==="down"?p=(g+1)%m.length:i==="pageup"?(p=g-c,p<0&&(p=0)):i==="pagedown"?(p=g+c,p>m.length-1&&(p=m.length-1)):i==="last"&&(p=m.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:m[p],focusedValue:null,focusedOptionId:this.getFocusedOptionId(m[p])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(df):bt(bt({},df),this.props.theme):df})},{key:"getCommonProps",value:function(){var i=this.clearValue,c=this.cx,f=this.getStyles,m=this.getClassNames,p=this.getValue,g=this.selectOption,b=this.setValue,x=this.props,w=x.isMulti,k=x.isRtl,C=x.options,S=this.hasValue();return{clearValue:i,cx:c,getStyles:f,getClassNames:m,getValue:p,hasValue:S,isMulti:w,isRtl:k,options:C,selectOption:g,selectProps:x,setValue:b,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,c=i.isClearable,f=i.isMulti;return c===void 0?f:c}},{key:"isOptionDisabled",value:function(i,c){return ox(this.props,i,c)}},{key:"isOptionSelected",value:function(i,c){return rx(this.props,i,c)}},{key:"filterOption",value:function(i,c){return sx(this.props,i,c)}},{key:"formatOptionLabel",value:function(i,c){if(typeof this.props.formatOptionLabel=="function"){var f=this.props.inputValue,m=this.state.selectValue;return this.props.formatOptionLabel(i,{context:c,inputValue:f,selectValue:m})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var i=this.props,c=i.isDisabled,f=i.isSearchable,m=i.inputId,p=i.inputValue,g=i.tabIndex,b=i.form,x=i.menuIsOpen,w=i.required,k=this.getComponents(),C=k.Input,S=this.state,j=S.inputIsHidden,N=S.ariaSelection,E=this.commonProps,H=m||this.getElementId("input"),V=bt(bt(bt({"aria-autocomplete":"list","aria-expanded":x,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":w,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},x&&{"aria-controls":this.getElementId("listbox")}),!f&&{"aria-readonly":!0}),this.hasValue()?N?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return f?y.createElement(C,vt({},E,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:H,innerRef:this.getInputRef,isDisabled:c,isHidden:j,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:g,form:b,type:"text",value:p},V)):y.createElement(DC,vt({id:H,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:ku,onFocus:this.onInputFocus,disabled:c,tabIndex:g,inputMode:"none",form:b,value:""},V))})},{key:"renderPlaceholderOrValue",value:function(){var i=this,c=this.getComponents(),f=c.MultiValue,m=c.MultiValueContainer,p=c.MultiValueLabel,g=c.MultiValueRemove,b=c.SingleValue,x=c.Placeholder,w=this.commonProps,k=this.props,C=k.controlShouldRenderValue,S=k.isDisabled,j=k.isMulti,N=k.inputValue,E=k.placeholder,H=this.state,V=H.selectValue,L=H.focusedValue,z=H.isFocused;if(!this.hasValue()||!C)return N?null:y.createElement(x,vt({},w,{key:"placeholder",isDisabled:S,isFocused:z,innerProps:{id:this.getElementId("placeholder")}}),E);if(j)return V.map(function($,W){var ie=$===L,de="".concat(i.getOptionLabel($),"-").concat(i.getOptionValue($));return y.createElement(f,vt({},w,{components:{Container:m,Label:p,Remove:g},isFocused:ie,isDisabled:S,key:de,index:W,removeProps:{onClick:function(){return i.removeValue($)},onTouchEnd:function(){return i.removeValue($)},onMouseDown:function(Ae){Ae.preventDefault()}},data:$}),i.formatOptionLabel($,"value"))});if(N)return null;var I=V[0];return y.createElement(b,vt({},w,{data:I,isDisabled:S}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),c=i.ClearIndicator,f=this.commonProps,m=this.props,p=m.isDisabled,g=m.isLoading,b=this.state.isFocused;if(!this.isClearable()||!c||p||!this.hasValue()||g)return null;var x={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return y.createElement(c,vt({},f,{innerProps:x,isFocused:b}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),c=i.LoadingIndicator,f=this.commonProps,m=this.props,p=m.isDisabled,g=m.isLoading,b=this.state.isFocused;if(!c||!g)return null;var x={"aria-hidden":"true"};return y.createElement(c,vt({},f,{innerProps:x,isDisabled:p,isFocused:b}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),c=i.DropdownIndicator,f=i.IndicatorSeparator;if(!c||!f)return null;var m=this.commonProps,p=this.props.isDisabled,g=this.state.isFocused;return y.createElement(f,vt({},m,{isDisabled:p,isFocused:g}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),c=i.DropdownIndicator;if(!c)return null;var f=this.commonProps,m=this.props.isDisabled,p=this.state.isFocused,g={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return y.createElement(c,vt({},f,{innerProps:g,isDisabled:m,isFocused:p}))}},{key:"renderMenu",value:function(){var i=this,c=this.getComponents(),f=c.Group,m=c.GroupHeading,p=c.Menu,g=c.MenuList,b=c.MenuPortal,x=c.LoadingMessage,w=c.NoOptionsMessage,k=c.Option,C=this.commonProps,S=this.state.focusedOption,j=this.props,N=j.captureMenuScroll,E=j.inputValue,H=j.isLoading,V=j.loadingMessage,L=j.minMenuHeight,z=j.maxMenuHeight,I=j.menuIsOpen,$=j.menuPlacement,W=j.menuPosition,ie=j.menuPortalTarget,de=j.menuShouldBlockScroll,me=j.menuShouldScrollIntoView,Ae=j.noOptionsMessage,Ee=j.onMenuScrollToTop,Ie=j.onMenuScrollToBottom;if(!I)return null;var B=function(O,te){var X=O.type,pe=O.data,Y=O.isDisabled,ue=O.isSelected,_=O.label,U=O.value,R=S===pe,D=Y?void 0:function(){return i.onOptionHover(pe)},G=Y?void 0:function(){return i.selectOption(pe)},K="".concat(i.getElementId("option"),"-").concat(te),Oe={id:K,onClick:G,onMouseMove:D,onMouseOver:D,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:ue};return y.createElement(k,vt({},C,{innerProps:Oe,data:pe,isDisabled:Y,isSelected:ue,key:K,label:_,type:X,value:U,isFocused:R,innerRef:R?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(O.data,"menu"))},le;if(this.hasOptions())le=this.getCategorizedOptions().map(function(A){if(A.type==="group"){var O=A.data,te=A.options,X=A.index,pe="".concat(i.getElementId("group"),"-").concat(X),Y="".concat(pe,"-heading");return y.createElement(f,vt({},C,{key:pe,data:O,options:te,Heading:m,headingProps:{id:Y,data:A.data},label:i.formatGroupLabel(A.data)}),A.options.map(function(ue){return B(ue,"".concat(X,"-").concat(ue.index))}))}else if(A.type==="option")return B(A,"".concat(A.index))});else if(H){var fe=V({inputValue:E});if(fe===null)return null;le=y.createElement(x,C,fe)}else{var $e=Ae({inputValue:E});if($e===null)return null;le=y.createElement(w,C,$e)}var Re={minMenuHeight:L,maxMenuHeight:z,menuPlacement:$,menuPosition:W,menuShouldScrollIntoView:me},T=y.createElement(gN,vt({},C,Re),function(A){var O=A.ref,te=A.placerProps,X=te.placement,pe=te.maxHeight;return y.createElement(p,vt({},C,Re,{innerRef:O,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:H,placement:X}),y.createElement(UC,{captureEnabled:N,onTopArrive:Ee,onBottomArrive:Ie,lockEnabled:de},function(Y){return y.createElement(g,vt({},C,{innerRef:function(_){i.getMenuListRef(_),Y(_)},innerProps:{role:"listbox","aria-multiselectable":C.isMulti,id:i.getElementId("listbox")},isLoading:H,maxHeight:pe,focusedOption:S}),le)}))});return ie||W==="fixed"?y.createElement(b,vt({},C,{appendTo:ie,controlElement:this.controlRef,menuPlacement:$,menuPosition:W}),T):T}},{key:"renderFormField",value:function(){var i=this,c=this.props,f=c.delimiter,m=c.isDisabled,p=c.isMulti,g=c.name,b=c.required,x=this.state.selectValue;if(b&&!this.hasValue()&&!m)return y.createElement(qC,{name:g,onFocus:this.onValueInputFocus});if(!(!g||m))if(p)if(f){var w=x.map(function(S){return i.getOptionValue(S)}).join(f);return y.createElement("input",{name:g,type:"hidden",value:w})}else{var k=x.length>0?x.map(function(S,j){return y.createElement("input",{key:"i-".concat(j),name:g,type:"hidden",value:i.getOptionValue(S)})}):y.createElement("input",{name:g,type:"hidden",value:""});return y.createElement("div",null,k)}else{var C=x[0]?this.getOptionValue(x[0]):"";return y.createElement("input",{name:g,type:"hidden",value:C})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,c=this.state,f=c.ariaSelection,m=c.focusedOption,p=c.focusedValue,g=c.isFocused,b=c.selectValue,x=this.getFocusableOptions();return y.createElement(IC,vt({},i,{id:this.getElementId("live-region"),ariaSelection:f,focusedOption:m,focusedValue:p,isFocused:g,selectValue:b,focusableOptions:x,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),c=i.Control,f=i.IndicatorsContainer,m=i.SelectContainer,p=i.ValueContainer,g=this.props,b=g.className,x=g.id,w=g.isDisabled,k=g.menuIsOpen,C=this.state.isFocused,S=this.commonProps=this.getCommonProps();return y.createElement(m,vt({},S,{className:b,innerProps:{id:x,onKeyDown:this.onKeyDown},isDisabled:w,isFocused:C}),this.renderLiveRegion(),y.createElement(c,vt({},S,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:w,isFocused:C,menuIsOpen:k}),y.createElement(p,vt({},S,{isDisabled:w}),this.renderPlaceholderOrValue(),this.renderInput()),y.createElement(f,vt({},S,{isDisabled:w}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,c){var f=c.prevProps,m=c.clearFocusValueOnUpdate,p=c.inputIsHiddenAfterUpdate,g=c.ariaSelection,b=c.isFocused,x=c.prevWasFocused,w=c.instancePrefix,k=i.options,C=i.value,S=i.menuIsOpen,j=i.inputValue,N=i.isMulti,E=py(C),H={};if(f&&(C!==f.value||k!==f.options||S!==f.menuIsOpen||j!==f.inputValue)){var V=S?a4(i,E):[],L=S?Oy(du(i,E),"".concat(w,"-option")):[],z=m?i4(c,E):null,I=u4(c,V),$=ff(L,I);H={selectValue:E,focusedOption:I,focusedOptionId:$,focusableOptionsWithIds:L,focusedValue:z,clearFocusValueOnUpdate:!1}}var W=p!=null&&i!==f?{inputIsHidden:p,inputIsHiddenAfterUpdate:void 0}:{},ie=g,de=b&&x;return b&&!de&&(ie={value:ou(N,E,E[0]||null),options:E,action:"initial-input-focus"},de=!x),g?.action==="initial-input-focus"&&(ie=null),bt(bt(bt({},H),W),{},{prevProps:i,ariaSelection:ie,prevWasFocused:de})}}]),s})(y.Component);ax.defaultProps=l4;var d4=y.forwardRef(function(n,o){var s=TS(n);return y.createElement(ax,vt({ref:o},s))}),Ey=d4;function pf({containerClass:n,name:o,value:s,options:l,onChange:i,disabled:c=!1,hideLabel:f=!1,hasPin:m,isPinned:p=!1,onTogglePin:g,hasError:b=!1,forceModalOpen:x=!1,onModalClose:w}){const k=ce(ee=>ee.setNodeTypes),S=sl(ee=>ee.theme)==="dark",[j,N]=y.useState(!1),E=y.useRef(null),H=y.useRef(null),[V,L]=y.useState([]),[z,I]=y.useState(!1),$=x||j,W=bb(),ie=ee=>{if(!Array.isArray(l))return l?.[ee]},de=Array.isArray(l)?l:ie("options")??[],me=!!ie("image_upload"),Ae=ie("image_folder")??"input",Ee="__null__",Ie=de.some(ee=>ee===null),B=de.filter(ee=>ee!==null).map(ee=>String(ee)),le=Array.from(new Set([...B,...V])),fe=s===null?Ee:String(s??""),$e=fe.split(/[\\/]/).pop()??fe,Re=le.includes(fe)||le.includes($e),T=s!=null&&fe!==""&&!Re,A=Re?le.includes(fe)?fe:$e:fe,O=[];(s===null||Ie)&&O.push({value:Ee,label:"None"}),T&&O.push({value:fe,label:fe,isMissing:!0}),O.push(...le.map(ee=>({value:ee,label:ee})));const te=O.find(ee=>ee.value===A)??null,X=de.filter(ee=>ee!==null).length,pe=x?!0:W&&!(X>0&&X<5),Y=me&&Ae==="input",ue=ee=>{const se=ee.replace(/\\/g,"/"),xe=se.lastIndexOf("/"),Ue=xe>=0?se.slice(xe+1):se,Le=xe>=0?se.slice(0,xe):"";return mo(Ue,Le,"input")},_=y.useMemo(()=>Y?{DropdownIndicator:null,IndicatorSeparator:null,Option:se=>{const{data:xe}=se,Le=xe.value!==Ee&&!xe.isMissing&&!!xe.value?ue(xe.value):null;return u.jsx(Qb.Option,{...se,children:u.jsxs("div",{className:"flex items-center gap-2",children:[Le&&u.jsx("img",{src:Le,alt:"",className:"w-[72px] h-[72px] rounded-sm object-cover bg-gray-100 shrink-0",loading:"lazy",decoding:"async"}),u.jsx("span",{className:"truncate",children:xe.label})]})})}}:{DropdownIndicator:null,IndicatorSeparator:null},[Y]),U=["rs-container",m?"rs-has-pin":"rs-no-pin",b?"rs-error":"",T?"rs-missing":"",c?"rs-disabled":""].filter(Boolean).join(" "),R=typeof document>"u"?null:document.body,D=()=>{N(!1),w?.()},G=ee=>{ee&&i(ee.value===Ee?null:ee.value)},K=ee=>{G(ee),D()},Oe=()=>{c||z||H.current?.click()},Ne=async ee=>{const se=ee.target.files?.[0];if(se){I(!0);try{const xe=await Yy(se,{type:Ae}),Ue=xe.subfolder?`${xe.subfolder}/${xe.name}`:xe.name;L(Le=>Le.includes(Ue)?Le:[...Le,Ue]);try{const Le=await Yf();k(Le)}catch{}i(Ue)}catch(xe){console.error("Failed to upload image:",xe)}finally{I(!1),ee.target.value=""}}},we=me?u.jsx("button",{type:"button",className:`w-full py-2 px-3 rounded-lg border text-sm font-medium transition-colors ${c||z?"opacity-60 cursor-not-allowed border-gray-200 text-gray-400 bg-white":"border-gray-200 text-gray-700 bg-white hover:border-gray-300 hover:text-gray-900"}`,onClick:Oe,disabled:c||z,children:u.jsxs("span",{className:"inline-flex items-center justify-center gap-2",children:[u.jsx(Gr,{className:"w-4 h-4"}),z?"Uploading...":"Load from camera roll"]})}):null,J=Ct.text.primary,ke=Ct.text.secondary;return pe?u.jsxs("div",{className:`${n} combo-control-root combo-control-modal`,children:[!f&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o}),u.jsxs("div",{className:`combo-control-trigger relative w-full p-3 comfy-input text-base flex items-center justify-between min-h-[46px] ${c?"opacity-60 cursor-not-allowed":""} ${b?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!c&&N(!0),children:[u.jsx("span",{className:`combo-control-trigger-label truncate min-w-0 flex-1 ${te?"text-gray-900":"text-gray-400 dark:text-gray-500"} ${m?"pr-16":"pr-6"}`,style:te&&S?{color:Ct.text.onDark}:void 0,children:te?te.label:"Select..."}),u.jsxs("div",{className:"combo-control-trigger-icons flex items-center absolute right-0 top-0 bottom-0 pointer-events-none",children:[u.jsx("div",{className:"combo-control-chevron px-2 text-gray-400",children:u.jsx(bu,{className:"w-5 h-5"})}),m&&u.jsx("div",{className:"combo-control-pin pointer-events-auto px-2",children:u.jsx(el,{isPinned:p,onToggle:g})})]})]}),T&&u.jsx("div",{className:"mt-1 text-xs text-red-700",children:"Missing on ComfyUI server"}),me&&u.jsxs("div",{className:"combo-control-upload mt-2",children:[we,u.jsx("input",{ref:H,type:"file",accept:"image/*",className:"hidden",onChange:Ne})]}),u.jsx(dp,{title:o,isOpen:$,onClose:D,children:u.jsx(Ey,{className:U,classNamePrefix:"rs",options:O,value:te,onChange:K,isSearchable:!0,autoFocus:!x,menuIsOpen:x?void 0:!0,controlShouldRenderValue:!0,placeholder:"Search...",filterOption:Uf({ignoreAccents:!0,ignoreCase:!0,trim:!0,matchFrom:"any"}),styles:{menu:ee=>({...ee,position:"static",boxShadow:"none",border:"none",marginTop:"0.5rem",borderRadius:0,backgroundColor:S?Ct.transparent:Ct.surface.white}),menuList:ee=>({...ee,maxHeight:"calc(100vh - 160px)",height:"auto",paddingBottom:"2rem",overflowY:"auto",overflowX:"auto",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",touchAction:"pan-y"}),option:(ee,se)=>S?ee:{...ee,color:J,backgroundColor:se.isSelected?Ct.surface.gray200:se.isFocused?Ct.surface.gray100:Ct.transparent},singleValue:ee=>({...ee,color:S?ee.color:J}),input:ee=>({...ee,color:S?ee.color:J}),placeholder:ee=>({...ee,color:S?ee.color:ke}),control:ee=>({...ee,borderColor:Ct.border.focusBlue,boxShadow:`0 0 0 1px ${Ct.border.focusBlue}`,backgroundColor:S?ee.backgroundColor:Ct.surface.white,color:S?ee.color:J})},components:_,noOptionsMessage:()=>"No matches"})})]}):u.jsxs("div",{className:`${n} combo-control-root combo-control-inline`,children:[!f&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o}),u.jsxs("div",{className:"combo-control-input-wrapper relative rs-scroll-target",ref:E,children:[u.jsx(Ey,{className:U,classNamePrefix:"rs",options:O,value:te,onChange:G,isSearchable:!0,isDisabled:c,filterOption:Uf({ignoreAccents:!0,ignoreCase:!0,trim:!0,matchFrom:"any"}),menuPortalTarget:R,menuPosition:"fixed",menuPlacement:"bottom",menuShouldScrollIntoView:!1,styles:{menuPortal:ee=>({...ee,zIndex:200}),menuList:ee=>({...ee,overflowY:"auto",overflowX:"auto",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",touchAction:"pan-y"}),option:(ee,se)=>S?ee:{...ee,color:J,backgroundColor:se.isSelected?Ct.surface.gray200:se.isFocused?Ct.surface.gray100:Ct.transparent},singleValue:ee=>({...ee,color:S?ee.color:J}),input:ee=>({...ee,color:S?ee.color:J}),placeholder:ee=>({...ee,color:S?ee.color:ke})},components:_,noOptionsMessage:()=>"No matches"}),u.jsxs("div",{className:"combo-control-icons absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:[u.jsx("div",{className:"combo-control-chevron px-2 text-gray-400",children:u.jsx(bu,{className:"w-5 h-5"})}),m&&u.jsx("div",{className:"combo-control-pin pointer-events-auto px-2",children:u.jsx(el,{isPinned:p,onToggle:g})}),!m&&u.jsx("div",{className:"w-3"})]})]}),T&&u.jsx("div",{className:"mt-1 text-xs text-red-700",children:"Missing on ComfyUI server"}),me&&u.jsxs("div",{className:"mt-2",children:[we,u.jsx("input",{ref:H,type:"file",accept:"image/*",className:"hidden",onChange:Ne})]})]})}function _o({name:n,type:o,value:s,options:l,onChange:i,disabled:c=!1,hasError:f=!1,hideLabel:m=!1,compact:p=!1,forceModalOpen:g=!1,onModalClose:b,seedMode:x,onSeedModeChange:w,hasPin:k,isPinned:C=!1,onTogglePin:S,containerClass:j}){const[N,E]=y.useState(!1),H=()=>{c||E(!0)},V=()=>{E(!1),b?.()},L=o==="COMBO"||Array.isArray(l?.options),z=["INT","FLOAT"].includes(o.toUpperCase()),I=o.toUpperCase()==="STRING",$=n.replace(/_/g," "),W=k??(!!S||C),ie=j??"space-y-2 w-full",de=j??(p?"mb-0":"mb-3"),me={name:n,value:s,options:l,onChange:i,disabled:c,hideLabel:m,hasError:f,forceModalOpen:g,onModalClose:b,containerClass:ie,hasPin:W,isPinned:C,onTogglePin:S},Ae=()=>L?u.jsx(pf,{...me}):z?u.jsx(Af,{...me,type:o,seedMode:x,onSeedModeChange:w}):I?u.jsx(Z0,{...me}):u.jsxs("div",{className:"unsupported-widget-type text-xs text-gray-400 italic",children:["Unsupported: ",o]}),Ee=g||N;if(o==="POWER_LORA_HEADER")return u.jsx("div",{className:`${de} power-lora-header flex items-center justify-between p-3 bg-blue-50/50 dark:bg-blue-900/20 rounded-lg`,children:u.jsxs("div",{className:"power-lora-header-content flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",onChange:Ie=>i(Ie.target.checked),className:"w-5 h-5 rounded cursor-pointer",disabled:c}),u.jsx("span",{className:"power-lora-header-label text-sm font-semibold text-blue-900 dark:text-blue-100 uppercase tracking-wider",children:"Toggle All Loras"})]})});if(o==="POWER_LORA"){const Ie=s||{on:!0,lora:"",strength:1},B=l||{},le=B.choices,fe=B.showSeparate,$e=(Re,T)=>{i({...Ie,[Re]:T})};return u.jsxs("div",{className:`${de} power-lora-row flex flex-col gap-2 p-3 border border-gray-200 dark:border-gray-800 rounded-lg bg-gray-50/50 dark:bg-gray-900/50 ${Ie.on?"":"opacity-60"}`,children:[u.jsxs("div",{className:"power-lora-row-actions flex items-center gap-2",children:[u.jsx("button",{type:"button",onClick:()=>$e("on",!Ie.on),className:`power-lora-enabled-button flex-1 py-2 rounded-lg text-sm font-semibold transition-colors ${Ie.on?"bg-blue-600 text-white":"bg-gray-700 text-white"} ${c?"opacity-60 cursor-not-allowed":""}`,disabled:c,children:Ie.on?"Enabled":"Disabled"}),u.jsx("button",{type:"button",onClick:()=>i(null),className:`power-lora-remove-button flex-1 py-2 rounded-lg text-sm font-semibold bg-red-600 text-white hover:bg-red-700 transition-colors ${c?"opacity-60 cursor-not-allowed":""}`,disabled:c,children:"Remove"})]}),u.jsx("div",{className:"power-lora-row-header flex items-center gap-3",children:u.jsx("div",{className:"power-lora-select flex-grow min-w-0",children:u.jsx(_o,{name:"",hideLabel:!0,compact:!0,type:"COMBO",value:Ie.lora,options:le,onChange:Re=>$e("lora",Re),disabled:c})})}),u.jsxs("div",{className:"power-lora-strengths flex flex-col",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 ml-1",children:fe?"Model strength":"Strength"}),u.jsx("div",{className:"power-lora-strength-row flex items-center gap-3",children:u.jsx("div",{className:"power-lora-strength-input flex-grow",children:u.jsx(_o,{name:"",hideLabel:!0,compact:!0,type:"FLOAT",value:Ie.strength,options:{min:-10,max:10,step:.01},onChange:Re=>$e("strength",Re),disabled:c})})}),fe&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 ml-1",children:"Clip strength"}),fe&&u.jsx("div",{className:"power-lora-strength-row flex items-center gap-3",children:u.jsx("div",{className:"power-lora-strength-input flex-grow",children:u.jsx(_o,{name:"",hideLabel:!0,compact:!0,type:"FLOAT",value:Ie.strengthTwo??Ie.strength,options:{min:-10,max:10,step:.01},onChange:Re=>$e("strengthTwo",Re),disabled:c})})})]})]})}if(o==="POWER_LORA_ADD"){const Ie=()=>{i({on:!0,lora:"None",strength:1,model_strength:1,clip_strength:1})};return u.jsx("div",{className:`${de} power-lora-add`,children:u.jsxs("button",{onClick:Ie,className:"w-full py-2 px-4 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg text-sm font-medium text-gray-500 hover:text-blue-500 hover:border-blue-500 transition-all flex items-center justify-center gap-2",disabled:c,children:[u.jsx(Gr,{className:"w-5 h-5"}),"Add Lora"]})})}return I?u.jsx(Z0,{...me}):L?u.jsx(pf,{...me}):z?u.jsx(Af,{...me,type:o,seedMode:x,onSeedModeChange:w}):o.toUpperCase()==="BOOLEAN"?u.jsx(pf,{...me,value:String(!!s),options:["true","false"],onChange:Ie=>i(String(Ie).toLowerCase()==="true")}):u.jsxs("div",{id:`widget-control-${n}`,className:`widget-control-root ${p?"compact-control":""}`,children:[!m&&u.jsxs("div",{id:`widget-label-container-${n}`,className:"flex items-center justify-between mb-1.5 px-1",children:[u.jsx("label",{id:`widget-label-${n}`,className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider truncate mr-2",children:$}),f&&u.jsx("div",{id:`widget-error-icon-${n}`,className:"text-red-500",title:"Error in this input",children:u.jsx(ab,{className:"w-3.5 h-3.5"})})]}),u.jsx("div",{id:`widget-trigger-${n}`,className:`
          control-trigger
          relative flex items-center justify-between
          bg-gray-50 border border-gray-200 rounded-xl px-3 py-2.5
          active:bg-gray-100 active:border-gray-300 transition-all
          ${c?"opacity-50 grayscale pointer-events-none":"cursor-pointer"}
          ${f?"border-red-300 bg-red-50/30":""}
        `,onClick:H,children:u.jsx("div",{id:`widget-value-display-${n}`,className:"value-display flex-1 truncate text-sm font-medium text-gray-900",children:L?s||"Select...":s!=null?String(s):"Empty"})}),u.jsx(dp,{isOpen:Ee,title:$,onClose:V,children:u.jsx("div",{id:`modal-control-wrapper-${n}`,className:"p-2",children:Ae()})})]})}function f4({node:n,isBypassed:o,isKSampler:s,workflowExists:l,nodeTypesExists:i,visibleInputWidgets:c,visibleWidgets:f,errorInputNames:m,onUpdateNodeWidget:p,onUpdateNodeWidgets:g,getWidgetIndexForInput:b,findSeedWidgetIndex:x,setSeedMode:w,isWidgetPinned:k,toggleWidgetPin:C}){const S=Array.isArray(n.widgets_values)?n.widgets_values:[],j=ce(O=>O.nodeTypes),N=ce(O=>O.workflow),E=ce(O=>O.bypassAllInContainer),H=$n(O=>O.seedModes[n.id]),V=$n(O=>O.seedLastValues[n.id]??null),L=n.type==="Fast Groups Bypasser (rgthree)",z=!s&&l&&i?x():null,I=z!==null?z+1:null,$=I!==null?S[I]:void 0,W=typeof $=="string",ie=!s&&z!==null&&!W,de=ie?c.filter(O=>O.name!=="seed"&&O.name!=="noise_seed"):c,me=ie?f.filter(O=>O.name!=="seed"&&O.name!=="noise_seed"):f,Ae=f.length>0||c.length>0,Ee=y.useMemo(()=>{if(!L||!N)return[];const O=n.properties??{},te=typeof O.matchColors=="string"?O.matchColors:"",X=typeof O.matchTitle=="string"?O.matchTitle:"",pe=O.showAllGraphs!==!1,Y=typeof O.sort=="string"?O.sort:"position",ue=typeof O.customSortAlphabet=="string"?O.customSortAlphabet:"",_=Ct.workflow.fastGroupBypassColors,U=te.split(",").map(se=>se.trim()).filter(Boolean).flatMap(se=>K0(se,_)),R=new Set(U),D=U.map(se=>ga(se)??pb(se)).filter(se=>!!se).map(se=>U0(se)).filter(se=>!!se);let G=null;if(X.trim())try{G=new RegExp(X,"i")}catch(se){return console.error(se),[]}let K=null;if(Y==="custom alphabet"){const se=ue.replace(/\n/g,"").trim().toLowerCase();se&&(K=se.includes(",")?se.split(",").map(xe=>xe.trim()).filter(Boolean):se.split("")),K?.length||(K=null)}const Oe=new Map(N.nodes.map(se=>[se.id,se])),Ne=[],we=se=>{if(R.size>0){const xe=se.color?K0(se.color,_):[],Ue=se.color?ga(se.color):null,Le=Ue?U0(Ue):null,Ve=xe.some(Se=>R.has(Se))||(Ue?R.has(Ue):!1),F=!!(Le&&D.some(Se=>{const Be=Math.abs(Se.h-Le.h);return Math.min(Be,360-Be)<=25}));if(!Ve&&!F)return!1}return!(G&&!G.test(se.title||""))},J=(se,xe)=>{if(!we(se))return;const Ue=se.stableKey??null;if(!Ue)return;const Le=Mf(N,se.id,xe);let Ve=!1;for(const F of Le){const Se=Oe.get(F);if(!(!Se||Se.mode===4)){Ve=!0;break}}Ne.push({key:`${xe??"root"}-${se.id}`,label:se.title?.trim()||`Group ${se.id}`,stableKey:Ue,color:se.color,isEngaged:Ve,isDisabled:Le.size===0,group:se})},ke=n.properties?.__mobile_origin,ee=ke?.scope==="subgraph"?ke.subgraphId:null;if(pe){for(const se of N.groups??[])J(se,null);for(const se of N.definitions?.subgraphs??[])for(const xe of se.groups??[])J(xe,se.id)}else if(ee){const se=N.definitions?.subgraphs?.find(xe=>xe.id===ee);for(const xe of se?.groups??[])J(xe,ee)}else for(const se of N.groups??[])J(se,null);return Y==="alphanumeric"?Ne.sort((se,xe)=>se.label.localeCompare(xe.label)):K?.length?Ne.sort((se,xe)=>{const Ue=se.label.toLowerCase(),Le=xe.label.toLowerCase();let Ve=-1,F=-1;for(const[Se,Be]of K.entries())if(Ve<0&&Ue.startsWith(Be)&&(Ve=Se),F<0&&Le.startsWith(Be)&&(F=Se),Ve>-1&&F>-1)break;if(Ve>-1&&F>-1){const Se=Ve-F;return Se===0?Ue.localeCompare(Le):Se}return Ve>-1?-1:F>-1?1:Ue.localeCompare(Le)}):Ne.sort((se,xe)=>{const Ue=se.group.bounding,Le=xe.group.bounding;return Ue[1]!==Le[1]?Ue[1]-Le[1]:Ue[0]-Le[0]}),Ne},[L,n.properties,N]),Ie=O=>()=>{O.isDisabled||E(O.stableKey,O.isEngaged)},B=O=>{typeof O=="string"&&["fixed","randomize","increment","decrement"].includes(O)&&w(n.id,O)},le=O=>te=>{p(O,te),B(te)},fe=O=>te=>{p(O,te,"seed"),w(n.id,"fixed")},$e=O=>()=>{if(!j)return;const te=ca(j,n);p(O,te,"seed"),w(n.id,"fixed")},Re=O=>()=>{typeof V=="number"&&(p(O,V,"seed"),w(n.id,"fixed"))},T=O=>te=>{p(O.widgetIndex,te,O.name)},A=O=>te=>{if(O.type==="POWER_LORA_HEADER"&&typeof te=="boolean"){const{loraIndices:X}=O.options||{};if(X){const pe={},Y=n.widgets_values;Array.isArray(Y)&&(X.forEach(ue=>{const _=Y[ue];pe[ue]={..._,on:te}}),g(pe))}}else p(O.widgetIndex,te,O.name)};return!Ae&&Ee.length===0?null:u.jsxs("div",{className:"node-parameters mb-2",children:[Ee.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-300 mb-1.5 uppercase tracking-wide",children:"Groups"}),u.jsx("div",{className:"space-y-2",children:Ee.map(O=>u.jsxs("div",{className:`flex items-center justify-between gap-3 rounded-lg border px-3 py-2 bg-gray-50/40 dark:bg-gray-900/60 ${O.isDisabled?"border-gray-200 dark:border-white/10 opacity-60":"border-gray-200 dark:border-white/15"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[u.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:O.color||Ct.workflow.defaultGroupDot}}),u.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-100 truncate",children:O.label})]}),u.jsx("button",{type:"button",role:"switch","aria-checked":O.isEngaged,onClick:Ie(O),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${O.isEngaged?"bg-emerald-500":"bg-gray-300"} ${O.isDisabled?"cursor-not-allowed":"cursor-pointer"}`,children:u.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition ${O.isEngaged?"translate-x-5":"translate-x-1"}`})})]},O.key))})]}),Ae&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Parameters"}),s&&l&&i&&(()=>{const O=b("seed");if(O===null)return null;const te=S[O],X=O+1,pe=S[X],Y=["fixed","increment","decrement","randomize"],_=!!n.inputs.find(U=>U.name==="noise_seed")?.link;return u.jsxs("div",{className:"mb-3",children:[u.jsx(_o,{name:"seed",type:"INT",value:te,onChange:U=>p(O,U,"seed"),disabled:o,hasError:m.has("seed")}),X<S.length&&!_&&u.jsx(_o,{name:"Control mode",type:"COMBO",value:pe,options:Y,onChange:le(X)})]})})(),!s&&l&&i&&(()=>{const O=z;if(O===null)return null;const te=["fixed","randomize","increment","decrement"],X=typeof $=="string"&&!te.includes($)?[...te,$]:te;if(n.inputs.find(we=>we.name==="seed"||we.name==="noise_seed")?.link!=null)return null;if(W){const we=O+1;return u.jsx("div",{className:"mb-3",children:u.jsx(_o,{name:"Seed control",type:"COMBO",value:$,options:X,onChange:le(we)})})}const ue=c.find(we=>we.name==="seed"||we.name==="noise_seed")?.options??{},_=typeof ue.min=="number"?ue.min:void 0,U=typeof ue.max=="number"?ue.max:void 0,R=typeof ue.step=="number"?ue.step:void 0,D=Number(S[O]??0),G=Qy(D),K=H??G??"fixed",Oe=Jf(D)?typeof V=="number"?V:0:D,Ne=m.has("seed")||m.has("noise_seed");return u.jsxs("div",{className:"mb-3",children:[u.jsx(Af,{name:"seed",value:Oe,onChange:fe(O),disabled:o,min:_,max:U,step:R,hasError:Ne}),u.jsx(_o,{name:"Seed control",type:"COMBO",value:K,options:te,onChange:B}),u.jsxs("div",{className:"grid gap-2 mt-2",children:[u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:()=>w(n.id,"randomize"),disabled:o,children:"Randomize each time"}),u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:$e(O),disabled:o,children:"New fixed random"}),u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:Re(O),disabled:o||typeof V!="number",children:"Use last queued seed"})]})]})})(),de.map(O=>u.jsx("div",{className:o?"opacity-80":"",children:u.jsx(_o,{name:O.name,type:O.type,value:O.value,options:O.options,onChange:T(O),disabled:o,isPinned:k(O.widgetIndex),onTogglePin:()=>C(O.widgetIndex,O.name,O.type,O.options),hasError:m.has(O.name)})},`input-widget-${O.name}`)),me.map(O=>u.jsx("div",{className:o?"opacity-80":"",children:u.jsx(_o,{name:O.name,type:O.type,value:O.value,options:O.options,onChange:A(O),disabled:o,isPinned:k(O.widgetIndex),onTogglePin:()=>C(O.widgetIndex,O.name,O.type,O.options),hasError:m.has(O.name)})},`widget-${O.widgetIndex}`)),n.type==="PrimitiveNode"&&(()=>{const O=n.outputs?.[0]?.type,te=String(O).toUpperCase();if(te!=="INT"&&te!=="FLOAT"||S.length<2)return null;const X=S[1],pe=["fixed","increment","decrement","randomize"];return u.jsx("div",{className:"mb-3",children:u.jsx(_o,{name:"Control mode",type:"COMBO",value:X,options:pe,onChange:Y=>p(1,Y),disabled:o})})})()]})]})}function p4(n,o,s){if(!o)return null;const l=Fr(n,o,s,"image")??Fr(n,o,s,"filename")??Fr(n,o,s,"file");if(l==null||!Array.isArray(s.widgets_values))return null;const i=s.widgets_values[l];return h4(i)}function h4(n){if(typeof n=="string"&&n.trim()){const{filename:m,subfolder:p}=Iy(n.trim());return{filename:m,subfolder:p,type:"input"}}if(!n||typeof n!="object")return null;const o=n,s=typeof o.filename=="string"?o.filename:typeof o.name=="string"?o.name:null;if(!s||!s.trim())return null;const l=typeof o.subfolder=="string"?o.subfolder:"",i=typeof o.type=="string"?o.type:"input",{filename:c,subfolder:f}=Iy(s.trim());return{filename:c,subfolder:l||f,type:i}}function Iy(n){const o=n.replace(/^\/+/,""),s=o.split("/").filter(Boolean);return s.length<=1?{filename:o,subfolder:""}:{filename:s.pop()??o,subfolder:s.join("/")}}const m4=[],g4=y.memo(function({node:o,isExecuting:s,isConnectionHighlighted:l=!1,errorBadgeLabel:i,onImageClick:c,inGroup:f=!1,onMoveNode:m}){const p=ce(ne=>ne.nodeTypes),g=ce(ne=>ne.workflow),b=ce(ne=>ne.updateNodeWidget),x=ce(ne=>ne.updateNodeWidgets),w=ce(ne=>ne.updateNodeTitle),k=ce(ne=>ne.toggleBypass),C=ce(ne=>ne.setItemCollapsed),S=ce(ne=>ne.setItemHidden),j=ce(ne=>ne.collapsedItems),N=o.stableKey??null,E=ce(ne=>ne.setConnectionHighlightMode),H=ce(ne=>ne.connectionHighlightModes[o.id]??"off"),V=$n(ne=>ne.setSeedMode),L=ce(ne=>ne.currentWorkflowKey),z=ho(ne=>ne.pinnedWidget?.nodeId===o.id?ne.pinnedWidget:null),I=ho(ne=>ne.setPinnedWidget),$=Fn(ne=>ne.bookmarkedItems),W=Fn(ne=>ne.toggleBookmark),ie=ce(ne=>ne.nodeOutputs[String(o.id)]),de=ln(ne=>ne.nodeErrors[String(o.id)]),me=ce(ne=>ne.progress),Ae=ce(ne=>ne.executingPromptId),Ee=ce(ne=>ne.workflowDurationStats),Ie=ce(ne=>ne.isExecuting),B=jt(ne=>ne.running),le=Ae||(B[0]?.prompt_id??null),fe=ka({workflow:g,runKey:le,isRunning:Ie||B.length>0,workflowDurationStats:Ee}),$e=fe===100?100:me,Re=y.useCallback((ne,Fe)=>{N&&V(ne,Fe,{workflow:g,nodeTypes:p,updateNodeWidgets:(Ze,lt)=>x(N,lt)})},[N,p,V,x,g]),T=y.useCallback(ne=>{I(ne,L)},[L,I]),A=ie??m4,[O,te]=y.useState(null),{errorPopoverOpen:X,setErrorPopoverOpen:pe,resetErrorPopover:Y}=lS(),ue=y.useRef(null),[_,U]=y.useState(!1),[R,D]=y.useState(!1),[G,K]=y.useState(""),Oe=y.useRef(null),Ne=y.useRef(0),we=y.useRef(null),[J,ke]=y.useState(null),[ee,se]=y.useState(!1),xe=ce(ne=>ne.deleteNode);y.useEffect(()=>{const ne=Fe=>{const Ze=Fe.detail;if(Ze.nodeId===o.id){ke(Ze.label);const lt=setTimeout(()=>ke(null),1e3);return()=>clearTimeout(lt)}};return window.addEventListener("node-show-label",ne),()=>window.removeEventListener("node-show-label",ne)},[o.id]);const Ue=de&&de.length>0,Le=y.useMemo(()=>de?new Set(de.map(ne=>ne.inputName).filter(ne=>!!ne)):new Set,[de]),Ve=A.length>0?A[A.length-1]:null,F=Ve?`${Ve.filename}|${Ve.subfolder}|${Ve.type}`:null,Se=O?`${O.filename}|${O.subfolder}|${O.type}`:null;y.useEffect(()=>{if(!Ve||F===Se)return;const ne=mo(Ve.filename,Ve.subfolder,Ve.type),Fe=new Image;Fe.onload=()=>te(Ve),Fe.src=ne},[F,Se,Ve]);const Be=p?.[o.type],Ge=y.useMemo(()=>{const ne=o.title;return typeof ne=="string"&&ne.trim()?ne.trim():null},[o]),et=Ge||Be?.display_name||o.type,Ye=o.type==="KSampler",rt=o.mode===4,Pe=N?!!j[N]:!1,qe=/LoadImage/i.test(o.type),pt=y.useMemo(()=>!qe||!g||!p?null:p4(g,p,o),[qe,o,p,g])??O,Mt=y.useMemo(()=>{const ne=ep(p,o);return Ye?ne.filter(Fe=>Fe.name!=="seed"):ne},[p,o,Ye]),Wt=y.useMemo(()=>tp(p,o),[p,o]),Yt=y.useMemo(()=>Wt.filter(ne=>!ne.connected),[Wt]),be=y.useMemo(()=>Mt.filter(ne=>!ne.connected),[Mt]),Q=y.useMemo(()=>{const ne=o.properties,Fe=["text","note","description","label","title"];if(ne)for(const lt of Fe){const It=ne[lt];if(typeof It=="string"&&It.trim())return It}if(/note|comment|sticky|label/i.test(o.type)&&Array.isArray(o.widgets_values)){const lt=o.widgets_values.find(It=>typeof It=="string"&&It.trim());if(typeof lt=="string"&&lt.trim())return lt}return null},[o.properties,o.widgets_values,o.type]),re=y.useMemo(()=>{if(!/note|comment|sticky|label/i.test(o.type)||!Array.isArray(o.widgets_values))return null;const Fe=o.widgets_values.findIndex(Ze=>typeof Ze=="string"&&Ze.trim());return Fe>=0?Fe:null},[o.type,o.widgets_values]),ge=ne=>!g||!p?null:Fr(g,p,o,ne),Te=()=>!g||!p?null:nl(g,p,o),Ke=ne=>{re!==null&&N&&b(N,re,ne)},Me=y.useMemo(()=>{if(!Q)return null;const ne=[],Fe=/(https?:\/\/[^\s]+)/g;let Ze=0,lt,It=0;for(;(lt=Fe.exec(Q))!==null;){const[Zt]=lt,On=lt.index;On>Ze&&ne.push(Q.slice(Ze,On)),ne.push(u.jsx("a",{href:Zt,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline break-all",children:Zt},`note-link-${It++}`)),Ze=On+Zt.length}return Ze<Q.length&&ne.push(Q.slice(Ze)),ne},[Q]),it=()=>{const ne=Date.now();ne-Ne.current<300&&U(!0),Ne.current=ne},tt=y.useMemo(()=>{const ne=[];return Yt.forEach(Fe=>{ne.push({widgetIndex:Fe.widgetIndex,name:Fe.name,type:Fe.type,options:Fe.options})}),be.forEach(Fe=>{ne.push({widgetIndex:Fe.widgetIndex,name:Fe.name,type:Fe.type,options:Fe.options})}),ne},[Yt,be]),nt=y.useCallback(ne=>{if(ne.link!=null)return!1;if(ne.widget)return!0;const Fe=Be?.input?.required?.[ne.name]||Be?.input?.optional?.[ne.name];if(!Fe)return!1;const[Ze,lt]=Fe;if(Array.isArray(Ze))return!0;const It=String(Ze).toUpperCase(),Zt=Object.prototype.hasOwnProperty.call(lt??{},"default");return["INT","FLOAT","BOOLEAN","STRING"].includes(It)||Zt},[Be]),st=y.useMemo(()=>o.inputs.filter(ne=>!(nt(ne)||String(ne.type).toUpperCase()==="OPT_CONNECTION"&&ne.link==null)),[o.inputs,nt]),wt=y.useMemo(()=>o.outputs.filter(ne=>!((ne.name||"").toLowerCase().replace(/[_\s]/g,"")==="showhelp"||String(ne.type).toUpperCase()==="OPT_CONNECTION"&&!ne.links?.length)),[o.outputs]),gt=o.outputs.some(ne=>String(ne.type).toUpperCase()==="IMAGE"),St=!!(Be?.output_node||/PreviewImage|SaveImage|SaveAnimatedPNG|SaveAnimatedWEBP|SaveVideo/i.test(o.type)),yt=ne=>z?.widgetIndex===ne,ft=(ne,Fe,Ze,lt)=>{yt(ne)?T(null):T({nodeId:o.id,widgetIndex:ne,widgetName:Fe,widgetType:Ze,options:lt})},Et=tt.length===1?tt[0]:null,Ot=Et?yt(Et.widgetIndex):!1,on=!!z,Gt=N?$.includes(N):!1,dn=$.length<5||Gt,pn=(gt||St)&&!!pt,Wn=o.inputs?.filter(ne=>ne.link!=null).length??0,Kn=o.outputs?.reduce((ne,Fe)=>ne+(Fe.links?.length??0),0)??0,no=Wn>0||Kn>0,oo=Math.min(3,Wn),P=Math.min(3,Kn),De=pt?(()=>{const{filename:ne,subfolder:Fe,type:Ze}=pt,lt=mo(ne,Fe,Ze),It=Fe?`${Fe}/${ne}`:ne,Zt=ja(ne);return[{src:lt,alt:et,filename:ne,mediaType:Zt,file:{id:`${Ze}/${It}`,name:ne,type:Zt==="video"?"video":"image",fullUrl:lt}}]})():[];y.useEffect(()=>{if(!R)return;const ne=Oe.current;ne&&(ne.focus(),ne.select())},[R]);const oe=()=>{K(et),D(!0)},Je=()=>{const ne=G.trim();N&&(w(N,ne.length>0?ne:null),D(!1))},Xe=y.useCallback((ne,Fe,Ze)=>{N&&b(N,ne,Fe,Ze)},[N,b]),Qe=y.useCallback(ne=>{N&&x(N,ne)},[N,x]),We=!!(J&&!/^error\b/i.test(J));return u.jsxs("div",{id:`node-card-wrapper-${o.id}`,className:"relative node-card-outer",children:[u.jsx("div",{id:`node-anchor-${o.id}`,className:"absolute -top-3 left-0 right-0 h-0 node-scroll-anchor"}),We&&u.jsx(hS,{label:J??""}),i&&u.jsx("div",{className:"absolute top-2 right-2 z-[110] animate-in fade-in duration-150",children:u.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg whitespace-nowrap uppercase tracking-tighter ring-2 ring-white",children:i})}),u.jsxs("div",{id:`node-card-${o.id}`,className:`
        node-card-inner
        ${f?"rounded-lg shadow-sm py-1":"rounded-xl shadow-md px-2 py-1 mb-3"}
        border-2
        ${Ue?"border-red-700 shadow-red-200":l?"border-orange-500 shadow-orange-200":s?"border-green-500 shadow-green-200":rt?"border-purple-300":"border-transparent"}
        ${rt?Pe?"bg-purple-200":"bg-purple-100/50":"bg-white"}
      `,style:{overflow:"visible"},children:[u.jsx(fS,{nodeId:o.id,displayName:et,isEditingLabel:R,labelValue:G,labelInputRef:Oe,onLabelChange:K,onLabelBlur:Je,isCollapsed:Pe,isBypassed:rt,isExecuting:s,overallProgress:fe,hasErrors:Ue,errorIconRef:we,errorPopoverOpen:X,setErrorPopoverOpen:pe,toggleNodeFold:()=>{N&&C(N,!Pe)},rightSlot:u.jsx(iS,{nodeId:o.id,nodeStableKey:N,isBypassed:rt,onEditLabel:oe,pinnableWidgets:tt,singlePinnableWidget:Et,isSingleWidgetPinned:Ot,hasPinnedWidget:on,toggleWidgetPin:ft,setPinnedWidget:T,isNodeBookmarked:Gt,canAddNodeBookmark:dn,onToggleNodeBookmark:()=>N?W(N):void 0,toggleBypass:k,setItemHidden:S,onDeleteNode:()=>se(!0),onMoveNode:m??(()=>{}),connectionHighlightMode:H,setConnectionHighlightMode:E,leftLineCount:oo,rightLineCount:P})}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${Pe?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`collapse-container overflow-hidden transition-opacity px-1 duration-200 ease-out ${Pe?"opacity-0":"opacity-100"}`,children:[Ge&&u.jsx("div",{className:"node-card-subtitle text-[10px] text-center font-semibold uppercase tracking-wider text-gray-400 mb-2 px-1",children:Be?.display_name||o.type}),u.jsxs("div",{id:`node-content-${o.id}`,className:`node-expanded-content ${rt?"opacity-60 grayscale":""}`,children:[u.jsx(wS,{nodeId:o.id,nodeType:o.type,inputs:st,outputs:wt,allInputs:o.inputs,allOutputs:o.outputs}),u.jsx(f4,{node:o,isBypassed:rt,isKSampler:Ye,workflowExists:!!g,nodeTypesExists:!!p,visibleInputWidgets:Yt,visibleWidgets:be,errorInputNames:Le,onUpdateNodeWidget:Xe,onUpdateNodeWidgets:Qe,getWidgetIndexForInput:ge,findSeedWidgetIndex:Te,setSeedMode:Re,isWidgetPinned:yt,toggleWidgetPin:ft}),Q&&u.jsx(cS,{noteText:Q,noteLinkified:Me,noteWidgetIndex:re,isEditingNote:_,setIsEditingNote:U,onUpdateNote:Ke,noteTextareaRef:ue,onNoteTap:it}),u.jsx(dS,{show:pn,previewImage:pt,displayName:et,onImageClick:()=>c?.(De,0),isExecuting:!!s,overallProgress:fe,displayNodeProgress:$e})]})]})})]}),u.jsx(uS,{nodeId:o.id,open:X&&Ue,errors:de??[],anchorRef:we,onClose:Y}),ee&&u.jsx(pS,{nodeId:o.id,displayName:et,hasConnections:no,onCancel:()=>se(!1),onDelete:ne=>{N&&xe(N,ne),se(!1)}})]})});function y4({onClick:n}){return u.jsxs("button",{type:"button",onClick:n,className:"w-full mb-3 py-4 rounded-xl border-2 border-dashed border-gray-300 flex items-center justify-center gap-2 text-sm font-medium text-gray-400 hover:border-gray-400 hover:text-gray-500 active:bg-gray-50 transition-colors",children:[u.jsx(Gr,{className:"w-4 h-4"}),"Add node"]})}function Ly({id:n,headerId:o,title:s,nodeCount:l,backgroundColor:i,borderColor:c,textClassName:f,className:m=""}){const p=()=>{document.getElementById(o)?.scrollIntoView({behavior:"smooth",block:"start"})};return u.jsx("div",{id:n,className:`px-3 py-1.5 -mx-1 rounded-b-xl cursor-pointer ${m}`,onClick:p,style:{backgroundColor:i,borderColor:c},children:u.jsxs("div",{className:"flex items-center justify-between gap-3",children:[u.jsx("span",{className:`text-xs select-none ${f}`,children:s}),typeof l=="number"&&u.jsxs("span",{className:`text-xs select-none ${f}`,children:[l," node",l!==1?"s":""]})]})})}function Ay({containerType:n,containerId:o,title:s,nodeCount:l,isCollapsed:i,hiddenNodeCount:c,isBookmarked:f,canShowBookmarkAction:m,foldAllLabel:p,backgroundColor:g,borderColor:b,onToggleCollapse:x,onToggleFoldAll:w,onToggleBookmark:k,onBypassAll:C,onHide:S,onAddNode:j,onDelete:N,onShowHiddenNodes:E,onMove:H,onCommitTitle:V}){const[L,z]=y.useState(!1),[I,$]=y.useState(!1),[W,ie]=y.useState(""),de=y.useRef(null),me=y.useRef(null),Ae=y.useRef(null),{menuStyle:Ee,resetMenuPosition:Ie}=cp({open:L,buttonRef:Ae,menuRef:me}),B=s.trim()||`${n} ${o}`,le=c>0,fe=f||m,$e=n==="subgraph"?"text-blue-600":"text-gray-500",Re=()=>{z(!1),Ie()};il({open:L,onDismiss:()=>{z(!1),Ie()},triggerRef:Ae,contentRef:me,ignoreScrollWithinContent:!0}),y.useEffect(()=>{if(!I)return;const A=de.current;A&&(A.focus(),A.select())},[I]);const T=()=>{I||x()};return u.jsxs("div",{id:`${n}-header-${o}`,className:`flex items-center justify-between cursor-pointer gap-3 px-3 py-2 ${i?"rounded-xl":"rounded-t-xl mb-2"}`,style:{backgroundColor:g,borderColor:b},onClick:T,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[u.jsx("button",{onClick:A=>{A.stopPropagation(),x()},className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-500 hover:text-gray-700 shrink-0",children:i?u.jsx(hs,{className:"w-6 h-6"}):u.jsx(Jn,{className:"w-6 h-6"})}),I?u.jsx("input",{ref:de,value:W,onChange:A=>ie(A.target.value),onBlur:()=>{V(W),$(!1)},onKeyDown:A=>{(A.key==="Enter"||A.key==="Escape")&&A.currentTarget.blur()},onClick:A=>A.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{className:"font-semibold text-gray-900 select-none flex-1 min-w-0 whitespace-nowrap overflow-hidden text-ellipsis",children:B}),u.jsxs("span",{className:`text-sm shrink-0 ${$e}`,children:[l," node",l!==1?"s":""]})]}),u.jsx(Wr,{onClick:A=>{A.stopPropagation(),Ie(),z(O=>!O)},ariaLabel:`${n} options`,buttonRef:Ae,buttonSize:8,iconSize:5,icon:f?u.jsx(qr,{className:"w-5 h-5 text-blue-500"}):n==="subgraph"?u.jsx(gs,{className:"w-5 h-5 -scale-x-100 text-blue-500"}):void 0}),L&&Mn.createPortal(u.jsx("div",{ref:me,className:"fixed z-[1000] w-44",style:Ee,children:u.jsx(hr,{items:[{key:"edit-label",label:"Edit label",icon:u.jsx(sp,{className:"w-4 h-4"}),onClick:A=>{A.stopPropagation(),ie(B),$(!0),Re()}},{key:"add-node",label:"Add node",icon:u.jsx(Gr,{className:"w-4 h-4"}),onClick:A=>{A.stopPropagation(),j(),Re()}},{key:"fold-all",label:p,icon:p==="Fold all"?u.jsx(hs,{className:"w-4 h-4"}):u.jsx(Jn,{className:"w-4 h-4"}),onClick:A=>{A.stopPropagation(),w(),Re()}},{key:"bypass-all",label:"Bypass all nodes",icon:u.jsx(Ef,{isBypassed:!0,className:"w-4 h-4"}),onClick:A=>{A.stopPropagation(),C(!0),Re()}},{key:"unbypass-all",label:"Un-bypass all nodes",icon:u.jsx(Ef,{isBypassed:!1,className:"w-4 h-4"}),onClick:A=>{A.stopPropagation(),C(!1),Re()}},{key:"toggle-bookmark",label:f?"Remove bookmark":"Bookmark container",icon:f?u.jsx(qr,{className:"w-4 h-4 text-blue-500"}):u.jsx(Lu,{className:"w-4 h-4"}),onClick:A=>{A.stopPropagation(),k(),Re()},hidden:!fe},{key:"show-hidden-nodes",label:"Show hidden nodes",icon:u.jsx(Fo,{className:"w-4 h-4"}),onClick:A=>{A.stopPropagation(),E(),Re()},hidden:!le},{key:"hide-container",label:`Hide ${n}`,icon:u.jsx(Fo,{className:"w-4 h-4"}),onClick:A=>{A.stopPropagation(),S(),Re()}},{key:"move-container",label:`Move ${n}`,icon:u.jsx(fb,{className:"w-4 h-4"}),onClick:A=>{A.stopPropagation(),H(),Re()}},{key:"delete-container",label:`Delete ${n}`,icon:u.jsx(Do,{className:"w-4 h-4"}),color:"danger",onClick:A=>{A.stopPropagation(),N(),Re()}}]})}),document.body)]})}function Ry({containerType:n,containerId:o,hiddenNodeCount:s=0,borderColor:l,dashedBorderColor:i,onClick:c}){const f=n==="group"?"group":"subgraph";return u.jsx("div",{id:`${n}-placeholder-${o}`,className:"flex items-center justify-center px-4 pb-4 pt-2",style:{borderColor:l},children:u.jsxs("button",{type:"button",onClick:c,className:"w-full rounded-lg border-2 border-dashed flex flex-col items-center justify-center py-4 hover:bg-white/40 transition-colors",style:{borderColor:i},children:[u.jsx("span",{className:"text-sm text-gray-400 select-none",children:s>0?`${s} hidden node${s!==1?"s":""} in ${f}`:`No nodes in ${f}`}),u.jsxs("span",{className:"text-xs text-gray-500 select-none mt-1 inline-flex items-center gap-1",children:[u.jsx(Gr,{className:"w-3 h-3"}),"Click to add a node"]})]})})}function b4({isOpen:n,onClose:o,addInGroupId:s=null,addInSubgraphId:l=null,onNodeAdded:i}){const c=ce(k=>k.nodeTypes),f=ce(k=>k.addNode),m=ce(k=>k.scrollToNode),[p,g]=y.useState(""),b=y.useMemo(()=>c?Object.entries(c).map(([k,C],S)=>({index:S,name:k,displayName:String(C.display_name??C.name??k??""),pack:sa(String(C.python_module??C.category?.split("/")[0]??"Core")),category:String(C.category??"Other"),description:String(C.description??"")})):[],[c]),x=y.useMemo(()=>mb(b,p,k=>({displayName:k.displayName,typeName:k.name,category:k.category,pack:k.pack}),k=>k.index),[b,p]),w=k=>{const C=s==null&&l==null?void 0:{...s==null?{}:{inGroupId:s},...l==null?{}:{inSubgraphId:l}},S=f(k,C);if(o(),S!==null){i?.(S);const j=ce.getState().workflow?.nodes.find(N=>N.id===S)?.stableKey??null;j&&m(j)}};return u.jsx(gb,{isOpen:n,onClose:o,title:"Add node",searchQuery:p,onSearchQueryChange:g,searchPlaceholder:"Search node types...",children:u.jsxs("div",{className:"flex-1 overflow-auto bg-white",children:[x.length===0&&u.jsx(au,{query:p,message:"No matching node types found"}),u.jsx("div",{className:"px-3 pt-3 pb-20 flex flex-col gap-2",children:x.map(k=>u.jsx(yb,{title:k.displayName,subtitle:k.pack||"Core",onSelect:()=>w(k.name)},k.name))})]})})}function x4({containerTypeLabel:n,containerIdLabel:o,displayName:s,nodeCount:l,onCancel:i,onDeleteContainerOnly:c,onDeleteContainerAndNodes:f}){const m=n;return Mn.createPortal(u.jsx(qo,{onClose:i,title:`Delete ${m}`,description:u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"font-medium text-gray-700",children:s})," (",o,") has ",l," node",l===1?"":"s","."]}),actionsLayout:"stack",actions:[{label:`Delete ${m} only`,onClick:c,className:"w-full px-4 py-2.5 text-sm font-medium text-red-700 bg-red-50 rounded-lg hover:bg-red-100 active:bg-red-200"},{label:`Delete ${m} and nodes`,onClick:f,className:"w-full px-4 py-2.5 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 active:bg-red-800"},{label:"Cancel",onClick:i,className:"w-full px-4 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 active:bg-gray-300"}]}),document.body)}function ru(n){return String(n).split(",").map(o=>o.trim().toUpperCase()).filter(Boolean)}function _y(n){return n.toLowerCase().replace(/[_-]+/g," ").replace(/\s+/g," ").trim()}function v4(n,o){let s=0;for(const l of o)if(l===n[s]&&(s+=1,s>=n.length))return!0;return n.length===0}function hf(n,o){if(!n.trim())return!0;const s=_y(o);return _y(n).split(" ").filter(Boolean).every(l=>s.includes(l)||v4(l,s))}function w4({visible:n,onImageClick:o}){const s=ce(P=>P.workflow),l=ce(P=>P.executingNodeId),i=ce(P=>P.connectionHighlightModes),c=Fn(P=>P.bookmarkBarSide),f=Fn(P=>P.bookmarkBarTop),m=Fn(P=>P.setBookmarkBarPosition),p=Fn(P=>P.setBookmarkRepositioningActive),g=ce(P=>P.setItemCollapsed),b=ce(P=>P.scrollToNode),x=ce(P=>P.revealNodeWithParents),w=ce(P=>P.nodeTypes),k=ln(P=>P.nodeErrors),C=ce(P=>P.searchOpen),S=ce(P=>P.searchQuery),j=ce(P=>P.setSearchQuery),N=ce(P=>P.setSearchOpen),E=ce(P=>P.addNodeModalRequest),H=ce(P=>P.clearAddNodeModalRequest),V=ce(P=>P.collapsedItems),L=ce(P=>P.hiddenItems),z=ce(P=>P.setItemHidden),I=ce(P=>P.bypassAllInContainer),$=ce(P=>P.deleteContainer),W=ce(P=>P.updateContainerTitle),ie=ce(P=>P.mobileLayout),de=ce(P=>P.stableKeyByPointer),me=Fn(P=>P.bookmarkedItems),Ae=Fn(P=>P.toggleBookmark),Ee=y.useRef(null),Ie=y.useRef(null),B=y.useRef(null),le=y.useRef(null),[fe,$e]=y.useState(0),[Re,T]=y.useState(!1),[A,O]=y.useState(!1),[te,X]=y.useState(null),[pe,Y]=y.useState(!1),[ue,_]=y.useState(null),[U,R]=y.useState(null),[D,G]=y.useState(null),K=P2(),[Oe,Ne]=y.useState({}),we=y.useRef(new Map),J=y.useRef(null),ke=y.useRef(null),ee=y.useRef(null),se=y.useRef(null),xe=y.useMemo(()=>new Map((s?.nodes??[]).map(P=>[P.id,P.stableKey??null])),[s]),Ue=y.useMemo(()=>new Map((s?.definitions?.subgraphs??[]).map(P=>[P.id,P.stableKey??null])),[s]),Le=()=>{j(""),N(!1)},Ve=y.useMemo(()=>{const P=new Map,De=new Set,oe=new Set,Je=(Xe,Qe)=>{Xe.forEach(We=>{if(We.type==="node"){const ne=xe.get(We.id)??null;ne&&P.set(ne,{stableKey:ne,type:"node",nodeId:We.id,subgraphId:Qe,text:String(We.id)});return}if(We.type==="group"){const ne=de[We.stableKey];if(ne&&P.set(ne,{stableKey:ne,type:"group",groupId:We.id,subgraphId:We.subgraphId??null,groupKey:We.stableKey,text:`G${We.id}`}),De.has(We.stableKey))return;De.add(We.stableKey),Je(ie.groups[We.stableKey]??[],We.subgraphId??null);return}if(We.type==="subgraph"){const ne=Ue.get(We.id)??null;if(ne&&P.set(ne,{stableKey:ne,type:"subgraph",subgraphId:We.id,text:"SG"}),oe.has(We.id))return;oe.add(We.id),Je(ie.subgraphs[We.id]??[],We.id)}})};return Je(ie.root,null),P},[ie,de,xe,Ue]),F=y.useMemo(()=>me.map(P=>Ve.get(P)).filter(P=>P!=null),[Ve,me]),Se=y.useCallback(P=>{const De=eb(ie,({ref:oe})=>oe.type==="node"?(xe.get(oe.id)??null)===P:oe.type==="group"?de[oe.stableKey]===P:oe.type==="subgraph"?(Ue.get(oe.id)??null)===P:!1);return De?{groupKeys:De.groupKeys,subgraphIds:De.subgraphIds}:null},[ie,de,xe,Ue]),Be=y.useCallback((P,De,oe)=>{x(P),b(P,oe),window.dispatchEvent(new CustomEvent("workflow-scroll-to-node",{detail:{nodeId:De,label:oe}}))},[x,b]),Ge=y.useCallback((P,De,oe,Je)=>{const Xe=Se(P);if(Xe){for(const Fe of Xe.subgraphIds){const Ze=Ue.get(Fe)??null;Ze&&(z(Ze,!1),g(Ze,!1))}for(const Fe of Xe.groupKeys){const Ze=de[Fe];Ze&&(z(Ze,!1),g(Ze,!1))}}if(Je){const Fe=Ue.get(Je)??null;Fe&&(z(Fe,!1),g(Fe,!1))}z(P,!1),g(P,!1);const We=`[data-group-id="${oe}"][data-subgraph-id="${Je??"root"}"]`,ne=`[data-reposition-item="group-${De}"]`;requestAnimationFrame(()=>{requestAnimationFrame(()=>{const Fe=document.querySelector(We),Ze=document.querySelector(ne);(Fe??Ze)?.scrollIntoView({behavior:"smooth",block:"start"})})})},[Se,g,z,de,Ue]),et=y.useCallback((P,De)=>{const oe=Se(P);if(oe){for(const Qe of oe.subgraphIds){const We=Ue.get(Qe)??null;We&&(z(We,!1),g(We,!1))}for(const Qe of oe.groupKeys){const We=de[Qe];We&&(z(We,!1),g(We,!1))}}z(P,!1),g(P,!1);const Je=`[data-subgraph-header-id="${De}"]`,Xe=`[data-reposition-item="subgraph-${De}"]`;requestAnimationFrame(()=>{requestAnimationFrame(()=>{const Qe=document.querySelector(Je),We=document.querySelector(Xe);(Qe??We)?.scrollIntoView({behavior:"smooth",block:"start"})})})},[Se,g,z,de,Ue]),Ye=y.useCallback((P,De)=>()=>{if(Re){T(!1),O(!1),X(null);return}$e(De),P.type==="node"?Be(P.stableKey,P.nodeId):P.type==="group"?Ge(P.stableKey,P.groupKey,P.groupId,P.subgraphId):et(P.stableKey,P.subgraphId)},[Re,Ge,Be,et]),rt=y.useCallback(()=>{if(Re){T(!1),O(!1),X(null);return}const P=(fe+1)%F.length;$e(P);const De=F[P];De&&(De.type==="node"?Be(De.stableKey,De.nodeId):De.type==="group"?Ge(De.stableKey,De.groupKey,De.groupId,De.subgraphId):et(De.stableKey,De.subgraphId))},[F,fe,Re,Ge,Be,et]),Pe=y.useCallback(()=>{J.current!=null&&(window.clearTimeout(J.current),J.current=null)},[]),qe=y.useCallback(()=>{const P=getComputedStyle(document.documentElement).getPropertyValue("--bottom-bar-offset"),De=Number.parseFloat(P);return Number.isFinite(De)?De:0},[]),at=y.useCallback(()=>{const P=Ee.current,De=Ie.current;if(!P||!De)return null;const oe=P.getBoundingClientRect().height,Je=De.getBoundingClientRect().height,Xe=16,Qe=qe()+8,We=Math.max(Xe,oe-Je-Qe);return{minTop:Xe,maxTop:We}},[qe]),pt=y.useCallback(P=>{const De=at();return De?Math.min(Math.max(P,De.minTop),De.maxTop):P},[at]),Mt=y.useCallback((P,De)=>{const oe=Ee.current,Je=ee.current;if(!oe||!Je)return;const Xe=oe.getBoundingClientRect(),Qe=P-Xe.left-Je.x,We=pt(De-Xe.top-Je.y);X({x:Qe,y:We})},[pt]),Wt=y.useCallback((P,De)=>{const oe=Ee.current,Je=Ie.current;if(!oe||!Je)return;const Xe=Je.getBoundingClientRect(),Qe=oe.getBoundingClientRect();ee.current={x:P-Xe.left,y:De-Xe.top};const We=Xe.left-Qe.left,ne=pt(Xe.top-Qe.top);X({x:We,y:ne}),O(!0)},[pt]),Yt=y.useCallback(P=>{P.pointerType==="mouse"&&P.button!==0||P.target.closest("button")&&!Re||(P.preventDefault(),ke.current={startX:P.clientX,startY:P.clientY,startTime:Date.now(),pointerId:P.pointerId},Re?Wt(P.clientX,P.clientY):J.current=window.setTimeout(()=>{T(!0),Wt(P.clientX,P.clientY)},500),P.currentTarget.setPointerCapture(P.pointerId))},[Re,Wt]),be=y.useCallback(P=>{if(A){Mt(P.clientX,P.clientY);return}const De=ke.current;if(!De)return;const oe=P.clientX-De.startX,Je=P.clientY-De.startY;Math.hypot(oe,Je)>8&&Pe()},[Pe,A,Mt]),Q=y.useCallback(()=>{const P=Ee.current,De=Ie.current;if(!P||!De||!te)return;const oe=P.getBoundingClientRect(),Je=De.getBoundingClientRect().width,Qe=te.x+Je/2<oe.width/2?"left":"right",We=pt(te.y);m({side:Qe,top:We}),X(null)},[te,pt,m]),re=y.useCallback(P=>{Pe();const De=ke.current;if(ke.current=null,A){Q(),O(!1);return}if(Re||!De)return;const oe=P.clientX-De.startX,Je=P.clientY-De.startY,Xe=Date.now()-De.startTime;Math.abs(oe)>40&&Math.abs(oe)>Math.abs(Je)&&Xe<500&&m({side:c==="left"?"right":"left"})},[c,Pe,Q,A,Re,m]),ge=y.useCallback(()=>{Pe(),ke.current=null,O(!1),X(null)},[Pe]),Te=y.useMemo(()=>{if(!s)return[];const P=Zy(ie),De=new Map(s.nodes.map(Xe=>[Xe.id,Xe])),oe=[];for(const Xe of P){const Qe=De.get(Xe);Qe&&oe.push(Qe)}const Je=new Set(P);for(const Xe of s.nodes)Je.has(Xe.id)||oe.push(Xe);return Object.keys(L).length===0?oe:oe.filter(Xe=>{const Qe=Xe.stableKey??null;return Qe?!L[Qe]:!0})},[s,L,ie]),Ke=S.trim(),Me=C&&Ke.length>0,it=y.useMemo(()=>{if(!Me||!s)return new Set;const P=[...s.groups??[],...(s.definitions?.subgraphs??[]).flatMap(oe=>oe.groups??[])],De=new Set;for(const oe of P)hf(Ke,oe.title)&&De.add(oe.id);return De},[s,Me,Ke]),tt=y.useMemo(()=>{if(!Me||!s)return new Set;const P=s.definitions?.subgraphs??[],De=new Set;for(const oe of P){const Je=oe.name||oe.id;hf(Ke,`${Je} ${oe.id}`)&&De.add(oe.id)}return De},[s,Me,Ke]),nt=y.useMemo(()=>Me?Te.filter(P=>{const De=w?.[P.type],oe=P.title,Je=[typeof oe=="string"?oe:"",De?.display_name??"",P.type,String(P.id)];return hf(Ke,Je.join(" "))}):Te,[Te,Me,Ke,w]),st=y.useMemo(()=>new Set(nt.map(P=>P.id)),[nt]),wt=y.useMemo(()=>s?Y2(ie,s,V,L,de):[],[ie,s,V,L,de]),gt=y.useMemo(()=>{if(!s)return[];if(Me){const P=oe=>{let Je=0;for(const Xe of oe)Xe.type==="hiddenBlock"?Je+=Xe.count:Xe.type==="node"?Je+=1:Je+=P(Xe.children);return Je},De=(oe,Je=!1)=>{const Xe=[];for(const Qe of oe){if(Qe.type==="hiddenBlock")continue;if(Qe.type==="node"){(Je||st.has(Qe.node.id))&&Xe.push(Qe);continue}if(Je){const Fe=De(Qe.children,!0);Xe.push({...Qe,isCollapsed:!1,nodeCount:P(Fe),children:Fe});continue}if(Qe.type==="group"){const Fe=it.has(Qe.group.id),Ze=De(Qe.children,Fe);(Fe||Ze.length>0)&&Xe.push({...Qe,isCollapsed:!1,nodeCount:P(Ze),children:Ze});continue}const We=tt.has(Qe.subgraph.id),ne=De(Qe.children,!1);(We||ne.length>0)&&Xe.push({...Qe,isCollapsed:!1,nodeCount:P(ne),children:ne})}return Xe};return De(wt)}return wt},[wt,st,it,tt,Me,s]),St=y.useMemo(()=>{const P=new Map;let De=0;for(const oe of Te){const Je=k[String(oe.id)];Je&&Je.length>0&&(De+=1,P.set(oe.id,De))}return P},[Te,k]),yt=y.useMemo(()=>{if(!s)return new Set;const P=Object.entries(i).filter(([,We])=>We!=="off").map(([We,ne])=>({id:Number(We),mode:ne}));if(P.length===0)return new Set;const De=new Map(s.nodes.map(We=>[We.id,We])),oe=new Set,Je=We=>!!(We.stableKey&&L[We.stableKey]),Xe=(We,ne,Fe)=>{if(ne.has(We))return[];ne.add(We);const Ze=De.get(We);if(!Ze)return[];const lt=[];return Ze.outputs?.forEach((It,Zt)=>{const On=ru(It.type);if(Fe.size>0&&!On.some(Tn=>Fe.has(Tn)))return;da(s,We,Zt).forEach(Tn=>{const xn=Tn.node;Je(xn)?lt.push(...Xe(xn.id,ne,Fe)):lt.push(xn)})}),lt},Qe=(We,ne,Fe)=>{if(ne.has(We))return[];ne.add(We);const Ze=De.get(We);if(!Ze)return[];const lt=[];return Ze.inputs?.forEach((It,Zt)=>{if(It.link===null)return;const On=ru(It.type);if(Fe.size>0&&!On.some(Tn=>Fe.has(Tn)))return;const rn=rl(s,We,Zt);rn&&(Je(rn.node)?lt.push(...Qe(rn.node.id,ne,Fe)):lt.push(rn.node))}),lt};return P.forEach(({id:We,mode:ne})=>{const Fe=De.get(We);Fe&&((ne==="inputs"||ne==="both")&&Fe.inputs?.forEach((Ze,lt)=>{if(Ze.link===null)return;const It=rl(s,Fe.id,lt);if(!It)return;if(!Je(It.node)){oe.add(It.node.id);return}const Zt=new Set(ru(Ze.type));Qe(It.node.id,new Set,Zt).forEach(rn=>oe.add(rn.id))}),(ne==="outputs"||ne==="both")&&Fe.outputs?.forEach((Ze,lt)=>{const It=new Set(ru(Ze.type));da(s,Fe.id,lt).forEach(On=>{const rn=On.node;if(!Je(rn)){oe.add(rn.id);return}Xe(rn.id,new Set,It).forEach(xn=>oe.add(xn.id))})}))}),oe},[s,i,L]);y.useEffect(()=>{const P=De=>{const oe=De.detail,Je=typeof oe=="number"?oe:oe.nodeId,Xe=typeof oe=="object"?oe.label:void 0;if(typeof Je!="number"||!nt.some(lt=>lt.id===Je))return;const We=St.get(Je),ne=Xe??(We?`Error #${We}`:"Error");Ne(lt=>({...lt,[Je]:ne}));const Fe=we.current.get(Je);Fe&&window.clearTimeout(Fe);const Ze=window.setTimeout(()=>{Ne(lt=>{const It={...lt};return delete It[Je],It}),we.current.delete(Je)},2e3);we.current.set(Je,Ze)};return window.addEventListener("workflow-label-error-node",P),()=>window.removeEventListener("workflow-label-error-node",P)},[nt,St]),y.useEffect(()=>{const P=we.current;return()=>{P.forEach(De=>window.clearTimeout(De)),P.clear()}},[]),y.useEffect(()=>{const P=De=>{const oe=De.detail,Je=typeof oe=="number"?oe:oe.nodeId,Xe=typeof oe=="object"?oe.label:void 0;if(typeof Je!="number")return;const We=s?.nodes.find(Fe=>Fe.id===Je)?.stableKey??null;if(!We)return;g(We,!1);const ne=(typeof We=="string"?document.querySelector(`[data-stable-key="${We}"]`):null)??document.querySelector(`[data-reposition-item="node-${Je}"]`);ne&&ne.scrollIntoView({behavior:"smooth",block:"start"}),requestAnimationFrame(()=>b(We,Xe))};return window.addEventListener("workflow-scroll-to-node",P),()=>window.removeEventListener("workflow-scroll-to-node",P)},[g,b,s]),y.useEffect(()=>{C&&(B.current&&B.current.scrollTo({top:0,behavior:"auto"}),requestAnimationFrame(()=>{le.current?.focus();const P=Ee.current,De=Ie.current,oe=le.current?.closest(".node-search-bar");if(!P||!De||!oe)return;const Je=P.getBoundingClientRect(),Xe=oe.getBoundingClientRect(),Qe=De.getBoundingClientRect(),We=Xe.bottom-Je.top,ne=Qe.top-Je.top,Fe=8;ne<We+Fe&&m({top:We+Fe})}))},[C,m]),y.useEffect(()=>(p(Re),()=>p(!1)),[Re,p]),y.useEffect(()=>{if(!F.length)return;const P=window.requestAnimationFrame(()=>{const De=at();if(!De)return;const{minTop:oe,maxTop:Je}=De;if(f==null)m({top:Je});else{const Xe=Math.min(Math.max(f,oe),Je);Xe!==f&&m({top:Xe})}});return()=>window.cancelAnimationFrame(P)},[F.length,f,at,m]),y.useEffect(()=>{if(!Re)return;const P=De=>{const oe=Ie.current;!oe||!De.target||oe.contains(De.target)||(T(!1),O(!1),X(null),Pe())};return document.addEventListener("pointerdown",P),()=>{document.removeEventListener("pointerdown",P)}},[Pe,Re]),y.useEffect(()=>{if(!E||se.current===E.id)return;se.current=E.id;const P=window.requestAnimationFrame(()=>{_(E.groupId),R(E.subgraphId),Y(!0),H()});return()=>window.cancelAnimationFrame(P)},[E,H]);const ft=P=>{for(const De of P)if(De.type!=="hiddenBlock"){if(De.type==="node"){const oe=De.node.stableKey??null;if(!oe||!V[oe])return!0;continue}if(!De.isCollapsed||ft(De.children))return!0}return!1},Et=y.useCallback((P,De)=>{const oe=Je=>{for(const Xe of Je){if(Xe.type==="hiddenBlock")continue;if(Xe.type==="node"){const We=Xe.node.stableKey??null;We&&g(We,De);continue}if(Xe.type==="group"){const We=Xe.stableKey;if(!We){oe(Xe.children);continue}g(We,De),oe(Xe.children);continue}const Qe=Ue.get(Xe.subgraph.id)??null;Qe&&g(Qe,De),oe(Xe.children)}};oe(P)},[g,Ue]),Ot=y.useCallback(P=>If(P,{layout:ie,hiddenItems:L,stableKeyByPointer:de}),[L,ie,de]),on=y.useCallback(P=>Ot(ie.groups[P]??[]),[Ot,ie]),Gt=y.useCallback(P=>Ot(ie.subgraphs[P]??[]),[Ot,ie]),Bt=y.useCallback(P=>{for(const De of P.hiddenGroupKeys){const oe=de[De];oe&&z(oe,!1)}for(const De of P.hiddenSubgraphIds){const oe=Ue.get(De)??null;oe&&z(oe,!1)}for(const De of P.hiddenNodeKeys){const oe=de[De];oe&&z(oe,!1)}},[z,de,Ue]),dn=(P,De)=>P.map((oe,Je)=>{const Xe=`${De}-${Je}`;if(oe.type==="hiddenBlock")return null;if(oe.type==="group"){const Qe=oe.group,We=Ro(Qe.color,.15),ne=Ro(Qe.color,.4),Fe=ft(oe.children),Ze=oe.children.some(vn=>vn.type!=="hiddenBlock"),lt=oe.stableKey;if(!lt)return null;const It=on(lt),Zt=lt?me.includes(lt):!1,On=me.length<5||Zt,rn=It.hiddenNodeCount,Tn=Fe?"Fold all":"Unfold all",xn=()=>{!Fe&&lt&&g(lt,!1),Et(oe.children,Fe)};return u.jsxs("div",{className:"group-wrapper shadow-md rounded-xl border mb-3",style:{backgroundColor:We,borderColor:ne},"data-reposition-item":`group-${lt}`,"data-stable-key":lt,children:[u.jsx(Ay,{containerType:"group",containerId:Qe.id,title:Qe.title?.trim()||`Group ${Qe.id}`,nodeCount:oe.nodeCount,isCollapsed:oe.isCollapsed,backgroundColor:Ro(Qe.color,.22),borderColor:Ro(Qe.color,.4),hiddenNodeCount:rn,isBookmarked:Zt,canShowBookmarkAction:On,foldAllLabel:Tn,onToggleCollapse:()=>lt&&g(lt,!oe.isCollapsed),onToggleBookmark:()=>lt?Ae(lt):void 0,onShowHiddenNodes:()=>{rn>0&&Bt(It)},onToggleFoldAll:xn,onBypassAll:vn=>lt&&I(lt,vn),onHide:()=>lt&&z(lt,!0),onAddNode:()=>{_(oe.group.id),R(oe.subgraphId??null),Y(!0)},onDelete:()=>{if(lt){if(oe.nodeCount===0){$(lt,{deleteNodes:!1});return}G({stableKey:lt,containerTypeLabel:"group",containerIdLabel:`#${oe.group.id}`,displayName:oe.group.title?.trim()||`Group ${oe.group.id}`,nodeCount:oe.nodeCount})}},onMove:()=>K.openOverlay({type:"group",id:oe.group.id,subgraphId:oe.subgraphId??null}),onCommitTitle:vn=>lt&&W(lt,vn)}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${oe.isCollapsed?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden px-1 transition-opacity duration-200 ease-out ${oe.isCollapsed?"opacity-0":"opacity-100"}`,children:[rn>0&&oe.nodeCount>0&&u.jsxs("div",{className:"px-3 pb-2 -mt-1 text-xs text-gray-400 text-center",children:[rn," hidden node",rn===1?"":"s"]}),Ze?dn(oe.children,Xe):!Me||it.has(oe.group.id)?u.jsx(Ry,{containerType:"group",containerId:oe.group.id,hiddenNodeCount:rn,borderColor:Ro(oe.group.color,.3),dashedBorderColor:Ro(oe.group.color,.4),onClick:()=>{_(oe.group.id),R(oe.subgraphId??null),Y(!0)}}):null,u.jsx(Ly,{id:`group-footer-${oe.group.id}`,headerId:`group-header-${oe.group.id}`,title:oe.group.title,nodeCount:oe.nodeCount,backgroundColor:Ro(oe.group.color,.15),borderColor:Ro(oe.group.color,.3),textClassName:"text-gray-500 dark:text-gray-400",className:"group-footer"})]})})]},`group-${oe.group.id}-${Xe}`)}if(oe.type==="subgraph"){const Qe=Ct.brand.subgraphBackground08,We=Ct.brand.subgraphBorder25,ne=Gt(oe.subgraph.id),Fe=ne.hiddenNodeCount,Ze=Ue.get(oe.subgraph.id)??null,lt=Ze?me.includes(Ze):!1,It=me.length<5||lt,Zt=ft(oe.children),On=Zt?"Fold all":"Unfold all",rn=()=>{!Zt&&Ze&&g(Ze,!1),Et(oe.children,Zt)};return u.jsxs("div",{className:"subgraph-wrapper shadow-md rounded-xl border mb-3",style:{backgroundColor:`var(--subgraph-bg, ${Qe})`,borderColor:`var(--subgraph-border, ${We})`,"--subgraph-bg":Qe,"--subgraph-border":We},"data-reposition-item":`subgraph-${oe.subgraph.id}`,"data-stable-key":Ze??void 0,children:[u.jsx(Ay,{containerType:"subgraph",containerId:oe.subgraph.id,title:(oe.subgraph.name||oe.subgraph.id).trim(),nodeCount:oe.nodeCount,isCollapsed:oe.isCollapsed,backgroundColor:Ct.brand.subgraphBackground14,borderColor:Ct.brand.subgraphBorder25,hiddenNodeCount:Fe,isBookmarked:lt,canShowBookmarkAction:It,foldAllLabel:On,onToggleCollapse:()=>Ze&&g(Ze,!oe.isCollapsed),onToggleBookmark:()=>Ze?Ae(Ze):void 0,onBypassAll:Tn=>Ze&&I(Ze,Tn),onToggleFoldAll:rn,onShowHiddenNodes:()=>{Fe>0&&Bt(ne)},onHide:()=>Ze&&z(Ze,!0),onDelete:()=>{if(Ze){if(oe.nodeCount===0){$(Ze,{deleteNodes:!1});return}G({stableKey:Ze,containerTypeLabel:"subgraph",containerIdLabel:oe.subgraph.id,displayName:oe.subgraph.name?.trim()||oe.subgraph.id,nodeCount:oe.nodeCount})}},onAddNode:()=>{_(null),R(oe.subgraph.id),Y(!0)},onMove:()=>K.openOverlay({type:"subgraph",id:oe.subgraph.id}),onCommitTitle:Tn=>Ze&&W(Ze,Tn)}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${oe.isCollapsed?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden px-1 transition-opacity duration-200 ease-out ${oe.isCollapsed?"opacity-0":"opacity-100"}`,children:[Fe>0&&oe.nodeCount>0&&u.jsxs("div",{className:"px-3 pb-2 -mt-1 text-xs text-gray-400 text-center",children:[Fe," hidden node",Fe===1?"":"s"]}),oe.children.length>0?dn(oe.children,Xe):!Me||tt.has(oe.subgraph.id)?u.jsx(Ry,{containerType:"subgraph",containerId:oe.subgraph.id,hiddenNodeCount:Fe,borderColor:Ct.brand.subgraphBorder20,dashedBorderColor:Ct.brand.subgraphBorder25,onClick:()=>{_(null),R(oe.subgraph.id),Y(!0)}}):null,u.jsx(Ly,{id:`subgraph-footer-${oe.subgraph.id}`,headerId:`subgraph-header-${oe.subgraph.id}`,title:oe.subgraph.name||oe.subgraph.id,nodeCount:oe.nodeCount,backgroundColor:Ct.brand.subgraphBackground10,borderColor:Ct.brand.subgraphBorder20,textClassName:"text-blue-600 dark:text-blue-500",className:"subgraph-footer"})]})})]},`subgraph-${oe.subgraph.id}-${Xe}`)}return u.jsx("div",{"data-reposition-item":`node-${oe.node.id}`,"data-stable-key":oe.node.stableKey??void 0,children:u.jsx(g4,{node:oe.node,isExecuting:l===String(oe.node.id),isConnectionHighlighted:yt.has(oe.node.id),errorBadgeLabel:Oe[oe.node.id]??null,onImageClick:o,onMoveNode:()=>K.openOverlay({type:"node",id:oe.node.id})})},`node-${oe.node.id}-${Xe}`)});let pn;s?Te.length===0?pn=u.jsx("div",{id:"node-list-empty",className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{id:"empty-workflow-content",className:"text-center p-8",children:[u.jsx("div",{id:"empty-workflow-icon-container",className:"flex items-center justify-center mb-4",children:u.jsx(Pw,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{id:"empty-workflow-title",className:"text-lg font-medium",children:"Empty workflow"}),u.jsx("p",{id:"empty-workflow-description",className:"text-sm mt-2",children:"This workflow has no nodes"}),u.jsx("div",{className:"mt-6 w-64 max-w-full mx-auto",children:u.jsx(y4,{onClick:()=>{_(null),R(null),Y(!0)}})})]})}):pn=u.jsxs("div",{id:"node-list-shell",className:"h-full flex flex-col",children:[C&&u.jsx("div",{className:"node-search-bar bg-gray-100 px-4 py-2",children:u.jsx(Ca,{inputRef:le,value:S,onChange:j,onClear:Le,placeholder:"Search nodes...",inputClassName:"comfy-input border-gray-300"})}),u.jsx("div",{id:"node-list-container",ref:B,className:"flex-1 overflow-auto px-4 pt-4 overscroll-contain scroll-container",style:{paddingBottom:"10rem"},"data-node-list":"true",children:gt.length===0?u.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{className:"text-center p-8",children:[u.jsx("p",{className:"text-sm font-medium",children:"No matching nodes"}),u.jsx("p",{className:"text-xs mt-2",children:"Try a different search."})]})}):u.jsx("div",{id:"node-list-inner",children:dn(gt,"root")})})]}):pn=u.jsx("div",{id:"node-list-no-workflow",className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{id:"no-workflow-content",className:"text-center p-8",children:[u.jsx("div",{id:"no-workflow-icon-container",className:"flex items-center justify-center mb-4",children:u.jsx(Ww,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{id:"no-workflow-title",className:"text-lg font-medium",children:"No workflow loaded"}),u.jsx("p",{id:"no-workflow-description",className:"text-sm mt-2",children:"Open the menu to load a workflow"})]})});const Wn=te?.y??f??0,Kn=te?`${te.x}px`:c==="left"?"0.75rem":void 0,no=te?void 0:c==="right"?"0.75rem":void 0,oo={top:`${Wn}px`,left:Kn,right:no,opacity:f==null&&te==null?0:1,touchAction:Re?"none":"pan-y",pointerEvents:f==null&&te==null?"none":"auto"};return u.jsxs("div",{id:"node-list-wrapper",ref:Ee,className:"absolute inset-x-0 top-[69px] bottom-0 bg-gray-100",style:{display:n?"block":"none"},children:[pn,u.jsx(b4,{isOpen:pe,addInGroupId:ue,addInSubgraphId:U,onClose:()=>{Y(!1),_(null),R(null)}}),D&&u.jsx(x4,{containerTypeLabel:D.containerTypeLabel,containerIdLabel:D.containerIdLabel,displayName:D.displayName,nodeCount:D.nodeCount,onCancel:()=>G(null),onDeleteContainerOnly:()=>{$(D.stableKey,{deleteNodes:!1}),G(null)},onDeleteContainerAndNodes:()=>{$(D.stableKey,{deleteNodes:!0}),G(null)}}),K.overlayOpen&&K.initialTarget&&u.jsx(sS,{mobileLayout:ie,initialTarget:K.initialTarget,initialViewportAnchor:K.initialViewportAnchor,onDone:K.commitAndClose,onCancel:K.cancelOverlay}),F.length>0&&u.jsx("div",{ref:Ie,className:`absolute z-[200] flex flex-col items-center gap-2 pointer-events-auto ${Re?"rounded-2xl ring-2 ring-blue-400/70 bg-white/30 shadow-lg":""}`,style:oo,onPointerDown:Yt,onPointerMove:be,onPointerUp:re,onPointerCancel:ge,children:u.jsxs("div",{className:`flex flex-col items-center gap-2 ${Re?"p-2 cursor-grab":""}`,children:[F.map((P,De)=>u.jsx("button",{type:"button",className:"w-10 h-10 rounded-full border border-transparent bg-gray-900/10 text-[11px] font-bold text-gray-800 shadow-sm backdrop-blur-sm dark:bg-white/10 dark:text-gray-100 select-none",onClick:Ye(P,De),children:P.text},P.stableKey)),F.length>1&&u.jsx("button",{type:"button",className:"w-10 h-10 rounded-full border border-transparent bg-gray-900/10 text-gray-600 shadow-sm backdrop-blur-sm flex items-center justify-center dark:bg-white/10 dark:text-gray-200 select-none","aria-label":"Cycle bookmarks",onClick:rt,children:u.jsx(Jn,{className:"w-4 h-4"})})]})})]})}function S4(){const n=eo(O=>O.currentPanel),o=Mo(O=>O.viewerOpen),s=ce(O=>O.workflow),l=ce(O=>O.isExecuting),i=ce(O=>O.progress),c=ce(O=>O.executingNodeId),f=ce(O=>O.executingPromptId),m=ce(O=>O.workflowDurationStats),p=ln(O=>O.error),g=ln(O=>O.nodeErrors),b=ln(O=>O.errorsDismissed),x=ln(O=>O.setErrorsDismissed),w=ce(O=>O.scrollToNode),k=ln(O=>O.errorCycleIndex),C=ln(O=>O.setErrorCycleIndex),S=ce(O=>O.revealNodeWithParents),j=ce(O=>O.nodeTypes),N=jt(O=>O.running),[E,H]=y.useState(null),z=!(n==="queue")&&!(n==="outputs")&&!o,I=Object.values(g).reduce((O,te)=>O+te.length,0),$=I>0,W=!!p?.startsWith("Workflow load error")||$,ie=W?"Workflow load error":"Prompt error",de=W&&p?p.replace(/^Workflow load error:\s*/i,""):p??($?`${I} inputs reference missing options.`:null),me=(!!p||$)&&!b,Ae=y.useMemo(()=>{if(!s||!c)return null;const O=s.nodes.find(X=>String(X.id)===c);return O?j?.[O.type]?.display_name||O.type:`Node ${c}`},[s,c,j]),Ee=f||(N[0]?.prompt_id??null),Ie=ka({workflow:s,runKey:Ee,isRunning:l||N.length>0,workflowDurationStats:m}),B=Ie===100?100:i,le=()=>{if(!s||!$)return;const O=s.nodes.filter(_=>g[String(_.id)]?.length);if(O.length===0)return;const te=k%O.length,X=O[te];if(!X)return;const pe=X.id,Y=X.stableKey;if(!Y)return;const ue=`Error #${te+1}`;S(Y),C((te+1)%O.length),window.dispatchEvent(new CustomEvent("workflow-label-error-node",{detail:{nodeId:pe,label:ue}})),window.dispatchEvent(new CustomEvent("workflow-scroll-to-node",{detail:{nodeId:pe,label:ue}})),w(Y,ue)},fe=O=>{(O.key==="Enter"||O.key===" ")&&(O.preventDefault(),le())},$e=O=>{O.stopPropagation()},Re=O=>{O.stopPropagation(),x(!0)},T=()=>{Ee&&H(Ee)},A=E!==null&&E===Ee;return z?u.jsxs("div",{id:"bottom-status-overlay",className:"fixed inset-x-0 bottom-20 z-[2000] flex flex-col items-center gap-3 pointer-events-none",children:[me&&u.jsxs("div",{id:"error-notification-wrapper",className:"relative pointer-events-auto",children:[u.jsx("div",{id:"error-notification-toast",className:"bg-red-100 text-red-900 rounded-xl shadow-lg px-4 py-3 w-[70vw] max-w-sm",role:"button",tabIndex:0,onClick:le,onKeyDown:fe,children:u.jsx("div",{className:"error-toast-content flex items-start justify-between gap-3",children:u.jsxs("div",{className:"error-text-container pr-16",children:[u.jsx("div",{className:"error-title text-sm font-semibold text-red-800",children:ie}),u.jsx("div",{className:"error-message mt-1 text-xs text-red-800 break-words",children:de})]})})}),u.jsx("button",{id:"error-dismiss-button",type:"button","aria-label":"Dismiss error",className:"absolute top-3 right-3 shrink-0 px-3 py-1 text-xs font-semibold bg-red-700 text-white rounded-full z-10",onPointerDown:$e,onClick:Re,children:"Dismiss"})]}),Ie!==null&&!A&&u.jsxs("div",{id:"execution-progress-card",className:"relative bg-white border border-gray-200 rounded-xl shadow-lg px-4 py-2 w-[70vw] max-w-sm pointer-events-auto",children:[u.jsx("button",{type:"button","aria-label":"Dismiss progress",className:"absolute top-2 right-2 w-7 h-7 rounded-full flex items-center justify-center text-gray-400 hover:text-gray-600",onClick:T,children:u.jsx(wa,{className:"w-4 h-4"})}),u.jsx("div",{className:"executing-node-name text-sm font-semibold text-gray-900",children:Ae||"Running"}),u.jsxs("div",{className:"node-progress-info mt-2 flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[B,"%"]})]}),u.jsx("div",{className:"node-progress-track mt-1 h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"node-progress-bar h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,B))}%`}})}),Ie!==null&&u.jsxs("div",{className:"overall-progress-container",children:[u.jsxs("div",{className:"overall-progress-info mt-3 flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[Ie,"%"]})]}),u.jsx("div",{className:"overall-progress-track mt-1 h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"overall-progress-bar h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,Ie))}%`}})})]})]})]}):null}function N4({viewerOpen:n,followQueue:o,queueSize:s,overallProgress:l,onToggleFollowQueue:i,onOpenFollowQueue:c}){const f=y.useCallback(()=>{n?i?.():c?.()},[n,i,c]),m=y.useMemo(()=>n?o?"Disable follow queue":"Enable follow queue":"Open image viewer",[n,o]),p=y.useMemo(()=>n&&o?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200",[n,o]);return u.jsxs("button",{onClick:f,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${p}`,"aria-label":m,children:[u.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx(rb,{className:"w-6 h-6",showSlash:n&&!o})}),s>0&&u.jsxs("div",{className:`queue-badge absolute top-0 right-0 translate-x-[18px] -translate-y-[18px] w-6 h-6 rounded-full bg-blue-500 text-white
                     flex items-center justify-center font-bold text-xs border-2 border-white relative z-20`,children:[l!==null&&u.jsx(s2,{className:"absolute z-10 pointer-events-none",width:"24",height:"24",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-90deg)"},progress:l}),s]})]})}function C4(){const n=ce(p=>p.workflow),o=ho(p=>p.pinnedWidget),s=ho(p=>p.pinOverlayOpen),l=ho(p=>p.togglePinOverlay),i=ce(p=>p.updateNodeWidget),c=y.useMemo(()=>{if(!o||!n)return;const p=n.nodes.find(g=>g.id===o.nodeId);if(p)return ua(p,o.widgetName,o.widgetIndex)},[o,n]);if(!s||!o)return null;const m=n?.nodes.find(p=>p.id===o.nodeId)?.stableKey??null;return u.jsx("div",{id:"pin-overlay-hidden-anchor",className:"hidden",children:u.jsx(_o,{name:o.widgetName,type:o.widgetType,value:c,options:o.options,onChange:p=>m?i(m,o.widgetIndex,p,o.widgetName):void 0,hideLabel:!0,compact:!0,forceModalOpen:!0,onModalClose:l})})}function k4(){const n=Ut(o=>o.setFilterModalOpen);return u.jsx("button",{onClick:()=>n(!0),className:"relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors bg-gray-100 text-gray-700 hover:bg-gray-200","aria-label":"Filter and sort",children:u.jsx(qw,{className:"w-6 h-6"})})}function j4(){const n=Ut(l=>l.selectedIds.length),o=Ut(l=>l.setSelectionActionOpen),s=n===0;return u.jsx("button",{onClick:()=>o(!0),disabled:s,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,"aria-label":"Selection actions",children:u.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shadow-sm ${s?"border-gray-300 bg-transparent":"bg-blue-600 border-blue-600 text-white"}`,children:!s&&u.jsx(Go,{className:"w-4 h-4"})})})}function M4(){return Ut(o=>o.selectionMode)?u.jsx(j4,{}):u.jsx(k4,{})}function O4(){const n=ho(l=>l.pinnedWidget),o=ho(l=>l.pinOverlayOpen),s=ho(l=>l.togglePinOverlay);return n?u.jsx("button",{onClick:s,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${o?"bg-fuchsia-500 text-white":"bg-gray-100 text-fuchsia-500 hover:bg-gray-200"}`,"aria-label":o?"Close pin editor":"Open pin editor",children:u.jsx(ma,{className:"w-6 h-6"})}):null}function T4(){const n=ce(c=>c.workflow),o=ce(c=>c.runCount),s=ce(c=>c.queueWorkflow),l=n!==null,i=()=>{l&&(s(o),"vibrate"in navigator&&navigator.vibrate(20))};return u.jsx("button",{onClick:i,disabled:!l,className:"flex-1 py-3 px-6 rounded-xl font-semibold text-lg min-h-[48px] transition-all "+(l?"bg-blue-500 text-white active:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Run"})}function E4(){const n=ce(i=>i.runCount),o=ce(i=>i.setRunCount),s=()=>{o(n-1)},l=()=>{o(n+1)};return u.jsxs("div",{id:"run-count-selector",className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[u.jsx("button",{onClick:s,disabled:n<=1,className:`w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center
                   text-lg font-medium text-gray-700 disabled:opacity-40 disabled:shadow-none`,children:""}),u.jsx("span",{className:"w-8 text-center font-semibold text-gray-900",children:n}),u.jsx("button",{onClick:l,className:`w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center
                   text-lg font-medium text-gray-700`,children:"+"})]})}function I4(n){const{currentPanel:o,viewerOpen:s=!1,followQueue:l=!1,onToggleFollowQueue:i,onOpenFollowQueue:c}=n,f=o==="outputs",m=ce(N=>N.workflow),p=ce(N=>N.isExecuting),g=ce(N=>N.executingPromptId),b=ce(N=>N.workflowDurationStats),x=jt(N=>N.pending),w=jt(N=>N.running),k=y.useRef(null),C=x.length+w.length,S=g||(w[0]?.prompt_id??null),j=ka({workflow:m,runKey:S,isRunning:p||w.length>0,workflowDurationStats:b});return y.useEffect(()=>{const N=k.current;if(!N)return;const E=()=>{const H=N.getBoundingClientRect();document.documentElement.style.setProperty("--bottom-bar-offset",`${H.height}px`)};return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),u.jsxs("div",{id:"bottom-bar-root",ref:k,className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg safe-area-bottom z-[2200]",children:[u.jsxs("div",{id:"bottom-bar-content",className:"flex items-center gap-3 px-3 py-2 max-w-lg mx-auto",children:[u.jsx(E4,{}),u.jsx(T4,{}),f&&u.jsx(M4,{}),!f&&u.jsx(O4,{}),u.jsx(N4,{viewerOpen:s,followQueue:l,queueSize:C,overallProgress:j,onToggleFollowQueue:i,onOpenFollowQueue:c})]}),u.jsx(C4,{}),u.jsx(S4,{})]})}const Dy=n=>Symbol.iterator in n,By=n=>"entries"in n,zy=(n,o)=>{const s=n instanceof Map?n:new Map(n.entries()),l=o instanceof Map?o:new Map(o.entries());if(s.size!==l.size)return!1;for(const[i,c]of s)if(!l.has(i)||!Object.is(c,l.get(i)))return!1;return!0},L4=(n,o)=>{const s=n[Symbol.iterator](),l=o[Symbol.iterator]();let i=s.next(),c=l.next();for(;!i.done&&!c.done;){if(!Object.is(i.value,c.value))return!1;i=s.next(),c=l.next()}return!!i.done&&!!c.done};function A4(n,o){return Object.is(n,o)?!0:typeof n!="object"||n===null||typeof o!="object"||o===null||Object.getPrototypeOf(n)!==Object.getPrototypeOf(o)?!1:Dy(n)&&Dy(o)?By(n)&&By(o)?zy(n,o):L4(n,o):zy({entries:()=>Object.entries(n)},{entries:()=>Object.entries(o)})}function R4(n){const o=Js.useRef(void 0);return s=>{const l=n(s);return A4(o.current,l)?o.current:o.current=l}}function mf(n){return!!n&&typeof n=="object"&&!Array.isArray(n)}function ix(n){return Array.isArray(n)&&n.length>=2&&(typeof n[0]=="string"||typeof n[0]=="number")&&typeof n[1]=="number"}function zu(n){return n.class_type??n.type??null}function Np(n,o){for(const s of o){const l=n.inputs?.[s];if(!ix(l)&&l!==void 0)return l}}function tl(n,o){const s=Np(n,o);if(s!=null)return typeof s=="string"?s:String(s)}function gf(n,o){if(!ix(o))return null;const s=String(o[0]);return n[s]??null}function _4(n){if(!n)return;const o=tl(n,["sampler_name","sampler","name"]);if(o)return o;if(zu(n)==="KSamplerSelect"&&Array.isArray(n.widgets_values)){const l=n.widgets_values[0];return l==null?void 0:String(l)}}function D4(n){if(!n)return;const o=tl(n,["scheduler","scheduler_name","name"]);if(o)return o;if(zu(n)==="BasicScheduler"&&Array.isArray(n.widgets_values)){const l=n.widgets_values[0];return l==null?void 0:String(l)}}function B4(n){if(!n)return;const o=Np(n,["steps","step_count"]);if(o!==void 0)return o;if(zu(n)==="BasicScheduler"&&Array.isArray(n.widgets_values)){const l=n.widgets_values[1];return l??void 0}}function z4(n){if(!n)return;const o=Np(n,["cfg","guidance","guidance_scale"]);if(o!==void 0)return o;if(Array.isArray(n.widgets_values)){const s=n.widgets_values[0];return s??void 0}}function Cp(n){const o={};if(!mf(n)&&!Array.isArray(n))return o;let s=null;if(Array.isArray(n)&&n.length>=3&&mf(n[2])?s=n[2]:mf(n)&&(s=n),!s)return o;const i=Object.entries(s).sort((c,f)=>Number(c[0])-Number(f[0])).map(([,c])=>c);for(const c of i){const f=zu(c);if(f){if(f==="CheckpointLoaderSimple"||f==="CheckpointLoader"){const m=c.inputs?.ckpt_name;typeof m=="string"?o.model=m.replace(/\.(safetensors|ckpt|pt)$/i,""):m!=null&&(o.model=String(m).replace(/\.(safetensors|ckpt|pt)$/i,""))}if(f==="KSampler"||f==="KSamplerAdvanced"){if(o.steps===void 0&&c.inputs?.steps!==void 0&&(o.steps=c.inputs.steps),o.cfg===void 0&&c.inputs?.cfg!==void 0&&(o.cfg=c.inputs.cfg),o.sampler===void 0){const m=tl(c,["sampler_name"]);m&&(o.sampler=m)}if(o.scheduler===void 0){const m=tl(c,["scheduler"]);m&&(o.scheduler=m)}}if(f==="SamplerCustom"||f==="SamplerCustomAdvanced"){if(o.steps===void 0&&c.inputs?.steps!==void 0&&(o.steps=c.inputs.steps),o.cfg===void 0&&c.inputs?.cfg!==void 0&&(o.cfg=c.inputs.cfg),o.sampler===void 0){const m=tl(c,["sampler","sampler_name"]),p=gf(s,c.inputs?.sampler),g=m??_4(p);g&&(o.sampler=g)}if(o.scheduler===void 0){const m=tl(c,["scheduler","scheduler_name"]),p=gf(s,c.inputs?.sigmas??c.inputs?.scheduler),g=m??D4(p);g&&(o.scheduler=g)}if(o.steps===void 0){const m=gf(s,c.inputs?.sigmas??c.inputs?.scheduler),p=B4(m);p!==void 0&&(o.steps=p)}}if(f==="FluxGuidance"&&o.cfg===void 0){const m=z4(c);m!==void 0&&(o.cfg=m)}}}return o}function kp(n,o={}){const{onlyOutput:s=!1,alt:l}=o,i=[];return n.forEach((c,f)=>{const m=c.outputs?.images??[],p=Cp(c.prompt),g=c.durationSeconds,b=c.success!==!1;m.forEach((x,w)=>{if(s&&x.type!=="output")return;const k=typeof l=="function"?l(w,f):l,C=x.subfolder?`${x.subfolder}/${x.filename}`:x.filename,S=ja(x.filename),j=S==="video"?"video":"image";i.push({src:mo(x.filename,x.subfolder,x.type),alt:k,mediaType:S,metadata:p,durationSeconds:g,success:b,filename:x.filename,file:{id:`${x.type}/${C}`,name:x.filename,type:j,fullUrl:mo(x.filename,x.subfolder,x.type)}})})}),i}function H4({menuState:n,unifiedList:o,onClose:s,onLoadWorkflow:l,onCopyWorkflow:i,onDownload:c,onBatchDownload:f,onDeleteHistory:m,getBatchSources:p}){const g=n?.promptId??"",b=jt(N=>N.queueItemHideImages[g]),x=jt(N=>N.toggleQueueItemHideImages),w=()=>{n?.workflow&&n.promptId&&l(n.workflow,n.promptId),s()},k=()=>{i(n?.workflow),s()},C=async()=>{const N=n?.promptId?p(n.promptId,o):[];N.length>1?await f(N):n&&await c(n.imageSrc),s()},S=()=>{x(g),s()},j=()=>{n?.promptId&&m(n.promptId),s()};return n?.open?Mn.createPortal(u.jsx("div",{id:"queue-image-menu",className:"fixed z-[1200] w-44",style:{top:n.top,right:n.right},children:u.jsx(hr,{items:[{key:"load-workflow",label:"Load workflow",icon:u.jsx(gs,{className:"w-4 h-4"}),onClick:w,disabled:!n.workflow},{key:"copy-workflow",label:"Copy workflow",icon:u.jsx(t2,{className:"w-4 h-4"}),onClick:k,disabled:!n.workflow},{key:"download",label:n.promptId&&p(n.promptId,o).length>1?"Download batch":"Download",icon:u.jsx(n2,{className:"w-4 h-4"}),onClick:C},{key:"toggle-images",label:b?"Show images":"Hide images",icon:b?u.jsx(dr,{className:"w-4 h-4"}):u.jsx(Fo,{className:"w-4 h-4"}),onClick:S,hidden:!(n.hasVideoOutputs&&n.hasImageOutputs&&n.promptId)},{key:"delete",label:"Delete",icon:u.jsx(Do,{className:"w-4 h-4"}),onClick:j,color:"danger"}]})}),document.body):null}function V4({message:n}){return n?Mn.createPortal(u.jsx("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-[1300] bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg text-sm font-medium animate-in fade-in slide-in-from-top-2 duration-200",children:n}),document.body):null}function ux(n){return"outputs"in n}function K4(n,o){const s=o.find(i=>i.id===n);return!s||s.status!=="done"?[]:ux(s.data)?(s.data.outputs.images??[]).filter(i=>i.type==="output").map(i=>mo(i.filename,i.subfolder,i.type)):[]}async function cx(n,o="image.png",s){try{const i=await(await fetch(n)).blob(),c=URL.createObjectURL(i),f=document.createElement("a");f.href=c,f.download=o,document.body.appendChild(f),f.click(),f.remove(),URL.revokeObjectURL(c),s?.(n)}catch(l){console.error("Failed to download image:",l)}}async function U4(n,o){for(const s of n)await cx(s,"image.png",o)}async function $4(n){try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(n);else{const o=document.createElement("textarea");o.value=n,o.style.position="fixed",o.style.opacity="0",document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)}return!0}catch(o){return console.error("Failed to copy to clipboard:",o),!1}}function F4({item:n,isActuallyRunning:o,progress:s,overallProgress:l,executingNodeLabel:i,onDelete:c,onStop:f,onImageClick:m,viewerImages:p,runningImages:g,onOpenMenu:b,downloaded:x,isTopDoneItem:w}){const k=jt(J=>J.previewVisibility),C=jt(J=>J.previewVisibilityDefault),S=jt(J=>J.showQueueMetadata),j=jt(J=>J.queueItemExpanded[n.id]),N=jt(J=>J.setQueueItemExpanded),E=jt(J=>J.queueItemHideImages[n.id]),H=y.useRef(new Map),V=y.useRef(new Set),[L,z]=y.useState(new Set),I=n.status==="pending"&&!o,$=n.status==="running"||o,W=n.status==="done",ie=j!==void 0,de=ie?j:!1,me=y.useRef(W);y.useEffect(()=>{ie||N(n.id,!1)},[ie,n.id,N]),y.useEffect(()=>{!me.current&&W&&N(n.id,!0),me.current=W},[W,n.id,N]),y.useEffect(()=>{V.current.clear(),z(new Set)},[n.id]);const Ae=()=>{N(n.id,!de)},Ee=W&&ux(n.data)?n.data:null,Ie=y.useMemo(()=>Ee?Ee.outputs.images:$?g:[],[Ee,$,g]),B=!!(n.data.prompt_id?k[n.data.prompt_id]??C:C),{savedImages:le,displayImages:fe}=y.useMemo(()=>{const J=Ie.filter(se=>se.type==="output"),ke=Ie.filter(se=>se.type!=="output"),ee=B||J.length===0&&ke.length>0;return{savedImages:J,displayImages:ee?[...J,...ke]:J}},[B,Ie]),$e=y.useMemo(()=>Ie.some(J=>Zs(J.filename)),[Ie]),Re=y.useMemo(()=>Ie.some(J=>!Zs(J.filename)),[Ie]),T=y.useMemo(()=>!E||!$e?fe:fe.filter(J=>Zs(J.filename)),[fe,$e,E]),A=le.map(J=>({src:mo(J.filename,J.subfolder,J.type),alt:"Generation"})),O="aspect-square w-full bg-gray-100 flex flex-col items-center justify-center text-gray-400",te=Ee?.durationSeconds,X=Ee?Ee.success!==!1:!0,pe=q4(te),Y=l===100?100:s,ue=y.useMemo(()=>!S||!n.data.prompt?null:Cp(n.data.prompt),[S,n.data.prompt]),_=y.useMemo(()=>$?T.map(J=>({src:mo(J.filename,J.subfolder,J.type),alt:"Generation",mediaType:ja(J.filename)})):p,[$,p,T]);y.useEffect(()=>{de&&T.forEach(J=>{if(!Zs(J.filename))return;const ke=mo(J.filename,J.subfolder,J.type);if(V.current.has(ke))return;V.current.add(ke);const ee=H.current.get(ke);if(!ee)return;ee.currentTime=0,z(xe=>{const Ue=new Set(xe);return Ue.delete(ke),Ue});const se=ee.play();se&&typeof se.catch=="function"&&se.catch(()=>{})})},[de,T]);const U=J=>{J.stopPropagation(),Ae()},R=J=>{J.stopPropagation(),f()},D=J=>{J.stopPropagation(),c()},G=J=>{J.stopPropagation();const ke=J.currentTarget.getBoundingClientRect(),ee=Math.max(8,window.innerWidth-ke.right),se=A[0]?.src||"";b({top:ke.bottom+6,right:ee,imageSrc:se,workflow:Ee?.workflow,promptId:n.data.prompt_id||n.id,hasVideoOutputs:$e,hasImageOutputs:Re})},K=J=>()=>{z(ke=>new Set(ke).add(J))},Oe=J=>()=>{z(ke=>{const ee=new Set(ke);return ee.delete(J),ee})},Ne=(J,ke,ee)=>()=>{const se=_.findIndex(xe=>xe.src===J);m?.(_,se>=0?se:ke,ee)},we=J=>ke=>{ke.stopPropagation();const ee=H.current.get(J);if(!ee)return;ee.currentTime=0;const se=ee.play();se&&typeof se.catch=="function"&&se.catch(()=>{})};return u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden transition-all duration-300",children:[u.jsxs("div",{onClick:Ae,className:`px-3 py-2 border-b flex justify-between items-center cursor-pointer select-none ${$?"bg-blue-50 border-blue-100":"bg-gray-50 border-gray-100"}`,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[u.jsx("button",{onClick:U,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-400 hover:text-gray-600 shrink-0",children:de?u.jsx(Jn,{className:"w-6 h-6"}):u.jsx(hs,{className:"w-6 h-6"})}),$&&u.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),I&&u.jsx("span",{className:"text-xs font-bold text-gray-400",children:"PENDING"}),$&&u.jsx("span",{className:"text-xs font-bold text-blue-600",children:"GENERATING"}),W&&u.jsx("span",{className:"text-xs font-bold text-gray-500",children:new Date(n.timestamp||0).toLocaleTimeString()}),$&&!de&&o&&l!=null&&u.jsxs("span",{className:"ml-1 text-xs font-semibold text-blue-600",children:[Math.min(100,Math.max(0,l)),"%"]})]}),u.jsx("div",{className:"flex items-center gap-2",children:$?u.jsx("button",{onClick:R,className:"px-2 py-1 text-xs font-semibold text-white bg-red-600 rounded hover:bg-red-700",children:"Stop"}):W?u.jsx(Wr,{onClick:G,ariaLabel:"Image options",buttonSize:7,iconSize:4}):u.jsx("button",{onClick:D,className:"text-gray-400 hover:text-red-500 px-2",title:I?"Remove from Queue":"Delete from History","aria-label":I?"Remove from Queue":"Delete from History",children:u.jsx(wa,{className:"w-4 h-4"})})})]}),de&&u.jsx("div",{className:"relative w-full animate-in fade-in duration-200",children:T.length>0?u.jsx("div",{className:"flex flex-col",children:(()=>{let J=0,ke=0;return T.map((ee,se)=>{const xe=ee.type!=="output",Ue=xe?++ke:++J,Le=`${xe?"Preview":"Save"} #${Ue}`,Ve=mo(ee.filename,ee.subfolder,ee.type),F=x[Ve],Se=T.length>1;return u.jsxs("div",{className:"relative",children:[pe&&u.jsxs("div",{className:`absolute top-2 left-2 flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold ${X?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:[X?u.jsx(Go,{className:"w-3.5 h-3.5"}):u.jsx(Xw,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:pe})]}),Zs(ee.filename)?u.jsxs(u.Fragment,{children:[u.jsx("video",{src:Ve,className:"w-full h-auto block",muted:!0,playsInline:!0,preload:"metadata",ref:Be=>{Be?H.current.set(Ve,Be):H.current.delete(Ve)},onEnded:K(Ve),onPlay:Oe(Ve),onClick:Ne(Ve,se,w)}),L.has(Ve)&&u.jsx("button",{type:"button",className:"absolute inset-0 flex items-center justify-center bg-black/35 text-white",onClick:we(Ve),"aria-label":"Replay video",children:u.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-black/60 text-2xl",children:""})})]}):u.jsx("img",{src:Ve,alt:"Generation",className:"w-full h-auto block",loading:"lazy",onClick:Ne(Ve,se,w)}),F&&u.jsx("div",{className:"absolute bottom-2 right-2 w-7 h-7 rounded-full bg-black/60 text-white flex items-center justify-center",children:u.jsx(Zw,{className:"w-4 h-4"})}),Se&&u.jsx("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/60 text-white text-xs font-medium rounded backdrop-blur-sm shadow-sm pointer-events-none",children:Le}),ue&&u.jsxs("div",{className:`absolute right-2 flex flex-col-reverse items-end gap-1 pointer-events-none ${F?"bottom-10":"bottom-2"}`,children:[ue.model&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["model: ",ue.model]}),ue.sampler&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["sampler: ",ue.sampler]}),ue.steps&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["steps: ",ue.steps]}),ue.cfg&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["cfg: ",ue.cfg]})]})]},se)})})()}):W?u.jsx("div",{className:O,children:u.jsx("span",{className:"text-sm",children:"No images saved"})}):$?u.jsx("div",{className:O,style:{minHeight:"300px"},children:o&&l!=null?u.jsxs("div",{className:"w-full max-w-xs px-4",children:[u.jsxs("p",{className:"font-semibold text-base text-gray-900 mb-3",children:["Executing: ",i||"Running"]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[Y,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,Y))}%`}})}),u.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500 mb-1",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[l,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,l))}%`}})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),u.jsx("p",{className:"font-medium text-lg text-blue-600",children:"Generating..."})]})}):u.jsxs("div",{className:O,style:{minHeight:"100px"},children:[u.jsx(y2,{className:"w-8 h-8 text-gray-300"}),u.jsx("span",{className:"text-xs mt-2 opacity-40",children:"Waiting to start..."})]})})]})}function q4(n){const o=n===void 0||Number.isNaN(n)?0:n;return o<10?`${o.toFixed(1)}s`:`${Math.round(o)}s`}function W4({listRef:n,unifiedList:o,visibleCount:s,hasLoadedOnce:l,effectiveExecutingId:i,progress:c,overallProgress:f,executingNodeLabel:m,onDeleteItem:p,onStop:g,onImageClick:b,viewerImages:x,promptOutputs:w,onOpenMenu:k,downloaded:C,firstDoneItemId:S,onScroll:j}){return u.jsxs("div",{ref:n,className:"flex-1 overflow-y-auto p-4 space-y-4 overscroll-contain scroll-container","data-queue-list":"true",onScroll:j,children:[o.length===0&&!l&&u.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-180px)] text-gray-400",children:u.jsxs("div",{className:"text-center",children:[u.jsx(up,{size:"lg",color:"gray",className:"mx-auto mb-4"}),u.jsx("p",{className:"text-lg",children:"Loading..."})]})}),o.length===0&&l&&u.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-180px)] text-gray-500",children:u.jsxs("div",{className:"text-center p-8",children:[u.jsx("div",{className:"flex items-center justify-center mb-4",children:u.jsx(Yw,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{className:"text-lg font-medium",children:"Queue is empty"}),u.jsx("p",{className:"text-sm mt-2",children:"Run a workflow to see items here"})]})}),o.slice(0,s).map(N=>u.jsx(F4,{item:N,isActuallyRunning:N.id===i,progress:c,overallProgress:f,executingNodeLabel:m,onDelete:()=>p(N),onStop:g,onImageClick:b,viewerImages:x,runningImages:w[N.id]??[],onOpenMenu:k,downloaded:C,isTopDoneItem:N.id===S},N.id)),u.jsx("div",{className:"h-20"})]})}function G4(n,o,s){y.useEffect(()=>{if(!n)return;const l=()=>o(),i=c=>{const f=c.target,m=document.getElementById(s);m&&f&&m.contains(f)||o()};return document.addEventListener("scroll",l,!0),document.addEventListener("mousedown",i),()=>{document.removeEventListener("scroll",l,!0),document.removeEventListener("mousedown",i)}},[n,o,s])}function P4({visible:n,onImageClick:o}){const s=jt(D=>D.running),l=jt(D=>D.pending),i=jt(D=>D.fetchQueue),c=jt(D=>D.deleteItem),f=jt(D=>D.interrupt),m=ce(D=>D.loadWorkflow),p=eo(D=>D.setCurrentPanel),g=ce(D=>D.workflow),b=ce(D=>D.nodeTypes),x=ce(D=>D.executingNodeId),w=ce(D=>D.workflowDurationStats),k=ce(D=>D.promptOutputs),C=qn(D=>D.history),S=qn(D=>D.fetchHistory),j=qn(D=>D.deleteItem),{isExecuting:N,progress:E,executingPromptId:H}=ce(R4(D=>({isExecuting:D.isExecuting,progress:D.progress,executingPromptId:D.executingPromptId}))),V=H||(s.length===1?s[0].prompt_id:null),L=y.useMemo(()=>{if(!g||!x)return null;const D=g.nodes.find(K=>String(K.id)===x);return D?b?.[D.type]?.display_name||D.type:`Node ${x}`},[g,x,b]),z=ka({workflow:g,runKey:H||V,isRunning:N||!!V,workflowDurationStats:w}),[I,$]=y.useState(null),[W,ie]=y.useState({}),[de,me]=y.useState(null),[Ae,Ee]=y.useState(!1),[Ie,B]=y.useState(0),le=y.useRef(null),fe=y.useRef(0),$e=y.useRef(!1),Re=y.useRef(!1);y.useEffect(()=>{n&&($e.current||Re.current&&le.current&&(le.current.scrollTop=0),Promise.all([i(),S()]).then(()=>{Ee(!0)})),$e.current=n,Re.current||(Re.current=!0)},[n,i,S]),y.useEffect(()=>{!N&&n&&S()},[N,n,S]),G4(!!I?.open,()=>$(null),"queue-image-menu");const T=async D=>{if(!D)return;const G=JSON.stringify(D,null,2),K=await $4(G);me(K?"Copied to clipboard":"Failed to copy"),setTimeout(()=>me(null),2e3)},A=async D=>{await cx(D,"image.png",G=>{ie(K=>({...K,[G]:!0}))})},O=y.useMemo(()=>{const D={};C.forEach(K=>{D[K.prompt_id]={id:K.prompt_id,status:"done",data:K,timestamp:K.timestamp}}),s.forEach(K=>{D[K.prompt_id]||(D[K.prompt_id]={id:K.prompt_id,status:"running",data:K})}),l.forEach(K=>{D[K.prompt_id]||(D[K.prompt_id]={id:K.prompt_id,status:"pending",data:K})}),H&&D[H]&&(D[H].status="running");const G=Object.values(D);return G.sort((K,Oe)=>{const Ne={pending:0,running:1,done:2};if(Ne[K.status]!==Ne[Oe.status])return Ne[K.status]-Ne[Oe.status];if(K.status==="pending"){const we=K.data.number;return Oe.data.number-we}return K.status==="done"?(Oe.timestamp||0)-(K.timestamp||0):0}),G},[l,s,C,H]),te=y.useMemo(()=>{if(O.length===0)return 0;const D=O.filter(Ne=>Ne.status==="pending").length,G=O.filter(Ne=>Ne.status==="running").length,Oe=O.filter(Ne=>Ne.status==="done").length>0?1:0;return Math.min(O.length,D+G+Oe)},[O]),X=y.useMemo(()=>{const D=O.filter(G=>G.status==="done").map(G=>G.data);return kp(D,{onlyOutput:!0,alt:"Generation"})},[O]),pe=y.useMemo(()=>O.find(G=>G.status==="done")?.id??null,[O]);y.useEffect(()=>{n&&(fe.current=O.length,queueMicrotask(()=>{B(D=>Math.max(D,te))}))},[n,O.length,te]),y.useEffect(()=>{if(!n)return;const D=le.current;D&&(Ie>=O.length||D.scrollHeight<=D.clientHeight+20&&queueMicrotask(()=>{B(G=>Math.min(O.length,G+10))}))},[n,Ie,O.length]);const Y=D=>{D.status==="pending"&&c(D.id),D.status==="done"&&j(D.id)},ue=D=>{const{top:G,right:K,imageSrc:Oe,workflow:Ne,promptId:we,hasVideoOutputs:J,hasImageOutputs:ke}=D;$({open:!0,top:G,right:K,imageSrc:Oe,workflow:Ne,promptId:we,hasVideoOutputs:J,hasImageOutputs:ke})},_=()=>{const D=le.current;if(!D)return;D.scrollHeight-D.scrollTop-D.clientHeight<400&&B(K=>Math.min(fe.current,K+10))},U=(D,G)=>{m(D,`history-${G}.json`,{source:{type:"history",promptId:G}}),p("workflow")},R=async D=>{await U4(D,G=>{ie(K=>({...K,[G]:!0}))})};return u.jsx("div",{id:"queue-panel-wrapper",className:"absolute inset-x-0 top-[69px] bottom-0",style:{display:n?"block":"none"},children:u.jsxs("div",{className:"flex flex-col bg-gray-100 min-h-full",children:[u.jsx(W4,{listRef:le,unifiedList:O,visibleCount:Ie,hasLoadedOnce:Ae,effectiveExecutingId:V,progress:E,overallProgress:z,executingNodeLabel:L,onDeleteItem:Y,onStop:f,onImageClick:o,viewerImages:X,promptOutputs:k,onOpenMenu:ue,downloaded:W,firstDoneItemId:pe,onScroll:_}),u.jsx(H4,{menuState:I,unifiedList:O,onClose:()=>$(null),onLoadWorkflow:U,onCopyWorkflow:T,onDownload:D=>A(D),onBatchDownload:R,onDeleteHistory:D=>j(D),getBatchSources:K4}),u.jsx(V4,{message:de})]})})}let yf=null,fu=[];function Hy(n){return encodeURIComponent(n)}async function Y4(){if(fu.length===0)return;const n=[...fu];fu=[];const o=n.map(s=>{const l=new Date(s.timestamp).toISOString(),i=s.data!==void 0?` | ${JSON.stringify(s.data)}`:"";return`${l} ${s.message}${i}`}).join(`
`)+`
`;try{let s="";try{const i=await fetch(`${nn}/api/userdata/${Hy("mobile-debug.log")}`);i.ok&&(s=await i.text())}catch{}const l=s+o;await fetch(`${nn}/api/userdata/${Hy("mobile-debug.log")}?overwrite=true`,{method:"POST",headers:{"Content-Type":"text/plain"},body:l})}catch(s){console.error("[debugLog] Failed to write to server:",s)}}function Q4(){yf||(yf=setTimeout(()=>{yf=null,Y4()},500))}function $f(n,o){const s={timestamp:Date.now(),message:n,data:o};fu.push(s),o!==void 0?console.log(`[DEBUG] ${n}`,o):console.log(`[DEBUG] ${n}`),Q4()}function X4(n,o,s){const l=n.closest("[data-textarea-root]")?.querySelector("[data-textarea-header]"),i=getComputedStyle(document.documentElement),c=parseFloat(i.getPropertyValue("--top-bar-offset"))||0,f=window.visualViewport?.offsetTop??0,m=window.visualViewport?.height??window.innerHeight,p=c+8,g=dx(n),b=l?.getBoundingClientRect(),x=g===window?{type:"window",scrollY:window.scrollY}:(()=>{const z=g;return{type:"element",tag:z.tagName.toLowerCase(),scrollTop:z.scrollTop,height:z.clientHeight}})();$f("textarea-scroll: start",{reason:s,behavior:o,headerTop:b?.top??null,layoutTopEdge:p,viewportTopEdge:f+c+8,viewportTop:f,viewportHeight:m,topBarOffset:c,container:x,selectionStart:n.selectionStart});const w=J4(n),k=f+c+m*.25,C=f+m-24,S=b?b.top-p:null,j=w-k,N=w>C?w-C:0;let E=0;const H=S!==null&&S>2,V=H?w-S:w,L=V<=C;H&&L?E=S??0:!H&&w<=C?E=0:(E=j,N>E&&(E=N)),E<0&&(E=0),b&&S!==null&&b.top>p+2&&E>S&&(E=S),$f("textarea-scroll: align",{caretTop:w,targetTop:k,visibilityBottom:C,deltaHeader:S,deltaCaret:j,deltaCaretMin:N,caretAfterHeader:V,caretVisibleAfterHeader:L,canAlignHeader:H,delta:E}),Math.abs(E)>8&&fx(g,E,o)}function Z4(n){const o=n.closest("[data-textarea-root]")?.querySelector("[data-textarea-header]");if(!o)return;const s=getComputedStyle(document.documentElement),i=(parseFloat(s.getPropertyValue("--top-bar-offset"))||0)+8,c=o.getBoundingClientRect(),f=c.top-i;if(Math.abs(f)<2)return;const m=dx(n);$f("textarea-scroll: align-header-request",{headerTop:c.top,layoutTopEdge:i,delta:f}),fx(m,f,"auto")}function J4(n){const o=n.getBoundingClientRect(),s=e5(n);return o.top+s-n.scrollTop}function e5(n){const o=n.selectionStart??0,s=n.value,l=document.createElement("div"),i=getComputedStyle(n),c=l.style;c.position="absolute",c.top="0",c.left="-9999px",c.visibility="hidden",c.whiteSpace="pre-wrap",c.wordWrap="break-word",c.overflowWrap="break-word",c.boxSizing=i.boxSizing,c.width=`${n.clientWidth}px`,c.padding=i.padding,c.border=i.border,c.fontFamily=i.fontFamily,c.fontSize=i.fontSize,c.fontWeight=i.fontWeight,c.fontStyle=i.fontStyle,c.letterSpacing=i.letterSpacing,c.lineHeight=i.lineHeight,c.textTransform=i.textTransform,c.textIndent=i.textIndent,c.tabSize=i.tabSize;const f=document.createTextNode(s.slice(0,o)),m=document.createElement("span");m.textContent=s.slice(o,o+1)||" ",m.style.display="inline-block",m.style.width="1px",l.appendChild(f),l.appendChild(m),document.body.appendChild(l);const p=l.getBoundingClientRect(),b=m.getBoundingClientRect().top-p.top;return document.body.removeChild(l),b}function bf(n){n?document.body.dataset.textareaFocus="true":delete document.body.dataset.textareaFocus}function dx(n){let o=n?.parentElement??null;for(;o;){const l=getComputedStyle(o).overflowY;if((l==="auto"||l==="scroll")&&o.scrollHeight>o.clientHeight)return o;o=o.parentElement}return window}function fx(n,o,s="smooth"){if(Math.abs(o)<1)return;if(n===window){window.scrollBy({top:o,behavior:s});return}const l=n;l.scrollTo({top:l.scrollTop+o,behavior:s})}function px(){const[n,o]=y.useState(!1),s=y.useRef(null),l=y.useRef(null),i=y.useRef(null);return y.useEffect(()=>{const c=m=>{const p=m.target;if(!(p instanceof HTMLElement))return;const g=p.tagName.toLowerCase();if((p.isContentEditable||g==="input"||g==="textarea"||g==="select")&&o(!0),p instanceof HTMLTextAreaElement){bf(!0);const b=()=>X4(p,"smooth","focus");s.current&&clearTimeout(s.current),l.current&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",l.current),l.current=null),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null);const x=()=>{document.activeElement===p&&(b(),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null))};if(i.current=x,document.addEventListener("selectionchange",x),setTimeout(()=>{i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null)},1200),window.visualViewport){let w=!1;const k=()=>{w=!0,b(),l.current&&(window.visualViewport?.removeEventListener("resize",l.current),l.current=null)};l.current=k,window.visualViewport.addEventListener("resize",k),s.current=setTimeout(()=>{w||b(),setTimeout(b,300),l.current&&(window.visualViewport?.removeEventListener("resize",l.current),l.current=null)},600)}else requestAnimationFrame(b)}},f=()=>{const m=document.activeElement;if(!(m instanceof HTMLElement)){o(!1),bf(!1),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null);return}const p=m.tagName.toLowerCase(),g=m.isContentEditable||p==="input"||p==="textarea"||p==="select";o(g),bf(m instanceof HTMLTextAreaElement)};return document.addEventListener("focusin",c),document.addEventListener("focusout",f),()=>{document.removeEventListener("focusin",c),document.removeEventListener("focusout",f),s.current&&clearTimeout(s.current),l.current&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",l.current),l.current=null),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null)}},[]),y.useEffect(()=>{const c=f=>{const p=f.detail?.textarea;p&&Z4(p)};return document.addEventListener("textarea-align-header",c),()=>{document.removeEventListener("textarea-align-header",c)}},[]),{isInputFocused:n}}function t5({index:n,total:o,displayName:s}){return u.jsx("div",{id:"media-viewer-header",className:"absolute top-0 inset-x-0 px-3 pt-3 pb-4 bg-gradient-to-b from-black/50 to-transparent",children:u.jsxs("div",{className:"grid grid-cols-3 items-center",children:[u.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[n+1," / ",o]}),u.jsx("div",{className:"justify-self-center text-white/90 text-sm font-medium max-w-[70vw] truncate",children:s}),u.jsx("div",{})]})})}function n5({onClick:n}){return u.jsx("button",{type:"button",onClick:n,"aria-label":"Delete output",className:"pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-red-500 flex items-center justify-center hover:bg-black/60 transition-colors",children:u.jsx(Do,{className:"w-5 h-5"})})}function o5({onClick:n}){return u.jsx("button",{type:"button",onClick:n,"aria-label":"Load workflow",className:"pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors",children:u.jsx(gs,{className:"w-5 h-5"})})}function r5({onClick:n}){return u.jsx("button",{type:"button",onClick:n,"aria-label":"Use in workflow",className:"pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors",children:u.jsx(ob,{className:"w-5 h-5"})})}function s5({onClick:n,disabled:o}){return u.jsx("button",{type:"button",onClick:n,"aria-label":"Toggle metadata",className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${o?"opacity-40":""}`,disabled:o,children:u.jsx(nb,{className:"w-5 h-5"})})}function l5({isVideo:n,showMetadataToggle:o,canToggleMetadata:s,onDelete:l,onLoadWorkflow:i,onUseInWorkflow:c,onToggleMetadata:f}){return u.jsxs("div",{className:"absolute inset-x-0 px-3 pb-2 pt-2 flex items-center justify-between",style:{bottom:"calc(var(--bottom-bar-offset, 0px) + 4px)"},children:[u.jsx(n5,{onClick:l}),!n&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(o5,{onClick:i}),u.jsx(r5,{onClick:c}),o&&u.jsx(s5,{onClick:f,disabled:!s})]})]})}function a5({isVideo:n,showMetadataToggle:o,showMetadataOverlay:s,metadataIsLoading:l,metadata:i,durationLabel:c}){return o?u.jsx("div",{className:`absolute right-3 flex flex-col items-end gap-1 pointer-events-none transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,style:{bottom:n?"calc(var(--bottom-bar-offset, 0px) + 120px)":"calc(var(--bottom-bar-offset, 0px) + 64px)"},children:l?u.jsx("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:"Loading metadata..."}):i?u.jsxs(u.Fragment,{children:[i.model&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["model: ",i.model]}),i.sampler&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["sampler: ",i.sampler]}),i.steps&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["steps: ",i.steps]}),i.cfg&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["cfg: ",i.cfg]}),c&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["time: ",c]})]}):u.jsx("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:"No metadata found"})}):null}const i5={x:0,y:0},Ff=2100,xf=Ff+10;function hx({open:n,items:o,index:s,onIndexChange:l,onClose:i,onDelete:c,onLoadWorkflow:f,onLoadInWorkflow:m,showMetadataToggle:p=!1,showLoadingPlaceholder:g=!1,loadingProgress:b=0,loadingLabel:x,initialScale:w=1,initialTranslate:k=i5,onTransformChange:C,zoomResetKey:S}){const j=y.useRef(null),N=y.useRef(null),E=y.useRef(null),H=y.useRef(null),[V,L]=y.useState(1),[z,I]=y.useState({x:0,y:0}),$=y.useRef(1),W=y.useRef({x:0,y:0}),ie=y.useRef(null),de=y.useRef(null),me=y.useRef(null),Ae=y.useRef(null),[Ee,Ie]=y.useState(null),[B,le]=y.useState(null),[fe,$e]=y.useState(!1),[Re,T]=y.useState(!1),A=y.useRef(null),O=y.useRef("fit"),[te,X]=y.useState({}),[pe,Y]=y.useState({}),[ue,_]=y.useState(!1),{isInputFocused:U}=px(),R=s>=0?o[s]??o[0]??null:null,D=R?.filename??R?.file?.name??R?.alt??R?.src??"",G=!!(R?.mediaType==="video"||R?.file?.type==="video"||D&&Zs(D)),K=R?.file?.id??null,Oe=K?te[K]:void 0,Ne=R?.metadata??(Oe===void 0?void 0:Oe),we=u5(R?.durationSeconds),J=R?.filename||R?.alt||"Output",ke=Re&&!fe,ee=p,se=K?!!pe[K]:!1,xe=y.useCallback(()=>{$e(!1),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{$e(!0)},3e3)},[]),Ue=y.useCallback(()=>{xe(),T(Q=>!Q)},[xe]),Le=y.useCallback(()=>{R&&(xe(),c(R))},[R,c,xe]),Ve=y.useCallback(()=>{R&&(xe(),f(R))},[R,f,xe]),F=y.useCallback(()=>{R&&(xe(),m(R))},[R,m,xe]);y.useEffect(()=>(n?queueMicrotask(xe):A.current&&clearTimeout(A.current),()=>{A.current&&clearTimeout(A.current)}),[n,xe]),y.useLayoutEffect(()=>{n&&(L(w),I(k),$.current=w,W.current=k,ie.current=null,de.current=null,me.current=null,Ae.current=null,O.current="fit")},[n,s,w,k]),y.useEffect(()=>{H.current=null,Ie(null),_(!1)},[R?.src]),y.useEffect(()=>{if(n)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[n]),y.useEffect(()=>{n&&C&&C(V,z)},[n,V,z,C]),y.useEffect(()=>{if(!n)return;const Q=re=>{re.key==="Escape"&&i()};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[n,i]),y.useEffect(()=>{if(!n||!p||!R?.file||R.metadata||!K||Ne!==void 0||se)return;const Q=K.startsWith("input/")?"input":"output",re=K.startsWith(`${Q}/`)?K.slice(Q.length+1):K;Y(ge=>({...ge,[K]:!0})),Q1(re,Q).then(ge=>{const Te=ge?.prompt?Cp(ge.prompt):null,Ke=Te&&Object.keys(Te).length>0?Te:null;X(Me=>({...Me,[K]:Ke}))}).catch(()=>{X(ge=>({...ge,[K]:null}))}).finally(()=>{Y(ge=>({...ge,[K]:!1}))})},[n,p,R,K,Ne,se]);const Se=y.useMemo(()=>!Ee||!B?null:B.height/Ee.height,[Ee,B]),Be=y.useMemo(()=>Se===null?1:Math.min(1,Se),[Se]),Ge=y.useMemo(()=>Se===null?1:Math.max(1,Se),[Se]),et=(Q=V,re=Ee)=>{if(!re||!B)return{x:0,y:0};const ge=re.width*Q,Te=re.height*Q;return{x:ge<B.width?(B.width-ge)/2:0,y:Te<B.height?(B.height-Te)/2:0}},Ye=y.useCallback((Q,re=V)=>{if(!Ee||!B)return Q;const ge=B.width,Te=B.height,Ke=Ee.width*re,Me=Ee.height*re,it=Ke<=ge?0:Math.max(ge-Ke,Math.min(0,Q.x)),tt=Me<=Te?0:Math.max(Te-Me,Math.min(0,Q.y));return{x:it,y:tt}},[Ee,B,V]),rt=y.useRef(Ye),Pe=y.useCallback(Q=>{let re=Be;if(Q==="cover"?re=Ge:re=Be,O.current=Q,$.current=re,L(re),!Ee||!B)W.current={x:0,y:0},I({x:0,y:0});else{const ge=Ee.width*re,Te=Ee.height*re,Ke={x:(B.width-ge)/2,y:(B.height-Te)/2},Me=Ye(Ke,re);W.current=Me,I(Me)}},[Ee,Ye,B,Ge,Be]),qe=y.useRef(Pe);y.useEffect(()=>{rt.current=Ye},[Ye]),y.useEffect(()=>{qe.current=Pe},[Pe]);const at=Q=>{const re=Q.currentTarget;H.current={width:re.naturalWidth,height:re.naturalHeight};const ge=j.current;if(!ge||re.naturalWidth===0)return;const Te=ge.clientWidth,Ke=ge.clientHeight,Me=Te/re.naturalWidth;Ie({width:Te,height:re.naturalHeight*Me}),le({width:Te,height:Ke})};y.useEffect(()=>{if(G||!n)return;const Q=N.current,re=j.current;if(!Q||!re)return;const ge=()=>{const Ke=H.current,Me=re.clientWidth,it=re.clientHeight;if(le({width:Me,height:it}),!Ke||Ke.width===0)return;const tt=Me/Ke.width,nt=Ke.height*tt;Ie({width:Me,height:nt});const st=rt.current(W.current);W.current=st,I(st)};ge();const Te=new ResizeObserver(ge);return Te.observe(re),()=>Te.disconnect()},[n,R?.src,G]),y.useEffect(()=>{G||!n||!Ee||!B||qe.current(O.current)},[n,R?.src,Ee,B,G]),y.useEffect(()=>{n&&S!==void 0&&qe.current(O.current)},[n,S]);const pt=()=>{const Q=N.current;if(!Q)return;const re=$.current,ge=W.current,Te=et(re);Q.style.transform=`translate3d(${Te.x+ge.x}px, ${Te.y+ge.y}px, 0) scale(${re})`},Mt=Q=>{if(G){const ge=E.current;if(ge&&Q.target===ge){const Te=ge.getBoundingClientRect();if(Q.clientY>Te.bottom-60)return}}Q.currentTarget.setPointerCapture(Q.pointerId);const re=vf(j.current);if(re.set(Q.pointerId,{x:Q.clientX,y:Q.clientY}),re.size===1){if(de.current={x:Q.clientX,y:Q.clientY,time:Date.now()},!G){ie.current={x:Q.clientX-W.current.x,y:Q.clientY-W.current.y};const ge=N.current;ge&&(ge.style.transition="none")}}else if(re.size===2&&!G){const[ge,Te]=Array.from(re.values()),Ke=Math.hypot(Te.x-ge.x,Te.y-ge.y),Me=(ge.x+Te.x)/2,it=(ge.y+Te.y)/2,tt=j.current?.getBoundingClientRect(),nt=$.current,st=W.current,wt=et(nt),gt=tt?{x:(Me-tt.left-wt.x-st.x)/nt,y:(it-tt.top-wt.y-st.y)/nt}:void 0;me.current={distance:Ke,scale:nt,centerX:Me,centerY:it,imagePoint:gt}}},Wt=Q=>{const re=vf(j.current);if(re.has(Q.pointerId)){if(re.set(Q.pointerId,{x:Q.clientX,y:Q.clientY}),re.size===2&&me.current&&!G){const ge=me.current,[Te,Ke]=Array.from(re.values()),Me=Math.hypot(Ke.x-Te.x,Ke.y-Te.y),tt=Math.max(Be,Math.min(5,ge.scale*(Me/ge.distance)));$.current=tt;const nt=j.current?.getBoundingClientRect(),st=(Te.x+Ke.x)/2,wt=(Te.y+Ke.y)/2;if(nt&&ge.imagePoint){const gt=et(tt),St={x:st-nt.left-gt.x-ge.imagePoint.x*tt,y:wt-nt.top-gt.y-ge.imagePoint.y*tt};W.current=Ye(St,tt)}else W.current=Ye(W.current,tt);pt();return}if(re.size===1&&!G){const ge=$.current;(ge>1||Ee&&j.current&&Ee.height*ge>j.current.clientHeight+1)&&ie.current&&(W.current=Ye({x:Q.clientX-ie.current.x,y:Q.clientY-ie.current.y},ge),pt())}}},Yt=Q=>{const re=vf(j.current);if(re.delete(Q.pointerId),re.size<2){if(re.size===1&&me.current){const[ge]=Array.from(re.values());ie.current={x:ge.x-W.current.x,y:ge.y-W.current.y}}me.current=null}if(re.size===0){const ge=N.current;ge&&(ge.style.transition="transform 0.05s linear");const Te=Date.now(),Ke=Ae.current,Me=Ke?Q.clientX-Ke.x:0,it=Ke?Q.clientY-Ke.y:0,tt=!!(Ke&&Te-Ke.time<300&&Math.hypot(Me,it)<24);if(!G&&tt){Ae.current=null;const nt=O.current;Pe(nt==="fit"?"cover":"fit"),xe()}else{Ae.current={time:Te,x:Q.clientX,y:Q.clientY};const nt=de.current;if(!U&&nt){const st=Q.clientX-nt.x,wt=Q.clientY-nt.y,gt=Date.now()-nt.time,St=Math.abs(st),yt=Math.abs(wt),ft=$.current,Et=Math.abs(ft-Be)<.05||Math.abs(ft-Ge)<.05,Ot=gt<250&&St<10&&yt<10;gt<=350&&St>60&&St>yt&&Et?st<0?s<o.length-1&&l(s+1):st>0&&s>0&&l(s-1):Ot&&xe()}L($.current),I(W.current)}ie.current=null}},be=Q=>{if(G||!Q.ctrlKey)return;Q.preventDefault();const re=-Q.deltaY*.005,ge=Math.max(Be,Math.min(5,$.current+re));$.current=ge,L(ge);const Te=Ye(W.current,ge);W.current=Te,I(Te)};return n?!R&&!g?Mn.createPortal(u.jsxs("div",{className:"fixed inset-0 bg-black flex flex-col items-center justify-center text-white",style:{zIndex:Ff},role:"dialog","aria-modal":"true",children:[u.jsx(ya,{onClick:i,buttonSize:9,iconSize:6,zIndex:xf}),u.jsx("p",{className:"text-gray-400 mb-2",children:"No images to display"}),u.jsxs("p",{className:"text-gray-500 text-sm",children:["images: ",o.length,", index: ",s]})]}),document.body):Mn.createPortal(u.jsxs("div",{id:"media-viewer-overlay",className:"fixed inset-0 bg-black",style:{zIndex:Ff},onWheel:be,children:[u.jsx("div",{ref:j,className:`absolute inset-x-0 top-0 overflow-hidden ${G?"":"touch-none"}`,style:{overscrollBehavior:"contain",height:"calc(100vh - var(--bottom-bar-offset, 0px))",zIndex:1},onPointerDown:Mt,onPointerMove:Wt,onPointerUp:Yt,onPointerCancel:Yt,children:g?u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-gray-600 border-t-white rounded-full animate-spin"}),u.jsx("div",{className:"mt-4 w-48 h-2 rounded-full bg-gray-700 overflow-hidden",children:u.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,b))}%`}})}),u.jsx("div",{className:"mt-2 text-sm text-gray-300",children:x??`${Math.min(100,Math.max(0,b))}%`})]}):R&&u.jsx(u.Fragment,{children:G?u.jsxs(u.Fragment,{children:[u.jsx("video",{ref:E,src:R.src,controls:!0,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-contain select-none",onDragStart:Q=>Q.preventDefault(),onError:()=>_(!0)}),ue&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-sm bg-black/60",children:"Unable to play this video."})]}):u.jsx("img",{ref:N,src:R.src,alt:R.alt||"Generation",className:"w-full h-auto block select-none relative",draggable:!1,onLoad:at,style:{transform:`translate3d(${et(V).x+z.x}px, ${et(V).y+z.y}px, 0) scale(${V})`,transformOrigin:"top left",willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"}})})}),u.jsx(ya,{onClick:i,buttonSize:9,iconSize:6,isIdle:fe,zIndex:xf}),u.jsx("div",{className:`absolute inset-0 pointer-events-none transition-opacity duration-300 ${fe?"opacity-0":"opacity-100"}`,style:{zIndex:xf},children:R&&u.jsxs(u.Fragment,{children:[u.jsx(t5,{index:s,total:o.length,displayName:J}),u.jsx(l5,{isVideo:G,showMetadataToggle:p,canToggleMetadata:ee,onDelete:Le,onLoadWorkflow:Ve,onUseInWorkflow:F,onToggleMetadata:Ue}),u.jsx(a5,{isVideo:G,showMetadataToggle:p,showMetadataOverlay:ke,metadataIsLoading:se,metadata:Ne,durationLabel:we})]})})]}),document.body):null}function vf(n){const o=n;return o?(o.__activePointers||(o.__activePointers=new Map),o.__activePointers):new Map}function u5(n){const o=n===void 0||Number.isNaN(n)?0:n;return o===0?"":o<10?`${o.toFixed(1)}s`:`${Math.round(o)}s`}function Ou(n){return n.id.startsWith("input/")?"input":"output"}function al(n,o){const l=`${o??Ou(n)}/`;return n.id.startsWith(l)?n.id.slice(l.length):n.id}function c5(n){return`output-${n.replace(/[\\/]/g,"_")}.json`}async function mx(n){const{file:o,source:s,loadWorkflow:l,onLoaded:i,onError:c}=n;try{const f=s??Ou(o),m=al(o,f),p=await Y1(m,f);l(p,c5(m),{source:{type:"other"}}),i?.()}catch(f){throw c?.(f),f}}function d5(n){const{workflow:o,nodeTypes:s,nodeId:l}=n;if(!o||!s)return null;const i=o.nodes.find(f=>f.id===l);if(!i)return null;const c=["image","filename","file"];for(const f of c){const m=Fr(o,s,i,f);if(m!==null)return{node:i,index:m,name:f}}return null}function Vy(n,o){const s=n.title,l=typeof s=="string"&&s.trim()?s.trim():null,i=o?.[n.type];return l||i?.display_name||n.type}function f5(n){const o=n.replace(/^\/+/,""),s=o.split("/").filter(Boolean);return s.length<=1?{filename:o,subfolder:""}:{filename:s.pop()??o,subfolder:s.join("/")}}async function p5(n,o){if(o==="input")return al(n,o);const s=al(n,o),{filename:l,subfolder:i}=f5(s),c=n.fullUrl||mo(l,i,o),f=await fetch(c);if(!f.ok)throw new Error("Failed to fetch image data.");const m=await f.blob(),p=l||n.name||"image.png",g=new File([m],p,{type:m.type||"image/png"}),b=await Yy(g,{type:"input",overwrite:!0}),x=b.subfolder?`${b.subfolder}/${b.name}`:b.name;if(!(await fetch(mo(b.name,b.subfolder??"","input"))).ok)throw new Error("Uploaded image was not found in inputs.");return x}function gx({open:n,file:o,source:s,onClose:l,onLoaded:i}){const c=ce(E=>E.workflow),f=ce(E=>E.nodeTypes),m=ce(E=>E.setNodeTypes),p=ce(E=>E.updateNodeWidget),g=ln(E=>E.clearNodeError),b=ce(E=>E.scrollToNode),x=eo(E=>E.setCurrentPanel),[w,k]=y.useState(null),[C,S]=y.useState(null),j=y.useMemo(()=>c?c.nodes.filter(E=>/loadimage/i.test(E.type)).map(E=>({node:E,stableKey:E.stableKey??null})).filter(E=>E.stableKey!==null):[],[c]);y.useEffect(()=>{n||(k(null),S(null))},[n]);const N=async E=>{if(!(!o||!c)){S(E),k(null);try{const H=c.nodes.find(z=>z.stableKey===E);if(!H)throw new Error("Could not resolve selected node.");const V=d5({workflow:c,nodeTypes:f,nodeId:H.id});if(!V)throw new Error("Selected node does not accept image inputs.");const L=await p5(o,s);if(s!=="input")try{const z=await Yf();m(z)}catch(z){console.warn("Failed to refresh node types after upload:",z)}p(E,V.index,L,V.name),g(V.node.id),x("workflow"),i?.(),setTimeout(()=>{b(E,Vy(V.node,f))},150)}catch(H){console.error("Failed to load image into node:",H),k(H instanceof Error?H.message:"Failed to load image.")}finally{S(null)}}};return!n||!o?null:u.jsx("div",{id:"outputs-load-node-overlay",className:"fixed inset-0 z-[2150] bg-black/50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-load-node-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:E=>E.stopPropagation(),children:[u.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:"Load image into node"}),u.jsx("div",{className:"px-4 pt-3 text-xs text-gray-500",children:o.name}),u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[j.length===0&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"No Load Image nodes found in the current workflow."}),j.map(({node:E,stableKey:H})=>{const V=Vy(E,f),L=C===H;return u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed",onClick:()=>N(H),disabled:C!==null,children:[u.jsxs("span",{className:"text-gray-500 dark:text-gray-300",children:["#",E.id]}),u.jsx("span",{className:"flex-1 text-gray-900 dark:text-gray-100 truncate",children:V}),L&&u.jsx("span",{className:"text-xs text-gray-400",children:"Loading"})]},`load-node-${H}`)})]}),w&&u.jsx("div",{className:"px-4 py-2 text-xs text-red-600 border-t border-gray-100",children:w}),u.jsx("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end",children:u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg disabled:opacity-60",onClick:l,disabled:C!==null,children:"Close"})})]})})}function h5({onClose:n}){const o=Mo(Y=>Y.viewerOpen),s=Mo(Y=>Y.viewerImages),l=Mo(Y=>Y.viewerIndex),i=Mo(Y=>Y.viewerScale),c=Mo(Y=>Y.viewerTranslate),f=ce(Y=>Y.followQueue),m=Mo(Y=>Y.setViewerState),p=ce(Y=>Y.workflow),g=ce(Y=>Y.originalWorkflow),b=ce(Y=>Y.workflowDurationStats),x=ce(Y=>Y.isExecuting),w=ce(Y=>Y.executingPromptId),k=eo(Y=>Y.setCurrentPanel),C=ce(Y=>Y.loadWorkflow),S=jt(Y=>Y.running),j=qn(Y=>Y.history),[N,E]=y.useState(null),[H,V]=y.useState(null),[L,z]=y.useState(null),[I,$]=y.useState(!1),W=y.useRef(null),ie=y.useMemo(()=>!!(p&&g&&JSON.stringify(p)!==JSON.stringify(g)),[p,g]),de=y.useMemo(()=>!o||!f?null:j[0]?.prompt_id??null,[o,f,j]),me=w||(S.length===1?S[0].prompt_id:null),Ae=ka({workflow:p,runKey:me,isRunning:x||S.length>0,workflowDurationStats:b}),Ee=x||S.length>0,Ie=Math.min(100,Math.max(0,Ae??0)),le=!(l>=0?s[l]??s[0]??null:null)&&(f||Ee)||l<0&&Ee;y.useEffect(()=>{if(!o||!f){W.current=null;return}!W.current&&j[0]?.prompt_id&&(W.current=j[0]?.prompt_id??null)},[o,f,j]),y.useEffect(()=>{if(!o||!f||j.length===0)return;const Y=j[0];if(W.current===Y.prompt_id||Y.outputs.images.filter(U=>U.type==="output").length===0)return;const _=kp(j,{onlyOutput:!0,alt:"Generation"});_.length!==0&&(W.current=Y.prompt_id,m({viewerImages:_,viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}}))},[o,f,j,m]);const fe=Y=>{m({viewerIndex:Y})},$e=(Y,ue)=>{m({viewerScale:Y,viewerTranslate:ue})},Re=Y=>{Y.file&&E(Y.file)},T=async()=>{if(!N)return;const Y=N;try{const ue=al(Y);await Cf(ue,Ou(Y));const _=s.filter(D=>D.file?.id!==Y.id),U=s.findIndex(D=>D.file?.id===Y.id),R=_.length===0?0:U<0?l:U<l?l-1:U===l?Math.min(l,_.length-1):l;m({viewerImages:_,viewerIndex:R}),_.length===0&&n()}catch(ue){console.error("Failed to delete file:",ue),window.alert("Failed to delete file.")}finally{E(null)}},A=Y=>{if(Y.file){if(ie){V(Y.file);return}O(Y.file)}},O=async Y=>{try{await mx({file:Y,loadWorkflow:C,onLoaded:()=>{n(),queueMicrotask(()=>k("workflow"))}})}catch(ue){console.error("Failed to load workflow from file:",ue),window.alert("Failed to load workflow from file.")}finally{V(null)}},te=Y=>{!Y.file||Y.file.type!=="image"||(z(Y.file),$(!0))},X=()=>{$(!1),z(null)},pe=()=>{X(),n(),queueMicrotask(()=>k("workflow"))};return o?u.jsxs(u.Fragment,{children:[u.jsx(hx,{open:o,items:s,index:l,onIndexChange:fe,onClose:n,onDelete:Re,onLoadWorkflow:A,onLoadInWorkflow:te,showMetadataToggle:!0,showLoadingPlaceholder:le,loadingProgress:Ie,loadingLabel:Ee?`${Ie}%`:"Waiting for output",initialScale:i,initialTranslate:c,onTransformChange:$e,zoomResetKey:de}),H&&Mn.createPortal(u.jsx(qo,{onClose:()=>V(null),title:"Unsaved changes",description:"Are you sure you want to load this workflow? You have unsaved changes.",actions:[{label:"Cancel",onClick:()=>V(null),className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100"},{label:"Continue",onClick:()=>{(async()=>(await O(H),V(null)))()},className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700"}]}),document.body),u.jsx(gx,{open:I,file:L,source:L?Ou(L):"output",onClose:X,onLoaded:pe}),N&&Mn.createPortal(u.jsx(qo,{onClose:()=>E(null),title:"Delete file?",description:`This will permanently delete "${N.name}" from the server. This cannot be undone.`,actions:[{label:"Cancel",onClick:()=>E(null),className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100"},{label:"Delete",onClick:()=>{T()},className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700"}]}),document.body)]}):null}function m5(){const[n,o]=y.useState(!1),s=y.useRef(null),l=y.useRef(null),i=y.useRef({}),c=y.useRef({setExecutionState:ce.getState().setExecutionState,setNodeOutput:ce.getState().setNodeOutput,clearNodeOutputs:ce.getState().clearNodeOutputs,addPromptOutputs:ce.getState().addPromptOutputs,clearPromptOutputs:ce.getState().clearPromptOutputs,applyControlAfterGenerate:ce.getState().applyControlAfterGenerate,updateFromStatus:jt.getState().updateFromStatus,fetchQueue:jt.getState().fetchQueue,addHistoryEntry:qn.getState().addHistoryEntry,fetchHistory:qn.getState().fetchHistory});y.useEffect(()=>{c.current={setExecutionState:ce.getState().setExecutionState,setNodeOutput:ce.getState().setNodeOutput,clearNodeOutputs:ce.getState().clearNodeOutputs,addPromptOutputs:ce.getState().addPromptOutputs,clearPromptOutputs:ce.getState().clearPromptOutputs,applyControlAfterGenerate:ce.getState().applyControlAfterGenerate,updateFromStatus:jt.getState().updateFromStatus,fetchQueue:jt.getState().fetchQueue,addHistoryEntry:qn.getState().addHistoryEntry,fetchHistory:qn.getState().fetchHistory}},[]);const f=y.useRef(null);return y.useEffect(()=>{const m=x=>{if(x==null)return null;const w=Number(x);if(!Number.isFinite(w))return null;const C=ce.getState().workflow;if(!C)return null;const S=C.nodes.filter(N=>N.id===w);return S.length===0?null:(S.find(N=>N.stableKey)??S[0])?.stableKey??null},p=x=>{const{setExecutionState:w,setNodeOutput:k,addPromptOutputs:C,clearPromptOutputs:S,updateFromStatus:j,fetchQueue:N,addHistoryEntry:E,fetchHistory:H}=c.current,V=x;switch(V.type){case"status":{const z=V.data.status.exec_info.queue_remaining;j(z),z===0&&w(!1,null,null,0);break}case"progress":{const L=V,{value:z,max:I,node:$,prompt_id:W}=L.data,ie=Math.round(z/I*100);w(!0,m($),W||null,ie);break}case"executing":{const L=V,z=L.data.node,I=L.data.prompt_id;if(z===null){if(w(!1,null,null,0),c.current.applyControlAfterGenerate(),I){const $=jt.getState().running.find(ie=>ie.prompt_id===I),W=i.current[I]||[];$&&E({prompt_id:I,timestamp:Date.now(),outputs:{images:W},prompt:$.prompt}),delete i.current[I],S(I)}N(),H()}else{I&&I!==f.current&&(f.current=I),w(!0,m(z),I||null,0);const $=jt.getState();I&&!$.running.some(W=>W.prompt_id===I)&&N()}break}case"executed":{const L=V,{node:z,prompt_id:I,output:$}=L.data;if($.images){i.current[I]||(i.current[I]=[]),i.current[I].push(...$.images),C(I,$.images);const W=m(z);W&&k(W,$.images)}break}case"execution_error":{w(!1,null,null,0),S(),N(),H();break}}},g=()=>{s.current?.readyState!==WebSocket.OPEN&&(s.current=G1(Wy,p,async()=>{o(!0);const{fetchQueue:x,fetchHistory:w,setExecutionState:k}=c.current;await x(),w();const C=jt.getState(),S=ce.getState();if(C.running.length>0&&!S.executingPromptId){const j=C.running[0];k(!0,null,j.prompt_id,0)}},()=>{o(!1),l.current=setTimeout(g,2e3)},()=>{o(!1)}))};g();const b=setInterval(()=>{const{fetchQueue:x,fetchHistory:w}=c.current;jt.getState().running.length>0&&(x(),w())},2e3);return()=>{l.current&&clearTimeout(l.current),s.current&&s.current.close(),clearInterval(b)}},[]),{isConnected:n}}function g5({onSwipeLeft:n,onSwipeRight:o,onSwipeUp:s,onSwipeDown:l,enabled:i=!0,threshold:c=50,preventScroll:f=!0,deferResetOnSwipe:m=!1,deferResetDurationMs:p=350}){const[g,b]=y.useState(0),[x,w]=y.useState(!1),[k,C]=y.useState(i),S=y.useRef(null),j=y.useRef(null);y.useEffect(()=>{C(i)},[i]);const N=y.useCallback(()=>{S.current=null,w(!1),b(0)},[]),E=y.useCallback(H=>{C(H)},[]);return y.useEffect(()=>{if(!k)return;const H=I=>{if(!(I instanceof HTMLElement))return!1;if(I.isContentEditable)return!0;const $=I.tagName.toLowerCase();return $==="input"||$==="textarea"||$==="select"},V=I=>{if(H(I.target)||H(document.activeElement))return;j.current!==null&&(window.clearTimeout(j.current),j.current=null);const $=I.touches[0];S.current={startX:$.clientX,startY:$.clientY,currentX:$.clientX,currentY:$.clientY,isHorizontal:null,isTracking:!0}},L=I=>{const $=S.current;if(!$?.isTracking)return;const W=I.touches[0],ie=W.clientX-$.startX,de=W.clientY-$.startY;if($.isHorizontal===null){if(Math.abs(ie)>20||Math.abs(de)>20){const me=Math.abs(ie)>Math.abs(de);$.isHorizontal=me,me?(ie>0?!!o:!!n)?w(!0):$.isTracking=!1:(de>0?l:s)||($.isTracking=!1)}return}$.isHorizontal?(f&&I.cancelable&&I.preventDefault(),$.currentX=W.clientX,b(W.clientX-$.startX)):$.currentY=W.clientY},z=()=>{const I=S.current;if(!I?.isTracking){N();return}const $=I.currentX-I.startX,W=I.currentY-I.startY,ie=c||window.innerWidth*.25;let de=!1;I.isHorizontal===!0?$<-ie&&n?(n(),de=!0):$>ie&&o&&(o(),de=!0):I.isHorizontal===!1&&(W<-ie&&s?(s(),de=!0):W>ie&&l&&(l(),de=!0)),de?m?(S.current=null,w(!1),j.current!==null&&window.clearTimeout(j.current),j.current=window.setTimeout(()=>{N(),j.current=null},p)):requestAnimationFrame(()=>{N()}):N()};return document.addEventListener("touchstart",V,{passive:!0}),document.addEventListener("touchmove",L,{passive:!1}),document.addEventListener("touchend",z,{passive:!0}),document.addEventListener("touchcancel",z,{passive:!0}),()=>{document.removeEventListener("touchstart",V),document.removeEventListener("touchmove",L),document.removeEventListener("touchend",z),document.removeEventListener("touchcancel",z),j.current!==null&&(window.clearTimeout(j.current),j.current=null),N()}},[k,n,o,s,l,c,f,m,p,N]),{swipeOffset:g,isSwiping:x,setSwipeEnabled:E,resetSwipeState:N}}function Ky({idPrefix:n,title:o,items:s,selectedValue:l,onSelect:i,gridClassName:c="grid grid-cols-2 gap-2",buttonClassName:f=""}){return u.jsxs("div",{id:`${n}-container`,children:[u.jsx("h4",{id:`${n}-label`,className:"text-sm font-medium text-gray-700 mb-2",children:o}),u.jsx("div",{id:`${n}-options`,className:c,children:s.map(m=>{const p=l===m.value;return u.jsxs("button",{className:`px-3 py-2 rounded-lg text-sm border ${f} ${p?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,onClick:()=>i(m.value),children:[m.label,p&&m.suffix?m.suffix:""]},m.value)})})]})}function y5({checked:n,onChange:o}){return u.jsxs("div",{id:"favorites-toggle-container",className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"favOnly",checked:n,onChange:s=>o(s.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"}),u.jsx("label",{htmlFor:"favOnly",className:"text-sm text-gray-700",children:"Show Favorites Only"})]})}function b5({open:n,onClose:o,filter:s,sort:l,onChangeFilter:i,onChangeSort:c}){if(!n)return null;const f=l?.mode||"modified",m=f.includes("name")?"name":f.includes("size")?"size":"date",p=(()=>{const b=f.endsWith("reverse");return m==="date"?b?"asc":"desc":b?"desc":"asc"})(),g=(b,x)=>{let w;b==="name"?w=x==="asc"?"name":"name-reverse":b==="size"?w=x==="asc"?"size":"size-reverse":w=x==="desc"?"modified":"modified-reverse",c({mode:w})};return u.jsx("div",{id:"filter-modal-root",className:"fixed inset-0 z-[1600] bg-black/50 flex items-center justify-center p-4",onClick:o,children:u.jsxs("div",{id:"filter-modal-content",className:"bg-white rounded-xl shadow-lg w-full max-w-sm max-h-[90vh] overflow-y-auto",onClick:b=>b.stopPropagation(),children:[u.jsxs("div",{id:"filter-modal-header",className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[u.jsx("h3",{id:"filter-modal-title",className:"font-semibold text-gray-900",children:"Filter & Sort"}),u.jsx(ya,{variant:"plain",onClick:o,buttonSize:8,iconSize:6})]}),u.jsxs("div",{id:"filter-modal-body",className:"p-4 space-y-6",children:[u.jsx(Ky,{idPrefix:"sort-group",title:"Sort By",items:[{value:"name",label:"Name",suffix:m==="name"?p==="asc"?" ":" ":void 0},{value:"date",label:"Date",suffix:m==="date"?p==="asc"?" ":" ":void 0},{value:"size",label:"Size",suffix:m==="size"?p==="asc"?" ":" ":void 0}],selectedValue:m,onSelect:b=>{g(b,m===b?p==="asc"?"desc":"asc":b==="name"?"asc":"desc")}}),u.jsx(Ky,{idPrefix:"filter-type-group",title:"File Type",items:[{value:"all",label:"All"},{value:"image",label:"Image"},{value:"video",label:"Video"}],selectedValue:s.type,onSelect:b=>i({type:b}),gridClassName:"flex gap-2",buttonClassName:"flex-1"}),u.jsxs("div",{id:"search-input-container",children:[u.jsx("label",{id:"search-input-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),u.jsx(Ca,{placeholder:"Search by filename...",value:s.search,onChange:b=>i({search:b})})]}),u.jsx(y5,{checked:s.favoritesOnly,onChange:b=>i({favoritesOnly:b})})]}),u.jsx("div",{id:"filter-modal-footer",className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-end",children:u.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",onClick:o,children:"Apply"})})]})})}function su({onClose:n,zIndex:o=2200,children:s}){return u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",style:{zIndex:o},onClick:n,role:"dialog","aria-modal":"true",children:u.jsx("div",{className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:l=>l.stopPropagation(),children:s})})}function x5({breadcrumbs:n,selectionMode:o,selectedCount:s,onClearSelection:l}){return u.jsx("div",{id:"outputs-panel-header",className:"px-4 py-3 flex flex-col gap-3 border-b border-gray-100",children:u.jsxs("div",{id:"outputs-header-top-row",className:"flex items-center justify-between min-h-[24px]",children:[n,o&&u.jsxs("div",{className:"selection-status-container flex items-center gap-2 shrink-0 ml-2",children:[u.jsxs("span",{className:"text-[10px] font-bold text-blue-600 uppercase",children:[s," selected"]}),u.jsx("button",{onClick:l,className:"text-[10px] text-gray-500 underline uppercase font-bold",children:"Clear"})]})]})})}function qf({file:n,viewMode:o,selectionMode:s,isSelected:l,isFavorited:i,onNavigateFolder:c,onOpen:f,onMenu:m,onToggleSelection:p}){const g=n.type==="folder",[b,x]=y.useState(!1);y.useEffect(()=>{x(!1)},[n.previewUrl,n.id]);const w=()=>{s?p(n.id):g?c(n.name):f(n)},k=C=>{C.stopPropagation(),m(n,C)};return o==="list"?u.jsxs("div",{className:`file-card-list-item flex items-center gap-3 p-2 hover:bg-gray-50 border-b border-gray-100 last:border-0 ${l?"bg-blue-50":""}`,onClick:w,children:[s&&u.jsx("div",{className:`selection-checkbox w-5 h-5 rounded border flex items-center justify-center flex-shrink-0 ${l?"bg-blue-600 border-blue-600 text-white":"border-gray-300 bg-white"}`,children:l&&u.jsx(Go,{className:"w-3.5 h-3.5"})}),u.jsx("div",{className:`file-preview-container w-10 h-10 flex-shrink-0 flex items-center justify-center rounded text-gray-500 overflow-hidden relative ${g?"":"bg-gray-100"}`,children:g?u.jsx(fr,{className:"w-6 h-6 text-amber-500"}):n.previewUrl&&!b?u.jsx("img",{src:n.previewUrl,className:"w-full h-full object-cover",loading:"lazy",onError:()=>x(!0)}):n.type==="video"?u.jsx(D0,{className:"w-5 h-5 text-gray-500"}):u.jsx("span",{className:"text-xs font-bold",children:"IMG"})}),u.jsx("div",{className:"file-info-container flex-1 min-w-0",children:u.jsx("div",{className:"file-name text-sm font-medium text-gray-900 truncate",children:n.name})}),u.jsxs("div",{className:"file-actions-container flex items-center gap-2",children:[i&&u.jsx(qr,{className:"w-4 h-4 text-yellow-500"}),u.jsx(Wr,{onClick:k,ariaLabel:"File options",buttonSize:8,iconSize:5})]})]}):u.jsxs("div",{className:"file-card-grid-item flex flex-col gap-1",children:[u.jsxs("div",{className:`relative aspect-square bg-gray-100 rounded-lg overflow-hidden transition-all ${l?"ring-4 ring-blue-500 ring-offset-2":""}`,onClick:w,children:[g?u.jsx("div",{className:"folder-grid-content w-full h-full flex flex-col items-center justify-center text-gray-500",children:u.jsx(fr,{className:"w-12 h-12 mb-2 text-amber-500"})}):n.previewUrl&&!b?u.jsx("img",{src:n.previewUrl,className:"w-full h-full object-cover",loading:"lazy",onError:()=>x(!0)}):u.jsx("div",{className:"media-placeholder w-full h-full flex items-center justify-center bg-gray-800 text-white font-bold",children:n.type==="video"?u.jsx(D0,{className:"w-10 h-10 text-white/80"}):"IMG"}),s?u.jsx("div",{className:"selection-badge-container absolute top-2 left-2",children:u.jsx("div",{className:`selection-badge w-6 h-6 rounded-full border-2 flex items-center justify-center shadow-sm ${l?"bg-blue-600 border-blue-600 text-white":"border-white bg-black/20"}`,children:l&&u.jsx(Go,{className:"w-4 h-4"})})}):u.jsxs("div",{className:"file-menu-trigger-container absolute top-1 right-1 flex flex-col items-center gap-1 text-white",children:[u.jsx(Wr,{onClick:k,ariaLabel:"File options",buttonSize:7,iconSize:4}),i&&u.jsx(qr,{className:"w-4 h-4 text-yellow-400 drop-shadow"})]}),n.type==="video"&&u.jsx("div",{className:"video-label absolute top-1 left-1 bg-black/50 px-1 rounded text-[10px] text-white",children:"VID"})]}),u.jsx("div",{className:"file-name text-xs text-gray-700 truncate px-1",children:n.name})]})}function v5({folders:n,foldersCollapsed:o,toggleFoldersCollapsed:s,selectionMode:l,selectedIds:i,favorites:c,setCurrentFolder:f,handleOpen:m,handleMenu:p,toggleSelection:g}){return n.length===0?null:u.jsxs("div",{id:"outputs-folders-section",className:"mb-4",children:[u.jsxs("button",{onClick:s,className:"flex items-center gap-2 w-full text-left mb-2 py-1 text-sm font-medium text-gray-600 hover:text-gray-900",children:[o?u.jsx(ip,{className:"w-4 h-4"}):u.jsx(bu,{className:"w-4 h-4"}),u.jsxs("span",{children:["Folders (",n.length,")"]})]}),!o&&u.jsx("div",{className:"flex flex-col border border-gray-200 rounded-lg overflow-hidden",children:n.map(b=>u.jsx(qf,{file:b,viewMode:"list",selectionMode:l,isSelected:i.includes(b.id),isFavorited:c.includes(b.id),onNavigateFolder:f,onOpen:m,onMenu:p,onToggleSelection:g},b.id))})]})}function w5({fileSections:n,collapsedSections:o,viewMode:s,selectionMode:l,selectedIds:i,favorites:c,setCurrentFolder:f,handleOpen:m,handleMenu:p,toggleSelection:g,toggleSectionCollapsed:b,selectIds:x}){return u.jsx("div",{id:"outputs-files-section",className:"flex flex-col gap-4",children:n.map(w=>u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center justify-between gap-3",children:[u.jsxs("button",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wide text-gray-500 hover:text-gray-800",onClick:()=>b(w.key),children:[o[w.key]?u.jsx(ip,{className:"w-3.5 h-3.5"}):u.jsx(bu,{className:"w-3.5 h-3.5"}),u.jsxs("span",{children:[w.label," (",w.files.length,")"]})]}),l&&u.jsx("button",{className:"text-[10px] font-bold uppercase text-blue-600 hover:text-blue-700",onClick:()=>x(w.files.map(k=>k.id)),children:"Select all"})]}),!o[w.key]&&(s==="grid"?u.jsx("div",{className:"grid grid-cols-2 gap-4 auto-rows-min",children:w.files.map(k=>u.jsx(qf,{file:k,viewMode:s,selectionMode:l,isSelected:i.includes(k.id),isFavorited:c.includes(k.id),onNavigateFolder:f,onOpen:m,onMenu:p,onToggleSelection:g},k.id))}):u.jsx("div",{className:"flex flex-col",children:w.files.map(k=>u.jsx(qf,{file:k,viewMode:s,selectionMode:l,isSelected:i.includes(k.id),isFavorited:c.includes(k.id),onNavigateFolder:f,onOpen:m,onMenu:p,onToggleSelection:g},k.id))}))]},w.key))})}function S5({menuTarget:n,favorites:o,setMenuTarget:s,menuRef:l,menuStyle:i,handleFavorite:c,handleSelectSingle:f,handleMoveSingle:m,handleRenameRequest:p,handleLoadWorkflow:g,handleLoadInWorkflow:b,handleDeleteRequest:x}){if(!n)return null;const w=[{key:"favorite",label:o.includes(n.file.id)?"Unfavorite":"Favorite",icon:o.includes(n.file.id)?u.jsx(qr,{className:"w-4 h-4"}):u.jsx(Lu,{className:"w-4 h-4"}),onClick:()=>c()},{key:"select",label:"Select",icon:u.jsx(Go,{className:"w-4 h-4"}),onClick:()=>f()},{key:"move",label:"Move",icon:u.jsx(fr,{className:"w-4 h-4"}),onClick:()=>m()},{key:"rename",label:"Rename",icon:u.jsx(sp,{className:"w-4 h-4"}),onClick:()=>p()},{key:"load-workflow",label:"Load workflow",icon:u.jsx(gs,{className:"w-4 h-4"}),onClick:()=>g(),hidden:n.file.type!=="image"},{key:"use-in-workflow",label:"Use in workflow",icon:u.jsx(ob,{className:"w-4 h-4"}),onClick:()=>b(),hidden:n.file.type!=="image"},{key:"delete",label:"Delete",icon:u.jsx(Do,{className:"w-4 h-4"}),onClick:()=>x(),color:"danger"}];return u.jsxs(u.Fragment,{children:[u.jsx("div",{id:"outputs-context-menu-overlay",className:"fixed inset-0 z-[1690]",onClick:()=>s(null),onPointerDown:k=>k.stopPropagation()}),u.jsx("div",{id:"outputs-context-menu",ref:l,className:"fixed z-[1700] min-w-44 w-max",style:i,onPointerDown:k=>k.stopPropagation(),onClick:k=>k.stopPropagation(),children:u.jsx(hr,{items:w})})]})}const Uy="outputs-folders-collapsed",N5=1440*60*1e3;function C5(n){if(!n)return"Unknown date";const o=new Date,s=new Date(o.getFullYear(),o.getMonth(),o.getDate()),l=new Date(n),i=new Date(l.getFullYear(),l.getMonth(),l.getDate()),c=Math.round((s.getTime()-i.getTime())/N5);return c===0?"Today":c===1?"Yesterday":l.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function k5({visible:n}){const{source:o,currentFolder:s,isLoading:l,viewMode:i,showHidden:c,filter:f,sort:m,favorites:p,selectionMode:g,selectedIds:b,setCurrentFolder:x,navigateToPath:w,fetchFolders:k,fetchFiles:C,toggleFavorite:S,toggleSelection:j,getDisplayedFiles:N,refresh:E,selectIds:H,toggleSelectionMode:V,setFilter:L,setSort:z}=Ut(),I=Ut(Ce=>Ce.selectionActionOpen),$=Ut(Ce=>Ce.setSelectionActionOpen),W=Ut(Ce=>Ce.filterModalOpen),ie=Ut(Ce=>Ce.setFilterModalOpen),de=Ut(Ce=>Ce.newFolderModalOpen),me=Ut(Ce=>Ce.setNewFolderModalOpen),Ae=Ut(Ce=>Ce.setOutputsViewerOpen),Ee=Ut(Ce=>Ce.addFavorites),Ie=Ut(Ce=>Ce.removeFavorites),B=Ut(Ce=>Ce.clearSelection),le=ce(Ce=>Ce.loadWorkflow),fe=eo(Ce=>Ce.setCurrentPanel),$e=ce(Ce=>Ce.workflow),Re=ce(Ce=>Ce.originalWorkflow),T=y.useMemo(()=>!!($e&&Re&&JSON.stringify($e)!==JSON.stringify(Re)),[$e,Re]),[A,O]=y.useState(null),[te,X]=y.useState(null),[pe,Y]=y.useState(null),[ue,_]=y.useState(null),[U,R]=y.useState(!1),[D,G]=y.useState(null),[K,Oe]=y.useState(""),[Ne,we]=y.useState(!1),[J,ke]=y.useState(!1),[ee,se]=y.useState(null),[xe,Ue]=y.useState([]),[Le,Ve]=y.useState(!1),[F,Se]=y.useState(""),[Be,Ge]=y.useState([]),[et,Ye]=y.useState(null),[rt,Pe]=y.useState(""),[qe,at]=y.useState(!1),[pt,Mt]=y.useState([]),[Wt,Yt]=y.useState(0),be=y.useRef(null),Q=y.useRef(null),re=y.useRef(!1),[ge,Te]=y.useState(()=>localStorage.getItem(Uy)==="true"),[Ke,Me]=y.useState({}),it=y.useRef(null),tt=y.useRef(null),nt=y.useRef(!1),st=()=>{X(null),it.current=null},wt=()=>{R(!1),Y(null),tt.current=null},gt=(Ce,ot)=>{it.current=ot?.onDeleted??null,X(Ce)},St=(Ce,ot)=>{Ce.type==="image"&&(tt.current=ot?.onLoaded??null,Y(Ce),R(!0))},{menuStyle:yt,resetMenuPosition:ft}=cp({open:!!A,buttonRef:Q,menuRef:be,repositionToken:A?.file.id,menuWidth:176,horizontalAnchorOffset:160,viewportPadding:8,bottomBarReserve:104});il({open:!!A,onDismiss:()=>{O(null),ft()},triggerRef:Q,contentRef:be}),y.useEffect(()=>{re.current=!1},[o]),y.useEffect(()=>{n&&!re.current&&!l&&(re.current=!0,k(),C())},[n,k,C,l]),y.useEffect(()=>{!n&&qe&&(at(!1),Ae(!1))},[n,qe,Ae]),y.useEffect(()=>{!n&&W&&ie(!1)},[n,W,ie]);const Et=N(),Ot=Ut(Ce=>Ce.sort.mode),on=Ce=>{const dt=N().filter(Rt=>(Rt.type==="image"||Rt.type==="video")&&Rt.fullUrl),an=dt.map(Rt=>({src:Rt.fullUrl,alt:Rt.name,mediaType:ja(Rt.name),file:Rt,filename:Rt.name})),wn=dt.findIndex(Rt=>Rt.id===Ce.id);wn>=0&&(Mt(an),Yt(wn),at(!0),Ae(!0))},Gt=()=>{at(!1),Ae(!1)},Bt=Ce=>{Ce.file&&gt(Ce.file,{onDeleted:ot=>{Mt(dt=>{const an=dt.findIndex(Rt=>Rt.file?.id===ot.id),wn=dt.filter(Rt=>Rt.file?.id!==ot.id);return Yt(Rt=>wn.length===0?0:an===-1?Rt:an<Rt?Rt-1:an===Rt?Math.min(Rt,wn.length-1):Rt),wn.length===0&&(at(!1),Ae(!1)),wn})}})},dn=Ce=>{!Ce.file||Ce.file.type!=="image"||St(Ce.file,{onLoaded:()=>{at(!1),Ae(!1)}})},pn=Ce=>{Ce.file&&On(Ce.file,{closeViewer:!0})},{folders:Wn,nonFolders:Kn}=y.useMemo(()=>{const Ce=[],ot=[];for(const dt of Et)dt.type==="folder"?Ce.push(dt):ot.push(dt);return{folders:Ce,nonFolders:ot}},[Et]),no=Ot.startsWith("name"),oo=Ot.startsWith("size"),P=f.favoritesOnly||!no&&!oo,De=y.useMemo(()=>{if(no){const ot=[];for(const dt of Kn){const an=dt.name?.trim()?.charAt(0).toUpperCase()||"#",wn=`Starting with ${an}`,Rt=ot[ot.length-1];Rt&&Rt.key===an?Rt.files.push(dt):ot.push({key:an,label:wn,files:[dt]})}return ot}if(oo){const ot=[];for(const dt of Kn){const wn=(dt.size??0)/(1024*1024),Rt=wn<1?0:Math.round(wn),yo=Rt===0?"<1MB":`${Rt}MB`,fl=Rt===0?"<1MB":`${Rt}MB`,Pr=ot[ot.length-1];Pr&&Pr.key===yo?Pr.files.push(dt):ot.push({key:yo,label:fl,files:[dt]})}return ot}if(!P)return[{key:"all",label:"All files",files:Kn}];const Ce=[];for(const ot of Kn){const dt=ot.date?new Date(ot.date).toISOString().slice(0,10):"unknown",an=C5(ot.date),wn=Ce[Ce.length-1];wn&&wn.key===dt?wn.files.push(ot):Ce.push({key:dt,label:an,files:[ot]})}return Ce},[Kn,P,no,oo]),oe=()=>{const Ce=!ge;Te(Ce),localStorage.setItem(Uy,String(Ce))},Je=Ce=>{Me(ot=>({...ot,[Ce]:!ot[Ce]}))},Xe=Ce=>{on(Ce)},Qe=(Ce,ot)=>{ot.preventDefault(),ot.stopPropagation(),Q.current=ot.currentTarget,O({file:Ce})},We=()=>{A&&(S(A.file.id),O(null))},ne=()=>{A&&(g||V(),H([A.file.id],"replace"),O(null))},Fe=()=>{A&&A.file.type==="image"&&(Y(A.file),R(!0),O(null))},Ze=()=>{A&&(X(A.file),O(null))},lt=()=>{A&&(G(A.file),Oe(A.file.name),O(null))},It=()=>{b.length!==0&&($(!1),we(!0))},Zt=async(Ce,ot)=>{try{await mx({file:Ce,source:o,loadWorkflow:le,onLoaded:()=>{fe("workflow"),ot?.closeViewer&&(at(!1),Ae(!1))}})}catch(dt){console.error("Failed to load workflow from file:",dt),window.alert("Failed to load workflow from file.")}},On=(Ce,ot)=>{if(Ce.type==="folder"){window.alert("Workflow metadata is not available for folders.");return}if(T){nt.current=!!ot?.closeViewer,_(Ce);return}Zt(Ce,ot)},rn=()=>{if(!A)return;const Ce=A.file;O(null),On(Ce,{closeViewer:!1})},Tn=async()=>{if(!ue)return;const Ce=ue,ot=nt.current;nt.current=!1,_(null),await Zt(Ce,{closeViewer:ot})},xn=()=>{nt.current=!1,_(null)},vn=async()=>{if(!te)return;const Ce=te;try{const ot=al(te,o);await Cf(ot,o),E(),it.current?.(Ce),it.current=null}catch(ot){console.error("Failed to delete file:",ot),window.alert("Failed to delete file.")}finally{X(null)}},Oa=async()=>{if(b.length===0){we(!1);return}try{const Ce=`${o}/`,ot=b.map(dt=>dt.startsWith(Ce)?dt.slice(Ce.length):dt);await Promise.all(ot.map(dt=>Cf(dt,o))),E(),B()}catch(Ce){console.error("Failed to delete selected files:",Ce),window.alert("Failed to delete selected files.")}finally{we(!1)}},Hu=()=>{if(b.length===0)return;b.every(ot=>p.includes(ot))?Ie(b):Ee(b),$(!1)},cl=()=>{b.length!==0&&($(!1),Ge([...b]),Ye(s),se(s),ke(!0))},Ta=()=>{A&&(Ge([A.file.id]),Ye(s),se(s),ke(!0),O(null))},Po=()=>{G(null),Oe("")},Ea=async()=>{if(!D)return;const Ce=K.trim();if(Ce){if(Ce===D.name){Po();return}try{const ot=al(D,o);await Z1(ot,Ce,o),E(),Po()}catch(ot){console.error("Failed to rename item:",ot),window.alert("Failed to rename item.")}}},Bn=()=>{ke(!1),Ge([]),Ye(null)},dl=async()=>{if(Be.length!==0)try{const Ce=`${o}/`,ot=Be.map(dt=>dt.startsWith(Ce)?dt.slice(Ce.length):dt);await X1(ot,ee,o),E(),g&&(B(),V())}catch(Ce){console.error("Failed to move selected files:",Ce),window.alert("Failed to move selected files.")}finally{Bn()}},Ia=async()=>{const Ce=F.trim();if(!Ce)return;const ot=ee?`${ee}/${Ce}`:Ce;try{await b0(ot,o),Se(""),Ve(!0);const dt=await Nf(o,1e3,0,"modified",!1,ee,c);Ue(dt.filter(an=>an.type==="folder"))}catch(dt){console.error("Failed to create folder:",dt),window.alert("Failed to create folder.")}finally{Ve(!1)}},ys=async()=>{const Ce=rt.trim();if(!Ce)return;const ot=s?`${s}/${Ce}`:Ce;try{await b0(ot,o),Pe(""),me(!1),E()}catch(dt){console.error("Failed to create folder:",dt),window.alert("Failed to create folder.")}},ro=y.useMemo(()=>{const ot=[{name:o==="output"?"Outputs":"Inputs",path:null}];if(s){const dt=s.split("/");dt.forEach((an,wn)=>{ot.push({name:an,path:dt.slice(0,wn+1).join("/")})})}return ot},[o,s]),La=()=>{const Ce=ro.length,ot=[];return Ce<=3?ro.forEach((dt,an)=>{ot.push({...dt,isClickable:an<Ce-1})}):(ot.push({...ro[0],isClickable:!0}),ot.push({name:"...",path:ro[Ce-3].path,isEllipsis:!0,isClickable:!0}),ot.push({...ro[Ce-2],isClickable:!0}),ot.push({...ro[Ce-1],isClickable:!1})),u.jsx("div",{id:"outputs-breadcrumb-trail",className:"flex items-center text-sm overflow-hidden whitespace-nowrap",children:ot.map((dt,an)=>u.jsxs("div",{className:"flex items-center min-w-0",children:[an>0&&u.jsx("span",{className:"mx-1.5 text-gray-400 shrink-0",children:"/"}),u.jsx("button",{onClick:()=>dt.isClickable&&w(dt.path),disabled:!dt.isClickable,className:`
                truncate transition-colors
                ${dt.isClickable?"text-blue-600 hover:text-blue-700 active:opacity-70":"text-gray-700 font-medium"}
                ${dt.isEllipsis?"px-1 bg-gray-100 rounded":""}
              `,title:dt.name,children:dt.name})]},an))})};y.useEffect(()=>{if(!J)return;let Ce=!1;return(async()=>{Ve(!0);try{const dt=await Nf(o,1e3,0,"modified",!1,ee,c);if(Ce)return;Ue(dt.filter(an=>an.type==="folder"))}catch(dt){if(Ce)return;console.error("Failed to load folders:",dt),Ue([])}finally{Ce||Ve(!1)}})(),()=>{Ce=!0}},[J,ee,o,c]),y.useEffect(()=>{I&&b.length===0&&$(!1)},[I,b.length,$]);const Aa=()=>{const Ce=Ut.getState();Ce.clearSelection(),Ce.toggleSelectionMode()},xr=()=>{if(!ee)return;const Ce=ee.split("/");Ce.pop(),se(Ce.length?Ce.join("/"):null)},Vu=Ce=>()=>{se(ee?`${ee}/${Ce}`:Ce)};return u.jsx("div",{id:"outputs-panel-wrapper",className:"absolute inset-x-0 top-[60px] bottom-0",style:{display:n?"block":"none"},children:u.jsxs("div",{id:"outputs-panel-root",className:"h-full bg-white flex flex-col pt-[4px] pb-[80px]",children:[u.jsx(x5,{breadcrumbs:La(),selectionMode:g,selectedCount:b.length,onClearSelection:Aa}),u.jsxs("div",{id:"outputs-content-container",className:"flex-1 overflow-y-auto p-4",children:[u.jsx(v5,{folders:Wn,foldersCollapsed:ge,toggleFoldersCollapsed:oe,selectionMode:g,selectedIds:b,favorites:p,setCurrentFolder:x,handleOpen:Xe,handleMenu:Qe,toggleSelection:j}),u.jsx(w5,{fileSections:De,collapsedSections:Ke,viewMode:i,selectionMode:g,selectedIds:b,favorites:p,setCurrentFolder:x,handleOpen:Xe,handleMenu:Qe,toggleSelection:j,toggleSectionCollapsed:Je,selectIds:H}),l&&u.jsx("div",{id:"outputs-loading-indicator",className:"py-4 flex justify-center",children:u.jsx("span",{className:"text-gray-400 text-sm",children:"Loading..."})}),!l&&Et.length===0&&u.jsx("div",{id:"outputs-empty-message",className:"text-center text-gray-400 py-8",children:s?"No images in this folder":o==="output"?"No generated images yet":"No imported images"})]}),u.jsx(S5,{menuTarget:A,favorites:p,setMenuTarget:O,menuRef:be,menuStyle:yt,handleFavorite:We,handleSelectSingle:ne,handleMoveSingle:Ta,handleRenameRequest:lt,handleLoadWorkflow:rn,handleLoadInWorkflow:Fe,handleDeleteRequest:Ze}),I&&u.jsxs(su,{onClose:()=>$(!1),zIndex:1800,children:[u.jsxs("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:[b.length," selected"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Hu,children:[b.every(Ce=>p.includes(Ce))?u.jsx(Lu,{className:"w-4 h-4"}):u.jsx(qr,{className:"w-4 h-4"}),b.every(Ce=>p.includes(Ce))?"Unfavorite":"Favorite"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:cl,children:[u.jsx(fr,{className:"w-4 h-4 text-gray-500"}),"Move"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:It,children:[u.jsx(Do,{className:"w-4 h-4"}),"Delete"]}),u.jsx("button",{className:"w-full text-left px-4 py-3 text-sm text-gray-600 hover:bg-gray-50",onClick:()=>$(!1),children:"Cancel"})]}),J&&u.jsxs(su,{onClose:Bn,zIndex:1850,children:[u.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:ee!==et?u.jsxs(u.Fragment,{children:["Move to ",u.jsx(fr,{className:"w-4 h-4 text-amber-500 inline"})," ",ee||"root"]}):"Move to..."}),u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[Le&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"Loading folders..."}),!Le&&ee&&u.jsx("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:xr,children:u.jsx("span",{className:"text-gray-500",children:".."})}),!Le&&xe.filter(Ce=>!Be.includes(Ce.id)).length===0&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"No folders"}),!Le&&xe.filter(Ce=>!Be.includes(Ce.id)).map(Ce=>u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Vu(Ce.name),children:[u.jsx(fr,{className:"w-4 h-4 text-amber-500"}),Ce.name]},Ce.id)),u.jsx("div",{className:"px-4 py-3 border-t border-gray-100",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{value:F,onChange:Ce=>Se(Ce.target.value),placeholder:"New folder",className:"flex-1 border border-gray-200 rounded-lg px-3 py-2 text-sm"}),u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-blue-600 hover:text-blue-700",onClick:Ia,children:"Create"})]})})]}),u.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg",onClick:Bn,children:"Cancel"}),u.jsx("button",{className:`px-3 py-2 text-sm font-medium rounded-lg ${ee!==et?"text-white bg-blue-600 hover:bg-blue-700":"text-gray-400 bg-gray-200 cursor-not-allowed"}`,onClick:dl,disabled:ee===et,children:"Submit"})]})]}),te&&u.jsx(qo,{onClose:st,title:"Delete file?",description:te.type==="folder"?`This will permanently delete the folder "${te.name}" and all of its contents from the server. This cannot be undone.`:`This will permanently delete "${te.name}" from the server. This cannot be undone.`,actions:[{label:"Cancel",onClick:st,className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100"},{label:"Delete",onClick:vn,className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700"}]}),Ne&&u.jsx(qo,{onClose:()=>we(!1),title:"Delete selected files?",description:`This will permanently delete ${b.length} selected file${b.length===1?"":"s"} from the server. This cannot be undone.`,zIndex:1800,actions:[{label:"Cancel",onClick:()=>we(!1),className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100"},{label:"Delete",onClick:Oa,className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700"}]}),D&&u.jsx(su,{onClose:Po,zIndex:1850,children:u.jsxs("div",{className:"p-4",children:[u.jsxs("div",{className:"text-gray-900 text-base font-semibold",children:["Rename ",D.type==="folder"?"folder":"file"]}),u.jsxs("div",{className:"text-gray-600 text-sm mt-1 truncate",children:["Current: ",D.name]}),u.jsx("input",{value:K,onChange:Ce=>Oe(Ce.target.value),onKeyDown:Ce=>{Ce.key==="Enter"&&Ea()},placeholder:D.type==="folder"?"Folder name":"File name",className:"mt-3 w-full border border-gray-200 rounded-lg px-3 py-2 text-sm",autoFocus:!0}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:Po,children:"Cancel"}),u.jsx("button",{className:`px-3 py-2 rounded-lg text-sm font-medium ${K.trim()&&K.trim()!==D.name?"text-white bg-blue-600 hover:bg-blue-700":"text-gray-400 bg-gray-200 cursor-not-allowed"}`,onClick:()=>{Ea()},disabled:!K.trim()||K.trim()===D.name,children:"Rename"})]})]})}),de&&u.jsx(su,{onClose:()=>{me(!1),Pe("")},zIndex:1850,children:u.jsxs("div",{className:"p-4",children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"New folder"}),u.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:["Create a new folder in ",s?u.jsxs(u.Fragment,{children:[u.jsx(fr,{className:"w-3.5 h-3.5 text-amber-500 inline"})," ",s]}):"root"]}),u.jsx("input",{value:rt,onChange:Ce=>Pe(Ce.target.value),onKeyDown:Ce=>{Ce.key==="Enter"&&ys()},placeholder:"Folder name",className:"mt-3 w-full border border-gray-200 rounded-lg px-3 py-2 text-sm",autoFocus:!0}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:()=>{me(!1),Pe("")},children:"Cancel"}),u.jsx("button",{className:`px-3 py-2 rounded-lg text-sm font-medium ${rt.trim()?"text-white bg-blue-600 hover:bg-blue-700":"text-gray-400 bg-gray-200 cursor-not-allowed"}`,onClick:ys,disabled:!rt.trim(),children:"Create"})]})]})}),u.jsx(gx,{open:U,file:pe,source:o,onClose:wt,onLoaded:()=>{R(!1),Y(null),tt.current?.(),tt.current=null}}),u.jsx(b5,{open:W,onClose:()=>ie(!1),filter:f,sort:m,onChangeFilter:L,onChangeSort:z}),ue&&Mn.createPortal(u.jsx(qo,{onClose:xn,title:"Unsaved changes",description:"Are you sure you want to load this workflow? You have unsaved changes.",actions:[{label:"Cancel",onClick:xn,className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100"},{label:"Continue",onClick:()=>{Tn()},className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700"}]}),document.body),u.jsx(hx,{open:qe,items:pt,index:Wt,onClose:Gt,onIndexChange:Yt,onDelete:Bt,onLoadInWorkflow:dn,onLoadWorkflow:pn,showMetadataToggle:!0})]})})}function j5(){const n=eo(B=>B.currentPanel),o=eo(B=>B.setCurrentPanel),s=Of(B=>B.appMenuOpen),l=Mo(B=>B.viewerOpen),i=Mo(B=>B.setViewerState),c=ce(B=>B.followQueue),f=ce(B=>B.setFollowQueue),m=Fn(B=>B.bookmarkRepositioningActive),p=y.useRef(null),{isInputFocused:g}=px(),b=Ut(B=>B.outputsViewerOpen),x=Ut(B=>B.selectionMode),w=Ut(B=>B.filterModalOpen),k=Ut(B=>B.selectionActionOpen),C=Ut(B=>B.currentFolder),S=Ut(B=>B.navigateUp);m5();const j=y.useCallback(()=>{n==="workflow"?o("queue"):n==="outputs"&&o("workflow")},[n,o]),N=y.useCallback(()=>{n==="outputs"&&C?S():n==="workflow"?o("outputs"):n==="queue"&&o("workflow")},[n,C,S,o]),E=n==="workflow"||n==="outputs",H=n==="workflow"||n==="queue"||n==="outputs"&&!!C,{swipeOffset:V,isSwiping:L,setSwipeEnabled:z,resetSwipeState:I}=g5({onSwipeLeft:E?j:void 0,onSwipeRight:H?N:void 0,enabled:!g&&!l&&!s&&!b&&!m&&!x&&!w&&!k}),$=ce(B=>B.setNodeTypes),W=sl(B=>B.theme),ie=ce(B=>B.workflowLoadedAt),de=jt(B=>B.fetchQueue),me=qn(B=>B.history);y.useEffect(()=>{!L&&V!==0&&I()},[L,V,I]),y.useEffect(()=>{b&&I()},[b,I]);const Ae=()=>{i({viewerOpen:!1}),f(!1),z(!0),I()};y.useEffect(()=>{Yf().then(B=>{$(B)}).catch(B=>{console.error("Failed to load node types:",B)})},[$]),y.useEffect(()=>{de()},[de]);const Ee=(B,le,fe=!0)=>{z(!1),I(),i({viewerImages:B,viewerIndex:le,viewerScale:1,viewerTranslate:{x:0,y:0},viewerOpen:!0}),f(fe)},Ie=()=>{const B=kp(me,{onlyOutput:!0,alt:"Generation"});z(!1),I();const le=B.length>0?0:-1;i({viewerImages:B,viewerIndex:le,viewerScale:1,viewerTranslate:{x:0,y:0},viewerOpen:!0}),f(!0)};return y.useLayoutEffect(()=>{const B=document.documentElement;B.classList.toggle("dark",W==="dark"),B.style.colorScheme=W},[W]),y.useEffect(()=>{ie&&queueMicrotask(()=>{f(!1)})},[ie,f]),u.jsxs("div",{id:"app-root",className:"min-h-screen bg-gray-100",children:[u.jsx(G2,{mode:n}),u.jsxs("main",{id:"main-content",ref:p,className:"pt-[69px] pb-[80px] min-h-screen relative",children:[u.jsxs(u.Fragment,{children:[u.jsx(k5,{visible:n==="outputs"}),u.jsx(w4,{visible:n==="workflow",onImageClick:Ee}),u.jsx(P4,{visible:n==="queue",onImageClick:Ee})]}),u.jsx("div",{id:"bottom-bar-spacer",className:"fixed inset-x-0 bottom-0 bg-gray-100 pointer-events-none z-[1500]",style:{height:"var(--bottom-bar-offset, 80px)"}})]}),u.jsx(I4,{currentPanel:n,viewerOpen:l,followQueue:c,onToggleFollowQueue:()=>f(!c),onOpenFollowQueue:Ie}),u.jsx(h5,{onClose:Ae})]})}T1.createRoot(document.getElementById("root")).render(u.jsx(y.StrictMode,{children:u.jsx(j5,{})}));
//# sourceMappingURL=index-DFJRHK1V.js.map
