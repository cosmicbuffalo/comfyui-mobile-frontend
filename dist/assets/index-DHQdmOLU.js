function Gy(l,r){for(var s=0;s<r.length;s++){const o=r[s];if(typeof o!="string"&&!Array.isArray(o)){for(const i in o)if(i!=="default"&&!(i in l)){const d=Object.getOwnPropertyDescriptor(o,i);d&&Object.defineProperty(l,i,d.get?d:{enumerable:!0,get:()=>o[i]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function s(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(i){if(i.ep)return;i.ep=!0;const d=s(i);fetch(i.href,d)}})();function qy(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Pc={exports:{}},yo={};var Jh;function Wy(){if(Jh)return yo;Jh=1;var l=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(o,i,d){var p=null;if(d!==void 0&&(p=""+d),i.key!==void 0&&(p=""+i.key),"key"in i){d={};for(var h in i)h!=="key"&&(d[h]=i[h])}else d=i;return i=d.ref,{$$typeof:l,type:o,key:p,ref:i!==void 0?i:null,props:d}}return yo.Fragment=r,yo.jsx=s,yo.jsxs=s,yo}var eg;function Fy(){return eg||(eg=1,Pc.exports=Wy()),Pc.exports}var u=Fy(),Zc={exports:{}},Je={};var tg;function $y(){if(tg)return Je;tg=1;var l=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),p=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),N=Symbol.iterator;function k(_){return _===null||typeof _!="object"?null:(_=N&&_[N]||_["@@iterator"],typeof _=="function"?_:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,M={};function j(_,I,E){this.props=_,this.context=I,this.refs=M,this.updater=E||S}j.prototype.isReactComponent={},j.prototype.setState=function(_,I){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,I,"setState")},j.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function O(){}O.prototype=j.prototype;function R(_,I,E){this.props=_,this.context=I,this.refs=M,this.updater=E||S}var z=R.prototype=new O;z.constructor=R,w(z,j.prototype),z.isPureReactComponent=!0;var T=Array.isArray;function D(){}var A={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function U(_,I,E){var W=E.ref;return{$$typeof:l,type:_,key:I,ref:W!==void 0?W:null,props:E}}function G(_,I){return U(_.type,I,_.props)}function q(_){return typeof _=="object"&&_!==null&&_.$$typeof===l}function te(_){var I={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(E){return I[E]})}var ge=/\/+/g;function le(_,I){return typeof _=="object"&&_!==null&&_.key!=null?te(""+_.key):I.toString(36)}function ie(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(D,D):(_.status="pending",_.then(function(I){_.status==="pending"&&(_.status="fulfilled",_.value=I)},function(I){_.status==="pending"&&(_.status="rejected",_.reason=I)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function L(_,I,E,W,Y){var ce=typeof _;(ce==="undefined"||ce==="boolean")&&(_=null);var ee=!1;if(_===null)ee=!0;else switch(ce){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(_.$$typeof){case l:case r:ee=!0;break;case x:return ee=_._init,L(ee(_._payload),I,E,W,Y)}}if(ee)return Y=Y(_),ee=W===""?"."+le(_,0):W,T(Y)?(E="",ee!=null&&(E=ee.replace(ge,"$&/")+"/"),L(Y,I,E,"",function(Te){return Te})):Y!=null&&(q(Y)&&(Y=G(Y,E+(Y.key==null||_&&_.key===Y.key?"":(""+Y.key).replace(ge,"$&/")+"/")+ee)),I.push(Y)),1;ee=0;var ne=W===""?".":W+":";if(T(_))for(var ve=0;ve<_.length;ve++)W=_[ve],ce=ne+le(W,ve),ee+=L(W,I,E,ce,Y);else if(ve=k(_),typeof ve=="function")for(_=ve.call(_),ve=0;!(W=_.next()).done;)W=W.value,ce=ne+le(W,ve++),ee+=L(W,I,E,ce,Y);else if(ce==="object"){if(typeof _.then=="function")return L(ie(_),I,E,W,Y);throw I=String(_),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return ee}function Q(_,I,E){if(_==null)return _;var W=[],Y=0;return L(_,W,"","",function(ce){return I.call(E,ce,Y++)}),W}function se(_){if(_._status===-1){var I=_._result;I=I(),I.then(function(E){(_._status===0||_._status===-1)&&(_._status=1,_._result=E)},function(E){(_._status===0||_._status===-1)&&(_._status=2,_._result=E)}),_._status===-1&&(_._status=0,_._result=I)}if(_._status===1)return _._result.default;throw _._result}var xe=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},me={map:Q,forEach:function(_,I,E){Q(_,function(){I.apply(this,arguments)},E)},count:function(_){var I=0;return Q(_,function(){I++}),I},toArray:function(_){return Q(_,function(I){return I})||[]},only:function(_){if(!q(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return Je.Activity=y,Je.Children=me,Je.Component=j,Je.Fragment=s,Je.Profiler=i,Je.PureComponent=R,Je.StrictMode=o,Je.Suspense=m,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Je.__COMPILER_RUNTIME={__proto__:null,c:function(_){return A.H.useMemoCache(_)}},Je.cache=function(_){return function(){return _.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(_,I,E){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var W=w({},_.props),Y=_.key;if(I!=null)for(ce in I.key!==void 0&&(Y=""+I.key),I)!B.call(I,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&I.ref===void 0||(W[ce]=I[ce]);var ce=arguments.length-2;if(ce===1)W.children=E;else if(1<ce){for(var ee=Array(ce),ne=0;ne<ce;ne++)ee[ne]=arguments[ne+2];W.children=ee}return U(_.type,Y,W)},Je.createContext=function(_){return _={$$typeof:p,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:d,_context:_},_},Je.createElement=function(_,I,E){var W,Y={},ce=null;if(I!=null)for(W in I.key!==void 0&&(ce=""+I.key),I)B.call(I,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(Y[W]=I[W]);var ee=arguments.length-2;if(ee===1)Y.children=E;else if(1<ee){for(var ne=Array(ee),ve=0;ve<ee;ve++)ne[ve]=arguments[ve+2];Y.children=ne}if(_&&_.defaultProps)for(W in ee=_.defaultProps,ee)Y[W]===void 0&&(Y[W]=ee[W]);return U(_,ce,Y)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(_){return{$$typeof:h,render:_}},Je.isValidElement=q,Je.lazy=function(_){return{$$typeof:x,_payload:{_status:-1,_result:_},_init:se}},Je.memo=function(_,I){return{$$typeof:g,type:_,compare:I===void 0?null:I}},Je.startTransition=function(_){var I=A.T,E={};A.T=E;try{var W=_(),Y=A.S;Y!==null&&Y(E,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(D,xe)}catch(ce){xe(ce)}finally{I!==null&&E.types!==null&&(I.types=E.types),A.T=I}},Je.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Je.use=function(_){return A.H.use(_)},Je.useActionState=function(_,I,E){return A.H.useActionState(_,I,E)},Je.useCallback=function(_,I){return A.H.useCallback(_,I)},Je.useContext=function(_){return A.H.useContext(_)},Je.useDebugValue=function(){},Je.useDeferredValue=function(_,I){return A.H.useDeferredValue(_,I)},Je.useEffect=function(_,I){return A.H.useEffect(_,I)},Je.useEffectEvent=function(_){return A.H.useEffectEvent(_)},Je.useId=function(){return A.H.useId()},Je.useImperativeHandle=function(_,I,E){return A.H.useImperativeHandle(_,I,E)},Je.useInsertionEffect=function(_,I){return A.H.useInsertionEffect(_,I)},Je.useLayoutEffect=function(_,I){return A.H.useLayoutEffect(_,I)},Je.useMemo=function(_,I){return A.H.useMemo(_,I)},Je.useOptimistic=function(_,I){return A.H.useOptimistic(_,I)},Je.useReducer=function(_,I,E){return A.H.useReducer(_,I,E)},Je.useRef=function(_){return A.H.useRef(_)},Je.useState=function(_){return A.H.useState(_)},Je.useSyncExternalStore=function(_,I,E){return A.H.useSyncExternalStore(_,I,E)},Je.useTransition=function(){return A.H.useTransition()},Je.version="19.2.3",Je}var ng;function Gd(){return ng||(ng=1,Zc.exports=$y()),Zc.exports}var b=Gd();const Sa=qy(b),lg=Gy({__proto__:null,default:Sa},[b]);var Kc={exports:{}},bo={},Jc={exports:{}},ed={};var rg;function Yy(){return rg||(rg=1,(function(l){function r(L,Q){var se=L.length;L.push(Q);e:for(;0<se;){var xe=se-1>>>1,me=L[xe];if(0<i(me,Q))L[xe]=Q,L[se]=me,se=xe;else break e}}function s(L){return L.length===0?null:L[0]}function o(L){if(L.length===0)return null;var Q=L[0],se=L.pop();if(se!==Q){L[0]=se;e:for(var xe=0,me=L.length,_=me>>>1;xe<_;){var I=2*(xe+1)-1,E=L[I],W=I+1,Y=L[W];if(0>i(E,se))W<me&&0>i(Y,E)?(L[xe]=Y,L[W]=se,xe=W):(L[xe]=E,L[I]=se,xe=I);else if(W<me&&0>i(Y,se))L[xe]=Y,L[W]=se,xe=W;else break e}}return Q}function i(L,Q){var se=L.sortIndex-Q.sortIndex;return se!==0?se:L.id-Q.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var p=Date,h=p.now();l.unstable_now=function(){return p.now()-h}}var m=[],g=[],x=1,y=null,N=3,k=!1,S=!1,w=!1,M=!1,j=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function z(L){for(var Q=s(g);Q!==null;){if(Q.callback===null)o(g);else if(Q.startTime<=L)o(g),Q.sortIndex=Q.expirationTime,r(m,Q);else break;Q=s(g)}}function T(L){if(w=!1,z(L),!S)if(s(m)!==null)S=!0,D||(D=!0,te());else{var Q=s(g);Q!==null&&ie(T,Q.startTime-L)}}var D=!1,A=-1,B=5,U=-1;function G(){return M?!0:!(l.unstable_now()-U<B)}function q(){if(M=!1,D){var L=l.unstable_now();U=L;var Q=!0;try{e:{S=!1,w&&(w=!1,O(A),A=-1),k=!0;var se=N;try{t:{for(z(L),y=s(m);y!==null&&!(y.expirationTime>L&&G());){var xe=y.callback;if(typeof xe=="function"){y.callback=null,N=y.priorityLevel;var me=xe(y.expirationTime<=L);if(L=l.unstable_now(),typeof me=="function"){y.callback=me,z(L),Q=!0;break t}y===s(m)&&o(m),z(L)}else o(m);y=s(m)}if(y!==null)Q=!0;else{var _=s(g);_!==null&&ie(T,_.startTime-L),Q=!1}}break e}finally{y=null,N=se,k=!1}Q=void 0}}finally{Q?te():D=!1}}}var te;if(typeof R=="function")te=function(){R(q)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,le=ge.port2;ge.port1.onmessage=q,te=function(){le.postMessage(null)}}else te=function(){j(q,0)};function ie(L,Q){A=j(function(){L(l.unstable_now())},Q)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(L){L.callback=null},l.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<L?Math.floor(1e3/L):5},l.unstable_getCurrentPriorityLevel=function(){return N},l.unstable_next=function(L){switch(N){case 1:case 2:case 3:var Q=3;break;default:Q=N}var se=N;N=Q;try{return L()}finally{N=se}},l.unstable_requestPaint=function(){M=!0},l.unstable_runWithPriority=function(L,Q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var se=N;N=L;try{return Q()}finally{N=se}},l.unstable_scheduleCallback=function(L,Q,se){var xe=l.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?xe+se:xe):se=xe,L){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=se+me,L={id:x++,callback:Q,priorityLevel:L,startTime:se,expirationTime:me,sortIndex:-1},se>xe?(L.sortIndex=se,r(g,L),s(m)===null&&L===s(g)&&(w?(O(A),A=-1):w=!0,ie(T,se-xe))):(L.sortIndex=me,r(m,L),S||k||(S=!0,D||(D=!0,te()))),L},l.unstable_shouldYield=G,l.unstable_wrapCallback=function(L){var Q=N;return function(){var se=N;N=Q;try{return L.apply(this,arguments)}finally{N=se}}}})(ed)),ed}var ag;function Qy(){return ag||(ag=1,Jc.exports=Yy()),Jc.exports}var td={exports:{}},vn={};var og;function Xy(){if(og)return vn;og=1;var l=Gd();function r(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(r(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},i=Symbol.for("react.portal");function d(m,g,x){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:m,containerInfo:g,implementation:x}}var p=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,vn.createPortal=function(m,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(r(299));return d(m,g,null,x)},vn.flushSync=function(m){var g=p.T,x=o.p;try{if(p.T=null,o.p=2,m)return m()}finally{p.T=g,o.p=x,o.d.f()}},vn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(m,g))},vn.prefetchDNS=function(m){typeof m=="string"&&o.d.D(m)},vn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var x=g.as,y=h(x,g.crossOrigin),N=typeof g.integrity=="string"?g.integrity:void 0,k=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?o.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:N,fetchPriority:k}):x==="script"&&o.d.X(m,{crossOrigin:y,integrity:N,fetchPriority:k,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},vn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=h(g.as,g.crossOrigin);o.d.M(m,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(m)},vn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,y=h(x,g.crossOrigin);o.d.L(m,x,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},vn.preloadModule=function(m,g){if(typeof m=="string")if(g){var x=h(g.as,g.crossOrigin);o.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(m)},vn.requestFormReset=function(m){o.d.r(m)},vn.unstable_batchedUpdates=function(m,g){return m(g)},vn.useFormState=function(m,g,x){return p.H.useFormState(m,g,x)},vn.useFormStatus=function(){return p.H.useHostTransitionStatus()},vn.version="19.2.3",vn}var sg;function g0(){if(sg)return td.exports;sg=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),td.exports=Xy(),td.exports}var ig;function Py(){if(ig)return bo;ig=1;var l=Qy(),r=Gd(),s=g0();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(d(e)!==e)throw Error(o(188))}function g(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,a=t;;){var c=n.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){n=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===n)return m(c),e;if(f===a)return m(c),t;f=f.sibling}throw Error(o(188))}if(n.return!==a.return)n=c,a=f;else{for(var v=!1,C=c.child;C;){if(C===n){v=!0,n=c,a=f;break}if(C===a){v=!0,a=c,n=f;break}C=C.sibling}if(!v){for(C=f.child;C;){if(C===n){v=!0,n=f,a=c;break}if(C===a){v=!0,a=f,n=c;break}C=C.sibling}if(!v)throw Error(o(189))}}if(n.alternate!==a)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,N=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),R=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Symbol.for("react.client.reference");function le(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ge?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case j:return"Profiler";case M:return"StrictMode";case T:return"Suspense";case D:return"SuspenseList";case U:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case R:return e.displayName||"Context";case O:return(e._context.displayName||"Context")+".Consumer";case z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case A:return t=e.displayName||null,t!==null?t:le(e.type)||"Memo";case B:t=e._payload,e=e._init;try{return le(e(t))}catch{}}return null}var ie=Array.isArray,L=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},xe=[],me=-1;function _(e){return{current:e}}function I(e){0>me||(e.current=xe[me],xe[me]=null,me--)}function E(e,t){me++,xe[me]=e.current,e.current=t}var W=_(null),Y=_(null),ce=_(null),ee=_(null);function ne(e,t){switch(E(ce,t),E(Y,e),E(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Sh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Sh(t),e=Nh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(W),E(W,e)}function ve(){I(W),I(Y),I(ce)}function Te(e){e.memoizedState!==null&&E(ee,e);var t=W.current,n=Nh(t,e.type);t!==n&&(E(Y,e),E(W,n))}function We(e){Y.current===e&&(I(W),I(Y)),ee.current===e&&(I(ee),ho._currentValue=se)}var de,Ne;function Ce(e){if(de===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);de=t&&t[1]||"",Ne=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+e+Ne}var _e=!1;function Ue(e,t){if(!e||_e)return"";_e=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ae){var K=ae}Reflect.construct(e,[],he)}else{try{he.call()}catch(ae){K=ae}e.call(he.prototype)}}else{try{throw Error()}catch(ae){K=ae}(he=e())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ae){if(ae&&K&&typeof ae.stack=="string")return[ae.stack,K.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=a.DetermineComponentFrameRoot(),v=f[0],C=f[1];if(v&&C){var H=v.split(`
`),P=C.split(`
`);for(c=a=0;a<H.length&&!H[a].includes("DetermineComponentFrameRoot");)a++;for(;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;if(a===H.length||c===P.length)for(a=H.length-1,c=P.length-1;1<=a&&0<=c&&H[a]!==P[c];)c--;for(;1<=a&&0<=c;a--,c--)if(H[a]!==P[c]){if(a!==1||c!==1)do if(a--,c--,0>c||H[a]!==P[c]){var ue=`
`+H[a].replace(" at new "," at ");return e.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",e.displayName)),ue}while(1<=a&&0<=c);break}}}finally{_e=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ce(n):""}function Qe(e,t){switch(e.tag){case 26:case 27:case 5:return Ce(e.type);case 16:return Ce("Lazy");case 13:return e.child!==t&&t!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return Ue(e.type,!1);case 11:return Ue(e.type.render,!1);case 1:return Ue(e.type,!0);case 31:return Ce("Activity");default:return""}}function Se(e){try{var t="",n=null;do t+=Qe(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var ye=Object.prototype.hasOwnProperty,Oe=l.unstable_scheduleCallback,Le=l.unstable_cancelCallback,it=l.unstable_shouldYield,vt=l.unstable_requestPaint,ht=l.unstable_now,we=l.unstable_getCurrentPriorityLevel,Ae=l.unstable_ImmediatePriority,Ke=l.unstable_UserBlockingPriority,Ye=l.unstable_NormalPriority,et=l.unstable_LowPriority,Ze=l.unstable_IdlePriority,dt=l.log,re=l.unstable_setDisableYieldValue,rt=null,Xe=null;function gt(e){if(typeof dt=="function"&&re(e),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(rt,e)}catch{}}var $t=Math.clz32?Math.clz32:fl,cl=Math.log,dl=Math.LN2;function fl(e){return e>>>=0,e===0?32:31-(cl(e)/dl|0)|0}var Cn=256,sn=262144,xn=4194304;function Me(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Re(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var c=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var C=a&134217727;return C!==0?(a=C&~f,a!==0?c=Me(a):(v&=C,v!==0?c=Me(v):n||(n=C&~e,n!==0&&(c=Me(n))))):(C=a&~f,C!==0?c=Me(C):v!==0?c=Me(v):n||(n=a&~e,n!==0&&(c=Me(n)))),c===0?0:t!==0&&t!==c&&(t&f)===0&&(f=c&-c,n=t&-t,f>=n||f===32&&(n&4194048)!==0)?t:c}function Be(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Pe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F(){var e=xn;return xn<<=1,(xn&62914560)===0&&(xn=4194304),e}function be(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function fe(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,n,a,c,f){var v=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var C=e.entanglements,H=e.expirationTimes,P=e.hiddenUpdates;for(n=v&~n;0<n;){var ue=31-$t(n),he=1<<ue;C[ue]=0,H[ue]=-1;var K=P[ue];if(K!==null)for(P[ue]=null,ue=0;ue<K.length;ue++){var ae=K[ue];ae!==null&&(ae.lane&=-536870913)}n&=~he}a!==0&&Ie(e,a,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~t))}function Ie(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-$t(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function st(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-$t(n),c=1<<a;c&t|e[a]&t&&(e[a]|=t),n&=~c}}function Ge(e,t){var n=t&-t;return n=(n&42)!==0?1:xt(n),(n&(e.suspendedLanes|t))!==0?0:n}function xt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function jt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Bt(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:$h(e.type))}function It(e,t){var n=Q.p;try{return Q.p=e,t()}finally{Q.p=n}}var Ot=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Ot,Ut="__reactProps$"+Ot,Yt="__reactContainer$"+Ot,wn="__reactEvents$"+Ot,oe="__reactListeners$"+Ot,tt="__reactHandles$"+Ot,Ht="__reactResources$"+Ot,Vt="__reactMarker$"+Ot;function un(e){delete e[Ct],delete e[Ut],delete e[wn],delete e[oe],delete e[tt]}function dn(e){var t=e[Ct];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yt]||n[Ct]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Th(e);e!==null;){if(n=e[Ct])return n;e=Th(e)}return t}e=n,n=e.parentNode}return null}function $n(e){if(e=e[Ct]||e[Yt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function yr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function $l(e){var t=e[Ht];return t||(t=e[Ht]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function en(e){e[Vt]=!0}var bl=new Set,Go={};function wl(e,t){Yl(e,t),Yl(e+"Capture",t)}function Yl(e,t){for(Go[e]=t,e=0;e<t.length;e++)bl.add(t[e])}var Gi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Z={},je={};function ze(e){return ye.call(je,e)?!0:ye.call(Z,e)?!1:Gi.test(e)?je[e]=!0:(Z[e]=!0,!1)}function kt(e,t,n){if(ze(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ft(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function at(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function Sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ta(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(v){n=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(v){n=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qi(e){if(!e._valueTracker){var t=qo(e)?"checked":"value";e._valueTracker=Ta(e,t,""+e[t])}}function hf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=qo(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Wo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var zx=/[\n"\\]/g;function Yn(e){return e.replace(zx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Wi(e,t,n,a,c,f,v,C){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Sn(t)):e.value!==""+Sn(t)&&(e.value=""+Sn(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?Fi(e,v,Sn(t)):n!=null?Fi(e,v,Sn(n)):a!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+Sn(C):e.removeAttribute("name")}function gf(e,t,n,a,c,f,v,C){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||n!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){qi(e);return}n=n!=null?""+Sn(n):"",t=t!=null?""+Sn(t):n,C||t===e.value||(e.value=t),e.defaultValue=t}a=a??c,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=C?e.checked:!!a,e.defaultChecked=!!a,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),qi(e)}function Fi(e,t,n){t==="number"&&Wo(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ur(e,t,n,a){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Sn(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function xf(e,t,n){if(t!=null&&(t=""+Sn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Sn(n):""}function vf(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(o(92));if(ie(a)){if(1<a.length)throw Error(o(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=Sn(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),qi(e)}function Gr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Bx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yf(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Bx.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function bf(e,t,n){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var c in t)a=t[c],t.hasOwnProperty(c)&&n[c]!==a&&yf(e,c,a)}else for(var f in t)t.hasOwnProperty(f)&&yf(e,f,t[f])}function $i(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ix=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fo(e){return Hx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Sl(){}var Yi=null;function Qi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qr=null,Wr=null;function wf(e){var t=$n(e);if(t&&(e=t.stateNode)){var n=e[Ut]||null;e:switch(e=t.stateNode,t.type){case"input":if(Wi(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Yn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var c=a[Ut]||null;if(!c)throw Error(o(90));Wi(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&hf(a)}break e;case"textarea":xf(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ur(e,!!n.multiple,t,!1)}}}var Xi=!1;function Sf(e,t,n){if(Xi)return e(t,n);Xi=!0;try{var a=e(t);return a}finally{if(Xi=!1,(qr!==null||Wr!==null)&&(Ls(),qr&&(t=qr,e=Wr,Wr=qr=null,wf(t),e)))for(t=0;t<e.length;t++)wf(e[t])}}function _a(e,t){var n=e.stateNode;if(n===null)return null;var a=n[Ut]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var Nl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=!1;if(Nl)try{var La={};Object.defineProperty(La,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",La,La),window.removeEventListener("test",La,La)}catch{Pi=!1}var Ql=null,Zi=null,$o=null;function Nf(){if($o)return $o;var e,t=Zi,n=t.length,a,c="value"in Ql?Ql.value:Ql.textContent,f=c.length;for(e=0;e<n&&t[e]===c[e];e++);var v=n-e;for(a=1;a<=v&&t[n-a]===c[f-a];a++);return $o=c.slice(e,1<a?1-a:void 0)}function Yo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qo(){return!0}function jf(){return!1}function kn(e){function t(n,a,c,f,v){this._reactName=n,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(n=e[C],this[C]=n?n(f):f[C]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Qo:jf,this.isPropagationStopped=jf,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),t}var br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xo=kn(br),Aa=y({},br,{view:0,detail:0}),Vx=kn(Aa),Ki,Ji,Da,Po=y({},Aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Da&&(Da&&e.type==="mousemove"?(Ki=e.screenX-Da.screenX,Ji=e.screenY-Da.screenY):Ji=Ki=0,Da=e),Ki)},movementY:function(e){return"movementY"in e?e.movementY:Ji}}),Cf=kn(Po),Ux=y({},Po,{dataTransfer:0}),Gx=kn(Ux),qx=y({},Aa,{relatedTarget:0}),eu=kn(qx),Wx=y({},br,{animationName:0,elapsedTime:0,pseudoElement:0}),Fx=kn(Wx),$x=y({},br,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yx=kn($x),Qx=y({},br,{data:0}),kf=kn(Qx),Xx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Px={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zx[e])?!!t[e]:!1}function tu(){return Kx}var Jx=y({},Aa,{key:function(e){if(e.key){var t=Xx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Px[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tu,charCode:function(e){return e.type==="keypress"?Yo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ev=kn(Jx),tv=y({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mf=kn(tv),nv=y({},Aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tu}),lv=kn(nv),rv=y({},br,{propertyName:0,elapsedTime:0,pseudoElement:0}),av=kn(rv),ov=y({},Po,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sv=kn(ov),iv=y({},br,{newState:0,oldState:0}),uv=kn(iv),cv=[9,13,27,32],nu=Nl&&"CompositionEvent"in window,Ra=null;Nl&&"documentMode"in document&&(Ra=document.documentMode);var dv=Nl&&"TextEvent"in window&&!Ra,Of=Nl&&(!nu||Ra&&8<Ra&&11>=Ra),Ef=" ",Tf=!1;function _f(e,t){switch(e){case"keyup":return cv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fr=!1;function fv(e,t){switch(e){case"compositionend":return Lf(t);case"keypress":return t.which!==32?null:(Tf=!0,Ef);case"textInput":return e=t.data,e===Ef&&Tf?null:e;default:return null}}function pv(e,t){if(Fr)return e==="compositionend"||!nu&&_f(e,t)?(e=Nf(),$o=Zi=Ql=null,Fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Of&&t.locale!=="ko"?null:t.data;default:return null}}var mv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Af(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!mv[e.type]:t==="textarea"}function Df(e,t,n,a){qr?Wr?Wr.push(a):Wr=[a]:qr=a,t=Hs(t,"onChange"),0<t.length&&(n=new Xo("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var za=null,Ba=null;function hv(e){gh(e,0)}function Zo(e){var t=yr(e);if(hf(t))return e}function Rf(e,t){if(e==="change")return t}var zf=!1;if(Nl){var lu;if(Nl){var ru="oninput"in document;if(!ru){var Bf=document.createElement("div");Bf.setAttribute("oninput","return;"),ru=typeof Bf.oninput=="function"}lu=ru}else lu=!1;zf=lu&&(!document.documentMode||9<document.documentMode)}function If(){za&&(za.detachEvent("onpropertychange",Hf),Ba=za=null)}function Hf(e){if(e.propertyName==="value"&&Zo(Ba)){var t=[];Df(t,Ba,e,Qi(e)),Sf(hv,t)}}function gv(e,t,n){e==="focusin"?(If(),za=t,Ba=n,za.attachEvent("onpropertychange",Hf)):e==="focusout"&&If()}function xv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zo(Ba)}function vv(e,t){if(e==="click")return Zo(t)}function yv(e,t){if(e==="input"||e==="change")return Zo(t)}function bv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rn=typeof Object.is=="function"?Object.is:bv;function Ia(e,t){if(Rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var c=n[a];if(!ye.call(t,c)||!Rn(e[c],t[c]))return!1}return!0}function Vf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Uf(e,t){var n=Vf(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vf(n)}}function Gf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wo(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wo(e.document)}return t}function au(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var wv=Nl&&"documentMode"in document&&11>=document.documentMode,$r=null,ou=null,Ha=null,su=!1;function Wf(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;su||$r==null||$r!==Wo(a)||(a=$r,"selectionStart"in a&&au(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ha&&Ia(Ha,a)||(Ha=a,a=Hs(ou,"onSelect"),0<a.length&&(t=new Xo("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=$r)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionrun:wr("Transition","TransitionRun"),transitionstart:wr("Transition","TransitionStart"),transitioncancel:wr("Transition","TransitionCancel"),transitionend:wr("Transition","TransitionEnd")},iu={},Ff={};Nl&&(Ff=document.createElement("div").style,"AnimationEvent"in window||(delete Yr.animationend.animation,delete Yr.animationiteration.animation,delete Yr.animationstart.animation),"TransitionEvent"in window||delete Yr.transitionend.transition);function Sr(e){if(iu[e])return iu[e];if(!Yr[e])return e;var t=Yr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ff)return iu[e]=t[n];return e}var $f=Sr("animationend"),Yf=Sr("animationiteration"),Qf=Sr("animationstart"),Sv=Sr("transitionrun"),Nv=Sr("transitionstart"),jv=Sr("transitioncancel"),Xf=Sr("transitionend"),Pf=new Map,uu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uu.push("scrollEnd");function al(e,t){Pf.set(e,t),wl(t,[e])}var Ko=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Qn=[],Qr=0,cu=0;function Jo(){for(var e=Qr,t=cu=Qr=0;t<e;){var n=Qn[t];Qn[t++]=null;var a=Qn[t];Qn[t++]=null;var c=Qn[t];Qn[t++]=null;var f=Qn[t];if(Qn[t++]=null,a!==null&&c!==null){var v=a.pending;v===null?c.next=c:(c.next=v.next,v.next=c),a.pending=c}f!==0&&Zf(n,c,f)}}function es(e,t,n,a){Qn[Qr++]=e,Qn[Qr++]=t,Qn[Qr++]=n,Qn[Qr++]=a,cu|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function du(e,t,n,a){return es(e,t,n,a),ts(e)}function Nr(e,t){return es(e,null,null,t),ts(e)}function Zf(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var c=!1,f=e.return;f!==null;)f.childLanes|=n,a=f.alternate,a!==null&&(a.childLanes|=n),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&t!==null&&(c=31-$t(n),e=f.hiddenUpdates,a=e[c],a===null?e[c]=[t]:a.push(t),t.lane=n|536870912),f):null}function ts(e){if(50<so)throw so=0,bc=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Xr={};function Cv(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(e,t,n,a){return new Cv(e,t,n,a)}function fu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jl(e,t){var n=e.alternate;return n===null?(n=zn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Kf(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ns(e,t,n,a,c,f){var v=0;if(a=e,typeof e=="function")fu(e)&&(v=1);else if(typeof e=="string")v=Ty(e,n,W.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case U:return e=zn(31,n,t,c),e.elementType=U,e.lanes=f,e;case w:return jr(n.children,c,f,t);case M:v=8,c|=24;break;case j:return e=zn(12,n,t,c|2),e.elementType=j,e.lanes=f,e;case T:return e=zn(13,n,t,c),e.elementType=T,e.lanes=f,e;case D:return e=zn(19,n,t,c),e.elementType=D,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:v=10;break e;case O:v=9;break e;case z:v=11;break e;case A:v=14;break e;case B:v=16,a=null;break e}v=29,n=Error(o(130,e===null?"null":typeof e,"")),a=null}return t=zn(v,n,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function jr(e,t,n,a){return e=zn(7,e,a,t),e.lanes=n,e}function pu(e,t,n){return e=zn(6,e,null,t),e.lanes=n,e}function Jf(e){var t=zn(18,null,null,0);return t.stateNode=e,t}function mu(e,t,n){return t=zn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ep=new WeakMap;function Xn(e,t){if(typeof e=="object"&&e!==null){var n=ep.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Se(t)},ep.set(e,t),t)}return{value:e,source:t,stack:Se(t)}}var Pr=[],Zr=0,ls=null,Va=0,Pn=[],Zn=0,Xl=null,pl=1,ml="";function Cl(e,t){Pr[Zr++]=Va,Pr[Zr++]=ls,ls=e,Va=t}function tp(e,t,n){Pn[Zn++]=pl,Pn[Zn++]=ml,Pn[Zn++]=Xl,Xl=e;var a=pl;e=ml;var c=32-$t(a)-1;a&=~(1<<c),n+=1;var f=32-$t(t)+c;if(30<f){var v=c-c%5;f=(a&(1<<v)-1).toString(32),a>>=v,c-=v,pl=1<<32-$t(t)+c|n<<c|a,ml=f+e}else pl=1<<f|n<<c|a,ml=e}function hu(e){e.return!==null&&(Cl(e,1),tp(e,1,0))}function gu(e){for(;e===ls;)ls=Pr[--Zr],Pr[Zr]=null,Va=Pr[--Zr],Pr[Zr]=null;for(;e===Xl;)Xl=Pn[--Zn],Pn[Zn]=null,ml=Pn[--Zn],Pn[Zn]=null,pl=Pn[--Zn],Pn[Zn]=null}function np(e,t){Pn[Zn++]=pl,Pn[Zn++]=ml,Pn[Zn++]=Xl,pl=t.id,ml=t.overflow,Xl=e}var fn=null,Gt=null,mt=!1,Pl=null,Kn=!1,xu=Error(o(519));function Zl(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ua(Xn(t,e)),xu}function lp(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[Ct]=e,t[Ut]=a,n){case"dialog":ct("cancel",t),ct("close",t);break;case"iframe":case"object":case"embed":ct("load",t);break;case"video":case"audio":for(n=0;n<uo.length;n++)ct(uo[n],t);break;case"source":ct("error",t);break;case"img":case"image":case"link":ct("error",t),ct("load",t);break;case"details":ct("toggle",t);break;case"input":ct("invalid",t),gf(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":ct("invalid",t);break;case"textarea":ct("invalid",t),vf(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||bh(t.textContent,n)?(a.popover!=null&&(ct("beforetoggle",t),ct("toggle",t)),a.onScroll!=null&&ct("scroll",t),a.onScrollEnd!=null&&ct("scrollend",t),a.onClick!=null&&(t.onclick=Sl),t=!0):t=!1,t||Zl(e,!0)}function rp(e){for(fn=e.return;fn;)switch(fn.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:fn=fn.return}}function Kr(e){if(e!==fn)return!1;if(!mt)return rp(e),mt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Rc(e.type,e.memoizedProps)),n=!n),n&&Gt&&Zl(e),rp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Gt=Eh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Gt=Eh(e)}else t===27?(t=Gt,dr(e.type)?(e=Vc,Vc=null,Gt=e):Gt=t):Gt=fn?el(e.stateNode.nextSibling):null;return!0}function Cr(){Gt=fn=null,mt=!1}function vu(){var e=Pl;return e!==null&&(Tn===null?Tn=e:Tn.push.apply(Tn,e),Pl=null),e}function Ua(e){Pl===null?Pl=[e]:Pl.push(e)}var yu=_(null),kr=null,kl=null;function Kl(e,t,n){E(yu,t._currentValue),t._currentValue=n}function Ml(e){e._currentValue=yu.current,I(yu)}function bu(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function wu(e,t,n,a){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var v=c.child;f=f.firstContext;e:for(;f!==null;){var C=f;f=c;for(var H=0;H<t.length;H++)if(C.context===t[H]){f.lanes|=n,C=f.alternate,C!==null&&(C.lanes|=n),bu(f.return,n,e),a||(v=null);break e}f=C.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(o(341));v.lanes|=n,f=v.alternate,f!==null&&(f.lanes|=n),bu(v,n,e),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===e){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function Jr(e,t,n,a){e=null;for(var c=t,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(o(387));if(v=v.memoizedProps,v!==null){var C=c.type;Rn(c.pendingProps.value,v.value)||(e!==null?e.push(C):e=[C])}}else if(c===ee.current){if(v=c.alternate,v===null)throw Error(o(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(ho):e=[ho])}c=c.return}e!==null&&wu(t,e,n,a),t.flags|=262144}function rs(e){for(e=e.firstContext;e!==null;){if(!Rn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Mr(e){kr=e,kl=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function pn(e){return ap(kr,e)}function as(e,t){return kr===null&&Mr(e),ap(e,t)}function ap(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},kl===null){if(e===null)throw Error(o(308));kl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else kl=kl.next=t;return n}var kv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Mv=l.unstable_scheduleCallback,Ov=l.unstable_NormalPriority,tn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Su(){return{controller:new kv,data:new Map,refCount:0}}function Ga(e){e.refCount--,e.refCount===0&&Mv(Ov,function(){e.controller.abort()})}var qa=null,Nu=0,ea=0,ta=null;function Ev(e,t){if(qa===null){var n=qa=[];Nu=0,ea=kc(),ta={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Nu++,t.then(op,op),t}function op(){if(--Nu===0&&qa!==null){ta!==null&&(ta.status="fulfilled");var e=qa;qa=null,ea=0,ta=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Tv(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(c){n.push(c)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var c=0;c<n.length;c++)(0,n[c])(t)},function(c){for(a.status="rejected",a.reason=c,c=0;c<n.length;c++)(0,n[c])(void 0)}),a}var sp=L.S;L.S=function(e,t){Wm=ht(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Ev(e,t),sp!==null&&sp(e,t)};var Or=_(null);function ju(){var e=Or.current;return e!==null?e:Rt.pooledCache}function os(e,t){t===null?E(Or,Or.current):E(Or,t.pool)}function ip(){var e=ju();return e===null?null:{parent:tn._currentValue,pool:e}}var na=Error(o(460)),Cu=Error(o(474)),ss=Error(o(542)),is={then:function(){}};function up(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cp(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Sl,Sl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,fp(e),e;default:if(typeof t.status=="string")t.then(Sl,Sl);else{if(e=Rt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=a}},function(a){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,fp(e),e}throw Tr=t,na}}function Er(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Tr=n,na):n}}var Tr=null;function dp(){if(Tr===null)throw Error(o(459));var e=Tr;return Tr=null,e}function fp(e){if(e===na||e===ss)throw Error(o(483))}var la=null,Wa=0;function us(e){var t=Wa;return Wa+=1,la===null&&(la=[]),cp(la,e,t)}function Fa(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function cs(e,t){throw t.$$typeof===N?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function pp(e){function t($,V){if(e){var X=$.deletions;X===null?($.deletions=[V],$.flags|=16):X.push(V)}}function n($,V){if(!e)return null;for(;V!==null;)t($,V),V=V.sibling;return null}function a($){for(var V=new Map;$!==null;)$.key!==null?V.set($.key,$):V.set($.index,$),$=$.sibling;return V}function c($,V){return $=jl($,V),$.index=0,$.sibling=null,$}function f($,V,X){return $.index=X,e?(X=$.alternate,X!==null?(X=X.index,X<V?($.flags|=67108866,V):X):($.flags|=67108866,V)):($.flags|=1048576,V)}function v($){return e&&$.alternate===null&&($.flags|=67108866),$}function C($,V,X,pe){return V===null||V.tag!==6?(V=pu(X,$.mode,pe),V.return=$,V):(V=c(V,X),V.return=$,V)}function H($,V,X,pe){var He=X.type;return He===w?ue($,V,X.props.children,pe,X.key):V!==null&&(V.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===B&&Er(He)===V.type)?(V=c(V,X.props),Fa(V,X),V.return=$,V):(V=ns(X.type,X.key,X.props,null,$.mode,pe),Fa(V,X),V.return=$,V)}function P($,V,X,pe){return V===null||V.tag!==4||V.stateNode.containerInfo!==X.containerInfo||V.stateNode.implementation!==X.implementation?(V=mu(X,$.mode,pe),V.return=$,V):(V=c(V,X.children||[]),V.return=$,V)}function ue($,V,X,pe,He){return V===null||V.tag!==7?(V=jr(X,$.mode,pe,He),V.return=$,V):(V=c(V,X),V.return=$,V)}function he($,V,X){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=pu(""+V,$.mode,X),V.return=$,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case k:return X=ns(V.type,V.key,V.props,null,$.mode,X),Fa(X,V),X.return=$,X;case S:return V=mu(V,$.mode,X),V.return=$,V;case B:return V=Er(V),he($,V,X)}if(ie(V)||te(V))return V=jr(V,$.mode,X,null),V.return=$,V;if(typeof V.then=="function")return he($,us(V),X);if(V.$$typeof===R)return he($,as($,V),X);cs($,V)}return null}function K($,V,X,pe){var He=V!==null?V.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return He!==null?null:C($,V,""+X,pe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case k:return X.key===He?H($,V,X,pe):null;case S:return X.key===He?P($,V,X,pe):null;case B:return X=Er(X),K($,V,X,pe)}if(ie(X)||te(X))return He!==null?null:ue($,V,X,pe,null);if(typeof X.then=="function")return K($,V,us(X),pe);if(X.$$typeof===R)return K($,V,as($,X),pe);cs($,X)}return null}function ae($,V,X,pe,He){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return $=$.get(X)||null,C(V,$,""+pe,He);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case k:return $=$.get(pe.key===null?X:pe.key)||null,H(V,$,pe,He);case S:return $=$.get(pe.key===null?X:pe.key)||null,P(V,$,pe,He);case B:return pe=Er(pe),ae($,V,X,pe,He)}if(ie(pe)||te(pe))return $=$.get(X)||null,ue(V,$,pe,He,null);if(typeof pe.then=="function")return ae($,V,X,us(pe),He);if(pe.$$typeof===R)return ae($,V,X,as(V,pe),He);cs(V,pe)}return null}function Ee($,V,X,pe){for(var He=null,yt=null,De=V,ot=V=0,pt=null;De!==null&&ot<X.length;ot++){De.index>ot?(pt=De,De=null):pt=De.sibling;var bt=K($,De,X[ot],pe);if(bt===null){De===null&&(De=pt);break}e&&De&&bt.alternate===null&&t($,De),V=f(bt,V,ot),yt===null?He=bt:yt.sibling=bt,yt=bt,De=pt}if(ot===X.length)return n($,De),mt&&Cl($,ot),He;if(De===null){for(;ot<X.length;ot++)De=he($,X[ot],pe),De!==null&&(V=f(De,V,ot),yt===null?He=De:yt.sibling=De,yt=De);return mt&&Cl($,ot),He}for(De=a(De);ot<X.length;ot++)pt=ae(De,$,ot,X[ot],pe),pt!==null&&(e&&pt.alternate!==null&&De.delete(pt.key===null?ot:pt.key),V=f(pt,V,ot),yt===null?He=pt:yt.sibling=pt,yt=pt);return e&&De.forEach(function(gr){return t($,gr)}),mt&&Cl($,ot),He}function Fe($,V,X,pe){if(X==null)throw Error(o(151));for(var He=null,yt=null,De=V,ot=V=0,pt=null,bt=X.next();De!==null&&!bt.done;ot++,bt=X.next()){De.index>ot?(pt=De,De=null):pt=De.sibling;var gr=K($,De,bt.value,pe);if(gr===null){De===null&&(De=pt);break}e&&De&&gr.alternate===null&&t($,De),V=f(gr,V,ot),yt===null?He=gr:yt.sibling=gr,yt=gr,De=pt}if(bt.done)return n($,De),mt&&Cl($,ot),He;if(De===null){for(;!bt.done;ot++,bt=X.next())bt=he($,bt.value,pe),bt!==null&&(V=f(bt,V,ot),yt===null?He=bt:yt.sibling=bt,yt=bt);return mt&&Cl($,ot),He}for(De=a(De);!bt.done;ot++,bt=X.next())bt=ae(De,$,ot,bt.value,pe),bt!==null&&(e&&bt.alternate!==null&&De.delete(bt.key===null?ot:bt.key),V=f(bt,V,ot),yt===null?He=bt:yt.sibling=bt,yt=bt);return e&&De.forEach(function(Uy){return t($,Uy)}),mt&&Cl($,ot),He}function Dt($,V,X,pe){if(typeof X=="object"&&X!==null&&X.type===w&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case k:e:{for(var He=X.key;V!==null;){if(V.key===He){if(He=X.type,He===w){if(V.tag===7){n($,V.sibling),pe=c(V,X.props.children),pe.return=$,$=pe;break e}}else if(V.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===B&&Er(He)===V.type){n($,V.sibling),pe=c(V,X.props),Fa(pe,X),pe.return=$,$=pe;break e}n($,V);break}else t($,V);V=V.sibling}X.type===w?(pe=jr(X.props.children,$.mode,pe,X.key),pe.return=$,$=pe):(pe=ns(X.type,X.key,X.props,null,$.mode,pe),Fa(pe,X),pe.return=$,$=pe)}return v($);case S:e:{for(He=X.key;V!==null;){if(V.key===He)if(V.tag===4&&V.stateNode.containerInfo===X.containerInfo&&V.stateNode.implementation===X.implementation){n($,V.sibling),pe=c(V,X.children||[]),pe.return=$,$=pe;break e}else{n($,V);break}else t($,V);V=V.sibling}pe=mu(X,$.mode,pe),pe.return=$,$=pe}return v($);case B:return X=Er(X),Dt($,V,X,pe)}if(ie(X))return Ee($,V,X,pe);if(te(X)){if(He=te(X),typeof He!="function")throw Error(o(150));return X=He.call(X),Fe($,V,X,pe)}if(typeof X.then=="function")return Dt($,V,us(X),pe);if(X.$$typeof===R)return Dt($,V,as($,X),pe);cs($,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,V!==null&&V.tag===6?(n($,V.sibling),pe=c(V,X),pe.return=$,$=pe):(n($,V),pe=pu(X,$.mode,pe),pe.return=$,$=pe),v($)):n($,V)}return function($,V,X,pe){try{Wa=0;var He=Dt($,V,X,pe);return la=null,He}catch(De){if(De===na||De===ss)throw De;var yt=zn(29,De,null,$.mode);return yt.lanes=pe,yt.return=$,yt}}}var _r=pp(!0),mp=pp(!1),Jl=!1;function ku(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function er(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function tr(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(wt&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,t=ts(e),Zf(e,null,n),t}return es(e,a,t,n),ts(e)}function $a(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,st(e,n)}}function Ou(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var c=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var v={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};f===null?c=f=v:f=f.next=v,n=n.next}while(n!==null);f===null?c=f=t:f=f.next=t}else c=f=t;n={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Eu=!1;function Ya(){if(Eu){var e=ta;if(e!==null)throw e}}function Qa(e,t,n,a){Eu=!1;var c=e.updateQueue;Jl=!1;var f=c.firstBaseUpdate,v=c.lastBaseUpdate,C=c.shared.pending;if(C!==null){c.shared.pending=null;var H=C,P=H.next;H.next=null,v===null?f=P:v.next=P,v=H;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,C=ue.lastBaseUpdate,C!==v&&(C===null?ue.firstBaseUpdate=P:C.next=P,ue.lastBaseUpdate=H))}if(f!==null){var he=c.baseState;v=0,ue=P=H=null,C=f;do{var K=C.lane&-536870913,ae=K!==C.lane;if(ae?(ft&K)===K:(a&K)===K){K!==0&&K===ea&&(Eu=!0),ue!==null&&(ue=ue.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Ee=e,Fe=C;K=t;var Dt=n;switch(Fe.tag){case 1:if(Ee=Fe.payload,typeof Ee=="function"){he=Ee.call(Dt,he,K);break e}he=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Fe.payload,K=typeof Ee=="function"?Ee.call(Dt,he,K):Ee,K==null)break e;he=y({},he,K);break e;case 2:Jl=!0}}K=C.callback,K!==null&&(e.flags|=64,ae&&(e.flags|=8192),ae=c.callbacks,ae===null?c.callbacks=[K]:ae.push(K))}else ae={lane:K,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ue===null?(P=ue=ae,H=he):ue=ue.next=ae,v|=K;if(C=C.next,C===null){if(C=c.shared.pending,C===null)break;ae=C,C=ae.next,ae.next=null,c.lastBaseUpdate=ae,c.shared.pending=null}}while(!0);ue===null&&(H=he),c.baseState=H,c.firstBaseUpdate=P,c.lastBaseUpdate=ue,f===null&&(c.shared.lanes=0),or|=v,e.lanes=v,e.memoizedState=he}}function hp(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function gp(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)hp(n[e],t)}var ra=_(null),ds=_(0);function xp(e,t){e=zl,E(ds,e),E(ra,t),zl=e|t.baseLanes}function Tu(){E(ds,zl),E(ra,ra.current)}function _u(){zl=ds.current,I(ra),I(ds)}var Bn=_(null),Jn=null;function nr(e){var t=e.alternate;E(Zt,Zt.current&1),E(Bn,e),Jn===null&&(t===null||ra.current!==null||t.memoizedState!==null)&&(Jn=e)}function Lu(e){E(Zt,Zt.current),E(Bn,e),Jn===null&&(Jn=e)}function vp(e){e.tag===22?(E(Zt,Zt.current),E(Bn,e),Jn===null&&(Jn=e)):lr()}function lr(){E(Zt,Zt.current),E(Bn,Bn.current)}function In(e){I(Bn),Jn===e&&(Jn=null),I(Zt)}var Zt=_(0);function fs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ic(n)||Hc(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ol=0,nt=null,Lt=null,nn=null,ps=!1,aa=!1,Lr=!1,ms=0,Xa=0,oa=null,_v=0;function Qt(){throw Error(o(321))}function Au(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rn(e[n],t[n]))return!1;return!0}function Du(e,t,n,a,c,f){return Ol=f,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=e===null||e.memoizedState===null?tm:Xu,Lr=!1,f=n(a,c),Lr=!1,aa&&(f=bp(t,n,a,c)),yp(e),f}function yp(e){L.H=Ka;var t=Lt!==null&&Lt.next!==null;if(Ol=0,nn=Lt=nt=null,ps=!1,Xa=0,oa=null,t)throw Error(o(300));e===null||ln||(e=e.dependencies,e!==null&&rs(e)&&(ln=!0))}function bp(e,t,n,a){nt=e;var c=0;do{if(aa&&(oa=null),Xa=0,aa=!1,25<=c)throw Error(o(301));if(c+=1,nn=Lt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}L.H=nm,f=t(n,a)}while(aa);return f}function Lv(){var e=L.H,t=e.useState()[0];return t=typeof t.then=="function"?Pa(t):t,e=e.useState()[0],(Lt!==null?Lt.memoizedState:null)!==e&&(nt.flags|=1024),t}function Ru(){var e=ms!==0;return ms=0,e}function zu(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Bu(e){if(ps){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ps=!1}Ol=0,nn=Lt=nt=null,aa=!1,Xa=ms=0,oa=null}function Nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?nt.memoizedState=nn=e:nn=nn.next=e,nn}function Kt(){if(Lt===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var t=nn===null?nt.memoizedState:nn.next;if(t!==null)nn=t,Lt=e;else{if(e===null)throw nt.alternate===null?Error(o(467)):Error(o(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},nn===null?nt.memoizedState=nn=e:nn=nn.next=e}return nn}function hs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pa(e){var t=Xa;return Xa+=1,oa===null&&(oa=[]),e=cp(oa,e,t),t=nt,(nn===null?t.memoizedState:nn.next)===null&&(t=t.alternate,L.H=t===null||t.memoizedState===null?tm:Xu),e}function gs(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Pa(e);if(e.$$typeof===R)return pn(e)}throw Error(o(438,String(e)))}function Iu(e){var t=null,n=nt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=nt.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=hs(),nt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=G;return t.index++,n}function El(e,t){return typeof t=="function"?t(e):t}function xs(e){var t=Kt();return Hu(t,Lt,e)}function Hu(e,t,n){var a=e.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var c=e.baseQueue,f=a.pending;if(f!==null){if(c!==null){var v=c.next;c.next=f.next,f.next=v}t.baseQueue=c=f,a.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{t=c.next;var C=v=null,H=null,P=t,ue=!1;do{var he=P.lane&-536870913;if(he!==P.lane?(ft&he)===he:(Ol&he)===he){var K=P.revertLane;if(K===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),he===ea&&(ue=!0);else if((Ol&K)===K){P=P.next,K===ea&&(ue=!0);continue}else he={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},H===null?(C=H=he,v=f):H=H.next=he,nt.lanes|=K,or|=K;he=P.action,Lr&&n(f,he),f=P.hasEagerState?P.eagerState:n(f,he)}else K={lane:he,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},H===null?(C=H=K,v=f):H=H.next=K,nt.lanes|=he,or|=he;P=P.next}while(P!==null&&P!==t);if(H===null?v=f:H.next=C,!Rn(f,e.memoizedState)&&(ln=!0,ue&&(n=ta,n!==null)))throw n;e.memoizedState=f,e.baseState=v,e.baseQueue=H,a.lastRenderedState=f}return c===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Vu(e){var t=Kt(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var a=n.dispatch,c=n.pending,f=t.memoizedState;if(c!==null){n.pending=null;var v=c=c.next;do f=e(f,v.action),v=v.next;while(v!==c);Rn(f,t.memoizedState)||(ln=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,a]}function wp(e,t,n){var a=nt,c=Kt(),f=mt;if(f){if(n===void 0)throw Error(o(407));n=n()}else n=t();var v=!Rn((Lt||c).memoizedState,n);if(v&&(c.memoizedState=n,ln=!0),c=c.queue,qu(jp.bind(null,a,c,e),[e]),c.getSnapshot!==t||v||nn!==null&&nn.memoizedState.tag&1){if(a.flags|=2048,sa(9,{destroy:void 0},Np.bind(null,a,c,n,t),null),Rt===null)throw Error(o(349));f||(Ol&127)!==0||Sp(a,t,n)}return n}function Sp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=nt.updateQueue,t===null?(t=hs(),nt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Np(e,t,n,a){t.value=n,t.getSnapshot=a,Cp(t)&&kp(e)}function jp(e,t,n){return n(function(){Cp(t)&&kp(e)})}function Cp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rn(e,n)}catch{return!0}}function kp(e){var t=Nr(e,2);t!==null&&_n(t,e,2)}function Uu(e){var t=Nn();if(typeof e=="function"){var n=e;if(e=n(),Lr){gt(!0);try{n()}finally{gt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:e},t}function Mp(e,t,n,a){return e.baseState=n,Hu(e,Lt,typeof a=="function"?a:El)}function Av(e,t,n,a,c){if(bs(e))throw Error(o(485));if(e=t.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};L.T!==null?n(!0):f.isTransition=!1,a(f),n=t.pending,n===null?(f.next=t.pending=f,Op(t,f)):(f.next=n.next,t.pending=n.next=f)}}function Op(e,t){var n=t.action,a=t.payload,c=e.state;if(t.isTransition){var f=L.T,v={};L.T=v;try{var C=n(c,a),H=L.S;H!==null&&H(v,C),Ep(e,t,C)}catch(P){Gu(e,t,P)}finally{f!==null&&v.types!==null&&(f.types=v.types),L.T=f}}else try{f=n(c,a),Ep(e,t,f)}catch(P){Gu(e,t,P)}}function Ep(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Tp(e,t,a)},function(a){return Gu(e,t,a)}):Tp(e,t,n)}function Tp(e,t,n){t.status="fulfilled",t.value=n,_p(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Op(e,n)))}function Gu(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,_p(t),t=t.next;while(t!==a)}e.action=null}function _p(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Lp(e,t){return t}function Ap(e,t){if(mt){var n=Rt.formState;if(n!==null){e:{var a=nt;if(mt){if(Gt){t:{for(var c=Gt,f=Kn;c.nodeType!==8;){if(!f){c=null;break t}if(c=el(c.nextSibling),c===null){c=null;break t}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){Gt=el(c.nextSibling),a=c.data==="F!";break e}}Zl(a)}a=!1}a&&(t=n[0])}}return n=Nn(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lp,lastRenderedState:t},n.queue=a,n=Kp.bind(null,nt,a),a.dispatch=n,a=Uu(!1),f=Qu.bind(null,nt,!1,a.queue),a=Nn(),c={state:t,dispatch:null,action:e,pending:null},a.queue=c,n=Av.bind(null,nt,c,f,n),c.dispatch=n,a.memoizedState=e,[t,n,!1]}function Dp(e){var t=Kt();return Rp(t,Lt,e)}function Rp(e,t,n){if(t=Hu(e,t,Lp)[0],e=xs(El)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Pa(t)}catch(v){throw v===na?ss:v}else a=t;t=Kt();var c=t.queue,f=c.dispatch;return n!==t.memoizedState&&(nt.flags|=2048,sa(9,{destroy:void 0},Dv.bind(null,c,n),null)),[a,f,e]}function Dv(e,t){e.action=t}function zp(e){var t=Kt(),n=Lt;if(n!==null)return Rp(t,n,e);Kt(),t=t.memoizedState,n=Kt();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function sa(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=nt.updateQueue,t===null&&(t=hs(),nt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Bp(){return Kt().memoizedState}function vs(e,t,n,a){var c=Nn();nt.flags|=e,c.memoizedState=sa(1|t,{destroy:void 0},n,a===void 0?null:a)}function ys(e,t,n,a){var c=Kt();a=a===void 0?null:a;var f=c.memoizedState.inst;Lt!==null&&a!==null&&Au(a,Lt.memoizedState.deps)?c.memoizedState=sa(t,f,n,a):(nt.flags|=e,c.memoizedState=sa(1|t,f,n,a))}function Ip(e,t){vs(8390656,8,e,t)}function qu(e,t){ys(2048,8,e,t)}function Rv(e){nt.flags|=4;var t=nt.updateQueue;if(t===null)t=hs(),nt.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Hp(e){var t=Kt().memoizedState;return Rv({ref:t,nextImpl:e}),function(){if((wt&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Vp(e,t){return ys(4,2,e,t)}function Up(e,t){return ys(4,4,e,t)}function Gp(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qp(e,t,n){n=n!=null?n.concat([e]):null,ys(4,4,Gp.bind(null,t,e),n)}function Wu(){}function Wp(e,t){var n=Kt();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&Au(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Fp(e,t){var n=Kt();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&Au(t,a[1]))return a[0];if(a=e(),Lr){gt(!0);try{e()}finally{gt(!1)}}return n.memoizedState=[a,t],a}function Fu(e,t,n){return n===void 0||(Ol&1073741824)!==0&&(ft&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=$m(),nt.lanes|=e,or|=e,n)}function $p(e,t,n,a){return Rn(n,t)?n:ra.current!==null?(e=Fu(e,n,a),Rn(e,t)||(ln=!0),e):(Ol&42)===0||(Ol&1073741824)!==0&&(ft&261930)===0?(ln=!0,e.memoizedState=n):(e=$m(),nt.lanes|=e,or|=e,t)}function Yp(e,t,n,a,c){var f=Q.p;Q.p=f!==0&&8>f?f:8;var v=L.T,C={};L.T=C,Qu(e,!1,t,n);try{var H=c(),P=L.S;if(P!==null&&P(C,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var ue=Tv(H,a);Za(e,t,ue,Un(e))}else Za(e,t,a,Un(e))}catch(he){Za(e,t,{then:function(){},status:"rejected",reason:he},Un())}finally{Q.p=f,v!==null&&C.types!==null&&(v.types=C.types),L.T=v}}function zv(){}function $u(e,t,n,a){if(e.tag!==5)throw Error(o(476));var c=Qp(e).queue;Yp(e,c,t,se,n===null?zv:function(){return Xp(e),n(a)})}function Qp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:se},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Xp(e){var t=Qp(e);t.next===null&&(t=e.alternate.memoizedState),Za(e,t.next.queue,{},Un())}function Yu(){return pn(ho)}function Pp(){return Kt().memoizedState}function Zp(){return Kt().memoizedState}function Bv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Un();e=er(n);var a=tr(t,e,n);a!==null&&(_n(a,t,n),$a(a,t,n)),t={cache:Su()},e.payload=t;return}t=t.return}}function Iv(e,t,n){var a=Un();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},bs(e)?Jp(t,n):(n=du(e,t,n,a),n!==null&&(_n(n,e,a),em(n,t,a)))}function Kp(e,t,n){var a=Un();Za(e,t,n,a)}function Za(e,t,n,a){var c={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(bs(e))Jp(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,C=f(v,n);if(c.hasEagerState=!0,c.eagerState=C,Rn(C,v))return es(e,t,c,0),Rt===null&&Jo(),!1}catch{}if(n=du(e,t,c,a),n!==null)return _n(n,e,a),em(n,t,a),!0}return!1}function Qu(e,t,n,a){if(a={lane:2,revertLane:kc(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},bs(e)){if(t)throw Error(o(479))}else t=du(e,n,a,2),t!==null&&_n(t,e,2)}function bs(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function Jp(e,t){aa=ps=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function em(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,st(e,n)}}var Ka={readContext:pn,use:gs,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};Ka.useEffectEvent=Qt;var tm={readContext:pn,use:gs,useCallback:function(e,t){return Nn().memoizedState=[e,t===void 0?null:t],e},useContext:pn,useEffect:Ip,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,vs(4194308,4,Gp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vs(4194308,4,e,t)},useInsertionEffect:function(e,t){vs(4,2,e,t)},useMemo:function(e,t){var n=Nn();t=t===void 0?null:t;var a=e();if(Lr){gt(!0);try{e()}finally{gt(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=Nn();if(n!==void 0){var c=n(t);if(Lr){gt(!0);try{n(t)}finally{gt(!1)}}}else c=t;return a.memoizedState=a.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},a.queue=e,e=e.dispatch=Iv.bind(null,nt,e),[a.memoizedState,e]},useRef:function(e){var t=Nn();return e={current:e},t.memoizedState=e},useState:function(e){e=Uu(e);var t=e.queue,n=Kp.bind(null,nt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Wu,useDeferredValue:function(e,t){var n=Nn();return Fu(n,e,t)},useTransition:function(){var e=Uu(!1);return e=Yp.bind(null,nt,e.queue,!0,!1),Nn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=nt,c=Nn();if(mt){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),Rt===null)throw Error(o(349));(ft&127)!==0||Sp(a,t,n)}c.memoizedState=n;var f={value:n,getSnapshot:t};return c.queue=f,Ip(jp.bind(null,a,f,e),[e]),a.flags|=2048,sa(9,{destroy:void 0},Np.bind(null,a,f,n,t),null),n},useId:function(){var e=Nn(),t=Rt.identifierPrefix;if(mt){var n=ml,a=pl;n=(a&~(1<<32-$t(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=ms++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=_v++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Yu,useFormState:Ap,useActionState:Ap,useOptimistic:function(e){var t=Nn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Qu.bind(null,nt,!0,n),n.dispatch=t,[e,t]},useMemoCache:Iu,useCacheRefresh:function(){return Nn().memoizedState=Bv.bind(null,nt)},useEffectEvent:function(e){var t=Nn(),n={impl:e};return t.memoizedState=n,function(){if((wt&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}},Xu={readContext:pn,use:gs,useCallback:Wp,useContext:pn,useEffect:qu,useImperativeHandle:qp,useInsertionEffect:Vp,useLayoutEffect:Up,useMemo:Fp,useReducer:xs,useRef:Bp,useState:function(){return xs(El)},useDebugValue:Wu,useDeferredValue:function(e,t){var n=Kt();return $p(n,Lt.memoizedState,e,t)},useTransition:function(){var e=xs(El)[0],t=Kt().memoizedState;return[typeof e=="boolean"?e:Pa(e),t]},useSyncExternalStore:wp,useId:Pp,useHostTransitionStatus:Yu,useFormState:Dp,useActionState:Dp,useOptimistic:function(e,t){var n=Kt();return Mp(n,Lt,e,t)},useMemoCache:Iu,useCacheRefresh:Zp};Xu.useEffectEvent=Hp;var nm={readContext:pn,use:gs,useCallback:Wp,useContext:pn,useEffect:qu,useImperativeHandle:qp,useInsertionEffect:Vp,useLayoutEffect:Up,useMemo:Fp,useReducer:Vu,useRef:Bp,useState:function(){return Vu(El)},useDebugValue:Wu,useDeferredValue:function(e,t){var n=Kt();return Lt===null?Fu(n,e,t):$p(n,Lt.memoizedState,e,t)},useTransition:function(){var e=Vu(El)[0],t=Kt().memoizedState;return[typeof e=="boolean"?e:Pa(e),t]},useSyncExternalStore:wp,useId:Pp,useHostTransitionStatus:Yu,useFormState:zp,useActionState:zp,useOptimistic:function(e,t){var n=Kt();return Lt!==null?Mp(n,Lt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Iu,useCacheRefresh:Zp};nm.useEffectEvent=Hp;function Pu(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:y({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zu={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Un(),c=er(a);c.payload=t,n!=null&&(c.callback=n),t=tr(e,c,a),t!==null&&(_n(t,e,a),$a(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Un(),c=er(a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=tr(e,c,a),t!==null&&(_n(t,e,a),$a(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Un(),a=er(n);a.tag=2,t!=null&&(a.callback=t),t=tr(e,a,n),t!==null&&(_n(t,e,n),$a(t,e,n))}};function lm(e,t,n,a,c,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,v):t.prototype&&t.prototype.isPureReactComponent?!Ia(n,a)||!Ia(c,f):!0}function rm(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Zu.enqueueReplaceState(t,t.state,null)}function Ar(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=y({},n));for(var c in e)n[c]===void 0&&(n[c]=e[c])}return n}function am(e){Ko(e)}function om(e){console.error(e)}function sm(e){Ko(e)}function ws(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function im(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Ku(e,t,n){return n=er(n),n.tag=3,n.payload={element:null},n.callback=function(){ws(e,t)},n}function um(e){return e=er(e),e.tag=3,e}function cm(e,t,n,a){var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=a.value;e.payload=function(){return c(f)},e.callback=function(){im(t,n,a)}}var v=n.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){im(t,n,a),typeof c!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})})}function Hv(e,t,n,a,c){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&Jr(t,n,c,!0),n=Bn.current,n!==null){switch(n.tag){case 31:case 13:return Jn===null?As():n.alternate===null&&Xt===0&&(Xt=3),n.flags&=-257,n.flags|=65536,n.lanes=c,a===is?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Nc(e,a,c)),!1;case 22:return n.flags|=65536,a===is?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Nc(e,a,c)),!1}throw Error(o(435,n.tag))}return Nc(e,a,c),As(),!1}if(mt)return t=Bn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,a!==xu&&(e=Error(o(422),{cause:a}),Ua(Xn(e,n)))):(a!==xu&&(t=Error(o(423),{cause:a}),Ua(Xn(t,n))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,a=Xn(a,n),c=Ku(e.stateNode,a,c),Ou(e,c),Xt!==4&&(Xt=2)),!1;var f=Error(o(520),{cause:a});if(f=Xn(f,n),oo===null?oo=[f]:oo.push(f),Xt!==4&&(Xt=2),t===null)return!0;a=Xn(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=c&-c,n.lanes|=e,e=Ku(n.stateNode,a,e),Ou(n,e),!1;case 1:if(t=n.type,f=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(sr===null||!sr.has(f))))return n.flags|=65536,c&=-c,n.lanes|=c,c=um(c),cm(c,e,n,a),Ou(n,c),!1}n=n.return}while(n!==null);return!1}var Ju=Error(o(461)),ln=!1;function mn(e,t,n,a){t.child=e===null?mp(t,null,n,a):_r(t,e.child,n,a)}function dm(e,t,n,a,c){n=n.render;var f=t.ref;if("ref"in a){var v={};for(var C in a)C!=="ref"&&(v[C]=a[C])}else v=a;return Mr(t),a=Du(e,t,n,v,f,c),C=Ru(),e!==null&&!ln?(zu(e,t,c),Tl(e,t,c)):(mt&&C&&hu(t),t.flags|=1,mn(e,t,a,c),t.child)}function fm(e,t,n,a,c){if(e===null){var f=n.type;return typeof f=="function"&&!fu(f)&&f.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=f,pm(e,t,f,a,c)):(e=ns(n.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!sc(e,c)){var v=f.memoizedProps;if(n=n.compare,n=n!==null?n:Ia,n(v,a)&&e.ref===t.ref)return Tl(e,t,c)}return t.flags|=1,e=jl(f,a),e.ref=t.ref,e.return=t,t.child=e}function pm(e,t,n,a,c){if(e!==null){var f=e.memoizedProps;if(Ia(f,a)&&e.ref===t.ref)if(ln=!1,t.pendingProps=a=f,sc(e,c))(e.flags&131072)!==0&&(ln=!0);else return t.lanes=e.lanes,Tl(e,t,c)}return ec(e,t,n,a,c)}function mm(e,t,n,a){var c=a.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|n:n,e!==null){for(a=t.child=e.child,c=0;a!==null;)c=c|a.lanes|a.childLanes,a=a.sibling;a=c&~f}else a=0,t.child=null;return hm(e,t,f,n,a)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&os(t,f!==null?f.cachePool:null),f!==null?xp(t,f):Tu(),vp(t);else return a=t.lanes=536870912,hm(e,t,f!==null?f.baseLanes|n:n,n,a)}else f!==null?(os(t,f.cachePool),xp(t,f),lr(),t.memoizedState=null):(e!==null&&os(t,null),Tu(),lr());return mn(e,t,c,n),t.child}function Ja(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function hm(e,t,n,a,c){var f=ju();return f=f===null?null:{parent:tn._currentValue,pool:f},t.memoizedState={baseLanes:n,cachePool:f},e!==null&&os(t,null),Tu(),vp(t),e!==null&&Jr(e,t,a,!0),t.childLanes=c,null}function Ss(e,t){return t=js({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function gm(e,t,n){return _r(t,e.child,null,n),e=Ss(t,t.pendingProps),e.flags|=2,In(t),t.memoizedState=null,e}function Vv(e,t,n){var a=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(mt){if(a.mode==="hidden")return e=Ss(t,a),t.lanes=536870912,Ja(null,e);if(Lu(t),(e=Gt)?(e=Oh(e,Kn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Xl!==null?{id:pl,overflow:ml}:null,retryLane:536870912,hydrationErrors:null},n=Jf(e),n.return=t,t.child=n,fn=t,Gt=null)):e=null,e===null)throw Zl(t);return t.lanes=536870912,null}return Ss(t,a)}var f=e.memoizedState;if(f!==null){var v=f.dehydrated;if(Lu(t),c)if(t.flags&256)t.flags&=-257,t=gm(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(ln||Jr(e,t,n,!1),c=(n&e.childLanes)!==0,ln||c){if(a=Rt,a!==null&&(v=Ge(a,n),v!==0&&v!==f.retryLane))throw f.retryLane=v,Nr(e,v),_n(a,e,v),Ju;As(),t=gm(e,t,n)}else e=f.treeContext,Gt=el(v.nextSibling),fn=t,mt=!0,Pl=null,Kn=!1,e!==null&&np(t,e),t=Ss(t,a),t.flags|=4096;return t}return e=jl(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ns(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function ec(e,t,n,a,c){return Mr(t),n=Du(e,t,n,a,void 0,c),a=Ru(),e!==null&&!ln?(zu(e,t,c),Tl(e,t,c)):(mt&&a&&hu(t),t.flags|=1,mn(e,t,n,c),t.child)}function xm(e,t,n,a,c,f){return Mr(t),t.updateQueue=null,n=bp(t,a,n,c),yp(e),a=Ru(),e!==null&&!ln?(zu(e,t,f),Tl(e,t,f)):(mt&&a&&hu(t),t.flags|=1,mn(e,t,n,f),t.child)}function vm(e,t,n,a,c){if(Mr(t),t.stateNode===null){var f=Xr,v=n.contextType;typeof v=="object"&&v!==null&&(f=pn(v)),f=new n(a,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Zu,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=a,f.state=t.memoizedState,f.refs={},ku(t),v=n.contextType,f.context=typeof v=="object"&&v!==null?pn(v):Xr,f.state=t.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(Pu(t,n,v,a),f.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Zu.enqueueReplaceState(f,f.state,null),Qa(t,a,f,c),Ya(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){f=t.stateNode;var C=t.memoizedProps,H=Ar(n,C);f.props=H;var P=f.context,ue=n.contextType;v=Xr,typeof ue=="object"&&ue!==null&&(v=pn(ue));var he=n.getDerivedStateFromProps;ue=typeof he=="function"||typeof f.getSnapshotBeforeUpdate=="function",C=t.pendingProps!==C,ue||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(C||P!==v)&&rm(t,f,a,v),Jl=!1;var K=t.memoizedState;f.state=K,Qa(t,a,f,c),Ya(),P=t.memoizedState,C||K!==P||Jl?(typeof he=="function"&&(Pu(t,n,he,a),P=t.memoizedState),(H=Jl||lm(t,n,H,a,K,P,v))?(ue||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=P),f.props=a,f.state=P,f.context=v,a=H):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,Mu(e,t),v=t.memoizedProps,ue=Ar(n,v),f.props=ue,he=t.pendingProps,K=f.context,P=n.contextType,H=Xr,typeof P=="object"&&P!==null&&(H=pn(P)),C=n.getDerivedStateFromProps,(P=typeof C=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==he||K!==H)&&rm(t,f,a,H),Jl=!1,K=t.memoizedState,f.state=K,Qa(t,a,f,c),Ya();var ae=t.memoizedState;v!==he||K!==ae||Jl||e!==null&&e.dependencies!==null&&rs(e.dependencies)?(typeof C=="function"&&(Pu(t,n,C,a),ae=t.memoizedState),(ue=Jl||lm(t,n,ue,a,K,ae,H)||e!==null&&e.dependencies!==null&&rs(e.dependencies))?(P||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,ae,H),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,ae,H)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ae),f.props=a,f.state=ae,f.context=H,a=ue):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),a=!1)}return f=a,Ns(e,t),a=(t.flags&128)!==0,f||a?(f=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&a?(t.child=_r(t,e.child,null,c),t.child=_r(t,null,n,c)):mn(e,t,n,c),t.memoizedState=f.state,e=t.child):e=Tl(e,t,c),e}function ym(e,t,n,a){return Cr(),t.flags|=256,mn(e,t,n,a),t.child}var tc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nc(e){return{baseLanes:e,cachePool:ip()}}function lc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Vn),e}function bm(e,t,n){var a=t.pendingProps,c=!1,f=(t.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Zt.current&2)!==0),v&&(c=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(mt){if(c?nr(t):lr(),(e=Gt)?(e=Oh(e,Kn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Xl!==null?{id:pl,overflow:ml}:null,retryLane:536870912,hydrationErrors:null},n=Jf(e),n.return=t,t.child=n,fn=t,Gt=null)):e=null,e===null)throw Zl(t);return Hc(e)?t.lanes=32:t.lanes=536870912,null}var C=a.children;return a=a.fallback,c?(lr(),c=t.mode,C=js({mode:"hidden",children:C},c),a=jr(a,c,n,null),C.return=t,a.return=t,C.sibling=a,t.child=C,a=t.child,a.memoizedState=nc(n),a.childLanes=lc(e,v,n),t.memoizedState=tc,Ja(null,a)):(nr(t),rc(t,C))}var H=e.memoizedState;if(H!==null&&(C=H.dehydrated,C!==null)){if(f)t.flags&256?(nr(t),t.flags&=-257,t=ac(e,t,n)):t.memoizedState!==null?(lr(),t.child=e.child,t.flags|=128,t=null):(lr(),C=a.fallback,c=t.mode,a=js({mode:"visible",children:a.children},c),C=jr(C,c,n,null),C.flags|=2,a.return=t,C.return=t,a.sibling=C,t.child=a,_r(t,e.child,null,n),a=t.child,a.memoizedState=nc(n),a.childLanes=lc(e,v,n),t.memoizedState=tc,t=Ja(null,a));else if(nr(t),Hc(C)){if(v=C.nextSibling&&C.nextSibling.dataset,v)var P=v.dgst;v=P,a=Error(o(419)),a.stack="",a.digest=v,Ua({value:a,source:null,stack:null}),t=ac(e,t,n)}else if(ln||Jr(e,t,n,!1),v=(n&e.childLanes)!==0,ln||v){if(v=Rt,v!==null&&(a=Ge(v,n),a!==0&&a!==H.retryLane))throw H.retryLane=a,Nr(e,a),_n(v,e,a),Ju;Ic(C)||As(),t=ac(e,t,n)}else Ic(C)?(t.flags|=192,t.child=e.child,t=null):(e=H.treeContext,Gt=el(C.nextSibling),fn=t,mt=!0,Pl=null,Kn=!1,e!==null&&np(t,e),t=rc(t,a.children),t.flags|=4096);return t}return c?(lr(),C=a.fallback,c=t.mode,H=e.child,P=H.sibling,a=jl(H,{mode:"hidden",children:a.children}),a.subtreeFlags=H.subtreeFlags&65011712,P!==null?C=jl(P,C):(C=jr(C,c,n,null),C.flags|=2),C.return=t,a.return=t,a.sibling=C,t.child=a,Ja(null,a),a=t.child,C=e.child.memoizedState,C===null?C=nc(n):(c=C.cachePool,c!==null?(H=tn._currentValue,c=c.parent!==H?{parent:H,pool:H}:c):c=ip(),C={baseLanes:C.baseLanes|n,cachePool:c}),a.memoizedState=C,a.childLanes=lc(e,v,n),t.memoizedState=tc,Ja(e.child,a)):(nr(t),n=e.child,e=n.sibling,n=jl(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=n,t.memoizedState=null,n)}function rc(e,t){return t=js({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function js(e,t){return e=zn(22,e,null,t),e.lanes=0,e}function ac(e,t,n){return _r(t,e.child,null,n),e=rc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wm(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),bu(e.return,t,n)}function oc(e,t,n,a,c,f){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:c,treeForkCount:f}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=n,v.tailMode=c,v.treeForkCount=f)}function Sm(e,t,n){var a=t.pendingProps,c=a.revealOrder,f=a.tail;a=a.children;var v=Zt.current,C=(v&2)!==0;if(C?(v=v&1|2,t.flags|=128):v&=1,E(Zt,v),mn(e,t,a,n),a=mt?Va:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wm(e,n,t);else if(e.tag===19)wm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&fs(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),oc(t,!1,c,n,f,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&fs(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}oc(t,!0,n,null,f,a);break;case"together":oc(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function Tl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),or|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Jr(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=jl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=jl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&rs(e)))}function Uv(e,t,n){switch(t.tag){case 3:ne(t,t.stateNode.containerInfo),Kl(t,tn,e.memoizedState.cache),Cr();break;case 27:case 5:Te(t);break;case 4:ne(t,t.stateNode.containerInfo);break;case 10:Kl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Lu(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(nr(t),t.flags|=128,null):(n&t.child.childLanes)!==0?bm(e,t,n):(nr(t),e=Tl(e,t,n),e!==null?e.sibling:null);nr(t);break;case 19:var c=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(Jr(e,t,n,!1),a=(n&t.childLanes)!==0),c){if(a)return Sm(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),E(Zt,Zt.current),a)break;return null;case 22:return t.lanes=0,mm(e,t,n,t.pendingProps);case 24:Kl(t,tn,e.memoizedState.cache)}return Tl(e,t,n)}function Nm(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ln=!0;else{if(!sc(e,n)&&(t.flags&128)===0)return ln=!1,Uv(e,t,n);ln=(e.flags&131072)!==0}else ln=!1,mt&&(t.flags&1048576)!==0&&tp(t,Va,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=Er(t.elementType),t.type=e,typeof e=="function")fu(e)?(a=Ar(e,a),t.tag=1,t=vm(null,t,e,a,n)):(t.tag=0,t=ec(null,t,e,a,n));else{if(e!=null){var c=e.$$typeof;if(c===z){t.tag=11,t=dm(null,t,e,a,n);break e}else if(c===A){t.tag=14,t=fm(null,t,e,a,n);break e}}throw t=le(e)||e,Error(o(306,t,""))}}return t;case 0:return ec(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,c=Ar(a,t.pendingProps),vm(e,t,a,c,n);case 3:e:{if(ne(t,t.stateNode.containerInfo),e===null)throw Error(o(387));a=t.pendingProps;var f=t.memoizedState;c=f.element,Mu(e,t),Qa(t,a,null,n);var v=t.memoizedState;if(a=v.cache,Kl(t,tn,a),a!==f.cache&&wu(t,[tn],n,!0),Ya(),a=v.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=ym(e,t,a,n);break e}else if(a!==c){c=Xn(Error(o(424)),t),Ua(c),t=ym(e,t,a,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Gt=el(e.firstChild),fn=t,mt=!0,Pl=null,Kn=!0,n=mp(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cr(),a===c){t=Tl(e,t,n);break e}mn(e,t,a,n)}t=t.child}return t;case 26:return Ns(e,t),e===null?(n=Dh(t.type,null,t.pendingProps,null))?t.memoizedState=n:mt||(n=t.type,e=t.pendingProps,a=Vs(ce.current).createElement(n),a[Ct]=t,a[Ut]=e,hn(a,n,e),en(a),t.stateNode=a):t.memoizedState=Dh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Te(t),e===null&&mt&&(a=t.stateNode=_h(t.type,t.pendingProps,ce.current),fn=t,Kn=!0,c=Gt,dr(t.type)?(Vc=c,Gt=el(a.firstChild)):Gt=c),mn(e,t,t.pendingProps.children,n),Ns(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&mt&&((c=a=Gt)&&(a=xy(a,t.type,t.pendingProps,Kn),a!==null?(t.stateNode=a,fn=t,Gt=el(a.firstChild),Kn=!1,c=!0):c=!1),c||Zl(t)),Te(t),c=t.type,f=t.pendingProps,v=e!==null?e.memoizedProps:null,a=f.children,Rc(c,f)?a=null:v!==null&&Rc(c,v)&&(t.flags|=32),t.memoizedState!==null&&(c=Du(e,t,Lv,null,null,n),ho._currentValue=c),Ns(e,t),mn(e,t,a,n),t.child;case 6:return e===null&&mt&&((e=n=Gt)&&(n=vy(n,t.pendingProps,Kn),n!==null?(t.stateNode=n,fn=t,Gt=null,e=!0):e=!1),e||Zl(t)),null;case 13:return bm(e,t,n);case 4:return ne(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=_r(t,null,a,n):mn(e,t,a,n),t.child;case 11:return dm(e,t,t.type,t.pendingProps,n);case 7:return mn(e,t,t.pendingProps,n),t.child;case 8:return mn(e,t,t.pendingProps.children,n),t.child;case 12:return mn(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Kl(t,t.type,a.value),mn(e,t,a.children,n),t.child;case 9:return c=t.type._context,a=t.pendingProps.children,Mr(t),c=pn(c),a=a(c),t.flags|=1,mn(e,t,a,n),t.child;case 14:return fm(e,t,t.type,t.pendingProps,n);case 15:return pm(e,t,t.type,t.pendingProps,n);case 19:return Sm(e,t,n);case 31:return Vv(e,t,n);case 22:return mm(e,t,n,t.pendingProps);case 24:return Mr(t),a=pn(tn),e===null?(c=ju(),c===null&&(c=Rt,f=Su(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=n),c=f),t.memoizedState={parent:a,cache:c},ku(t),Kl(t,tn,c)):((e.lanes&n)!==0&&(Mu(e,t),Qa(t,null,null,n),Ya()),c=e.memoizedState,f=t.memoizedState,c.parent!==a?(c={parent:a,cache:a},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Kl(t,tn,a)):(a=f.cache,Kl(t,tn,a),a!==c.cache&&wu(t,[tn],n,!0))),mn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function _l(e){e.flags|=4}function ic(e,t,n,a,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Pm())e.flags|=8192;else throw Tr=is,Cu}else e.flags&=-16777217}function jm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Hh(t))if(Pm())e.flags|=8192;else throw Tr=is,Cu}function Cs(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?F():536870912,e.lanes|=t,da|=t)}function eo(e,t){if(!mt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function qt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags&65011712,a|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Gv(e,t,n){var a=t.pendingProps;switch(gu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(t),null;case 1:return qt(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Ml(tn),ve(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Kr(t)?_l(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,vu())),qt(t),null;case 26:var c=t.type,f=t.memoizedState;return e===null?(_l(t),f!==null?(qt(t),jm(t,f)):(qt(t),ic(t,c,null,a,n))):f?f!==e.memoizedState?(_l(t),qt(t),jm(t,f)):(qt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&_l(t),qt(t),ic(t,c,e,a,n)),null;case 27:if(We(t),n=ce.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&_l(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return qt(t),null}e=W.current,Kr(t)?lp(t):(e=_h(c,a,n),t.stateNode=e,_l(t))}return qt(t),null;case 5:if(We(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&_l(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return qt(t),null}if(f=W.current,Kr(t))lp(t);else{var v=Vs(ce.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof a.is=="string"?v.createElement("select",{is:a.is}):v.createElement("select"),a.multiple?f.multiple=!0:a.size&&(f.size=a.size);break;default:f=typeof a.is=="string"?v.createElement(c,{is:a.is}):v.createElement(c)}}f[Ct]=t,f[Ut]=a;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=f;e:switch(hn(f,c,a),c){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&_l(t)}}return qt(t),ic(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&_l(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(o(166));if(e=ce.current,Kr(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,c=fn,c!==null)switch(c.tag){case 27:case 5:a=c.memoizedProps}e[Ct]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||bh(e.nodeValue,n)),e||Zl(t,!0)}else e=Vs(e).createTextNode(a),e[Ct]=t,t.stateNode=e}return qt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=Kr(t),n!==null){if(e===null){if(!a)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[Ct]=t}else Cr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qt(t),e=!1}else n=vu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(In(t),t):(In(t),null);if((t.flags&128)!==0)throw Error(o(558))}return qt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Kr(t),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[Ct]=t}else Cr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qt(t),c=!1}else c=vu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(In(t),t):(In(t),null)}return In(t),(t.flags&128)!==0?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,c=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(c=a.alternate.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Cs(t,t.updateQueue),qt(t),null);case 4:return ve(),e===null&&Tc(t.stateNode.containerInfo),qt(t),null;case 10:return Ml(t.type),qt(t),null;case 19:if(I(Zt),a=t.memoizedState,a===null)return qt(t),null;if(c=(t.flags&128)!==0,f=a.rendering,f===null)if(c)eo(a,!1);else{if(Xt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=fs(e),f!==null){for(t.flags|=128,eo(a,!1),e=f.updateQueue,t.updateQueue=e,Cs(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Kf(n,e),n=n.sibling;return E(Zt,Zt.current&1|2),mt&&Cl(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&ht()>Ts&&(t.flags|=128,c=!0,eo(a,!1),t.lanes=4194304)}else{if(!c)if(e=fs(f),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Cs(t,e),eo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!f.alternate&&!mt)return qt(t),null}else 2*ht()-a.renderingStartTime>Ts&&n!==536870912&&(t.flags|=128,c=!0,eo(a,!1),t.lanes=4194304);a.isBackwards?(f.sibling=t.child,t.child=f):(e=a.last,e!==null?e.sibling=f:t.child=f,a.last=f)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ht(),e.sibling=null,n=Zt.current,E(Zt,c?n&1|2:n&1),mt&&Cl(t,a.treeForkCount),e):(qt(t),null);case 22:case 23:return In(t),_u(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(qt(t),t.subtreeFlags&6&&(t.flags|=8192)):qt(t),n=t.updateQueue,n!==null&&Cs(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&I(Or),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ml(tn),qt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function qv(e,t){switch(gu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ml(tn),ve(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return We(t),null;case 31:if(t.memoizedState!==null){if(In(t),t.alternate===null)throw Error(o(340));Cr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(In(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Cr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(Zt),null;case 4:return ve(),null;case 10:return Ml(t.type),null;case 22:case 23:return In(t),_u(),e!==null&&I(Or),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ml(tn),null;case 25:return null;default:return null}}function Cm(e,t){switch(gu(t),t.tag){case 3:Ml(tn),ve();break;case 26:case 27:case 5:We(t);break;case 4:ve();break;case 31:t.memoizedState!==null&&In(t);break;case 13:In(t);break;case 19:I(Zt);break;case 10:Ml(t.type);break;case 22:case 23:In(t),_u(),e!==null&&I(Or);break;case 24:Ml(tn)}}function to(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var c=a.next;n=c;do{if((n.tag&e)===e){a=void 0;var f=n.create,v=n.inst;a=f(),v.destroy=a}n=n.next}while(n!==c)}}catch(C){Tt(t,t.return,C)}}function rr(e,t,n){try{var a=t.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&e)===e){var v=a.inst,C=v.destroy;if(C!==void 0){v.destroy=void 0,c=t;var H=n,P=C;try{P()}catch(ue){Tt(c,H,ue)}}}a=a.next}while(a!==f)}}catch(ue){Tt(t,t.return,ue)}}function km(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{gp(t,n)}catch(a){Tt(e,e.return,a)}}}function Mm(e,t,n){n.props=Ar(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Tt(e,t,a)}}function no(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(c){Tt(e,t,c)}}function hl(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(c){Tt(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(c){Tt(e,t,c)}else n.current=null}function Om(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(c){Tt(e,e.return,c)}}function uc(e,t,n){try{var a=e.stateNode;dy(a,e.type,n,t),a[Ut]=t}catch(c){Tt(e,e.return,c)}}function Em(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&dr(e.type)||e.tag===4}function cc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Em(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&dr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dc(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Sl));else if(a!==4&&(a===27&&dr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(dc(e,t,n),e=e.sibling;e!==null;)dc(e,t,n),e=e.sibling}function ks(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&dr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(ks(e,t,n),e=e.sibling;e!==null;)ks(e,t,n),e=e.sibling}function Tm(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);hn(t,a,n),t[Ct]=e,t[Ut]=n}catch(f){Tt(e,e.return,f)}}var Ll=!1,rn=!1,fc=!1,_m=typeof WeakSet=="function"?WeakSet:Set,cn=null;function Wv(e,t){if(e=e.containerInfo,Ac=Ys,e=qf(e),au(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var v=0,C=-1,H=-1,P=0,ue=0,he=e,K=null;t:for(;;){for(var ae;he!==n||c!==0&&he.nodeType!==3||(C=v+c),he!==f||a!==0&&he.nodeType!==3||(H=v+a),he.nodeType===3&&(v+=he.nodeValue.length),(ae=he.firstChild)!==null;)K=he,he=ae;for(;;){if(he===e)break t;if(K===n&&++P===c&&(C=v),K===f&&++ue===a&&(H=v),(ae=he.nextSibling)!==null)break;he=K,K=he.parentNode}he=ae}n=C===-1||H===-1?null:{start:C,end:H}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dc={focusedElem:e,selectionRange:n},Ys=!1,cn=t;cn!==null;)if(t=cn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,cn=e;else for(;cn!==null;){switch(t=cn,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)c=e[n],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,n=t,c=f.memoizedProps,f=f.memoizedState,a=n.stateNode;try{var Ee=Ar(n.type,c);e=a.getSnapshotBeforeUpdate(Ee,f),a.__reactInternalSnapshotBeforeUpdate=e}catch(Fe){Tt(n,n.return,Fe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Bc(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Bc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,cn=e;break}cn=t.return}}function Lm(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Dl(e,n),a&4&&to(5,n);break;case 1:if(Dl(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(v){Tt(n,n.return,v)}else{var c=Ar(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Tt(n,n.return,v)}}a&64&&km(n),a&512&&no(n,n.return);break;case 3:if(Dl(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{gp(e,t)}catch(v){Tt(n,n.return,v)}}break;case 27:t===null&&a&4&&Tm(n);case 26:case 5:Dl(e,n),t===null&&a&4&&Om(n),a&512&&no(n,n.return);break;case 12:Dl(e,n);break;case 31:Dl(e,n),a&4&&Rm(e,n);break;case 13:Dl(e,n),a&4&&zm(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Jv.bind(null,n),yy(e,n))));break;case 22:if(a=n.memoizedState!==null||Ll,!a){t=t!==null&&t.memoizedState!==null||rn,c=Ll;var f=rn;Ll=a,(rn=t)&&!f?Rl(e,n,(n.subtreeFlags&8772)!==0):Dl(e,n),Ll=c,rn=f}break;case 30:break;default:Dl(e,n)}}function Am(e){var t=e.alternate;t!==null&&(e.alternate=null,Am(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&un(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Wt=null,Mn=!1;function Al(e,t,n){for(n=n.child;n!==null;)Dm(e,t,n),n=n.sibling}function Dm(e,t,n){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(rt,n)}catch{}switch(n.tag){case 26:rn||hl(n,t),Al(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:rn||hl(n,t);var a=Wt,c=Mn;dr(n.type)&&(Wt=n.stateNode,Mn=!1),Al(e,t,n),fo(n.stateNode),Wt=a,Mn=c;break;case 5:rn||hl(n,t);case 6:if(a=Wt,c=Mn,Wt=null,Al(e,t,n),Wt=a,Mn=c,Wt!==null)if(Mn)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(n.stateNode)}catch(f){Tt(n,t,f)}else try{Wt.removeChild(n.stateNode)}catch(f){Tt(n,t,f)}break;case 18:Wt!==null&&(Mn?(e=Wt,kh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ya(e)):kh(Wt,n.stateNode));break;case 4:a=Wt,c=Mn,Wt=n.stateNode.containerInfo,Mn=!0,Al(e,t,n),Wt=a,Mn=c;break;case 0:case 11:case 14:case 15:rr(2,n,t),rn||rr(4,n,t),Al(e,t,n);break;case 1:rn||(hl(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&Mm(n,t,a)),Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:rn=(a=rn)||n.memoizedState!==null,Al(e,t,n),rn=a;break;default:Al(e,t,n)}}function Rm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ya(e)}catch(n){Tt(t,t.return,n)}}}function zm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ya(e)}catch(n){Tt(t,t.return,n)}}function Fv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new _m),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new _m),t;default:throw Error(o(435,e.tag))}}function Ms(e,t){var n=Fv(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var c=ey.bind(null,e,a);a.then(c,c)}})}function On(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var c=n[a],f=e,v=t,C=v;e:for(;C!==null;){switch(C.tag){case 27:if(dr(C.type)){Wt=C.stateNode,Mn=!1;break e}break;case 5:Wt=C.stateNode,Mn=!1;break e;case 3:case 4:Wt=C.stateNode.containerInfo,Mn=!0;break e}C=C.return}if(Wt===null)throw Error(o(160));Dm(f,v,c),Wt=null,Mn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Bm(t,e),t=t.sibling}var ol=null;function Bm(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:On(t,e),En(e),a&4&&(rr(3,e,e.return),to(3,e),rr(5,e,e.return));break;case 1:On(t,e),En(e),a&512&&(rn||n===null||hl(n,n.return)),a&64&&Ll&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var c=ol;if(On(t,e),En(e),a&512&&(rn||n===null||hl(n,n.return)),a&4){var f=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,c=c.ownerDocument||c;t:switch(a){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Vt]||f[Ct]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(a),c.head.insertBefore(f,c.querySelector("head > title"))),hn(f,a,n),f[Ct]=e,en(f),a=f;break e;case"link":var v=Bh("link","href",c).get(a+(n.href||""));if(v){for(var C=0;C<v.length;C++)if(f=v[C],f.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&f.getAttribute("rel")===(n.rel==null?null:n.rel)&&f.getAttribute("title")===(n.title==null?null:n.title)&&f.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){v.splice(C,1);break t}}f=c.createElement(a),hn(f,a,n),c.head.appendChild(f);break;case"meta":if(v=Bh("meta","content",c).get(a+(n.content||""))){for(C=0;C<v.length;C++)if(f=v[C],f.getAttribute("content")===(n.content==null?null:""+n.content)&&f.getAttribute("name")===(n.name==null?null:n.name)&&f.getAttribute("property")===(n.property==null?null:n.property)&&f.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&f.getAttribute("charset")===(n.charSet==null?null:n.charSet)){v.splice(C,1);break t}}f=c.createElement(a),hn(f,a,n),c.head.appendChild(f);break;default:throw Error(o(468,a))}f[Ct]=e,en(f),a=f}e.stateNode=a}else Ih(c,e.type,e.stateNode);else e.stateNode=zh(c,a,e.memoizedProps);else f!==a?(f===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):f.count--,a===null?Ih(c,e.type,e.stateNode):zh(c,a,e.memoizedProps)):a===null&&e.stateNode!==null&&uc(e,e.memoizedProps,n.memoizedProps)}break;case 27:On(t,e),En(e),a&512&&(rn||n===null||hl(n,n.return)),n!==null&&a&4&&uc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(On(t,e),En(e),a&512&&(rn||n===null||hl(n,n.return)),e.flags&32){c=e.stateNode;try{Gr(c,"")}catch(Ee){Tt(e,e.return,Ee)}}a&4&&e.stateNode!=null&&(c=e.memoizedProps,uc(e,c,n!==null?n.memoizedProps:c)),a&1024&&(fc=!0);break;case 6:if(On(t,e),En(e),a&4){if(e.stateNode===null)throw Error(o(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(Ee){Tt(e,e.return,Ee)}}break;case 3:if(qs=null,c=ol,ol=Us(t.containerInfo),On(t,e),ol=c,En(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{ya(t.containerInfo)}catch(Ee){Tt(e,e.return,Ee)}fc&&(fc=!1,Im(e));break;case 4:a=ol,ol=Us(e.stateNode.containerInfo),On(t,e),En(e),ol=a;break;case 12:On(t,e),En(e);break;case 31:On(t,e),En(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ms(e,a)));break;case 13:On(t,e),En(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Es=ht()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ms(e,a)));break;case 22:c=e.memoizedState!==null;var H=n!==null&&n.memoizedState!==null,P=Ll,ue=rn;if(Ll=P||c,rn=ue||H,On(t,e),rn=ue,Ll=P,En(e),a&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(n===null||H||Ll||rn||Dr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){H=n=t;try{if(f=H.stateNode,c)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=H.stateNode;var he=H.memoizedProps.style,K=he!=null&&he.hasOwnProperty("display")?he.display:null;C.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Ee){Tt(H,H.return,Ee)}}}else if(t.tag===6){if(n===null){H=t;try{H.stateNode.nodeValue=c?"":H.memoizedProps}catch(Ee){Tt(H,H.return,Ee)}}}else if(t.tag===18){if(n===null){H=t;try{var ae=H.stateNode;c?Mh(ae,!0):Mh(H.stateNode,!1)}catch(Ee){Tt(H,H.return,Ee)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Ms(e,n))));break;case 19:On(t,e),En(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ms(e,a)));break;case 30:break;case 21:break;default:On(t,e),En(e)}}function En(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(Em(a)){n=a;break}a=a.return}if(n==null)throw Error(o(160));switch(n.tag){case 27:var c=n.stateNode,f=cc(e);ks(e,f,c);break;case 5:var v=n.stateNode;n.flags&32&&(Gr(v,""),n.flags&=-33);var C=cc(e);ks(e,C,v);break;case 3:case 4:var H=n.stateNode.containerInfo,P=cc(e);dc(e,P,H);break;default:throw Error(o(161))}}catch(ue){Tt(e,e.return,ue)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Im(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Im(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Dl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Lm(e,t.alternate,t),t=t.sibling}function Dr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:rr(4,t,t.return),Dr(t);break;case 1:hl(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Mm(t,t.return,n),Dr(t);break;case 27:fo(t.stateNode);case 26:case 5:hl(t,t.return),Dr(t);break;case 22:t.memoizedState===null&&Dr(t);break;case 30:Dr(t);break;default:Dr(t)}e=e.sibling}}function Rl(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,c=e,f=t,v=f.flags;switch(f.tag){case 0:case 11:case 15:Rl(c,f,n),to(4,f);break;case 1:if(Rl(c,f,n),a=f,c=a.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(P){Tt(a,a.return,P)}if(a=f,c=a.updateQueue,c!==null){var C=a.stateNode;try{var H=c.shared.hiddenCallbacks;if(H!==null)for(c.shared.hiddenCallbacks=null,c=0;c<H.length;c++)hp(H[c],C)}catch(P){Tt(a,a.return,P)}}n&&v&64&&km(f),no(f,f.return);break;case 27:Tm(f);case 26:case 5:Rl(c,f,n),n&&a===null&&v&4&&Om(f),no(f,f.return);break;case 12:Rl(c,f,n);break;case 31:Rl(c,f,n),n&&v&4&&Rm(c,f);break;case 13:Rl(c,f,n),n&&v&4&&zm(c,f);break;case 22:f.memoizedState===null&&Rl(c,f,n),no(f,f.return);break;case 30:break;default:Rl(c,f,n)}t=t.sibling}}function pc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ga(n))}function mc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ga(e))}function sl(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hm(e,t,n,a),t=t.sibling}function Hm(e,t,n,a){var c=t.flags;switch(t.tag){case 0:case 11:case 15:sl(e,t,n,a),c&2048&&to(9,t);break;case 1:sl(e,t,n,a);break;case 3:sl(e,t,n,a),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ga(e)));break;case 12:if(c&2048){sl(e,t,n,a),e=t.stateNode;try{var f=t.memoizedProps,v=f.id,C=f.onPostCommit;typeof C=="function"&&C(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(H){Tt(t,t.return,H)}}else sl(e,t,n,a);break;case 31:sl(e,t,n,a);break;case 13:sl(e,t,n,a);break;case 23:break;case 22:f=t.stateNode,v=t.alternate,t.memoizedState!==null?f._visibility&2?sl(e,t,n,a):lo(e,t):f._visibility&2?sl(e,t,n,a):(f._visibility|=2,ia(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),c&2048&&pc(v,t);break;case 24:sl(e,t,n,a),c&2048&&mc(t.alternate,t);break;default:sl(e,t,n,a)}}function ia(e,t,n,a,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,v=t,C=n,H=a,P=v.flags;switch(v.tag){case 0:case 11:case 15:ia(f,v,C,H,c),to(8,v);break;case 23:break;case 22:var ue=v.stateNode;v.memoizedState!==null?ue._visibility&2?ia(f,v,C,H,c):lo(f,v):(ue._visibility|=2,ia(f,v,C,H,c)),c&&P&2048&&pc(v.alternate,v);break;case 24:ia(f,v,C,H,c),c&&P&2048&&mc(v.alternate,v);break;default:ia(f,v,C,H,c)}t=t.sibling}}function lo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,c=a.flags;switch(a.tag){case 22:lo(n,a),c&2048&&pc(a.alternate,a);break;case 24:lo(n,a),c&2048&&mc(a.alternate,a);break;default:lo(n,a)}t=t.sibling}}var ro=8192;function ua(e,t,n){if(e.subtreeFlags&ro)for(e=e.child;e!==null;)Vm(e,t,n),e=e.sibling}function Vm(e,t,n){switch(e.tag){case 26:ua(e,t,n),e.flags&ro&&e.memoizedState!==null&&_y(n,ol,e.memoizedState,e.memoizedProps);break;case 5:ua(e,t,n);break;case 3:case 4:var a=ol;ol=Us(e.stateNode.containerInfo),ua(e,t,n),ol=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=ro,ro=16777216,ua(e,t,n),ro=a):ua(e,t,n));break;default:ua(e,t,n)}}function Um(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ao(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];cn=a,qm(a,e)}Um(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gm(e),e=e.sibling}function Gm(e){switch(e.tag){case 0:case 11:case 15:ao(e),e.flags&2048&&rr(9,e,e.return);break;case 3:ao(e);break;case 12:ao(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Os(e)):ao(e);break;default:ao(e)}}function Os(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];cn=a,qm(a,e)}Um(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:rr(8,t,t.return),Os(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Os(t));break;default:Os(t)}e=e.sibling}}function qm(e,t){for(;cn!==null;){var n=cn;switch(n.tag){case 0:case 11:case 15:rr(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Ga(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,cn=a;else e:for(n=e;cn!==null;){a=cn;var c=a.sibling,f=a.return;if(Am(a),a===n){cn=null;break e}if(c!==null){c.return=f,cn=c;break e}cn=f}}}var $v={getCacheForType:function(e){var t=pn(tn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return pn(tn).controller.signal}},Yv=typeof WeakMap=="function"?WeakMap:Map,wt=0,Rt=null,ut=null,ft=0,Et=0,Hn=null,ar=!1,ca=!1,hc=!1,zl=0,Xt=0,or=0,Rr=0,gc=0,Vn=0,da=0,oo=null,Tn=null,xc=!1,Es=0,Wm=0,Ts=1/0,_s=null,sr=null,on=0,ir=null,fa=null,Bl=0,vc=0,yc=null,Fm=null,so=0,bc=null;function Un(){return(wt&2)!==0&&ft!==0?ft&-ft:L.T!==null?kc():Bt()}function $m(){if(Vn===0)if((ft&536870912)===0||mt){var e=sn;sn<<=1,(sn&3932160)===0&&(sn=262144),Vn=e}else Vn=536870912;return e=Bn.current,e!==null&&(e.flags|=32),Vn}function _n(e,t,n){(e===Rt&&(Et===2||Et===9)||e.cancelPendingCommit!==null)&&(pa(e,0),ur(e,ft,Vn,!1)),fe(e,n),((wt&2)===0||e!==Rt)&&(e===Rt&&((wt&2)===0&&(Rr|=n),Xt===4&&ur(e,ft,Vn,!1)),gl(e))}function Ym(e,t,n){if((wt&6)!==0)throw Error(o(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Be(e,t),c=a?Pv(e,t):Sc(e,t,!0),f=a;do{if(c===0){ca&&!a&&ur(e,t,0,!1);break}else{if(n=e.current.alternate,f&&!Qv(n)){c=Sc(e,t,!1),f=!1;continue}if(c===2){if(f=t,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var C=e;c=oo;var H=C.current.memoizedState.isDehydrated;if(H&&(pa(C,v).flags|=256),v=Sc(C,v,!1),v!==2){if(hc&&!H){C.errorRecoveryDisabledLanes|=f,Rr|=f,c=4;break e}f=Tn,Tn=c,f!==null&&(Tn===null?Tn=f:Tn.push.apply(Tn,f))}c=v}if(f=!1,c!==2)continue}}if(c===1){pa(e,0),ur(e,t,0,!0);break}e:{switch(a=e,f=c,f){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:ur(a,t,Vn,!ar);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=Es+300-ht(),10<c)){if(ur(a,t,Vn,!ar),Re(a,0,!0)!==0)break e;Bl=t,a.timeoutHandle=jh(Qm.bind(null,a,n,Tn,_s,xc,t,Vn,Rr,da,ar,f,"Throttled",-0,0),c);break e}Qm(a,n,Tn,_s,xc,t,Vn,Rr,da,ar,f,null,-0,0)}}break}while(!0);gl(e)}function Qm(e,t,n,a,c,f,v,C,H,P,ue,he,K,ae){if(e.timeoutHandle=-1,he=t.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sl},Vm(t,f,he);var Ee=(f&62914560)===f?Es-ht():(f&4194048)===f?Wm-ht():0;if(Ee=Ly(he,Ee),Ee!==null){Bl=f,e.cancelPendingCommit=Ee(nh.bind(null,e,t,f,n,a,c,v,C,H,ue,he,null,K,ae)),ur(e,f,v,!P);return}}nh(e,t,f,n,a,c,v,C,H)}function Qv(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var c=n[a],f=c.getSnapshot;c=c.value;try{if(!Rn(f(),c))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ur(e,t,n,a){t&=~gc,t&=~Rr,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var c=t;0<c;){var f=31-$t(c),v=1<<f;a[f]=-1,c&=~v}n!==0&&Ie(e,n,t)}function Ls(){return(wt&6)===0?(io(0),!1):!0}function wc(){if(ut!==null){if(Et===0)var e=ut.return;else e=ut,kl=kr=null,Bu(e),la=null,Wa=0,e=ut;for(;e!==null;)Cm(e.alternate,e),e=e.return;ut=null}}function pa(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,my(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Bl=0,wc(),Rt=e,ut=n=jl(e.current,null),ft=t,Et=0,Hn=null,ar=!1,ca=Be(e,t),hc=!1,da=Vn=gc=Rr=or=Xt=0,Tn=oo=null,xc=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var c=31-$t(a),f=1<<c;t|=e[c],a&=~f}return zl=t,Jo(),n}function Xm(e,t){nt=null,L.H=Ka,t===na||t===ss?(t=dp(),Et=3):t===Cu?(t=dp(),Et=4):Et=t===Ju?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Hn=t,ut===null&&(Xt=1,ws(e,Xn(t,e.current)))}function Pm(){var e=Bn.current;return e===null?!0:(ft&4194048)===ft?Jn===null:(ft&62914560)===ft||(ft&536870912)!==0?e===Jn:!1}function Zm(){var e=L.H;return L.H=Ka,e===null?Ka:e}function Km(){var e=L.A;return L.A=$v,e}function As(){Xt=4,ar||(ft&4194048)!==ft&&Bn.current!==null||(ca=!0),(or&134217727)===0&&(Rr&134217727)===0||Rt===null||ur(Rt,ft,Vn,!1)}function Sc(e,t,n){var a=wt;wt|=2;var c=Zm(),f=Km();(Rt!==e||ft!==t)&&(_s=null,pa(e,t)),t=!1;var v=Xt;e:do try{if(Et!==0&&ut!==null){var C=ut,H=Hn;switch(Et){case 8:wc(),v=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(t=!0);var P=Et;if(Et=0,Hn=null,ma(e,C,H,P),n&&ca){v=0;break e}break;default:P=Et,Et=0,Hn=null,ma(e,C,H,P)}}Xv(),v=Xt;break}catch(ue){Xm(e,ue)}while(!0);return t&&e.shellSuspendCounter++,kl=kr=null,wt=a,L.H=c,L.A=f,ut===null&&(Rt=null,ft=0,Jo()),v}function Xv(){for(;ut!==null;)Jm(ut)}function Pv(e,t){var n=wt;wt|=2;var a=Zm(),c=Km();Rt!==e||ft!==t?(_s=null,Ts=ht()+500,pa(e,t)):ca=Be(e,t);e:do try{if(Et!==0&&ut!==null){t=ut;var f=Hn;t:switch(Et){case 1:Et=0,Hn=null,ma(e,t,f,1);break;case 2:case 9:if(up(f)){Et=0,Hn=null,eh(t);break}t=function(){Et!==2&&Et!==9||Rt!==e||(Et=7),gl(e)},f.then(t,t);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:up(f)?(Et=0,Hn=null,eh(t)):(Et=0,Hn=null,ma(e,t,f,7));break;case 5:var v=null;switch(ut.tag){case 26:v=ut.memoizedState;case 5:case 27:var C=ut;if(v?Hh(v):C.stateNode.complete){Et=0,Hn=null;var H=C.sibling;if(H!==null)ut=H;else{var P=C.return;P!==null?(ut=P,Ds(P)):ut=null}break t}}Et=0,Hn=null,ma(e,t,f,5);break;case 6:Et=0,Hn=null,ma(e,t,f,6);break;case 8:wc(),Xt=6;break e;default:throw Error(o(462))}}Zv();break}catch(ue){Xm(e,ue)}while(!0);return kl=kr=null,L.H=a,L.A=c,wt=n,ut!==null?0:(Rt=null,ft=0,Jo(),Xt)}function Zv(){for(;ut!==null&&!it();)Jm(ut)}function Jm(e){var t=Nm(e.alternate,e,zl);e.memoizedProps=e.pendingProps,t===null?Ds(e):ut=t}function eh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=xm(n,t,t.pendingProps,t.type,void 0,ft);break;case 11:t=xm(n,t,t.pendingProps,t.type.render,t.ref,ft);break;case 5:Bu(t);default:Cm(n,t),t=ut=Kf(t,zl),t=Nm(n,t,zl)}e.memoizedProps=e.pendingProps,t===null?Ds(e):ut=t}function ma(e,t,n,a){kl=kr=null,Bu(t),la=null,Wa=0;var c=t.return;try{if(Hv(e,c,t,n,ft)){Xt=1,ws(e,Xn(n,e.current)),ut=null;return}}catch(f){if(c!==null)throw ut=c,f;Xt=1,ws(e,Xn(n,e.current)),ut=null;return}t.flags&32768?(mt||a===1?e=!0:ca||(ft&536870912)!==0?e=!1:(ar=e=!0,(a===2||a===9||a===3||a===6)&&(a=Bn.current,a!==null&&a.tag===13&&(a.flags|=16384))),th(t,e)):Ds(t)}function Ds(e){var t=e;do{if((t.flags&32768)!==0){th(t,ar);return}e=t.return;var n=Gv(t.alternate,t,zl);if(n!==null){ut=n;return}if(t=t.sibling,t!==null){ut=t;return}ut=t=e}while(t!==null);Xt===0&&(Xt=5)}function th(e,t){do{var n=qv(e.alternate,e);if(n!==null){n.flags&=32767,ut=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ut=e;return}ut=e=n}while(e!==null);Xt=6,ut=null}function nh(e,t,n,a,c,f,v,C,H){e.cancelPendingCommit=null;do Rs();while(on!==0);if((wt&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(f=t.lanes|t.childLanes,f|=cu,ke(e,n,f,v,C,H),e===Rt&&(ut=Rt=null,ft=0),fa=t,ir=e,Bl=n,vc=f,yc=c,Fm=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ty(Ye,function(){return sh(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=L.T,L.T=null,c=Q.p,Q.p=2,v=wt,wt|=4;try{Wv(e,t,n)}finally{wt=v,Q.p=c,L.T=a}}on=1,lh(),rh(),ah()}}function lh(){if(on===1){on=0;var e=ir,t=fa,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=L.T,L.T=null;var a=Q.p;Q.p=2;var c=wt;wt|=4;try{Bm(t,e);var f=Dc,v=qf(e.containerInfo),C=f.focusedElem,H=f.selectionRange;if(v!==C&&C&&C.ownerDocument&&Gf(C.ownerDocument.documentElement,C)){if(H!==null&&au(C)){var P=H.start,ue=H.end;if(ue===void 0&&(ue=P),"selectionStart"in C)C.selectionStart=P,C.selectionEnd=Math.min(ue,C.value.length);else{var he=C.ownerDocument||document,K=he&&he.defaultView||window;if(K.getSelection){var ae=K.getSelection(),Ee=C.textContent.length,Fe=Math.min(H.start,Ee),Dt=H.end===void 0?Fe:Math.min(H.end,Ee);!ae.extend&&Fe>Dt&&(v=Dt,Dt=Fe,Fe=v);var $=Uf(C,Fe),V=Uf(C,Dt);if($&&V&&(ae.rangeCount!==1||ae.anchorNode!==$.node||ae.anchorOffset!==$.offset||ae.focusNode!==V.node||ae.focusOffset!==V.offset)){var X=he.createRange();X.setStart($.node,$.offset),ae.removeAllRanges(),Fe>Dt?(ae.addRange(X),ae.extend(V.node,V.offset)):(X.setEnd(V.node,V.offset),ae.addRange(X))}}}}for(he=[],ae=C;ae=ae.parentNode;)ae.nodeType===1&&he.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<he.length;C++){var pe=he[C];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}Ys=!!Ac,Dc=Ac=null}finally{wt=c,Q.p=a,L.T=n}}e.current=t,on=2}}function rh(){if(on===2){on=0;var e=ir,t=fa,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=L.T,L.T=null;var a=Q.p;Q.p=2;var c=wt;wt|=4;try{Lm(e,t.alternate,t)}finally{wt=c,Q.p=a,L.T=n}}on=3}}function ah(){if(on===4||on===3){on=0,vt();var e=ir,t=fa,n=Bl,a=Fm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?on=5:(on=0,fa=ir=null,oh(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(sr=null),jt(n),t=t.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(rt,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=L.T,c=Q.p,Q.p=2,L.T=null;try{for(var f=e.onRecoverableError,v=0;v<a.length;v++){var C=a[v];f(C.value,{componentStack:C.stack})}}finally{L.T=t,Q.p=c}}(Bl&3)!==0&&Rs(),gl(e),c=e.pendingLanes,(n&261930)!==0&&(c&42)!==0?e===bc?so++:(so=0,bc=e):so=0,io(0)}}function oh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ga(t)))}function Rs(){return lh(),rh(),ah(),sh()}function sh(){if(on!==5)return!1;var e=ir,t=vc;vc=0;var n=jt(Bl),a=L.T,c=Q.p;try{Q.p=32>n?32:n,L.T=null,n=yc,yc=null;var f=ir,v=Bl;if(on=0,fa=ir=null,Bl=0,(wt&6)!==0)throw Error(o(331));var C=wt;if(wt|=4,Gm(f.current),Hm(f,f.current,v,n),wt=C,io(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(rt,f)}catch{}return!0}finally{Q.p=c,L.T=a,oh(e,t)}}function ih(e,t,n){t=Xn(n,t),t=Ku(e.stateNode,t,2),e=tr(e,t,2),e!==null&&(fe(e,2),gl(e))}function Tt(e,t,n){if(e.tag===3)ih(e,e,n);else for(;t!==null;){if(t.tag===3){ih(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(sr===null||!sr.has(a))){e=Xn(n,e),n=um(2),a=tr(t,n,2),a!==null&&(cm(n,a,t,e),fe(a,2),gl(a));break}}t=t.return}}function Nc(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Yv;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(n)||(hc=!0,c.add(n),e=Kv.bind(null,e,t,n),t.then(e,e))}function Kv(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Rt===e&&(ft&n)===n&&(Xt===4||Xt===3&&(ft&62914560)===ft&&300>ht()-Es?(wt&2)===0&&pa(e,0):gc|=n,da===ft&&(da=0)),gl(e)}function uh(e,t){t===0&&(t=F()),e=Nr(e,t),e!==null&&(fe(e,t),gl(e))}function Jv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),uh(e,n)}function ey(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(o(314))}a!==null&&a.delete(t),uh(e,n)}function ty(e,t){return Oe(e,t)}var zs=null,ha=null,jc=!1,Bs=!1,Cc=!1,cr=0;function gl(e){e!==ha&&e.next===null&&(ha===null?zs=ha=e:ha=ha.next=e),Bs=!0,jc||(jc=!0,ly())}function io(e,t){if(!Cc&&Bs){Cc=!0;do for(var n=!1,a=zs;a!==null;){if(e!==0){var c=a.pendingLanes;if(c===0)var f=0;else{var v=a.suspendedLanes,C=a.pingedLanes;f=(1<<31-$t(42|e)+1)-1,f&=c&~(v&~C),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(n=!0,ph(a,f))}else f=ft,f=Re(a,a===Rt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(f&3)===0||Be(a,f)||(n=!0,ph(a,f));a=a.next}while(n);Cc=!1}}function ny(){ch()}function ch(){Bs=jc=!1;var e=0;cr!==0&&py()&&(e=cr);for(var t=ht(),n=null,a=zs;a!==null;){var c=a.next,f=dh(a,t);f===0?(a.next=null,n===null?zs=c:n.next=c,c===null&&(ha=n)):(n=a,(e!==0||(f&3)!==0)&&(Bs=!0)),a=c}on!==0&&on!==5||io(e),cr!==0&&(cr=0)}function dh(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-$t(f),C=1<<v,H=c[v];H===-1?((C&n)===0||(C&a)!==0)&&(c[v]=Pe(C,t)):H<=t&&(e.expiredLanes|=C),f&=~C}if(t=Rt,n=ft,n=Re(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Et===2||Et===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Le(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Be(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&Le(a),jt(n)){case 2:case 8:n=Ke;break;case 32:n=Ye;break;case 268435456:n=Ze;break;default:n=Ye}return a=fh.bind(null,e),n=Oe(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&Le(a),e.callbackPriority=2,e.callbackNode=null,2}function fh(e,t){if(on!==0&&on!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Rs()&&e.callbackNode!==n)return null;var a=ft;return a=Re(e,e===Rt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Ym(e,a,t),dh(e,ht()),e.callbackNode!=null&&e.callbackNode===n?fh.bind(null,e):null)}function ph(e,t){if(Rs())return null;Ym(e,t,!0)}function ly(){hy(function(){(wt&6)!==0?Oe(Ae,ny):ch()})}function kc(){if(cr===0){var e=ea;e===0&&(e=Cn,Cn<<=1,(Cn&261888)===0&&(Cn=256)),cr=e}return cr}function mh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Fo(""+e)}function hh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function ry(e,t,n,a,c){if(t==="submit"&&n&&n.stateNode===c){var f=mh((c[Ut]||null).action),v=a.submitter;v&&(t=(t=v[Ut]||null)?mh(t.formAction):v.getAttribute("formAction"),t!==null&&(f=t,v=null));var C=new Xo("action","action",null,a,c);e.push({event:C,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(cr!==0){var H=v?hh(c,v):new FormData(c);$u(n,{pending:!0,data:H,method:c.method,action:f},null,H)}}else typeof f=="function"&&(C.preventDefault(),H=v?hh(c,v):new FormData(c),$u(n,{pending:!0,data:H,method:c.method,action:f},f,H))},currentTarget:c}]})}}for(var Mc=0;Mc<uu.length;Mc++){var Oc=uu[Mc],ay=Oc.toLowerCase(),oy=Oc[0].toUpperCase()+Oc.slice(1);al(ay,"on"+oy)}al($f,"onAnimationEnd"),al(Yf,"onAnimationIteration"),al(Qf,"onAnimationStart"),al("dblclick","onDoubleClick"),al("focusin","onFocus"),al("focusout","onBlur"),al(Sv,"onTransitionRun"),al(Nv,"onTransitionStart"),al(jv,"onTransitionCancel"),al(Xf,"onTransitionEnd"),Yl("onMouseEnter",["mouseout","mouseover"]),Yl("onMouseLeave",["mouseout","mouseover"]),Yl("onPointerEnter",["pointerout","pointerover"]),Yl("onPointerLeave",["pointerout","pointerover"]),wl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wl("onBeforeInput",["compositionend","keypress","textInput","paste"]),wl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uo));function gh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var v=a.length-1;0<=v;v--){var C=a[v],H=C.instance,P=C.currentTarget;if(C=C.listener,H!==f&&c.isPropagationStopped())break e;f=C,c.currentTarget=P;try{f(c)}catch(ue){Ko(ue)}c.currentTarget=null,f=H}else for(v=0;v<a.length;v++){if(C=a[v],H=C.instance,P=C.currentTarget,C=C.listener,H!==f&&c.isPropagationStopped())break e;f=C,c.currentTarget=P;try{f(c)}catch(ue){Ko(ue)}c.currentTarget=null,f=H}}}}function ct(e,t){var n=t[wn];n===void 0&&(n=t[wn]=new Set);var a=e+"__bubble";n.has(a)||(xh(t,e,2,!1),n.add(a))}function Ec(e,t,n){var a=0;t&&(a|=4),xh(n,e,a,t)}var Is="_reactListening"+Math.random().toString(36).slice(2);function Tc(e){if(!e[Is]){e[Is]=!0,bl.forEach(function(n){n!=="selectionchange"&&(sy.has(n)||Ec(n,!1,e),Ec(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Is]||(t[Is]=!0,Ec("selectionchange",!1,t))}}function xh(e,t,n,a){switch($h(t)){case 2:var c=Ry;break;case 8:c=zy;break;default:c=Fc}n=c.bind(null,t,n,e),c=void 0,!Pi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function _c(e,t,n,a,c){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var v=a.tag;if(v===3||v===4){var C=a.stateNode.containerInfo;if(C===c)break;if(v===4)for(v=a.return;v!==null;){var H=v.tag;if((H===3||H===4)&&v.stateNode.containerInfo===c)return;v=v.return}for(;C!==null;){if(v=dn(C),v===null)return;if(H=v.tag,H===5||H===6||H===26||H===27){a=f=v;continue e}C=C.parentNode}}a=a.return}Sf(function(){var P=f,ue=Qi(n),he=[];e:{var K=Pf.get(e);if(K!==void 0){var ae=Xo,Ee=e;switch(e){case"keypress":if(Yo(n)===0)break e;case"keydown":case"keyup":ae=ev;break;case"focusin":Ee="focus",ae=eu;break;case"focusout":Ee="blur",ae=eu;break;case"beforeblur":case"afterblur":ae=eu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Gx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=lv;break;case $f:case Yf:case Qf:ae=Fx;break;case Xf:ae=av;break;case"scroll":case"scrollend":ae=Vx;break;case"wheel":ae=sv;break;case"copy":case"cut":case"paste":ae=Yx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Mf;break;case"toggle":case"beforetoggle":ae=uv}var Fe=(t&4)!==0,Dt=!Fe&&(e==="scroll"||e==="scrollend"),$=Fe?K!==null?K+"Capture":null:K;Fe=[];for(var V=P,X;V!==null;){var pe=V;if(X=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||X===null||$===null||(pe=_a(V,$),pe!=null&&Fe.push(co(V,pe,X))),Dt)break;V=V.return}0<Fe.length&&(K=new ae(K,Ee,null,n,ue),he.push({event:K,listeners:Fe}))}}if((t&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",ae=e==="mouseout"||e==="pointerout",K&&n!==Yi&&(Ee=n.relatedTarget||n.fromElement)&&(dn(Ee)||Ee[Yt]))break e;if((ae||K)&&(K=ue.window===ue?ue:(K=ue.ownerDocument)?K.defaultView||K.parentWindow:window,ae?(Ee=n.relatedTarget||n.toElement,ae=P,Ee=Ee?dn(Ee):null,Ee!==null&&(Dt=d(Ee),Fe=Ee.tag,Ee!==Dt||Fe!==5&&Fe!==27&&Fe!==6)&&(Ee=null)):(ae=null,Ee=P),ae!==Ee)){if(Fe=Cf,pe="onMouseLeave",$="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(Fe=Mf,pe="onPointerLeave",$="onPointerEnter",V="pointer"),Dt=ae==null?K:yr(ae),X=Ee==null?K:yr(Ee),K=new Fe(pe,V+"leave",ae,n,ue),K.target=Dt,K.relatedTarget=X,pe=null,dn(ue)===P&&(Fe=new Fe($,V+"enter",Ee,n,ue),Fe.target=X,Fe.relatedTarget=Dt,pe=Fe),Dt=pe,ae&&Ee)t:{for(Fe=iy,$=ae,V=Ee,X=0,pe=$;pe;pe=Fe(pe))X++;pe=0;for(var He=V;He;He=Fe(He))pe++;for(;0<X-pe;)$=Fe($),X--;for(;0<pe-X;)V=Fe(V),pe--;for(;X--;){if($===V||V!==null&&$===V.alternate){Fe=$;break t}$=Fe($),V=Fe(V)}Fe=null}else Fe=null;ae!==null&&vh(he,K,ae,Fe,!1),Ee!==null&&Dt!==null&&vh(he,Dt,Ee,Fe,!0)}}e:{if(K=P?yr(P):window,ae=K.nodeName&&K.nodeName.toLowerCase(),ae==="select"||ae==="input"&&K.type==="file")var yt=Rf;else if(Af(K))if(zf)yt=yv;else{yt=xv;var De=gv}else ae=K.nodeName,!ae||ae.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?P&&$i(P.elementType)&&(yt=Rf):yt=vv;if(yt&&(yt=yt(e,P))){Df(he,yt,n,ue);break e}De&&De(e,K,P),e==="focusout"&&P&&K.type==="number"&&P.memoizedProps.value!=null&&Fi(K,"number",K.value)}switch(De=P?yr(P):window,e){case"focusin":(Af(De)||De.contentEditable==="true")&&($r=De,ou=P,Ha=null);break;case"focusout":Ha=ou=$r=null;break;case"mousedown":su=!0;break;case"contextmenu":case"mouseup":case"dragend":su=!1,Wf(he,n,ue);break;case"selectionchange":if(wv)break;case"keydown":case"keyup":Wf(he,n,ue)}var ot;if(nu)e:{switch(e){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Fr?_f(e,n)&&(pt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(pt="onCompositionStart");pt&&(Of&&n.locale!=="ko"&&(Fr||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Fr&&(ot=Nf()):(Ql=ue,Zi="value"in Ql?Ql.value:Ql.textContent,Fr=!0)),De=Hs(P,pt),0<De.length&&(pt=new kf(pt,e,null,n,ue),he.push({event:pt,listeners:De}),ot?pt.data=ot:(ot=Lf(n),ot!==null&&(pt.data=ot)))),(ot=dv?fv(e,n):pv(e,n))&&(pt=Hs(P,"onBeforeInput"),0<pt.length&&(De=new kf("onBeforeInput","beforeinput",null,n,ue),he.push({event:De,listeners:pt}),De.data=ot)),ry(he,e,P,n,ue)}gh(he,t)})}function co(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hs(e,t){for(var n=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=_a(e,n),c!=null&&a.unshift(co(e,c,f)),c=_a(e,t),c!=null&&a.push(co(e,c,f))),e.tag===3)return a;e=e.return}return[]}function iy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function vh(e,t,n,a,c){for(var f=t._reactName,v=[];n!==null&&n!==a;){var C=n,H=C.alternate,P=C.stateNode;if(C=C.tag,H!==null&&H===a)break;C!==5&&C!==26&&C!==27||P===null||(H=P,c?(P=_a(n,f),P!=null&&v.unshift(co(n,P,H))):c||(P=_a(n,f),P!=null&&v.push(co(n,P,H)))),n=n.return}v.length!==0&&e.push({event:t,listeners:v})}var uy=/\r\n?/g,cy=/\u0000|\uFFFD/g;function yh(e){return(typeof e=="string"?e:""+e).replace(uy,`
`).replace(cy,"")}function bh(e,t){return t=yh(t),yh(e)===t}function At(e,t,n,a,c,f){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Gr(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Gr(e,""+a);break;case"className":Ft(e,"class",a);break;case"tabIndex":Ft(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Ft(e,n,a);break;case"style":bf(e,a,f);break;case"data":if(t!=="object"){Ft(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Fo(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(n==="formAction"?(t!=="input"&&At(e,t,"name",c.name,c,null),At(e,t,"formEncType",c.formEncType,c,null),At(e,t,"formMethod",c.formMethod,c,null),At(e,t,"formTarget",c.formTarget,c,null)):(At(e,t,"encType",c.encType,c,null),At(e,t,"method",c.method,c,null),At(e,t,"target",c.target,c,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Fo(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Sl);break;case"onScroll":a!=null&&ct("scroll",e);break;case"onScrollEnd":a!=null&&ct("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=Fo(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":ct("beforetoggle",e),ct("toggle",e),kt(e,"popover",a);break;case"xlinkActuate":at(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":at(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":at(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":at(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":at(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":at(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":at(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":at(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":at(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":kt(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Ix.get(n)||n,kt(e,n,a))}}function Lc(e,t,n,a,c,f){switch(n){case"style":bf(e,a,f);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(n=a.__html,n!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"children":typeof a=="string"?Gr(e,a):(typeof a=="number"||typeof a=="bigint")&&Gr(e,""+a);break;case"onScroll":a!=null&&ct("scroll",e);break;case"onScrollEnd":a!=null&&ct("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Sl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Go.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(c=n.endsWith("Capture"),t=n.slice(2,c?n.length-7:void 0),f=e[Ut]||null,f=f!=null?f[n]:null,typeof f=="function"&&e.removeEventListener(t,f,c),typeof a=="function")){typeof f!="function"&&f!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,c);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):kt(e,n,a)}}}function hn(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",e),ct("load",e);var a=!1,c=!1,f;for(f in n)if(n.hasOwnProperty(f)){var v=n[f];if(v!=null)switch(f){case"src":a=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:At(e,t,f,v,n,null)}}c&&At(e,t,"srcSet",n.srcSet,n,null),a&&At(e,t,"src",n.src,n,null);return;case"input":ct("invalid",e);var C=f=v=c=null,H=null,P=null;for(a in n)if(n.hasOwnProperty(a)){var ue=n[a];if(ue!=null)switch(a){case"name":c=ue;break;case"type":v=ue;break;case"checked":H=ue;break;case"defaultChecked":P=ue;break;case"value":f=ue;break;case"defaultValue":C=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(o(137,t));break;default:At(e,t,a,ue,n,null)}}gf(e,f,C,H,P,v,c,!1);return;case"select":ct("invalid",e),a=v=f=null;for(c in n)if(n.hasOwnProperty(c)&&(C=n[c],C!=null))switch(c){case"value":f=C;break;case"defaultValue":v=C;break;case"multiple":a=C;default:At(e,t,c,C,n,null)}t=f,n=v,e.multiple=!!a,t!=null?Ur(e,!!a,t,!1):n!=null&&Ur(e,!!a,n,!0);return;case"textarea":ct("invalid",e),f=c=a=null;for(v in n)if(n.hasOwnProperty(v)&&(C=n[v],C!=null))switch(v){case"value":a=C;break;case"defaultValue":c=C;break;case"children":f=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:At(e,t,v,C,n,null)}vf(e,a,c,f);return;case"option":for(H in n)n.hasOwnProperty(H)&&(a=n[H],a!=null)&&(H==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":At(e,t,H,a,n,null));return;case"dialog":ct("beforetoggle",e),ct("toggle",e),ct("cancel",e),ct("close",e);break;case"iframe":case"object":ct("load",e);break;case"video":case"audio":for(a=0;a<uo.length;a++)ct(uo[a],e);break;case"image":ct("error",e),ct("load",e);break;case"details":ct("toggle",e);break;case"embed":case"source":case"link":ct("error",e),ct("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in n)if(n.hasOwnProperty(P)&&(a=n[P],a!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:At(e,t,P,a,n,null)}return;default:if($i(t)){for(ue in n)n.hasOwnProperty(ue)&&(a=n[ue],a!==void 0&&Lc(e,t,ue,a,n,void 0));return}}for(C in n)n.hasOwnProperty(C)&&(a=n[C],a!=null&&At(e,t,C,a,n,null))}function dy(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,v=null,C=null,H=null,P=null,ue=null;for(ae in n){var he=n[ae];if(n.hasOwnProperty(ae)&&he!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":H=he;default:a.hasOwnProperty(ae)||At(e,t,ae,null,a,he)}}for(var K in a){var ae=a[K];if(he=n[K],a.hasOwnProperty(K)&&(ae!=null||he!=null))switch(K){case"type":f=ae;break;case"name":c=ae;break;case"checked":P=ae;break;case"defaultChecked":ue=ae;break;case"value":v=ae;break;case"defaultValue":C=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(o(137,t));break;default:ae!==he&&At(e,t,K,ae,a,he)}}Wi(e,v,C,H,P,ue,f,c);return;case"select":ae=v=C=K=null;for(f in n)if(H=n[f],n.hasOwnProperty(f)&&H!=null)switch(f){case"value":break;case"multiple":ae=H;default:a.hasOwnProperty(f)||At(e,t,f,null,a,H)}for(c in a)if(f=a[c],H=n[c],a.hasOwnProperty(c)&&(f!=null||H!=null))switch(c){case"value":K=f;break;case"defaultValue":C=f;break;case"multiple":v=f;default:f!==H&&At(e,t,c,f,a,H)}t=C,n=v,a=ae,K!=null?Ur(e,!!n,K,!1):!!a!=!!n&&(t!=null?Ur(e,!!n,t,!0):Ur(e,!!n,n?[]:"",!1));return;case"textarea":ae=K=null;for(C in n)if(c=n[C],n.hasOwnProperty(C)&&c!=null&&!a.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:At(e,t,C,null,a,c)}for(v in a)if(c=a[v],f=n[v],a.hasOwnProperty(v)&&(c!=null||f!=null))switch(v){case"value":K=c;break;case"defaultValue":ae=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==f&&At(e,t,v,c,a,f)}xf(e,K,ae);return;case"option":for(var Ee in n)K=n[Ee],n.hasOwnProperty(Ee)&&K!=null&&!a.hasOwnProperty(Ee)&&(Ee==="selected"?e.selected=!1:At(e,t,Ee,null,a,K));for(H in a)K=a[H],ae=n[H],a.hasOwnProperty(H)&&K!==ae&&(K!=null||ae!=null)&&(H==="selected"?e.selected=K&&typeof K!="function"&&typeof K!="symbol":At(e,t,H,K,a,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in n)K=n[Fe],n.hasOwnProperty(Fe)&&K!=null&&!a.hasOwnProperty(Fe)&&At(e,t,Fe,null,a,K);for(P in a)if(K=a[P],ae=n[P],a.hasOwnProperty(P)&&K!==ae&&(K!=null||ae!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,t));break;default:At(e,t,P,K,a,ae)}return;default:if($i(t)){for(var Dt in n)K=n[Dt],n.hasOwnProperty(Dt)&&K!==void 0&&!a.hasOwnProperty(Dt)&&Lc(e,t,Dt,void 0,a,K);for(ue in a)K=a[ue],ae=n[ue],!a.hasOwnProperty(ue)||K===ae||K===void 0&&ae===void 0||Lc(e,t,ue,K,a,ae);return}}for(var $ in n)K=n[$],n.hasOwnProperty($)&&K!=null&&!a.hasOwnProperty($)&&At(e,t,$,null,a,K);for(he in a)K=a[he],ae=n[he],!a.hasOwnProperty(he)||K===ae||K==null&&ae==null||At(e,t,he,K,a,ae)}function wh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var c=n[a],f=c.transferSize,v=c.initiatorType,C=c.duration;if(f&&C&&wh(v)){for(v=0,C=c.responseEnd,a+=1;a<n.length;a++){var H=n[a],P=H.startTime;if(P>C)break;var ue=H.transferSize,he=H.initiatorType;ue&&wh(he)&&(H=H.responseEnd,v+=ue*(H<C?1:(C-P)/(H-P)))}if(--a,t+=8*(f+v)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ac=null,Dc=null;function Vs(e){return e.nodeType===9?e:e.ownerDocument}function Sh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Rc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zc=null;function py(){var e=window.event;return e&&e.type==="popstate"?e===zc?!1:(zc=e,!0):(zc=null,!1)}var jh=typeof setTimeout=="function"?setTimeout:void 0,my=typeof clearTimeout=="function"?clearTimeout:void 0,Ch=typeof Promise=="function"?Promise:void 0,hy=typeof queueMicrotask=="function"?queueMicrotask:typeof Ch<"u"?function(e){return Ch.resolve(null).then(e).catch(gy)}:jh;function gy(e){setTimeout(function(){throw e})}function dr(e){return e==="head"}function kh(e,t){var n=t,a=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(c),ya(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")fo(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,fo(n);for(var f=n.firstChild;f;){var v=f.nextSibling,C=f.nodeName;f[Vt]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&f.rel.toLowerCase()==="stylesheet"||n.removeChild(f),f=v}}else n==="body"&&fo(e.ownerDocument.body);n=c}while(n);ya(t)}function Mh(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function Bc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Bc(n),un(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function xy(e,t,n,a){for(;e.nodeType===1;){var c=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Vt])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=el(e.nextSibling),e===null)break}return null}function vy(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=el(e.nextSibling),e===null))return null;return e}function Oh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=el(e.nextSibling),e===null))return null;return e}function Ic(e){return e.data==="$?"||e.data==="$~"}function Hc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function yy(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function el(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Vc=null;function Eh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return el(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Th(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function _h(e,t,n){switch(t=Vs(n),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function fo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);un(e)}var tl=new Map,Lh=new Set;function Us(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Il=Q.d;Q.d={f:by,r:wy,D:Sy,C:Ny,L:jy,m:Cy,X:My,S:ky,M:Oy};function by(){var e=Il.f(),t=Ls();return e||t}function wy(e){var t=$n(e);t!==null&&t.tag===5&&t.type==="form"?Xp(t):Il.r(e)}var ga=typeof document>"u"?null:document;function Ah(e,t,n){var a=ga;if(a&&typeof t=="string"&&t){var c=Yn(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof n=="string"&&(c+='[crossorigin="'+n+'"]'),Lh.has(c)||(Lh.add(c),e={rel:e,crossOrigin:n,href:t},a.querySelector(c)===null&&(t=a.createElement("link"),hn(t,"link",e),en(t),a.head.appendChild(t)))}}function Sy(e){Il.D(e),Ah("dns-prefetch",e,null)}function Ny(e,t){Il.C(e,t),Ah("preconnect",e,t)}function jy(e,t,n){Il.L(e,t,n);var a=ga;if(a&&e&&t){var c='link[rel="preload"][as="'+Yn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(c+='[imagesrcset="'+Yn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(c+='[imagesizes="'+Yn(n.imageSizes)+'"]')):c+='[href="'+Yn(e)+'"]';var f=c;switch(t){case"style":f=xa(e);break;case"script":f=va(e)}tl.has(f)||(e=y({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),tl.set(f,e),a.querySelector(c)!==null||t==="style"&&a.querySelector(po(f))||t==="script"&&a.querySelector(mo(f))||(t=a.createElement("link"),hn(t,"link",e),en(t),a.head.appendChild(t)))}}function Cy(e,t){Il.m(e,t);var n=ga;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Yn(a)+'"][href="'+Yn(e)+'"]',f=c;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=va(e)}if(!tl.has(f)&&(e=y({rel:"modulepreload",href:e},t),tl.set(f,e),n.querySelector(c)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(mo(f)))return}a=n.createElement("link"),hn(a,"link",e),en(a),n.head.appendChild(a)}}}function ky(e,t,n){Il.S(e,t,n);var a=ga;if(a&&e){var c=$l(a).hoistableStyles,f=xa(e);t=t||"default";var v=c.get(f);if(!v){var C={loading:0,preload:null};if(v=a.querySelector(po(f)))C.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},n),(n=tl.get(f))&&Uc(e,n);var H=v=a.createElement("link");en(H),hn(H,"link",e),H._p=new Promise(function(P,ue){H.onload=P,H.onerror=ue}),H.addEventListener("load",function(){C.loading|=1}),H.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Gs(v,t,a)}v={type:"stylesheet",instance:v,count:1,state:C},c.set(f,v)}}}function My(e,t){Il.X(e,t);var n=ga;if(n&&e){var a=$l(n).hoistableScripts,c=va(e),f=a.get(c);f||(f=n.querySelector(mo(c)),f||(e=y({src:e,async:!0},t),(t=tl.get(c))&&Gc(e,t),f=n.createElement("script"),en(f),hn(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(c,f))}}function Oy(e,t){Il.M(e,t);var n=ga;if(n&&e){var a=$l(n).hoistableScripts,c=va(e),f=a.get(c);f||(f=n.querySelector(mo(c)),f||(e=y({src:e,async:!0,type:"module"},t),(t=tl.get(c))&&Gc(e,t),f=n.createElement("script"),en(f),hn(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(c,f))}}function Dh(e,t,n,a){var c=(c=ce.current)?Us(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=xa(n.href),n=$l(c).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=xa(n.href);var f=$l(c).hoistableStyles,v=f.get(e);if(v||(c=c.ownerDocument||c,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=c.querySelector(po(e)))&&!f._p&&(v.instance=f,v.state.loading=5),tl.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},tl.set(e,n),f||Ey(c,e,n,v.state))),t&&a===null)throw Error(o(528,""));return v}if(t&&a!==null)throw Error(o(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=va(n),n=$l(c).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function xa(e){return'href="'+Yn(e)+'"'}function po(e){return'link[rel="stylesheet"]['+e+"]"}function Rh(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function Ey(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),hn(t,"link",n),en(t),e.head.appendChild(t))}function va(e){return'[src="'+Yn(e)+'"]'}function mo(e){return"script[async]"+e}function zh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Yn(n.href)+'"]');if(a)return t.instance=a,en(a),a;var c=y({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),en(a),hn(a,"style",c),Gs(a,n.precedence,e),t.instance=a;case"stylesheet":c=xa(n.href);var f=e.querySelector(po(c));if(f)return t.state.loading|=4,t.instance=f,en(f),f;a=Rh(n),(c=tl.get(c))&&Uc(a,c),f=(e.ownerDocument||e).createElement("link"),en(f);var v=f;return v._p=new Promise(function(C,H){v.onload=C,v.onerror=H}),hn(f,"link",a),t.state.loading|=4,Gs(f,n.precedence,e),t.instance=f;case"script":return f=va(n.src),(c=e.querySelector(mo(f)))?(t.instance=c,en(c),c):(a=n,(c=tl.get(f))&&(a=y({},n),Gc(a,c)),e=e.ownerDocument||e,c=e.createElement("script"),en(c),hn(c,"link",a),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Gs(a,n.precedence,e));return t.instance}function Gs(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=a.length?a[a.length-1]:null,f=c,v=0;v<a.length;v++){var C=a[v];if(C.dataset.precedence===t)f=C;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Uc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Gc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var qs=null;function Bh(e,t,n){if(qs===null){var a=new Map,c=qs=new Map;c.set(n,a)}else c=qs,a=c.get(n),a||(a=new Map,c.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),c=0;c<n.length;c++){var f=n[c];if(!(f[Vt]||f[Ct]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(t)||"";v=e+v;var C=a.get(v);C?C.push(f):a.set(v,[f])}}return a}function Ih(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Ty(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Hh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function _y(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=xa(a.href),f=t.querySelector(po(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ws.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=f,en(f);return}f=t.ownerDocument||t,a=Rh(a),(c=tl.get(c))&&Uc(a,c),f=f.createElement("link"),en(f);var v=f;v._p=new Promise(function(C,H){v.onload=C,v.onerror=H}),hn(f,"link",a),n.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Ws.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var qc=0;function Ly(e,t){return e.stylesheets&&e.count===0&&$s(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&$s(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&qc===0&&(qc=62500*fy());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&$s(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>qc?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(c)}}:null}function Ws(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$s(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fs=null;function $s(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fs=new Map,t.forEach(Ay,e),Fs=null,Ws.call(e))}function Ay(e,t){if(!(t.state.loading&4)){var n=Fs.get(e);if(n)var a=n.get(null);else{n=new Map,Fs.set(e,n);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var v=c[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(n.set(v.dataset.precedence,v),a=v)}a&&n.set(null,a)}c=t.instance,v=c.getAttribute("data-precedence"),f=n.get(v)||a,f===a&&n.set(null,c),n.set(v,c),this.count++,a=Ws.bind(this),c.addEventListener("load",a),c.addEventListener("error",a),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var ho={$$typeof:R,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function Dy(e,t,n,a,c,f,v,C,H){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=be(0),this.hiddenUpdates=be(null),this.identifierPrefix=a,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function Vh(e,t,n,a,c,f,v,C,H,P,ue,he){return e=new Dy(e,t,n,v,H,P,ue,he,C),t=1,f===!0&&(t|=24),f=zn(3,null,null,t),e.current=f,f.stateNode=e,t=Su(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:a,isDehydrated:n,cache:t},ku(f),e}function Uh(e){return e?(e=Xr,e):Xr}function Gh(e,t,n,a,c,f){c=Uh(c),a.context===null?a.context=c:a.pendingContext=c,a=er(t),a.payload={element:n},f=f===void 0?null:f,f!==null&&(a.callback=f),n=tr(e,a,t),n!==null&&(_n(n,e,t),$a(n,e,t))}function qh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Wc(e,t){qh(e,t),(e=e.alternate)&&qh(e,t)}function Wh(e){if(e.tag===13||e.tag===31){var t=Nr(e,67108864);t!==null&&_n(t,e,67108864),Wc(e,67108864)}}function Fh(e){if(e.tag===13||e.tag===31){var t=Un();t=xt(t);var n=Nr(e,t);n!==null&&_n(n,e,t),Wc(e,t)}}var Ys=!0;function Ry(e,t,n,a){var c=L.T;L.T=null;var f=Q.p;try{Q.p=2,Fc(e,t,n,a)}finally{Q.p=f,L.T=c}}function zy(e,t,n,a){var c=L.T;L.T=null;var f=Q.p;try{Q.p=8,Fc(e,t,n,a)}finally{Q.p=f,L.T=c}}function Fc(e,t,n,a){if(Ys){var c=$c(a);if(c===null)_c(e,t,a,Qs,n),Yh(e,a);else if(Iy(c,e,t,n,a))a.stopPropagation();else if(Yh(e,a),t&4&&-1<By.indexOf(e)){for(;c!==null;){var f=$n(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Me(f.pendingLanes);if(v!==0){var C=f;for(C.pendingLanes|=2,C.entangledLanes|=2;v;){var H=1<<31-$t(v);C.entanglements[1]|=H,v&=~H}gl(f),(wt&6)===0&&(Ts=ht()+500,io(0))}}break;case 31:case 13:C=Nr(f,2),C!==null&&_n(C,f,2),Ls(),Wc(f,2)}if(f=$c(a),f===null&&_c(e,t,a,Qs,n),f===c)break;c=f}c!==null&&a.stopPropagation()}else _c(e,t,a,null,n)}}function $c(e){return e=Qi(e),Yc(e)}var Qs=null;function Yc(e){if(Qs=null,e=dn(e),e!==null){var t=d(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=p(t),e!==null)return e;e=null}else if(n===31){if(e=h(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Qs=e,null}function $h(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(we()){case Ae:return 2;case Ke:return 8;case Ye:case et:return 32;case Ze:return 268435456;default:return 32}default:return 32}}var Qc=!1,fr=null,pr=null,mr=null,go=new Map,xo=new Map,hr=[],By="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yh(e,t){switch(e){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":go.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xo.delete(t.pointerId)}}function vo(e,t,n,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},t!==null&&(t=$n(t),t!==null&&Wh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Iy(e,t,n,a,c){switch(t){case"focusin":return fr=vo(fr,e,t,n,a,c),!0;case"dragenter":return pr=vo(pr,e,t,n,a,c),!0;case"mouseover":return mr=vo(mr,e,t,n,a,c),!0;case"pointerover":var f=c.pointerId;return go.set(f,vo(go.get(f)||null,e,t,n,a,c)),!0;case"gotpointercapture":return f=c.pointerId,xo.set(f,vo(xo.get(f)||null,e,t,n,a,c)),!0}return!1}function Qh(e){var t=dn(e.target);if(t!==null){var n=d(t);if(n!==null){if(t=n.tag,t===13){if(t=p(n),t!==null){e.blockedOn=t,It(e.priority,function(){Fh(n)});return}}else if(t===31){if(t=h(n),t!==null){e.blockedOn=t,It(e.priority,function(){Fh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=$c(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Yi=a,n.target.dispatchEvent(a),Yi=null}else return t=$n(n),t!==null&&Wh(t),e.blockedOn=n,!1;t.shift()}return!0}function Xh(e,t,n){Xs(e)&&n.delete(t)}function Hy(){Qc=!1,fr!==null&&Xs(fr)&&(fr=null),pr!==null&&Xs(pr)&&(pr=null),mr!==null&&Xs(mr)&&(mr=null),go.forEach(Xh),xo.forEach(Xh)}function Ps(e,t){e.blockedOn===t&&(e.blockedOn=null,Qc||(Qc=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Hy)))}var Zs=null;function Ph(e){Zs!==e&&(Zs=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Zs===e&&(Zs=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],c=e[t+2];if(typeof a!="function"){if(Yc(a||n)===null)continue;break}var f=$n(n);f!==null&&(e.splice(t,3),t-=3,$u(f,{pending:!0,data:c,method:n.method,action:a},a,c))}}))}function ya(e){function t(H){return Ps(H,e)}fr!==null&&Ps(fr,e),pr!==null&&Ps(pr,e),mr!==null&&Ps(mr,e),go.forEach(t),xo.forEach(t);for(var n=0;n<hr.length;n++){var a=hr[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<hr.length&&(n=hr[0],n.blockedOn===null);)Qh(n),n.blockedOn===null&&hr.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var c=n[a],f=n[a+1],v=c[Ut]||null;if(typeof f=="function")v||Ph(n);else if(v){var C=null;if(f&&f.hasAttribute("formAction")){if(c=f,v=f[Ut]||null)C=v.formAction;else if(Yc(c)!==null)continue}else C=v.action;typeof C=="function"?n[a+1]=C:(n.splice(a,3),a-=3),Ph(n)}}}function Zh(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return c=v})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Xc(e){this._internalRoot=e}Ks.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var n=t.current,a=Un();Gh(n,a,e,t,null,null)},Ks.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gh(e.current,2,null,e,null,null),Ls(),t[Yt]=null}};function Ks(e){this._internalRoot=e}Ks.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<hr.length&&t!==0&&t<hr[n].priority;n++);hr.splice(n,0,e),n===0&&Qh(e)}};var Kh=r.version;if(Kh!=="19.2.3")throw Error(o(527,Kh,"19.2.3"));Q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Vy={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Js=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Js.isDisabled&&Js.supportsFiber)try{rt=Js.inject(Vy),Xe=Js}catch{}}return bo.createRoot=function(e,t){if(!i(e))throw Error(o(299));var n=!1,a="",c=am,f=om,v=sm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=Vh(e,1,!1,null,null,n,a,null,c,f,v,Zh),e[Yt]=t.current,Tc(e),new Xc(t)},bo.hydrateRoot=function(e,t,n){if(!i(e))throw Error(o(299));var a=!1,c="",f=am,v=om,C=sm,H=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(v=n.onCaughtError),n.onRecoverableError!==void 0&&(C=n.onRecoverableError),n.formState!==void 0&&(H=n.formState)),t=Vh(e,1,!0,t,n??null,a,c,H,f,v,C,Zh),t.context=Uh(null),n=t.current,a=Un(),a=xt(a),c=er(a),c.callback=null,tr(n,c,a),n=a,t.current.lanes=n,fe(t,n),gl(t),e[Yt]=t.current,Tc(e),new Ks(t)},bo.version="19.2.3",bo}var ug;function Zy(){if(ug)return Kc.exports;ug=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),Kc.exports=Py(),Kc.exports}var Ky=Zy();const cg=l=>{let r;const s=new Set,o=(g,x)=>{const y=typeof g=="function"?g(r):g;if(!Object.is(y,r)){const N=r;r=x??(typeof y!="object"||y===null)?y:Object.assign({},r,y),s.forEach(k=>k(r,N))}},i=()=>r,h={setState:o,getState:i,getInitialState:()=>m,subscribe:g=>(s.add(g),()=>s.delete(g))},m=r=l(o,i,h);return h},Jy=(l=>l?cg(l):cg),e1=l=>l;function t1(l,r=e1){const s=Sa.useSyncExternalStore(l.subscribe,Sa.useCallback(()=>r(l.getState()),[l,r]),Sa.useCallback(()=>r(l.getInitialState()),[l,r]));return Sa.useDebugValue(s),s}const dg=l=>{const r=Jy(l),s=o=>t1(r,o);return Object.assign(s,r),s},rl=(l=>l?dg(l):dg);function ql(l,r){let s;try{s=l()}catch{return}return{getItem:i=>{var d;const p=m=>m===null?null:JSON.parse(m,void 0),h=(d=s.getItem(i))!=null?d:null;return h instanceof Promise?h.then(p):p(h)},setItem:(i,d)=>s.setItem(i,JSON.stringify(d,void 0)),removeItem:i=>s.removeItem(i)}}const wd=l=>r=>{try{const s=l(r);return s instanceof Promise?s:{then(o){return wd(o)(s)},catch(o){return this}}}catch(s){return{then(o){return this},catch(o){return wd(o)(s)}}}},n1=(l,r)=>(s,o,i)=>{let d={storage:ql(()=>localStorage),partialize:w=>w,version:0,merge:(w,M)=>({...M,...w}),...r},p=!1;const h=new Set,m=new Set;let g=d.storage;if(!g)return l((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),s(...w)},o,i);const x=()=>{const w=d.partialize({...o()});return g.setItem(d.name,{state:w,version:d.version})},y=i.setState;i.setState=(w,M)=>(y(w,M),x());const N=l((...w)=>(s(...w),x()),o,i);i.getInitialState=()=>N;let k;const S=()=>{var w,M;if(!g)return;p=!1,h.forEach(O=>{var R;return O((R=o())!=null?R:N)});const j=((M=d.onRehydrateStorage)==null?void 0:M.call(d,(w=o())!=null?w:N))||void 0;return wd(g.getItem.bind(g))(d.name).then(O=>{if(O)if(typeof O.version=="number"&&O.version!==d.version){if(d.migrate){const R=d.migrate(O.state,O.version);return R instanceof Promise?R.then(z=>[!0,z]):[!0,R]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,O.state];return[!1,void 0]}).then(O=>{var R;const[z,T]=O;if(k=d.merge(T,(R=o())!=null?R:N),s(k,!0),z)return x()}).then(()=>{j?.(k,void 0),k=o(),p=!0,m.forEach(O=>O(k))}).catch(O=>{j?.(void 0,O)})};return i.persist={setOptions:w=>{d={...d,...w},w.storage&&(g=w.storage)},clearStorage:()=>{g?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>S(),hasHydrated:()=>p,onHydrate:w=>(h.add(w),()=>{h.delete(w)}),onFinishHydration:w=>(m.add(w),()=>{m.delete(w)})},d.skipHydration||S(),k||N},Wl=n1,nl=rl()(l=>({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0},setViewerState:r=>{l(s=>{const o={viewerOpen:r.viewerOpen??s.viewerOpen,viewerImages:r.viewerImages??s.viewerImages,viewerIndex:r.viewerIndex??s.viewerIndex,viewerScale:r.viewerScale??s.viewerScale,viewerTranslate:r.viewerTranslate??s.viewerTranslate};return o.viewerOpen===s.viewerOpen&&o.viewerIndex===s.viewerIndex&&o.viewerScale===s.viewerScale&&o.viewerTranslate.x===s.viewerTranslate.x&&o.viewerTranslate.y===s.viewerTranslate.y&&o.viewerImages===s.viewerImages?s:{...s,...o}})}})),Jt=rl()(Wl(l=>({error:null,nodeErrors:{},errorCycleIndex:0,errorsDismissed:!1,setError:r=>{l({error:r})},setNodeErrors:r=>{l({nodeErrors:r,errorCycleIndex:0,errorsDismissed:!1})},clearNodeErrors:()=>{l({nodeErrors:{},errorCycleIndex:0,errorsDismissed:!1})},clearNodeError:r=>{l(s=>{const o={...s.nodeErrors};return delete o[String(r)],{nodeErrors:o}})},setErrorCycleIndex:r=>{l({errorCycleIndex:r})},setErrorsDismissed:r=>{l({errorsDismissed:r})}}),{name:"workflow-errors-storage",storage:ql(()=>localStorage),partialize:l=>({error:l.error,nodeErrors:l.nodeErrors,errorCycleIndex:l.errorCycleIndex,errorsDismissed:l.errorsDismissed}),onRehydrateStorage:()=>l=>{if(!l)return;const r=Object.values(l.nodeErrors||{}).reduce((s,o)=>s+o.length,0);r>0&&!l.error&&l.setError(`Workflow load error: ${r} input${r===1?"":"s"} reference missing options.`),r>0&&l.setErrorCycleIndex(0)}}));function x0(l){return!!l&&typeof l=="object"&&!Array.isArray(l)}function l1(l){if(!(!String(l.type||"").startsWith("Primitive")&&l.type!=="PrimitiveNode")){if(Array.isArray(l.widgets_values))return l.widgets_values[0];if(x0(l.widgets_values)){const s=l.widgets_values.value;return s!==void 0?s:l.widgets_values[0]}}}function ko(l,r,s){const o=l.widgets_values;if(Array.isArray(o))return s===void 0||s<0||s>=o.length?void 0:o[s];if(x0(o)){if(o[r]!==void 0)return o[r];if(l.type==="VHS_VideoCombine"&&r==="save_image"&&o.save_output!==void 0)return o.save_output}}function qd(l,r){const s=l.widget_idx_map?.[String(r)];return s||(l.extra?.widget_idx_map?.[String(r)]??null)}function Li(l){if(Array.isArray(l))return!0;const r=String(l).toUpperCase();return r==="INT"||r==="FLOAT"||r==="BOOLEAN"||r==="STRING"}function Wd(l,r,s){if(Array.isArray(r)){if(s?.comboIndexToValue&&typeof l=="number"&&Number.isFinite(l)){const o=Math.trunc(l);return r[o]??l}return l}if(r==="INT"&&typeof l=="string"&&l.trim()!==""&&!Number.isNaN(Number(l)))return Math.trunc(Number(l));if(r==="FLOAT"&&typeof l=="string"&&l.trim()!==""&&!Number.isNaN(Number(l)))return Number(l);if(r==="BOOLEAN"&&typeof l=="string"){if(l.toLowerCase()==="true")return!0;if(l.toLowerCase()==="false")return!1}return l}function r1(l,r,s){if(r.length===0)return l;const o=Wd(l,r,{comboIndexToValue:!0}),i=String(o),d=i.split(/[\\/]/).pop()??i,p=r.find(m=>String(m)===i);if(p!==void 0)return p;const h=r.find(m=>String(m)===d);return h!==void 0?h:s!==void 0&&r.some(m=>String(m)===String(s))?s:r[0]}function v0(l,r){const s=l.links.find(p=>p[0]===r);if(!s)return null;const o=s[1],i=s[2],d=l.nodes.find(p=>p.id===o);if(!d)return null;if(d.mode===4||d.type==="Reroute"){const p=d.outputs[i];if(!p)return null;const h=d.inputs.find(m=>{if(m.link===null)return!1;const g=String(m.type).toUpperCase(),x=String(p.type).toUpperCase();return g===x||g==="*"||x==="*"});return h?.link!=null?v0(l,h.link):null}return{nodeId:o,slotIndex:i}}function a1(l,r,s,o,i,d,p){const h={};for(const S of s.inputs)if(S.link!=null){const w=v0(l,S.link);if(w)if(i.has(w.nodeId))h[S.name]=[String(w.nodeId),w.slotIndex];else{const M=l.nodes.find(j=>j.id===w.nodeId);if(M){const j=l1(M);j!==void 0?h[S.name]=j:console.warn(`[workflowInputs] Missing source node for input '${S.name}' on node ${s.id} (${s.type}).`,{sourceNodeId:w.nodeId,sourceNodeType:M.type,sourceAllowed:!1})}}}const m=r[o];if(!m?.input)return h;const g=m.input_order?.required||Object.keys(m.input.required||{}),x=m.input_order?.optional||Object.keys(m.input.optional||{}),y=[...g,...x];let N=0;const k=Array.isArray(s.widgets_values)?s.widgets_values:null;for(const S of y)try{const w=m.input.required?.[S]||m.input.optional?.[S];if(!w)continue;const[M]=w,j=s.inputs.find(U=>U.name===S),O=j?.link!=null,R=!!j?.widget&&!O,z=!!j,T=w[1]?.default,D=Object.prototype.hasOwnProperty.call(w[1]??{},"default");if(Li(M)||R||!z){let U=d?.[S];if(U===void 0&&(U=N),S==="seed"&&p?.[s.id]!==void 0&&!(S in h))h[S]=p[s.id];else if(U!==void 0&&!O&&!(S in h)){const G=ko(s,S,U);G!==void 0&&(Array.isArray(M)?h[S]=r1(G,M,T):h[S]=Wd(G,M))}else!O&&D&&!(S in h)&&(h[S]=T);U!==void 0&&(N=Math.max(N,U+1)),String(M)==="INT"&&(S==="seed"||S==="noise_seed")&&(U!==void 0?N=Math.max(N,U+2):N=Math.max(N,N+1))}}catch(w){console.error(`Error processing input '${S}' for node ${s.id} (${s.type}):`,w)}if(d)for(const[S,w]of Object.entries(d)){if(!(S in h)&&k&&w<k.length){const M=k[w];M!=null&&(h[S]=M)}if(!(S in h)&&!k){const M=ko(s,S,w);M!=null&&(h[S]=M)}}return(o==="Power Lora Loader (rgthree)"||s.type==="Power Lora Loader (rgthree)")&&k&&k.forEach((S,w)=>{if(typeof S=="object"&&S!==null&&"lora"in S&&!(Object.values(d||{}).some(j=>j===w)||d===null&&w<N)){const j=`lora_${w}`;j in h||(h[j]=S)}}),p?.[s.id]!==void 0&&!("seed"in h)&&!("noise_seed"in h)&&(h.seed=p[s.id]),h}const zt="";function o1(){const l="comfyui-mobile-client-id";let r=localStorage.getItem(l);return r||(r="mobile-"+Math.random().toString(36).substring(2,15),localStorage.setItem(l,r)),r}const y0=o1();async function b0(){const l=await fetch(`${zt}/api/object_info`);if(!l.ok)throw new Error("Failed to fetch node types");return l.json()}async function s1(){const l=await fetch(`${zt}/api/queue`);if(!l.ok)throw new Error("Failed to fetch queue");return l.json()}async function i1(l){const r=`${zt}/api/history?max_items=${l}`,s=await fetch(r);if(!s.ok)throw new Error("Failed to fetch history");return s.json()}async function u1(){const l=await fetch(`${zt}/api/v2/userdata?path=workflows`);if(!l.ok){if(l.status===404)return[];throw new Error("Failed to list user workflows")}return(await l.json()).filter(s=>s.type==="file"&&s.name.endsWith(".json"))}function w0(l){return encodeURIComponent(l)}async function S0(l){const r=await fetch(`${zt}/api/userdata/${w0("workflows/"+l)}`);if(!r.ok)throw new Error("Failed to load workflow");return r.json()}async function c1(l,r){if(!(await fetch(`${zt}/api/userdata/${w0("workflows/"+l)}?overwrite=true`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw new Error("Failed to save workflow")}async function d1(){const l=await fetch(`${zt}/api/workflow_templates`);if(!l.ok)throw new Error("Failed to fetch templates");return l.json()}async function N0(l,r){const s=await fetch(`${zt}/api/workflow_templates/${encodeURIComponent(l)}/${encodeURIComponent(r)}`);if(!s.ok)throw new Error("Failed to load template");return s.json()}async function f1(){await fetch(`${zt}/api/interrupt`,{method:"POST"})}async function p1(){await fetch(`${zt}/api/queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clear:!0})})}async function m1(l){await fetch(`${zt}/api/queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:[l]})})}async function j0(l,r){const s=new FormData;s.append("image",l),r?.type&&s.append("type",r.type),r?.subfolder&&s.append("subfolder",r.subfolder),r?.overwrite!==void 0&&s.append("overwrite",r.overwrite?"true":"false");const o=await fetch(`${zt}/upload/image`,{method:"POST",body:s});if(!o.ok)throw new Error("Failed to upload image");return o.json()}async function h1(l){await fetch(`${zt}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:[l]})})}async function fg(l){l.length!==0&&await fetch(`${zt}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:l})})}async function g1(){await fetch(`${zt}/api/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clear:!0})})}function qn(l,r,s){return`${zt}/view?filename=${encodeURIComponent(l)}&subfolder=${encodeURIComponent(r)}&type=${encodeURIComponent(s)}`}function x1(l,r,s,o,i){const p=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws?clientId=${l}`,h=new WebSocket(p);return h.onopen=()=>{s?.()},h.onmessage=m=>{try{const g=JSON.parse(m.data);r(g)}catch(g){console.error("[WS] Failed to parse message:",g)}},h.onclose=()=>{o?.()},h.onerror=m=>{console.error("[WS] Error:",m),i?.(m)},h}async function Sd(l="",r=!1,s="output"){const o=new URLSearchParams;l&&o.set("path",l),r&&o.set("recursive","true"),s&&o.set("source",s);const i=await fetch(`${zt}/mobile/api/files?${o}`);if(!i.ok)throw new Error("Failed to fetch files");return i.json()}async function v1(){const l=await Sd("",!1,"output"),r=await Sd("",!1,"input"),s=l.files.filter(i=>i.type==="dir").map(i=>i.name);return{input:r.files.filter(i=>i.type==="dir").map(i=>i.name),output:s}}async function Nd(l,r=1e3,s=0,o="modified",i=!1,d=null){return(await Sd(d||"",i,l)).files.map(h=>{if(h.type==="dir")return{id:`${l}/${h.path}`,name:h.name,type:"folder",date:h.date,size:h.size};const m=h.folder||(h.path.includes("/")?h.path.substring(0,h.path.lastIndexOf("/")):"");return{id:`${l}/${h.path}`,name:h.name,type:h.type,previewUrl:`${zt}/mobile/api/thumbnail?filename=${encodeURIComponent(h.name)}&subfolder=${encodeURIComponent(m)}&source=${l}`,fullUrl:`${zt}/view?filename=${encodeURIComponent(h.name)}&type=${l}&subfolder=${encodeURIComponent(m)}`,date:h.date,size:h.size}})}async function jd(l,r="output"){const s=await fetch(`${zt}/mobile/api/files`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:l,source:r})});if(!s.ok){const o=await s.json();throw new Error(o.error||"Failed to delete file")}}async function y1(l,r="output"){const s=new URLSearchParams({path:l,source:r}),o=await fetch(`${zt}/mobile/api/file-metadata?${s.toString()}`);if(!o.ok){const d=await o.json().catch(()=>({}));throw new Error(d.error||"Failed to load file metadata")}const i=await o.json();if(!i.workflow)throw new Error("No workflow metadata found");return i.workflow}async function b1(l,r="output"){const s=new URLSearchParams({path:l,source:r}),o=await fetch(`${zt}/mobile/api/image-metadata?${s.toString()}`);if(!o.ok){const i=await o.json().catch(()=>({}));throw new Error(i.error||"Failed to load image metadata")}return o.json()}async function w1(l,r,s="output"){const o=await fetch(`${zt}/mobile/api/files/move`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sources:l,destination:r??"",source:s})});if(!o.ok){const i=await o.json().catch(()=>({}));throw new Error(i.error||"Failed to move files")}}async function S1(l,r="output"){const s=await fetch(`${zt}/mobile/api/files/mkdir`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:l,source:r})});if(!s.ok){const o=await s.json().catch(()=>({}));throw new Error(o.error||"Failed to create folder")}}const lt=rl()(Wl((l,r)=>({running:[],pending:[],isLoading:!1,lastExecutedId:null,queueItemExpanded:{},queueItemUserToggled:{},queueItemHideImages:{},showQueueMetadata:!1,previewVisibility:{},previewVisibilityDefault:!1,fetchQueue:async()=>{const{running:s}=r();l({isLoading:!0});try{const o=await s1(),i=o.queue_running.map(p=>({number:p[0],prompt_id:p[1],prompt:p[2],extra:p[3],outputs_to_execute:p[4]})),d=o.queue_pending.map(p=>({number:p[0],prompt_id:p[1],prompt:p[2],extra:p[3],outputs_to_execute:p[4]}));s.length>0&&i.length===0&&(l({lastExecutedId:s[0].prompt_id}),setTimeout(()=>l({lastExecutedId:null}),100)),l({running:i,pending:d})}catch(o){console.error("Failed to fetch queue:",o)}finally{l({isLoading:!1})}},clearQueue:async()=>{try{await p1(),l({pending:[]})}catch(s){console.error("Failed to clear queue:",s)}},deleteItem:async s=>{try{await m1(s),l(o=>({pending:o.pending.filter(i=>i.prompt_id!==s)}))}catch(o){console.error("Failed to delete queue item:",o)}},interrupt:async()=>{try{await f1()}catch(s){console.error("Failed to interrupt execution:",s)}},updateFromStatus:s=>{const{pending:o}=r();s!==o.length&&r().fetchQueue()},setQueueItemExpanded:(s,o)=>{l(i=>({queueItemExpanded:{...i.queueItemExpanded,[s]:o}}))},setQueueItemUserToggled:(s,o)=>{l(i=>({queueItemUserToggled:{...i.queueItemUserToggled,[s]:o}}))},setQueueItemHideImages:(s,o)=>{l(i=>({queueItemHideImages:{...i.queueItemHideImages,[s]:o}}))},toggleQueueItemHideImages:s=>{l(o=>({queueItemHideImages:{...o.queueItemHideImages,[s]:!o.queueItemHideImages[s]}}))},setShowQueueMetadata:s=>{l({showQueueMetadata:s})},toggleShowQueueMetadata:()=>{l(s=>({showQueueMetadata:!s.showQueueMetadata}))},setPreviewVisibility:(s,o)=>{l(i=>({previewVisibility:{...i.previewVisibility,[s]:o}}))},togglePreviewVisibility:s=>{l(o=>({previewVisibility:{...o.previewVisibility,[s]:!o.previewVisibility[s]}}))},setPreviewVisibilityDefault:s=>{l({previewVisibilityDefault:s})}}),{name:"queue-storage",storage:ql(()=>localStorage),partialize:l=>({queueItemExpanded:l.queueItemExpanded,queueItemUserToggled:l.queueItemUserToggled,queueItemHideImages:l.queueItemHideImages,showQueueMetadata:l.showQueueMetadata,previewVisibility:l.previewVisibility,previewVisibilityDefault:l.previewVisibilityDefault})})),An=rl()(Wl(l=>({currentPanel:"workflow",setCurrentPanel:r=>{l({currentPanel:r})}}),{name:"navigation-storage",storage:ql(()=>localStorage),partialize:l=>({currentPanel:l.currentPanel})})),Gn=rl()(Wl((l,r)=>({pinnedWidgets:{},pinnedWidget:null,pinOverlayOpen:!1,setPinnedWidget:(s,o)=>{const{pinnedWidgets:i}=r();if(o&&s)l({pinnedWidget:s,pinnedWidgets:{...i,[o]:s}});else if(o&&!s){const d={...i};delete d[o],l({pinnedWidget:null,pinnedWidgets:d})}else l({pinnedWidget:s})},setPinOverlayOpen:s=>{l({pinOverlayOpen:s})},togglePinOverlay:()=>{l(s=>({pinOverlayOpen:!s.pinOverlayOpen}))},clearPinnedWidgetForKey:s=>{if(!s){l({pinnedWidget:null,pinOverlayOpen:!1});return}l(o=>{const i={...o.pinnedWidgets};return delete i[s],{pinnedWidgets:i,pinnedWidget:null,pinOverlayOpen:!1}})},restorePinnedWidgetForWorkflow:(s,o)=>{if(!s){l({pinnedWidget:null,pinOverlayOpen:!1});return}const i=r().pinnedWidgets[s];if(!i){l({pinnedWidget:null,pinOverlayOpen:!1});return}const d=o.nodes.some(p=>p.id===i.nodeId);l({pinnedWidget:d?i:null,pinOverlayOpen:!1})},clearCurrentPin:()=>{l({pinnedWidget:null,pinOverlayOpen:!1})}}),{name:"pinned-widget-storage",storage:ql(()=>localStorage),partialize:l=>({pinnedWidgets:l.pinnedWidgets,pinnedWidget:l.pinnedWidget,pinOverlayOpen:l.pinOverlayOpen})})),Fd=-1,Ai=-2,Di=-3,ei=0x4000000000000,hi=new Set([Fd,Ai,Di]);function $d(l){return hi.has(l)}function C0(l){return l===Fd?"randomize":l===Ai?"increment":l===Di?"decrement":null}function N1(l){return l==="randomize"?Fd:l==="increment"?Ai:l==="decrement"?Di:null}function xr(l,r,s,o){if(!r)return null;const d=qd(l,s.id)?.[o];if(d!==void 0)return d;const p=r[s.type];if(!p?.input)return null;const h=p.input_order?.required||Object.keys(p.input.required||{}),m=p.input_order?.optional||Object.keys(p.input.optional||{}),g=[...h,...m];let x=0;for(const y of g){const N=p.input.required?.[y]||p.input.optional?.[y];if(!N)continue;const[k]=N,S=s.inputs.find(z=>z.name===y),w=S?.link!=null,M=!!S?.widget&&!w,j=!!S;if(Li(k)||M||!j){if(y===o)return x;x+=1,String(k)==="INT"&&(y==="seed"||y==="noise_seed")&&(x+=1)}}return null}function Ca(l,r,s){const o=xr(l,r,s,"seed")??xr(l,r,s,"noise_seed");if(o!==null)return o;if(!r)return s.outputs?.some(y=>String(y.name||"").toLowerCase().includes("seed")&&String(y.type||"").toUpperCase().includes("INT"))&&Array.isArray(s.widgets_values)&&s.widgets_values.length>0?0:null;const i=r[s.type];if(!i?.input)return s.outputs?.some(y=>String(y.name||"").toLowerCase().includes("seed")&&String(y.type||"").toUpperCase().includes("INT"))&&Array.isArray(s.widgets_values)&&s.widgets_values.length>0?0:null;const d=qd(l,s.id),p=i.input_order?.required||Object.keys(i.input.required||{}),h=i.input_order?.optional||Object.keys(i.input.optional||{}),m=[...p,...h];let g=0;for(const x of m){const y=i.input.required?.[x]||i.input.optional?.[x];if(!y)continue;const[N]=y,k=s.inputs.find(O=>O.name===x),S=k?.link!=null,w=!!k?.widget&&!S,M=!!k;if(Li(N)||w||!M){const R=d?.[x]??g;if(String(N)==="INT"&&x.toLowerCase().includes("seed"))return R;g+=1,String(N)==="INT"&&(x==="seed"||x==="noise_seed")&&(g+=1)}}return null}function j1(l,r){const s=l[r.type];if(!s?.input)return 1;const i=(s.input.required?.seed||s.input.optional?.seed)?.[1],d=typeof i?.step=="number"?i.step:1;return d>0?d:1}function C1(l){const r=Number(l.properties?.randomMin??0),s=Number(l.properties?.randomMax??ei),o=Number.isFinite(r)?Math.max(-ei,r):0,i=Number.isFinite(s)?Math.min(ei,s):ei;return o<=i?{min:o,max:i}:{min:i,max:o}}function Mo(l,r){const s=j1(l,r),{min:o,max:i}=C1(r),d=s>0?s/10:1,p=i-o;let h=o+Math.random()*p;return d>0&&(h=Math.round((h-o)/d)*d+o),h>i&&(h=i),h<o&&(h=o),hi.has(h)&&(h=0),h}function k1(l,r,s,o){if(hi.has(l)){if(typeof r=="number"&&!hi.has(r)){if(l===Ai)return r+1;if(l===Di)return r-1}return Mo(s,o)}return Number.isFinite(l)?l:0}const jn=rl()(Wl((l,r)=>({seedModes:{},seedLastValues:{},setSeedMode:(s,o,i)=>{const{seedModes:d,seedLastValues:p}=r();if(i?.workflow&&i.nodeTypes){const{workflow:h,nodeTypes:m,updateNodeWidgets:g}=i,x=h.nodes.find(y=>y.id===s);if(x){const y=Ca(h,m,x);if(y!==null&&Array.isArray(x.widgets_values)){const N=y+1,k=typeof x.widgets_values[N]=="string",S={};if(k)S[N]=o;else{const w=N1(o);if(w!==null&&o!=="fixed")S[y]=w;else if(o==="fixed"){const M=Number(x.widgets_values[y]);if($d(M)){const j=p[s],O=typeof j=="number"?j:Mo(m,x);S[y]=O}}}Object.keys(S).length>0&&g(s,S)}}}l({seedModes:{...d,[s]:o}})},setSeedModes:s=>{l({seedModes:s})},setSeedLastValues:s=>{l({seedLastValues:s})},clearSeedState:()=>{l({seedModes:{},seedLastValues:{}})}}),{name:"seed-storage",storage:ql(()=>localStorage),partialize:l=>({seedModes:l.seedModes,seedLastValues:l.seedLastValues})}));function pg(l,r){return l&&l[r]||null}function k0(l,r){try{if(r.type==="PrimitiveNode"){const m=r.outputs?.[0]?.type;if(!m)return[];const g=String(m).toUpperCase(),x=Array.isArray(r.widgets_values)?r.widgets_values[0]:void 0;return[{name:r.outputs?.[0]?.name||"value",type:g,options:void 0,value:x,widgetIndex:0,isCombo:!1,connected:!1,inputIndex:-1}]}if(r.type==="Power Lora Loader (rgthree)"){const m=[],g=r.properties?.["Show Strengths"]==="Separate Model & Clip";let x=[];if(l){const y=pg(l,"LoraLoader");if(y?.input?.required?.lora_name){const[N]=y.input.required.lora_name;Array.isArray(N)&&(x=N)}}if(Array.isArray(r.widgets_values)){const y=r.widgets_values,N=[];y.forEach((k,S)=>{typeof k=="object"&&k!==null&&"lora"in k&&"strength"in k&&N.push(S)}),N.length>0&&(m.push({name:"Loras",type:"POWER_LORA_HEADER",options:{loraIndices:N},value:null,widgetIndex:-1,isCombo:!1,connected:!1,inputIndex:-1}),N.forEach(k=>{const S=y[k];m.push({name:"Lora",type:"POWER_LORA",options:{choices:x.length>0?x:void 0,showSeparate:g},value:S,widgetIndex:k,isCombo:!1,connected:!1,inputIndex:-1})})),m.push({name:"Add Lora",type:"POWER_LORA_ADD",options:void 0,value:null,widgetIndex:r.widgets_values.length,isCombo:!1,connected:!1,inputIndex:-1})}return m}const s=pg(l,r.type);if(!s?.input)return r.outputs?.some(g=>String(g.name||"").toLowerCase().includes("seed")&&String(g.type||"").toUpperCase().includes("INT"))&&Array.isArray(r.widgets_values)&&r.widgets_values.length>0?[{name:"seed",type:"INT",options:void 0,value:r.widgets_values[0],widgetIndex:0,isCombo:!1,connected:!1,inputIndex:-1}]:[];const o=s.input_order?.required||Object.keys(s.input.required||{}),i=s.input_order?.optional||Object.keys(s.input.optional||{}),d=[];let p=0;const h=(m,g)=>{if(!g)return;const[x,y]=g,N=r.inputs.findIndex(T=>T.name===m),k=N>=0?r.inputs[N]:void 0,S=k?.link!=null,w=!!k?.widget&&!S,M=!!k,j=Object.prototype.hasOwnProperty.call(y??{},"default"),O=Li(x)||w||!M||j,R=Array.isArray(x),z=R?{...y??{},options:x}:y;if(O){const T=ko(r,m,p);d.push({name:m,type:R?"COMBO":String(x),options:z,value:T,widgetIndex:p,isCombo:R,connected:!!S,inputIndex:N})}O&&(p+=1,String(x)==="INT"&&(m==="seed"||m==="noise_seed")&&(p+=1))};for(const m of o){const g=s.input.required?.[m];g&&h(m,g)}for(const m of i){const g=s.input.optional?.[m];g&&h(m,g)}return d}catch(s){return console.error(`Error collecting widget definitions for node ${r.id} (${r.type}):`,s),[]}}function Yd(l,r){return k0(l,r).filter(s=>!s.isCombo).map(s=>({name:s.name,type:s.type,options:s.options,value:s.value,widgetIndex:s.widgetIndex,connected:s.connected,inputIndex:s.inputIndex}))}function Qd(l,r){return k0(l,r).filter(s=>s.isCombo).map(s=>({name:s.name,type:s.type,value:s.value,options:s.options,widgetIndex:s.widgetIndex,connected:s.connected,inputIndex:s.inputIndex}))}function M1(l){let r=5381;for(let s=0;s<l.length;s+=1)r=(r<<5)+r+l.charCodeAt(s),r&=4294967295;return(r>>>0).toString(16).padStart(8,"0")}function O1(l,r){if(!l)return!1;const s=Yd(l,r).filter(i=>!i.connected),o=Qd(l,r).filter(i=>!i.connected);return s.length===0&&o.length===0}function E1(l){const r=l.nodes??[],s=l.definitions?.subgraphs?.flatMap(o=>o.nodes??[])??[];return[...r,...s]}function nd(l,r){const i=E1(l).filter(d=>!O1(r,d)).map(d=>d.type).sort().join("|");return`wf_${M1(i)}`}const mg="__mobile_origin",ti="__mobile_subgraph_group_map";function ld(l,r,s){const o={...l.properties??{}};return s&&o[mg]===void 0&&(o[mg]=s),{...l,id:r,inputs:(l.inputs??[]).map(i=>({...i,link:null})),outputs:(l.outputs??[]).map(i=>({...i,links:[]})),widgets_values:l.widgets_values??[],flags:l.flags??{},properties:o,mode:l.mode??0,order:l.order??0}}function T1(l,r){if(!r||r.length===0)return null;const s=[...r].sort((g,x)=>g.id-x.id),[o,i]=l.pos,[d,p]=l.size,h=o+d/2,m=i+p/2;for(const g of s){const[x,y,N,k]=g.bounding;if(h>=x&&h<=x+N&&m>=y&&m<=y+k)return g.id}return null}function hg(l,r){const s=new Map,o=new Map;return r.forEach((i,d)=>{i?.name&&o.set(i.name,d)}),l.forEach((i,d)=>{const p=i?.name;if(p&&o.has(p)){s.set(d,o.get(p));return}d<r.length&&s.set(d,d)}),s}function _1(l,r){const s=new Map;for(const o of l)o.inputs=(o.inputs??[]).map(i=>({...i,link:null})),o.outputs=(o.outputs??[]).map(i=>({...i,links:[]})),s.set(o.id,o);for(const o of r){const[i,d,p,h,m]=o,g=s.get(d),x=s.get(h),y=g?.outputs?.[p],N=x?.inputs?.[m];y&&(y.links||(y.links=[]),y.links.push(i)),N&&(N.link=i)}return l}function L1(l,r){const s=l.nodes.filter(S=>r.has(S.type));if(s.length===0)return{workflow:l,changed:!1};const o=new Set(s.map(S=>S.id));let i=Math.max(0,...l.nodes.map(S=>S.id))+1;const d=[],p=l.groups??[],h=l.extra??{},m=typeof h[ti]=="object"&&h[ti]!==null?h[ti]:{},g={};for(const[S,w]of Object.entries(m))(typeof w=="number"||w===null)&&(g[S]=w);const x=new Map;for(const S of l.nodes){if(!o.has(S.id)){d.push(ld(S,S.id,{scope:"root",nodeId:S.id}));continue}const w=r.get(S.type);if(!w){d.push(ld(S,S.id,{scope:"root",nodeId:S.id}));continue}const M=T1(S,p);g[w.id]=M??null;const j=hg(S.inputs??[],w.inputs??[]),O=hg(S.outputs??[],w.outputs??[]),R=new Map,z=new Map,T=new Map,D=[];for(const A of w.nodes??[]){const B=i++;R.set(A.id,B),d.push(ld(A,B,{scope:"subgraph",subgraphId:w.id,nodeId:A.id}))}for(const A of w.links??[]){const B=A.origin_id,U=A.target_id;if(B===-10){const te=R.get(U);if(te!==void 0){const ge=z.get(A.origin_slot)??[];ge.push({origin_id:-10,origin_slot:A.origin_slot,target_id:te,target_slot:A.target_slot,type:A.type}),z.set(A.origin_slot,ge)}continue}if(U===-20){const te=R.get(B);if(te!==void 0){const ge=T.get(A.target_slot)??[];ge.push({origin_id:te,origin_slot:A.origin_slot,target_id:-20,target_slot:A.target_slot,type:A.type}),T.set(A.target_slot,ge)}continue}const G=R.get(B),q=R.get(U);G!==void 0&&q!==void 0&&D.push({origin_id:G,origin_slot:A.origin_slot,target_id:q,target_slot:A.target_slot,type:A.type})}x.set(S.id,{inputSlotMap:j,outputSlotMap:O,inputTargets:z,outputSources:T,internalLinks:D})}const y=[],N=l.links??[];for(const S of N){const[,w,M,j,O,R]=S,z=o.has(w),T=o.has(j);if(!z&&!T){y.push({origin_id:w,origin_slot:M,target_id:j,target_slot:O,type:R});continue}if(z&&T){const D=x.get(w),A=x.get(j),B=D?.outputSlotMap.get(M),U=A?.inputSlotMap.get(O);if(B===void 0||U===void 0)continue;const G=D?.outputSources.get(B)??[],q=A?.inputTargets.get(U)??[];for(const te of G)for(const ge of q)y.push({origin_id:te.origin_id,origin_slot:te.origin_slot,target_id:ge.target_id,target_slot:ge.target_slot,type:te.type});continue}if(z){const D=x.get(w),A=D?.outputSlotMap.get(M);if(A===void 0)continue;const B=D?.outputSources.get(A)??[];for(const U of B)y.push({origin_id:U.origin_id,origin_slot:U.origin_slot,target_id:j,target_slot:O,type:U.type});continue}if(T){const D=x.get(j),A=D?.inputSlotMap.get(O);if(A===void 0)continue;const B=D?.inputTargets.get(A)??[];for(const U of B)y.push({origin_id:w,origin_slot:M,target_id:U.target_id,target_slot:U.target_slot,type:U.type})}}for(const S of x.values())y.push(...S.internalLinks);const k=y.map((S,w)=>[w+1,S.origin_id,S.origin_slot,S.target_id,S.target_slot,S.type]);return _1(d,k),{workflow:{...l,extra:{...h,[ti]:g},nodes:d,links:k,last_node_id:Math.max(0,...d.map(S=>S.id)),last_link_id:k.length},changed:!0}}function A1(l){const r=l.definitions?.subgraphs??[];if(r.length===0)return l;const s=new Map;for(const i of r)i?.id&&s.set(i.id,i);let o=l;for(let i=0;i<r.length+4;i+=1){const{workflow:d,changed:p}=L1(o,s);if(!p)break;o=d}return o}function D1(l){const r=new Map,s=new Map,o=new Map;for(const i of l.nodes)r.set(i.id,i),s.set(i.id,[]),o.set(i.id,[]);for(const i of l.links){const[,d,,p]=i,h=s.get(p);h&&!h.includes(d)&&h.push(d);const m=o.get(d);m&&!m.includes(p)&&m.push(p)}return{nodes:r,dependencies:s,dependents:o}}function R1(l){return["SaveImage","PreviewImage","SaveAnimatedWEBP","SaveAnimatedPNG","SaveVideo","SaveAudio"].some(s=>l.type.includes(s))||l.outputs.length===0||l.outputs.every(s=>!s.links||s.links.length===0)}function z1(l){if(l.nodes.length===0)return[];const r=D1(l),s=new Set,o=[];function i(p){if(s.has(p))return;s.add(p);const h=r.nodes.get(p);if(!h)return;const m=r.dependencies.get(p)||[];for(const g of m)i(g);o.push(h)}const d=l.nodes.filter(R1);if(d.length===0)for(const p of l.nodes)(r.dependents.get(p.id)||[]).length===0&&d.push(p);for(const p of d)i(p.id);for(const p of l.nodes)s.has(p.id)||i(p.id);return o}function Oo(l,r,s){const o=l.nodes.find(g=>g.id===r);if(!o||!o.inputs[s])return null;const i=o.inputs[s].link;if(i===null)return null;const d=l.links.find(g=>g[0]===i);if(!d)return null;const[,p,h]=d,m=l.nodes.find(g=>g.id===p);return m?{node:m,outputIndex:h}:null}function gi(l,r,s){const o=l.nodes.find(p=>p.id===r);if(!o||!o.outputs[s])return[];const i=o.outputs[s].links||[],d=[];for(const p of i){const h=l.links.find(y=>y[0]===p);if(!h)continue;const[,,,m,g]=h,x=l.nodes.find(y=>y.id===m);x&&d.push({node:x,inputIndex:g})}return d}const B1="__mobile_origin",M0="__mobile_subgraph_group_map";function Cd(l){return l.map(r=>({...r,widgets_values:r.widgets_values??[],inputs:r.inputs??[],outputs:r.outputs??[],flags:r.flags??{},properties:r.properties??{},mode:r.mode??0,order:r.order??0}))}function gg(l){const r=JSON.parse(JSON.stringify(l));return r.nodes=Cd(r.nodes??[]),r.links=r.links??[],r.groups=r.groups??[],r.config=r.config??{},r.definitions?.subgraphs&&(r.definitions.subgraphs=r.definitions.subgraphs.map(s=>({...s,nodes:Cd(s.nodes??[]),links:s.links??[]}))),r.last_node_id=r.last_node_id??Math.max(0,...r.nodes.map(s=>s.id)),r.last_link_id=r.last_link_id??0,r.version=r.version??.4,r}function Eo(l){if(!l)return null;const s=l.properties?.[B1];if(!s||typeof s!="object")return null;const o=s.scope;if(o==="root"){const i=s.nodeId;return typeof i=="number"?{scope:"root",nodeId:i}:null}if(o==="subgraph"){const i=s.nodeId,d=s.subgraphId;if(typeof i=="number"&&typeof d=="string")return{scope:"subgraph",subgraphId:d,nodeId:i}}return null}function kd(l,r){const s=new Map;if(!r||r.length===0)return s;const o=[...r].sort((i,d)=>i.id-d.id);for(const i of l){const[d,p]=i.pos,[h,m]=i.size,g=d+h/2,x=p+m/2;for(const y of o){const[N,k,S,w]=y.bounding;if(g>=N&&g<=N+S&&x>=k&&x<=k+w){s.set(i.id,y.id);break}}}return s}function xg(l,r){const s=new Set,o=Array.from(l);for(;o.length>0;){const i=o.pop();if(!i||s.has(i))continue;s.add(i);const d=r.get(i);if(d)for(const p of d)s.has(p)||o.push(p)}return s}function I1(l){const r=new Set(l.map(o=>o.id)),s=new Map;for(const o of l)for(const i of o.nodes??[]){if(!r.has(i.type))continue;const d=s.get(i.type)??[];d.push({parentId:o.id,nodeId:i.id}),s.set(i.type,d)}return s}function wo(l,r,s){return!s||s.length===0?null:kd(r,s).get(l)??null}function O0(l,r,s=null){const o=l.nodes??[],i=l.groups??[],d=l.definitions?.subgraphs??[],p=new Map(d.map(N=>[N.id,N])),h=new Set(d.map(N=>N.id)),m=new Map,g=[];for(const N of o){const k=Eo(N);if(k?.scope==="subgraph"){const S=m.get(k.subgraphId);S?S.push(N):m.set(k.subgraphId,[N])}else g.push(N)}const x=new Map;for(const N of d){const k=new Set;for(const S of N.nodes??[])h.has(S.type)&&k.add(S.type);k.size>0&&x.set(N.id,k)}const y=new Set;if(s){const N=p.get(s);if(!N)return y;const k=N.groups??[];if(!k.find(T=>T.id===r))return y;const w=N.nodes??[],M=kd(w,k),j=new Set,O=new Set;for(const T of w)M.get(T.id)===r&&(h.has(T.type)?j.add(T.type):O.add(T.id));const R=m.get(s)??[];for(const T of R){const D=Eo(T);D?.scope==="subgraph"&&O.has(D.nodeId)&&y.add(T.id)}const z=xg(j,x);for(const T of z){const D=m.get(T)??[];for(const A of D)y.add(A.id)}}else{if(!i.find(j=>j.id===r))return y;const k=kd(g,i);for(const j of g)k.get(j.id)===r&&y.add(j.id);const S=l.extra?.[M0],w=new Set;if(S&&typeof S=="object")for(const[j,O]of Object.entries(S))O===r&&w.add(j);const M=xg(w,x);for(const j of M){const O=m.get(j)??[];for(const R of O)y.add(R.id)}}return y}function H1(l,r,s,o){if(!Array.isArray(l.widgets_values)){const d={...l.widgets_values||{}};return o?(d[o]=s,l.type==="VHS_VideoCombine"&&o==="save_image"&&"save_output"in d&&(d.save_output=s)):r>=0&&(d[String(r)]=s),{...l,widgets_values:d}}let i=[...l.widgets_values];return r>=i.length?i.push(s):i[r]=s,l.type==="Power Lora Loader (rgthree)"&&(i=i.filter(d=>d!==null)),{...l,widgets_values:i}}function V1(l,r){if(!Array.isArray(l.widgets_values))return l;const s=[...l.widgets_values];for(const[o,i]of Object.entries(r)){const d=parseInt(o,10);s[d]=i}return{...l,widgets_values:s}}function ni(l,r){const s=Eo(r)??{scope:"root",nodeId:r.id};if(s.scope==="root"){const d=l.nodes.map(p=>p.id===s.nodeId?{...p,widgets_values:r.widgets_values??[]}:p);return{...l,nodes:d}}const o=l.definitions?.subgraphs;if(!o)return l;const i=o.map(d=>{if(d.id!==s.subgraphId)return d;const p=d.nodes.map(h=>h.id===s.nodeId?{...h,widgets_values:r.widgets_values??[]}:h);return{...d,nodes:p}});return{...l,definitions:{...l.definitions,subgraphs:i}}}function rd(l,r,s){const o=["fixed","randomize","increment","decrement"];if(Array.isArray(s.widgets_values)){const d=s.widgets_values.find(p=>typeof p=="string"&&o.includes(p.toLowerCase()));if(typeof d=="string"){const p=d.toLowerCase();if(o.includes(p))return p}}const i=Ca(l,r,s);if(i!==null&&Array.isArray(s.widgets_values)){const d=Number(s.widgets_values[i]),p=C0(d);if(p)return p;const m=(s.outputs??[]).some(N=>String(N.name||"").toLowerCase().includes("seed")&&String(N.type||"").toUpperCase().includes("INT")),g=s.widgets_values.slice(i+1),x=g.length>0&&g.every(N=>N===""||N===null||N===void 0),y=s.properties&&("randomMin"in s.properties||"randomMax"in s.properties);if(m&&x&&y)return"randomize"}return"fixed"}function U1(l,r){const s={};for(const o of l.nodes){const i=r[o.type];if(!i?.input)continue;const d=i.input_order?.required||Object.keys(i.input.required||{}),p=i.input_order?.optional||Object.keys(i.input.optional||{}),h=[...d,...p];for(const m of h){const g=i.input.required?.[m]||i.input.optional?.[m];if(!g)continue;const[x]=g;if(!Array.isArray(x)||x.length===0||o.inputs.find(O=>O.name===m)?.link!=null)continue;const N=xr(l,r,o,m);if(N===null)continue;const k=ko(o,m,N);if(k==null)continue;const S=Wd(k,x,{comboIndexToValue:!0}),w=String(S),M=w.split(/[\\/]/).pop()??w;if(!x.some(O=>{const R=String(O);return R===w||R===M})){const O=String(o.id);s[O]||(s[O]=[]),s[O].push({type:"workflow_load",message:`Missing value: ${w}`,details:"Not found on server.",inputName:m})}}}return s}const J=rl()(Wl((l,r)=>{const s=o=>{const{manuallyHiddenNodes:i}=r(),p=Object.keys(o).filter(h=>i[Number(h)]);if(p.length>0){const h={...i};for(const m of p)delete h[Number(m)];l({manuallyHiddenNodes:h})}Jt.getState().setNodeErrors(o)};return{workflowSource:null,workflow:null,embedWorkflow:null,originalWorkflow:null,currentFilename:null,currentWorkflowKey:null,nodeTypes:null,isLoading:!1,savedWorkflowStates:{},isExecuting:!1,executingNodeId:null,executingPromptId:null,progress:0,executionStartTime:null,currentNodeStartTime:null,nodeDurationStats:{},workflowDurationStats:{},nodeOutputs:{},promptOutputs:{},runCount:1,followQueue:!1,workflowLoadedAt:0,connectionHighlightModes:{},connectionButtonsVisible:!0,manuallyHiddenNodes:{},searchQuery:"",searchOpen:!1,collapsedGroups:{},hiddenGroups:{},collapsedSubgraphs:{},hiddenSubgraphs:{},setNodeOutput:(o,i)=>{l(d=>({nodeOutputs:{...d.nodeOutputs,[o]:i}}))},clearNodeOutputs:()=>{l({nodeOutputs:{}})},addPromptOutputs:(o,i)=>{!o||i.length===0||l(d=>({promptOutputs:{...d.promptOutputs,[o]:[...d.promptOutputs[o]??[],...i]}}))},clearPromptOutputs:o=>{if(!o){l({promptOutputs:{}});return}l(i=>{if(!i.promptOutputs[o])return i;const d={...i.promptOutputs};return delete d[o],{promptOutputs:d}})},setRunCount:o=>{l({runCount:Math.max(1,Math.floor(o))})},setFollowQueue:o=>{l({followQueue:o})},cycleConnectionHighlight:o=>{l(i=>{const d=i.connectionHighlightModes[o]??"off",p=d==="off"?"inputs":d==="inputs"?"outputs":d==="outputs"?"both":"off";return{connectionHighlightModes:{...i.connectionHighlightModes,[o]:p}}})},setConnectionHighlightMode:(o,i)=>{l(d=>({connectionHighlightModes:{...d.connectionHighlightModes,[o]:i}}))},toggleConnectionButtonsVisible:()=>{l(o=>({connectionButtonsVisible:!o.connectionButtonsVisible}))},setConnectionButtonsVisible:o=>{l({connectionButtonsVisible:o})},hideNode:o=>{l(i=>({manuallyHiddenNodes:{...i.manuallyHiddenNodes,[o]:!0}}))},setNodeHidden:(o,i)=>{l(d=>{const p={...d.manuallyHiddenNodes};return i?p[o]=!0:delete p[o],{manuallyHiddenNodes:p}})},revealNodeWithParents:o=>{const{workflow:i}=r();if(!i)return;const d=i.definitions?.subgraphs??[];console.log("[revealNodeWithParents] start",{nodeId:o,rootNodeCount:i.nodes?.length??0,subgraphCount:d.length});let p=i.nodes.find(S=>S.id===o);if(!p)for(const S of d){const w=S.nodes?.find(M=>M.id===o);if(w){p=w;break}}if(!p){console.log("[revealNodeWithParents] node not found",{nodeId:o,rootIds:i.nodes?.slice(0,5).map(S=>S.id),subgraphSummaries:d.map(S=>({id:S.id,nodeCount:S.nodes?.length??0,sampleIds:S.nodes?.slice(0,5).map(w=>w.id)??[]}))});return}const h=new Map(d.map(S=>[S.id,S])),m=I1(d),g=Eo(p),x=i.nodes.filter(S=>Eo(S)?.scope!=="subgraph"),y=g?.scope==="subgraph"?g.nodeId:p.id,k=(()=>{const S=new Set,w=[y];if(g?.scope==="subgraph"){const M=h.get(g.subgraphId),j=new Map;for(M?.links?.forEach(O=>{const R=j.get(O.target_id)??[];R.push(O.origin_id),j.set(O.target_id,R)});w.length>0;){const O=w.pop();if(O===void 0)continue;(j.get(O)??[]).forEach(z=>{S.has(z)||(S.add(z),w.push(z))})}return S}for(;w.length>0;){const M=w.pop();if(M===void 0)continue;const j=i.nodes.find(O=>O.id===M);j&&j.inputs?.forEach((O,R)=>{if(O.link===null)return;const z=Oo(i,M,R);if(!z)return;const T=z.node.id;S.has(T)||(S.add(T),w.push(T))})}return S})();console.log("[revealNodeWithParents] parents",{nodeId:o,parentCount:k.size,parents:Array.from(k).slice(0,20)}),console.log("[revealNodeWithParents] found node",{nodeId:p.id,origin:g,hasGroups:(i.groups?.length??0)>0,hiddenNodeCount:Object.keys(r().manuallyHiddenNodes??{}).length}),l(S=>{const w={...S.manuallyHiddenNodes};delete w[o],k.forEach(D=>{delete w[D]});const M={...S.hiddenGroups},j={...S.hiddenSubgraphs},O={...S.collapsedGroups},R={...S.collapsedSubgraphs},z=D=>{D!=null&&(delete M[D],O[D]=!1)},T=D=>{D&&(R[D]=!1,delete j[D])};if(!g||g.scope==="root"){const D=wo(p.id,x,i.groups??[]);console.log("[revealNodeWithParents] root origin",{nodeId:o,groupId:D}),z(D),k.forEach(A=>{const B=wo(A,x,i.groups??[]);z(B)})}else{T(g.subgraphId);const D=h.get(g.subgraphId);if(D){const q=wo(g.nodeId,D.nodes??[],D.groups??[]);console.log("[revealNodeWithParents] subgraph origin",{nodeId:o,subgraphId:g.subgraphId,groupId:q}),z(q)}const A=i.extra?.[M0],B=A&&typeof A=="object"?A[g.subgraphId]:void 0;typeof B=="number"&&(console.log("[revealNodeWithParents] root group mapping",{subgraphId:g.subgraphId,rootGroupId:B}),z(B)),D&&k.forEach(q=>{const te=wo(q,D.nodes??[],D.groups??[]);z(te)});const U=[g.subgraphId],G=new Set;for(;U.length>0;){const q=U.pop();if(!q||G.has(q))continue;G.add(q);const te=m.get(q)??[];console.log("[revealNodeWithParents] parent chain",{current:q,parentCount:te.length});for(const ge of te){T(ge.parentId);const le=h.get(ge.parentId);if(le){const ie=wo(ge.nodeId,le.nodes??[],le.groups??[]);console.log("[revealNodeWithParents] parent expand",{parentId:ge.parentId,parentNodeId:ge.nodeId,parentGroupId:ie}),z(ie)}G.has(ge.parentId)||U.push(ge.parentId)}}}return{manuallyHiddenNodes:w,hiddenGroups:M,hiddenSubgraphs:j,collapsedGroups:O,collapsedSubgraphs:R}})},showAllHiddenNodes:()=>{l({manuallyHiddenNodes:{},hiddenGroups:{},hiddenSubgraphs:{}})},toggleGroupCollapse:o=>{l(i=>{const d=i.collapsedGroups[o]??!0;return{collapsedGroups:{...i.collapsedGroups,[o]:!d}}})},setGroupCollapsed:(o,i)=>{l(d=>{const p={...d.collapsedGroups};return i?p[o]=!0:delete p[o],{collapsedGroups:p}})},toggleGroupHidden:o=>{l(i=>({hiddenGroups:{...i.hiddenGroups,[o]:!i.hiddenGroups[o]}}))},setGroupHidden:(o,i)=>{l(d=>{const p={...d.hiddenGroups};return i?p[o]=!0:delete p[o],{hiddenGroups:p}})},toggleSubgraphHidden:o=>{l(i=>({hiddenSubgraphs:{...i.hiddenSubgraphs,[o]:!i.hiddenSubgraphs[o]}}))},setSubgraphHidden:(o,i)=>{l(d=>{const p={...d.hiddenSubgraphs};return i?p[o]=!0:delete p[o],{hiddenSubgraphs:p}})},updateGroupTitle:(o,i,d)=>{const{workflow:p}=r();if(!p)return;const h=i.trim();if(d){const x=(p.definitions?.subgraphs??[]).map(y=>{if(y.id!==d)return y;const k=(y.groups??[]).map(S=>S.id===o?{...S,title:h}:S);return{...y,groups:k}});Jt.getState().setError(null),l({workflow:{...p,definitions:{...p.definitions??{},subgraphs:x}}});return}const m=(p.groups??[]).map(g=>g.id===o?{...g,title:h}:g);l({workflow:{...p,groups:m}})},updateSubgraphTitle:(o,i)=>{const{workflow:d}=r();if(!d)return;const p=i.trim(),m=(d.definitions?.subgraphs??[]).map(g=>g.id===o?{...g,name:p}:g);l({workflow:{...d,definitions:{...d.definitions??{},subgraphs:m}}})},bypassAllInGroup:(o,i,d=null)=>{const{workflow:p}=r();if(!p)return;const h=O0(p,o,d);if(h.size===0)return;const m=i?4:0,g=(p.nodes??[]).map(x=>h.has(x.id)?{...x,mode:m}:x);l({workflow:{...p,nodes:g}})},showAllHiddenGroups:()=>{l({hiddenGroups:{}})},toggleSubgraphCollapse:o=>{l(i=>({collapsedSubgraphs:{...i.collapsedSubgraphs,[o]:!(i.collapsedSubgraphs[o]??!0)}}))},setSubgraphCollapsed:(o,i)=>{l(d=>({collapsedSubgraphs:{...d.collapsedSubgraphs,[o]:i}}))},setSearchQuery:o=>{l({searchQuery:o})},setSearchOpen:o=>{l({searchOpen:o})},updateWorkflowDuration:(o,i)=>{!o||i<=0||l(d=>{const p=d.workflowDurationStats[o],h=(p?.count??0)+1,m=p?(p.avgMs*p.count+i)/h:i;return{workflowDurationStats:{...d.workflowDurationStats,[o]:{avgMs:m,count:h}}}})},clearWorkflowCache:()=>{const{currentWorkflowKey:o,savedWorkflowStates:i,originalWorkflow:d,nodeTypes:p}=r(),h={...i};if(o?(delete h[o],Gn.getState().clearPinnedWidgetForKey(o)):Gn.getState().clearCurrentPin(),!d){jn.getState().setSeedModes({}),jn.getState().setSeedLastValues({}),l({savedWorkflowStates:h});return}const m={};if(p)for(const g of d.nodes)Ca(d,p,g)!==null&&(m[g.id]=rd(d,p,g));jn.getState().setSeedModes(m),jn.getState().setSeedLastValues({}),Jt.getState().setError(null),l({workflow:JSON.parse(JSON.stringify(d)),savedWorkflowStates:h,runCount:1,workflowLoadedAt:Date.now()})},saveCurrentWorkflowState:()=>{const{workflow:o,currentWorkflowKey:i,savedWorkflowStates:d,collapsedGroups:p,hiddenGroups:h,collapsedSubgraphs:m,hiddenSubgraphs:g}=r(),x=jn.getState().seedModes;if(!o||!i)return;const y=d[i]?.bookmarkedNodeIds??[],N={};for(const k of o.nodes)N[k.id]={mode:k.mode,flags:k.flags?{collapsed:!!k.flags.collapsed}:void 0,widgets_values:k.widgets_values};l({savedWorkflowStates:{...d,[i]:{nodes:N,seedModes:{...x},collapsedGroups:{...p},hiddenGroups:{...h},collapsedSubgraphs:{...m},hiddenSubgraphs:{...g},bookmarkedNodeIds:[...y]}}})},loadWorkflow:(o,i,d)=>{const{currentFilename:p,savedWorkflowStates:h,nodeTypes:m}=r(),g=d?.fresh??!1,x=d?.source??{type:"other"},y=A1(o),N=gg(o),k=Cd(y.nodes),S={...y,nodes:k,links:y.links??[],groups:y.groups??[],config:y.config??{},last_node_id:y.last_node_id??Math.max(0,...k.map(B=>B.id)),last_link_id:y.last_link_id??0,version:y.version??.4},w=nd(S,m),M=Gn.getState(),j=i?M.pinnedWidgets[i]:void 0;if(j&&!M.pinnedWidgets[w]&&M.setPinnedWidget(j,w),M.restorePinnedWidgetForWorkflow(w,S),p&&r().saveCurrentWorkflowState(),g&&h[w]){const B={...h};delete B[w],l({savedWorkflowStates:B})}const O={};if(m)for(const B of S.nodes)Ca(S,m,B)!==null&&(O[B.id]=rd(S,m,B));let R=g?null:h[w];!R&&!g&&i&&h[i]&&(R=h[i],l({savedWorkflowStates:{...h,[w]:h[i]}}));const z=o.definitions?.subgraphs??[],T={};for(const B of z)T[B.id]=!0;const D={};for(const B of S.groups??[])D[B.id]=!0;for(const B of z)for(const U of B.groups??[])D[U.id]=!0;let A=S;if(R){const B=S.nodes.map(q=>{const te=R.nodes[q.id];return te?{...q,mode:te.mode??q.mode,flags:te.flags??q.flags,widgets_values:te.widgets_values??q.widgets_values}:q}),U={...S,nodes:B};A=U;let G=N;if(G)for(const q of B)G=ni(G,q);l({workflowSource:x,workflow:U,embedWorkflow:G,originalWorkflow:JSON.parse(JSON.stringify(S)),currentFilename:i||null,currentWorkflowKey:w,collapsedGroups:{...D,...R.collapsedGroups??{}},hiddenGroups:R.hiddenGroups??{},collapsedSubgraphs:{...T,...R.collapsedSubgraphs??{}},hiddenSubgraphs:R.hiddenSubgraphs??{},runCount:1,followQueue:!1,workflowLoadedAt:Date.now()}),jn.getState().setSeedModes({...O,...R.seedModes}),jn.getState().setSeedLastValues({}),An.getState().setCurrentPanel("workflow"),nl.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}})}else Jt.getState().setError(null),l({workflowSource:x,workflow:S,embedWorkflow:N,originalWorkflow:JSON.parse(JSON.stringify(S)),currentFilename:i||null,currentWorkflowKey:w,collapsedGroups:D,hiddenGroups:{},collapsedSubgraphs:T,hiddenSubgraphs:{},runCount:1,followQueue:!1,workflowLoadedAt:Date.now()}),jn.getState().setSeedModes(O),jn.getState().setSeedLastValues({}),An.getState().setCurrentPanel("workflow"),nl.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}});if(m){const B=U1(A,m),U=Object.values(B).reduce((G,q)=>G+q.length,0);U>0?(s(B),Jt.getState().setError(`Workflow load error: ${U} input${U===1?"":"s"} reference missing options.`)):Jt.getState().clearNodeErrors()}},unloadWorkflow:()=>{const{currentWorkflowKey:o,savedWorkflowStates:i}=r();if(o){const d={...i};delete d[o],l({savedWorkflowStates:d})}Jt.getState().setError(null),l({workflowSource:null,workflow:null,embedWorkflow:null,originalWorkflow:null,currentFilename:null,currentWorkflowKey:null,collapsedGroups:{},hiddenGroups:{},collapsedSubgraphs:{},hiddenSubgraphs:{},runCount:1,nodeOutputs:{},promptOutputs:{},followQueue:!1,workflowLoadedAt:Date.now(),connectionHighlightModes:{},manuallyHiddenNodes:{}}),jn.getState().clearSeedState(),Gn.getState().clearCurrentPin(),An.getState().setCurrentPanel("workflow"),nl.getState().setViewerState({viewerOpen:!1,viewerImages:[],viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}})},setSavedWorkflow:(o,i)=>{Jt.getState().setError(null);const d=nd(o,r().nodeTypes);l({workflow:o,embedWorkflow:gg(o),originalWorkflow:JSON.parse(JSON.stringify(o)),currentFilename:i,currentWorkflowKey:d})},updateNodeWidget:(o,i,d,p)=>{const{workflow:h,embedWorkflow:m}=r();if(!h)return;const g=h.nodes.map(N=>N.id===o?H1(N,i,d,p):N),x=g.find(N=>N.id===o),y=m&&x?ni(m,x):m;l({workflow:{...h,nodes:g},embedWorkflow:y})},updateNodeWidgets:(o,i)=>{const{workflow:d,embedWorkflow:p}=r();if(!d)return;const h=d.nodes.map(x=>x.id===o?V1(x,i):x),m=h.find(x=>x.id===o),g=p&&m?ni(p,m):p;l({workflow:{...d,nodes:h},embedWorkflow:g})},updateNodeTitle:(o,i)=>{const{workflow:d}=r();if(!d)return;const p=i?.trim()??"",h=d.nodes.map(m=>{if(m.id!==o)return m;const g={...m.properties??{}},x={...m,properties:g};return p?(x.title=p,g.title=p):(delete x.title,delete g.title),x});l({workflow:{...d,nodes:h}})},toggleBypass:o=>{const{workflow:i}=r();if(!i)return;const d=i.nodes.map(p=>{if(p.id===o){const m=(p.mode||0)===4?0:4;return{...p,mode:m}}return p});l({workflow:{...i,nodes:d}})},toggleNodeFold:o=>{const{workflow:i}=r();if(!i)return;const d=i.nodes.map(p=>{if(p.id===o){const h=p.flags||{},m=h.collapsed;return{...p,flags:{...h,collapsed:!m}}}return p});l({workflow:{...i,nodes:d}})},setNodeFold:(o,i)=>{const{workflow:d}=r();if(!d)return;const p=d.nodes.map(h=>{if(h.id===o){const m=h.flags||{};return{...h,flags:{...m,collapsed:i}}}return h});l({workflow:{...d,nodes:p}})},ensureNodeExpanded:o=>{const{workflow:i}=r();if(!i||!i.nodes.find(h=>h.id===o)?.flags?.collapsed)return;const p=i.nodes.map(h=>h.id===o?{...h,flags:{...h.flags,collapsed:!1}}:h);l({workflow:{...i,nodes:p}})},scrollToNode:(o,i)=>{const{manuallyHiddenNodes:d}=r(),{searchOpen:p,searchQuery:h,collapsedGroups:m,hiddenGroups:g,collapsedSubgraphs:x,hiddenSubgraphs:y}=r();if(console.log("[scrollToNode] start",{nodeId:o,hidden:!!d[o],searchOpen:p,searchQuery:h,collapsedGroups:Object.keys(m??{}).length,hiddenGroups:Object.keys(g??{}).length,collapsedSubgraphs:Object.keys(x??{}).length,hiddenSubgraphs:Object.keys(y??{}).length}),d[o]&&r().setNodeHidden(o,!1),document.body.dataset.textareaFocus==="true")return;r().ensureNodeExpanded(o);const N=(k,S)=>{const w=document.getElementById(`node-anchor-${o}`)??document.getElementById(`node-${o}`),M=document.getElementById(`node-card-${o}`)??document.getElementById(`node-${o}`);if(!w||!M){console.log("[scrollToNode] missing elements",{nodeId:o,attemptsLeft:k,hasAnchor:!!w,hasNode:!!M}),k>0?requestAnimationFrame(()=>N(k-1,S)):S>0&&setTimeout(()=>N(10,S-1),200);return}const j=w.closest('[data-node-list="true"]');if(console.log("[scrollToNode] found elements",{nodeId:o,hasContainer:!!j}),j){const A=w.getBoundingClientRect(),B=j.getBoundingClientRect(),U=A.top-B.top,G=Math.max(0,j.scrollTop+U);j.scrollTo({top:G,behavior:"smooth"})}else w.scrollIntoView({behavior:"smooth",block:"start"});const O=j||window;let R=null;const z=()=>{document.querySelectorAll(".highlight-pulse").forEach(A=>A.classList.remove("highlight-pulse")),M.classList.add("highlight-pulse"),setTimeout(()=>M.classList.remove("highlight-pulse"),1200),"vibrate"in navigator&&navigator.vibrate(10),i&&window.dispatchEvent(new CustomEvent("node-show-label",{detail:{nodeId:o,label:i}}))},T=()=>{R&&clearTimeout(R),R=setTimeout(()=>{D(),z()},120)},D=()=>{R&&(clearTimeout(R),R=null),O.removeEventListener("scroll",T)};O.addEventListener("scroll",T,{passive:!0}),R=setTimeout(()=>{D(),z()},200)};N(10,2)},setNodeTypes:o=>{l({nodeTypes:o});const{workflow:i,currentWorkflowKey:d,currentFilename:p,savedWorkflowStates:h}=r();if(!i)return;const m=nd(i,o);if(d===m)return;const g={...h};d&&g[d]&&!g[m]?(g[m]=g[d],delete g[d]):!d&&p&&g[p]&&!g[m]&&(g[m]=g[p]);const x=Gn.getState(),y=p?x.pinnedWidgets[p]:void 0,N=d?x.pinnedWidgets[d]:void 0;y&&!x.pinnedWidgets[m]?x.setPinnedWidget(y,m):N&&!x.pinnedWidgets[m]&&x.setPinnedWidget(N,m),l({currentWorkflowKey:m,savedWorkflowStates:g}),x.restorePinnedWidgetForWorkflow(m,i)},setExecutionState:(o,i,d,p)=>{l(h=>{const m=Date.now(),g=o?d??h.executingPromptId:null,x=o?i??h.executingNodeId:null,y={isExecuting:o,executingNodeId:x,executingPromptId:g,progress:p},N=(w,M)=>{if(!w||M<=0||h.workflow?.nodes.find(D=>String(D.id)===w)?.mode===4)return h.nodeDurationStats;const O=String(w),R=h.nodeDurationStats[O],z=(R?.count??0)+1,T=R?(R.avgMs*R.count+M)/z:M;return{...h.nodeDurationStats,[O]:{avgMs:T,count:z}}};if(!o){if(h.currentNodeStartTime&&h.executingNodeId){const w=m-h.currentNodeStartTime;y.nodeDurationStats=N(h.executingNodeId,w)}if(h.executionStartTime&&h.workflow){const w=m-h.executionStartTime,M=xi(h.workflow),j=h.workflowDurationStats[M],O=(j?.count??0)+1,R=j?(j.avgMs*j.count+w)/O:w;y.workflowDurationStats={...h.workflowDurationStats,[M]:{avgMs:R,count:O}}}return y.executionStartTime=null,y.currentNodeStartTime=null,y}const k=g&&g!==h.executingPromptId,S=x&&x!==h.executingNodeId;if(k&&(y.executionStartTime=m,y.currentNodeStartTime=m),S&&h.currentNodeStartTime&&h.executingNodeId){const w=m-h.currentNodeStartTime;y.nodeDurationStats=N(h.executingNodeId,w),y.currentNodeStartTime=m}else h.currentNodeStartTime||(y.currentNodeStartTime=m);return y})},queueWorkflow:async o=>{const i=jn.getState(),d=i.seedModes,p=i.seedLastValues,{workflow:h,nodeTypes:m,embedWorkflow:g}=r();if(!h||!m){Jt.getState().setError("Node types are still loading. Try again in a moment.");return}Jt.getState().setError(null),l({isLoading:!0});try{let x=h,y=g,N={...p};for(let k=0;k<o;k++){const S={},w=x.nodes.map(z=>{const T=Ca(x,m,z);if(T===null||!Array.isArray(z.widgets_values))return z;const D=d[z.id]??rd(x,m,z),A=T+1;if(typeof z.widgets_values[A]=="string"){if(!D||D==="fixed")return z;const ge=Number(z.widgets_values[T])||0;let le;switch(D){case"randomize":le=Mo(m,z);break;case"increment":le=ge+1;break;case"decrement":le=ge-1;break;default:return z}const ie=[...z.widgets_values];return ie[T]=le,{...z,widgets_values:ie}}const G=Number(z.widgets_values[T]),q=N[z.id]??null;let te=null;return $d(G)?te=k1(G,q,m,z):D&&D!=="fixed"&&(D==="randomize"?te=Mo(m,z):D==="increment"?te=(typeof q=="number"?q:G)+1:D==="decrement"&&(te=(typeof q=="number"?q:G)-1)),te===null||(S[z.id]=te,N={...N,[z.id]:te}),z});if(x={...x,nodes:w},y){let z=y;for(const T of w)z=ni(z,T);y=z}i.setSeedLastValues(N),l({workflow:x,embedWorkflow:y});const M={},j=new Set,O=new Map;for(const z of x.nodes){if(z.mode===4)continue;let T=null;if(m[z.type])T=z.type;else{const D=Object.entries(m).find(([,A])=>A.display_name===z.type||A.name===z.type);D&&(T=D[0])}T&&(j.add(z.id),O.set(z.id,T))}for(const z of x.nodes){if(z.mode===4)continue;const T=O.get(z.id);if(!T)continue;const D=a1(x,m,z,T,j,qd(x,z.id),S);M[String(z.id)]={class_type:T,inputs:D}}const R=await fetch(`${zt}/api/prompt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:M,client_id:y0,extra_data:{extra_pnginfo:{workflow:y??x}}})});if(!R.ok){const z=await R.json(),T={};if(z.node_errors)for(const[D,A]of Object.entries(z.node_errors)){const B=A.errors;B&&B.length>0&&(T[D]=B.map(U=>({type:U.type,message:U.message,details:U.details,inputName:U.extra_info?.input_name})))}throw Object.keys(T).length>0&&s(T),new Error(z.error?.message||"Failed to queue prompt")}Jt.getState().clearNodeErrors()}}catch(x){Jt.getState().setError(x instanceof Error?x.message:"Failed to queue workflow")}finally{lt.getState().fetchQueue(),l({isLoading:!1})}},applyControlAfterGenerate:()=>{const{workflow:o}=r();if(!o)return;let i=!1;const d=o.nodes.map(p=>{if(p.type==="PrimitiveNode"){if(!Array.isArray(p.widgets_values))return p;const h=p.outputs?.[0]?.type,m=String(h).toUpperCase();if(m!=="INT"&&m!=="FLOAT")return p;const g=p.widgets_values?.[1];if(!g||g==="fixed")return p;const x=p.widgets_values?.[0];if(typeof x!="number")return p;let y=x;if(g==="increment"?y=m==="INT"?x+1:x+.01:g==="decrement"?y=m==="INT"?x-1:x-.01:g==="randomize"&&(y=m==="INT"?Math.floor(Math.random()*0xffffffffffff):Math.random()),y!==x){i=!0;const N=[...p.widgets_values];return N[0]=y,{...p,widgets_values:N}}}return p});i&&l({workflow:{...o,nodes:d}})}}},{name:"workflow-storage",storage:ql(()=>localStorage),partialize:l=>({workflow:l.workflow,embedWorkflow:l.embedWorkflow,originalWorkflow:l.originalWorkflow,currentFilename:l.currentFilename,currentWorkflowKey:l.currentWorkflowKey,savedWorkflowStates:l.savedWorkflowStates,runCount:l.runCount,manuallyHiddenNodes:l.manuallyHiddenNodes,collapsedGroups:l.collapsedGroups,hiddenGroups:l.hiddenGroups,collapsedSubgraphs:l.collapsedSubgraphs,hiddenSubgraphs:l.hiddenSubgraphs,connectionButtonsVisible:l.connectionButtonsVisible,isExecuting:l.isExecuting,executingNodeId:l.executingNodeId,executingPromptId:l.executingPromptId,progress:l.progress,executionStartTime:l.executionStartTime,currentNodeStartTime:l.currentNodeStartTime,nodeDurationStats:l.nodeDurationStats,workflowDurationStats:l.workflowDurationStats}),onRehydrateStorage:()=>l=>{}}));function xi(l){const r=[...l.nodes].sort((s,o)=>s.id-o.id).map(s=>({id:s.id,type:s.type,mode:s.mode,inputs:s.inputs?.map(o=>o.link??null)??[],outputs:s.outputs?.map(o=>o.links??[])??[]}));return JSON.stringify({nodes:r,links:l.links??[]})}const Md=rl(l=>({appMenuOpen:!1,setAppMenuOpen:r=>l({appMenuOpen:r})})),Ln=rl((l,r)=>({history:[],isLoading:!1,addHistoryEntry:s=>{l(i=>i.history.some(d=>d.prompt_id===s.prompt_id)?i:{history:[s,...i.history]});const o=lt.getState();if(o.queueItemExpanded[s.prompt_id]===void 0&&o.setQueueItemExpanded(s.prompt_id,!0),s.workflow&&s.durationSeconds){const i=xi(s.workflow);J.getState().updateWorkflowDuration(i,s.durationSeconds*1e3)}},fetchHistory:async()=>{l({isLoading:!0});try{const s=await i1(50),o=Object.entries(s).map(([d,p])=>{const h=[];for(const M of Object.values(p.outputs))M.images&&h.push(...M.images),M.gifs&&h.push(...M.gifs),M.videos&&h.push(...M.videos);let m=Date.now(),g=null,x=null,y=!1;if(p.status?.messages)for(const[M,j]of p.status.messages)M==="execution_start"&&j.timestamp&&(m=j.timestamp,g=j.timestamp),(M==="execution_end"||M==="execution_success")&&j.timestamp&&(x=j.timestamp),M==="execution_error"&&(y=!0);g===null&&m&&(g=m);const N=g!==null&&x!==null&&x>=g?(x-g)/1e3:void 0,k=p.status?.status_str?.toLowerCase()||"",S=!y&&p.status?.completed!==!1&&!k.includes("error"),w=p.prompt?.[3]?.extra_pnginfo?.workflow;return{prompt_id:d,timestamp:m,durationSeconds:N,success:S,outputs:{images:h},prompt:p.prompt[2],workflow:w}});o.sort((d,p)=>p.timestamp-d.timestamp),l({history:o});const i=lt.getState();for(const d of o)if(i.queueItemExpanded[d.prompt_id]===void 0&&i.setQueueItemExpanded(d.prompt_id,!0),d.workflow&&d.durationSeconds){const p=xi(d.workflow);J.getState().updateWorkflowDuration(p,d.durationSeconds*1e3)}}catch(s){console.error("Failed to fetch history:",s)}finally{l({isLoading:!1})}},deleteItem:async s=>{try{await h1(s),l(o=>({history:o.history.filter(i=>i.prompt_id!==s)}))}catch(o){console.error("Failed to delete history item:",o)}},clearHistory:async()=>{try{await g1()}catch(s){console.error("Failed to clear history:",s);try{const o=r().history.map(i=>i.prompt_id);await fg(o)}catch(o){console.error("Failed to delete history items:",o)}}finally{l({history:[]})}},clearEmptyItems:async()=>{const s=r().history.filter(o=>o.outputs.images.length===0).map(o=>o.prompt_id);if(s.length!==0)try{await fg(s),l(o=>({history:o.history.filter(i=>!s.includes(i.prompt_id))}))}catch(o){console.error("Failed to delete empty history items:",o)}}})),_t=rl()(Wl((l,r)=>({source:"output",currentFolder:null,folders:[],files:[],isLoading:!1,error:null,viewMode:"grid",showHidden:!1,filter:{search:"",favoritesOnly:!1,type:"all"},sort:{mode:"modified"},favorites:[],selectionMode:!1,selectedIds:[],selectionActionOpen:!1,filterModalOpen:!1,outputsViewerOpen:!1,setSource:s=>{l({source:s,currentFolder:null,files:[],folders:[],selectionMode:!1,selectedIds:[]}),r().fetchFolders(),r().fetchFiles()},setCurrentFolder:s=>{const{currentFolder:o}=r(),i=o?`${o}/${s}`:s;l({currentFolder:i,files:[],selectionMode:!1,selectedIds:[]}),r().fetchFiles()},navigateToPath:s=>{l({currentFolder:s,files:[],selectionMode:!1,selectedIds:[]}),r().fetchFiles()},navigateUp:()=>{const{currentFolder:s}=r();if(!s)return;const o=s.split("/");o.pop();const i=o.length>0?o.join("/"):null;l({currentFolder:i,files:[],selectionMode:!1,selectedIds:[]}),r().fetchFiles()},fetchFolders:async()=>{try{const s=await v1(),{source:o}=r();l({folders:o==="output"?s.output:s.input})}catch(s){console.error("Failed to fetch folders:",s)}},fetchFiles:async()=>{const{source:s,currentFolder:o,sort:i}=r();l({isLoading:!0,error:null});try{const d=await Nd(s,1e3,0,i.mode,!1,o);l({files:d,isLoading:!1})}catch(d){l({error:d.message,isLoading:!1})}},setFilter:s=>{l(o=>({filter:{...o.filter,...s}}))},setSort:s=>{l({sort:s}),r().fetchFiles()},setViewMode:s=>{l({viewMode:s})},toggleShowHidden:()=>{l(s=>({showHidden:!s.showHidden}))},toggleFavorite:s=>{l(o=>({favorites:o.favorites.includes(s)?o.favorites.filter(d=>d!==s):[...o.favorites,s]}))},toggleSelectionMode:()=>{l(s=>({selectionMode:!s.selectionMode,selectedIds:[],selectionActionOpen:!1}))},toggleSelection:s=>{l(o=>({selectedIds:o.selectedIds.includes(s)?o.selectedIds.filter(d=>d!==s):[...o.selectedIds,s]}))},selectAll:()=>{const s=r().getDisplayedFiles();l({selectedIds:s.map(o=>o.id)})},selectIds:(s,o="add")=>{l(i=>{if(o==="replace")return{selectedIds:[...s]};const d=new Set(i.selectedIds);return s.forEach(p=>d.add(p)),{selectedIds:Array.from(d)}})},clearSelection:()=>{l({selectedIds:[],selectionActionOpen:!1})},setSelectionActionOpen:s=>{l({selectionActionOpen:s})},setFilterModalOpen:s=>{l({filterModalOpen:s})},setOutputsViewerOpen:s=>{l({outputsViewerOpen:s})},addFavorites:s=>{l(o=>{const i=new Set(o.favorites);return s.forEach(d=>i.add(d)),{favorites:Array.from(i)}})},removeFavorites:s=>{l(o=>({favorites:o.favorites.filter(i=>!s.includes(i))}))},refresh:()=>{r().fetchFolders(),r().fetchFiles()},getDisplayedFiles:()=>{const{files:s,filter:o,favorites:i,showHidden:d,sort:p}=r();let h=[...s];if(d||(h=h.filter(g=>!g.name.startsWith("."))),o.search){const g=o.search.toLowerCase();h=h.filter(x=>x.name.toLowerCase().includes(g))}o.favoritesOnly&&(h=h.filter(g=>i.includes(g.id))),o.type!=="all"&&(h=h.filter(g=>g.type==="folder"||g.type===o.type));const m=p.mode.endsWith("-reverse")?-1:1;return p.mode.startsWith("name")?h.sort((g,x)=>g.name.localeCompare(x.name)*m):p.mode.startsWith("size")?h.sort((g,x)=>((g.size??0)-(x.size??0))*m):h.sort((g,x)=>((g.date??0)-(x.date??0))*m),h}}),{name:"outputs-storage",version:1,migrate:(l,r)=>{if(r===0){if(l.sort&&!l.sort.mode){const{field:s,order:o}=l.sort;s==="name"?l.sort={mode:o==="asc"?"name":"name-reverse"}:l.sort={mode:o==="desc"?"modified":"modified-reverse"}}l.filter&&!l.filter.type&&(l.filter.type="all")}return l},partialize:l=>({source:l.source,viewMode:l.viewMode,showHidden:l.showHidden,sort:l.sort,filter:l.filter,favorites:l.favorites})}));function G1(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:u.jsx("path",{d:"M12 11V16M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21ZM12.0498 8V8.1L11.9502 8.1002V8H12.0498Z"})})}function E0({className:l}){return u.jsx(G1,{className:l})}function q1(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M19 4H5L10.5 10.5V17L13.5 19V10.5L19 4Z"}),u.jsx("path",{d:"M2.5 9L4.5 7L6.5 9"}),u.jsx("path",{d:"M4.5 7V17"}),u.jsx("path",{d:"M2.5 15L4.5 17L6.5 15"})]})}function W1(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M6 4h9l3 3v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M9 10h6M9 14h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function F1(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M6 4h9l3 3v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M9 10h6M9 14h6M9 18h4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function $1(l){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:u.jsx("path",{d:"M4 20h16M6 16l4-4m0 0l4-4m-4 4l4 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function Y1(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M3 7h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M3 7l9 6 9-6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]})}function vr(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("circle",{cx:"12",cy:"5",r:"2",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"19",r:"2",fill:"currentColor"})]})}function Br(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{d:"M10 17l5-5-5-5v10z"})})}function Wn(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{d:"M7 10l5 5 5-5H7z"})})}function vi(l){return u.jsx("svg",{viewBox:"0 0 20 20","aria-hidden":"true",...l,children:u.jsx("g",{transform:"translate(-164 -6319)",fill:"currentColor",children:u.jsx("path",{d:"M170.673,6324.726 L170.669,6324.729 C170.266,6325.104 170.244,6325.735 170.62,6326.137 L171.577,6327.158 C171.876,6327.478 171.649,6328 171.212,6328 L165,6328 C164.447,6328 164,6328.448 164,6329 C164,6329.552 164.447,6330 165,6330 L171.197,6330 C171.637,6330 171.862,6330.527 171.558,6330.845 L170.63,6331.819 C170.248,6332.218 170.266,6332.852 170.669,6333.229 C171.068,6333.603 171.695,6333.584 172.071,6333.186 L174.76,6330.338 C175.49,6329.564 175.487,6328.354 174.753,6327.585 L172.067,6324.769 C171.692,6324.376 171.071,6324.357 170.673,6324.726 M182.222,6319 L175.777,6319 C174.8,6319 174,6319.68 174,6321.111 L174,6322.007 C174,6322.555 174.444,6323 174.993,6323 L175.006,6323 C175.555,6323 176,6322.555 176,6322.007 L176,6321.993 C176,6321.445 176.444,6321 176.993,6321 L181.006,6321 C181.555,6321 182,6321.445 182,6321.993 L182,6336.007 C182,6336.555 181.555,6337 181.006,6337 L176.993,6337 C176.444,6337 176,6336.555 176,6336.007 L176,6335.993 C176,6335.445 175.555,6335 175.006,6335 L174.993,6335 C174.444,6335 174,6335.445 174,6335.993 L174,6337.111 C174,6338.293 174.847,6339 175.777,6339 L182.222,6339 C183.204,6339 184,6338.204 184,6337.222 L184,6337.111 L184,6320.778 C184,6319.796 183.204,6319 182.222,6319"})})})}function Xd(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M18.4101 3.6512L20.5315 5.77252C21.4101 6.6512 21.4101 8.07582 20.5315 8.9545L9.54019 19.9458C9.17774 20.3082 8.70239 20.536 8.19281 20.5915L4.57509 20.9856C3.78097 21.072 3.11061 20.4017 3.1971 19.6076L3.59111 15.9898C3.64661 15.4803 3.87444 15.0049 4.23689 14.6425L15.2282 3.6512C16.1068 2.77252 17.5315 2.77252 18.4101 3.6512Z",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M15.2282 3.6512C16.1068 2.77252 17.5315 2.77252 18.4101 3.6512L20.5315 5.77252C21.4101 6.6512 21.4101 8.07582 20.5315 8.9545L18.7283 10.7576L13.425 5.45432L15.2282 3.6512Z",stroke:"currentColor",strokeWidth:"1.5"})]})}function zo(l){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:u.jsx("path",{d:"M6 6l12 12M18 6l-12 12",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})})}function Ir(l){return u.jsx("svg",{viewBox:"0 0 16 16","aria-hidden":"true",...l,children:u.jsx("path",{d:"M6.4 11.2L3.2 8l1.1-1.1 2.1 2.1 5-5L12.5 5l-6.1 6.2Z",fill:"currentColor"})})}function Q1(l){return u.jsx("svg",{viewBox:"0 0 16 16","aria-hidden":"true",...l,children:u.jsx("path",{d:"M4.2 4.2l7.6 7.6m0-7.6l-7.6 7.6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function X1(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M7 18a4 4 0 0 1 0-8 6 6 0 0 1 11.3-2.2A4.5 4.5 0 0 1 18 18H7Z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M12 10v7m0 0l-3-3m3 3l3-3",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function zr(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function ul(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24M1 1l22 22"})})}function Hl(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M3 6h18M8 6V4h8v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),u.jsx("path",{d:"M10 11v6M14 11v6"})]})}function P1(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M15 9l-6 6M9 9l6 6"})]})}function ui(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M23 4v6h-6M1 20v-6h6"}),u.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}function Z1(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:u.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"})})}function Oa(l){return u.jsx("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...l,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.3",d:"M9.18613 3.09999H6.81377M9.18613 12.9H7.55288c-3.08678 0-5.35171-2.99581-4.60305-6.08843l.3054-1.26158M14.7486 2.1721l-.5931 2.45c-.132.54533-.6065.92789-1.1508.92789h-2.2993c-.77173 0-1.33797-.74895-1.1508-1.5221l.5931-2.45c.132-.54533.6065-.9279 1.1508-.9279h2.2993c.7717 0 1.3379.74896 1.1508 1.52211Zm-8.3033 0-.59309 2.45c-.13201.54533-.60646.92789-1.15076.92789H2.4021c-.7717 0-1.33793-.74895-1.15077-1.5221l.59309-2.45c.13201-.54533.60647-.9279 1.15077-.9279h2.29935c.77169 0 1.33792.74896 1.15076 1.52211Zm8.3033 9.8-.5931 2.45c-.132.5453-.6065.9279-1.1508.9279h-2.2993c-.77173 0-1.33797-.749-1.1508-1.5221l.5931-2.45c.132-.5453.6065-.9279 1.1508-.9279h2.2993c.7717 0 1.3379.7489 1.1508 1.5221Z"})})}function T0(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...l,children:u.jsx("path",{d:"M13 20.74C12.9039 20.7541 12.8062 20.7541 12.71 20.74C12.5724 20.6823 12.4551 20.5849 12.3732 20.4602C12.2912 20.3355 12.2484 20.1892 12.25 20.04V16.7H3.00001C2.81189 16.6956 2.63208 16.6216 2.49538 16.4923C2.35868 16.363 2.27481 16.1876 2.26001 16V8.00002C2.25463 7.89856 2.26965 7.79706 2.30417 7.7015C2.3387 7.60595 2.39204 7.51829 2.46103 7.44371C2.53002 7.36913 2.61326 7.30913 2.70584 7.26727C2.79841 7.22542 2.89844 7.20255 3.00001 7.20002H12.25V4.01002C12.2498 3.86106 12.2946 3.71551 12.3784 3.59241C12.4623 3.4693 12.5813 3.37436 12.72 3.32002C12.8551 3.26039 13.0053 3.24376 13.1502 3.27238C13.2951 3.301 13.4277 3.37349 13.53 3.48002L21.53 11.48C21.6705 11.6206 21.7493 11.8113 21.7493 12.01C21.7493 12.2088 21.6705 12.3994 21.53 12.54L13.53 20.54C13.4601 20.6079 13.377 20.6608 13.2858 20.6952C13.1946 20.7296 13.0973 20.7448 13 20.74ZM3.76001 15.2H13C13.1981 15.2026 13.3874 15.2825 13.5275 15.4226C13.6676 15.5626 13.7474 15.7519 13.75 15.95V18.18L19.93 12L13.75 5.83002V8.00002C13.7477 8.19843 13.6689 8.3883 13.53 8.53002C13.3817 8.65257 13.1919 8.71343 13 8.70002H3.76001V15.2Z",fill:"currentColor"})})}function K1(l){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M10.667 2.667c1.45.008 2.235.072 2.748.585C14 3.837 14 4.78 14 6.666v4c0 1.885 0 2.828-.585 3.414-.586.585-1.529.585-3.415.585H6c-1.886 0-2.829 0-3.414-.585C2 13.494 2 12.55 2 10.666v-4c0-1.886 0-2.829.586-3.414.512-.513 1.297-.577 2.747-.585",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M5.333 2.333c0-.552.448-1 1-1h3.334c.552 0 1 .448 1 1v.667c0 .553-.448 1-1 1H6.333c-.552 0-1-.447-1-1v-.667Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"})]})}function J1(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})})}function eb(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:[u.jsx("rect",{x:"9",y:"9",width:"10",height:"12",rx:"2"}),u.jsx("path",{d:"M5 15V5a2 2 0 0 1 2-2h8"})]})}function tb(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:[u.jsx("circle",{cx:"12",cy:"12",r:"9"}),u.jsx("path",{d:"M7 12h10"})]})}function yi(l){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"none","aria-hidden":"true",...l,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})})}function Hr(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:u.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}function _0({showSlash:l=!1,...r}){return u.jsxs("svg",{viewBox:"0 0 32 32","aria-hidden":"true",overflow:"visible",...r,children:[u.jsx("path",{d:"M28 28H4a2.002 2.002 0 0 1-2-2V21h2v5h24v-5h2v5a2.002 2.002 0 0 1-2 2Z",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"21",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"16",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"11",width:"18",height:"2",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"6",width:"18",height:"2",fill:"currentColor"}),u.jsx("path",{d:"M16 -3l5 4H11l5-4Z",fill:"currentColor"}),l&&u.jsx("line",{x1:"2",y1:"30",x2:"28",y2:"4",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})]})}function nb({progress:l,radius:r=11,...s}){const o=Math.min(100,Math.max(0,l)),i=2*Math.PI*r,d=i*(1-o/100);return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...s,children:u.jsx("circle",{cx:"12",cy:"12",r,fill:"none",stroke:"rgba(34,197,94,0.9)",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:i,strokeDashoffset:d})})}function lb(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}function Pd(l){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})}function rb(l){return u.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{fillRule:"evenodd",d:"M4 10a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1z",clipRule:"evenodd"})})}function ab(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:[u.jsx("circle",{cx:"11",cy:"11",r:"7"}),u.jsx("path",{d:"M20 20l-3.5-3.5"})]})}function ob(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"3",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("circle",{cx:"9",cy:"9",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"15",cy:"15",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"15",cy:"9",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"9",cy:"15",r:"1.5",fill:"currentColor"}),u.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"})]})}function Zd(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}function L0(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{d:"M12 2L1 21h22L12 2zm0 3.5L19.5 19h-15L12 5.5zM11 10v4h2v-4h-2zm0 6v2h2v-2h-2z"})})}function bi(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:u.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}function vg(l){return u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:[u.jsx("rect",{x:"3",y:"7",width:"12",height:"10",rx:"2"}),u.jsx("path",{d:"M15 10l5-3v10l-5-3z"})]})}function To(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{d:"M19.1835 7.80516L16.2188 4.83755C14.1921 2.8089 13.1788 1.79457 12.0904 2.03468C11.0021 2.2748 10.5086 3.62155 9.5217 6.31506L8.85373 8.1381C8.59063 8.85617 8.45908 9.2152 8.22239 9.49292C8.11619 9.61754 7.99536 9.72887 7.86251 9.82451C7.56644 10.0377 7.19811 10.1392 6.46145 10.3423C4.80107 10.8 3.97088 11.0289 3.65804 11.5721C3.5228 11.8069 3.45242 12.0735 3.45413 12.3446C3.45809 12.9715 4.06698 13.581 5.28476 14.8L6.69935 16.2163L2.22345 20.6964C1.92552 20.9946 1.92552 21.4782 2.22345 21.7764C2.52138 22.0746 3.00443 22.0746 3.30236 21.7764L7.77841 17.2961L9.24441 18.7635C10.4699 19.9902 11.0827 20.6036 11.7134 20.6045C11.9792 20.6049 12.2404 20.5358 12.4713 20.4041C13.0192 20.0914 13.2493 19.2551 13.7095 17.5825C13.9119 16.8472 14.013 16.4795 14.2254 16.1835C14.3184 16.054 14.4262 15.9358 14.5468 15.8314C14.8221 15.593 15.1788 15.459 15.8922 15.191L17.7362 14.4981C20.4 13.4973 21.7319 12.9969 21.9667 11.9115C22.2014 10.826 21.1954 9.81905 19.1835 7.80516Z"})})}function Od(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{d:"M15.9894 4.9502L16.52 4.42014L15.9894 4.9502ZM19.0716 8.03562L18.541 8.56568L19.0716 8.03562ZM8.73837 19.429L8.20777 19.9591L8.73837 19.429ZM4.62169 15.3081L5.15229 14.7781L4.62169 15.3081ZM17.5669 14.9943L17.3032 14.2922L17.5669 14.9943ZM15.6498 15.7146L15.9136 16.4167H15.9136L15.6498 15.7146ZM8.3322 8.38177L7.62798 8.12375L8.3322 8.38177ZM9.02665 6.48636L9.73087 6.74438V6.74438L9.02665 6.48636ZM5.84504 10.6735L6.04438 11.3965L5.84504 10.6735ZM7.30167 10.1351L6.86346 9.52646L6.86346 9.52646L7.30167 10.1351ZM7.67582 9.79038L8.24665 10.2768H8.24665L7.67582 9.79038ZM14.251 16.3805L14.742 16.9475L14.742 16.9475L14.251 16.3805ZM13.3806 18.2012L12.6574 18.0022V18.0022L13.3806 18.2012ZM13.9169 16.7466L13.3075 16.3094L13.3075 16.3094L13.9169 16.7466ZM2.71846 12.7552L1.96848 12.76L1.96848 12.76L2.71846 12.7552ZM2.93045 11.9521L2.28053 11.5778H2.28053L2.93045 11.9521ZM11.3052 21.3431L11.3064 20.5931H11.3064L11.3052 21.3431ZM12.0933 21.1347L11.7215 20.4833L11.7215 20.4833L12.0933 21.1347ZM11.6973 2.03606L11.8588 2.76845L11.6973 2.03606ZM1.4694 21.4699C1.17666 21.763 1.1769 22.2379 1.46994 22.5306C1.76298 22.8233 2.23786 22.8231 2.5306 22.5301L1.4694 21.4699ZM7.18383 17.8721C7.47657 17.5791 7.47633 17.1042 7.18329 16.8114C6.89024 16.5187 6.41537 16.5189 6.12263 16.812L7.18383 17.8721ZM15.4588 5.48026L18.541 8.56568L19.6022 7.50556L16.52 4.42014L15.4588 5.48026ZM9.26897 18.8989L5.15229 14.7781L4.09109 15.8382L8.20777 19.9591L9.26897 18.8989ZM17.3032 14.2922L15.386 15.0125L15.9136 16.4167L17.8307 15.6964L17.3032 14.2922ZM9.03642 8.63979L9.73087 6.74438L8.32243 6.22834L7.62798 8.12375L9.03642 8.63979ZM6.04438 11.3965C6.75583 11.2003 7.29719 11.0625 7.73987 10.7438L6.86346 9.52646C6.69053 9.65097 6.46601 9.72428 5.6457 9.95044L6.04438 11.3965ZM7.62798 8.12375C7.33502 8.92332 7.24338 9.14153 7.10499 9.30391L8.24665 10.2768C8.60041 9.86175 8.7823 9.33337 9.03642 8.63979L7.62798 8.12375ZM7.73987 10.7438C7.92696 10.6091 8.09712 10.4523 8.24665 10.2768L7.10499 9.30391C7.0337 9.38757 6.9526 9.46229 6.86346 9.52646L7.73987 10.7438ZM15.386 15.0125C14.697 15.2714 14.1716 15.4571 13.76 15.8135L14.742 16.9475C14.9028 16.8082 15.1192 16.7152 15.9136 16.4167L15.386 15.0125ZM14.1037 18.4001C14.329 17.5813 14.4021 17.3569 14.5263 17.1838L13.3075 16.3094C12.9902 16.7517 12.8529 17.2919 12.6574 18.0022L14.1037 18.4001ZM13.76 15.8135C13.5903 15.9605 13.4384 16.1269 13.3075 16.3094L14.5263 17.1838C14.5887 17.0968 14.6611 17.0175 14.742 16.9475L13.76 15.8135ZM5.15229 14.7781C4.50615 14.1313 4.06799 13.691 3.78366 13.3338C3.49835 12.9753 3.46889 12.8201 3.46845 12.7505L1.96848 12.76C1.97215 13.3422 2.26127 13.8297 2.61002 14.2679C2.95976 14.7073 3.47115 15.2176 4.09109 15.8382L5.15229 14.7781ZM5.6457 9.95044C4.80048 10.1835 4.10396 10.3743 3.58296 10.5835C3.06341 10.792 2.57116 11.0732 2.28053 11.5778L3.58038 12.3264C3.615 12.2663 3.71693 12.146 4.1418 11.9755C4.56523 11.8055 5.16337 11.6394 6.04438 11.3965L5.6457 9.95044ZM3.46845 12.7505C3.46751 12.6016 3.50616 12.4553 3.58038 12.3264L2.28053 11.5778C2.07354 11.9372 1.96586 12.3452 1.96848 12.76L3.46845 12.7505ZM8.20777 19.9591C8.83164 20.5836 9.34464 21.0987 9.78647 21.4506C10.227 21.8015 10.7179 22.0922 11.3041 22.0931L11.3064 20.5931C11.2369 20.593 11.0814 20.5644 10.721 20.2773C10.3618 19.9912 9.91923 19.5499 9.26897 18.8989L8.20777 19.9591ZM12.6574 18.0022C12.4133 18.8897 12.2462 19.4924 12.0751 19.9188C11.9033 20.3467 11.7821 20.4487 11.7215 20.4833L12.465 21.7861C12.974 21.4956 13.2573 21.0004 13.4671 20.4775C13.6776 19.9532 13.8694 19.2516 14.1037 18.4001L12.6574 18.0022ZM11.3041 22.0931C11.7112 22.0937 12.1114 21.9879 12.465 21.7861L11.7215 20.4833C11.595 20.5555 11.4519 20.5933 11.3064 20.5931L11.3041 22.0931ZM18.541 8.56568C19.6045 9.63022 20.3403 10.3695 20.7917 10.9788C21.2353 11.5774 21.2863 11.8959 21.2321 12.1464L22.6982 12.4634C22.8881 11.5854 22.5382 10.8162 21.9969 10.0857C21.4635 9.36592 20.6305 8.53486 19.6022 7.50556L18.541 8.56568ZM17.8307 15.6964C19.1921 15.1849 20.294 14.773 21.0771 14.3384C21.8718 13.8973 22.5083 13.3416 22.6982 12.4634L21.2321 12.1464C21.178 12.3968 21.0001 12.6655 20.3491 13.0268C19.6865 13.3946 18.7112 13.7632 17.3032 14.2922L17.8307 15.6964ZM16.52 4.42014C15.4841 3.3832 14.6481 2.54353 13.9246 2.00638C13.1908 1.46165 12.4175 1.10912 11.5357 1.30367L11.8588 2.76845C12.1086 2.71335 12.4277 2.7633 13.0304 3.21075C13.6433 3.66579 14.3876 4.40801 15.4588 5.48026L16.52 4.42014ZM9.73087 6.74438C10.2525 5.32075 10.6161 4.33403 10.9812 3.66315C11.3402 3.00338 11.609 2.82357 11.8588 2.76845L11.5357 1.30367C10.654 1.49819 10.1005 2.14332 9.66362 2.94618C9.23278 3.73793 8.82688 4.85154 8.32243 6.22834L9.73087 6.74438ZM2.5306 22.5301L7.18383 17.8721L6.12263 16.812L1.4694 21.4699L2.5306 22.5301Z"})})}function wi(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...l,children:u.jsx("path",{d:"M9 6l6 6-6 6"})})}function A0(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...l,children:u.jsx("path",{d:"M15 19l-7-7 7-7"})})}function Ed({isBypassed:l,...r}){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",...r,children:l?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M5 12h14"}),u.jsx("path",{d:"M12 5l7 7-7 7"})]}):u.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}function sb({nodeId:l,connectionHighlightMode:r,leftLineCount:s,rightLineCount:o,...i}){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...i,children:[u.jsxs("defs",{children:[u.jsx("clipPath",{id:`node-rect-left-${l}`,children:u.jsx("rect",{x:"0",y:"0",width:"12",height:"24"})}),u.jsx("clipPath",{id:`node-rect-right-${l}`,children:u.jsx("rect",{x:"12",y:"0",width:"12",height:"24"})})]}),r==="off"?u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",className:"text-gray-500"}):u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",strokeLinejoin:"round",clipPath:`url(#node-rect-left-${l})`,className:r==="inputs"||r==="both"?"text-orange-500":"text-gray-500"}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",strokeLinejoin:"round",clipPath:`url(#node-rect-right-${l})`,className:r==="outputs"||r==="both"?"text-orange-500":"text-gray-500"})]}),u.jsxs("g",{className:r==="inputs"||r==="both"?"text-orange-500":"text-gray-500",children:[s===1&&u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),s===2&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"8.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"15.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),s>=3&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-2.743",y2:"6.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"7",y1:"12",x2:"-2.743",y2:"17.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})]}),u.jsxs("g",{className:r==="outputs"||r==="both"?"text-orange-500":"text-gray-500",children:[o===1&&u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),o===2&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"8.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"15.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),o>=3&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"26.743",y2:"6.375",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),u.jsx("line",{x1:"17",y1:"12",x2:"26.743",y2:"17.625",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})]})]})}function ib(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsxs("defs",{children:[u.jsx("clipPath",{id:"legend-trace-left",children:u.jsx("rect",{x:"0",y:"0",width:"12",height:"24"})}),u.jsx("clipPath",{id:"legend-trace-right",children:u.jsx("rect",{x:"12",y:"0",width:"12",height:"24"})})]}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",clipPath:"url(#legend-trace-left)",className:"text-gray-400"}),u.jsx("rect",{x:"7",y:"7",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.6",fill:"none",clipPath:"url(#legend-trace-right)",className:"text-orange-500"}),u.jsx("line",{x1:"7",y1:"12",x2:"-4.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",className:"text-gray-400"}),u.jsx("line",{x1:"17",y1:"12",x2:"28.25",y2:"12",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",className:"text-orange-500"})]})}function D0(l){return u.jsx("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...l,children:u.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.3",d:"m14.6685 5.7416.6425-2.57c.2028-.811-.4106-1.5967-1.2466-1.5967H2.5782a1.285 1.285 0 0 0-1.2467.9733l-.6425 2.57c-.2027.8111.4107 1.5968 1.2467 1.5968h11.4861a1.285 1.285 0 0 0 1.2467-.9734Zm0 7.7102.6425-2.5701c.2028-.811-.4106-1.5967-1.2466-1.5967h-5.061a1.285 1.285 0 0 0-1.2467.9734l-.6425 2.5701c-.2028.811.4106 1.5966 1.2466 1.5966h5.061a1.285 1.285 0 0 0 1.2467-.9733Zm-10.2802 0 .6425-2.5701c.2027-.811-.4107-1.5967-1.2467-1.5967H2.5782a1.285 1.285 0 0 0-1.2467.9734L.689 12.8285c-.2027.811.4107 1.5966 1.2467 1.5966h1.206a1.285 1.285 0 0 0 1.2466-.9733Z"})})}function ub(l){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:u.jsx("path",{d:"M12 3v10m0 0l-4-4m4 4l4-4M5 19h14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function cb(l){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M10.667 2.667c1.45.008 2.235.072 2.748.585C14 3.837 14 4.78 14 6.666v4c0 1.885 0 2.828-.585 3.414-.586.585-1.529.585-3.415.585H6c-1.886 0-2.829 0-3.414-.585C2 13.494 2 12.55 2 10.666v-4c0-1.886 0-2.829.586-3.414.512-.513 1.297-.577 2.747-.585",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M5.333 2.333c0-.552.448-1 1-1h3.334c.552 0 1 .448 1 1v.667c0 .553-.448 1-1 1H6.333c-.552 0-1-.447-1-1v-.667Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),u.jsx("path",{d:"M8 6.667v4.666m0 0L5.667 9m2.333 2.333L10.333 9",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function _o(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M3 7a2 2 0 0 1 2-2h4l2 2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("path",{d:"M3 9h18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function db(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M5 4h12l3 3v13H4V5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),u.jsx("rect",{x:"7",y:"4",width:"8",height:"4",fill:"currentColor"}),u.jsx("rect",{x:"7",y:"13",width:"10",height:"6",rx:"1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]})}function fb(l){return u.jsxs("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...l,children:[u.jsx("path",{d:"M12.667 14H3.333C2.597 14 2 13.403 2 12.667V3.333C2 2.597 2.597 2 3.333 2h7.334L14 5.333v7.334c0 .736-.597 1.333-1.333 1.333Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M11.333 14v-4H4.667v4M4.667 2v3.333h5.333",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function pb(l){return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:[u.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}),u.jsx("path",{d:"M12 2v3M12 19v3M4.22 4.22l2.12 2.12M17.66 17.66l2.12 2.12M2 12h3M19 12h3M4.22 19.78l2.12-2.12M17.66 6.34l2.12-2.12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"})]})}function mb(l){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:u.jsx("path",{d:"M21 14.5A9 9 0 0 1 9.5 3a7 7 0 1 0 11.5 11.5Z",fill:"currentColor"})})}function hb(l){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",fill:"currentColor",...l,children:u.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"})})}function yg(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}function gb(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function xb(l){return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",...l,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function vb(l){return u.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...l,children:u.jsx("path",{d:"M8 4h8M8 20h8M9 6h6l-1 4 1 4H9l1-4-1-4Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function yb({progress:l,radius:r=10,trackColor:s="#e5e7eb",progressColor:o="#3b82f6",...i}){const d=Math.min(100,Math.max(0,l)),p=2*Math.PI*r,h=p*(1-d/100);return u.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...i,children:[u.jsx("circle",{cx:"12",cy:"12",r,fill:"none",stroke:s,strokeWidth:"2"}),u.jsx("circle",{cx:"12",cy:"12",r,fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeDasharray:p,strokeDashoffset:h})]})}var ll=g0();function bb({open:l,onClose:r,side:s,title:o,children:i}){const d=b.useRef(null);return b.useEffect(()=>{if(!l)return;const p=h=>{h.key==="Escape"&&r()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[l,r]),b.useEffect(()=>(l?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[l]),l?ll.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[2300]",children:[u.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:r}),u.jsxs("div",{ref:d,className:`
          absolute top-0 bottom-0 w-[85%] max-w-sm bg-white shadow-xl
          flex flex-col overflow-hidden
          ${s==="left"?"left-0 animate-slide-in-left":"right-0 animate-slide-in-right"}
        `,style:{animation:`${s==="left"?"slideInLeft":"slideInRight"} 0.2s ease-out`},children:[o&&u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:o}),u.jsx("button",{onClick:r,className:`w-10 h-10 flex items-center justify-center rounded-full
                         text-gray-500 hover:bg-gray-100 text-2xl`,children:""})]}),u.jsx("div",{className:"flex-1 overflow-auto p-4 overscroll-contain scroll-container",children:i})]}),u.jsx("style",{children:`
        @keyframes slideInLeft {
          from { transform: translateX(-100%); }
          to { transform: translateX(0); }
        }
        @keyframes slideInRight {
          from { transform: translateX(100%); }
          to { transform: translateX(0); }
        }
      `})]}),document.body):null}function Bo({title:l,onBack:r}){return u.jsxs("button",{onClick:r,className:"w-full flex items-center gap-2 text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:[u.jsx(A0,{className:"w-5 h-5 text-gray-400"}),u.jsx("span",{children:l})]})}function wb({onBack:l}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Bo,{title:"Icon Legend",onBack:l}),u.jsxs("div",{className:"space-y-3 overflow-y-auto flex-1 pb-4",children:[u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-500 text-white rounded-lg font-bold text-xs shadow-sm",children:"Run"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Run"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Execute current workflow"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-white border border-gray-200 rounded-lg text-gray-700 shadow-sm overflow-hidden",children:u.jsx(_0,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Queue / Follow"}),u.jsx("p",{className:"text-xs text-gray-500",children:"View queue & follow execution"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-yellow-500 text-white rounded-lg shadow-sm",children:u.jsx(To,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Pinned Widget"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Quick access to pinned parameter"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full border border-gray-200 text-gray-700 font-bold",children:""}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Input"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Node input connection point"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full border border-gray-200 text-gray-700 font-bold",children:""}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Output"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Node output connection point"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(ib,{className:"w-6 h-6 overflow-visible"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Trace Connections"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Highlight connected nodes"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-500",children:u.jsx(Wn,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Fold / Unfold"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Collapse or expand node card"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(Zd,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Bypass"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Skip node execution"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(ul,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Hide"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Hide node from view"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(zr,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Show"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Make node visible again"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white border border-gray-100 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center text-gray-700",children:u.jsx(Od,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Pin widget"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Pin widget to bottom bar"})]})]})]})]})}function Io({error:l,onDismiss:r}){return l?u.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[l,u.jsx("button",{onClick:r,className:"ml-2 text-red-500 font-medium",children:"Dismiss"})]}):null}function Sb({error:l,workflow:r,currentFilename:s,isDirty:o,loading:i,theme:d,menuSectionsOpen:p,fileInputRef:h,loadSectionRef:m,saveSectionRef:g,appearanceSectionRef:x,infoSectionRef:y,onDismissError:N,onFileChange:k,onLoadFromFile:S,onToggleSection:w,onOpenUserWorkflows:M,onOpenTemplates:j,onOpenPasteJson:O,onSave:R,onOpenSaveAs:z,onToggleTheme:T,onOpenLegend:D}){return u.jsxs(u.Fragment,{children:[u.jsx("input",{ref:h,type:"file",accept:".json",onChange:k,className:"hidden"}),u.jsx(Io,{error:l,onDismiss:N}),u.jsxs("section",{ref:m,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>w("load"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.load,children:[u.jsx("span",{children:"Load Workflow"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.load?"rotate-0":"-rotate-90"}`})]}),p.load&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("button",{onClick:M,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(Oa,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"My Workflows"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:j,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(D0,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Templates"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:O,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(cb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Paste JSON"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("button",{onClick:S,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(_o,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"From Device"})]})]})]}),u.jsxs("section",{ref:g,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>w("save"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.save,children:[u.jsx("span",{children:"Save Workflow"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.save?"rotate-0":"-rotate-90"}`})]}),p.save&&u.jsxs("div",{className:"space-y-2",children:[s&&u.jsxs("button",{onClick:R,disabled:!r||!o||i,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                           rounded-xl text-left hover:bg-gray-50 min-h-[56px]
                           disabled:opacity-50 disabled:cursor-not-allowed`,children:[u.jsx(db,{className:"w-6 h-6 text-gray-600 shrink-0"}),u.jsxs("span",{className:"font-medium text-gray-900 truncate",children:["Save ",s.replace(".json","")]})]}),u.jsxs("button",{onClick:z,disabled:!r,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(fb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Save As..."}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]})]})]}),u.jsx("div",{className:"border-t border-gray-200 mb-6"}),u.jsxs("section",{ref:x,className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:()=>w("appearance"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.appearance,children:[u.jsx("span",{children:"Appearance"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.appearance?"rotate-0":"-rotate-90"}`})]}),p.appearance&&u.jsx("div",{className:"space-y-2",children:u.jsxs("button",{onClick:T,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[d==="dark"?u.jsx(mb,{className:"w-6 h-6 text-gray-600"}):u.jsx(pb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:d==="dark"?"Dark mode":"Light mode"})]})})]}),u.jsxs("section",{ref:y,className:"mt-auto pt-6 border-t border-gray-200",children:[u.jsxs("button",{type:"button",onClick:()=>w("info"),className:"w-full flex items-center justify-between text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3","aria-expanded":p.info,children:[u.jsx("span",{children:"About"}),u.jsx(Wn,{className:`w-5 h-5 text-gray-400 transition-transform ${p.info?"rotate-0":"-rotate-90"}`})]}),p.info&&u.jsxs("div",{className:"space-y-2 pb-4",children:[u.jsxs("a",{href:"https://github.com/cosmicbuffalo/comfyui-mobile-frontend",target:"_blank",rel:"noopener noreferrer",className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(hb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Open in GitHub"}),u.jsx(yg,{className:"w-4 h-4 ml-auto text-gray-400"})]}),u.jsxs("button",{onClick:D,className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(gb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Icon Legend"}),u.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),u.jsxs("a",{href:"https://github.com/cosmicbuffalo/comfyui-mobile-frontend/blob/main/USER_GUIDE.md",target:"_blank",rel:"noopener noreferrer",className:`w-full flex items-center gap-3 p-4 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(xb,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"User Manual"}),u.jsx(yg,{className:"w-4 h-4 ml-auto text-gray-400"})]})]})]})]})}async function Nb(l){if(navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(l);return}catch{}const r=document.createElement("textarea");r.value=l,r.readOnly=!0,r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.opacity="0",document.body.appendChild(r),r.focus(),r.select(),r.setSelectionRange(0,r.value.length),document.execCommand("copy"),document.body.removeChild(r)}function bg(l,r,s){const o=l.current;if(o){if(o.focus(),r)o.setSelectionRange(r.start,r.end);else if(s!==void 0){const i=s.length;o.setSelectionRange(i,i)}}}function jb(l){const r=l.current;if(!r)return;const o=r.closest('[data-textarea-root="true"]')?.querySelector('[data-textarea-header="true"]');o?o.scrollIntoView({block:"nearest",behavior:"auto"}):r.scrollIntoView({block:"nearest",behavior:"auto"})}function Co({value:l,onChange:r,textareaRef:s,className:o=""}){const[i,d]=b.useState(!1),p=b.useRef(null),h=b.useRef(null),m=()=>{d(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>d(!1),900)},g=N=>{N.preventDefault()},x=async()=>{const N=s.current;N&&(h.current={start:N.selectionStart??0,end:N.selectionEnd??0});const k=s.current?.value??l;await Nb(k),requestAnimationFrame(()=>bg(s,h.current||void 0)),m()},y=()=>{r(""),requestAnimationFrame(()=>{bg(s,void 0,""),jb(s)})};return u.jsxs("div",{className:`flex items-center text-[11px] text-gray-500 ${o}`,children:[u.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-1 py-0.5 text-gray-600",onMouseDown:g,onClick:x,"aria-label":"Copy to clipboard",children:[i?u.jsx(Ir,{className:"w-3.5 h-3.5 text-green-500"}):u.jsx(eb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Copy"})]}),u.jsx("span",{className:"text-gray-500/50",children:"|"}),u.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 px-1 py-0.5 text-red-600",onMouseDown:g,onClick:y,"aria-label":"Clear text",children:[u.jsx(tb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Clear"})]})]})}function Cb({error:l,pastedJson:r,pasteTextareaRef:s,onBack:o,onDismissError:i,onChangeJson:d,onLoad:p}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Bo,{title:"Paste JSON",onBack:o}),u.jsx(Io,{error:l,onDismiss:i}),u.jsxs("div",{className:"flex-1 flex flex-col space-y-4 overflow-hidden",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Paste your workflow JSON below."}),u.jsxs("div",{className:"group","data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1","data-textarea-header":"true",children:[u.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Workflow JSON"}),u.jsx(Co,{value:r,onChange:d,textareaRef:s,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),u.jsx("textarea",{ref:s,value:r,onChange:h=>d(h.target.value),placeholder:'{"last_node_id": ...}',className:"w-full flex-1 p-3 border border-gray-300 rounded-lg font-mono text-xs resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:o,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 min-h-[48px]",children:"Cancel"}),u.jsx("button",{onClick:p,disabled:!r.trim(),className:`flex-1 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600
                       disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px]`,children:"Load"})]})]})]})}function kb({error:l,loading:r,workflow:s,saveFilenameInput:o,onBack:i,onDismissError:d,onSaveFilenameChange:p,onSaveAs:h,onDownload:m}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Bo,{title:"Save Workflow",onBack:i}),u.jsx(Io,{error:l,onDismiss:d}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-xl",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Save to ComfyUI server:"}),u.jsx("input",{type:"text",value:o,onChange:g=>p(g.target.value),placeholder:"Enter filename (e.g., my_workflow.json)",className:"w-full p-3 border border-gray-300 rounded-lg mb-3"}),u.jsx("button",{onClick:h,disabled:!s||!o.trim()||r,className:`w-full py-3 bg-blue-500 text-white rounded-lg font-medium
                       disabled:opacity-50 disabled:cursor-not-allowed min-h-[48px]`,children:r?"Saving...":"Save As"})]}),u.jsxs("button",{onClick:m,disabled:!s,className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                     rounded-xl text-left hover:bg-gray-50 min-h-[56px]
                     disabled:opacity-50 disabled:cursor-not-allowed`,children:[u.jsx(ub,{className:"w-6 h-6 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900",children:"Download to Device"})]})]})]})}const Mb={sm:"w-4 h-4 border-2",md:"w-6 h-6 border-2",lg:"w-10 h-10 border-4"},Ob={blue:"border-blue-500 border-t-transparent",gray:"border-gray-200 border-t-gray-500"};function Kd({size:l="md",color:r="blue",className:s=""}){return u.jsx("div",{className:`animate-spin rounded-full ${Mb[l]} ${Ob[r]} ${s}`})}function Eb({error:l,loading:r,templates:s,onBack:o,onDismissError:i,onLoadTemplate:d}){const p=Object.entries(s);return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Bo,{title:"Templates",onBack:o}),u.jsx(Io,{error:l,onDismiss:i}),r?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx(Kd,{})}):p.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No templates available"}):u.jsx("div",{className:"space-y-4 overflow-y-auto flex-1",children:p.map(([h,m])=>u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-2",children:h}),u.jsx("div",{className:"space-y-2",children:m.map(g=>u.jsxs("button",{onClick:()=>d(h,g),className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                               rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(D0,{className:"w-5 h-5 text-gray-600"}),u.jsx("span",{className:"font-medium text-gray-900 truncate",children:g.replace(/\.json$/,"")})]},g))})]},h))})]})}function Tb({error:l,loading:r,userWorkflows:s,onBack:o,onDismissError:i,onLoadWorkflow:d}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(Bo,{title:"My Workflows",onBack:o}),u.jsx(Io,{error:l,onDismiss:i}),r?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx(Kd,{})}):s.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No saved workflows yet"}):u.jsx("div",{className:"space-y-2 overflow-y-auto flex-1",children:s.map(p=>u.jsxs("button",{onClick:()=>d(p.name),className:`w-full flex items-center gap-3 px-4 py-3 bg-white border border-gray-200
                         rounded-xl text-left hover:bg-gray-50 min-h-[56px]`,children:[u.jsx(Oa,{className:"w-5 h-5 text-gray-600"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:p.name.replace(/\.json$/,"")}),p.modified&&u.jsx("p",{className:"text-xs text-gray-500",children:new Date(p.modified*1e3).toLocaleDateString()})]})]},p.path))})]})}const Si=rl()(Wl(l=>({theme:"dark",setTheme:r=>{l({theme:r})},toggleTheme:()=>{l(r=>({theme:r.theme==="dark"?"light":"dark"}))}}),{name:"theme-storage",storage:ql(()=>localStorage)}));function _b({open:l,onClose:r}){const s=J(ne=>ne.loadWorkflow),o=J(ne=>ne.workflow),i=J(ne=>ne.currentFilename),d=J(ne=>ne.originalWorkflow),p=J(ne=>ne.setSavedWorkflow),h=Si(ne=>ne.theme),m=Si(ne=>ne.toggleTheme),g=b.useRef(null),x=!!(o&&d&&JSON.stringify(o)!==JSON.stringify(d)),y=b.useRef(null),[N,k]=b.useState(null),[S,w]=b.useState("menu"),[M,j]=b.useState([]),[O,R]=b.useState({}),[z,T]=b.useState(!1),[D,A]=b.useState(i||""),[B,U]=b.useState(""),[G,q]=b.useState({load:!0,save:!0,appearance:!0,info:!0}),te=b.useRef(null),ge=b.useRef(null),le=b.useRef(null),ie=b.useRef(null),L=b.useRef(G);b.useEffect(()=>{const ne=L.current,ve=G;!ne.load&&ve.load?setTimeout(()=>te.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!ne.save&&ve.save?setTimeout(()=>ge.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!ne.appearance&&ve.appearance?setTimeout(()=>le.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100):!ne.info&&ve.info&&setTimeout(()=>ie.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100),L.current=ve},[G]),b.useEffect(()=>{l||(w("menu"),k(null),A(i||""),U(""),q({load:!0,save:!0,appearance:!0,info:!0}))},[l,i]),b.useEffect(()=>{S==="userWorkflows"&&(T(!0),u1().then(j).catch(ne=>k(ne.message)).finally(()=>T(!1)))},[S]),b.useEffect(()=>{S==="templates"&&(T(!0),d1().then(R).catch(ne=>k(ne.message)).finally(()=>T(!1)))},[S]);const Q=ne=>{"vibrate"in navigator&&navigator.vibrate(ne)},se=()=>{y.current?.click()},xe=async ne=>{const ve=ne.target.files?.[0];if(ve){try{const Te=await ve.text(),We=JSON.parse(Te);if(!We.nodes||!Array.isArray(We.nodes))throw new Error("Invalid workflow: missing nodes array");s(We,ve.name),k(null),r(),Q(10)}catch(Te){k(Te instanceof Error?Te.message:"Failed to load workflow")}y.current&&(y.current.value="")}},me=async ne=>{try{T(!0);const ve=await S0(ne);s(ve,ne,{fresh:!0,source:{type:"user",filename:ne}}),k(null),r(),Q(10)}catch(ve){k(ve instanceof Error?ve.message:"Failed to load workflow")}finally{T(!1)}},_=async(ne,ve)=>{try{T(!0);const Te=await N0(ne,ve);s(Te,`${ne}/${ve}`,{fresh:!0,source:{type:"template",moduleName:ne,templateName:ve}}),k(null),r(),Q(10)}catch(Te){k(Te instanceof Error?Te.message:"Failed to load template")}finally{T(!1)}},I=async ne=>{if(!o)return;const ve=ne.endsWith(".json")?ne:`${ne}.json`;try{T(!0),await c1(ve,o),p(o,ve),k(null),r(),Q(10)}catch(Te){k(Te instanceof Error?Te.message:"Failed to save workflow")}finally{T(!1)}},E=()=>{i?I(i):w("save")},W=()=>{A(i||""),w("save")},Y=()=>{D.trim()?I(D):k("Please enter a filename.")},ce=()=>{if(!o)return;const ne=JSON.stringify(o,null,2),ve=new Blob([ne],{type:"application/json"}),Te=URL.createObjectURL(ve),We=document.createElement("a");We.href=Te,We.download=`${i||`workflow-${Date.now()}`}.json`,We.click(),URL.revokeObjectURL(Te),Q(10),r()},ee=()=>{try{const ne=JSON.parse(B);if(!ne.nodes||!Array.isArray(ne.nodes))throw new Error("Invalid workflow: missing nodes array");const ve=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});s(ne,`Pasted workflow (${ve})`),k(null),r(),Q(10),U("")}catch(ne){k(ne instanceof Error?ne.message:"Failed to parse JSON")}};return u.jsxs(bb,{open:l,onClose:r,side:"left",title:"ComfyUI Mobile",children:[S==="menu"&&u.jsx(Sb,{error:N,workflow:o,currentFilename:i,isDirty:x,loading:z,theme:h,menuSectionsOpen:G,fileInputRef:y,loadSectionRef:te,saveSectionRef:ge,appearanceSectionRef:le,infoSectionRef:ie,onDismissError:()=>k(null),onFileChange:xe,onLoadFromFile:se,onToggleSection:ne=>q(ve=>({...ve,[ne]:!ve[ne]})),onOpenUserWorkflows:()=>w("userWorkflows"),onOpenTemplates:()=>w("templates"),onOpenPasteJson:()=>w("pasteJson"),onSave:E,onOpenSaveAs:W,onToggleTheme:m,onOpenLegend:()=>w("aboutLegend")}),S==="userWorkflows"&&u.jsx(Tb,{error:N,loading:z,userWorkflows:M,onBack:()=>w("menu"),onDismissError:()=>k(null),onLoadWorkflow:me}),S==="templates"&&u.jsx(Eb,{error:N,loading:z,templates:O,onBack:()=>w("menu"),onDismissError:()=>k(null),onLoadTemplate:_}),S==="save"&&u.jsx(kb,{error:N,loading:z,workflow:o,saveFilenameInput:D,onBack:()=>w("menu"),onDismissError:()=>k(null),onSaveFilenameChange:A,onSaveAs:Y,onDownload:ce}),S==="pasteJson"&&u.jsx(Cb,{error:N,pastedJson:B,pasteTextareaRef:g,onBack:()=>w("menu"),onDismissError:()=>k(null),onChangeJson:U,onLoad:ee}),S==="aboutLegend"&&u.jsx(wb,{onBack:()=>w("menu")})]})}function Ri({open:l,onDismiss:r,triggerRef:s,contentRef:o,closeOnScroll:i=!0}){b.useEffect(()=>{if(!l)return;const d=h=>{const m=h.target;s.current&&m&&s.current.contains(m)||o.current&&m&&o.current.contains(m)||r()},p=()=>{i&&r()};return document.addEventListener("mousedown",d),i&&document.addEventListener("scroll",p,!0),()=>{document.removeEventListener("mousedown",d),i&&document.removeEventListener("scroll",p,!0)}},[l,r,s,o,i])}function Lb({open:l,onClose:r,onConfirm:s}){if(!l)return null;const o=async()=>{await s(),r()};return u.jsx("div",{id:"clear-history-confirm-overlay",className:"fixed inset-0 z-[1500] bg-black/50 flex items-center justify-center p-4",onClick:r,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"clear-history-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:i=>i.stopPropagation(),children:[u.jsx("div",{id:"clear-history-title",className:"text-gray-900 text-base font-semibold",children:"Clear history?"}),u.jsx("div",{id:"clear-history-description",className:"text-gray-600 text-sm mt-1",children:"This will permanently remove all completed generations from history. Generated files will still be present in your server's output folder."}),u.jsxs("div",{id:"clear-history-actions",className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:r,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:o,children:"Clear history"})]})]})})}function Ab({open:l,buttonRef:r,menuRef:s,onToggle:o,onClose:i,onGoToWorkflow:d,onOpenClearHistoryConfirm:p}){const h=lt(I=>I.setQueueItemExpanded),m=lt(I=>I.queueItemExpanded),g=lt(I=>I.showQueueMetadata),x=lt(I=>I.toggleShowQueueMetadata),y=lt(I=>I.previewVisibility),N=lt(I=>I.setPreviewVisibility),k=lt(I=>I.previewVisibilityDefault),S=lt(I=>I.setPreviewVisibilityDefault),w=lt(I=>I.pending),M=lt(I=>I.running),j=lt(I=>I.clearQueue),O=Ln(I=>I.history),R=Ln(I=>I.clearEmptyItems),z=w.length>0,T=O.length>0,D=O.some(I=>I.outputs.images.length===0),A=w.length+M.length+O.length>0,B=b.useMemo(()=>{const I=new Set;return w.forEach(E=>I.add(E.prompt_id)),M.forEach(E=>I.add(E.prompt_id)),O.forEach(E=>{E.prompt_id&&I.add(String(E.prompt_id))}),Array.from(I)},[w,M,O]),U=b.useMemo(()=>B.some(I=>m[I]===!1),[B,m]),G=b.useMemo(()=>B.some(I=>m[I]!==!1),[B,m]),q=b.useMemo(()=>{const I=new Set;return O.forEach(E=>{(E.outputs?.images??[]).some(ce=>ce.type!=="output")&&E.prompt_id&&I.add(String(E.prompt_id))}),Array.from(I)},[O]),te=A||q.length>0||k,ge=q.length>0?q.every(I=>y[I]??k):k,le=()=>{d(),i()},ie=async()=>{await j(),i()},L=()=>{B.forEach(I=>h(I,!1)),i()},Q=()=>{B.forEach(I=>h(I,!0)),i()},se=()=>{x(),i()},xe=()=>{const I=!ge;S(I),q.forEach(E=>N(E,I)),i()},me=async()=>{await R(),i()},_=()=>{i(),p()};return u.jsxs("div",{id:"queue-menu-container",className:"relative",children:[u.jsx("button",{ref:r,onClick:o,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Queue options",children:u.jsx(vr,{className:"w-5 h-5 -rotate-90"})}),l?u.jsxs("div",{id:"queue-options-dropdown",ref:s,className:"absolute right-0 top-11 z-50 w-48 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:le,children:[u.jsx(vi,{className:"w-3 h-3 text-gray-500 rotate-180"}),"Go to workflow"]}),z&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ie,children:[u.jsx(P1,{className:"w-4 h-4 text-gray-500"}),"Cancel all pending"]}),G&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:L,children:[u.jsx(Br,{className:"w-7 h-7 -ml-1 text-gray-500"}),"Fold all"]}),U&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Q,children:[u.jsx(Wn,{className:"w-7 h-7 -ml-1 text-gray-500"}),"Unfold all"]}),T&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:se,children:[u.jsx(E0,{className:"w-4 h-4 text-gray-500"}),g?"Hide metadata":"Show metadata"]}),te&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:xe,children:[ge?u.jsx(ul,{className:"w-4 h-4 text-gray-500"}):u.jsx(zr,{className:"w-4 h-4 text-gray-500"}),ge?"Hide previews":"Show previews"]}),D&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-gray-600",onClick:me,children:[u.jsx(Hl,{className:"w-4 h-4"}),"Clear empty items"]}),T&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:_,children:[u.jsx(Hl,{className:"w-4 h-4"}),"Clear history"]})]}):null]})}function Db(){const[l,r]=b.useState(!1),[s,o]=b.useState(!1),i=An(m=>m.setCurrentPanel),d=Ln(m=>m.clearHistory),p=b.useRef(null),h=b.useRef(null);return Ri({open:l,onDismiss:()=>r(!1),triggerRef:p,contentRef:h,closeOnScroll:!1}),u.jsxs(u.Fragment,{children:[u.jsx(Ab,{open:l,buttonRef:p,menuRef:h,onToggle:()=>r(m=>!m),onClose:()=>r(!1),onGoToWorkflow:()=>i("workflow"),onOpenClearHistoryConfirm:()=>o(!0)}),u.jsx(Lb,{open:s,onClose:()=>o(!1),onConfirm:d})]})}function Rb({open:l,buttonRef:r,menuRef:s,onToggle:o,onClose:i,onGoToWorkflow:d}){const p=_t(O=>O.source),h=_t(O=>O.viewMode),m=_t(O=>O.showHidden),g=_t(O=>O.setSource),x=_t(O=>O.setViewMode),y=_t(O=>O.toggleShowHidden),N=_t(O=>O.toggleSelectionMode),k=()=>{g(p==="output"?"input":"output"),i()},S=()=>{d(),i()},w=()=>{N(),i()},M=()=>{y(),i()},j=()=>{x(h==="grid"?"list":"grid"),i()};return u.jsxs("div",{id:"outputs-topbar-actions",className:"relative flex items-center gap-1",children:[u.jsx("button",{ref:r,onClick:o,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Outputs options",children:u.jsx(vr,{className:"w-5 h-5 -rotate-90"})}),l?u.jsxs("div",{id:"outputs-options-dropdown",ref:s,className:"absolute right-0 top-11 z-50 w-48 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:k,children:[u.jsx(ui,{className:"w-4 h-4 text-gray-500"}),p==="output"?"Switch to inputs":"Switch to outputs"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:S,children:[u.jsx(vi,{className:"w-3 h-3 text-gray-500"}),"Go to workflow"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:w,children:[u.jsx(Ir,{className:"w-4 h-4 text-gray-500"}),"Select"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:M,children:[m?u.jsx(ul,{className:"w-4 h-4 text-gray-500"}):u.jsx(zr,{className:"w-4 h-4 text-gray-500"}),m?"Hide hidden files":"Show hidden files"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:j,children:[h==="grid"?u.jsx(F1,{className:"w-4 h-4 text-gray-500"}):u.jsx(ob,{className:"w-4 h-4 text-gray-500"}),h==="grid"?"List view":"Grid view"]})]}):null]})}function zb(){const[l,r]=b.useState(!1),s=An(d=>d.setCurrentPanel),o=b.useRef(null),i=b.useRef(null);return Ri({open:l,onDismiss:()=>r(!1),triggerRef:o,contentRef:i,closeOnScroll:!1}),u.jsx(Rb,{open:l,buttonRef:o,menuRef:i,onToggle:()=>r(d=>!d),onClose:()=>r(!1),onGoToWorkflow:()=>s("workflow")})}function Bb({action:l,onCancel:r,onContinue:s}){return l?u.jsx("div",{id:"dirty-confirm-overlay",className:"fixed inset-0 z-[1500] bg-black/50 flex items-center justify-center p-4",onClick:r,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"dirty-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:o=>o.stopPropagation(),children:[u.jsx("div",{id:"dirty-confirm-title",className:"text-gray-900 text-base font-semibold",children:"Unsaved changes"}),u.jsx("div",{id:"dirty-confirm-description",className:"text-gray-600 text-sm mt-1",children:"You have unsaved changes in the current workflow. Continue without saving?"}),u.jsxs("div",{id:"dirty-confirm-actions",className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:r,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:()=>s(l),children:"Continue"})]})]})}):null}const Ib=5;function Hb(l){const r={};for(const s of l)r[s.id]={mode:s.mode,flags:s.flags?{collapsed:!!s.flags.collapsed}:void 0,widgets_values:s.widgets_values};return r}function Vb(l,r,s,o,i,d){return{nodes:Hb(l.nodes),seedModes:{...r},collapsedGroups:{...s},hiddenGroups:{...o},collapsedSubgraphs:{...i},hiddenSubgraphs:{...d}}}function wg(l,r){if(!l)return[];if(!r.length)return[];const s=new Set(l.nodes.map(o=>o.id));return r.filter(o=>s.has(o))}function Sg(l,r){if(l===r)return!0;if(l.length!==r.length)return!1;for(let s=0;s<l.length;s+=1)if(l[s]!==r[s])return!1;return!0}const bn=rl()(Wl((l,r)=>({bookmarkedNodeIds:[],bookmarkBarSide:"right",bookmarkBarTop:null,bookmarkRepositioningActive:!1,toggleNodeBookmark:s=>{const{bookmarkedNodeIds:o}=r(),{currentWorkflowKey:i,savedWorkflowStates:d,workflow:p,collapsedGroups:h,hiddenGroups:m,collapsedSubgraphs:g,hiddenSubgraphs:x}=J.getState(),y=jn.getState().seedModes,k=o.includes(s)?o.filter(S=>S!==s):o.length>=Ib?o:[...o,s];if(k!==o){if(i){let w=d[i];!w&&p&&(w=Vb(p,y,h,m,g,x)),w&&J.setState({savedWorkflowStates:{...d,[i]:{...w,bookmarkedNodeIds:[...k]}}})}l({bookmarkedNodeIds:k})}},clearNodeBookmarks:()=>{const{currentWorkflowKey:s,savedWorkflowStates:o}=J.getState();if(s&&o[s]){const i=o[s];J.setState({savedWorkflowStates:{...o,[s]:{...i,bookmarkedNodeIds:[]}}})}l({bookmarkedNodeIds:[]})},setBookmarkBarPosition:s=>{l(o=>({bookmarkBarSide:s.side??o.bookmarkBarSide,bookmarkBarTop:s.top??o.bookmarkBarTop}))},setBookmarkRepositioningActive:s=>{l({bookmarkRepositioningActive:s})}}),{name:"bookmark-bar-storage",storage:ql(()=>localStorage),partialize:l=>({bookmarkBarSide:l.bookmarkBarSide,bookmarkBarTop:l.bookmarkBarTop})}));function R0(){const{workflow:l,currentWorkflowKey:r,savedWorkflowStates:s}=J.getState(),{bookmarkedNodeIds:o}=bn.getState();if(!l){o.length>0&&bn.setState({bookmarkedNodeIds:[]});return}if(!r){const h=wg(l,o);Sg(o,h)||bn.setState({bookmarkedNodeIds:h});return}const d=s[r]?.bookmarkedNodeIds??[],p=wg(l,d);Sg(o,p)||bn.setState({bookmarkedNodeIds:p})}J.subscribe(()=>{R0()});R0();function Ub({open:l,buttonRef:r,menuRef:s,onToggle:o,onClose:i,onGoToQueue:d,onGoToOutputs:p,onHandleDirtyAction:h}){const m=J(re=>re.workflow),g=J(re=>re.nodeTypes),x=J(re=>re.setNodeFold),y=J(re=>re.setGroupCollapsed),N=J(re=>re.setSubgraphCollapsed),k=J(re=>re.setNodeHidden),S=J(re=>re.showAllHiddenNodes),w=J(re=>re.manuallyHiddenNodes),M=J(re=>re.hiddenGroups),j=J(re=>re.hiddenSubgraphs),O=bn(re=>re.bookmarkedNodeIds),R=bn(re=>re.clearNodeBookmarks),z=J(re=>re.collapsedGroups),T=J(re=>re.collapsedSubgraphs),D=J(re=>re.workflowSource),A=J(re=>re.loadWorkflow),B=J(re=>re.searchOpen),U=J(re=>re.setSearchOpen),G=J(re=>re.setSearchQuery),q=J(re=>re.connectionButtonsVisible),te=J(re=>re.toggleConnectionButtonsVisible),ge=Ln(re=>re.history),le=!!m,ie=b.useMemo(()=>m?.nodes.map(re=>re.id)??[],[m]),L=b.useMemo(()=>{if(!m)return[];const re=m.groups?.map(Xe=>Xe.id)??[],rt=m.definitions?.subgraphs?.flatMap(Xe=>Xe.groups?.map(gt=>gt.id)??[])??[];return[...re,...rt]},[m]),Q=b.useMemo(()=>m?.definitions?.subgraphs?.map(re=>re.id)??[],[m]),se=b.useMemo(()=>m?.nodes.filter(re=>re.mode===4).map(re=>re.id)??[],[m]),xe=b.useMemo(()=>!m||!g?[]:m.nodes.filter(re=>{if(re.type==="Fast Groups Bypasser (rgthree)")return!1;const rt=Yd(g,re).filter(gt=>!gt.connected),Xe=Qd(g,re).filter(gt=>!gt.connected);return rt.length===0&&Xe.length===0}).map(re=>re.id),[m,g]),me=se.length,_=xe.length,I=b.useMemo(()=>Object.values(w).filter(Boolean).length,[w]),E=b.useMemo(()=>se.filter(re=>w[re]).length,[se,w]),W=b.useMemo(()=>xe.filter(re=>w[re]).length,[xe,w]),Y=b.useMemo(()=>m?m.nodes.filter(re=>!w[re.id]):[],[m,w]),ce=b.useMemo(()=>Y.some(re=>re.flags?.collapsed),[Y]),ee=b.useMemo(()=>Y.some(re=>!re.flags?.collapsed),[Y]),ne=b.useMemo(()=>L.some(re=>z[re]??!0),[L,z]),ve=b.useMemo(()=>L.some(re=>z[re]===!1),[L,z]),Te=b.useMemo(()=>Q.some(re=>T[re]??!0),[Q,T]),We=b.useMemo(()=>Q.some(re=>T[re]===!1),[Q,T]),de=ce||ne||Te,Ne=ee||ve||We,Ce=b.useMemo(()=>I>0||Object.values(M).some(Boolean)?!0:Object.values(j).some(Boolean),[I,M,j]),_e=()=>{i()},Ue=()=>{d(),_e()},Qe=()=>{p(),_e()},Se=()=>{G(""),U(!0),_e()},ye=()=>{te(),_e()},Oe=()=>{ie.forEach(re=>x(re,!0)),L.forEach(re=>y(re,!0)),Q.forEach(re=>N(re,!0)),_e()},Le=()=>{ie.forEach(re=>x(re,!1)),L.forEach(re=>y(re,!1)),Q.forEach(re=>N(re,!1)),_e()},it=()=>{xe.forEach(re=>k(re,!0)),_e()},vt=()=>{E>0?se.forEach(re=>k(re,!1)):se.forEach(re=>k(re,!0)),_e()},ht=()=>{S(),_e()},we=()=>{R(),_e()},Ae=async()=>{if(!(!D||D.type!=="user")){try{const re=await S0(D.filename);A(re,D.filename,{fresh:!0,source:D})}catch(re){console.error("Failed to reload workflow:",re)}_e()}},Ke=async()=>{if(!(!D||D.type!=="template")){try{const re=await N0(D.moduleName,D.templateName);A(re,`${D.moduleName}/${D.templateName}`,{fresh:!0,source:D})}catch(re){console.error("Failed to reload template:",re)}_e()}},Ye=()=>{if(!D||D.type!=="history")return;const re=ge.find(rt=>rt.prompt_id===D.promptId);re?.workflow&&A(re.workflow,`history-${D.promptId}.json`,{source:D}),_e()},et=()=>{h("clearWorkflowCache")},Ze=()=>{h("unload")},dt=()=>{h("clearAllCache")};return u.jsxs("div",{id:"workflow-menu-container",className:"relative",children:[u.jsx("button",{ref:r,onClick:o,className:"w-10 h-10 flex items-center justify-center rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Workflow options",children:u.jsx(vr,{className:"w-5 h-5 -rotate-90"})}),l?u.jsxs("div",{id:"workflow-options-dropdown",ref:s,className:"absolute right-0 top-11 z-50 w-52 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ue,children:[u.jsx(vi,{className:"w-3 h-3 text-gray-500"}),"Go to queue"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Qe,children:[u.jsx(vi,{className:"w-3 h-3 text-gray-500 rotate-180"}),"Go to outputs"]}),!B&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Se,children:[u.jsx(ab,{className:"w-4 h-4 text-gray-500"}),"Search"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ye,children:[q?u.jsx(ul,{className:"w-4 h-4 text-gray-500"}):u.jsx(zr,{className:"w-4 h-4 text-gray-500"}),q?"Hide connection buttons":"Show connection buttons"]}),Ne&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Oe,children:[u.jsx(Br,{className:"w-6 h-6 -ml-1 text-gray-500"}),"Fold all"]}),de&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Le,children:[u.jsx(Wn,{className:"w-6 h-6 -ml-1 text-gray-500"}),"Unfold all"]}),_>0&&W<_&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:it,children:[u.jsx(ul,{className:"w-4 h-4 text-gray-500"}),"Hide static nodes (",_,")"]}),me>0&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:vt,children:[E>0?u.jsx(zr,{className:"w-4 h-4 text-gray-500"}):u.jsx(ul,{className:"w-4 h-4 text-gray-500"}),E>0?"Show bypassed nodes":"Hide bypassed nodes"," (",me,")"]}),Ce&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ht,children:[u.jsx(zr,{className:"w-4 h-4 text-gray-500"}),"Show all hidden nodes"]}),O.length>0&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:we,children:[u.jsx(Hl,{className:"w-4 h-4 text-gray-500"}),"Clear bookmarks"]}),D&&(D.type==="user"?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ae,children:[u.jsx(ui,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):D.type==="template"?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ke,children:[u.jsx(ui,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):D.type==="history"&&ge.find(re=>re.prompt_id===D.promptId)?.workflow?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Ye,children:[u.jsx(ui,{className:"w-4 h-4 text-gray-500"}),"Reload workflow"]}):null),le&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:et,children:[u.jsx(Hl,{className:"w-4 h-4 text-gray-500"}),"Clear workflow cache"]}),le&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:Ze,children:[u.jsx(Z1,{className:"w-4 h-4"}),"Unload workflow"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600",onClick:dt,children:[u.jsx(Hl,{className:"w-4 h-4"}),"Clear all cache"]})]}):null]})}function Gb(){const[l,r]=b.useState(null),[s,o]=b.useState(null),i=J(j=>j.workflow),d=J(j=>j.originalWorkflow),p=J(j=>j.clearWorkflowCache),h=J(j=>j.unloadWorkflow),m=An(j=>j.setCurrentPanel),g=J(j=>j.workflowLoadedAt),x=b.useRef(null),y=b.useRef(null),N=l!==null&&l===g,k=b.useMemo(()=>!!(i&&d&&JSON.stringify(i)!==JSON.stringify(d)),[i,d]);Ri({open:N,onDismiss:()=>r(null),triggerRef:x,contentRef:y,closeOnScroll:!1});const S=async()=>{if(localStorage.clear(),sessionStorage.clear(),"caches"in window){const j=await caches.keys();await Promise.all(j.map(O=>caches.delete(O)))}document.cookie.split(";").forEach(j=>{const[O]=j.split("=");document.cookie=`${O.trim()}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}),window.location.reload()},w=j=>{if(k){r(null),o(j);return}j==="unload"?h():j==="clearWorkflowCache"?p():S(),r(null)},M=async j=>{o(null),j==="unload"?h():j==="clearWorkflowCache"?p():j==="clearAllCache"&&await S()};return u.jsxs(u.Fragment,{children:[u.jsx(Ub,{open:N,buttonRef:x,menuRef:y,onToggle:()=>r(N?null:g),onClose:()=>r(null),onGoToQueue:()=>m("queue"),onGoToOutputs:()=>m("outputs"),onHandleDirtyAction:w}),u.jsx(Bb,{action:s,onCancel:()=>o(null),onContinue:M})]})}function qb(l){return l==="queue"?['[data-queue-list="true"]','[data-node-list="true"]']:['[data-node-list="true"]','[data-queue-list="true"]']}function Wb({mode:l="workflow"}){const r=b.useRef(null),s=b.useRef(0),o=Md(O=>O.appMenuOpen),i=Md(O=>O.setAppMenuOpen),d=b.useCallback(()=>{const O=Date.now(),R=O-s.current;if(s.current=O,R<300){if(l==="workflow"){window.dispatchEvent(new Event("workflow-scroll-to-top")),"vibrate"in navigator&&navigator.vibrate(10);return}if(l==="outputs"){const T=document.querySelector("#outputs-content-container");T&&(T.scrollTo({top:0,behavior:"auto"}),"vibrate"in navigator&&navigator.vibrate(10));return}const z=qb(l);for(const T of z){const D=document.querySelector(T);if(D&&D.scrollHeight>0&&!D.closest(".pointer-events-none")){D.scrollTo({top:0,behavior:"smooth"}),"vibrate"in navigator&&navigator.vibrate(10);break}}}},[l]),p=J(O=>O.workflow),h=J(O=>O.originalWorkflow),m=J(O=>O.currentFilename),g=J(O=>O.manuallyHiddenNodes),x=J(O=>O.hiddenSubgraphs),y=lt(O=>O.pending),N=Ln(O=>O.history),k=_t(O=>O.source),S=p&&h&&JSON.stringify(p)!==JSON.stringify(h),w=b.useMemo(()=>{if(!p)return"";const O=p.nodes.length,R=Object.keys(g).length,z=Object.values(x).some(Boolean);if(R===0&&!z)return`${O} nodes ${S?"[Unsaved]":""}`.trim();const T=z?p.nodes.reduce((A,B)=>{const G=B.properties?.__mobile_origin;if(!G||typeof G!="object"||G.scope!=="subgraph")return A;const te=G.subgraphId;return te&&x[te]?A+1:A},0):0,D=R+T;return`${O} nodes (${D} hidden) ${S?"[Unsaved]":""}`.trim()},[p,g,x,S]);b.useEffect(()=>{const O=r.current;if(!O)return;const R=()=>{const T=O.getBoundingClientRect();document.documentElement.style.setProperty("--top-bar-offset",`${T.height}px`)};R();const z=new ResizeObserver(R);return z.observe(O),()=>z.disconnect()},[]);const M=b.useMemo(()=>{switch(l){case"queue":return"Queue";case"outputs":return k==="output"?"Outputs":"Inputs";default:return m?m.replace(".json",""):p?"Untitled":"ComfyUI Mobile"}},[l,k,m,p]),j=b.useMemo(()=>{switch(l){case"queue":return u.jsx(Db,{});case"outputs":return u.jsx(zb,{});default:return u.jsx(Gb,{})}},[l]);return u.jsxs("div",{id:"top-bar-root",ref:r,className:"fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-[2000] safe-area-top","data-top-bar":"true",children:[u.jsxs("div",{id:"top-bar-content",className:"flex items-center justify-between px-4 py-3",children:[u.jsx("button",{onClick:()=>i(!0),className:`w-10 h-10 flex items-center justify-center rounded-lg
                     text-gray-700 hover:bg-gray-100`,children:u.jsx(lb,{className:"w-6 h-6"})}),u.jsxs("div",{id:"top-bar-title-container",className:"flex-1 text-center min-w-0 px-2 cursor-pointer",onClick:d,children:[u.jsxs("h1",{id:"top-bar-title",className:"font-semibold text-gray-900 text-lg truncate flex items-center justify-center",children:[u.jsx("span",{className:"truncate",children:M}),l==="workflow"&&S&&u.jsx("span",{id:"dirty-indicator",className:"text-blue-500 ml-1 font-bold",children:"*"})]}),l==="workflow"&&p&&u.jsx("p",{className:"node-count-display text-xs text-gray-500",children:w}),l==="queue"&&u.jsxs("p",{className:"run-count-display text-xs text-gray-500",children:[N.length," ",N.length===1?"run":"runs",y.length>0&&` (${y.length} pending)`]})]}),u.jsx("div",{id:"top-bar-right-slot",className:"w-10 h-10 flex items-center justify-center",children:j})]}),u.jsx(_b,{open:o,onClose:()=>i(!1)})]})}function Td(l,r){const s=new Map;if(r.length===0)return s;const o=[...r].sort((i,d)=>i.id-d.id);for(const i of l){const[d,p]=i.pos,[h,m]=i.size,g=d+h/2,x=p+m/2;for(const y of o){const[N,k,S,w]=y.bounding;if(g>=N&&g<=N+S&&x>=k&&x<=k+w){s.set(i.id,y.id);break}}}return s}function Fb(l){const r=l.groups??[];return Td(l.nodes,r)}function $b(l){const s=l.properties?.__mobile_origin;if(!s||typeof s!="object")return null;const o=s.scope;if(o==="root"){const i=s.nodeId;return typeof i=="number"?{scope:"root",nodeId:i}:null}if(o==="subgraph"){const i=s.nodeId,d=s.subgraphId;if(typeof i=="number"&&typeof d=="string")return{scope:"subgraph",subgraphId:d,nodeId:i}}return null}function Yb(l,r,s,o,i={},d={}){const p=r.groups??[],h=r.definitions?.subgraphs??[],m=new Map(h.map(G=>[G.id,G])),g=r.extra?.__mobile_subgraph_group_map,x=new Map;if(g&&typeof g=="object")for(const[G,q]of Object.entries(g))(typeof q=="number"||q===null)&&x.set(G,q);for(const G of h)x.has(G.id)||x.set(G.id,null);const y=new Map;for(const G of l){const q=$b(G);q?.scope==="subgraph"&&q.subgraphId&&y.set(G.id,q.subgraphId)}const N=new Map;for(const G of h)N.set(G.id,[]);for(const G of l){const q=y.get(G.id);q&&N.get(q)?.push(G)}const k=l.filter(G=>!y.has(G.id)),S=Td(k,p),w=new Map(p.map(G=>[G.id,G])),M=[],j=new Set;for(const G of l){const q=y.get(G.id);if(q){j.has(q)||(M.push({kind:"subgraph",subgraphId:q}),j.add(q));continue}M.push({kind:"node",node:G})}const O=new Map;for(const G of M){const q=G.kind==="node"?S.get(G.node.id):x.get(G.subgraphId)??null;if(q==null)continue;const te=O.get(q);te?te.push(G):O.set(q,[G])}const R=G=>G.kind==="node"?1:d[G.subgraphId]?0:N.get(G.subgraphId)?.length??0,z=(G,q,te)=>({type:"node",node:G,groupId:q,subgraphId:te}),T=G=>{const q=m.get(G);if(!q)return[];const te=N.get(G)??[],ge=q.groups??[];if(ge.length===0)return te.map(me=>z(me,null,G));const le=Td(te,ge),ie=new Map(ge.map(me=>[me.id,me])),L=te.map(me=>({kind:"node",node:me})),Q=new Map;for(const me of L){const _=le.get(me.node.id);if(_===void 0)continue;const I=Q.get(_);I?I.push(me):Q.set(_,[me])}const se=[],xe=new Set;for(const me of L){const _=le.get(me.node.id);if(_!==void 0){if(xe.has(_))continue;const I=ie.get(_),E=Q.get(_)??[];if(I&&!o[I.id]){const W=E.reduce((ee,ne)=>ee+R(ne),0),Y=s[I.id]??!0,ce=Y?[]:E.map(ee=>z(ee.node,I.id,G));se.push({type:"group",group:I,nodeCount:W,isCollapsed:Y,subgraphId:G,children:ce})}xe.add(_);continue}se.push(z(me.node,null,G))}for(const me of ge)o[me.id]||xe.has(me.id)||se.push({type:"group",group:me,nodeCount:0,isCollapsed:s[me.id]??!0,subgraphId:G,children:[]});return se},D=(G,q)=>{if(d[G])return null;const te=m.get(G);if(!te)return null;const ge=N.get(G)??[],le=i[G]??!0,ie=le?[]:T(G);return{type:"subgraph",subgraph:te,nodeCount:ge.length,isCollapsed:le,groupId:q,children:ie}},A=(G,q,te)=>{if(o[G.id])return null;const ge=q.reduce((L,Q)=>L+R(Q),0),le=s[G.id]??!0,ie=le?[]:q.map(L=>L.kind==="node"?z(L.node,G.id,te):D(L.subgraphId,G.id)).filter(Boolean);return{type:"group",group:G,nodeCount:ge,isCollapsed:le,subgraphId:te,children:ie}},B=[],U=new Set;for(const G of M){const q=G.kind==="node"?S.get(G.node.id):x.get(G.subgraphId)??null;if(q!=null){if(U.has(q))continue;const te=w.get(q),ge=O.get(q)??[];if(te){const le=A(te,ge,null);le&&B.push(le)}else for(const le of ge)if(le.kind==="node")B.push(z(le.node,null,null));else{const ie=D(le.subgraphId,null);ie&&B.push(ie)}U.add(q);continue}if(G.kind==="node")B.push(z(G.node,null,null));else{const te=D(G.subgraphId,null);te&&B.push(te)}}for(const G of p){if(U.has(G.id))continue;const q=O.get(G.id)??[],te=A(G,q,null);te&&B.push(te),U.add(G.id)}return B}function Vl(l,r){const s=l.replace("#","");let o,i,d;if(s.length===3)o=parseInt(s[0]+s[0],16),i=parseInt(s[1]+s[1],16),d=parseInt(s[2]+s[2],16);else if(s.length===6)o=parseInt(s.slice(0,2),16),i=parseInt(s.slice(2,4),16),d=parseInt(s.slice(4,6),16);else return"rgba(0, 0, 0, 0)";return`rgba(${o}, ${i}, ${d}, ${r})`}function Ho({workflow:l,runKey:r,isRunning:s,workflowDurationStats:o}){const[i,d]=b.useState(null),p=b.useRef(null),h=b.useRef(null),m=b.useRef(null),g=b.useRef(null),x=b.useRef(null),y=b.useRef(0),N=b.useRef(null);return b.useEffect(()=>{let k=null,S=null;const w=()=>{if(!l){N.current!==null&&(N.current=null,d(null)),m.current=null,g.current=null,x.current=null,p.current=null,y.current=0,h.current=null;return}const M=250,j=Date.now();let O=null;if(!r)h.current?(m.current=j+M,h.current=null,y.current=100,O=100):m.current&&j<m.current?O=100:(m.current=null,g.current=null,x.current=null,p.current=null,y.current=0,O=null);else if(m.current&&j<m.current)g.current=r,O=100;else if(g.current&&j>=(m.current??0)&&(h.current=g.current,g.current=null,p.current=j-M,y.current=0,m.current=null),h.current&&r!==h.current)x.current!==r&&(x.current=r,m.current=j+M,y.current=100),O=100;else{h.current!==r&&(p.current=j,h.current=r,y.current=0,m.current=null);const R=Math.max(0,j-(p.current??j)),z=xi(l),T=o[z]?.avgMs??null;let D;if(T){const B=R/T*100;D=Math.min(99,Math.max(0,B))}else{const B=R/1e3;B<=50?D=B:D=50+(B-50)*.5,D=Math.min(90,D)}const A=Math.max(y.current,D);y.current=A,O=Math.round(A)}N.current!==O&&(N.current=O,d(O))};return l?(k=setTimeout(w,0),(s||m.current||r)&&(S=setInterval(w,200))):k=setTimeout(w,0),()=>{k&&clearTimeout(k),S&&clearInterval(S)}},[l,r,s,o]),i}const Qb=new Set(["mp4","webm","mkv","mov","avi","m4v"]);function Vo(l){const r=l.split(".").pop()?.toLowerCase()??"";return Qb.has(r)?"video":"image"}function wa(l){return Vo(l)==="video"}function Ng(l){const r=String(l).split(",")[0].trim();return["IMAGE","LATENT","MODEL","CLIP","VAE","CONDITIONING","INT","FLOAT","STRING","BOOLEAN","MASK"].includes(r)?`type-${r}`:"type-default"}function jg(l){return String(l).split(",").map(r=>r.trim().toUpperCase()).filter(Boolean)}const Cg=b.memo(function({slot:r,nodeId:s,direction:o,slotIndex:i,compact:d=!1,hideLabel:p=!1}){const h=J(le=>le.workflow),m=J(le=>le.scrollToNode),g=J(le=>le.revealNodeWithParents),x=J(le=>le.nodeTypes),y=J(le=>le.manuallyHiddenNodes),[N,k]=b.useState(!1),S=b.useRef(null),w=b.useRef(null),[M,j]=b.useState(null),O=b.useRef(null),R=b.useMemo(()=>{if(!h)return[];const le=[];if(o==="input"){if(r.link!=null){const L=Oo(h,s,i);L&&le.push(L.node)}}else{const ie=gi(h,s,i);for(const L of ie)le.push(L.node)}return le},[h,s,o,r,i]),{effectiveNodes:z,directNodes:T,bypassedTargets:D}=b.useMemo(()=>{if(!h)return{effectiveNodes:[],directNodes:[],bypassedTargets:[]};if(Object.keys(y).length===0)return{effectiveNodes:R,directNodes:R,bypassedTargets:[]};const le=new Map(h.nodes.map(W=>[W.id,W])),ie=W=>!!y[W.id],L=new Set,Q=W=>{if(L.has(W))return[];L.add(W);const Y=le.get(W);if(!Y)return[];const ce=[];return Y.outputs?.forEach((ee,ne)=>{gi(h,W,ne).forEach(Te=>{const We=Te.node;ie(We)?ce.push(...Q(We.id)):ce.push(We)})}),ce},se=W=>{if(L.has(W))return[];L.add(W);const Y=le.get(W);if(!Y)return[];const ce=[];return Y.inputs?.forEach((ee,ne)=>{if(ee.link===null)return;const ve=Oo(h,W,ne);ve&&(ie(ve.node)?ce.push(...se(ve.node.id)):ce.push(ve.node))}),ce},xe=[],me=[];R.forEach(W=>{ie(W)?o==="input"?me.push(...se(W.id)):me.push(...Q(W.id)):xe.push(W)});const _=new Set(xe.map(W=>W.id));let E=(W=>{const Y=[],ce=new Set;return W.forEach(ee=>{_.has(ee.id)||ce.has(ee.id)||(ce.add(ee.id),Y.push(ee))}),Y})(me);if(o==="input"&&E.length>1){const W=new Set(jg(r.type)),Y=E.filter(ce=>ce.outputs?.some(ee=>jg(ee.type).some(ne=>W.has(ne))));Y.length>0&&(E=Y)}return{effectiveNodes:[...xe,...E],directNodes:xe,bypassedTargets:E}},[R,h,o,r.type,y]),A=z.length,B=A===1?z[0].id:null,U=A>0,G=()=>{if(U){if(A===1&&B!==null){g(B),m(B);return}k(le=>!le)}},q=le=>ie=>{ie.stopPropagation(),g(le),m(le),k(!1)};b.useLayoutEffect(()=>{if(!N)return;const le=()=>{const ie=w.current;if(!ie)return;const L=ie.getBoundingClientRect(),Q=8;j({top:L.bottom+6,...o==="input"?{left:Math.min(L.left,window.innerWidth-Q)}:{right:Math.max(Q,window.innerWidth-L.right)}})};return O.current=le,le(),()=>{}},[N,A,o]),b.useEffect(()=>{if(!N)return;const le=()=>O.current?.(),ie=Q=>{!S.current||!Q.target||w.current?.contains(Q.target)||S.current.contains(Q.target)||k(!1)},L=Q=>{const se=Q.target;S.current&&se&&S.current.contains(se)||k(!1)};return document.addEventListener("mousedown",ie),document.addEventListener("scroll",L,!0),window.addEventListener("resize",le),()=>{document.removeEventListener("mousedown",ie),document.removeEventListener("scroll",L,!0),window.removeEventListener("resize",le)}},[N]);const te=d?"w-7 h-7":"w-10 h-10",ge=d?"text-sm":"text-base";return h?u.jsxs("div",{className:"flex items-center gap-2",children:[o==="input"?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:G,disabled:!U,ref:w,className:`
              flex items-center justify-center rounded-full font-medium
              ${te} flex-shrink-0
              transition-opacity
              ${Ng(r.type)}
              ${U?"opacity-100 cursor-pointer active:scale-95":"opacity-40 cursor-not-allowed"}
            `,children:U&&u.jsx("span",{className:ge,children:""})}),!p&&u.jsx("span",{className:"text-sm text-gray-700 truncate",children:r.localized_name||r.name})]}):u.jsxs(u.Fragment,{children:[!p&&u.jsx("span",{className:"text-sm text-gray-700 truncate",children:r.localized_name||r.name}),A>1&&u.jsx("span",{className:"bg-gray-200 text-gray-700 rounded-full px-2 py-0.5 text-xs font-medium flex-shrink-0",children:A}),u.jsx("button",{onClick:G,disabled:!U,ref:w,className:`
              flex items-center justify-center rounded-full font-medium
              ${te} flex-shrink-0
              transition-opacity
              ${Ng(r.type)}
              ${U?"opacity-100 cursor-pointer active:scale-95":"opacity-40 cursor-not-allowed"}
            `,children:U&&u.jsx("span",{className:ge,children:""})})]}),N&&M&&ll.createPortal(u.jsxs("div",{ref:S,className:"fixed z-[1000] bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:M.top,right:M.right,left:M.left,maxWidth:"calc(100vw - 16px)"},children:[T.map(le=>{const L=x?.[le.type]?.display_name||le.type;return u.jsxs("button",{className:"block text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:q(le.id),children:[L," #",le.id]},le.id)}),T.length>0&&D.length>0&&u.jsx("div",{className:"px-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"h-px flex-1 bg-gray-200"}),u.jsx("span",{className:"text-[10px] text-gray-400",children:"(via bypassed)"}),u.jsx("div",{className:"h-px flex-1 bg-gray-200"})]})}),D.map(le=>{const L=x?.[le.type]?.display_name||le.type;return u.jsxs("button",{className:"block text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:q(le.id),children:[L," #",le.id]},`bypassed-${le.id}`)})]}),document.body)]}):null});function Xb({nodeId:l,inputs:r,outputs:s,allInputs:o,allOutputs:i}){return!J(p=>p.connectionButtonsVisible)||r.length===0&&s.length===0?null:u.jsxs("div",{className:"mb-3 grid grid-cols-2 gap-3",children:[u.jsx("div",{children:r.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Inputs"}),u.jsx("div",{className:"flex flex-col gap-1.5",children:r.map(p=>{const h=o.findIndex(m=>m.name===p.name);return u.jsx(Cg,{slot:p,nodeId:l,direction:"input",slotIndex:h},`input-${p.name}`)})})]})}),u.jsx("div",{className:"flex flex-col items-end",children:s.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide text-right w-full",children:"Outputs"}),u.jsx("div",{className:"flex flex-col gap-1.5 w-full items-end",children:s.map(p=>{const h=i.findIndex(m=>m.name===p.name);return u.jsx(Cg,{slot:p,nodeId:l,direction:"output",slotIndex:h},`output-${h}`)})})]})})]})}function Pb({nodeId:l,isBypassed:r,onEditLabel:s,pinnableWidgets:o,singlePinnableWidget:i,isSingleWidgetPinned:d,hasPinnedWidget:p,toggleWidgetPin:h,setPinnedWidget:m,isNodeBookmarked:g,canAddNodeBookmark:x,onToggleNodeBookmark:y,toggleBypass:N,hideNode:k,connectionHighlightMode:S,setConnectionHighlightMode:w,leftLineCount:M,rightLineCount:j}){const[O,R]=b.useState(!1),[z,T]=b.useState(!1),D=b.useRef(null),A=b.useRef(null),[B,U]=b.useState(null);b.useEffect(()=>{if(!O)return;const _=()=>{const W=A.current;if(!W)return;const Y=W.getBoundingClientRect();U({top:Y.bottom+6,left:Y.right-160})};_();const I=W=>{!D.current||!W.target||A.current?.contains(W.target)||D.current.contains(W.target)||(R(!1),T(!1))},E=W=>{const Y=W.target;D.current&&Y&&D.current.contains(Y)||(R(!1),T(!1))};return document.addEventListener("mousedown",I),document.addEventListener("scroll",E,!0),window.addEventListener("resize",_),()=>{document.removeEventListener("mousedown",I),document.removeEventListener("scroll",E,!0),window.removeEventListener("resize",_)}},[O]);const G=M>0||j>0,q=()=>{R(!1),T(!1)},te=_=>{_.stopPropagation();const I=M>0,E=j>0;if(!I&&!E)return;const W=I&&E?["off","inputs","outputs","both"]:I?["off","inputs"]:["off","outputs"],Y=W.indexOf(S),ce=W[(Y+1)%W.length];w(l,ce)},ge=_=>{_.stopPropagation(),R(I=>!I)},le=_=>{_.stopPropagation(),s(),q()},ie=_=>{_.stopPropagation(),N(l),q()},L=_=>{_.stopPropagation(),k(l),q()},Q=_=>{_.stopPropagation(),i&&(h(i.widgetIndex,i.name,i.type,i.options),q())},se=_=>{_.stopPropagation(),m(null),q()},xe=_=>{_.stopPropagation(),T(!z)},me=_=>I=>{I.stopPropagation(),m({nodeId:l,widgetIndex:_.widgetIndex,widgetName:_.name,widgetType:_.type,options:_.options}),q()};return u.jsxs("div",{className:"flex items-center gap-1 relative",onClick:_=>_.stopPropagation(),children:[G&&u.jsx("button",{type:"button",className:"w-8 h-8 flex items-center justify-center","aria-pressed":S!=="off","aria-label":"Highlight connected nodes",onClick:te,children:u.jsx(sb,{className:"w-6 h-6 overflow-visible",nodeId:l,connectionHighlightMode:S,leftLineCount:M,rightLineCount:j})}),u.jsx("button",{onClick:ge,className:"w-8 h-8 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent","aria-label":"Node options",ref:A,children:g?u.jsx(Hr,{className:"w-5 h-5 text-yellow-500"}):u.jsx(vr,{className:"w-5 h-5 -rotate-90"})}),O&&B&&ll.createPortal(u.jsxs("div",{ref:D,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:B.top,left:B.left},children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:le,children:[u.jsx(Xd,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),(g||x)&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:_=>{_.stopPropagation(),y(),q()},children:[g?u.jsx(bi,{className:"w-4 h-4 text-gray-500"}):u.jsx(Hr,{className:"w-4 h-4 text-yellow-500"}),g?"Remove bookmark":"Bookmark node"]}),u.jsx("div",{className:"border-t border-gray-200 my-1"}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:ie,children:[u.jsx(Ed,{className:"w-4 h-4 text-gray-500",isBypassed:r}),r?"Engage node":"Bypass node"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:L,children:[u.jsx(ul,{className:"w-4 h-4 text-gray-500"}),"Hide node"]}),o.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"border-t border-gray-200 my-1"}),i?u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Q,children:[d?u.jsx(To,{className:"w-4 h-4 text-fuchsia-500"}):u.jsx(Od,{className:"w-4 h-4 text-gray-500"}),d?"Remove pin":"Pin widget"]}):u.jsxs(u.Fragment,{children:[p&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:se,children:[u.jsx(To,{className:"w-4 h-4 text-fuchsia-500"}),"Remove pin"]}),u.jsxs("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex items-center justify-between",onClick:xe,children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx(Od,{className:"w-4 h-4 text-gray-500"}),"Pin widget"]}),u.jsx(wi,{className:`w-4 h-4 text-gray-400 transition-transform ${z?"rotate-90":""}`})]}),z&&u.jsx("div",{className:"border-t border-gray-100 bg-gray-50 max-h-48 overflow-auto",children:o.map(_=>u.jsx("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 text-gray-700",onClick:me(_),children:_.name},_.widgetIndex))})]})]})]}),document.body)]})}function Zb({nodeId:l,open:r,errors:s,anchorRef:o,onClose:i}){const d=x=>{x.stopPropagation(),i()},[p,h]=b.useState(null),m=b.useRef(null),g=An(x=>x.currentPanel);return b.useEffect(()=>{r&&g!=="workflow"&&i()},[r,g,i]),b.useEffect(()=>{if(!r)return;const x=()=>{const k=o.current;if(!k)return;const S=k.getBoundingClientRect();h({top:S.bottom+8,left:Math.max(16,Math.min(S.left+S.width/2-140,window.innerWidth-296))})};x();const y=k=>{k.target&&(o.current?.contains(k.target)||m.current?.contains(k.target)||i())},N=()=>{i()};return document.addEventListener("pointerdown",y),document.addEventListener("scroll",N,!0),window.addEventListener("resize",x),()=>{document.removeEventListener("pointerdown",y),document.removeEventListener("scroll",N,!0),window.removeEventListener("resize",x)}},[r,l,i,o]),!r||s.length===0||!p?null:ll.createPortal(u.jsxs("div",{ref:m,id:`error-popover-${l}`,className:"error-popover-root fixed z-[2000] bg-red-50 border border-red-700 rounded-lg shadow-lg w-72 max-h-64 overflow-auto",style:{top:p.top,left:p.left},children:[u.jsxs("div",{id:`error-popover-header-${l}`,className:"popover-header flex items-center justify-between px-3 py-2 border-b border-red-200 bg-red-700",children:[u.jsxs("span",{id:`error-popover-title-${l}`,className:"popover-title text-sm font-semibold text-white",children:[s.length," ",s.length===1?"Error":"Errors"]}),u.jsx("button",{type:"button",onClick:d,className:"w-6 h-6 flex items-center justify-center text-red-200 hover:text-white rounded","aria-label":"Close",children:u.jsx(Zd,{className:"w-4 h-4"})})]}),u.jsx("div",{id:`error-popover-body-${l}`,className:"popover-body p-3 space-y-2 bg-red-100",children:s.map((x,y)=>{const N=x.details?.toLowerCase().replace(/[_\s]/g,"")||"",k=x.inputName?.toLowerCase().replace(/[_\s]/g,"")||"",S=!x.details||x.details===x.message||x.inputName&&N===k;return u.jsxs("div",{className:"error-item flex items-start gap-2 text-sm",children:[u.jsx("span",{className:"error-dot mt-1.5 h-1.5 w-1.5 rounded-full bg-red-700 shrink-0","aria-hidden":"true"}),u.jsxs("div",{className:"error-content-wrapper min-w-0",children:[x.inputName&&u.jsx("div",{className:"error-input-name font-medium text-red-900 mb-0.5",children:x.inputName}),u.jsx("div",{className:"error-message-text text-red-800",children:x.message}),!S&&u.jsx("div",{className:"error-details-text text-xs text-red-700 mt-0.5 break-words",children:x.details})]})]},y)})})]}),document.body)}function Kb({noteText:l,noteLinkified:r,noteWidgetIndex:s,isEditingNote:o,setIsEditingNote:i,onUpdateNote:d,noteTextareaRef:p,onNoteTap:h}){const m=x=>{s!==null&&d(x)},g=x=>{s!==null&&d(x.target.value)};return u.jsxs("div",{className:"mb-3 group","data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1.5","data-textarea-header":"true",children:[u.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Note"}),o&&u.jsx(Co,{value:l,onChange:m,textareaRef:p,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),o?u.jsx("textarea",{ref:p,value:l,onChange:g,onBlur:()=>i(!1),className:"w-full p-3 border rounded-lg text-base resize-none note-display",rows:Math.min(8,Math.max(3,l.split(`
`).length))}):u.jsx("div",{className:"w-full p-3 border rounded-lg text-base whitespace-pre-wrap break-words note-display",onDoubleClick:()=>i(!0),onTouchEnd:h,children:r})]})}function Jb({show:l,previewImage:r,displayName:s,onImageClick:o,isExecuting:i,overallProgress:d,displayNodeProgress:p}){return!l||!r?null:u.jsxs("div",{className:"mb-3",children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Output Preview"}),u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:qn(r.filename,r.subfolder,r.type),alt:`${s} output`,className:"w-full h-auto rounded-lg border border-gray-100",loading:"lazy",onClick:o},"preview"),i&&d!==null&&u.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-lg flex items-end p-3",children:u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs text-white/90 mb-1",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[p,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-white/30 overflow-hidden",children:u.jsx("div",{className:"h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,p))}%`}})}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-white/90 mt-2 mb-1",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[d,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-white/30 overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,d))}%`}})})]})})]})]})}function e2({nodeId:l,displayName:r,isEditingLabel:s,labelValue:o,labelInputRef:i,onLabelChange:d,onLabelBlur:p,isCollapsed:h,isBypassed:m,isExecuting:g,overallProgress:x,hasErrors:y,errorIconRef:N,errorPopoverOpen:k,setErrorPopoverOpen:S,toggleNodeFold:w,rightSlot:M}){const j=()=>{s||w(l)},O=z=>{z.stopPropagation(),w(l)},R=z=>{z.stopPropagation(),S(!k)};return u.jsxs("div",{id:`node-header-${l}`,className:`node-header flex items-center justify-between cursor-pointer gap-3 ${h?"":"mb-3 pb-2 border-b"} ${m?`bg-purple-200 border-purple-300 px-3 -mx-3 -mt-1 pt-1 rounded-t-xl ${h?"pb-1 -mb-1 rounded-b-xl":""}`:h?"":"border-gray-100"}`,onClick:j,children:[u.jsxs("div",{id:`node-title-container-${l}`,className:"flex items-center gap-1 min-w-0",children:[u.jsx("button",{onClick:O,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-400 hover:text-gray-600 shrink-0",children:h?u.jsx(Br,{className:"w-6 h-6"}):u.jsx(Wn,{className:"w-6 h-6"})}),s?u.jsx("input",{ref:i,value:o,onChange:z=>d(z.target.value),onBlur:p,onKeyDown:z=>{(z.key==="Enter"||z.key==="Escape")&&z.currentTarget.blur()},onClick:z=>z.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{id:`node-display-name-${l}`,className:`font-semibold text-gray-900 select-none flex-1 min-w-0 ${h?"whitespace-nowrap overflow-hidden text-ellipsis":"whitespace-normal break-words"}`,children:r}),u.jsxs("span",{id:`node-id-badge-${l}`,className:"text-xs text-gray-400 min-w-[2ch] text-right",children:["#",l]}),y&&u.jsx("button",{ref:N,type:"button",onClick:R,className:"w-5 h-5 flex items-center justify-center text-red-500 hover:text-red-600 shrink-0","aria-label":"View errors",children:u.jsx(L0,{className:"w-4 h-4"})}),g&&h&&x!==null?u.jsxs("div",{id:`node-progress-indicator-${l}`,className:"relative w-6 h-6 flex items-center justify-center",children:[u.jsx(yb,{className:"absolute",width:"24",height:"24",style:{transform:"rotate(-90deg)"},progress:x,radius:10}),u.jsx("span",{id:`node-progress-text-${l}`,className:"text-[8px] font-bold text-blue-600",children:x})]}):null,g&&!h?u.jsx("span",{id:`node-executing-pulse-${l}`,className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}):null]}),u.jsx("div",{id:`node-header-right-slot-${l}`,className:"header-right-slot",children:M})]})}function Jd({isOpen:l,title:r,onClose:s,children:o,headerActions:i}){return b.useEffect(()=>{if(l){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=d}}},[l]),l?ll.createPortal(u.jsx("div",{className:"fixed inset-0 z-[1500] bg-gray-400/40 dark:bg-black/50 backdrop-blur-sm safe-area-top",onClick:s,children:u.jsxs("div",{className:"w-full h-full flex flex-col",style:{paddingTop:"calc(var(--top-bar-offset, 0px) + env(safe-area-inset-top, 0px))",paddingBottom:"var(--bottom-bar-offset, 0px)"},onClick:d=>d.stopPropagation(),children:[u.jsxs("div",{className:"bg-white dark:bg-[#151a23] p-4 border-b border-gray-200 dark:border-gray-800 shadow-sm relative z-50 min-h-0 overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200 truncate pr-4 pt-1 flex-1",children:r}),u.jsxs("div",{className:"flex items-center gap-2",children:[i,u.jsx("button",{onClick:s,className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Close",children:u.jsx(Zd,{className:"w-6 h-6"})})]})]}),u.jsx("div",{className:"mt-2",children:o})]}),u.jsx("div",{className:"flex-1",onClick:s})]})}),document.body):null}function Na({isPinned:l,onToggle:r}){if(!l||!r)return null;const s=o=>{o.preventDefault(),o.stopPropagation(),r()};return u.jsx("button",{type:"button",onClick:s,className:"flex items-center justify-center transition-colors text-fuchsia-500 hover:text-fuchsia-600","aria-label":"Remove pin",children:u.jsx(To,{className:"w-5 h-5"})})}function z0(){return typeof window>"u"?!1:window.matchMedia("(pointer: coarse)").matches}function kg({containerClass:l,name:r,value:s,options:o,onChange:i,disabled:d=!1,hideLabel:p=!1,hasPin:h,isPinned:m=!1,onTogglePin:g,maxHeight:x,hasError:y=!1,forceModalOpen:N=!1,onModalClose:k}){const S=q=>{if(!Array.isArray(o))return o?.[q]},w=S("multiline"),M=S("placeholder"),j=String(s??""),O=q=>{i(q.target.value)},[R,z]=b.useState(!1),T=N||R,D=z0(),A=N||D,B=b.useRef(null),U=b.useRef(null);b.useLayoutEffect(()=>{if(!w)return;const q=B.current;q&&(q.style.height="0px",q.style.height=`${q.scrollHeight}px`)},[s,T,w]);const G=()=>{z(!1),k?.()};return A?u.jsxs("div",{className:l,children:[w?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between mb-1 min-h-[18px]",children:[p?u.jsx("span",{className:"block text-sm font-medium text-gray-700"}):u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),u.jsx(Co,{value:j,onChange:i,textareaRef:B,className:"opacity-100"})]}),u.jsxs("div",{className:`relative w-full p-3 comfy-input min-h-[100px] text-base group cursor-text ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-10":""} ${y?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&z(!0),children:[u.jsx("div",{className:"whitespace-pre-wrap break-words text-gray-900 dark:text-[#e5e7eb]",children:j||u.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:M})}),h&&u.jsx("div",{className:"absolute right-2 top-2 pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Na,{isPinned:m,onToggle:g})})})]})]}):u.jsxs(u.Fragment,{children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),u.jsxs("div",{className:`relative w-full p-3 comfy-input text-base min-h-[46px] flex items-center cursor-text ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-16":"pr-6"} ${y?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&z(!0),children:[u.jsx("div",{className:"truncate min-w-0 flex-1 text-gray-900 dark:text-[#e5e7eb]",children:j||u.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:M})}),h&&u.jsx("div",{className:"absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto px-3",children:u.jsx(Na,{isPinned:m,onToggle:g})})})]})]}),u.jsx(Jd,{title:r,isOpen:T,onClose:G,headerActions:w?u.jsx(Co,{value:j,onChange:i,textareaRef:B,className:"mr-2"}):null,children:w?u.jsx("textarea",{ref:B,value:j,onChange:q=>i(q.target.value),placeholder:M,className:"w-full p-3 border border-gray-300 rounded-lg min-h-[150px] text-base resize-none outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",autoFocus:!N,disabled:d}):u.jsx("input",{ref:U,type:"text",value:j,onChange:q=>i(q.target.value),placeholder:M,className:"w-full p-3 border border-gray-300 rounded-lg text-base outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",autoFocus:!N,disabled:d})})]}):w?u.jsxs("div",{className:`${l} group`,"data-textarea-root":"true",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1 min-h-[18px]","data-textarea-header":"true",children:[p?u.jsx("span",{className:"block text-sm font-medium text-gray-700"}):u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),u.jsx(Co,{value:j,onChange:i,textareaRef:B,className:"opacity-70 transition-opacity group-focus-within:opacity-100"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("textarea",{ref:B,value:j,onChange:O,placeholder:M,className:`w-full p-3 comfy-input min-h-[100px] text-base resize-none ${x?"overflow-auto":"overflow-hidden"} ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-10":""} ${y?"border-red-700 ring-1 ring-red-700":""}`,style:{overflowAnchor:"none",...x?{maxHeight:x}:{}},disabled:d}),h&&u.jsx("div",{className:"absolute right-2 top-2",children:u.jsx(Na,{isPinned:m,onToggle:g})})]})]}):u.jsxs("div",{className:l,children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:String(s??""),onChange:q=>i(q.target.value),placeholder:M,className:`w-full p-3 comfy-input text-base ${d?"opacity-60 cursor-not-allowed":""} ${h?"pr-16":""} ${y?"border-red-700 ring-1 ring-red-700":""}`,disabled:d}),h&&u.jsx("div",{className:"absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:u.jsx("div",{className:"pointer-events-auto px-3",children:u.jsx(Na,{isPinned:m,onToggle:g})})})]})]})}function _d({containerClass:l,name:r,value:s,options:o,onChange:i,disabled:d,type:p,min:h,max:m,step:g,isInt:x,hasError:y=!1}){const[N,k]=b.useState(String(s||0)),S=x??(p?p.toUpperCase()==="INT":Number.isInteger(s)),w=g??o?.step??(S?1:.1),M=h??(o?.min!==void 0?o.min:-1/0),j=m??(o?.max!==void 0?o.max:1/0);b.useEffect(()=>{k(String(s))},[s]);const O=A=>{k(A.target.value)},R=()=>{let A=S?parseInt(N,10):parseFloat(N);isNaN(A)&&(A=s),A=Math.max(M,Math.min(j,A)),i(A),k(String(A))},z=A=>{const B=(S?parseInt(N,10):parseFloat(N))||0,U=Math.max(M,Math.min(j,B+A));i(U)},T=[`number-input-field-${r}`,"w-full p-3 comfy-input text-base text-gray-900",d?"opacity-60 cursor-not-allowed":"",y?"border-red-700 ring-1 ring-red-700":""].filter(Boolean).join(" "),D=["w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 text-gray-700 flex-shrink-0",d?"opacity-60 cursor-not-allowed":"active:scale-95 transition-all"].filter(Boolean).join(" ");return u.jsxs("div",{className:`${l??""} number-control-${r}`,children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),u.jsxs("div",{className:`number-stepper-container-${r} flex items-center gap-2`,children:[u.jsx("input",{className:T,type:"number",value:N,onChange:O,onBlur:R,disabled:d,"aria-label":p?`${r} ${p}`:r}),u.jsx("button",{type:"button",onClick:()=>z(-w),className:D,"aria-label":"Decrease value",disabled:d,children:u.jsx(rb,{className:"w-4 h-4"})}),u.jsx("button",{type:"button",onClick:()=>z(w),className:D,"aria-label":"Increase value",disabled:d,children:u.jsx(Pd,{className:"w-4 h-4"})})]})]})}function Vr(l){"@babel/helpers - typeof";return Vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Vr(l)}function t2(l,r){if(Vr(l)!="object"||!l)return l;var s=l[Symbol.toPrimitive];if(s!==void 0){var o=s.call(l,r);if(Vr(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(l)}function B0(l){var r=t2(l,"string");return Vr(r)=="symbol"?r:r+""}function jo(l,r,s){return(r=B0(r))in l?Object.defineProperty(l,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):l[r]=s,l}function Mg(l,r){var s=Object.keys(l);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);r&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(l,i).enumerable})),s.push.apply(s,o)}return s}function qe(l){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Mg(Object(s),!0).forEach(function(o){jo(l,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(s)):Mg(Object(s)).forEach(function(o){Object.defineProperty(l,o,Object.getOwnPropertyDescriptor(s,o))})}return l}function n2(l){if(Array.isArray(l))return l}function l2(l,r){var s=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(s!=null){var o,i,d,p,h=[],m=!0,g=!1;try{if(d=(s=s.call(l)).next,r===0){if(Object(s)!==s)return;m=!1}else for(;!(m=(o=d.call(s)).done)&&(h.push(o.value),h.length!==r);m=!0);}catch(x){g=!0,i=x}finally{try{if(!m&&s.return!=null&&(p=s.return(),Object(p)!==p))return}finally{if(g)throw i}}return h}}function Ld(l,r){(r==null||r>l.length)&&(r=l.length);for(var s=0,o=Array(r);s<r;s++)o[s]=l[s];return o}function I0(l,r){if(l){if(typeof l=="string")return Ld(l,r);var s={}.toString.call(l).slice(8,-1);return s==="Object"&&l.constructor&&(s=l.constructor.name),s==="Map"||s==="Set"?Array.from(l):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Ld(l,r):void 0}}function r2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ul(l,r){return n2(l)||l2(l,r)||I0(l,r)||r2()}function a2(l,r){if(l==null)return{};var s={};for(var o in l)if({}.hasOwnProperty.call(l,o)){if(r.indexOf(o)!==-1)continue;s[o]=l[o]}return s}function Fl(l,r){if(l==null)return{};var s,o,i=a2(l,r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(l);for(o=0;o<d.length;o++)s=d[o],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(l,s)&&(i[s]=l[s])}return i}var o2=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function s2(l){var r=l.defaultInputValue,s=r===void 0?"":r,o=l.defaultMenuIsOpen,i=o===void 0?!1:o,d=l.defaultValue,p=d===void 0?null:d,h=l.inputValue,m=l.menuIsOpen,g=l.onChange,x=l.onInputChange,y=l.onMenuClose,N=l.onMenuOpen,k=l.value,S=Fl(l,o2),w=b.useState(h!==void 0?h:s),M=Ul(w,2),j=M[0],O=M[1],R=b.useState(m!==void 0?m:i),z=Ul(R,2),T=z[0],D=z[1],A=b.useState(k!==void 0?k:p),B=Ul(A,2),U=B[0],G=B[1],q=b.useCallback(function(se,xe){typeof g=="function"&&g(se,xe),G(se)},[g]),te=b.useCallback(function(se,xe){var me;typeof x=="function"&&(me=x(se,xe)),O(me!==void 0?me:se)},[x]),ge=b.useCallback(function(){typeof N=="function"&&N(),D(!0)},[N]),le=b.useCallback(function(){typeof y=="function"&&y(),D(!1)},[y]),ie=h!==void 0?h:j,L=m!==void 0?m:T,Q=k!==void 0?k:U;return qe(qe({},S),{},{inputValue:ie,menuIsOpen:L,onChange:q,onInputChange:te,onMenuClose:le,onMenuOpen:ge,value:Q})}function $e(){return $e=Object.assign?Object.assign.bind():function(l){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var o in s)({}).hasOwnProperty.call(s,o)&&(l[o]=s[o])}return l},$e.apply(null,arguments)}function i2(l,r){if(!(l instanceof r))throw new TypeError("Cannot call a class as a function")}function Og(l,r){for(var s=0;s<r.length;s++){var o=r[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,B0(o.key),o)}}function u2(l,r,s){return r&&Og(l.prototype,r),s&&Og(l,s),Object.defineProperty(l,"prototype",{writable:!1}),l}function Ad(l,r){return Ad=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,o){return s.__proto__=o,s},Ad(l,r)}function c2(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(r&&r.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),r&&Ad(l,r)}function Ni(l){return Ni=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ni(l)}function H0(){try{var l=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H0=function(){return!!l})()}function d2(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function f2(l,r){if(r&&(Vr(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d2(l)}function p2(l){var r=H0();return function(){var s,o=Ni(l);if(r){var i=Ni(this).constructor;s=Reflect.construct(o,arguments,i)}else s=o.apply(this,arguments);return f2(this,s)}}function m2(l){if(Array.isArray(l))return Ld(l)}function h2(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function g2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ef(l){return m2(l)||h2(l)||I0(l)||g2()}function x2(l){if(l.sheet)return l.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===l)return document.styleSheets[r]}function v2(l){var r=document.createElement("style");return r.setAttribute("data-emotion",l.key),l.nonce!==void 0&&r.setAttribute("nonce",l.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r}var y2=(function(){function l(s){var o=this;this._insertTag=function(i){var d;o.tags.length===0?o.insertionPoint?d=o.insertionPoint.nextSibling:o.prepend?d=o.container.firstChild:d=o.before:d=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(i,d),o.tags.push(i)},this.isSpeedy=s.speedy===void 0?!0:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var r=l.prototype;return r.hydrate=function(o){o.forEach(this._insertTag)},r.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(v2(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var d=x2(i);try{d.insertRule(o,d.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(o));this.ctr++},r.flush=function(){this.tags.forEach(function(o){var i;return(i=o.parentNode)==null?void 0:i.removeChild(o)}),this.tags=[],this.ctr=0},l})(),yn="-ms-",ji="-moz-",St="-webkit-",V0="comm",tf="rule",nf="decl",b2="@import",U0="@keyframes",w2="@layer",S2=Math.abs,zi=String.fromCharCode,N2=Object.assign;function j2(l,r){return gn(l,0)^45?(((r<<2^gn(l,0))<<2^gn(l,1))<<2^gn(l,2))<<2^gn(l,3):0}function G0(l){return l.trim()}function C2(l,r){return(l=r.exec(l))?l[0]:l}function Nt(l,r,s){return l.replace(r,s)}function Dd(l,r){return l.indexOf(r)}function gn(l,r){return l.charCodeAt(r)|0}function Lo(l,r,s){return l.slice(r,s)}function xl(l){return l.length}function lf(l){return l.length}function li(l,r){return r.push(l),l}function k2(l,r){return l.map(r).join("")}var Bi=1,Ma=1,q0=0,Dn=0,an=0,Ea="";function Ii(l,r,s,o,i,d,p){return{value:l,root:r,parent:s,type:o,props:i,children:d,line:Bi,column:Ma,length:p,return:""}}function So(l,r){return N2(Ii("",null,null,"",null,null,0),l,{length:-l.length},r)}function M2(){return an}function O2(){return an=Dn>0?gn(Ea,--Dn):0,Ma--,an===10&&(Ma=1,Bi--),an}function Fn(){return an=Dn<q0?gn(Ea,Dn++):0,Ma++,an===10&&(Ma=1,Bi++),an}function yl(){return gn(Ea,Dn)}function ci(){return Dn}function Uo(l,r){return Lo(Ea,l,r)}function Ao(l){switch(l){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function W0(l){return Bi=Ma=1,q0=xl(Ea=l),Dn=0,[]}function F0(l){return Ea="",l}function di(l){return G0(Uo(Dn-1,Rd(l===91?l+2:l===40?l+1:l)))}function E2(l){for(;(an=yl())&&an<33;)Fn();return Ao(l)>2||Ao(an)>3?"":" "}function T2(l,r){for(;--r&&Fn()&&!(an<48||an>102||an>57&&an<65||an>70&&an<97););return Uo(l,ci()+(r<6&&yl()==32&&Fn()==32))}function Rd(l){for(;Fn();)switch(an){case l:return Dn;case 34:case 39:l!==34&&l!==39&&Rd(an);break;case 40:l===41&&Rd(l);break;case 92:Fn();break}return Dn}function _2(l,r){for(;Fn()&&l+an!==57;)if(l+an===84&&yl()===47)break;return"/*"+Uo(r,Dn-1)+"*"+zi(l===47?l:Fn())}function L2(l){for(;!Ao(yl());)Fn();return Uo(l,Dn)}function A2(l){return F0(fi("",null,null,null,[""],l=W0(l),0,[0],l))}function fi(l,r,s,o,i,d,p,h,m){for(var g=0,x=0,y=p,N=0,k=0,S=0,w=1,M=1,j=1,O=0,R="",z=i,T=d,D=o,A=R;M;)switch(S=O,O=Fn()){case 40:if(S!=108&&gn(A,y-1)==58){Dd(A+=Nt(di(O),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:A+=di(O);break;case 9:case 10:case 13:case 32:A+=E2(S);break;case 92:A+=T2(ci()-1,7);continue;case 47:switch(yl()){case 42:case 47:li(D2(_2(Fn(),ci()),r,s),m);break;default:A+="/"}break;case 123*w:h[g++]=xl(A)*j;case 125*w:case 59:case 0:switch(O){case 0:case 125:M=0;case 59+x:j==-1&&(A=Nt(A,/\f/g,"")),k>0&&xl(A)-y&&li(k>32?Tg(A+";",o,s,y-1):Tg(Nt(A," ","")+";",o,s,y-2),m);break;case 59:A+=";";default:if(li(D=Eg(A,r,s,g,x,i,h,R,z=[],T=[],y),d),O===123)if(x===0)fi(A,r,D,D,z,d,y,h,T);else switch(N===99&&gn(A,3)===110?100:N){case 100:case 108:case 109:case 115:fi(l,D,D,o&&li(Eg(l,D,D,0,0,i,h,R,i,z=[],y),T),i,T,y,h,o?z:T);break;default:fi(A,D,D,D,[""],T,0,h,T)}}g=x=k=0,w=j=1,R=A="",y=p;break;case 58:y=1+xl(A),k=S;default:if(w<1){if(O==123)--w;else if(O==125&&w++==0&&O2()==125)continue}switch(A+=zi(O),O*w){case 38:j=x>0?1:(A+="\f",-1);break;case 44:h[g++]=(xl(A)-1)*j,j=1;break;case 64:yl()===45&&(A+=di(Fn())),N=yl(),x=y=xl(R=A+=L2(ci())),O++;break;case 45:S===45&&xl(A)==2&&(w=0)}}return d}function Eg(l,r,s,o,i,d,p,h,m,g,x){for(var y=i-1,N=i===0?d:[""],k=lf(N),S=0,w=0,M=0;S<o;++S)for(var j=0,O=Lo(l,y+1,y=S2(w=p[S])),R=l;j<k;++j)(R=G0(w>0?N[j]+" "+O:Nt(O,/&\f/g,N[j])))&&(m[M++]=R);return Ii(l,r,s,i===0?tf:h,m,g,x)}function D2(l,r,s){return Ii(l,r,s,V0,zi(M2()),Lo(l,2,-2),0)}function Tg(l,r,s,o){return Ii(l,r,s,nf,Lo(l,0,o),Lo(l,o+1,-1),o)}function ka(l,r){for(var s="",o=lf(l),i=0;i<o;i++)s+=r(l[i],i,l,r)||"";return s}function R2(l,r,s,o){switch(l.type){case w2:if(l.children.length)break;case b2:case nf:return l.return=l.return||l.value;case V0:return"";case U0:return l.return=l.value+"{"+ka(l.children,o)+"}";case tf:l.value=l.props.join(",")}return xl(s=ka(l.children,o))?l.return=l.value+"{"+s+"}":""}function z2(l){var r=lf(l);return function(s,o,i,d){for(var p="",h=0;h<r;h++)p+=l[h](s,o,i,d)||"";return p}}function B2(l){return function(r){r.root||(r=r.return)&&l(r)}}function I2(l){var r=Object.create(null);return function(s){return r[s]===void 0&&(r[s]=l(s)),r[s]}}var H2=function(r,s,o){for(var i=0,d=0;i=d,d=yl(),i===38&&d===12&&(s[o]=1),!Ao(d);)Fn();return Uo(r,Dn)},V2=function(r,s){var o=-1,i=44;do switch(Ao(i)){case 0:i===38&&yl()===12&&(s[o]=1),r[o]+=H2(Dn-1,s,o);break;case 2:r[o]+=di(i);break;case 4:if(i===44){r[++o]=yl()===58?"&\f":"",s[o]=r[o].length;break}default:r[o]+=zi(i)}while(i=Fn());return r},U2=function(r,s){return F0(V2(W0(r),s))},_g=new WeakMap,G2=function(r){if(!(r.type!=="rule"||!r.parent||r.length<1)){for(var s=r.value,o=r.parent,i=r.column===o.column&&r.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(r.props.length===1&&s.charCodeAt(0)!==58&&!_g.get(o))&&!i){_g.set(r,!0);for(var d=[],p=U2(s,d),h=o.props,m=0,g=0;m<p.length;m++)for(var x=0;x<h.length;x++,g++)r.props[g]=d[m]?p[m].replace(/&\f/g,h[x]):h[x]+" "+p[m]}}},q2=function(r){if(r.type==="decl"){var s=r.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(r.return="",r.value="")}};function $0(l,r){switch(j2(l,r)){case 5103:return St+"print-"+l+l;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return St+l+l;case 5349:case 4246:case 4810:case 6968:case 2756:return St+l+ji+l+yn+l+l;case 6828:case 4268:return St+l+yn+l+l;case 6165:return St+l+yn+"flex-"+l+l;case 5187:return St+l+Nt(l,/(\w+).+(:[^]+)/,St+"box-$1$2"+yn+"flex-$1$2")+l;case 5443:return St+l+yn+"flex-item-"+Nt(l,/flex-|-self/,"")+l;case 4675:return St+l+yn+"flex-line-pack"+Nt(l,/align-content|flex-|-self/,"")+l;case 5548:return St+l+yn+Nt(l,"shrink","negative")+l;case 5292:return St+l+yn+Nt(l,"basis","preferred-size")+l;case 6060:return St+"box-"+Nt(l,"-grow","")+St+l+yn+Nt(l,"grow","positive")+l;case 4554:return St+Nt(l,/([^-])(transform)/g,"$1"+St+"$2")+l;case 6187:return Nt(Nt(Nt(l,/(zoom-|grab)/,St+"$1"),/(image-set)/,St+"$1"),l,"")+l;case 5495:case 3959:return Nt(l,/(image-set\([^]*)/,St+"$1$`$1");case 4968:return Nt(Nt(l,/(.+:)(flex-)?(.*)/,St+"box-pack:$3"+yn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+St+l+l;case 4095:case 3583:case 4068:case 2532:return Nt(l,/(.+)-inline(.+)/,St+"$1$2")+l;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xl(l)-1-r>6)switch(gn(l,r+1)){case 109:if(gn(l,r+4)!==45)break;case 102:return Nt(l,/(.+:)(.+)-([^]+)/,"$1"+St+"$2-$3$1"+ji+(gn(l,r+3)==108?"$3":"$2-$3"))+l;case 115:return~Dd(l,"stretch")?$0(Nt(l,"stretch","fill-available"),r)+l:l}break;case 4949:if(gn(l,r+1)!==115)break;case 6444:switch(gn(l,xl(l)-3-(~Dd(l,"!important")&&10))){case 107:return Nt(l,":",":"+St)+l;case 101:return Nt(l,/(.+:)([^;!]+)(;|!.+)?/,"$1"+St+(gn(l,14)===45?"inline-":"")+"box$3$1"+St+"$2$3$1"+yn+"$2box$3")+l}break;case 5936:switch(gn(l,r+11)){case 114:return St+l+yn+Nt(l,/[svh]\w+-[tblr]{2}/,"tb")+l;case 108:return St+l+yn+Nt(l,/[svh]\w+-[tblr]{2}/,"tb-rl")+l;case 45:return St+l+yn+Nt(l,/[svh]\w+-[tblr]{2}/,"lr")+l}return St+l+yn+l+l}return l}var W2=function(r,s,o,i){if(r.length>-1&&!r.return)switch(r.type){case nf:r.return=$0(r.value,r.length);break;case U0:return ka([So(r,{value:Nt(r.value,"@","@"+St)})],i);case tf:if(r.length)return k2(r.props,function(d){switch(C2(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ka([So(r,{props:[Nt(d,/:(read-\w+)/,":"+ji+"$1")]})],i);case"::placeholder":return ka([So(r,{props:[Nt(d,/:(plac\w+)/,":"+St+"input-$1")]}),So(r,{props:[Nt(d,/:(plac\w+)/,":"+ji+"$1")]}),So(r,{props:[Nt(d,/:(plac\w+)/,yn+"input-$1")]})],i)}return""})}},F2=[W2],$2=function(r){var s=r.key;if(s==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(w){var M=w.getAttribute("data-emotion");M.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var i=r.stylisPlugins||F2,d={},p,h=[];p=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(w){for(var M=w.getAttribute("data-emotion").split(" "),j=1;j<M.length;j++)d[M[j]]=!0;h.push(w)});var m,g=[G2,q2];{var x,y=[R2,B2(function(w){x.insert(w)})],N=z2(g.concat(i,y)),k=function(M){return ka(A2(M),N)};m=function(M,j,O,R){x=O,k(M?M+"{"+j.styles+"}":j.styles),R&&(S.inserted[j.name]=!0)}}var S={key:s,sheet:new y2({key:s,container:p,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:d,registered:{},insert:m};return S.sheet.hydrate(h),S},ad={exports:{}},Mt={};var Lg;function Y2(){if(Lg)return Mt;Lg=1;var l=typeof Symbol=="function"&&Symbol.for,r=l?Symbol.for("react.element"):60103,s=l?Symbol.for("react.portal"):60106,o=l?Symbol.for("react.fragment"):60107,i=l?Symbol.for("react.strict_mode"):60108,d=l?Symbol.for("react.profiler"):60114,p=l?Symbol.for("react.provider"):60109,h=l?Symbol.for("react.context"):60110,m=l?Symbol.for("react.async_mode"):60111,g=l?Symbol.for("react.concurrent_mode"):60111,x=l?Symbol.for("react.forward_ref"):60112,y=l?Symbol.for("react.suspense"):60113,N=l?Symbol.for("react.suspense_list"):60120,k=l?Symbol.for("react.memo"):60115,S=l?Symbol.for("react.lazy"):60116,w=l?Symbol.for("react.block"):60121,M=l?Symbol.for("react.fundamental"):60117,j=l?Symbol.for("react.responder"):60118,O=l?Symbol.for("react.scope"):60119;function R(T){if(typeof T=="object"&&T!==null){var D=T.$$typeof;switch(D){case r:switch(T=T.type,T){case m:case g:case o:case d:case i:case y:return T;default:switch(T=T&&T.$$typeof,T){case h:case x:case S:case k:case p:return T;default:return D}}case s:return D}}}function z(T){return R(T)===g}return Mt.AsyncMode=m,Mt.ConcurrentMode=g,Mt.ContextConsumer=h,Mt.ContextProvider=p,Mt.Element=r,Mt.ForwardRef=x,Mt.Fragment=o,Mt.Lazy=S,Mt.Memo=k,Mt.Portal=s,Mt.Profiler=d,Mt.StrictMode=i,Mt.Suspense=y,Mt.isAsyncMode=function(T){return z(T)||R(T)===m},Mt.isConcurrentMode=z,Mt.isContextConsumer=function(T){return R(T)===h},Mt.isContextProvider=function(T){return R(T)===p},Mt.isElement=function(T){return typeof T=="object"&&T!==null&&T.$$typeof===r},Mt.isForwardRef=function(T){return R(T)===x},Mt.isFragment=function(T){return R(T)===o},Mt.isLazy=function(T){return R(T)===S},Mt.isMemo=function(T){return R(T)===k},Mt.isPortal=function(T){return R(T)===s},Mt.isProfiler=function(T){return R(T)===d},Mt.isStrictMode=function(T){return R(T)===i},Mt.isSuspense=function(T){return R(T)===y},Mt.isValidElementType=function(T){return typeof T=="string"||typeof T=="function"||T===o||T===g||T===d||T===i||T===y||T===N||typeof T=="object"&&T!==null&&(T.$$typeof===S||T.$$typeof===k||T.$$typeof===p||T.$$typeof===h||T.$$typeof===x||T.$$typeof===M||T.$$typeof===j||T.$$typeof===O||T.$$typeof===w)},Mt.typeOf=R,Mt}var Ag;function Q2(){return Ag||(Ag=1,ad.exports=Y2()),ad.exports}var od,Dg;function X2(){if(Dg)return od;Dg=1;var l=Q2(),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},d={};d[l.ForwardRef]=o,d[l.Memo]=i;function p(S){return l.isMemo(S)?i:d[S.$$typeof]||r}var h=Object.defineProperty,m=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,x=Object.getOwnPropertyDescriptor,y=Object.getPrototypeOf,N=Object.prototype;function k(S,w,M){if(typeof w!="string"){if(N){var j=y(w);j&&j!==N&&k(S,j,M)}var O=m(w);g&&(O=O.concat(g(w)));for(var R=p(S),z=p(w),T=0;T<O.length;++T){var D=O[T];if(!s[D]&&!(M&&M[D])&&!(z&&z[D])&&!(R&&R[D])){var A=x(w,D);try{h(S,D,A)}catch{}}}}return S}return od=k,od}X2();var P2=!0;function Z2(l,r,s){var o="";return s.split(" ").forEach(function(i){l[i]!==void 0?r.push(l[i]+";"):i&&(o+=i+" ")}),o}var Y0=function(r,s,o){var i=r.key+"-"+s.name;(o===!1||P2===!1)&&r.registered[i]===void 0&&(r.registered[i]=s.styles)},K2=function(r,s,o){Y0(r,s,o);var i=r.key+"-"+s.name;if(r.inserted[s.name]===void 0){var d=s;do r.insert(s===d?"."+i:"",d,r.sheet,!0),d=d.next;while(d!==void 0)}};function J2(l){for(var r=0,s,o=0,i=l.length;i>=4;++o,i-=4)s=l.charCodeAt(o)&255|(l.charCodeAt(++o)&255)<<8|(l.charCodeAt(++o)&255)<<16|(l.charCodeAt(++o)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,r=(s&65535)*1540483477+((s>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(i){case 3:r^=(l.charCodeAt(o+2)&255)<<16;case 2:r^=(l.charCodeAt(o+1)&255)<<8;case 1:r^=l.charCodeAt(o)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}var ew={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},tw=/[A-Z]|^ms/g,nw=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Q0=function(r){return r.charCodeAt(1)===45},Rg=function(r){return r!=null&&typeof r!="boolean"},sd=I2(function(l){return Q0(l)?l:l.replace(tw,"-$&").toLowerCase()}),zg=function(r,s){switch(r){case"animation":case"animationName":if(typeof s=="string")return s.replace(nw,function(o,i,d){return vl={name:i,styles:d,next:vl},i})}return ew[r]!==1&&!Q0(r)&&typeof s=="number"&&s!==0?s+"px":s};function Do(l,r,s){if(s==null)return"";var o=s;if(o.__emotion_styles!==void 0)return o;switch(typeof s){case"boolean":return"";case"object":{var i=s;if(i.anim===1)return vl={name:i.name,styles:i.styles,next:vl},i.name;var d=s;if(d.styles!==void 0){var p=d.next;if(p!==void 0)for(;p!==void 0;)vl={name:p.name,styles:p.styles,next:vl},p=p.next;var h=d.styles+";";return h}return lw(l,r,s)}case"function":{if(l!==void 0){var m=vl,g=s(l);return vl=m,Do(l,r,g)}break}}var x=s;return x}function lw(l,r,s){var o="";if(Array.isArray(s))for(var i=0;i<s.length;i++)o+=Do(l,r,s[i])+";";else for(var d in s){var p=s[d];if(typeof p!="object"){var h=p;Rg(h)&&(o+=sd(d)+":"+zg(d,h)+";")}else if(Array.isArray(p)&&typeof p[0]=="string"&&r==null)for(var m=0;m<p.length;m++)Rg(p[m])&&(o+=sd(d)+":"+zg(d,p[m])+";");else{var g=Do(l,r,p);switch(d){case"animation":case"animationName":{o+=sd(d)+":"+g+";";break}default:o+=d+"{"+g+"}"}}}return o}var Bg=/label:\s*([^\s;{]+)\s*(;|$)/g,vl;function X0(l,r,s){if(l.length===1&&typeof l[0]=="object"&&l[0]!==null&&l[0].styles!==void 0)return l[0];var o=!0,i="";vl=void 0;var d=l[0];if(d==null||d.raw===void 0)o=!1,i+=Do(s,r,d);else{var p=d;i+=p[0]}for(var h=1;h<l.length;h++)if(i+=Do(s,r,l[h]),o){var m=d;i+=m[h]}Bg.lastIndex=0;for(var g="",x;(x=Bg.exec(i))!==null;)g+="-"+x[1];var y=J2(i)+g;return{name:y,styles:i,next:vl}}var rw=function(r){return r()},aw=lg.useInsertionEffect?lg.useInsertionEffect:!1,ow=aw||rw,P0=b.createContext(typeof HTMLElement<"u"?$2({key:"css"}):null);P0.Provider;var sw=function(r){return b.forwardRef(function(s,o){var i=b.useContext(P0);return r(s,i,o)})},iw=b.createContext({}),rf={}.hasOwnProperty,zd="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",uw=function(r,s){var o={};for(var i in s)rf.call(s,i)&&(o[i]=s[i]);return o[zd]=r,o},cw=function(r){var s=r.cache,o=r.serialized,i=r.isStringTag;return Y0(s,o,i),ow(function(){return K2(s,o,i)}),null},dw=sw(function(l,r,s){var o=l.css;typeof o=="string"&&r.registered[o]!==void 0&&(o=r.registered[o]);var i=l[zd],d=[o],p="";typeof l.className=="string"?p=Z2(r.registered,d,l.className):l.className!=null&&(p=l.className+" ");var h=X0(d,void 0,b.useContext(iw));p+=r.key+"-"+h.name;var m={};for(var g in l)rf.call(l,g)&&g!=="css"&&g!==zd&&(m[g]=l[g]);return m.className=p,s&&(m.ref=s),b.createElement(b.Fragment,null,b.createElement(cw,{cache:r,serialized:h,isStringTag:typeof i=="string"}),b.createElement(i,m))}),fw=dw,Ve=function(r,s){var o=arguments;if(s==null||!rf.call(s,"css"))return b.createElement.apply(void 0,o);var i=o.length,d=new Array(i);d[0]=fw,d[1]=uw(r,s);for(var p=2;p<i;p++)d[p]=o[p];return b.createElement.apply(null,d)};(function(l){var r;r||(r=l.JSX||(l.JSX={}))})(Ve||(Ve={}));function af(){for(var l=arguments.length,r=new Array(l),s=0;s<l;s++)r[s]=arguments[s];return X0(r)}function pw(){var l=af.apply(void 0,arguments),r="animation-"+l.name;return{name:r,styles:"@keyframes "+r+"{"+l.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function mw(l,r){return r||(r=l.slice(0)),Object.freeze(Object.defineProperties(l,{raw:{value:Object.freeze(r)}}))}const hw=Math.min,gw=Math.max,Ci=Math.round,ri=Math.floor,ki=l=>({x:l,y:l});function xw(l){const{x:r,y:s,width:o,height:i}=l;return{width:o,height:i,top:s,left:r,right:r+o,bottom:s+i,x:r,y:s}}function Hi(){return typeof window<"u"}function Z0(l){return J0(l)?(l.nodeName||"").toLowerCase():"#document"}function Gl(l){var r;return(l==null||(r=l.ownerDocument)==null?void 0:r.defaultView)||window}function K0(l){var r;return(r=(J0(l)?l.ownerDocument:l.document)||window.document)==null?void 0:r.documentElement}function J0(l){return Hi()?l instanceof Node||l instanceof Gl(l).Node:!1}function vw(l){return Hi()?l instanceof Element||l instanceof Gl(l).Element:!1}function of(l){return Hi()?l instanceof HTMLElement||l instanceof Gl(l).HTMLElement:!1}function Ig(l){return!Hi()||typeof ShadowRoot>"u"?!1:l instanceof ShadowRoot||l instanceof Gl(l).ShadowRoot}const yw=new Set(["inline","contents"]);function ex(l){const{overflow:r,overflowX:s,overflowY:o,display:i}=sf(l);return/auto|scroll|overlay|hidden|clip/.test(r+o+s)&&!yw.has(i)}function bw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ww=new Set(["html","body","#document"]);function Sw(l){return ww.has(Z0(l))}function sf(l){return Gl(l).getComputedStyle(l)}function Nw(l){if(Z0(l)==="html")return l;const r=l.assignedSlot||l.parentNode||Ig(l)&&l.host||K0(l);return Ig(r)?r.host:r}function tx(l){const r=Nw(l);return Sw(r)?l.ownerDocument?l.ownerDocument.body:l.body:of(r)&&ex(r)?r:tx(r)}function Mi(l,r,s){var o;r===void 0&&(r=[]),s===void 0&&(s=!0);const i=tx(l),d=i===((o=l.ownerDocument)==null?void 0:o.body),p=Gl(i);if(d){const h=Bd(p);return r.concat(p,p.visualViewport||[],ex(i)?i:[],h&&s?Mi(h):[])}return r.concat(i,Mi(i,[],s))}function Bd(l){return l.parent&&Object.getPrototypeOf(l.parent)?l.frameElement:null}function jw(l){const r=sf(l);let s=parseFloat(r.width)||0,o=parseFloat(r.height)||0;const i=of(l),d=i?l.offsetWidth:s,p=i?l.offsetHeight:o,h=Ci(s)!==d||Ci(o)!==p;return h&&(s=d,o=p),{width:s,height:o,$:h}}function uf(l){return vw(l)?l:l.contextElement}function Hg(l){const r=uf(l);if(!of(r))return ki(1);const s=r.getBoundingClientRect(),{width:o,height:i,$:d}=jw(r);let p=(d?Ci(s.width):s.width)/o,h=(d?Ci(s.height):s.height)/i;return(!p||!Number.isFinite(p))&&(p=1),(!h||!Number.isFinite(h))&&(h=1),{x:p,y:h}}const Cw=ki(0);function kw(l){const r=Gl(l);return!bw()||!r.visualViewport?Cw:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function Mw(l,r,s){return!1}function Vg(l,r,s,o){r===void 0&&(r=!1);const i=l.getBoundingClientRect(),d=uf(l);let p=ki(1);r&&(p=Hg(l));const h=Mw()?kw(d):ki(0);let m=(i.left+h.x)/p.x,g=(i.top+h.y)/p.y,x=i.width/p.x,y=i.height/p.y;if(d){const N=Gl(d),k=o;let S=N,w=Bd(S);for(;w&&o&&k!==S;){const M=Hg(w),j=w.getBoundingClientRect(),O=sf(w),R=j.left+(w.clientLeft+parseFloat(O.paddingLeft))*M.x,z=j.top+(w.clientTop+parseFloat(O.paddingTop))*M.y;m*=M.x,g*=M.y,x*=M.x,y*=M.y,m+=R,g+=z,S=Gl(w),w=Bd(S)}}return xw({width:x,height:y,x:m,y:g})}function nx(l,r){return l.x===r.x&&l.y===r.y&&l.width===r.width&&l.height===r.height}function Ow(l,r){let s=null,o;const i=K0(l);function d(){var h;clearTimeout(o),(h=s)==null||h.disconnect(),s=null}function p(h,m){h===void 0&&(h=!1),m===void 0&&(m=1),d();const g=l.getBoundingClientRect(),{left:x,top:y,width:N,height:k}=g;if(h||r(),!N||!k)return;const S=ri(y),w=ri(i.clientWidth-(x+N)),M=ri(i.clientHeight-(y+k)),j=ri(x),R={rootMargin:-S+"px "+-w+"px "+-M+"px "+-j+"px",threshold:gw(0,hw(1,m))||1};let z=!0;function T(D){const A=D[0].intersectionRatio;if(A!==m){if(!z)return p();A?p(!1,A):o=setTimeout(()=>{p(!1,1e-7)},1e3)}A===1&&!nx(g,l.getBoundingClientRect())&&p(),z=!1}try{s=new IntersectionObserver(T,{...R,root:i.ownerDocument})}catch{s=new IntersectionObserver(T,R)}s.observe(l)}return p(!0),d}function Ew(l,r,s,o){o===void 0&&(o={});const{ancestorScroll:i=!0,ancestorResize:d=!0,elementResize:p=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:m=!1}=o,g=uf(l),x=i||d?[...g?Mi(g):[],...Mi(r)]:[];x.forEach(j=>{i&&j.addEventListener("scroll",s,{passive:!0}),d&&j.addEventListener("resize",s)});const y=g&&h?Ow(g,s):null;let N=-1,k=null;p&&(k=new ResizeObserver(j=>{let[O]=j;O&&O.target===g&&k&&(k.unobserve(r),cancelAnimationFrame(N),N=requestAnimationFrame(()=>{var R;(R=k)==null||R.observe(r)})),s()}),g&&!m&&k.observe(g),k.observe(r));let S,w=m?Vg(l):null;m&&M();function M(){const j=Vg(l);w&&!nx(w,j)&&s(),w=j,S=requestAnimationFrame(M)}return s(),()=>{var j;x.forEach(O=>{i&&O.removeEventListener("scroll",s),d&&O.removeEventListener("resize",s)}),y?.(),(j=k)==null||j.disconnect(),k=null,m&&cancelAnimationFrame(S)}}var Id=b.useLayoutEffect,Tw=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Oi=function(){};function _w(l,r){return r?r[0]==="-"?l+r:l+"__"+r:l}function Lw(l,r){for(var s=arguments.length,o=new Array(s>2?s-2:0),i=2;i<s;i++)o[i-2]=arguments[i];var d=[].concat(o);if(r&&l)for(var p in r)r.hasOwnProperty(p)&&r[p]&&d.push("".concat(_w(l,p)));return d.filter(function(h){return h}).map(function(h){return String(h).trim()}).join(" ")}var Ug=function(r){return Uw(r)?r.filter(Boolean):Vr(r)==="object"&&r!==null?[r]:[]},lx=function(r){r.className,r.clearValue,r.cx,r.getStyles,r.getClassNames,r.getValue,r.hasValue,r.isMulti,r.isRtl,r.options,r.selectOption,r.selectProps,r.setValue,r.theme;var s=Fl(r,Tw);return qe({},s)},Pt=function(r,s,o){var i=r.cx,d=r.getStyles,p=r.getClassNames,h=r.className;return{css:d(s,r),className:i(o??{},p(s,r),h)}};function Vi(l){return[document.documentElement,document.body,window].indexOf(l)>-1}function Aw(l){return Vi(l)?window.innerHeight:l.clientHeight}function rx(l){return Vi(l)?window.pageYOffset:l.scrollTop}function Ei(l,r){if(Vi(l)){window.scrollTo(0,r);return}l.scrollTop=r}function Dw(l){var r=getComputedStyle(l),s=r.position==="absolute",o=/(auto|scroll)/;if(r.position==="fixed")return document.documentElement;for(var i=l;i=i.parentElement;)if(r=getComputedStyle(i),!(s&&r.position==="static")&&o.test(r.overflow+r.overflowY+r.overflowX))return i;return document.documentElement}function Rw(l,r,s,o){return s*((l=l/o-1)*l*l+1)+r}function ai(l,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Oi,i=rx(l),d=r-i,p=10,h=0;function m(){h+=p;var g=Rw(h,i,d,s);Ei(l,g),h<s?window.requestAnimationFrame(m):o(l)}m()}function Gg(l,r){var s=l.getBoundingClientRect(),o=r.getBoundingClientRect(),i=r.offsetHeight/3;o.bottom+i>s.bottom?Ei(l,Math.min(r.offsetTop+r.clientHeight-l.offsetHeight+i,l.scrollHeight)):o.top-i<s.top&&Ei(l,Math.max(r.offsetTop-i,0))}function zw(l){var r=l.getBoundingClientRect();return{bottom:r.bottom,height:r.height,left:r.left,right:r.right,top:r.top,width:r.width}}function qg(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Bw(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var ax=!1,Iw={get passive(){return ax=!0}},oi=typeof window<"u"?window:{};oi.addEventListener&&oi.removeEventListener&&(oi.addEventListener("p",Oi,Iw),oi.removeEventListener("p",Oi,!1));var Hw=ax;function Vw(l){return l!=null}function Uw(l){return Array.isArray(l)}function si(l,r,s){return l?r:s}var Gw=function(r){for(var s=arguments.length,o=new Array(s>1?s-1:0),i=1;i<s;i++)o[i-1]=arguments[i];var d=Object.entries(r).filter(function(p){var h=Ul(p,1),m=h[0];return!o.includes(m)});return d.reduce(function(p,h){var m=Ul(h,2),g=m[0],x=m[1];return p[g]=x,p},{})},qw=["children","innerProps"],Ww=["children","innerProps"];function Fw(l){var r=l.maxHeight,s=l.menuEl,o=l.minHeight,i=l.placement,d=l.shouldScroll,p=l.isFixedPosition,h=l.controlHeight,m=Dw(s),g={placement:"bottom",maxHeight:r};if(!s||!s.offsetParent)return g;var x=m.getBoundingClientRect(),y=x.height,N=s.getBoundingClientRect(),k=N.bottom,S=N.height,w=N.top,M=s.offsetParent.getBoundingClientRect(),j=M.top,O=p?window.innerHeight:Aw(m),R=rx(m),z=parseInt(getComputedStyle(s).marginBottom,10),T=parseInt(getComputedStyle(s).marginTop,10),D=j-T,A=O-w,B=D+R,U=y-R-w,G=k-O+R+z,q=R+w-T,te=160;switch(i){case"auto":case"bottom":if(A>=S)return{placement:"bottom",maxHeight:r};if(U>=S&&!p)return d&&ai(m,G,te),{placement:"bottom",maxHeight:r};if(!p&&U>=o||p&&A>=o){d&&ai(m,G,te);var ge=p?A-z:U-z;return{placement:"bottom",maxHeight:ge}}if(i==="auto"||p){var le=r,ie=p?D:B;return ie>=o&&(le=Math.min(ie-z-h,r)),{placement:"top",maxHeight:le}}if(i==="bottom")return d&&Ei(m,G),{placement:"bottom",maxHeight:r};break;case"top":if(D>=S)return{placement:"top",maxHeight:r};if(B>=S&&!p)return d&&ai(m,q,te),{placement:"top",maxHeight:r};if(!p&&B>=o||p&&D>=o){var L=r;return(!p&&B>=o||p&&D>=o)&&(L=p?D-T:B-T),d&&ai(m,q,te),{placement:"top",maxHeight:L}}return{placement:"bottom",maxHeight:r};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return g}function $w(l){var r={bottom:"top",top:"bottom"};return l?r[l]:"bottom"}var ox=function(r){return r==="auto"?"bottom":r},Yw=function(r,s){var o,i=r.placement,d=r.theme,p=d.borderRadius,h=d.spacing,m=d.colors;return qe((o={label:"menu"},jo(o,$w(i),"100%"),jo(o,"position","absolute"),jo(o,"width","100%"),jo(o,"zIndex",1),o),s?{}:{backgroundColor:m.neutral0,borderRadius:p,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:h.menuGutter,marginTop:h.menuGutter})},sx=b.createContext(null),Qw=function(r){var s=r.children,o=r.minMenuHeight,i=r.maxMenuHeight,d=r.menuPlacement,p=r.menuPosition,h=r.menuShouldScrollIntoView,m=r.theme,g=b.useContext(sx)||{},x=g.setPortalPlacement,y=b.useRef(null),N=b.useState(i),k=Ul(N,2),S=k[0],w=k[1],M=b.useState(null),j=Ul(M,2),O=j[0],R=j[1],z=m.spacing.controlHeight;return Id(function(){var T=y.current;if(T){var D=p==="fixed",A=h&&!D,B=Fw({maxHeight:i,menuEl:T,minHeight:o,placement:d,shouldScroll:A,isFixedPosition:D,controlHeight:z});w(B.maxHeight),R(B.placement),x?.(B.placement)}},[i,d,p,h,o,x,z]),s({ref:y,placerProps:qe(qe({},r),{},{placement:O||ox(d),maxHeight:S})})},Xw=function(r){var s=r.children,o=r.innerRef,i=r.innerProps;return Ve("div",$e({},Pt(r,"menu",{menu:!0}),{ref:o},i),s)},Pw=Xw,Zw=function(r,s){var o=r.maxHeight,i=r.theme.spacing.baseUnit;return qe({maxHeight:o,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},s?{}:{paddingBottom:i,paddingTop:i})},Kw=function(r){var s=r.children,o=r.innerProps,i=r.innerRef,d=r.isMulti;return Ve("div",$e({},Pt(r,"menuList",{"menu-list":!0,"menu-list--is-multi":d}),{ref:i},o),s)},ix=function(r,s){var o=r.theme,i=o.spacing.baseUnit,d=o.colors;return qe({textAlign:"center"},s?{}:{color:d.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},Jw=ix,eS=ix,tS=function(r){var s=r.children,o=s===void 0?"No options":s,i=r.innerProps,d=Fl(r,qw);return Ve("div",$e({},Pt(qe(qe({},d),{},{children:o,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),o)},nS=function(r){var s=r.children,o=s===void 0?"Loading...":s,i=r.innerProps,d=Fl(r,Ww);return Ve("div",$e({},Pt(qe(qe({},d),{},{children:o,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),o)},lS=function(r){var s=r.rect,o=r.offset,i=r.position;return{left:s.left,position:i,top:o,width:s.width,zIndex:1}},rS=function(r){var s=r.appendTo,o=r.children,i=r.controlElement,d=r.innerProps,p=r.menuPlacement,h=r.menuPosition,m=b.useRef(null),g=b.useRef(null),x=b.useState(ox(p)),y=Ul(x,2),N=y[0],k=y[1],S=b.useMemo(function(){return{setPortalPlacement:k}},[]),w=b.useState(null),M=Ul(w,2),j=M[0],O=M[1],R=b.useCallback(function(){if(i){var A=zw(i),B=h==="fixed"?0:window.pageYOffset,U=A[N]+B;(U!==j?.offset||A.left!==j?.rect.left||A.width!==j?.rect.width)&&O({offset:U,rect:A})}},[i,h,N,j?.offset,j?.rect.left,j?.rect.width]);Id(function(){R()},[R]);var z=b.useCallback(function(){typeof g.current=="function"&&(g.current(),g.current=null),i&&m.current&&(g.current=Ew(i,m.current,R,{elementResize:"ResizeObserver"in window}))},[i,R]);Id(function(){z()},[z]);var T=b.useCallback(function(A){m.current=A,z()},[z]);if(!s&&h!=="fixed"||!j)return null;var D=Ve("div",$e({ref:T},Pt(qe(qe({},r),{},{offset:j.offset,position:h,rect:j.rect}),"menuPortal",{"menu-portal":!0}),d),o);return Ve(sx.Provider,{value:S},s?ll.createPortal(D,s):D)},aS=function(r){var s=r.isDisabled,o=r.isRtl;return{label:"container",direction:o?"rtl":void 0,pointerEvents:s?"none":void 0,position:"relative"}},oS=function(r){var s=r.children,o=r.innerProps,i=r.isDisabled,d=r.isRtl;return Ve("div",$e({},Pt(r,"container",{"--is-disabled":i,"--is-rtl":d}),o),s)},sS=function(r,s){var o=r.theme.spacing,i=r.isMulti,d=r.hasValue,p=r.selectProps.controlShouldRenderValue;return qe({alignItems:"center",display:i&&d&&p?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},s?{}:{padding:"".concat(o.baseUnit/2,"px ").concat(o.baseUnit*2,"px")})},iS=function(r){var s=r.children,o=r.innerProps,i=r.isMulti,d=r.hasValue;return Ve("div",$e({},Pt(r,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":d}),o),s)},uS=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},cS=function(r){var s=r.children,o=r.innerProps;return Ve("div",$e({},Pt(r,"indicatorsContainer",{indicators:!0}),o),s)},Wg,dS=["size"],fS=["innerProps","isRtl","size"],pS={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},ux=function(r){var s=r.size,o=Fl(r,dS);return Ve("svg",$e({height:s,width:s,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:pS},o))},cf=function(r){return Ve(ux,$e({size:20},r),Ve("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},cx=function(r){return Ve(ux,$e({size:20},r),Ve("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},dx=function(r,s){var o=r.isFocused,i=r.theme,d=i.spacing.baseUnit,p=i.colors;return qe({label:"indicatorContainer",display:"flex",transition:"color 150ms"},s?{}:{color:o?p.neutral60:p.neutral20,padding:d*2,":hover":{color:o?p.neutral80:p.neutral40}})},mS=dx,hS=function(r){var s=r.children,o=r.innerProps;return Ve("div",$e({},Pt(r,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),o),s||Ve(cx,null))},gS=dx,xS=function(r){var s=r.children,o=r.innerProps;return Ve("div",$e({},Pt(r,"clearIndicator",{indicator:!0,"clear-indicator":!0}),o),s||Ve(cf,null))},vS=function(r,s){var o=r.isDisabled,i=r.theme,d=i.spacing.baseUnit,p=i.colors;return qe({label:"indicatorSeparator",alignSelf:"stretch",width:1},s?{}:{backgroundColor:o?p.neutral10:p.neutral20,marginBottom:d*2,marginTop:d*2})},yS=function(r){var s=r.innerProps;return Ve("span",$e({},s,Pt(r,"indicatorSeparator",{"indicator-separator":!0})))},bS=pw(Wg||(Wg=mw([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),wS=function(r,s){var o=r.isFocused,i=r.size,d=r.theme,p=d.colors,h=d.spacing.baseUnit;return qe({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},s?{}:{color:o?p.neutral60:p.neutral20,padding:h*2})},id=function(r){var s=r.delay,o=r.offset;return Ve("span",{css:af({animation:"".concat(bS," 1s ease-in-out ").concat(s,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:o?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},SS=function(r){var s=r.innerProps,o=r.isRtl,i=r.size,d=i===void 0?4:i,p=Fl(r,fS);return Ve("div",$e({},Pt(qe(qe({},p),{},{innerProps:s,isRtl:o,size:d}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),s),Ve(id,{delay:0,offset:o}),Ve(id,{delay:160,offset:!0}),Ve(id,{delay:320,offset:!o}))},NS=function(r,s){var o=r.isDisabled,i=r.isFocused,d=r.theme,p=d.colors,h=d.borderRadius,m=d.spacing;return qe({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:m.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},s?{}:{backgroundColor:o?p.neutral5:p.neutral0,borderColor:o?p.neutral10:i?p.primary:p.neutral20,borderRadius:h,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(p.primary):void 0,"&:hover":{borderColor:i?p.primary:p.neutral30}})},jS=function(r){var s=r.children,o=r.isDisabled,i=r.isFocused,d=r.innerRef,p=r.innerProps,h=r.menuIsOpen;return Ve("div",$e({ref:d},Pt(r,"control",{control:!0,"control--is-disabled":o,"control--is-focused":i,"control--menu-is-open":h}),p,{"aria-disabled":o||void 0}),s)},CS=jS,kS=["data"],MS=function(r,s){var o=r.theme.spacing;return s?{}:{paddingBottom:o.baseUnit*2,paddingTop:o.baseUnit*2}},OS=function(r){var s=r.children,o=r.cx,i=r.getStyles,d=r.getClassNames,p=r.Heading,h=r.headingProps,m=r.innerProps,g=r.label,x=r.theme,y=r.selectProps;return Ve("div",$e({},Pt(r,"group",{group:!0}),m),Ve(p,$e({},h,{selectProps:y,theme:x,getStyles:i,getClassNames:d,cx:o}),g),Ve("div",null,s))},ES=function(r,s){var o=r.theme,i=o.colors,d=o.spacing;return qe({label:"group",cursor:"default",display:"block"},s?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:d.baseUnit*3,paddingRight:d.baseUnit*3,textTransform:"uppercase"})},TS=function(r){var s=lx(r);s.data;var o=Fl(s,kS);return Ve("div",$e({},Pt(r,"groupHeading",{"group-heading":!0}),o))},_S=OS,LS=["innerRef","isDisabled","isHidden","inputClassName"],AS=function(r,s){var o=r.isDisabled,i=r.value,d=r.theme,p=d.spacing,h=d.colors;return qe(qe({visibility:o?"hidden":"visible",transform:i?"translateZ(0)":""},DS),s?{}:{margin:p.baseUnit/2,paddingBottom:p.baseUnit/2,paddingTop:p.baseUnit/2,color:h.neutral80})},fx={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},DS={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":qe({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},fx)},RS=function(r){return qe({label:"input",color:"inherit",background:0,opacity:r?0:1,width:"100%"},fx)},zS=function(r){var s=r.cx,o=r.value,i=lx(r),d=i.innerRef,p=i.isDisabled,h=i.isHidden,m=i.inputClassName,g=Fl(i,LS);return Ve("div",$e({},Pt(r,"input",{"input-container":!0}),{"data-value":o||""}),Ve("input",$e({className:s({input:!0},m),ref:d,style:RS(h),disabled:p},g)))},BS=zS,IS=function(r,s){var o=r.theme,i=o.spacing,d=o.borderRadius,p=o.colors;return qe({label:"multiValue",display:"flex",minWidth:0},s?{}:{backgroundColor:p.neutral10,borderRadius:d/2,margin:i.baseUnit/2})},HS=function(r,s){var o=r.theme,i=o.borderRadius,d=o.colors,p=r.cropWithEllipsis;return qe({overflow:"hidden",textOverflow:p||p===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},s?{}:{borderRadius:i/2,color:d.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},VS=function(r,s){var o=r.theme,i=o.spacing,d=o.borderRadius,p=o.colors,h=r.isFocused;return qe({alignItems:"center",display:"flex"},s?{}:{borderRadius:d/2,backgroundColor:h?p.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:p.dangerLight,color:p.danger}})},px=function(r){var s=r.children,o=r.innerProps;return Ve("div",o,s)},US=px,GS=px;function qS(l){var r=l.children,s=l.innerProps;return Ve("div",$e({role:"button"},s),r||Ve(cf,{size:14}))}var WS=function(r){var s=r.children,o=r.components,i=r.data,d=r.innerProps,p=r.isDisabled,h=r.removeProps,m=r.selectProps,g=o.Container,x=o.Label,y=o.Remove;return Ve(g,{data:i,innerProps:qe(qe({},Pt(r,"multiValue",{"multi-value":!0,"multi-value--is-disabled":p})),d),selectProps:m},Ve(x,{data:i,innerProps:qe({},Pt(r,"multiValueLabel",{"multi-value__label":!0})),selectProps:m},s),Ve(y,{data:i,innerProps:qe(qe({},Pt(r,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(s||"option")},h),selectProps:m}))},FS=WS,$S=function(r,s){var o=r.isDisabled,i=r.isFocused,d=r.isSelected,p=r.theme,h=p.spacing,m=p.colors;return qe({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},s?{}:{backgroundColor:d?m.primary:i?m.primary25:"transparent",color:o?m.neutral20:d?m.neutral0:"inherit",padding:"".concat(h.baseUnit*2,"px ").concat(h.baseUnit*3,"px"),":active":{backgroundColor:o?void 0:d?m.primary:m.primary50}})},YS=function(r){var s=r.children,o=r.isDisabled,i=r.isFocused,d=r.isSelected,p=r.innerRef,h=r.innerProps;return Ve("div",$e({},Pt(r,"option",{option:!0,"option--is-disabled":o,"option--is-focused":i,"option--is-selected":d}),{ref:p,"aria-disabled":o},h),s)},QS=YS,XS=function(r,s){var o=r.theme,i=o.spacing,d=o.colors;return qe({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},s?{}:{color:d.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},PS=function(r){var s=r.children,o=r.innerProps;return Ve("div",$e({},Pt(r,"placeholder",{placeholder:!0}),o),s)},ZS=PS,KS=function(r,s){var o=r.isDisabled,i=r.theme,d=i.spacing,p=i.colors;return qe({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},s?{}:{color:o?p.neutral40:p.neutral80,marginLeft:d.baseUnit/2,marginRight:d.baseUnit/2})},JS=function(r){var s=r.children,o=r.isDisabled,i=r.innerProps;return Ve("div",$e({},Pt(r,"singleValue",{"single-value":!0,"single-value--is-disabled":o}),i),s)},e3=JS,mx={ClearIndicator:xS,Control:CS,DropdownIndicator:hS,DownChevron:cx,CrossIcon:cf,Group:_S,GroupHeading:TS,IndicatorsContainer:cS,IndicatorSeparator:yS,Input:BS,LoadingIndicator:SS,Menu:Pw,MenuList:Kw,MenuPortal:rS,LoadingMessage:nS,NoOptionsMessage:tS,MultiValue:FS,MultiValueContainer:US,MultiValueLabel:GS,MultiValueRemove:qS,Option:QS,Placeholder:ZS,SelectContainer:oS,SingleValue:e3,ValueContainer:iS},t3=function(r){return qe(qe({},mx),r.components)},Fg=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function n3(l,r){return!!(l===r||Fg(l)&&Fg(r))}function l3(l,r){if(l.length!==r.length)return!1;for(var s=0;s<l.length;s++)if(!n3(l[s],r[s]))return!1;return!0}function r3(l,r){r===void 0&&(r=l3);var s=null;function o(){for(var i=[],d=0;d<arguments.length;d++)i[d]=arguments[d];if(s&&s.lastThis===this&&r(i,s.lastArgs))return s.lastResult;var p=l.apply(this,i);return s={lastResult:p,lastArgs:i,lastThis:this},p}return o.clear=function(){s=null},o}var a3={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},o3=function(r){return Ve("span",$e({css:a3},r))},$g=o3,s3={guidance:function(r){var s=r.isSearchable,o=r.isMulti,i=r.tabSelectsValue,d=r.context,p=r.isInitialFocus;switch(d){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return p?"".concat(r["aria-label"]||"Select"," is focused ").concat(s?",type to refine list":"",", press Down to open the menu, ").concat(o?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(r){var s=r.action,o=r.label,i=o===void 0?"":o,d=r.labels,p=r.isDisabled;switch(s){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(d.length>1?"s":""," ").concat(d.join(","),", selected.");case"select-option":return p?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(r){var s=r.context,o=r.focused,i=r.options,d=r.label,p=d===void 0?"":d,h=r.selectValue,m=r.isDisabled,g=r.isSelected,x=r.isAppleDevice,y=function(w,M){return w&&w.length?"".concat(w.indexOf(M)+1," of ").concat(w.length):""};if(s==="value"&&h)return"value ".concat(p," focused, ").concat(y(h,o),".");if(s==="menu"&&x){var N=m?" disabled":"",k="".concat(g?" selected":"").concat(N);return"".concat(p).concat(k,", ").concat(y(i,o),".")}return""},onFilter:function(r){var s=r.inputValue,o=r.resultsMessage;return"".concat(o).concat(s?" for search term "+s:"",".")}},i3=function(r){var s=r.ariaSelection,o=r.focusedOption,i=r.focusedValue,d=r.focusableOptions,p=r.isFocused,h=r.selectValue,m=r.selectProps,g=r.id,x=r.isAppleDevice,y=m.ariaLiveMessages,N=m.getOptionLabel,k=m.inputValue,S=m.isMulti,w=m.isOptionDisabled,M=m.isSearchable,j=m.menuIsOpen,O=m.options,R=m.screenReaderStatus,z=m.tabSelectsValue,T=m.isLoading,D=m["aria-label"],A=m["aria-live"],B=b.useMemo(function(){return qe(qe({},s3),y||{})},[y]),U=b.useMemo(function(){var ie="";if(s&&B.onChange){var L=s.option,Q=s.options,se=s.removedValue,xe=s.removedValues,me=s.value,_=function(ne){return Array.isArray(ne)?null:ne},I=se||L||_(me),E=I?N(I):"",W=Q||xe||void 0,Y=W?W.map(N):[],ce=qe({isDisabled:I&&w(I,h),label:E,labels:Y},s);ie=B.onChange(ce)}return ie},[s,B,w,h,N]),G=b.useMemo(function(){var ie="",L=o||i,Q=!!(o&&h&&h.includes(o));if(L&&B.onFocus){var se={focused:L,label:N(L),isDisabled:w(L,h),isSelected:Q,options:d,context:L===o?"menu":"value",selectValue:h,isAppleDevice:x};ie=B.onFocus(se)}return ie},[o,i,N,w,B,d,h,x]),q=b.useMemo(function(){var ie="";if(j&&O.length&&!T&&B.onFilter){var L=R({count:d.length});ie=B.onFilter({inputValue:k,resultsMessage:L})}return ie},[d,k,j,B,O,R,T]),te=s?.action==="initial-input-focus",ge=b.useMemo(function(){var ie="";if(B.guidance){var L=i?"value":j?"menu":"input";ie=B.guidance({"aria-label":D,context:L,isDisabled:o&&w(o,h),isMulti:S,isSearchable:M,tabSelectsValue:z,isInitialFocus:te})}return ie},[D,o,i,S,w,M,j,B,h,z,te]),le=Ve(b.Fragment,null,Ve("span",{id:"aria-selection"},U),Ve("span",{id:"aria-focused"},G),Ve("span",{id:"aria-results"},q),Ve("span",{id:"aria-guidance"},ge));return Ve(b.Fragment,null,Ve($g,{id:g},te&&le),Ve($g,{"aria-live":A,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},p&&!te&&le))},u3=i3,Hd=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],c3=new RegExp("["+Hd.map(function(l){return l.letters}).join("")+"]","g"),hx={};for(var ud=0;ud<Hd.length;ud++)for(var cd=Hd[ud],dd=0;dd<cd.letters.length;dd++)hx[cd.letters[dd]]=cd.base;var gx=function(r){return r.replace(c3,function(s){return hx[s]})},d3=r3(gx),Yg=function(r){return r.replace(/^\s+|\s+$/g,"")},f3=function(r){return"".concat(r.label," ").concat(r.value)},Vd=function(r){return function(s,o){if(s.data.__isNew__)return!0;var i=qe({ignoreCase:!0,ignoreAccents:!0,stringify:f3,trim:!0,matchFrom:"any"},r),d=i.ignoreCase,p=i.ignoreAccents,h=i.stringify,m=i.trim,g=i.matchFrom,x=m?Yg(o):o,y=m?Yg(h(s)):h(s);return d&&(x=x.toLowerCase(),y=y.toLowerCase()),p&&(x=d3(x),y=gx(y)),g==="start"?y.substr(0,x.length)===x:y.indexOf(x)>-1}},p3=["innerRef"];function m3(l){var r=l.innerRef,s=Fl(l,p3),o=Gw(s,"onExited","in","enter","exit","appear");return Ve("input",$e({ref:r},o,{css:af({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var h3=function(r){r.cancelable&&r.preventDefault(),r.stopPropagation()};function g3(l){var r=l.isEnabled,s=l.onBottomArrive,o=l.onBottomLeave,i=l.onTopArrive,d=l.onTopLeave,p=b.useRef(!1),h=b.useRef(!1),m=b.useRef(0),g=b.useRef(null),x=b.useCallback(function(M,j){if(g.current!==null){var O=g.current,R=O.scrollTop,z=O.scrollHeight,T=O.clientHeight,D=g.current,A=j>0,B=z-T-R,U=!1;B>j&&p.current&&(o&&o(M),p.current=!1),A&&h.current&&(d&&d(M),h.current=!1),A&&j>B?(s&&!p.current&&s(M),D.scrollTop=z,U=!0,p.current=!0):!A&&-j>R&&(i&&!h.current&&i(M),D.scrollTop=0,U=!0,h.current=!0),U&&h3(M)}},[s,o,i,d]),y=b.useCallback(function(M){x(M,M.deltaY)},[x]),N=b.useCallback(function(M){m.current=M.changedTouches[0].clientY},[]),k=b.useCallback(function(M){var j=m.current-M.changedTouches[0].clientY;x(M,j)},[x]),S=b.useCallback(function(M){if(M){var j=Hw?{passive:!1}:!1;M.addEventListener("wheel",y,j),M.addEventListener("touchstart",N,j),M.addEventListener("touchmove",k,j)}},[k,N,y]),w=b.useCallback(function(M){M&&(M.removeEventListener("wheel",y,!1),M.removeEventListener("touchstart",N,!1),M.removeEventListener("touchmove",k,!1))},[k,N,y]);return b.useEffect(function(){if(r){var M=g.current;return S(M),function(){w(M)}}},[r,S,w]),function(M){g.current=M}}var Qg=["boxSizing","height","overflow","paddingRight","position"],Xg={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Pg(l){l.cancelable&&l.preventDefault()}function Zg(l){l.stopPropagation()}function Kg(){var l=this.scrollTop,r=this.scrollHeight,s=l+this.offsetHeight;l===0?this.scrollTop=1:s===r&&(this.scrollTop=l-1)}function Jg(){return"ontouchstart"in window||navigator.maxTouchPoints}var e0=!!(typeof window<"u"&&window.document&&window.document.createElement),No=0,ba={capture:!1,passive:!1};function x3(l){var r=l.isEnabled,s=l.accountForScrollbars,o=s===void 0?!0:s,i=b.useRef({}),d=b.useRef(null),p=b.useCallback(function(m){if(e0){var g=document.body,x=g&&g.style;if(o&&Qg.forEach(function(S){var w=x&&x[S];i.current[S]=w}),o&&No<1){var y=parseInt(i.current.paddingRight,10)||0,N=document.body?document.body.clientWidth:0,k=window.innerWidth-N+y||0;Object.keys(Xg).forEach(function(S){var w=Xg[S];x&&(x[S]=w)}),x&&(x.paddingRight="".concat(k,"px"))}g&&Jg()&&(g.addEventListener("touchmove",Pg,ba),m&&(m.addEventListener("touchstart",Kg,ba),m.addEventListener("touchmove",Zg,ba))),No+=1}},[o]),h=b.useCallback(function(m){if(e0){var g=document.body,x=g&&g.style;No=Math.max(No-1,0),o&&No<1&&Qg.forEach(function(y){var N=i.current[y];x&&(x[y]=N)}),g&&Jg()&&(g.removeEventListener("touchmove",Pg,ba),m&&(m.removeEventListener("touchstart",Kg,ba),m.removeEventListener("touchmove",Zg,ba)))}},[o]);return b.useEffect(function(){if(r){var m=d.current;return p(m),function(){h(m)}}},[r,p,h]),function(m){d.current=m}}var v3=function(r){var s=r.target;return s.ownerDocument.activeElement&&s.ownerDocument.activeElement.blur()},y3={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function b3(l){var r=l.children,s=l.lockEnabled,o=l.captureEnabled,i=o===void 0?!0:o,d=l.onBottomArrive,p=l.onBottomLeave,h=l.onTopArrive,m=l.onTopLeave,g=g3({isEnabled:i,onBottomArrive:d,onBottomLeave:p,onTopArrive:h,onTopLeave:m}),x=x3({isEnabled:s}),y=function(k){g(k),x(k)};return Ve(b.Fragment,null,s&&Ve("div",{onClick:v3,css:y3}),r(y))}var w3={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},S3=function(r){var s=r.name,o=r.onFocus;return Ve("input",{required:!0,name:s,tabIndex:-1,"aria-hidden":"true",onFocus:o,css:w3,value:"",onChange:function(){}})},N3=S3;function df(l){var r;return typeof window<"u"&&window.navigator!=null?l.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function j3(){return df(/^iPhone/i)}function xx(){return df(/^Mac/i)}function C3(){return df(/^iPad/i)||xx()&&navigator.maxTouchPoints>1}function k3(){return j3()||C3()}function M3(){return xx()||k3()}var O3=function(r){return r.label},E3=function(r){return r.label},T3=function(r){return r.value},_3=function(r){return!!r.isDisabled},L3={clearIndicator:gS,container:aS,control:NS,dropdownIndicator:mS,group:MS,groupHeading:ES,indicatorsContainer:uS,indicatorSeparator:vS,input:AS,loadingIndicator:wS,loadingMessage:eS,menu:Yw,menuList:Zw,menuPortal:lS,multiValue:IS,multiValueLabel:HS,multiValueRemove:VS,noOptionsMessage:Jw,option:$S,placeholder:XS,singleValue:KS,valueContainer:sS},A3={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},D3=4,vx=4,R3=38,z3=vx*2,B3={baseUnit:vx,controlHeight:R3,menuGutter:z3},fd={borderRadius:D3,colors:A3,spacing:B3},I3={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:qg(),captureMenuScroll:!qg(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Vd(),formatGroupLabel:O3,getOptionLabel:E3,getOptionValue:T3,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:_3,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Bw(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(r){var s=r.count;return"".concat(s," result").concat(s!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function t0(l,r,s,o){var i=wx(l,r,s),d=Sx(l,r,s),p=bx(l,r),h=Ti(l,r);return{type:"option",data:r,isDisabled:i,isSelected:d,label:p,value:h,index:o}}function pi(l,r){return l.options.map(function(s,o){if("options"in s){var i=s.options.map(function(p,h){return t0(l,p,r,h)}).filter(function(p){return l0(l,p)});return i.length>0?{type:"group",data:s,options:i,index:o}:void 0}var d=t0(l,s,r,o);return l0(l,d)?d:void 0}).filter(Vw)}function yx(l){return l.reduce(function(r,s){return s.type==="group"?r.push.apply(r,ef(s.options.map(function(o){return o.data}))):r.push(s.data),r},[])}function n0(l,r){return l.reduce(function(s,o){return o.type==="group"?s.push.apply(s,ef(o.options.map(function(i){return{data:i.data,id:"".concat(r,"-").concat(o.index,"-").concat(i.index)}}))):s.push({data:o.data,id:"".concat(r,"-").concat(o.index)}),s},[])}function H3(l,r){return yx(pi(l,r))}function l0(l,r){var s=l.inputValue,o=s===void 0?"":s,i=r.data,d=r.isSelected,p=r.label,h=r.value;return(!jx(l)||!d)&&Nx(l,{label:p,value:h,data:i},o)}function V3(l,r){var s=l.focusedValue,o=l.selectValue,i=o.indexOf(s);if(i>-1){var d=r.indexOf(s);if(d>-1)return s;if(i<r.length)return r[i]}return null}function U3(l,r){var s=l.focusedOption;return s&&r.indexOf(s)>-1?s:r[0]}var pd=function(r,s){var o,i=(o=r.find(function(d){return d.data===s}))===null||o===void 0?void 0:o.id;return i||null},bx=function(r,s){return r.getOptionLabel(s)},Ti=function(r,s){return r.getOptionValue(s)};function wx(l,r,s){return typeof l.isOptionDisabled=="function"?l.isOptionDisabled(r,s):!1}function Sx(l,r,s){if(s.indexOf(r)>-1)return!0;if(typeof l.isOptionSelected=="function")return l.isOptionSelected(r,s);var o=Ti(l,r);return s.some(function(i){return Ti(l,i)===o})}function Nx(l,r,s){return l.filterOption?l.filterOption(r,s):!0}var jx=function(r){var s=r.hideSelectedOptions,o=r.isMulti;return s===void 0?o:s},G3=1,Cx=(function(l){c2(s,l);var r=p2(s);function s(o){var i;if(i2(this,s),i=r.call(this,o),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(m){i.controlRef=m},i.focusedOptionRef=null,i.getFocusedOptionRef=function(m){i.focusedOptionRef=m},i.menuListRef=null,i.getMenuListRef=function(m){i.menuListRef=m},i.inputRef=null,i.getInputRef=function(m){i.inputRef=m},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(m,g){var x=i.props,y=x.onChange,N=x.name;g.name=N,i.ariaOnChange(m,g),y(m,g)},i.setValue=function(m,g,x){var y=i.props,N=y.closeMenuOnSelect,k=y.isMulti,S=y.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:S}),N&&(i.setState({inputIsHiddenAfterUpdate:!k}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(m,{action:g,option:x})},i.selectOption=function(m){var g=i.props,x=g.blurInputOnSelect,y=g.isMulti,N=g.name,k=i.state.selectValue,S=y&&i.isOptionSelected(m,k),w=i.isOptionDisabled(m,k);if(S){var M=i.getOptionValue(m);i.setValue(k.filter(function(j){return i.getOptionValue(j)!==M}),"deselect-option",m)}else if(!w)y?i.setValue([].concat(ef(k),[m]),"select-option",m):i.setValue(m,"select-option");else{i.ariaOnChange(m,{action:"select-option",option:m,name:N});return}x&&i.blurInput()},i.removeValue=function(m){var g=i.props.isMulti,x=i.state.selectValue,y=i.getOptionValue(m),N=x.filter(function(S){return i.getOptionValue(S)!==y}),k=si(g,N,N[0]||null);i.onChange(k,{action:"remove-value",removedValue:m}),i.focusInput()},i.clearValue=function(){var m=i.state.selectValue;i.onChange(si(i.props.isMulti,[],null),{action:"clear",removedValues:m})},i.popValue=function(){var m=i.props.isMulti,g=i.state.selectValue,x=g[g.length-1],y=g.slice(0,g.length-1),N=si(m,y,y[0]||null);x&&i.onChange(N,{action:"pop-value",removedValue:x})},i.getFocusedOptionId=function(m){return pd(i.state.focusableOptionsWithIds,m)},i.getFocusableOptionsWithIds=function(){return n0(pi(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];return Lw.apply(void 0,[i.props.classNamePrefix].concat(g))},i.getOptionLabel=function(m){return bx(i.props,m)},i.getOptionValue=function(m){return Ti(i.props,m)},i.getStyles=function(m,g){var x=i.props.unstyled,y=L3[m](g,x);y.boxSizing="border-box";var N=i.props.styles[m];return N?N(y,g):y},i.getClassNames=function(m,g){var x,y;return(x=(y=i.props.classNames)[m])===null||x===void 0?void 0:x.call(y,g)},i.getElementId=function(m){return"".concat(i.state.instancePrefix,"-").concat(m)},i.getComponents=function(){return t3(i.props)},i.buildCategorizedOptions=function(){return pi(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return yx(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(m,g){i.setState({ariaSelection:qe({value:m},g)})},i.onMenuMouseDown=function(m){m.button===0&&(m.stopPropagation(),m.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(m){i.blockOptionHover=!1},i.onControlMouseDown=function(m){if(!m.defaultPrevented){var g=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&i.onMenuClose():g&&i.openMenu("first"):(g&&(i.openAfterFocus=!0),i.focusInput()),m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&m.preventDefault()}},i.onDropdownIndicatorMouseDown=function(m){if(!(m&&m.type==="mousedown"&&m.button!==0)&&!i.props.isDisabled){var g=i.props,x=g.isMulti,y=g.menuIsOpen;i.focusInput(),y?(i.setState({inputIsHiddenAfterUpdate:!x}),i.onMenuClose()):i.openMenu("first"),m.preventDefault()}},i.onClearIndicatorMouseDown=function(m){m&&m.type==="mousedown"&&m.button!==0||(i.clearValue(),m.preventDefault(),i.openAfterFocus=!1,m.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(m){typeof i.props.closeMenuOnScroll=="boolean"?m.target instanceof HTMLElement&&Vi(m.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(m)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(m){var g=m.touches,x=g&&g.item(0);x&&(i.initialTouchX=x.clientX,i.initialTouchY=x.clientY,i.userIsDragging=!1)},i.onTouchMove=function(m){var g=m.touches,x=g&&g.item(0);if(x){var y=Math.abs(x.clientX-i.initialTouchX),N=Math.abs(x.clientY-i.initialTouchY),k=5;i.userIsDragging=y>k||N>k}},i.onTouchEnd=function(m){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(m.target)&&i.menuListRef&&!i.menuListRef.contains(m.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(m){i.userIsDragging||i.onControlMouseDown(m)},i.onClearIndicatorTouchEnd=function(m){i.userIsDragging||i.onClearIndicatorMouseDown(m)},i.onDropdownIndicatorTouchEnd=function(m){i.userIsDragging||i.onDropdownIndicatorMouseDown(m)},i.handleInputChange=function(m){var g=i.props.inputValue,x=m.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(x,{action:"input-change",prevInputValue:g}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(m){i.props.onFocus&&i.props.onFocus(m),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(m){var g=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(m),i.onInputChange("",{action:"input-blur",prevInputValue:g}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(m){if(!(i.blockOptionHover||i.state.focusedOption===m)){var g=i.getFocusableOptions(),x=g.indexOf(m);i.setState({focusedOption:m,focusedOptionId:x>-1?i.getFocusedOptionId(m):null})}},i.shouldHideSelectedOptions=function(){return jx(i.props)},i.onValueInputFocus=function(m){m.preventDefault(),m.stopPropagation(),i.focus()},i.onKeyDown=function(m){var g=i.props,x=g.isMulti,y=g.backspaceRemovesValue,N=g.escapeClearsValue,k=g.inputValue,S=g.isClearable,w=g.isDisabled,M=g.menuIsOpen,j=g.onKeyDown,O=g.tabSelectsValue,R=g.openMenuOnFocus,z=i.state,T=z.focusedOption,D=z.focusedValue,A=z.selectValue;if(!w&&!(typeof j=="function"&&(j(m),m.defaultPrevented))){switch(i.blockOptionHover=!0,m.key){case"ArrowLeft":if(!x||k)return;i.focusValue("previous");break;case"ArrowRight":if(!x||k)return;i.focusValue("next");break;case"Delete":case"Backspace":if(k)return;if(D)i.removeValue(D);else{if(!y)return;x?i.popValue():S&&i.clearValue()}break;case"Tab":if(i.isComposing||m.shiftKey||!M||!O||!T||R&&i.isOptionSelected(T,A))return;i.selectOption(T);break;case"Enter":if(m.keyCode===229)break;if(M){if(!T||i.isComposing)return;i.selectOption(T);break}return;case"Escape":M?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:k}),i.onMenuClose()):S&&N&&i.clearValue();break;case" ":if(k)return;if(!M){i.openMenu("first");break}if(!T)return;i.selectOption(T);break;case"ArrowUp":M?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":M?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!M)return;i.focusOption("pageup");break;case"PageDown":if(!M)return;i.focusOption("pagedown");break;case"Home":if(!M)return;i.focusOption("first");break;case"End":if(!M)return;i.focusOption("last");break;default:return}m.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++G3),i.state.selectValue=Ug(o.value),o.menuIsOpen&&i.state.selectValue.length){var d=i.getFocusableOptionsWithIds(),p=i.buildFocusableOptions(),h=p.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=d,i.state.focusedOption=p[h],i.state.focusedOptionId=pd(d,p[h])}return i}return u2(s,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Gg(this.menuListRef,this.focusedOptionRef),M3()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var d=this.props,p=d.isDisabled,h=d.menuIsOpen,m=this.state.isFocused;(m&&!p&&i.isDisabled||m&&h&&!i.menuIsOpen)&&this.focusInput(),m&&p&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!m&&!p&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Gg(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,d){this.props.onInputChange(i,d)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var d=this,p=this.state,h=p.selectValue,m=p.isFocused,g=this.buildFocusableOptions(),x=i==="first"?0:g.length-1;if(!this.props.isMulti){var y=g.indexOf(h[0]);y>-1&&(x=y)}this.scrollToFocusedOptionOnUpdate=!(m&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:g[x],focusedOptionId:this.getFocusedOptionId(g[x])},function(){return d.onMenuOpen()})}},{key:"focusValue",value:function(i){var d=this.state,p=d.selectValue,h=d.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var m=p.indexOf(h);h||(m=-1);var g=p.length-1,x=-1;if(p.length){switch(i){case"previous":m===0?x=0:m===-1?x=g:x=m-1;break;case"next":m>-1&&m<g&&(x=m+1);break}this.setState({inputIsHidden:x!==-1,focusedValue:p[x]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",d=this.props.pageSize,p=this.state.focusedOption,h=this.getFocusableOptions();if(h.length){var m=0,g=h.indexOf(p);p||(g=-1),i==="up"?m=g>0?g-1:h.length-1:i==="down"?m=(g+1)%h.length:i==="pageup"?(m=g-d,m<0&&(m=0)):i==="pagedown"?(m=g+d,m>h.length-1&&(m=h.length-1)):i==="last"&&(m=h.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:h[m],focusedValue:null,focusedOptionId:this.getFocusedOptionId(h[m])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(fd):qe(qe({},fd),this.props.theme):fd})},{key:"getCommonProps",value:function(){var i=this.clearValue,d=this.cx,p=this.getStyles,h=this.getClassNames,m=this.getValue,g=this.selectOption,x=this.setValue,y=this.props,N=y.isMulti,k=y.isRtl,S=y.options,w=this.hasValue();return{clearValue:i,cx:d,getStyles:p,getClassNames:h,getValue:m,hasValue:w,isMulti:N,isRtl:k,options:S,selectOption:g,selectProps:y,setValue:x,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,d=i.isClearable,p=i.isMulti;return d===void 0?p:d}},{key:"isOptionDisabled",value:function(i,d){return wx(this.props,i,d)}},{key:"isOptionSelected",value:function(i,d){return Sx(this.props,i,d)}},{key:"filterOption",value:function(i,d){return Nx(this.props,i,d)}},{key:"formatOptionLabel",value:function(i,d){if(typeof this.props.formatOptionLabel=="function"){var p=this.props.inputValue,h=this.state.selectValue;return this.props.formatOptionLabel(i,{context:d,inputValue:p,selectValue:h})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var i=this.props,d=i.isDisabled,p=i.isSearchable,h=i.inputId,m=i.inputValue,g=i.tabIndex,x=i.form,y=i.menuIsOpen,N=i.required,k=this.getComponents(),S=k.Input,w=this.state,M=w.inputIsHidden,j=w.ariaSelection,O=this.commonProps,R=h||this.getElementId("input"),z=qe(qe(qe({"aria-autocomplete":"list","aria-expanded":y,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":N,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},y&&{"aria-controls":this.getElementId("listbox")}),!p&&{"aria-readonly":!0}),this.hasValue()?j?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return p?b.createElement(S,$e({},O,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:R,innerRef:this.getInputRef,isDisabled:d,isHidden:M,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:g,form:x,type:"text",value:m},z)):b.createElement(m3,$e({id:R,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Oi,onFocus:this.onInputFocus,disabled:d,tabIndex:g,inputMode:"none",form:x,value:""},z))})},{key:"renderPlaceholderOrValue",value:function(){var i=this,d=this.getComponents(),p=d.MultiValue,h=d.MultiValueContainer,m=d.MultiValueLabel,g=d.MultiValueRemove,x=d.SingleValue,y=d.Placeholder,N=this.commonProps,k=this.props,S=k.controlShouldRenderValue,w=k.isDisabled,M=k.isMulti,j=k.inputValue,O=k.placeholder,R=this.state,z=R.selectValue,T=R.focusedValue,D=R.isFocused;if(!this.hasValue()||!S)return j?null:b.createElement(y,$e({},N,{key:"placeholder",isDisabled:w,isFocused:D,innerProps:{id:this.getElementId("placeholder")}}),O);if(M)return z.map(function(B,U){var G=B===T,q="".concat(i.getOptionLabel(B),"-").concat(i.getOptionValue(B));return b.createElement(p,$e({},N,{components:{Container:h,Label:m,Remove:g},isFocused:G,isDisabled:w,key:q,index:U,removeProps:{onClick:function(){return i.removeValue(B)},onTouchEnd:function(){return i.removeValue(B)},onMouseDown:function(ge){ge.preventDefault()}},data:B}),i.formatOptionLabel(B,"value"))});if(j)return null;var A=z[0];return b.createElement(x,$e({},N,{data:A,isDisabled:w}),this.formatOptionLabel(A,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),d=i.ClearIndicator,p=this.commonProps,h=this.props,m=h.isDisabled,g=h.isLoading,x=this.state.isFocused;if(!this.isClearable()||!d||m||!this.hasValue()||g)return null;var y={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(d,$e({},p,{innerProps:y,isFocused:x}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),d=i.LoadingIndicator,p=this.commonProps,h=this.props,m=h.isDisabled,g=h.isLoading,x=this.state.isFocused;if(!d||!g)return null;var y={"aria-hidden":"true"};return b.createElement(d,$e({},p,{innerProps:y,isDisabled:m,isFocused:x}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),d=i.DropdownIndicator,p=i.IndicatorSeparator;if(!d||!p)return null;var h=this.commonProps,m=this.props.isDisabled,g=this.state.isFocused;return b.createElement(p,$e({},h,{isDisabled:m,isFocused:g}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),d=i.DropdownIndicator;if(!d)return null;var p=this.commonProps,h=this.props.isDisabled,m=this.state.isFocused,g={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(d,$e({},p,{innerProps:g,isDisabled:h,isFocused:m}))}},{key:"renderMenu",value:function(){var i=this,d=this.getComponents(),p=d.Group,h=d.GroupHeading,m=d.Menu,g=d.MenuList,x=d.MenuPortal,y=d.LoadingMessage,N=d.NoOptionsMessage,k=d.Option,S=this.commonProps,w=this.state.focusedOption,M=this.props,j=M.captureMenuScroll,O=M.inputValue,R=M.isLoading,z=M.loadingMessage,T=M.minMenuHeight,D=M.maxMenuHeight,A=M.menuIsOpen,B=M.menuPlacement,U=M.menuPosition,G=M.menuPortalTarget,q=M.menuShouldBlockScroll,te=M.menuShouldScrollIntoView,ge=M.noOptionsMessage,le=M.onMenuScrollToTop,ie=M.onMenuScrollToBottom;if(!A)return null;var L=function(E,W){var Y=E.type,ce=E.data,ee=E.isDisabled,ne=E.isSelected,ve=E.label,Te=E.value,We=w===ce,de=ee?void 0:function(){return i.onOptionHover(ce)},Ne=ee?void 0:function(){return i.selectOption(ce)},Ce="".concat(i.getElementId("option"),"-").concat(W),_e={id:Ce,onClick:Ne,onMouseMove:de,onMouseOver:de,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:ne};return b.createElement(k,$e({},S,{innerProps:_e,data:ce,isDisabled:ee,isSelected:ne,key:Ce,label:ve,type:Y,value:Te,isFocused:We,innerRef:We?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(E.data,"menu"))},Q;if(this.hasOptions())Q=this.getCategorizedOptions().map(function(I){if(I.type==="group"){var E=I.data,W=I.options,Y=I.index,ce="".concat(i.getElementId("group"),"-").concat(Y),ee="".concat(ce,"-heading");return b.createElement(p,$e({},S,{key:ce,data:E,options:W,Heading:h,headingProps:{id:ee,data:I.data},label:i.formatGroupLabel(I.data)}),I.options.map(function(ne){return L(ne,"".concat(Y,"-").concat(ne.index))}))}else if(I.type==="option")return L(I,"".concat(I.index))});else if(R){var se=z({inputValue:O});if(se===null)return null;Q=b.createElement(y,S,se)}else{var xe=ge({inputValue:O});if(xe===null)return null;Q=b.createElement(N,S,xe)}var me={minMenuHeight:T,maxMenuHeight:D,menuPlacement:B,menuPosition:U,menuShouldScrollIntoView:te},_=b.createElement(Qw,$e({},S,me),function(I){var E=I.ref,W=I.placerProps,Y=W.placement,ce=W.maxHeight;return b.createElement(m,$e({},S,me,{innerRef:E,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:R,placement:Y}),b.createElement(b3,{captureEnabled:j,onTopArrive:le,onBottomArrive:ie,lockEnabled:q},function(ee){return b.createElement(g,$e({},S,{innerRef:function(ve){i.getMenuListRef(ve),ee(ve)},innerProps:{role:"listbox","aria-multiselectable":S.isMulti,id:i.getElementId("listbox")},isLoading:R,maxHeight:ce,focusedOption:w}),Q)}))});return G||U==="fixed"?b.createElement(x,$e({},S,{appendTo:G,controlElement:this.controlRef,menuPlacement:B,menuPosition:U}),_):_}},{key:"renderFormField",value:function(){var i=this,d=this.props,p=d.delimiter,h=d.isDisabled,m=d.isMulti,g=d.name,x=d.required,y=this.state.selectValue;if(x&&!this.hasValue()&&!h)return b.createElement(N3,{name:g,onFocus:this.onValueInputFocus});if(!(!g||h))if(m)if(p){var N=y.map(function(w){return i.getOptionValue(w)}).join(p);return b.createElement("input",{name:g,type:"hidden",value:N})}else{var k=y.length>0?y.map(function(w,M){return b.createElement("input",{key:"i-".concat(M),name:g,type:"hidden",value:i.getOptionValue(w)})}):b.createElement("input",{name:g,type:"hidden",value:""});return b.createElement("div",null,k)}else{var S=y[0]?this.getOptionValue(y[0]):"";return b.createElement("input",{name:g,type:"hidden",value:S})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,d=this.state,p=d.ariaSelection,h=d.focusedOption,m=d.focusedValue,g=d.isFocused,x=d.selectValue,y=this.getFocusableOptions();return b.createElement(u3,$e({},i,{id:this.getElementId("live-region"),ariaSelection:p,focusedOption:h,focusedValue:m,isFocused:g,selectValue:x,focusableOptions:y,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),d=i.Control,p=i.IndicatorsContainer,h=i.SelectContainer,m=i.ValueContainer,g=this.props,x=g.className,y=g.id,N=g.isDisabled,k=g.menuIsOpen,S=this.state.isFocused,w=this.commonProps=this.getCommonProps();return b.createElement(h,$e({},w,{className:x,innerProps:{id:y,onKeyDown:this.onKeyDown},isDisabled:N,isFocused:S}),this.renderLiveRegion(),b.createElement(d,$e({},w,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:N,isFocused:S,menuIsOpen:k}),b.createElement(m,$e({},w,{isDisabled:N}),this.renderPlaceholderOrValue(),this.renderInput()),b.createElement(p,$e({},w,{isDisabled:N}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,d){var p=d.prevProps,h=d.clearFocusValueOnUpdate,m=d.inputIsHiddenAfterUpdate,g=d.ariaSelection,x=d.isFocused,y=d.prevWasFocused,N=d.instancePrefix,k=i.options,S=i.value,w=i.menuIsOpen,M=i.inputValue,j=i.isMulti,O=Ug(S),R={};if(p&&(S!==p.value||k!==p.options||w!==p.menuIsOpen||M!==p.inputValue)){var z=w?H3(i,O):[],T=w?n0(pi(i,O),"".concat(N,"-option")):[],D=h?V3(d,O):null,A=U3(d,z),B=pd(T,A);R={selectValue:O,focusedOption:A,focusedOptionId:B,focusableOptionsWithIds:T,focusedValue:D,clearFocusValueOnUpdate:!1}}var U=m!=null&&i!==p?{inputIsHidden:m,inputIsHiddenAfterUpdate:void 0}:{},G=g,q=x&&y;return x&&!q&&(G={value:si(j,O,O[0]||null),options:O,action:"initial-input-focus"},q=!y),g?.action==="initial-input-focus"&&(G=null),qe(qe(qe({},R),U),{},{prevProps:i,ariaSelection:G,prevWasFocused:q})}}]),s})(b.Component);Cx.defaultProps=I3;var q3=b.forwardRef(function(l,r){var s=s2(l);return b.createElement(Cx,$e({ref:r},s))}),r0=q3;function md({containerClass:l,name:r,value:s,options:o,onChange:i,disabled:d=!1,hideLabel:p=!1,hasPin:h,isPinned:m=!1,onTogglePin:g,hasError:x=!1,forceModalOpen:y=!1,onModalClose:N}){const S=Si(ye=>ye.theme)==="dark",[w,M]=b.useState(!1),j=b.useRef(null),O=b.useRef(null),[R,z]=b.useState([]),[T,D]=b.useState(!1),A=y||w,B=z0(),U=ye=>{if(!Array.isArray(o))return o?.[ye]},G=Array.isArray(o)?o:U("options")??[],q=!!U("image_upload"),te=U("image_folder")??"input",ge="__null__",le=G.some(ye=>ye===null),ie=G.filter(ye=>ye!==null).map(ye=>String(ye)),L=Array.from(new Set([...ie,...R])),Q=s===null?ge:String(s??""),se=Q.split(/[\\/]/).pop()??Q,xe=L.includes(Q)||L.includes(se),me=s!=null&&Q!==""&&!xe,_=xe?L.includes(Q)?Q:se:Q,I=[];(s===null||le)&&I.push({value:ge,label:"None"}),me&&I.push({value:Q,label:Q,isMissing:!0}),I.push(...L.map(ye=>({value:ye,label:ye})));const E=I.find(ye=>ye.value===_)??null,W=G.filter(ye=>ye!==null).length,Y=y?!0:B&&!(W>0&&W<5),ce=q&&te==="input",ee=ye=>{const Oe=ye.replace(/\\/g,"/"),Le=Oe.lastIndexOf("/"),it=Le>=0?Oe.slice(Le+1):Oe,vt=Le>=0?Oe.slice(0,Le):"";return qn(it,vt,"input")},ne=b.useMemo(()=>ce?{DropdownIndicator:null,IndicatorSeparator:null,Option:Oe=>{const{data:Le}=Oe,vt=Le.value!==ge&&!Le.isMissing&&!!Le.value?ee(Le.value):null;return u.jsx(mx.Option,{...Oe,children:u.jsxs("div",{className:"flex items-center gap-2",children:[vt&&u.jsx("img",{src:vt,alt:"",className:"w-[72px] h-[72px] rounded-sm object-cover bg-gray-100 shrink-0",loading:"lazy",decoding:"async"}),u.jsx("span",{className:"truncate",children:Le.label})]})})}}:{DropdownIndicator:null,IndicatorSeparator:null},[ce]),ve=["rs-container",h?"rs-has-pin":"rs-no-pin",x?"rs-error":"",me?"rs-missing":"",d?"rs-disabled":""].filter(Boolean).join(" "),Te=typeof document>"u"?null:document.body,We=()=>{M(!1),N?.()},de=ye=>{ye&&i(ye.value===ge?null:ye.value)},Ne=ye=>{de(ye),We()},Ce=()=>{d||T||O.current?.click()},_e=async ye=>{const Oe=ye.target.files?.[0];if(Oe){D(!0);try{const Le=await j0(Oe,{type:te}),it=Le.subfolder?`${Le.subfolder}/${Le.name}`:Le.name;z(vt=>vt.includes(it)?vt:[...vt,it]),i(it)}catch(Le){console.error("Failed to upload image:",Le)}finally{D(!1),ye.target.value=""}}},Ue=q?u.jsx("button",{type:"button",className:`w-full py-2 px-3 rounded-lg border text-sm font-medium transition-colors ${d||T?"opacity-60 cursor-not-allowed border-gray-200 text-gray-400 bg-white":"border-gray-200 text-gray-700 bg-white hover:border-gray-300 hover:text-gray-900"}`,onClick:Ce,disabled:d||T,children:u.jsxs("span",{className:"inline-flex items-center justify-center gap-2",children:[u.jsx(Pd,{className:"w-4 h-4"}),T?"Uploading...":"Load from camera roll"]})}):null,Qe="#111827",Se="#6b7280";return Y?u.jsxs("div",{className:`${l} combo-control-root combo-control-modal`,children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),u.jsxs("div",{className:`combo-control-trigger relative w-full p-3 comfy-input text-base flex items-center justify-between min-h-[46px] ${d?"opacity-60 cursor-not-allowed":""} ${x?"border-red-700 ring-1 ring-red-700":""}`,onClick:()=>!d&&M(!0),children:[u.jsx("span",{className:`combo-control-trigger-label truncate min-w-0 flex-1 ${E?"text-gray-900 dark:text-[#e5e7eb]":"text-gray-400 dark:text-gray-500"} ${h?"pr-16":"pr-6"}`,children:E?E.label:"Select..."}),u.jsxs("div",{className:"combo-control-trigger-icons flex items-center absolute right-0 top-0 bottom-0 pointer-events-none",children:[u.jsx("div",{className:"combo-control-chevron px-2 text-gray-400",children:u.jsx(yi,{className:"w-5 h-5"})}),h&&u.jsx("div",{className:"combo-control-pin pointer-events-auto px-2",children:u.jsx(Na,{isPinned:m,onToggle:g})})]})]}),me&&u.jsx("div",{className:"mt-1 text-xs text-red-700",children:"Missing on ComfyUI server"}),q&&u.jsxs("div",{className:"combo-control-upload mt-2",children:[Ue,u.jsx("input",{ref:O,type:"file",accept:"image/*",className:"hidden",onChange:_e})]}),u.jsx(Jd,{title:r,isOpen:A,onClose:We,children:u.jsx(r0,{className:ve,classNamePrefix:"rs",options:I,value:E,onChange:Ne,isSearchable:!0,autoFocus:!y,menuIsOpen:y?void 0:!0,controlShouldRenderValue:!0,placeholder:"Search...",filterOption:Vd({ignoreAccents:!0,ignoreCase:!0,trim:!0,matchFrom:"any"}),styles:{menu:ye=>({...ye,position:"static",boxShadow:"none",border:"none",marginTop:"0.5rem",borderRadius:0,backgroundColor:S?"transparent":"#ffffff"}),menuList:ye=>({...ye,maxHeight:"calc(100vh - 160px)",height:"auto",paddingBottom:"2rem",overflowY:"auto",overflowX:"auto",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",touchAction:"pan-y"}),option:(ye,Oe)=>S?ye:{...ye,color:Qe,backgroundColor:Oe.isSelected?"#e5e7eb":Oe.isFocused?"#f3f4f6":"transparent"},singleValue:ye=>({...ye,color:S?ye.color:Qe}),input:ye=>({...ye,color:S?ye.color:Qe}),placeholder:ye=>({...ye,color:S?ye.color:Se}),control:ye=>({...ye,borderColor:"#3b82f6",boxShadow:"0 0 0 1px #3b82f6",backgroundColor:S?ye.backgroundColor:"#ffffff",color:S?ye.color:Qe})},components:ne,noOptionsMessage:()=>"No matches"})})]}):u.jsxs("div",{className:`${l} combo-control-root combo-control-inline`,children:[!p&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),u.jsxs("div",{className:"combo-control-input-wrapper relative rs-scroll-target",ref:j,children:[u.jsx(r0,{className:ve,classNamePrefix:"rs",options:I,value:E,onChange:de,isSearchable:!0,isDisabled:d,filterOption:Vd({ignoreAccents:!0,ignoreCase:!0,trim:!0,matchFrom:"any"}),menuPortalTarget:Te,menuPosition:"fixed",menuPlacement:"bottom",menuShouldScrollIntoView:!1,styles:{menuPortal:ye=>({...ye,zIndex:200}),menuList:ye=>({...ye,overflowY:"auto",overflowX:"auto",overscrollBehaviorY:"contain",overscrollBehaviorX:"contain",touchAction:"pan-y"}),option:(ye,Oe)=>S?ye:{...ye,color:Qe,backgroundColor:Oe.isSelected?"#e5e7eb":Oe.isFocused?"#f3f4f6":"transparent"},singleValue:ye=>({...ye,color:S?ye.color:Qe}),input:ye=>({...ye,color:S?ye.color:Qe}),placeholder:ye=>({...ye,color:S?ye.color:Se})},components:ne,noOptionsMessage:()=>"No matches"}),u.jsxs("div",{className:"combo-control-icons absolute right-0 top-0 bottom-0 flex items-center pointer-events-none",children:[u.jsx("div",{className:"combo-control-chevron px-2 text-gray-400",children:u.jsx(yi,{className:"w-5 h-5"})}),h&&u.jsx("div",{className:"combo-control-pin pointer-events-auto px-2",children:u.jsx(Na,{isPinned:m,onToggle:g})}),!h&&u.jsx("div",{className:"w-3"})]})]}),me&&u.jsx("div",{className:"mt-1 text-xs text-red-700",children:"Missing on ComfyUI server"}),q&&u.jsxs("div",{className:"mt-2",children:[Ue,u.jsx("input",{ref:O,type:"file",accept:"image/*",className:"hidden",onChange:_e})]})]})}function il({name:l,type:r,value:s,options:o,onChange:i,disabled:d=!1,hasError:p=!1,hideLabel:h=!1,compact:m=!1,forceModalOpen:g=!1,onModalClose:x,seedMode:y,onSeedModeChange:N,hasPin:k,isPinned:S=!1,onTogglePin:w,containerClass:M}){const[j,O]=b.useState(!1),R=()=>{d||O(!0)},z=()=>{O(!1),x?.()},T=r==="COMBO"||Array.isArray(o?.options),D=["INT","FLOAT"].includes(r.toUpperCase()),A=r.toUpperCase()==="STRING",B=l.replace(/_/g," "),U=k??(!!w||S),G=M??"space-y-2 w-full",q=M??(m?"mb-0":"mb-3"),te={name:l,value:s,options:o,onChange:i,disabled:d,hideLabel:h,hasError:p,forceModalOpen:g,onModalClose:x,containerClass:G,hasPin:U,isPinned:S,onTogglePin:w},ge=()=>T?u.jsx(md,{...te}):D?u.jsx(_d,{...te,type:r,seedMode:y,onSeedModeChange:N}):A?u.jsx(kg,{...te}):u.jsxs("div",{className:"unsupported-widget-type text-xs text-gray-400 italic",children:["Unsupported: ",r]}),le=g||j;if(r==="POWER_LORA_HEADER")return u.jsx("div",{className:`${q} power-lora-header flex items-center justify-between p-3 bg-blue-50/50 dark:bg-blue-900/20 rounded-lg`,children:u.jsxs("div",{className:"power-lora-header-content flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",onChange:ie=>i(ie.target.checked),className:"w-5 h-5 rounded cursor-pointer",disabled:d}),u.jsx("span",{className:"power-lora-header-label text-sm font-semibold text-blue-900 dark:text-blue-100 uppercase tracking-wider",children:"Toggle All Loras"})]})});if(r==="POWER_LORA"){const ie=s||{on:!0,lora:"",strength:1},L=o||{},Q=L.choices,se=L.showSeparate,xe=(me,_)=>{i({...ie,[me]:_})};return u.jsxs("div",{className:`${q} power-lora-row flex flex-col gap-2 p-3 border border-gray-200 dark:border-gray-800 rounded-lg bg-gray-50/50 dark:bg-gray-900/50 ${ie.on?"":"opacity-60"}`,children:[u.jsxs("div",{className:"power-lora-row-actions flex items-center gap-2",children:[u.jsx("button",{type:"button",onClick:()=>xe("on",!ie.on),className:`power-lora-enabled-button flex-1 py-2 rounded-lg text-sm font-semibold transition-colors ${ie.on?"bg-blue-600 text-white":"bg-gray-700 text-white"} ${d?"opacity-60 cursor-not-allowed":""}`,disabled:d,children:ie.on?"Enabled":"Disabled"}),u.jsx("button",{type:"button",onClick:()=>i(null),className:`power-lora-remove-button flex-1 py-2 rounded-lg text-sm font-semibold bg-red-600 text-white hover:bg-red-700 transition-colors ${d?"opacity-60 cursor-not-allowed":""}`,disabled:d,children:"Remove"})]}),u.jsx("div",{className:"power-lora-row-header flex items-center gap-3",children:u.jsx("div",{className:"power-lora-select flex-grow min-w-0",children:u.jsx(il,{name:"",hideLabel:!0,compact:!0,type:"COMBO",value:ie.lora,options:Q,onChange:me=>xe("lora",me),disabled:d})})}),u.jsxs("div",{className:"power-lora-strengths flex flex-col",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 ml-1",children:se?"Model strength":"Strength"}),u.jsx("div",{className:"power-lora-strength-row flex items-center gap-3",children:u.jsx("div",{className:"power-lora-strength-input flex-grow",children:u.jsx(il,{name:"",hideLabel:!0,compact:!0,type:"FLOAT",value:ie.strength,options:{min:-10,max:10,step:.01},onChange:me=>xe("strength",me),disabled:d})})}),se&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 ml-1",children:"Clip strength"}),se&&u.jsx("div",{className:"power-lora-strength-row flex items-center gap-3",children:u.jsx("div",{className:"power-lora-strength-input flex-grow",children:u.jsx(il,{name:"",hideLabel:!0,compact:!0,type:"FLOAT",value:ie.strengthTwo??ie.strength,options:{min:-10,max:10,step:.01},onChange:me=>xe("strengthTwo",me),disabled:d})})})]})]})}if(r==="POWER_LORA_ADD"){const ie=()=>{i({on:!0,lora:"None",strength:1,model_strength:1,clip_strength:1})};return u.jsx("div",{className:`${q} power-lora-add`,children:u.jsxs("button",{onClick:ie,className:"w-full py-2 px-4 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg text-sm font-medium text-gray-500 hover:text-blue-500 hover:border-blue-500 transition-all flex items-center justify-center gap-2",disabled:d,children:[u.jsx(Pd,{className:"w-5 h-5"}),"Add Lora"]})})}return A?u.jsx(kg,{...te}):T?u.jsx(md,{...te}):D?u.jsx(_d,{...te,type:r,seedMode:y,onSeedModeChange:N}):r.toUpperCase()==="BOOLEAN"?u.jsx(md,{...te,value:String(!!s),options:["true","false"],onChange:ie=>i(String(ie).toLowerCase()==="true")}):u.jsxs("div",{id:`widget-control-${l}`,className:`widget-control-root ${m?"compact-control":""}`,children:[!h&&u.jsxs("div",{id:`widget-label-container-${l}`,className:"flex items-center justify-between mb-1.5 px-1",children:[u.jsx("label",{id:`widget-label-${l}`,className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider truncate mr-2",children:B}),p&&u.jsx("div",{id:`widget-error-icon-${l}`,className:"text-red-500",title:"Error in this input",children:u.jsx(L0,{className:"w-3.5 h-3.5"})})]}),u.jsxs("div",{id:`widget-trigger-${l}`,className:`
          control-trigger
          relative flex items-center justify-between
          bg-gray-50 border border-gray-200 rounded-xl px-3 py-2.5
          active:bg-gray-100 active:border-gray-300 transition-all
          ${d?"opacity-50 grayscale pointer-events-none":"cursor-pointer"}
          ${p?"border-red-300 bg-red-50/30":""}
        `,onClick:R,children:[u.jsx("div",{id:`widget-value-display-${l}`,className:"value-display flex-1 truncate text-sm font-medium text-gray-900",children:T?s||"Select...":s!=null?String(s):"Empty"}),u.jsx("div",{id:`widget-icon-container-${l}`,className:"icon-container ml-2 text-gray-400"})]}),u.jsx(Jd,{isOpen:le,title:B,onClose:z,children:u.jsx("div",{id:`modal-control-wrapper-${l}`,className:"p-2",children:ge()})})]})}function W3({node:l,isBypassed:r,isKSampler:s,workflowExists:o,nodeTypesExists:i,visibleInputWidgets:d,visibleWidgets:p,errorInputNames:h,onUpdateNodeWidget:m,onUpdateNodeWidgets:g,getWidgetIndexForInput:x,findSeedWidgetIndex:y,setSeedMode:N,isWidgetPinned:k,toggleWidgetPin:S}){const w=Array.isArray(l.widgets_values)?l.widgets_values:[],M=J(E=>E.nodeTypes),j=J(E=>E.workflow),O=J(E=>E.bypassAllInGroup),R=jn(E=>E.seedModes[l.id]),z=jn(E=>E.seedLastValues[l.id]??null),T=l.type==="Fast Groups Bypasser (rgthree)",D=!s&&o&&i?y():null,A=D!==null?D+1:null,B=A!==null?w[A]:void 0,U=typeof B=="string",G=!s&&D!==null&&!U,q=G?d.filter(E=>E.name!=="seed"&&E.name!=="noise_seed"):d,te=G?p.filter(E=>E.name!=="seed"&&E.name!=="noise_seed"):p,ge=p.length>0||d.length>0,le=b.useMemo(()=>{if(!T||!j)return[];const E=l.properties??{},W=typeof E.matchColors=="string"?E.matchColors:"",Y=typeof E.matchTitle=="string"?E.matchTitle:"",ce=E.showAllGraphs!==!1,ee=typeof E.sort=="string"?E.sort:"position",ne=typeof E.customSortAlphabet=="string"?E.customSortAlphabet:"",ve=we=>{const Ae=we.replace("#","").trim();return/^[0-9a-f]{3}$/i.test(Ae)?`#${Ae.replace(/(.)/g,"$1$1").toLowerCase()}`:/^[0-9a-f]{6}$/i.test(Ae)?`#${Ae.toLowerCase()}`:null},Te=we=>{if(typeof document>"u")return null;const Ae=document.createElement("span");if(Ae.style.color=we,!document.body)return null;document.body.appendChild(Ae);const Ke=getComputedStyle(Ae).color;document.body.removeChild(Ae);const Ye=Ke.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(!Ye)return null;const[,et,Ze,dt]=Ye.map(Number);return[et,Ze,dt].some(re=>Number.isNaN(re))?null:`#${[et,Ze,dt].map(re=>re.toString(16).padStart(2,"0")).join("")}`},We={nocolor:"#353535",red:"#553333",brown:"#593930",green:"#335533",blue:"#333355",pale_blue:"#3f5159",cyan:"#335555",purple:"#553355",yellow:"#665533",black:"#000000"},de=we=>{const Ae=[],Ke=we.trim().toLowerCase();if(Ke){Ae.push(Ke);const Ze=We[Ke.replace(/\s+/g,"")]??We[Ke];Ze&&Ae.push(Ze)}const Ye=ve(we);if(Ye)return Ae.push(Ye),Ae;const et=Te(we);return et&&Ae.push(et),Ae},Ne=we=>{const Ae=we.replace("#","").trim();if(!/^[0-9a-f]{6}$/i.test(Ae))return null;const Ke=parseInt(Ae.slice(0,2),16)/255,Ye=parseInt(Ae.slice(2,4),16)/255,et=parseInt(Ae.slice(4,6),16)/255,Ze=Math.max(Ke,Ye,et),dt=Math.min(Ke,Ye,et),re=Ze-dt;let rt=0;re!==0&&(Ze===Ke?rt=(Ye-et)/re%6:Ze===Ye?rt=(et-Ke)/re+2:rt=(Ke-Ye)/re+4,rt=Math.round(rt*60),rt<0&&(rt+=360));const Xe=(Ze+dt)/2,gt=re===0?0:re/(1-Math.abs(2*Xe-1));return{h:rt,s:gt,l:Xe}},Ce=W.split(",").map(we=>we.trim()).filter(Boolean).flatMap(de),_e=new Set(Ce),Ue=Ce.map(we=>ve(we)??Te(we)).filter(we=>!!we).map(we=>Ne(we)).filter(we=>!!we);let Qe=null;if(Y.trim())try{Qe=new RegExp(Y,"i")}catch(we){return console.error(we),[]}let Se=null;if(ee==="custom alphabet"){const we=ne.replace(/\n/g,"").trim().toLowerCase();we&&(Se=we.includes(",")?we.split(",").map(Ae=>Ae.trim()).filter(Boolean):we.split("")),Se?.length||(Se=null)}const ye=new Map(j.nodes.map(we=>[we.id,we])),Oe=[],Le=we=>{if(_e.size>0){const Ae=we.color?de(we.color):[],Ke=we.color?ve(we.color):null,Ye=Ke?Ne(Ke):null,et=Ae.some(dt=>_e.has(dt))||(Ke?_e.has(Ke):!1),Ze=!!(Ye&&Ue.some(dt=>{const re=Math.abs(dt.h-Ye.h);return Math.min(re,360-re)<=25}));if(!et&&!Ze)return!1}return!(Qe&&!Qe.test(we.title||""))},it=(we,Ae)=>{if(!Le(we))return;const Ke=O0(j,we.id,Ae);let Ye=!1;for(const et of Ke){const Ze=ye.get(et);if(!(!Ze||Ze.mode===4)){Ye=!0;break}}Oe.push({key:`${Ae??"root"}-${we.id}`,label:we.title?.trim()||`Group ${we.id}`,groupId:we.id,subgraphId:Ae,color:we.color,isEngaged:Ye,isDisabled:Ke.size===0,group:we})},vt=l.properties?.__mobile_origin,ht=vt?.scope==="subgraph"?vt.subgraphId:null;if(ce){for(const we of j.groups??[])it(we,null);for(const we of j.definitions?.subgraphs??[])for(const Ae of we.groups??[])it(Ae,we.id)}else if(ht){const we=j.definitions?.subgraphs?.find(Ae=>Ae.id===ht);for(const Ae of we?.groups??[])it(Ae,ht)}else for(const we of j.groups??[])it(we,null);return ee==="alphanumeric"?Oe.sort((we,Ae)=>we.label.localeCompare(Ae.label)):Se?.length?Oe.sort((we,Ae)=>{const Ke=we.label.toLowerCase(),Ye=Ae.label.toLowerCase();let et=-1,Ze=-1;for(const[dt,re]of Se.entries())if(et<0&&Ke.startsWith(re)&&(et=dt),Ze<0&&Ye.startsWith(re)&&(Ze=dt),et>-1&&Ze>-1)break;if(et>-1&&Ze>-1){const dt=et-Ze;return dt===0?Ke.localeCompare(Ye):dt}return et>-1?-1:Ze>-1?1:Ke.localeCompare(Ye)}):Oe.sort((we,Ae)=>{const Ke=we.group.bounding,Ye=Ae.group.bounding;return Ke[1]!==Ye[1]?Ke[1]-Ye[1]:Ke[0]-Ye[0]}),Oe},[T,l.properties,j]),ie=E=>()=>{E.isDisabled||O(E.groupId,E.isEngaged,E.subgraphId??void 0)},L=E=>{typeof E=="string"&&["fixed","randomize","increment","decrement"].includes(E)&&N(l.id,E)},Q=E=>W=>{m(l.id,E,W),L(W)},se=E=>W=>{m(l.id,E,W,"seed"),N(l.id,"fixed")},xe=E=>()=>{if(!M)return;const W=Mo(M,l);m(l.id,E,W,"seed"),N(l.id,"fixed")},me=E=>()=>{typeof z=="number"&&(m(l.id,E,z,"seed"),N(l.id,"fixed"))},_=E=>W=>{m(l.id,E.widgetIndex,W,E.name)},I=E=>W=>{if(E.type==="POWER_LORA_HEADER"&&typeof W=="boolean"){const{loraIndices:Y}=E.options||{};if(Y){const ce={},ee=l.widgets_values;Array.isArray(ee)&&(Y.forEach(ne=>{const ve=ee[ne];ce[ne]={...ve,on:W}}),g(l.id,ce))}}else m(l.id,E.widgetIndex,W,E.name)};return!ge&&le.length===0?null:u.jsxs("div",{className:"mb-3",children:[le.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-300 mb-1.5 uppercase tracking-wide",children:"Groups"}),u.jsx("div",{className:"space-y-2",children:le.map(E=>u.jsxs("div",{className:`flex items-center justify-between gap-3 rounded-lg border px-3 py-2 bg-gray-50/40 dark:bg-gray-900/60 ${E.isDisabled?"border-gray-200 dark:border-white/10 opacity-60":"border-gray-200 dark:border-white/15"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[u.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:E.color||"#9ca3af"}}),u.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-100 truncate",children:E.label})]}),u.jsx("button",{type:"button",role:"switch","aria-checked":E.isEngaged,onClick:ie(E),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${E.isEngaged?"bg-emerald-500":"bg-gray-300"} ${E.isDisabled?"cursor-not-allowed":"cursor-pointer"}`,children:u.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition ${E.isEngaged?"translate-x-5":"translate-x-1"}`})})]},E.key))})]}),ge&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1.5 uppercase tracking-wide",children:"Parameters"}),s&&o&&i&&(()=>{const E=x("seed");if(E===null)return null;const W=w[E],Y=E+1,ce=w[Y],ee=["fixed","increment","decrement","randomize"],ve=!!l.inputs.find(Te=>Te.name==="noise_seed")?.link;return u.jsxs("div",{className:"mb-3",children:[u.jsx(il,{name:"seed",type:"INT",value:W,onChange:Te=>m(l.id,E,Te,"seed"),disabled:r,hasError:h.has("seed")}),Y<w.length&&!ve&&u.jsx(il,{name:"Control mode",type:"COMBO",value:ce,options:ee,onChange:Q(Y)})]})})(),!s&&o&&i&&(()=>{const E=D;if(E===null)return null;const W=["fixed","randomize","increment","decrement"],Y=typeof B=="string"&&!W.includes(B)?[...W,B]:W;if(l.inputs.find(Qe=>Qe.name==="seed"||Qe.name==="noise_seed")?.link!=null)return null;if(U){const Qe=E+1;return u.jsx("div",{className:"mb-3",children:u.jsx(il,{name:"Seed control",type:"COMBO",value:B,options:Y,onChange:Q(Qe)})})}const ne=d.find(Qe=>Qe.name==="seed"||Qe.name==="noise_seed")?.options??{},ve=typeof ne.min=="number"?ne.min:void 0,Te=typeof ne.max=="number"?ne.max:void 0,We=typeof ne.step=="number"?ne.step:void 0,de=Number(w[E]??0),Ne=C0(de),Ce=R??Ne??"fixed",_e=$d(de)?typeof z=="number"?z:0:de,Ue=h.has("seed")||h.has("noise_seed");return u.jsxs("div",{className:"mb-3",children:[u.jsx(_d,{name:"seed",value:_e,onChange:se(E),disabled:r,min:ve,max:Te,step:We,hasError:Ue}),u.jsx(il,{name:"Seed control",type:"COMBO",value:Ce,options:W,onChange:L}),u.jsxs("div",{className:"grid gap-2 mt-2",children:[u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:()=>N(l.id,"randomize"),disabled:r,children:"Randomize each time"}),u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:xe(E),disabled:r,children:"New fixed random"}),u.jsx("button",{type:"button",className:"w-full py-2 px-3 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:border-blue-500 transition",onClick:me(E),disabled:r||typeof z!="number",children:"Use last queued seed"})]})]})})(),q.map(E=>u.jsx("div",{className:r?"opacity-80":"",children:u.jsx(il,{name:E.name,type:E.type,value:E.value,options:E.options,onChange:_(E),disabled:r,isPinned:k(E.widgetIndex),onTogglePin:()=>S(E.widgetIndex,E.name,E.type,E.options),hasError:h.has(E.name)})},`input-widget-${E.name}`)),te.map(E=>u.jsx("div",{className:r?"opacity-80":"",children:u.jsx(il,{name:E.name,type:E.type,value:E.value,options:E.options,onChange:I(E),disabled:r,isPinned:k(E.widgetIndex),onTogglePin:()=>S(E.widgetIndex,E.name,E.type,E.options),hasError:h.has(E.name)})},`widget-${E.widgetIndex}`)),l.type==="PrimitiveNode"&&(()=>{const E=l.outputs?.[0]?.type,W=String(E).toUpperCase();if(W!=="INT"&&W!=="FLOAT"||w.length<2)return null;const Y=w[1],ce=["fixed","increment","decrement","randomize"];return u.jsx("div",{className:"mb-3",children:u.jsx(il,{name:"Control mode",type:"COMBO",value:Y,options:ce,onChange:ee=>m(l.id,1,ee),disabled:r})})})()]})]})}const F3=[],$3=b.memo(function({node:r,isExecuting:s,isConnectionHighlighted:o=!1,errorBadgeLabel:i,onImageClick:d,inGroup:p=!1}){const h=J(oe=>oe.nodeTypes),m=J(oe=>oe.workflow),g=J(oe=>oe.updateNodeWidget),x=J(oe=>oe.updateNodeWidgets),y=J(oe=>oe.updateNodeTitle),N=J(oe=>oe.toggleBypass),k=J(oe=>oe.toggleNodeFold),S=J(oe=>oe.hideNode),w=J(oe=>oe.setConnectionHighlightMode),M=J(oe=>oe.connectionHighlightModes[r.id]??"off"),j=jn(oe=>oe.setSeedMode),O=J(oe=>oe.currentWorkflowKey),R=Gn(oe=>oe.pinnedWidget?.nodeId===r.id?oe.pinnedWidget:null),z=Gn(oe=>oe.setPinnedWidget),T=bn(oe=>oe.bookmarkedNodeIds),D=bn(oe=>oe.toggleNodeBookmark),A=J(oe=>oe.nodeOutputs[String(r.id)]),B=Jt(oe=>oe.nodeErrors[String(r.id)]),U=J(oe=>oe.progress),G=J(oe=>oe.executingPromptId),q=J(oe=>oe.workflowDurationStats),te=J(oe=>oe.isExecuting),ge=lt(oe=>oe.running),le=G||(ge[0]?.prompt_id??null),ie=Ho({workflow:m,runKey:le,isRunning:te||ge.length>0,workflowDurationStats:q}),L=ie===100?100:U,Q=b.useCallback((oe,tt)=>{j(oe,tt,{workflow:m,nodeTypes:h,updateNodeWidgets:x})},[h,j,x,m]),se=b.useCallback(oe=>{z(oe,O)},[O,z]),xe=A??F3,[me,_]=b.useState(null),[I,E]=b.useState(!1),W=b.useRef(null),[Y,ce]=b.useState(!1),[ee,ne]=b.useState(!1),[ve,Te]=b.useState(""),We=b.useRef(null),de=b.useRef(0),Ne=b.useRef(null),[Ce,_e]=b.useState(null);b.useEffect(()=>{const oe=tt=>{const Ht=tt.detail;if(Ht.nodeId===r.id){_e(Ht.label);const Vt=setTimeout(()=>_e(null),1e3);return()=>clearTimeout(Vt)}};return window.addEventListener("node-show-label",oe),()=>window.removeEventListener("node-show-label",oe)},[r.id]);const Ue=B&&B.length>0,Qe=b.useMemo(()=>B?new Set(B.map(oe=>oe.inputName).filter(oe=>!!oe)):new Set,[B]),Se=xe.length>0?xe[xe.length-1]:null,ye=Se?`${Se.filename}|${Se.subfolder}|${Se.type}`:null,Oe=me?`${me.filename}|${me.subfolder}|${me.type}`:null;b.useEffect(()=>{if(!Se||ye===Oe)return;const oe=qn(Se.filename,Se.subfolder,Se.type),tt=new Image;tt.onload=()=>_(Se),tt.src=oe},[ye,Oe,Se]);const Le=h?.[r.type],it=b.useMemo(()=>{const oe=r.title;return typeof oe=="string"&&oe.trim()?oe.trim():null},[r]),vt=it||Le?.display_name||r.type,ht=r.type==="KSampler",we=r.mode===4,Ae=!!r.flags?.collapsed,Ke=/LoadImage/i.test(r.type),et=b.useMemo(()=>!Ke||!m||!h?null:Y3(m,h,r),[Ke,r,h,m])??me,Ze=b.useMemo(()=>{const oe=Yd(h,r);return ht?oe.filter(tt=>tt.name!=="seed"):oe},[h,r,ht]),dt=b.useMemo(()=>Qd(h,r),[h,r]),re=b.useMemo(()=>dt.filter(oe=>!oe.connected),[dt]),rt=b.useMemo(()=>Ze.filter(oe=>!oe.connected),[Ze]),Xe=b.useMemo(()=>{const oe=r.properties,tt=["text","note","description","label","title"];if(oe)for(const Vt of tt){const un=oe[Vt];if(typeof un=="string"&&un.trim())return un}if(/note|comment|sticky|label/i.test(r.type)&&Array.isArray(r.widgets_values)){const Vt=r.widgets_values.find(un=>typeof un=="string"&&un.trim());if(typeof Vt=="string"&&Vt.trim())return Vt}return null},[r.properties,r.widgets_values,r.type]),gt=b.useMemo(()=>{if(!/note|comment|sticky|label/i.test(r.type)||!Array.isArray(r.widgets_values))return null;const tt=r.widgets_values.findIndex(Ht=>typeof Ht=="string"&&Ht.trim());return tt>=0?tt:null},[r.type,r.widgets_values]),$t=oe=>!m||!h?null:xr(m,h,r,oe),cl=()=>!m||!h?null:Ca(m,h,r),dl=oe=>{gt!==null&&g(r.id,gt,oe)},fl=b.useMemo(()=>{if(!Xe)return null;const oe=[],tt=/(https?:\/\/[^\s]+)/g;let Ht=0,Vt,un=0;for(;(Vt=tt.exec(Xe))!==null;){const[dn]=Vt,$n=Vt.index;$n>Ht&&oe.push(Xe.slice(Ht,$n)),oe.push(u.jsx("a",{href:dn,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline break-all",children:dn},`note-link-${un++}`)),Ht=$n+dn.length}return Ht<Xe.length&&oe.push(Xe.slice(Ht)),oe},[Xe]),Cn=()=>{const oe=Date.now();oe-de.current<300&&ce(!0),de.current=oe},sn=b.useMemo(()=>{const oe=[];return re.forEach(tt=>{oe.push({widgetIndex:tt.widgetIndex,name:tt.name,type:tt.type,options:tt.options})}),rt.forEach(tt=>{oe.push({widgetIndex:tt.widgetIndex,name:tt.name,type:tt.type,options:tt.options})}),oe},[re,rt]),xn=b.useCallback(oe=>{if(oe.link!=null)return!1;if(oe.widget)return!0;const tt=Le?.input?.required?.[oe.name]||Le?.input?.optional?.[oe.name];if(!tt)return!1;const[Ht,Vt]=tt;if(Array.isArray(Ht))return!0;const un=String(Ht).toUpperCase(),dn=Object.prototype.hasOwnProperty.call(Vt??{},"default");return["INT","FLOAT","BOOLEAN","STRING"].includes(un)||dn},[Le]),Me=b.useMemo(()=>r.inputs.filter(oe=>!(xn(oe)||String(oe.type).toUpperCase()==="OPT_CONNECTION"&&oe.link==null)),[r.inputs,xn]),Re=b.useMemo(()=>r.outputs.filter(oe=>!((oe.name||"").toLowerCase().replace(/[_\s]/g,"")==="showhelp"||String(oe.type).toUpperCase()==="OPT_CONNECTION"&&!oe.links?.length)),[r.outputs]),Be=r.outputs.some(oe=>String(oe.type).toUpperCase()==="IMAGE"),Pe=!!(Le?.output_node||/PreviewImage|SaveImage|SaveAnimatedPNG|SaveAnimatedWEBP|SaveVideo/i.test(r.type)),F=oe=>R?.widgetIndex===oe,be=(oe,tt,Ht,Vt)=>{F(oe)?se(null):se({nodeId:r.id,widgetIndex:oe,widgetName:tt,widgetType:Ht,options:Vt})},fe=sn.length===1?sn[0]:null,ke=fe?F(fe.widgetIndex):!1,Ie=!!R,st=T.includes(r.id),Ge=T.length<5||st,xt=(Be||Pe)&&!!et,jt=r.inputs?.filter(oe=>oe.link!=null).length??0,Bt=r.outputs?.reduce((oe,tt)=>oe+(tt.links?.length??0),0)??0,It=Math.min(3,jt),Ot=Math.min(3,Bt),Ct=et?(()=>{const{filename:oe,subfolder:tt,type:Ht}=et,Vt=qn(oe,tt,Ht),un=tt?`${tt}/${oe}`:oe,dn=Vo(oe);return[{src:Vt,alt:vt,filename:oe,mediaType:dn,file:{id:`${Ht}/${un}`,name:oe,type:dn==="video"?"video":"image",fullUrl:Vt}}]})():[];b.useEffect(()=>{if(!ee)return;const oe=We.current;oe&&(oe.focus(),oe.select())},[ee]);const Ut=()=>{Te(vt),ne(!0)},Yt=()=>{const oe=ve.trim();y(r.id,oe.length>0?oe:null),ne(!1)},wn=!!(Ce&&!/^error\b/i.test(Ce));return u.jsxs("div",{id:`node-card-wrapper-${r.id}`,className:"relative node-card-outer",children:[u.jsx("div",{id:`node-anchor-${r.id}`,className:"absolute -top-3 left-0 right-0 h-0 node-scroll-anchor"}),wn&&u.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 z-[100] animate-in fade-in slide-in-from-bottom-2 duration-200",children:u.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg whitespace-nowrap uppercase tracking-tighter ring-2 ring-white",children:Ce})}),i&&u.jsx("div",{className:"absolute top-2 right-2 z-[110] animate-in fade-in duration-150",children:u.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg whitespace-nowrap uppercase tracking-tighter ring-2 ring-white",children:i})}),u.jsxs("div",{id:`node-card-${r.id}`,className:`
        node-card-inner
        ${p?"rounded-lg shadow-sm py-1":"rounded-xl shadow-md px-3 py-1 mb-3"}
        border-2
        ${Ue?"border-red-700 shadow-red-200":o?"border-orange-500 shadow-orange-200":s?"border-green-500 shadow-green-200":we?"border-purple-300":"border-transparent"}
        ${we?Ae?"bg-purple-200":"bg-purple-100/50":"bg-white"}
      `,style:{overflow:"visible"},children:[u.jsx(e2,{nodeId:r.id,displayName:vt,isEditingLabel:ee,labelValue:ve,labelInputRef:We,onLabelChange:Te,onLabelBlur:Yt,isCollapsed:Ae,isBypassed:we,isExecuting:s,overallProgress:ie,hasErrors:Ue,errorIconRef:Ne,errorPopoverOpen:I,setErrorPopoverOpen:E,toggleNodeFold:k,rightSlot:u.jsx(Pb,{nodeId:r.id,isBypassed:we,onEditLabel:Ut,pinnableWidgets:sn,singlePinnableWidget:fe,isSingleWidgetPinned:ke,hasPinnedWidget:Ie,toggleWidgetPin:be,setPinnedWidget:se,isNodeBookmarked:st,canAddNodeBookmark:Ge,onToggleNodeBookmark:()=>D(r.id),toggleBypass:N,hideNode:S,connectionHighlightMode:M,setConnectionHighlightMode:w,leftLineCount:It,rightLineCount:Ot})}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${Ae?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden transition-opacity duration-200 ease-out ${Ae?"opacity-0":"opacity-100"}`,children:[it&&u.jsx("div",{className:"node-card-subtitle text-[10px] text-center font-semibold uppercase tracking-wider text-gray-400 mb-2 px-1",children:Le?.display_name||r.type}),u.jsxs("div",{id:`node-content-${r.id}`,className:`node-expanded-content ${we?"opacity-60 grayscale":""}`,children:[u.jsx(Xb,{nodeId:r.id,inputs:Me,outputs:Re,allInputs:r.inputs,allOutputs:r.outputs}),u.jsx(W3,{node:r,isBypassed:we,isKSampler:ht,workflowExists:!!m,nodeTypesExists:!!h,visibleInputWidgets:re,visibleWidgets:rt,errorInputNames:Qe,onUpdateNodeWidget:g,onUpdateNodeWidgets:x,getWidgetIndexForInput:$t,findSeedWidgetIndex:cl,setSeedMode:Q,isWidgetPinned:F,toggleWidgetPin:be}),Xe&&u.jsx(Kb,{noteText:Xe,noteLinkified:fl,noteWidgetIndex:gt,isEditingNote:Y,setIsEditingNote:ce,onUpdateNote:dl,noteTextareaRef:W,onNoteTap:Cn}),u.jsx(Jb,{show:xt,previewImage:et,displayName:vt,onImageClick:()=>d?.(Ct,0),isExecuting:!!s,overallProgress:ie,displayNodeProgress:L})]})]})})]}),u.jsx(Zb,{nodeId:r.id,open:I&&Ue,errors:B??[],anchorRef:Ne,onClose:()=>E(!1)})]})});function Y3(l,r,s){if(!r)return null;const o=xr(l,r,s,"image")??xr(l,r,s,"filename")??xr(l,r,s,"file");if(o==null||!Array.isArray(s.widgets_values))return null;const i=s.widgets_values[o];return Q3(i)}function Q3(l){if(typeof l=="string"&&l.trim()){const{filename:h,subfolder:m}=a0(l.trim());return{filename:h,subfolder:m,type:"input"}}if(!l||typeof l!="object")return null;const r=l,s=typeof r.filename=="string"?r.filename:typeof r.name=="string"?r.name:null;if(!s||!s.trim())return null;const o=typeof r.subfolder=="string"?r.subfolder:"",i=typeof r.type=="string"?r.type:"input",{filename:d,subfolder:p}=a0(s.trim());return{filename:d,subfolder:o||p,type:i}}function a0(l){const r=l.replace(/^\/+/,""),s=r.split("/").filter(Boolean);return s.length<=1?{filename:r,subfolder:""}:{filename:s.pop()??r,subfolder:s.join("/")}}function X3({group:l,nodeCount:r,isCollapsed:s,subgraphId:o=null,bookmarkNodeId:i=null,hiddenNodeCount:d=0,foldAllLabel:p,onToggleCollapse:h,onToggleFoldAll:m,onBypassAll:g,onHideGroup:x,onShowHiddenNodes:y}){const N=J(Y=>Y.updateGroupTitle),k=bn(Y=>Y.bookmarkedNodeIds),S=bn(Y=>Y.toggleNodeBookmark),[w,M]=b.useState(!1),[j,O]=b.useState(!1),[R,z]=b.useState(""),T=b.useRef(null),D=b.useRef(null),A=b.useRef(null),[B,U]=b.useState(null);b.useEffect(()=>{if(!w)return;const Y=()=>{const ne=A.current;if(!ne)return;const ve=ne.getBoundingClientRect();U({top:ve.bottom+6,left:ve.right-160})};Y();const ce=ne=>{!D.current||!ne.target||A.current?.contains(ne.target)||D.current.contains(ne.target)||M(!1)},ee=ne=>{const ve=ne.target;D.current&&ve&&D.current.contains(ve)||M(!1)};return document.addEventListener("mousedown",ce),document.addEventListener("scroll",ee,!0),window.addEventListener("resize",Y),()=>{document.removeEventListener("mousedown",ce),document.removeEventListener("scroll",ee,!0),window.removeEventListener("resize",Y)}},[w]);const G=Vl(l.color,.22),q=Vl(l.color,.4),te=l.title?.trim()||`Group ${l.id}`;b.useEffect(()=>{if(!j)return;const Y=T.current;Y&&(Y.focus(),Y.select())},[j]);const ge=()=>{j||h()},le=Y=>{Y.stopPropagation(),h()},ie=()=>{N(l.id,R,o),O(!1)},L=Y=>{Y.stopPropagation(),M(ce=>!ce)},Q=Y=>{Y.stopPropagation(),z(te),O(!0),M(!1)},se=Y=>{Y.stopPropagation(),m(),M(!1)},xe=Y=>ce=>{ce.stopPropagation(),g(Y),M(!1)},me=Y=>{Y.stopPropagation(),x(),M(!1)},_=Y=>{Y.stopPropagation(),y?.(),M(!1)},I=i!=null&&k.includes(i),E=i!=null&&(k.length<5||I),W=d>0&&!!y;return u.jsxs("div",{id:`group-header-${l.id}`,className:`group-header flex items-center justify-between cursor-pointer gap-3 px-3 py-2 ${s?"rounded-xl":"rounded-t-xl mb-2"}`,style:{backgroundColor:G,borderColor:q},onClick:ge,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[u.jsx("button",{onClick:le,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-500 hover:text-gray-700 shrink-0",children:s?u.jsx(Br,{className:"w-6 h-6"}):u.jsx(Wn,{className:"w-6 h-6"})}),j?u.jsx("input",{ref:T,value:R,onChange:Y=>z(Y.target.value),onBlur:ie,onKeyDown:Y=>{(Y.key==="Enter"||Y.key==="Escape")&&Y.currentTarget.blur()},onClick:Y=>Y.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{className:"font-semibold text-gray-900 select-none flex-1 min-w-0 whitespace-nowrap overflow-hidden text-ellipsis",children:te}),s&&u.jsxs("span",{className:"text-sm text-gray-500 shrink-0",children:["(",r," node",r!==1?"s":"",")"]})]}),u.jsxs("div",{className:"flex items-center gap-1",onClick:Y=>Y.stopPropagation(),children:[u.jsx("button",{onClick:L,className:"w-8 h-8 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent","aria-label":"Group options",ref:A,children:u.jsx(vr,{className:"w-5 h-5 -rotate-90"})}),w&&B&&ll.createPortal(u.jsxs("div",{ref:D,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:B.top,left:B.left},children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:Q,children:[u.jsx(Xd,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",onClick:Y=>{Y.stopPropagation(),i!=null&&(S(i),M(!1))},disabled:!E,children:[I?u.jsx(bi,{className:"w-4 h-4 text-gray-500"}):u.jsx(Hr,{className:"w-4 h-4 text-yellow-500"}),I?"Remove bookmark":"Bookmark node"]}),u.jsx("div",{className:"border-t border-gray-200 my-1"}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:se,children:[p==="Fold all"?u.jsx(Br,{className:"w-4 h-4 text-gray-500"}):u.jsx(Wn,{className:"w-4 h-4 text-gray-500"}),p]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:xe(!0),children:[u.jsx(Ed,{className:"w-4 h-4 text-gray-500",isBypassed:!0}),"Bypass all nodes"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:xe(!1),children:[u.jsx(Ed,{className:"w-4 h-4 text-gray-500",isBypassed:!1}),"Engage all nodes"]}),W&&u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:_,children:[u.jsx(ul,{className:"w-4 h-4 text-gray-500"}),"Show hidden nodes"]}),u.jsx("div",{className:"border-t border-gray-200 my-1"}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:me,children:[u.jsx(ul,{className:"w-4 h-4 text-gray-500"}),"Hide group"]})]}),document.body)]})]})}function P3({group:l}){const r=Vl(l.color,.15),s=Vl(l.color,.3),o=()=>{document.getElementById(`group-header-${l.id}`)?.scrollIntoView({behavior:"smooth",block:"start"})};return u.jsx("div",{id:`group-footer-${l.id}`,className:"group-footer px-3 py-1.5 -mx-1 rounded-b-xl cursor-pointer",onClick:o,style:{backgroundColor:r,borderColor:s},children:u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 select-none",children:l.title})})}function Z3({group:l}){const r=Vl(l.color,.05),s=Vl(l.color,.3),o=Vl(l.color,.4);return u.jsx("div",{id:`group-placeholder-${l.id}`,className:"group-placeholder flex items-center justify-center px-4 py-6 border-l border-r",style:{backgroundColor:r,borderColor:s},children:u.jsx("div",{className:"w-full rounded-lg border-2 border-dashed flex items-center justify-center py-4",style:{borderColor:o},children:u.jsx("span",{className:"text-sm text-gray-400 select-none",children:"No nodes in group"})})})}const o0="rgba(59, 130, 246, 0.14)",s0="rgba(59, 130, 246, 0.25)";function K3({subgraph:l,nodeCount:r,isCollapsed:s,onToggleCollapse:o}){const i=J(U=>U.updateSubgraphTitle),d=J(U=>U.setSubgraphHidden),[p,h]=b.useState(!1),[m,g]=b.useState(!1),[x,y]=b.useState(""),N=b.useRef(null),k=b.useRef(null),S=b.useRef(null),[w,M]=b.useState(null),O=(l.name||l.id).trim()||l.id;b.useEffect(()=>{if(!p)return;const U=()=>{const te=S.current;if(!te)return;const ge=te.getBoundingClientRect();M({top:ge.bottom+6,left:ge.right-160})};U();const G=te=>{!k.current||!te.target||S.current?.contains(te.target)||k.current.contains(te.target)||h(!1)},q=te=>{const ge=te.target;k.current&&ge&&k.current.contains(ge)||h(!1)};return document.addEventListener("mousedown",G),document.addEventListener("scroll",q,!0),window.addEventListener("resize",U),()=>{document.removeEventListener("mousedown",G),document.removeEventListener("scroll",q,!0),window.removeEventListener("resize",U)}},[p]),b.useEffect(()=>{if(!m)return;const U=N.current;U&&(U.focus(),U.select())},[m]);const R=()=>{m||o()},z=U=>{U.stopPropagation(),o()},T=()=>{i(l.id,x),g(!1)},D=U=>{U.stopPropagation(),h(G=>!G)},A=U=>{U.stopPropagation(),y(O),g(!0),h(!1)},B=U=>{U.stopPropagation(),d(l.id,!0),h(!1)};return u.jsxs("div",{id:`subgraph-header-${l.id}`,className:`subgraph-header flex items-center justify-between cursor-pointer gap-3 px-3 py-2 ${s?"rounded-xl":"rounded-t-xl mb-3"}`,style:{backgroundColor:`var(--subgraph-bg, ${o0})`,borderColor:`var(--subgraph-border, ${s0})`,"--subgraph-bg":o0,"--subgraph-border":s0},onClick:R,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[u.jsx("button",{onClick:z,className:"w-8 h-8 -ml-2 flex items-center justify-center text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 shrink-0",children:s?u.jsx(Br,{className:"w-6 h-6"}):u.jsx(Wn,{className:"w-6 h-6"})}),m?u.jsx("input",{ref:N,value:x,onChange:U=>y(U.target.value),onBlur:T,onKeyDown:U=>{(U.key==="Enter"||U.key==="Escape")&&U.currentTarget.blur()},onClick:U=>U.stopPropagation(),className:"font-semibold text-gray-900 flex-1 min-w-0 text-sm bg-white border border-gray-200 rounded px-2 py-1"}):u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 select-none flex-1 min-w-0 whitespace-nowrap overflow-hidden text-ellipsis",children:O}),s&&u.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400 shrink-0",children:["(",r," node",r!==1?"s":"",")"]})]}),u.jsx("button",{onClick:D,className:"flex items-center text-blue-400 dark:text-blue-500 opacity-60 hover:opacity-100","aria-label":"Subgraph options",ref:S,children:u.jsx(Oa,{className:"w-5 h-5"})}),p&&w&&ll.createPortal(u.jsxs("div",{ref:k,className:"fixed z-[1000] w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",style:{top:w.top,left:w.left},children:[u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:A,children:[u.jsx(Xd,{className:"w-4 h-4 text-gray-500"}),"Edit Label"]}),u.jsxs("button",{className:"w-full flex items-center gap-2 text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:B,children:[u.jsx(ul,{className:"w-4 h-4 text-gray-500"}),"Hide subgraph"]})]}),document.body)]})}const J3="rgba(59, 130, 246, 0.1)",e5="rgba(59, 130, 246, 0.2)";function t5({subgraph:l}){const r=l.name||l.id,s=()=>{document.getElementById(`subgraph-header-${l.id}`)?.scrollIntoView({behavior:"smooth",block:"start"})};return u.jsx("div",{id:`subgraph-footer-${l.id}`,className:"subgraph-footer px-3 py-1.5 -mx-1 rounded-b-xl cursor-pointer",onClick:s,style:{backgroundColor:J3,borderColor:e5},children:u.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-500 select-none",children:r})})}function ii(l){return String(l).split(",").map(r=>r.trim().toUpperCase()).filter(Boolean)}function i0(l){return l.toLowerCase().replace(/[_-]+/g," ").replace(/\s+/g," ").trim()}function n5(l,r){let s=0;for(const o of r)if(o===l[s]&&(s+=1,s>=l.length))return!0;return l.length===0}function u0(l,r){if(!l.trim())return!0;const s=i0(r);return i0(l).split(" ").filter(Boolean).every(o=>s.includes(o)||n5(o,s))}function l5({visible:l,onImageClick:r}){const s=J(F=>F.workflow),o=J(F=>F.executingNodeId),i=J(F=>F.connectionHighlightModes),d=J(F=>F.manuallyHiddenNodes),p=bn(F=>F.bookmarkBarSide),h=bn(F=>F.bookmarkBarTop),m=bn(F=>F.setBookmarkBarPosition),g=bn(F=>F.setBookmarkRepositioningActive),x=J(F=>F.ensureNodeExpanded),y=J(F=>F.scrollToNode),N=J(F=>F.revealNodeWithParents),k=J(F=>F.nodeTypes),S=Jt(F=>F.nodeErrors),w=J(F=>F.searchOpen),M=J(F=>F.searchQuery),j=J(F=>F.setSearchQuery),O=J(F=>F.setSearchOpen),R=J(F=>F.collapsedGroups),z=J(F=>F.hiddenGroups),T=J(F=>F.hiddenSubgraphs),D=J(F=>F.toggleGroupCollapse),A=J(F=>F.setGroupCollapsed),B=J(F=>F.setGroupHidden),U=J(F=>F.bypassAllInGroup),G=J(F=>F.collapsedSubgraphs),q=J(F=>F.toggleSubgraphCollapse),te=J(F=>F.setSubgraphCollapsed),ge=J(F=>F.setNodeFold),le=bn(F=>F.bookmarkedNodeIds),ie=b.useRef(null),L=b.useRef(null),Q=b.useRef(null),se=b.useRef(null),[xe,me]=b.useState(0),[_,I]=b.useState(!1),[E,W]=b.useState(!1),[Y,ce]=b.useState(null),[ee,ne]=b.useState({}),ve=b.useRef(new Map),Te=b.useRef(null),We=b.useRef(null),de=b.useRef(null),Ne=()=>{j(""),O(!1)},Ce=b.useCallback((F,be)=>{N(F),window.dispatchEvent(new CustomEvent("workflow-scroll-to-node",{detail:{nodeId:F,label:be}})),y(F,be)},[N,y]),_e=b.useCallback((F,be)=>()=>{if(_){I(!1),W(!1),ce(null);return}me(be),Ce(F)},[_,Ce]),Ue=b.useCallback(()=>{if(_){I(!1),W(!1),ce(null);return}const F=(xe+1)%le.length;me(F),Ce(le[F])},[le,xe,_,Ce]),Qe=b.useCallback(()=>{Te.current!=null&&(window.clearTimeout(Te.current),Te.current=null)},[]),Se=b.useCallback(()=>{const F=getComputedStyle(document.documentElement).getPropertyValue("--bottom-bar-offset"),be=Number.parseFloat(F);return Number.isFinite(be)?be:0},[]),ye=b.useCallback(()=>{const F=ie.current,be=L.current;if(!F||!be)return null;const fe=F.getBoundingClientRect().height,ke=be.getBoundingClientRect().height,Ie=16,st=Se()+8,Ge=Math.max(Ie,fe-ke-st);return{minTop:Ie,maxTop:Ge}},[Se]),Oe=b.useCallback(F=>{const be=ye();return be?Math.min(Math.max(F,be.minTop),be.maxTop):F},[ye]),Le=b.useCallback((F,be)=>{const fe=ie.current,ke=de.current;if(!fe||!ke)return;const Ie=fe.getBoundingClientRect(),st=F-Ie.left-ke.x,Ge=Oe(be-Ie.top-ke.y);ce({x:st,y:Ge})},[Oe]),it=b.useCallback((F,be)=>{const fe=ie.current,ke=L.current;if(!fe||!ke)return;const Ie=ke.getBoundingClientRect(),st=fe.getBoundingClientRect();de.current={x:F-Ie.left,y:be-Ie.top};const Ge=Ie.left-st.left,xt=Oe(Ie.top-st.top);ce({x:Ge,y:xt}),W(!0)},[Oe]),vt=b.useCallback(F=>{F.pointerType==="mouse"&&F.button!==0||(F.preventDefault(),We.current={startX:F.clientX,startY:F.clientY,startTime:Date.now(),pointerId:F.pointerId},_?it(F.clientX,F.clientY):Te.current=window.setTimeout(()=>{I(!0),it(F.clientX,F.clientY)},500),F.currentTarget.setPointerCapture(F.pointerId))},[_,it]),ht=b.useCallback(F=>{if(E){Le(F.clientX,F.clientY);return}const be=We.current;if(!be)return;const fe=F.clientX-be.startX,ke=F.clientY-be.startY;Math.hypot(fe,ke)>8&&Qe()},[Qe,E,Le]),we=b.useCallback(()=>{const F=ie.current,be=L.current;if(!F||!be||!Y)return;const fe=F.getBoundingClientRect(),ke=be.getBoundingClientRect().width,st=Y.x+ke/2<fe.width/2?"left":"right",Ge=Oe(Y.y);m({side:st,top:Ge}),ce(null)},[Y,Oe,m]),Ae=b.useCallback(F=>{Qe();const be=We.current;if(We.current=null,E){we(),W(!1);return}if(_||!be)return;const fe=F.clientX-be.startX,ke=F.clientY-be.startY,Ie=Date.now()-be.startTime;Math.abs(fe)>40&&Math.abs(fe)>Math.abs(ke)&&Ie<500&&m({side:p==="left"?"right":"left"})},[p,Qe,we,E,_,m]),Ke=b.useCallback(()=>{Qe(),We.current=null,W(!1),ce(null)},[Qe]),Ye=b.useMemo(()=>{if(!s)return[];const F=z1(s);return Object.keys(d).length===0?F:F.filter(be=>!d[be.id])},[s,d]),et=M.trim(),Ze=w&&et.length>0,dt=b.useMemo(()=>s?Fb(s):new Map,[s]),re=b.useMemo(()=>{if(!Ze||!s)return new Set;const F=s.groups??[],be=new Set;for(const fe of F)u0(et,fe.title)&&be.add(fe.id);return be},[s,Ze,et]),rt=b.useMemo(()=>Ze?Ye.filter(F=>{const be=dt.get(F.id);if(be!==void 0&&re.has(be))return!0;const fe=k?.[F.type],ke=F.title,Ie=[typeof ke=="string"?ke:"",fe?.display_name??"",F.type,String(F.id)];return u0(et,Ie.join(" "))}):Ye,[Ye,Ze,et,k,dt,re]),Xe=b.useMemo(()=>s?Ze?rt.map(F=>({type:"node",node:F,groupId:null,subgraphId:null})):Yb(rt,s,R,z,G,T):[],[s,rt,R,z,G,T,Ze]),gt=b.useMemo(()=>{const F=new Map;let be=0;for(const fe of Ye){const ke=S[String(fe.id)];ke&&ke.length>0&&(be+=1,F.set(fe.id,be))}return F},[Ye,S]),$t=b.useMemo(()=>{if(!s)return new Set;const F=Object.entries(i).filter(([,Ge])=>Ge!=="off").map(([Ge,xt])=>({id:Number(Ge),mode:xt}));if(F.length===0)return new Set;const be=new Map(s.nodes.map(Ge=>[Ge.id,Ge])),fe=new Set,ke=Ge=>!!d[Ge.id],Ie=(Ge,xt,jt)=>{if(xt.has(Ge))return[];xt.add(Ge);const Bt=be.get(Ge);if(!Bt)return[];const It=[];return Bt.outputs?.forEach((Ot,Ct)=>{const Ut=ii(Ot.type);if(jt.size>0&&!Ut.some(wn=>jt.has(wn)))return;gi(s,Ge,Ct).forEach(wn=>{const oe=wn.node;ke(oe)?It.push(...Ie(oe.id,xt,jt)):It.push(oe)})}),It},st=(Ge,xt,jt)=>{if(xt.has(Ge))return[];xt.add(Ge);const Bt=be.get(Ge);if(!Bt)return[];const It=[];return Bt.inputs?.forEach((Ot,Ct)=>{if(Ot.link===null)return;const Ut=ii(Ot.type);if(jt.size>0&&!Ut.some(wn=>jt.has(wn)))return;const Yt=Oo(s,Ge,Ct);Yt&&(ke(Yt.node)?It.push(...st(Yt.node.id,xt,jt)):It.push(Yt.node))}),It};return F.forEach(({id:Ge,mode:xt})=>{const jt=be.get(Ge);jt&&((xt==="inputs"||xt==="both")&&jt.inputs?.forEach((Bt,It)=>{if(Bt.link===null)return;const Ot=Oo(s,jt.id,It);if(!Ot)return;if(!ke(Ot.node)){fe.add(Ot.node.id);return}const Ct=new Set(ii(Bt.type));st(Ot.node.id,new Set,Ct).forEach(Yt=>fe.add(Yt.id))}),(xt==="outputs"||xt==="both")&&jt.outputs?.forEach((Bt,It)=>{const Ot=new Set(ii(Bt.type));gi(s,jt.id,It).forEach(Ut=>{const Yt=Ut.node;if(!ke(Yt)){fe.add(Yt.id);return}Ie(Yt.id,new Set,Ot).forEach(oe=>fe.add(oe.id))})}))}),fe},[s,i,d]);b.useEffect(()=>{const F=be=>{const fe=be.detail,ke=typeof fe=="number"?fe:fe.nodeId,Ie=typeof fe=="object"?fe.label:void 0;if(typeof ke!="number"||!rt.some(It=>It.id===ke))return;const Ge=gt.get(ke),xt=Ie??(Ge?`Error #${Ge}`:"Error");ne(It=>({...It,[ke]:xt}));const jt=ve.current.get(ke);jt&&window.clearTimeout(jt);const Bt=window.setTimeout(()=>{ne(It=>{const Ot={...It};return delete Ot[ke],Ot}),ve.current.delete(ke)},2e3);ve.current.set(ke,Bt)};return window.addEventListener("workflow-label-error-node",F),()=>window.removeEventListener("workflow-label-error-node",F)},[rt,gt]),b.useEffect(()=>{const F=ve.current;return()=>{F.forEach(be=>window.clearTimeout(be)),F.clear()}},[]),b.useEffect(()=>{const F=be=>{const fe=be.detail,ke=typeof fe=="number"?fe:fe.nodeId,Ie=typeof fe=="object"?fe.label:void 0;if(typeof ke!="number")return;x(ke);const st=document.getElementById(`node-card-${ke}`);st&&st.scrollIntoView({behavior:"smooth",block:"start"}),requestAnimationFrame(()=>y(ke,Ie))};return window.addEventListener("workflow-scroll-to-node",F),()=>window.removeEventListener("workflow-scroll-to-node",F)},[x,y]),b.useEffect(()=>{w&&(Q.current&&Q.current.scrollTo({top:0,behavior:"auto"}),requestAnimationFrame(()=>se.current?.focus()))},[w]),b.useEffect(()=>(g(_),()=>g(!1)),[_,g]),b.useEffect(()=>{if(!le.length)return;const F=window.requestAnimationFrame(()=>{const be=ye();if(!be)return;const{minTop:fe,maxTop:ke}=be;if(h==null)m({top:ke});else{const Ie=Math.min(Math.max(h,fe),ke);Ie!==h&&m({top:Ie})}});return()=>window.cancelAnimationFrame(F)},[le.length,h,ye,m]),b.useEffect(()=>{if(!_)return;const F=be=>{const fe=L.current;!fe||!be.target||fe.contains(be.target)||(I(!1),W(!1),ce(null),Qe())};return document.addEventListener("pointerdown",F),()=>{document.removeEventListener("pointerdown",F)}},[Qe,_]);const cl=F=>{for(const be of F){if(be.type==="node")return be.node.id;if(be.type==="group"||be.type==="subgraph"){const fe=cl(be.children);if(fe!=null)return fe}}return null},dl=F=>{for(const be of F){if(be.type==="node"){if(!be.node.flags?.collapsed)return!0;continue}if(!be.isCollapsed||dl(be.children))return!0}return!1},fl=b.useCallback((F,be)=>{const fe=ke=>{for(const Ie of ke){if(Ie.type==="node"){ge(Ie.node.id,be);continue}if(Ie.type==="group"){A(Ie.group.id,be),fe(Ie.children);continue}te(Ie.subgraph.id,be),fe(Ie.children)}};fe(F)},[A,ge,te]),Cn=b.useCallback((F,be)=>()=>{fl(F,be)},[fl]),sn=(F,be)=>F.map((fe,ke)=>{const Ie=`${be}-${ke}`;if(fe.type==="group"){const st=fe.group,Ge=Vl(st.color,.15),xt=Vl(st.color,.4),jt=cl(fe.children),Bt=dl(fe.children),It=Bt?"Fold all":"Unfold all",Ot=Cn(fe.children,Bt);return u.jsxs("div",{id:`group-wrapper-${fe.group.id}`,className:"group-wrapper shadow-md rounded-xl border mb-3",style:{backgroundColor:Ge,borderColor:xt},children:[u.jsx(X3,{group:st,nodeCount:fe.nodeCount,isCollapsed:fe.isCollapsed,subgraphId:fe.subgraphId,bookmarkNodeId:jt,foldAllLabel:It,onToggleCollapse:()=>D(fe.group.id),onToggleFoldAll:Ot,onBypassAll:Ct=>U(fe.group.id,Ct,fe.subgraphId),onHideGroup:()=>B(fe.group.id,!0)}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${fe.isCollapsed?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden px-1 transition-opacity duration-200 ease-out ${fe.isCollapsed?"opacity-0":"opacity-100"}`,children:[fe.children.length>0?sn(fe.children,Ie):u.jsx(Z3,{group:fe.group}),u.jsx(P3,{group:fe.group})]})})]},`group-${fe.group.id}-${Ie}`)}if(fe.type==="subgraph"){const st="rgba(59, 130, 246, 0.08)",Ge="rgba(59, 130, 246, 0.25)";return u.jsxs("div",{className:"subgraph-wrapper shadow-md rounded-xl border mb-3",style:{backgroundColor:`var(--subgraph-bg, ${st})`,borderColor:`var(--subgraph-border, ${Ge})`,"--subgraph-bg":st,"--subgraph-border":Ge},children:[u.jsx(K3,{subgraph:fe.subgraph,nodeCount:fe.nodeCount,isCollapsed:fe.isCollapsed,onToggleCollapse:()=>q(fe.subgraph.id)}),u.jsx("div",{className:`grid transition-[grid-template-rows] duration-200 ease-out ${fe.isCollapsed?"grid-rows-[0fr]":"grid-rows-[1fr]"}`,children:u.jsxs("div",{className:`overflow-hidden px-1 transition-opacity duration-200 ease-out ${fe.isCollapsed?"opacity-0":"opacity-100"}`,children:[fe.children.length>0&&sn(fe.children,Ie),u.jsx(t5,{subgraph:fe.subgraph})]})})]},`subgraph-${fe.subgraph.id}-${Ie}`)}return u.jsx("div",{id:`node-card-${fe.node.id}`,children:u.jsx($3,{node:fe.node,isExecuting:o===String(fe.node.id),isConnectionHighlighted:$t.has(fe.node.id),errorBadgeLabel:ee[fe.node.id]??null,onImageClick:r})},`node-${fe.node.id}-${Ie}`)});let xn;s?Ye.length===0?xn=u.jsx("div",{id:"node-list-empty",className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{id:"empty-workflow-content",className:"text-center p-8",children:[u.jsx("div",{id:"empty-workflow-icon-container",className:"flex items-center justify-center mb-4",children:u.jsx($1,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{id:"empty-workflow-title",className:"text-lg font-medium",children:"Empty workflow"}),u.jsx("p",{id:"empty-workflow-description",className:"text-sm mt-2",children:"This workflow has no nodes"})]})}):xn=u.jsxs("div",{id:"node-list-shell",className:"h-full flex flex-col",children:[w&&u.jsx("div",{className:"node-search-bar px-1 pt-3",children:u.jsxs("div",{className:"flex items-center gap-2 bg-white border border-gray-200 rounded-xl px-3 py-2 shadow-sm",children:[u.jsx("input",{ref:se,value:M,onChange:F=>j(F.target.value),placeholder:"Search nodes...",className:"comfy-input p-3 flex-1 text-sm text-gray-900 outline-none placeholder:text-gray-400"}),u.jsx("button",{type:"button",onClick:Ne,className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:u.jsx(zo,{className:"w-4 h-4"})})]})}),u.jsx("div",{id:"node-list-container",ref:Q,className:"flex-1 overflow-auto px-4 pt-4 overscroll-contain scroll-container",style:{paddingBottom:"10rem"},"data-node-list":"true",children:Xe.length===0?u.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{className:"text-center p-8",children:[u.jsx("p",{className:"text-sm font-medium",children:"No matching nodes"}),u.jsx("p",{className:"text-xs mt-2",children:"Try a different search."})]})}):u.jsx("div",{id:"node-list-inner",children:sn(Xe,"root")})})]}):xn=u.jsx("div",{id:"node-list-no-workflow",className:"flex items-center justify-center h-full text-gray-500",children:u.jsxs("div",{id:"no-workflow-content",className:"text-center p-8",children:[u.jsx("div",{id:"no-workflow-icon-container",className:"flex items-center justify-center mb-4",children:u.jsx(W1,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{id:"no-workflow-title",className:"text-lg font-medium",children:"No workflow loaded"}),u.jsx("p",{id:"no-workflow-description",className:"text-sm mt-2",children:"Open the menu to load a workflow"})]})});const Me=Y?.y??h??0,Re=Y?`${Y.x}px`:p==="left"?"0.75rem":void 0,Be=Y?void 0:p==="right"?"0.75rem":void 0,Pe={top:`${Me}px`,left:Re,right:Be,opacity:h==null&&Y==null?0:1,touchAction:_?"none":"pan-y",pointerEvents:h==null&&Y==null?"none":"auto"};return u.jsxs("div",{id:"node-list-wrapper",ref:ie,className:"absolute inset-x-0 top-[60px] bottom-0 bg-gray-100",style:{display:l?"block":"none"},children:[xn,le.length>0&&u.jsx("div",{ref:L,className:`absolute z-[200] flex flex-col items-center gap-2 pointer-events-auto ${_?"rounded-2xl ring-2 ring-blue-400/70 bg-white/30 shadow-lg":""}`,style:Pe,onPointerDown:vt,onPointerMove:ht,onPointerUp:Ae,onPointerCancel:Ke,children:u.jsxs("div",{className:`flex flex-col items-center gap-2 ${_?"p-2 cursor-grab":""}`,children:[le.map((F,be)=>u.jsx("button",{type:"button",className:"w-10 h-10 rounded-full border border-transparent bg-gray-900/10 text-[11px] font-bold text-gray-800 shadow-sm backdrop-blur-sm dark:bg-white/10 dark:text-gray-100 select-none",onClick:_e(F,be),children:F},F)),le.length>1&&u.jsx("button",{type:"button",className:"w-10 h-10 rounded-full border border-transparent bg-gray-900/10 text-gray-600 shadow-sm backdrop-blur-sm flex items-center justify-center dark:bg-white/10 dark:text-gray-200 select-none","aria-label":"Cycle bookmarks",onClick:Ue,children:u.jsx(Wn,{className:"w-4 h-4"})})]})})]})}function r5(){const l=An(E=>E.currentPanel),r=nl(E=>E.viewerOpen),s=J(E=>E.workflow),o=J(E=>E.isExecuting),i=J(E=>E.progress),d=J(E=>E.executingNodeId),p=J(E=>E.executingPromptId),h=J(E=>E.workflowDurationStats),m=Jt(E=>E.error),g=Jt(E=>E.nodeErrors),x=Jt(E=>E.errorsDismissed),y=Jt(E=>E.setErrorsDismissed),N=J(E=>E.scrollToNode),k=Jt(E=>E.errorCycleIndex),S=Jt(E=>E.setErrorCycleIndex),w=J(E=>E.revealNodeWithParents),M=J(E=>E.nodeTypes),j=lt(E=>E.running),[O,R]=b.useState(null),D=!(l==="queue")&&!(l==="outputs")&&!r,A=Object.values(g).reduce((E,W)=>E+W.length,0),B=A>0,U=!!m?.startsWith("Workflow load error")||B,G=U?"Workflow load error":"Prompt error",q=U&&m?m.replace(/^Workflow load error:\s*/i,""):m??(B?`${A} inputs reference missing options.`:null),te=(!!m||B)&&!x,ge=b.useMemo(()=>{if(!s||!d)return null;const E=s.nodes.find(Y=>String(Y.id)===d);return E?M?.[E.type]?.display_name||E.type:`Node ${d}`},[s,d,M]),le=p||(j[0]?.prompt_id??null),ie=Ho({workflow:s,runKey:le,isRunning:o||j.length>0,workflowDurationStats:h}),L=ie===100?100:i,Q=()=>{if(!s||!B)return;const E=s.nodes.filter(ee=>g[String(ee.id)]?.length).map(ee=>ee.id);if(E.length===0)return;const W=k%E.length,Y=E[W],ce=`Error #${W+1}`;w(Y),S((W+1)%E.length),window.dispatchEvent(new CustomEvent("workflow-label-error-node",{detail:{nodeId:Y,label:ce}})),window.dispatchEvent(new CustomEvent("workflow-scroll-to-node",{detail:{nodeId:Y,label:ce}})),N(Y,ce)},se=E=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),Q())},xe=E=>{E.stopPropagation()},me=E=>{E.stopPropagation(),y(!0)},_=()=>{le&&R(le)},I=O!==null&&O===le;return D?u.jsxs("div",{id:"bottom-status-overlay",className:"fixed inset-x-0 bottom-20 z-[2000] flex flex-col items-center gap-3 pointer-events-none",children:[te&&u.jsxs("div",{id:"error-notification-wrapper",className:"relative pointer-events-auto",children:[u.jsx("div",{id:"error-notification-toast",className:"bg-red-100 text-red-900 rounded-xl shadow-lg px-4 py-3 w-[70vw] max-w-sm",role:"button",tabIndex:0,onClick:Q,onKeyDown:se,children:u.jsx("div",{className:"error-toast-content flex items-start justify-between gap-3",children:u.jsxs("div",{className:"error-text-container pr-16",children:[u.jsx("div",{className:"error-title text-sm font-semibold text-red-800",children:G}),u.jsx("div",{className:"error-message mt-1 text-xs text-red-800 break-words",children:q})]})})}),u.jsx("button",{id:"error-dismiss-button",type:"button","aria-label":"Dismiss error",className:"absolute top-3 right-3 shrink-0 px-3 py-1 text-xs font-semibold bg-red-700 text-white rounded-full z-10",onPointerDown:xe,onClick:me,children:"Dismiss"})]}),ie!==null&&!I&&u.jsxs("div",{id:"execution-progress-card",className:"relative bg-white border border-gray-200 rounded-xl shadow-lg px-4 py-2 w-[70vw] max-w-sm pointer-events-auto",children:[u.jsx("button",{type:"button","aria-label":"Dismiss progress",className:"absolute top-2 right-2 w-7 h-7 rounded-full flex items-center justify-center text-gray-400 hover:text-gray-600",onClick:_,children:u.jsx(zo,{className:"w-4 h-4"})}),u.jsx("div",{className:"executing-node-name text-sm font-semibold text-gray-900",children:ge||"Running"}),u.jsxs("div",{className:"node-progress-info mt-2 flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[L,"%"]})]}),u.jsx("div",{className:"node-progress-track mt-1 h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"node-progress-bar h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,L))}%`}})}),ie!==null&&u.jsxs("div",{className:"overall-progress-container",children:[u.jsxs("div",{className:"overall-progress-info mt-3 flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[ie,"%"]})]}),u.jsx("div",{className:"overall-progress-track mt-1 h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"overall-progress-bar h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,ie))}%`}})})]})]})]}):null}function a5({viewerOpen:l,followQueue:r,queueSize:s,overallProgress:o,onToggleFollowQueue:i,onOpenFollowQueue:d}){const p=b.useCallback(()=>{l?i?.():d?.()},[l,i,d]),h=b.useMemo(()=>l?r?"Disable follow queue":"Enable follow queue":"Open image viewer",[l,r]),m=b.useMemo(()=>l&&r?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200",[l,r]);return u.jsxs("button",{onClick:p,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${m}`,"aria-label":h,children:[u.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx(_0,{className:"w-6 h-6",showSlash:l&&!r})}),s>0&&u.jsxs("div",{className:`queue-badge absolute top-0 right-0 translate-x-[18px] -translate-y-[18px] w-6 h-6 rounded-full bg-blue-500 text-white
                     flex items-center justify-center font-bold text-xs border-2 border-white relative z-20`,children:[o!==null&&u.jsx(nb,{className:"absolute z-10 pointer-events-none",width:"24",height:"24",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-90deg)"},progress:o}),s]})]})}function o5(){const l=J(p=>p.workflow),r=Gn(p=>p.pinnedWidget),s=Gn(p=>p.pinOverlayOpen),o=Gn(p=>p.togglePinOverlay),i=J(p=>p.updateNodeWidget),d=b.useMemo(()=>{if(!r||!l)return;const p=l.nodes.find(h=>h.id===r.nodeId);if(p)return ko(p,r.widgetName,r.widgetIndex)},[r,l]);return!s||!r?null:u.jsx("div",{id:"pin-overlay-hidden-anchor",className:"hidden",children:u.jsx(il,{name:r.widgetName,type:r.widgetType,value:d,options:r.options,onChange:p=>i(r.nodeId,r.widgetIndex,p,r.widgetName),hideLabel:!0,compact:!0,forceModalOpen:!0,onModalClose:o})})}function s5(){const l=_t(r=>r.setFilterModalOpen);return u.jsx("button",{onClick:()=>l(!0),className:"relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors bg-gray-100 text-gray-700 hover:bg-gray-200","aria-label":"Filter and sort",children:u.jsx(q1,{className:"w-6 h-6"})})}function i5(){const l=_t(o=>o.selectedIds.length),r=_t(o=>o.setSelectionActionOpen),s=l===0;return u.jsx("button",{onClick:()=>r(!0),disabled:s,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,"aria-label":"Selection actions",children:u.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shadow-sm ${s?"border-gray-300 bg-transparent":"bg-blue-600 border-blue-600 text-white"}`,children:!s&&u.jsx(Ir,{className:"w-4 h-4"})})})}function u5(){return _t(r=>r.selectionMode)?u.jsx(i5,{}):u.jsx(s5,{})}function c5(){const l=Gn(o=>o.pinnedWidget),r=Gn(o=>o.pinOverlayOpen),s=Gn(o=>o.togglePinOverlay);return l?u.jsx("button",{onClick:s,className:`relative w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-colors ${r?"bg-fuchsia-500 text-white":"bg-gray-100 text-fuchsia-500 hover:bg-gray-200"}`,"aria-label":r?"Close pin editor":"Open pin editor",children:u.jsx(To,{className:"w-6 h-6"})}):null}function d5(){const l=J(d=>d.workflow),r=J(d=>d.runCount),s=J(d=>d.queueWorkflow),o=l!==null,i=()=>{o&&(s(r),"vibrate"in navigator&&navigator.vibrate(20))};return u.jsx("button",{onClick:i,disabled:!o,className:"flex-1 py-3 px-6 rounded-xl font-semibold text-lg min-h-[48px] transition-all "+(o?"bg-blue-500 text-white active:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Run"})}function f5(){const l=J(i=>i.runCount),r=J(i=>i.setRunCount),s=()=>{r(l-1)},o=()=>{r(l+1)};return u.jsxs("div",{id:"run-count-selector",className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[u.jsx("button",{onClick:s,disabled:l<=1,className:`w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center
                   text-lg font-medium text-gray-700 disabled:opacity-40 disabled:shadow-none`,children:""}),u.jsx("span",{className:"w-8 text-center font-semibold text-gray-900",children:l}),u.jsx("button",{onClick:o,className:`w-10 h-10 rounded-lg bg-white shadow-sm flex items-center justify-center
                   text-lg font-medium text-gray-700`,children:"+"})]})}function p5(l){const{currentPanel:r,viewerOpen:s=!1,followQueue:o=!1,onToggleFollowQueue:i,onOpenFollowQueue:d}=l,p=r==="outputs",h=J(j=>j.workflow),m=J(j=>j.isExecuting),g=J(j=>j.executingPromptId),x=J(j=>j.workflowDurationStats),y=lt(j=>j.pending),N=lt(j=>j.running),k=b.useRef(null),S=y.length+N.length,w=g||(N[0]?.prompt_id??null),M=Ho({workflow:h,runKey:w,isRunning:m||N.length>0,workflowDurationStats:x});return b.useEffect(()=>{const j=k.current;if(!j)return;const O=()=>{const R=j.getBoundingClientRect();document.documentElement.style.setProperty("--bottom-bar-offset",`${R.height}px`)};return O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]),u.jsxs("div",{id:"bottom-bar-root",ref:k,className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg safe-area-bottom z-[2200]",children:[u.jsxs("div",{id:"bottom-bar-content",className:"flex items-center gap-3 px-3 py-2 max-w-lg mx-auto",children:[u.jsx(f5,{}),u.jsx(d5,{}),p&&u.jsx(u5,{}),!p&&u.jsx(c5,{}),u.jsx(a5,{viewerOpen:s,followQueue:o,queueSize:S,overallProgress:M,onToggleFollowQueue:i,onOpenFollowQueue:d})]}),u.jsx(o5,{}),u.jsx(r5,{})]})}const c0=l=>Symbol.iterator in l,d0=l=>"entries"in l,f0=(l,r)=>{const s=l instanceof Map?l:new Map(l.entries()),o=r instanceof Map?r:new Map(r.entries());if(s.size!==o.size)return!1;for(const[i,d]of s)if(!o.has(i)||!Object.is(d,o.get(i)))return!1;return!0},m5=(l,r)=>{const s=l[Symbol.iterator](),o=r[Symbol.iterator]();let i=s.next(),d=o.next();for(;!i.done&&!d.done;){if(!Object.is(i.value,d.value))return!1;i=s.next(),d=o.next()}return!!i.done&&!!d.done};function h5(l,r){return Object.is(l,r)?!0:typeof l!="object"||l===null||typeof r!="object"||r===null||Object.getPrototypeOf(l)!==Object.getPrototypeOf(r)?!1:c0(l)&&c0(r)?d0(l)&&d0(r)?f0(l,r):m5(l,r):f0({entries:()=>Object.entries(l)},{entries:()=>Object.entries(r)})}function g5(l){const r=Sa.useRef(void 0);return s=>{const o=l(s);return h5(r.current,o)?r.current:r.current=o}}function hd(l){return!!l&&typeof l=="object"&&!Array.isArray(l)}function kx(l){return Array.isArray(l)&&l.length>=2&&(typeof l[0]=="string"||typeof l[0]=="number")&&typeof l[1]=="number"}function Ui(l){return l.class_type??l.type??null}function ff(l,r){for(const s of r){const o=l.inputs?.[s];if(!kx(o)&&o!==void 0)return o}}function ja(l,r){const s=ff(l,r);if(s!=null)return typeof s=="string"?s:String(s)}function gd(l,r){if(!kx(r))return null;const s=String(r[0]);return l[s]??null}function x5(l){if(!l)return;const r=ja(l,["sampler_name","sampler","name"]);if(r)return r;if(Ui(l)==="KSamplerSelect"&&Array.isArray(l.widgets_values)){const o=l.widgets_values[0];return o==null?void 0:String(o)}}function v5(l){if(!l)return;const r=ja(l,["scheduler","scheduler_name","name"]);if(r)return r;if(Ui(l)==="BasicScheduler"&&Array.isArray(l.widgets_values)){const o=l.widgets_values[0];return o==null?void 0:String(o)}}function y5(l){if(!l)return;const r=ff(l,["steps","step_count"]);if(r!==void 0)return r;if(Ui(l)==="BasicScheduler"&&Array.isArray(l.widgets_values)){const o=l.widgets_values[1];return o??void 0}}function b5(l){if(!l)return;const r=ff(l,["cfg","guidance","guidance_scale"]);if(r!==void 0)return r;if(Array.isArray(l.widgets_values)){const s=l.widgets_values[0];return s??void 0}}function pf(l){const r={};if(!hd(l)&&!Array.isArray(l))return r;let s=null;if(Array.isArray(l)&&l.length>=3&&hd(l[2])?s=l[2]:hd(l)&&(s=l),!s)return r;const i=Object.entries(s).sort((d,p)=>Number(d[0])-Number(p[0])).map(([,d])=>d);for(const d of i){const p=Ui(d);if(p){if(p==="CheckpointLoaderSimple"||p==="CheckpointLoader"){const h=d.inputs?.ckpt_name;typeof h=="string"?r.model=h.replace(/\.(safetensors|ckpt|pt)$/i,""):h!=null&&(r.model=String(h).replace(/\.(safetensors|ckpt|pt)$/i,""))}if(p==="KSampler"||p==="KSamplerAdvanced"){if(r.steps===void 0&&d.inputs?.steps!==void 0&&(r.steps=d.inputs.steps),r.cfg===void 0&&d.inputs?.cfg!==void 0&&(r.cfg=d.inputs.cfg),r.sampler===void 0){const h=ja(d,["sampler_name"]);h&&(r.sampler=h)}if(r.scheduler===void 0){const h=ja(d,["scheduler"]);h&&(r.scheduler=h)}}if(p==="SamplerCustom"||p==="SamplerCustomAdvanced"){if(r.steps===void 0&&d.inputs?.steps!==void 0&&(r.steps=d.inputs.steps),r.cfg===void 0&&d.inputs?.cfg!==void 0&&(r.cfg=d.inputs.cfg),r.sampler===void 0){const h=ja(d,["sampler","sampler_name"]),m=gd(s,d.inputs?.sampler),g=h??x5(m);g&&(r.sampler=g)}if(r.scheduler===void 0){const h=ja(d,["scheduler","scheduler_name"]),m=gd(s,d.inputs?.sigmas??d.inputs?.scheduler),g=h??v5(m);g&&(r.scheduler=g)}if(r.steps===void 0){const h=gd(s,d.inputs?.sigmas??d.inputs?.scheduler),m=y5(h);m!==void 0&&(r.steps=m)}}if(p==="FluxGuidance"&&r.cfg===void 0){const h=b5(d);h!==void 0&&(r.cfg=h)}}}return r}function mf(l,r={}){const{onlyOutput:s=!1,alt:o}=r,i=[];return l.forEach((d,p)=>{const h=d.outputs?.images??[],m=pf(d.prompt),g=d.durationSeconds,x=d.success!==!1;h.forEach((y,N)=>{if(s&&y.type!=="output")return;const k=typeof o=="function"?o(N,p):o,S=y.subfolder?`${y.subfolder}/${y.filename}`:y.filename,w=Vo(y.filename),M=w==="video"?"video":"image";i.push({src:qn(y.filename,y.subfolder,y.type),alt:k,mediaType:w,metadata:m,durationSeconds:g,success:x,filename:y.filename,file:{id:`${y.type}/${S}`,name:y.filename,type:M,fullUrl:qn(y.filename,y.subfolder,y.type)}})})}),i}function w5({menuState:l,unifiedList:r,onClose:s,onLoadWorkflow:o,onCopyWorkflow:i,onDownload:d,onBatchDownload:p,onDeleteHistory:h,getBatchSources:m}){const g=l?.promptId??"",x=lt(j=>j.queueItemHideImages[g]),y=lt(j=>j.toggleQueueItemHideImages),N=()=>{l?.workflow&&l.promptId&&o(l.workflow,l.promptId),s()},k=()=>{i(l?.workflow),s()},S=async()=>{const j=l?.promptId?m(l.promptId,r):[];j.length>1?await p(j):l&&await d(l.imageSrc),s()},w=()=>{y(g),s()},M=()=>{l?.promptId&&h(l.promptId),s()};return l?.open?ll.createPortal(u.jsxs("div",{id:"queue-image-menu",className:"fixed z-[1200] bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden w-44",style:{top:l.top,right:l.right},children:[u.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${l.workflow?"":"opacity-50 cursor-not-allowed"}`,onClick:N,disabled:!l.workflow,children:[u.jsx(Oa,{className:"w-4 h-4 text-gray-500"}),"Load workflow"]}),u.jsxs("button",{className:`flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${l.workflow?"":"opacity-50 cursor-not-allowed"}`,onClick:k,disabled:!l.workflow,children:[u.jsx(K1,{className:"w-4 h-4 text-gray-500"}),"Copy workflow"]}),u.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:S,children:[u.jsx(J1,{className:"w-4 h-4 text-gray-500"}),l.promptId&&m(l.promptId,r).length>1?"Download batch":"Download"]}),l.hasVideoOutputs&&l.hasImageOutputs&&l.promptId&&u.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:w,children:[x?u.jsx(zr,{className:"w-4 h-4 text-gray-500"}):u.jsx(ul,{className:"w-4 h-4 text-gray-500"}),x?"Show images":"Hide images"]}),u.jsxs("button",{className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50",onClick:M,children:[u.jsx(Hl,{className:"w-4 h-4"}),"Delete"]})]}),document.body):null}function S5({message:l}){return l?ll.createPortal(u.jsx("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-[1300] bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg text-sm font-medium animate-in fade-in slide-in-from-top-2 duration-200",children:l}),document.body):null}function Mx(l){return"outputs"in l}function N5(l,r){const s=r.find(i=>i.id===l);return!s||s.status!=="done"?[]:Mx(s.data)?(s.data.outputs.images??[]).filter(i=>i.type==="output").map(i=>qn(i.filename,i.subfolder,i.type)):[]}async function Ox(l,r="image.png",s){try{const i=await(await fetch(l)).blob(),d=URL.createObjectURL(i),p=document.createElement("a");p.href=d,p.download=r,document.body.appendChild(p),p.click(),p.remove(),URL.revokeObjectURL(d),s?.(l)}catch(o){console.error("Failed to download image:",o)}}async function j5(l,r){for(const s of l)await Ox(s,"image.png",r)}async function C5(l){try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(l);else{const r=document.createElement("textarea");r.value=l,r.style.position="fixed",r.style.opacity="0",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}return!0}catch(r){return console.error("Failed to copy to clipboard:",r),!1}}function k5({item:l,isActuallyRunning:r,progress:s,overallProgress:o,executingNodeLabel:i,onDelete:d,onStop:p,onImageClick:h,viewerImages:m,runningImages:g,onOpenMenu:x,downloaded:y,isTopDoneItem:N}){const k=lt(Se=>Se.previewVisibility),S=lt(Se=>Se.previewVisibilityDefault),w=lt(Se=>Se.showQueueMetadata),M=lt(Se=>Se.queueItemExpanded[l.id]),j=lt(Se=>Se.setQueueItemExpanded),O=lt(Se=>Se.queueItemHideImages[l.id]),R=b.useRef(new Map),z=b.useRef(new Set),[T,D]=b.useState(new Set),A=l.status==="pending"&&!r,B=l.status==="running"||r,U=l.status==="done",G=M!==void 0,q=G?M:!1,te=b.useRef(U);b.useEffect(()=>{G||j(l.id,!1)},[G,l.id,j]),b.useEffect(()=>{!te.current&&U&&j(l.id,!0),te.current=U},[U,l.id,j]),b.useEffect(()=>{z.current.clear(),D(new Set)},[l.id]);const ge=()=>{j(l.id,!q)},le=U&&Mx(l.data)?l.data:null,ie=b.useMemo(()=>le?le.outputs.images:B?g:[],[le,B,g]),L=!!(l.data.prompt_id?k[l.data.prompt_id]??S:S),{savedImages:Q,displayImages:se}=b.useMemo(()=>{const Se=ie.filter(Le=>Le.type==="output"),ye=ie.filter(Le=>Le.type!=="output"),Oe=L||Se.length===0&&ye.length>0;return{savedImages:Se,displayImages:Oe?[...Se,...ye]:Se}},[L,ie]),xe=b.useMemo(()=>ie.some(Se=>wa(Se.filename)),[ie]),me=b.useMemo(()=>ie.some(Se=>!wa(Se.filename)),[ie]),_=b.useMemo(()=>!O||!xe?se:se.filter(Se=>wa(Se.filename)),[se,xe,O]),I=Q.map(Se=>({src:qn(Se.filename,Se.subfolder,Se.type),alt:"Generation"})),E="aspect-square w-full bg-gray-100 flex flex-col items-center justify-center text-gray-400",W=le?.durationSeconds,Y=le?le.success!==!1:!0,ce=M5(W),ee=o===100?100:s,ne=b.useMemo(()=>!w||!l.data.prompt?null:pf(l.data.prompt),[w,l.data.prompt]),ve=b.useMemo(()=>B?_.map(Se=>({src:qn(Se.filename,Se.subfolder,Se.type),alt:"Generation",mediaType:Vo(Se.filename)})):m,[B,m,_]);b.useEffect(()=>{q&&_.forEach(Se=>{if(!wa(Se.filename))return;const ye=qn(Se.filename,Se.subfolder,Se.type);if(z.current.has(ye))return;z.current.add(ye);const Oe=R.current.get(ye);if(!Oe)return;Oe.currentTime=0,D(it=>{const vt=new Set(it);return vt.delete(ye),vt});const Le=Oe.play();Le&&typeof Le.catch=="function"&&Le.catch(()=>{})})},[q,_]);const Te=Se=>{Se.stopPropagation(),ge()},We=Se=>{Se.stopPropagation(),p()},de=Se=>{Se.stopPropagation(),d()},Ne=Se=>{Se.stopPropagation();const ye=Se.currentTarget.getBoundingClientRect(),Oe=Math.max(8,window.innerWidth-ye.right),Le=I[0]?.src||"";x({top:ye.bottom+6,right:Oe,imageSrc:Le,workflow:le?.workflow,promptId:l.data.prompt_id||l.id,hasVideoOutputs:xe,hasImageOutputs:me})},Ce=Se=>()=>{D(ye=>new Set(ye).add(Se))},_e=Se=>()=>{D(ye=>{const Oe=new Set(ye);return Oe.delete(Se),Oe})},Ue=(Se,ye,Oe)=>()=>{const Le=ve.findIndex(it=>it.src===Se);h?.(ve,Le>=0?Le:ye,Oe)},Qe=Se=>ye=>{ye.stopPropagation();const Oe=R.current.get(Se);if(!Oe)return;Oe.currentTime=0;const Le=Oe.play();Le&&typeof Le.catch=="function"&&Le.catch(()=>{})};return u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden transition-all duration-300",children:[u.jsxs("div",{onClick:ge,className:`px-3 py-2 border-b flex justify-between items-center cursor-pointer select-none ${B?"bg-blue-50 border-blue-100":"bg-gray-50 border-gray-100"}`,children:[u.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[u.jsx("button",{onClick:Te,className:"w-8 h-8 -ml-2 flex items-center justify-center text-gray-400 hover:text-gray-600 shrink-0",children:q?u.jsx(Wn,{className:"w-6 h-6"}):u.jsx(Br,{className:"w-6 h-6"})}),B&&u.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),A&&u.jsx("span",{className:"text-xs font-bold text-gray-400",children:"PENDING"}),B&&u.jsx("span",{className:"text-xs font-bold text-blue-600",children:"GENERATING"}),U&&u.jsx("span",{className:"text-xs font-bold text-gray-500",children:new Date(l.timestamp||0).toLocaleTimeString()}),B&&!q&&r&&o!=null&&u.jsxs("span",{className:"ml-1 text-xs font-semibold text-blue-600",children:[Math.min(100,Math.max(0,o)),"%"]})]}),u.jsx("div",{className:"flex items-center gap-2",children:B?u.jsx("button",{onClick:We,className:"px-2 py-1 text-xs font-semibold text-white bg-red-600 rounded hover:bg-red-700",children:"Stop"}):U?u.jsx("button",{className:"w-7 h-7 flex items-center justify-center text-gray-700 hover:text-gray-900 bg-transparent hover:bg-transparent",onClick:Ne,"aria-label":"Image options",children:u.jsx(vr,{className:"w-4 h-4 -rotate-90"})}):u.jsx("button",{onClick:de,className:"text-gray-400 hover:text-red-500 px-2",title:A?"Remove from Queue":"Delete from History","aria-label":A?"Remove from Queue":"Delete from History",children:u.jsx(zo,{className:"w-4 h-4"})})})]}),q&&u.jsx("div",{className:"relative w-full animate-in fade-in duration-200",children:_.length>0?u.jsx("div",{className:"flex flex-col",children:(()=>{let Se=0,ye=0;return _.map((Oe,Le)=>{const it=Oe.type!=="output",vt=it?++ye:++Se,ht=`${it?"Preview":"Save"} #${vt}`,we=qn(Oe.filename,Oe.subfolder,Oe.type),Ae=y[we],Ke=_.length>1;return u.jsxs("div",{className:"relative",children:[ce&&u.jsxs("div",{className:`absolute top-2 left-2 flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold ${Y?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:[Y?u.jsx(Ir,{className:"w-3.5 h-3.5"}):u.jsx(Q1,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:ce})]}),wa(Oe.filename)?u.jsxs(u.Fragment,{children:[u.jsx("video",{src:we,className:"w-full h-auto block",muted:!0,playsInline:!0,preload:"metadata",ref:Ye=>{Ye?R.current.set(we,Ye):R.current.delete(we)},onEnded:Ce(we),onPlay:_e(we),onClick:Ue(we,Le,N)}),T.has(we)&&u.jsx("button",{type:"button",className:"absolute inset-0 flex items-center justify-center bg-black/35 text-white",onClick:Qe(we),"aria-label":"Replay video",children:u.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-black/60 text-2xl",children:""})})]}):u.jsx("img",{src:we,alt:"Generation",className:"w-full h-auto block",loading:"lazy",onClick:Ue(we,Le,N)}),Ae&&u.jsx("div",{className:"absolute bottom-2 right-2 w-7 h-7 rounded-full bg-black/60 text-white flex items-center justify-center",children:u.jsx(X1,{className:"w-4 h-4"})}),Ke&&u.jsx("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/60 text-white text-xs font-medium rounded backdrop-blur-sm shadow-sm pointer-events-none",children:ht}),ne&&u.jsxs("div",{className:`absolute right-2 flex flex-col-reverse items-end gap-1 pointer-events-none ${Ae?"bottom-10":"bottom-2"}`,children:[ne.model&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["model: ",ne.model]}),ne.sampler&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["sampler: ",ne.sampler]}),ne.steps&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["steps: ",ne.steps]}),ne.cfg&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["cfg: ",ne.cfg]})]})]},Le)})})()}):U?u.jsx("div",{className:E,children:u.jsx("span",{className:"text-sm",children:"No images saved"})}):B?u.jsx("div",{className:E,style:{minHeight:"300px"},children:r&&o!=null?u.jsxs("div",{className:"w-full max-w-xs px-4",children:[u.jsxs("p",{className:"font-semibold text-base text-gray-900 mb-3",children:["Executing: ",i||"Running"]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[ee,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"h-full bg-green-500 transition-none",style:{width:`${Math.min(100,Math.max(0,ee))}%`}})}),u.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500 mb-1",children:[u.jsx("span",{children:"Overall"}),u.jsxs("span",{children:[o,"%"]})]}),u.jsx("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-500 transition-none",style:{width:`${Math.min(100,Math.max(0,o))}%`}})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),u.jsx("p",{className:"font-medium text-lg text-blue-600",children:"Generating..."})]})}):u.jsxs("div",{className:E,style:{minHeight:"100px"},children:[u.jsx(vb,{className:"w-8 h-8 text-gray-300"}),u.jsx("span",{className:"text-xs mt-2 opacity-40",children:"Waiting to start..."})]})})]})}function M5(l){const r=l===void 0||Number.isNaN(l)?0:l;return r<10?`${r.toFixed(1)}s`:`${Math.round(r)}s`}function O5({listRef:l,unifiedList:r,visibleCount:s,hasLoadedOnce:o,effectiveExecutingId:i,progress:d,overallProgress:p,executingNodeLabel:h,onDeleteItem:m,onStop:g,onImageClick:x,viewerImages:y,promptOutputs:N,onOpenMenu:k,downloaded:S,firstDoneItemId:w,onScroll:M}){return u.jsxs("div",{ref:l,className:"flex-1 overflow-y-auto p-4 space-y-4 overscroll-contain scroll-container","data-queue-list":"true",onScroll:M,children:[r.length===0&&!o&&u.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-180px)] text-gray-400",children:u.jsxs("div",{className:"text-center",children:[u.jsx(Kd,{size:"lg",color:"gray",className:"mx-auto mb-4"}),u.jsx("p",{className:"text-lg",children:"Loading..."})]})}),r.length===0&&o&&u.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-180px)] text-gray-500",children:u.jsxs("div",{className:"text-center p-8",children:[u.jsx("div",{className:"flex items-center justify-center mb-4",children:u.jsx(Y1,{className:"w-10 h-10 text-gray-300"})}),u.jsx("p",{className:"text-lg font-medium",children:"Queue is empty"}),u.jsx("p",{className:"text-sm mt-2",children:"Run a workflow to see items here"})]})}),r.slice(0,s).map(j=>u.jsx(k5,{item:j,isActuallyRunning:j.id===i,progress:d,overallProgress:p,executingNodeLabel:h,onDelete:()=>m(j),onStop:g,onImageClick:x,viewerImages:y,runningImages:N[j.id]??[],onOpenMenu:k,downloaded:S,isTopDoneItem:j.id===w},j.id)),u.jsx("div",{className:"h-20"})]})}function E5(l,r,s){b.useEffect(()=>{if(!l)return;const o=()=>r(),i=d=>{const p=d.target,h=document.getElementById(s);h&&p&&h.contains(p)||r()};return document.addEventListener("scroll",o,!0),document.addEventListener("mousedown",i),()=>{document.removeEventListener("scroll",o,!0),document.removeEventListener("mousedown",i)}},[l,r,s])}function T5({visible:l,onImageClick:r}){const s=lt(de=>de.running),o=lt(de=>de.pending),i=lt(de=>de.fetchQueue),d=lt(de=>de.deleteItem),p=lt(de=>de.interrupt),h=J(de=>de.loadWorkflow),m=An(de=>de.setCurrentPanel),g=J(de=>de.workflow),x=J(de=>de.nodeTypes),y=J(de=>de.executingNodeId),N=J(de=>de.workflowDurationStats),k=J(de=>de.promptOutputs),S=Ln(de=>de.history),w=Ln(de=>de.fetchHistory),M=Ln(de=>de.deleteItem),{isExecuting:j,progress:O,executingPromptId:R}=J(g5(de=>({isExecuting:de.isExecuting,progress:de.progress,executingPromptId:de.executingPromptId}))),z=R||(s.length===1?s[0].prompt_id:null),T=b.useMemo(()=>{if(!g||!y)return null;const de=g.nodes.find(Ce=>String(Ce.id)===y);return de?x?.[de.type]?.display_name||de.type:`Node ${y}`},[g,y,x]),D=Ho({workflow:g,runKey:R||z,isRunning:j||!!z,workflowDurationStats:N}),[A,B]=b.useState(null),[U,G]=b.useState({}),[q,te]=b.useState(null),[ge,le]=b.useState(!1),[ie,L]=b.useState(0),Q=b.useRef(null),se=b.useRef(0),xe=b.useRef(!1),me=b.useRef(!1);b.useEffect(()=>{l&&(xe.current||me.current&&Q.current&&(Q.current.scrollTop=0),Promise.all([i(),w()]).then(()=>{le(!0)})),xe.current=l,me.current||(me.current=!0)},[l,i,w]),b.useEffect(()=>{!j&&l&&w()},[j,l,w]),E5(!!A?.open,()=>B(null),"queue-image-menu");const _=async de=>{if(!de)return;const Ne=JSON.stringify(de,null,2),Ce=await C5(Ne);te(Ce?"Copied to clipboard":"Failed to copy"),setTimeout(()=>te(null),2e3)},I=async de=>{await Ox(de,"image.png",Ne=>{G(Ce=>({...Ce,[Ne]:!0}))})},E=b.useMemo(()=>{const de={};S.forEach(Ce=>{de[Ce.prompt_id]={id:Ce.prompt_id,status:"done",data:Ce,timestamp:Ce.timestamp}}),s.forEach(Ce=>{de[Ce.prompt_id]||(de[Ce.prompt_id]={id:Ce.prompt_id,status:"running",data:Ce})}),o.forEach(Ce=>{de[Ce.prompt_id]||(de[Ce.prompt_id]={id:Ce.prompt_id,status:"pending",data:Ce})}),R&&de[R]&&(de[R].status="running");const Ne=Object.values(de);return Ne.sort((Ce,_e)=>{const Ue={pending:0,running:1,done:2};if(Ue[Ce.status]!==Ue[_e.status])return Ue[Ce.status]-Ue[_e.status];if(Ce.status==="pending"){const Qe=Ce.data.number;return _e.data.number-Qe}return Ce.status==="done"?(_e.timestamp||0)-(Ce.timestamp||0):0}),Ne},[o,s,S,R]),W=b.useMemo(()=>{if(E.length===0)return 0;const de=E.filter(Ue=>Ue.status==="pending").length,Ne=E.filter(Ue=>Ue.status==="running").length,_e=E.filter(Ue=>Ue.status==="done").length>0?1:0;return Math.min(E.length,de+Ne+_e)},[E]),Y=b.useMemo(()=>{const de=E.filter(Ne=>Ne.status==="done").map(Ne=>Ne.data);return mf(de,{onlyOutput:!0,alt:"Generation"})},[E]),ce=b.useMemo(()=>E.find(Ne=>Ne.status==="done")?.id??null,[E]);b.useEffect(()=>{l&&(se.current=E.length,queueMicrotask(()=>{L(de=>Math.max(de,W))}))},[l,E.length,W]),b.useEffect(()=>{if(!l)return;const de=Q.current;de&&(ie>=E.length||de.scrollHeight<=de.clientHeight+20&&queueMicrotask(()=>{L(Ne=>Math.min(E.length,Ne+10))}))},[l,ie,E.length]);const ee=de=>{de.status==="pending"&&d(de.id),de.status==="done"&&M(de.id)},ne=de=>{const{top:Ne,right:Ce,imageSrc:_e,workflow:Ue,promptId:Qe,hasVideoOutputs:Se,hasImageOutputs:ye}=de;B({open:!0,top:Ne,right:Ce,imageSrc:_e,workflow:Ue,promptId:Qe,hasVideoOutputs:Se,hasImageOutputs:ye})},ve=()=>{const de=Q.current;if(!de)return;de.scrollHeight-de.scrollTop-de.clientHeight<400&&L(Ce=>Math.min(se.current,Ce+10))},Te=(de,Ne)=>{h(de,`history-${Ne}.json`,{source:{type:"history",promptId:Ne}}),m("workflow")},We=async de=>{await j5(de,Ne=>{G(Ce=>({...Ce,[Ne]:!0}))})};return u.jsx("div",{id:"queue-panel-wrapper",className:"absolute inset-x-0 top-[60px] bottom-0",style:{display:l?"block":"none"},children:u.jsxs("div",{className:"flex flex-col bg-gray-100 min-h-full",children:[u.jsx(O5,{listRef:Q,unifiedList:E,visibleCount:ie,hasLoadedOnce:ge,effectiveExecutingId:z,progress:O,overallProgress:D,executingNodeLabel:T,onDeleteItem:ee,onStop:p,onImageClick:r,viewerImages:Y,promptOutputs:k,onOpenMenu:ne,downloaded:U,firstDoneItemId:ce,onScroll:ve}),u.jsx(w5,{menuState:A,unifiedList:E,onClose:()=>B(null),onLoadWorkflow:Te,onCopyWorkflow:_,onDownload:de=>I(de),onBatchDownload:We,onDeleteHistory:de=>M(de),getBatchSources:N5}),u.jsx(S5,{message:q})]})})}let xd=null,mi=[];function p0(l){return encodeURIComponent(l)}async function _5(){if(mi.length===0)return;const l=[...mi];mi=[];const r=l.map(s=>{const o=new Date(s.timestamp).toISOString(),i=s.data!==void 0?` | ${JSON.stringify(s.data)}`:"";return`${o} ${s.message}${i}`}).join(`
`)+`
`;try{let s="";try{const i=await fetch(`${zt}/api/userdata/${p0("mobile-debug.log")}`);i.ok&&(s=await i.text())}catch{}const o=s+r;await fetch(`${zt}/api/userdata/${p0("mobile-debug.log")}?overwrite=true`,{method:"POST",headers:{"Content-Type":"text/plain"},body:o})}catch(s){console.error("[debugLog] Failed to write to server:",s)}}function L5(){xd||(xd=setTimeout(()=>{xd=null,_5()},500))}function Ud(l,r){const s={timestamp:Date.now(),message:l,data:r};mi.push(s),r!==void 0?console.log(`[DEBUG] ${l}`,r):console.log(`[DEBUG] ${l}`),L5()}function A5(l,r,s){const o=l.closest("[data-textarea-root]")?.querySelector("[data-textarea-header]"),i=getComputedStyle(document.documentElement),d=parseFloat(i.getPropertyValue("--top-bar-offset"))||0,p=window.visualViewport?.offsetTop??0,h=window.visualViewport?.height??window.innerHeight,m=d+8,g=Ex(l),x=o?.getBoundingClientRect(),y=g===window?{type:"window",scrollY:window.scrollY}:(()=>{const D=g;return{type:"element",tag:D.tagName.toLowerCase(),scrollTop:D.scrollTop,height:D.clientHeight}})();Ud("textarea-scroll: start",{reason:s,behavior:r,headerTop:x?.top??null,layoutTopEdge:m,viewportTopEdge:p+d+8,viewportTop:p,viewportHeight:h,topBarOffset:d,container:y,selectionStart:l.selectionStart});const N=R5(l),k=p+d+h*.25,S=p+h-24,w=x?x.top-m:null,M=N-k,j=N>S?N-S:0;let O=0;const R=w!==null&&w>2,z=R?N-w:N,T=z<=S;R&&T?O=w??0:!R&&N<=S?O=0:(O=M,j>O&&(O=j)),O<0&&(O=0),x&&w!==null&&x.top>m+2&&O>w&&(O=w),Ud("textarea-scroll: align",{caretTop:N,targetTop:k,visibilityBottom:S,deltaHeader:w,deltaCaret:M,deltaCaretMin:j,caretAfterHeader:z,caretVisibleAfterHeader:T,canAlignHeader:R,delta:O}),Math.abs(O)>8&&Tx(g,O,r)}function D5(l){const r=l.closest("[data-textarea-root]")?.querySelector("[data-textarea-header]");if(!r)return;const s=getComputedStyle(document.documentElement),i=(parseFloat(s.getPropertyValue("--top-bar-offset"))||0)+8,d=r.getBoundingClientRect(),p=d.top-i;if(Math.abs(p)<2)return;const h=Ex(l);Ud("textarea-scroll: align-header-request",{headerTop:d.top,layoutTopEdge:i,delta:p}),Tx(h,p,"auto")}function R5(l){const r=l.getBoundingClientRect(),s=z5(l);return r.top+s-l.scrollTop}function z5(l){const r=l.selectionStart??0,s=l.value,o=document.createElement("div"),i=getComputedStyle(l),d=o.style;d.position="absolute",d.top="0",d.left="-9999px",d.visibility="hidden",d.whiteSpace="pre-wrap",d.wordWrap="break-word",d.overflowWrap="break-word",d.boxSizing=i.boxSizing,d.width=`${l.clientWidth}px`,d.padding=i.padding,d.border=i.border,d.fontFamily=i.fontFamily,d.fontSize=i.fontSize,d.fontWeight=i.fontWeight,d.fontStyle=i.fontStyle,d.letterSpacing=i.letterSpacing,d.lineHeight=i.lineHeight,d.textTransform=i.textTransform,d.textIndent=i.textIndent,d.tabSize=i.tabSize;const p=document.createTextNode(s.slice(0,r)),h=document.createElement("span");h.textContent=s.slice(r,r+1)||" ",h.style.display="inline-block",h.style.width="1px",o.appendChild(p),o.appendChild(h),document.body.appendChild(o);const m=o.getBoundingClientRect(),x=h.getBoundingClientRect().top-m.top;return document.body.removeChild(o),x}function vd(l){l?document.body.dataset.textareaFocus="true":delete document.body.dataset.textareaFocus}function Ex(l){let r=l?.parentElement??null;for(;r;){const o=getComputedStyle(r).overflowY;if((o==="auto"||o==="scroll")&&r.scrollHeight>r.clientHeight)return r;r=r.parentElement}return window}function Tx(l,r,s="smooth"){if(Math.abs(r)<1)return;if(l===window){window.scrollBy({top:r,behavior:s});return}const o=l;o.scrollTo({top:o.scrollTop+r,behavior:s})}function _x(){const[l,r]=b.useState(!1),s=b.useRef(null),o=b.useRef(null),i=b.useRef(null);return b.useEffect(()=>{const d=h=>{const m=h.target;if(!(m instanceof HTMLElement))return;const g=m.tagName.toLowerCase();if((m.isContentEditable||g==="input"||g==="textarea"||g==="select")&&r(!0),m instanceof HTMLTextAreaElement){vd(!0);const x=()=>A5(m,"smooth","focus");s.current&&clearTimeout(s.current),o.current&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",o.current),o.current=null),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null);const y=()=>{document.activeElement===m&&(x(),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null))};if(i.current=y,document.addEventListener("selectionchange",y),setTimeout(()=>{i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null)},1200),window.visualViewport){let N=!1;const k=()=>{N=!0,x(),o.current&&(window.visualViewport?.removeEventListener("resize",o.current),o.current=null)};o.current=k,window.visualViewport.addEventListener("resize",k),s.current=setTimeout(()=>{N||x(),setTimeout(x,300),o.current&&(window.visualViewport?.removeEventListener("resize",o.current),o.current=null)},600)}else requestAnimationFrame(x)}},p=()=>{const h=document.activeElement;if(!(h instanceof HTMLElement)){r(!1),vd(!1),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null);return}const m=h.tagName.toLowerCase(),g=h.isContentEditable||m==="input"||m==="textarea"||m==="select";r(g),vd(h instanceof HTMLTextAreaElement)};return document.addEventListener("focusin",d),document.addEventListener("focusout",p),()=>{document.removeEventListener("focusin",d),document.removeEventListener("focusout",p),s.current&&clearTimeout(s.current),o.current&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",o.current),o.current=null),i.current&&(document.removeEventListener("selectionchange",i.current),i.current=null)}},[]),b.useEffect(()=>{const d=p=>{const m=p.detail?.textarea;m&&D5(m)};return document.addEventListener("textarea-align-header",d),()=>{document.removeEventListener("textarea-align-header",d)}},[]),{isInputFocused:l}}function B5({index:l,total:r,displayName:s}){return u.jsx("div",{id:"media-viewer-header",className:"absolute top-0 inset-x-0 px-3 pt-3 pb-4 bg-gradient-to-b from-black/50 to-transparent",children:u.jsxs("div",{className:"grid grid-cols-3 items-center",children:[u.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[l+1," / ",r]}),u.jsx("div",{className:"justify-self-center text-white/90 text-sm font-medium max-w-[70vw] truncate",children:s}),u.jsx("div",{})]})})}function I5({index:l,total:r,onPrev:s,onNext:o}){return u.jsxs("div",{id:"media-viewer-navigation",className:"hidden sm:block",children:[u.jsx("button",{onClick:s,disabled:l===0,className:"absolute left-3 top-1/2 -translate-y-1/2 p-2 text-white/50 hover:text-white disabled:opacity-0 transition-all pointer-events-auto",children:u.jsx(A0,{className:"w-8 h-8"})}),u.jsx("button",{onClick:o,disabled:l===r-1,className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 text-white/50 hover:text-white disabled:opacity-0 transition-all pointer-events-auto",children:u.jsx(wi,{className:"w-8 h-8"})})]})}function H5({isVideo:l,onDelete:r,onLoadWorkflow:s,onLoadInWorkflow:o,showMetadataToggle:i,canToggleMetadata:d,onDeleteClick:p,onLoadWorkflowClick:h,onLoadInWorkflowClick:m,onToggleMetadata:g}){return u.jsxs("div",{className:"absolute inset-x-0 px-3 pb-2 pt-2 flex items-center justify-between",style:{bottom:"calc(var(--bottom-bar-offset, 0px) + 4px)"},children:[u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-red-500 flex items-center justify-center hover:bg-black/60 transition-colors ${r?"":"opacity-40 pointer-events-none"}`,onClick:p,"aria-label":"Delete output",children:u.jsx(Hl,{className:"w-5 h-5"})}),!l&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${s?"":"opacity-40 pointer-events-none"}`,onClick:h,"aria-label":"Load workflow",children:u.jsx(Oa,{className:"w-5 h-5"})}),u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${o?"":"opacity-40 pointer-events-none"}`,onClick:m,"aria-label":"Use in workflow",children:u.jsx(T0,{className:"w-5 h-5"})}),i&&u.jsx("button",{className:`pointer-events-auto w-9 h-9 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition-colors ${d?"":"opacity-40 pointer-events-none"}`,onClick:g,"aria-label":"Toggle metadata",children:u.jsx(E0,{className:"w-5 h-5"})})]})]})}function V5({isVideo:l,showMetadataToggle:r,showMetadataOverlay:s,metadataIsLoading:o,metadata:i,durationLabel:d}){return r?u.jsx("div",{className:`absolute right-3 flex flex-col items-end gap-1 pointer-events-none transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,style:{bottom:l?"calc(var(--bottom-bar-offset, 0px) + 120px)":"calc(var(--bottom-bar-offset, 0px) + 64px)"},children:o?u.jsx("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:"Loading metadata..."}):i?u.jsxs(u.Fragment,{children:[i.model&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["model: ",i.model]}),i.sampler&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["sampler: ",i.sampler]}),i.steps&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["steps: ",i.steps]}),i.cfg&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["cfg: ",i.cfg]}),d&&u.jsxs("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:["time: ",d]})]}):u.jsx("div",{className:"px-1.5 py-0.5 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm",children:"No metadata found"})}):null}const U5={x:0,y:0};function Lx({open:l,items:r,index:s,onIndexChange:o,onClose:i,onDelete:d,onLoadWorkflow:p,onLoadInWorkflow:h,showMetadataToggle:m=!1,showLoadingPlaceholder:g=!1,loadingProgress:x=0,loadingLabel:y,initialScale:N=1,initialTranslate:k=U5,onTransformChange:S,zoomResetKey:w,overlayZIndex:M=2100}){const j=b.useRef(null),O=b.useRef(null),R=b.useRef(null),z=b.useRef(null),[T,D]=b.useState(1),[A,B]=b.useState({x:0,y:0}),[U,G]=b.useState(null),[q,te]=b.useState(null),[ge,le]=b.useState(null),ie=b.useRef(null),[L,Q]=b.useState(null),[se,xe]=b.useState(null),[me,_]=b.useState(!1),[I,E]=b.useState(!1),W=b.useRef(null),Y=b.useRef("fit"),[ce,ee]=b.useState({}),[ne,ve]=b.useState({}),[Te,We]=b.useState(!1),{isInputFocused:de}=_x(),Ne=s>=0?r[s]??r[0]??null:null,Ce=Ne?.filename??Ne?.file?.name??Ne?.alt??Ne?.src??"",_e=!!(Ne?.mediaType==="video"||Ne?.file?.type==="video"||Ce&&wa(Ce)),Ue=Ne?.file?.id??null,Qe=Ue?ce[Ue]:void 0,Se=Ne?.metadata??(Qe===void 0?void 0:Qe),ye=G5(Ne?.durationSeconds),Oe=Ne?.filename||Ne?.alt||"Output",Le=I&&!me,it=m,vt=M+10,ht=Ue?!!ne[Ue]:!1,we=b.useCallback(()=>{_(!1),W.current&&clearTimeout(W.current),W.current=setTimeout(()=>{_(!0)},3e3)},[]),Ae=b.useCallback(()=>{we(),E(Me=>!Me)},[we]),Ke=b.useCallback(()=>{!Ne||!d||(we(),d(Ne))},[Ne,d,we]),Ye=b.useCallback(()=>{!Ne||!p||(we(),p(Ne))},[Ne,p,we]),et=b.useCallback(()=>{!Ne||!h||(we(),h(Ne))},[Ne,h,we]);b.useEffect(()=>(l?queueMicrotask(we):W.current&&clearTimeout(W.current),()=>{W.current&&clearTimeout(W.current)}),[l,we]),b.useLayoutEffect(()=>{l&&(D(N),B(k),G(null),te(null),le(null),ie.current=null,Y.current="fit")},[l,s,N,k]),b.useEffect(()=>{z.current=null,Q(null),We(!1)},[Ne?.src]),b.useEffect(()=>{if(l)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[l]),b.useEffect(()=>{l&&S&&S(T,A)},[l,T,A,S]),b.useEffect(()=>{if(!l)return;const Me=Re=>{Re.key==="Escape"&&i()};return document.addEventListener("keydown",Me),()=>document.removeEventListener("keydown",Me)},[l,i]),b.useEffect(()=>{if(!l||!m||!Ne?.file||Ne.metadata||!Ue||Se!==void 0||ht)return;const Me=Ue.startsWith("input/")?"input":"output",Re=Ue.startsWith(`${Me}/`)?Ue.slice(Me.length+1):Ue;ve(Be=>({...Be,[Ue]:!0})),b1(Re,Me).then(Be=>{const Pe=Be?.prompt?pf(Be.prompt):null,F=Pe&&Object.keys(Pe).length>0?Pe:null;ee(be=>({...be,[Ue]:F}))}).catch(()=>{ee(Be=>({...Be,[Ue]:null}))}).finally(()=>{ve(Be=>({...Be,[Ue]:!1}))})},[l,m,Ne,Ue,Se,ht]);const Ze=b.useMemo(()=>!L||!se?null:se.height/L.height,[L,se]),dt=b.useMemo(()=>Ze===null?1:Math.min(1,Ze),[Ze]),re=b.useMemo(()=>Ze===null?1:Math.max(1,Ze),[Ze]),rt=(Me=T,Re=L)=>{if(!Re||!se)return{x:0,y:0};const Be=Re.width*Me,Pe=Re.height*Me;return{x:Be<se.width?(se.width-Be)/2:0,y:Pe<se.height?(se.height-Pe)/2:0}},Xe=b.useCallback((Me,Re=T)=>{if(!L||!se)return Me;const Be=se.width,Pe=se.height,F=L.width*Re,be=L.height*Re,fe=F<=Be?0:Math.max(Be-F,Math.min(0,Me.x)),ke=be<=Pe?0:Math.max(Pe-be,Math.min(0,Me.y));return{x:fe,y:ke}},[L,se,T]),gt=b.useCallback(Me=>{let Re=dt;if(Me==="cover"?Re=re:Re=dt,Y.current=Me,D(Re),!L||!se)B({x:0,y:0});else{const Be=L.width*Re,Pe=L.height*Re,F={x:(se.width-Be)/2,y:(se.height-Pe)/2};B(Xe(F,Re))}},[L,Xe,se,re,dt]),$t=Me=>{const Re=Me.currentTarget;z.current={width:Re.naturalWidth,height:Re.naturalHeight};const Be=j.current;if(!Be||Re.naturalWidth===0)return;const Pe=Be.clientWidth,F=Be.clientHeight,be=Pe/Re.naturalWidth;Q({width:Pe,height:Re.naturalHeight*be}),xe({width:Pe,height:F})};b.useEffect(()=>{if(_e||!l)return;const Me=O.current,Re=j.current;if(!Me||!Re)return;const Be=()=>{const F=z.current,be=Re.clientWidth,fe=Re.clientHeight;if(xe({width:be,height:fe}),!F||F.width===0)return;const ke=be/F.width,Ie=F.height*ke;Q({width:be,height:Ie}),B(st=>Xe(st))};Be();const Pe=new ResizeObserver(Be);return Pe.observe(Re),()=>Pe.disconnect()},[l,Ne?.src,Xe,_e]),b.useEffect(()=>{_e||!l||!L||!se||gt(Y.current)},[l,Ne?.src,L,se,dt,re,gt,_e]),b.useEffect(()=>{l&&w!==void 0&&gt(Y.current)},[l,w,gt]);const cl=()=>{we(),s>0&&o(s-1)},dl=()=>{we(),s<r.length-1&&o(s+1)},fl=Me=>{if(_e){const Be=R.current;if(Be&&Me.target===Be){const Pe=Be.getBoundingClientRect();if(Me.clientY>Pe.bottom-60)return}}Me.currentTarget.setPointerCapture(Me.pointerId);const Re=yd(j.current);if(Re.set(Me.pointerId,{x:Me.clientX,y:Me.clientY}),Re.size===1)te({x:Me.clientX,y:Me.clientY,time:Date.now()}),_e||G({x:Me.clientX-A.x,y:Me.clientY-A.y});else if(Re.size===2&&!_e){const[Be,Pe]=Array.from(Re.values()),F=Math.hypot(Pe.x-Be.x,Pe.y-Be.y),be=(Be.x+Pe.x)/2,fe=(Be.y+Pe.y)/2,ke=j.current?.getBoundingClientRect(),Ie=rt(T),st=ke?{x:(be-ke.left-Ie.x-A.x)/T,y:(fe-ke.top-Ie.y-A.y)/T}:void 0;le({distance:F,scale:T,centerX:be,centerY:fe,imagePoint:st})}},Cn=Me=>{const Re=yd(j.current);if(Re.has(Me.pointerId)){if(Re.set(Me.pointerId,{x:Me.clientX,y:Me.clientY}),Re.size===2&&ge&&!_e){const[Be,Pe]=Array.from(Re.values()),F=Math.hypot(Pe.x-Be.x,Pe.y-Be.y),fe=Math.max(dt,Math.min(5,ge.scale*(F/ge.distance)));D(fe);const ke=j.current?.getBoundingClientRect(),Ie=(Be.x+Pe.x)/2,st=(Be.y+Pe.y)/2;if(ke&&ge.imagePoint){const Ge=rt(fe),xt={x:Ie-ke.left-Ge.x-ge.imagePoint.x*fe,y:st-ke.top-Ge.y-ge.imagePoint.y*fe};B(Xe(xt,fe))}else B(Ge=>Xe(Ge,fe));return}Re.size===1&&!_e&&(T>1||L&&j.current&&L.height*T>j.current.clientHeight+1)&&U&&B(Xe({x:Me.clientX-U.x,y:Me.clientY-U.y}))}},sn=Me=>{const Re=yd(j.current);if(Re.delete(Me.pointerId),Re.size<2&&le(null),Re.size===0){const Be=Date.now(),Pe=ie.current,F=Pe?Me.clientX-Pe.x:0,be=Pe?Me.clientY-Pe.y:0,fe=!!(Pe&&Be-Pe.time<300&&Math.hypot(F,be)<24);if(!_e&&fe){ie.current=null;const ke=Y.current;gt(ke==="fit"?"cover":"fit"),we()}else if(ie.current={time:Be,x:Me.clientX,y:Me.clientY},!de&&q){const ke=Me.clientX-q.x,Ie=Me.clientY-q.y,st=Date.now()-q.time,Ge=Math.abs(ke),xt=Math.abs(Ie),jt=Math.abs(T-dt)<.05||Math.abs(T-re)<.05,Bt=st<250&&Ge<10&&xt<10;st<=350&&Ge>60&&Ge>xt&&jt?ke<0?s<r.length-1&&o(s+1):ke>0&&s>0&&o(s-1):Bt&&we()}}Re.size===0&&G(null)},xn=Me=>{if(_e||!Me.ctrlKey)return;Me.preventDefault();const Re=-Me.deltaY*.005,Be=Math.max(dt,Math.min(5,T+Re));D(Be),B(Pe=>Xe(Pe,Be))};return l?!Ne&&!g?ll.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[2000] bg-black flex flex-col items-center justify-center text-white",role:"dialog","aria-modal":"true",children:[u.jsx("button",{className:"absolute top-4 right-4 z-[2010] w-10 h-10 rounded-full bg-black/60 text-white text-xl flex items-center justify-center",onClick:i,"aria-label":"Close viewer",children:""}),u.jsx("p",{className:"text-gray-400 mb-2",children:"No images to display"}),u.jsxs("p",{className:"text-gray-500 text-sm",children:["images: ",r.length,", index: ",s]})]}),document.body):ll.createPortal(u.jsxs("div",{id:"media-viewer-overlay",className:"fixed inset-0 bg-black",style:{zIndex:M},onWheel:xn,children:[u.jsx("div",{ref:j,className:`absolute inset-x-0 top-0 overflow-hidden ${_e?"":"touch-none"}`,style:{overscrollBehavior:"contain",height:"calc(100vh - var(--bottom-bar-offset, 0px))",zIndex:1},onPointerDown:fl,onPointerMove:Cn,onPointerUp:sn,onPointerCancel:sn,children:g?u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-gray-600 border-t-white rounded-full animate-spin"}),u.jsx("div",{className:"mt-4 w-48 h-2 rounded-full bg-gray-700 overflow-hidden",children:u.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,x))}%`}})}),u.jsx("div",{className:"mt-2 text-sm text-gray-300",children:y??`${Math.min(100,Math.max(0,x))}%`})]}):Ne&&u.jsx(u.Fragment,{children:_e?u.jsxs(u.Fragment,{children:[u.jsx("video",{ref:R,src:Ne.src,controls:!0,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-contain select-none",onDragStart:Me=>Me.preventDefault(),onError:()=>We(!0)}),Te&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-sm bg-black/60",children:"Unable to play this video."})]}):u.jsx("img",{ref:O,src:Ne.src,alt:Ne.alt||"Generation",className:"w-full h-auto block select-none relative",draggable:!1,onLoad:$t,style:{transform:`translate3d(${rt(T).x+A.x}px, ${rt(T).y+A.y}px, 0) scale(${T})`,transformOrigin:"top left",willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transition:ge||U?"none":"transform 0.05s linear"}})})}),u.jsx("button",{onClick:i,className:`absolute top-3 right-3 w-9 h-9 rounded-full flex items-center justify-center transition-colors ${me?"bg-transparent text-white":"bg-black/60 text-white"}`,style:{zIndex:vt},"aria-label":"Close viewer",children:u.jsx(zo,{className:"w-6 h-6"})}),u.jsx("div",{className:`absolute inset-0 pointer-events-none transition-opacity duration-300 ${me?"opacity-0":"opacity-100"}`,style:{zIndex:vt},children:Ne&&u.jsxs(u.Fragment,{children:[u.jsx(B5,{index:s,total:r.length,displayName:Oe}),u.jsx(I5,{index:s,total:r.length,onPrev:cl,onNext:dl}),u.jsx(H5,{isVideo:_e,onDelete:d,onLoadWorkflow:p,onLoadInWorkflow:h,showMetadataToggle:m,canToggleMetadata:it,onDeleteClick:Ke,onLoadWorkflowClick:Ye,onLoadInWorkflowClick:et,onToggleMetadata:Ae}),u.jsx(V5,{isVideo:_e,showMetadataToggle:m,showMetadataOverlay:Le,metadataIsLoading:ht,metadata:Se,durationLabel:ye})]})})]}),document.body):null}function yd(l){const r=l;return r?(r.__activePointers||(r.__activePointers=new Map),r.__activePointers):new Map}function G5(l){const r=l===void 0||Number.isNaN(l)?0:l;return r===0?"":r<10?`${r.toFixed(1)}s`:`${Math.round(r)}s`}function Ax({file:l,onCancel:r,onConfirm:s}){return l?u.jsx("div",{id:"outputs-load-workflow-confirm-overlay",className:"fixed inset-0 z-[2200] bg-black/50 flex items-center justify-center p-4",onClick:r,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-load-workflow-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:o=>o.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Unsaved changes"}),u.jsx("div",{className:"text-gray-600 text-sm mt-1",children:"Are you sure you want to load this workflow? You have unsaved changes."}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:r,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:()=>s(l),children:"Continue"})]})]})}):null}function _i(l){return l.id.startsWith("input/")?"input":"output"}function Ro(l,r){const o=`${r??_i(l)}/`;return l.id.startsWith(o)?l.id.slice(o.length):l.id}function q5(l){return`output-${l.replace(/[\\/]/g,"_")}.json`}async function Dx(l){const{file:r,source:s,loadWorkflow:o,onLoaded:i,onError:d}=l;try{const p=s??_i(r),h=Ro(r,p),m=await y1(h,p);o(m,q5(h),{source:{type:"other"}}),i?.()}catch(p){throw d?.(p),p}}function W5(l){const{workflow:r,nodeTypes:s,nodeId:o}=l;if(!r||!s)return null;const i=r.nodes.find(p=>p.id===o);if(!i)return null;const d=["image","filename","file"];for(const p of d){const h=xr(r,s,i,p);if(h!==null)return{node:i,index:h,name:p}}return null}function m0(l,r){const s=l.title,o=typeof s=="string"&&s.trim()?s.trim():null,i=r?.[l.type];return o||i?.display_name||l.type}function F5(l){const r=l.replace(/^\/+/,""),s=r.split("/").filter(Boolean);return s.length<=1?{filename:r,subfolder:""}:{filename:s.pop()??r,subfolder:s.join("/")}}async function $5(l,r){if(r==="input")return Ro(l,r);const s=Ro(l,r),{filename:o,subfolder:i}=F5(s),d=l.fullUrl||qn(o,i,r),p=await fetch(d);if(!p.ok)throw new Error("Failed to fetch image data.");const h=await p.blob(),m=o||l.name||"image.png",g=new File([h],m,{type:h.type||"image/png"}),x=await j0(g,{type:"input",overwrite:!0}),y=x.subfolder?`${x.subfolder}/${x.name}`:x.name;if(!(await fetch(qn(x.name,x.subfolder??"","input"))).ok)throw new Error("Uploaded image was not found in inputs.");return y}function Rx({open:l,file:r,source:s,onClose:o,onLoaded:i}){const d=J(O=>O.workflow),p=J(O=>O.nodeTypes),h=J(O=>O.setNodeTypes),m=J(O=>O.updateNodeWidget),g=Jt(O=>O.clearNodeError),x=J(O=>O.scrollToNode),y=An(O=>O.setCurrentPanel),[N,k]=b.useState(null),[S,w]=b.useState(null),M=b.useMemo(()=>d?d.nodes.filter(O=>/loadimage/i.test(O.type)):[],[d]);b.useEffect(()=>{l||(k(null),w(null))},[l]);const j=async O=>{if(!(!r||!d)){w(O),k(null);try{const R=W5({workflow:d,nodeTypes:p,nodeId:O});if(!R)throw new Error("Selected node does not accept image inputs.");const z=await $5(r,s);if(s!=="input")try{const T=await b0();h(T)}catch(T){console.warn("Failed to refresh node types after upload:",T)}m(R.node.id,R.index,z,R.name),g(R.node.id),y("workflow"),i?.(),setTimeout(()=>{x(R.node.id,m0(R.node,p))},150)}catch(R){console.error("Failed to load image into node:",R),k(R instanceof Error?R.message:"Failed to load image.")}finally{w(null)}}};return!l||!r?null:u.jsx("div",{id:"outputs-load-node-overlay",className:"fixed inset-0 z-[2150] bg-black/50 flex items-center justify-center p-4",onClick:o,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-load-node-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:O=>O.stopPropagation(),children:[u.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:"Load image into node"}),u.jsx("div",{className:"px-4 pt-3 text-xs text-gray-500",children:r.name}),u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[M.length===0&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"No Load Image nodes found in the current workflow."}),M.map(O=>{const R=m0(O,p),z=S===O.id;return u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed",onClick:()=>j(O.id),disabled:S!==null,children:[u.jsxs("span",{className:"text-gray-500 dark:text-gray-300",children:["#",O.id]}),u.jsx("span",{className:"flex-1 text-gray-900 dark:text-gray-100 truncate",children:R}),z&&u.jsx("span",{className:"text-xs text-gray-400",children:"Loading"})]},`load-node-${O.id}`)})]}),N&&u.jsx("div",{className:"px-4 py-2 text-xs text-red-600 border-t border-gray-100",children:N}),u.jsx("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end",children:u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg disabled:opacity-60",onClick:o,disabled:S!==null,children:"Close"})})]})})}function Y5({file:l,onCancel:r,onConfirm:s}){return u.jsx("div",{id:"viewer-delete-confirm-overlay",className:"fixed inset-0 z-[2200] bg-black/50 flex items-center justify-center p-4",onClick:r,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"viewer-delete-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:o=>o.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Delete file?"}),u.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:['This will permanently delete "',l.name,'" from the server. This cannot be undone.']}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:r,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:s,children:"Delete"})]})]})})}function Q5({onClose:l}){const r=nl(ee=>ee.viewerOpen),s=nl(ee=>ee.viewerImages),o=nl(ee=>ee.viewerIndex),i=nl(ee=>ee.viewerScale),d=nl(ee=>ee.viewerTranslate),p=J(ee=>ee.followQueue),h=nl(ee=>ee.setViewerState),m=J(ee=>ee.workflow),g=J(ee=>ee.originalWorkflow),x=J(ee=>ee.workflowDurationStats),y=J(ee=>ee.isExecuting),N=J(ee=>ee.executingPromptId),k=An(ee=>ee.setCurrentPanel),S=J(ee=>ee.loadWorkflow),w=lt(ee=>ee.running),M=Ln(ee=>ee.history),[j,O]=b.useState(null),[R,z]=b.useState(null),[T,D]=b.useState(null),[A,B]=b.useState(!1),U=b.useRef(null),G=b.useMemo(()=>!!(m&&g&&JSON.stringify(m)!==JSON.stringify(g)),[m,g]),q=b.useMemo(()=>!r||!p?null:M[0]?.prompt_id??null,[r,p,M]),te=N||(w.length===1?w[0].prompt_id:null),ge=Ho({workflow:m,runKey:te,isRunning:y||w.length>0,workflowDurationStats:x}),le=y||w.length>0,ie=Math.min(100,Math.max(0,ge??0)),Q=!(o>=0?s[o]??s[0]??null:null)&&(p||le)||o<0&&le;b.useEffect(()=>{if(!r||!p){U.current=null;return}!U.current&&M[0]?.prompt_id&&(U.current=M[0]?.prompt_id??null)},[r,p,M]),b.useEffect(()=>{if(!r||!p||M.length===0)return;const ee=M[0];if(U.current===ee.prompt_id||ee.outputs.images.filter(Te=>Te.type==="output").length===0)return;const ve=mf(M,{onlyOutput:!0,alt:"Generation"});ve.length!==0&&(U.current=ee.prompt_id,h({viewerImages:ve,viewerIndex:0,viewerScale:1,viewerTranslate:{x:0,y:0}}))},[r,p,M,h]);const se=ee=>{h({viewerIndex:ee})},xe=(ee,ne)=>{h({viewerScale:ee,viewerTranslate:ne})},me=ee=>{ee.file&&O(ee.file)},_=async()=>{if(!j)return;const ee=j;try{const ne=Ro(ee);await jd(ne,_i(ee));const ve=s.filter(de=>de.file?.id!==ee.id),Te=s.findIndex(de=>de.file?.id===ee.id),We=ve.length===0?0:Te<0?o:Te<o?o-1:Te===o?Math.min(o,ve.length-1):o;h({viewerImages:ve,viewerIndex:We}),ve.length===0&&l()}catch(ne){console.error("Failed to delete file:",ne),window.alert("Failed to delete file.")}finally{O(null)}},I=ee=>{if(ee.file){if(G){z(ee.file);return}E(ee.file)}},E=async ee=>{try{await Dx({file:ee,loadWorkflow:S,onLoaded:()=>{l(),queueMicrotask(()=>k("workflow"))}})}catch(ne){console.error("Failed to load workflow from file:",ne),window.alert("Failed to load workflow from file.")}finally{z(null)}},W=ee=>{!ee.file||ee.file.type!=="image"||(D(ee.file),B(!0))},Y=()=>{B(!1),D(null)},ce=()=>{Y(),l(),queueMicrotask(()=>k("workflow"))};return r?u.jsxs(u.Fragment,{children:[u.jsx(Lx,{open:r,items:s,index:o,onIndexChange:se,onClose:l,onDelete:me,onLoadWorkflow:I,onLoadInWorkflow:W,showMetadataToggle:!0,showLoadingPlaceholder:Q,loadingProgress:ie,loadingLabel:le?`${ie}%`:"Waiting for output",initialScale:i,initialTranslate:d,onTransformChange:xe,zoomResetKey:q,overlayZIndex:2100}),u.jsx(Ax,{file:R,onCancel:()=>z(null),onConfirm:E}),u.jsx(Rx,{open:A,file:T,source:T?_i(T):"output",onClose:Y,onLoaded:ce}),j&&u.jsx(Y5,{file:j,onCancel:()=>O(null),onConfirm:_})]}):null}function X5(){const[l,r]=b.useState(!1),s=b.useRef(null),o=b.useRef(null),i=b.useRef({}),d=b.useRef({setExecutionState:J.getState().setExecutionState,setNodeOutput:J.getState().setNodeOutput,clearNodeOutputs:J.getState().clearNodeOutputs,addPromptOutputs:J.getState().addPromptOutputs,clearPromptOutputs:J.getState().clearPromptOutputs,applyControlAfterGenerate:J.getState().applyControlAfterGenerate,updateFromStatus:lt.getState().updateFromStatus,fetchQueue:lt.getState().fetchQueue,addHistoryEntry:Ln.getState().addHistoryEntry,fetchHistory:Ln.getState().fetchHistory});b.useEffect(()=>{d.current={setExecutionState:J.getState().setExecutionState,setNodeOutput:J.getState().setNodeOutput,clearNodeOutputs:J.getState().clearNodeOutputs,addPromptOutputs:J.getState().addPromptOutputs,clearPromptOutputs:J.getState().clearPromptOutputs,applyControlAfterGenerate:J.getState().applyControlAfterGenerate,updateFromStatus:lt.getState().updateFromStatus,fetchQueue:lt.getState().fetchQueue,addHistoryEntry:Ln.getState().addHistoryEntry,fetchHistory:Ln.getState().fetchHistory}},[]);const p=b.useRef(null);return b.useEffect(()=>{const h=x=>{const{setExecutionState:y,setNodeOutput:N,addPromptOutputs:k,clearPromptOutputs:S,updateFromStatus:w,fetchQueue:M,addHistoryEntry:j,fetchHistory:O}=d.current,R=x;switch(R.type){case"status":{const T=R.data.status.exec_info.queue_remaining;w(T),T===0&&y(!1,null,null,0);break}case"progress":{const z=R,{value:T,max:D,node:A,prompt_id:B}=z.data,U=Math.round(T/D*100);y(!0,A||null,B||null,U);break}case"executing":{const z=R,T=z.data.node,D=z.data.prompt_id;if(T===null){if(y(!1,null,null,0),d.current.applyControlAfterGenerate(),D){const A=lt.getState().running.find(U=>U.prompt_id===D),B=i.current[D]||[];A&&j({prompt_id:D,timestamp:Date.now(),outputs:{images:B},prompt:A.prompt}),delete i.current[D],S(D)}M(),O()}else{D&&D!==p.current&&(p.current=D),y(!0,T,D||null,0);const A=lt.getState();D&&!A.running.some(B=>B.prompt_id===D)&&M()}break}case"executed":{const z=R,{node:T,prompt_id:D,output:A}=z.data;A.images&&(i.current[D]||(i.current[D]=[]),i.current[D].push(...A.images),k(D,A.images),N(T,A.images));break}case"execution_error":{y(!1,null,null,0),S(),M(),O();break}}},m=()=>{s.current?.readyState!==WebSocket.OPEN&&(s.current=x1(y0,h,async()=>{r(!0);const{fetchQueue:x,fetchHistory:y,setExecutionState:N}=d.current;await x(),y();const k=lt.getState(),S=J.getState();if(k.running.length>0&&!S.executingPromptId){const w=k.running[0];N(!0,null,w.prompt_id,0)}},()=>{r(!1),o.current=setTimeout(m,2e3)},()=>{r(!1)}))};m();const g=setInterval(()=>{const{fetchQueue:x,fetchHistory:y}=d.current;lt.getState().running.length>0&&(x(),y())},2e3);return()=>{o.current&&clearTimeout(o.current),s.current&&s.current.close(),clearInterval(g)}},[]),{isConnected:l}}function P5({onSwipeLeft:l,onSwipeRight:r,onSwipeUp:s,onSwipeDown:o,enabled:i=!0,threshold:d=50,preventScroll:p=!0,deferResetOnSwipe:h=!1,deferResetDurationMs:m=350}){const[g,x]=b.useState(0),[y,N]=b.useState(!1),[k,S]=b.useState(i),w=b.useRef(null),M=b.useRef(null);b.useEffect(()=>{S(i)},[i]);const j=b.useCallback(()=>{w.current=null,N(!1),x(0)},[]),O=b.useCallback(R=>{S(R)},[]);return b.useEffect(()=>{if(!k)return;const R=A=>{if(!(A instanceof HTMLElement))return!1;if(A.isContentEditable)return!0;const B=A.tagName.toLowerCase();return B==="input"||B==="textarea"||B==="select"},z=A=>{if(R(A.target)||R(document.activeElement))return;M.current!==null&&(window.clearTimeout(M.current),M.current=null);const B=A.touches[0];w.current={startX:B.clientX,startY:B.clientY,currentX:B.clientX,currentY:B.clientY,isHorizontal:null,isTracking:!0}},T=A=>{const B=w.current;if(!B?.isTracking)return;const U=A.touches[0],G=U.clientX-B.startX,q=U.clientY-B.startY;if(B.isHorizontal===null){if(Math.abs(G)>20||Math.abs(q)>20){const te=Math.abs(G)>Math.abs(q);B.isHorizontal=te,te?(G>0?!!r:!!l)?N(!0):B.isTracking=!1:(q>0?o:s)||(B.isTracking=!1)}return}B.isHorizontal?(p&&A.cancelable&&A.preventDefault(),B.currentX=U.clientX,x(U.clientX-B.startX)):B.currentY=U.clientY},D=()=>{const A=w.current;if(!A?.isTracking){j();return}const B=A.currentX-A.startX,U=A.currentY-A.startY,G=d||window.innerWidth*.25;let q=!1;A.isHorizontal===!0?B<-G&&l?(l(),q=!0):B>G&&r&&(r(),q=!0):A.isHorizontal===!1&&(U<-G&&s?(s(),q=!0):U>G&&o&&(o(),q=!0)),q?h?(w.current=null,N(!1),M.current!==null&&window.clearTimeout(M.current),M.current=window.setTimeout(()=>{j(),M.current=null},m)):requestAnimationFrame(()=>{j()}):j()};return document.addEventListener("touchstart",z,{passive:!0}),document.addEventListener("touchmove",T,{passive:!1}),document.addEventListener("touchend",D,{passive:!0}),document.addEventListener("touchcancel",D,{passive:!0}),()=>{document.removeEventListener("touchstart",z),document.removeEventListener("touchmove",T),document.removeEventListener("touchend",D),document.removeEventListener("touchcancel",D),M.current!==null&&(window.clearTimeout(M.current),M.current=null),j()}},[k,l,r,s,o,d,p,h,m,j]),{swipeOffset:g,isSwiping:y,setSwipeEnabled:O,resetSwipeState:j}}function Z5({open:l,onClose:r,filter:s,sort:o,onChangeFilter:i,onChangeSort:d}){if(!l)return null;const p=o?.mode||"modified",h=p.includes("name")?"name":p.includes("size")?"size":"date",m=(()=>{const x=p.endsWith("reverse");return h==="date"?x?"asc":"desc":x?"desc":"asc"})(),g=(x,y)=>{let N;x==="name"?N=y==="asc"?"name":"name-reverse":x==="size"?N=y==="asc"?"size":"size-reverse":N=y==="desc"?"modified":"modified-reverse",d({mode:N})};return u.jsx("div",{id:"filter-modal-root",className:"fixed inset-0 z-[1600] bg-black/50 flex items-center justify-center p-4",onClick:r,children:u.jsxs("div",{id:"filter-modal-content",className:"bg-white rounded-xl shadow-lg w-full max-w-sm max-h-[90vh] overflow-y-auto",onClick:x=>x.stopPropagation(),children:[u.jsxs("div",{id:"filter-modal-header",className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[u.jsx("h3",{id:"filter-modal-title",className:"font-semibold text-gray-900",children:"Filter & Sort"}),u.jsx("button",{onClick:r,children:u.jsx(zo,{className:"w-6 h-6 text-gray-500"})})]}),u.jsxs("div",{id:"filter-modal-body",className:"p-4 space-y-6",children:[u.jsxs("div",{id:"sort-group-container",children:[u.jsx("h4",{id:"sort-group-label",className:"text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),u.jsx("div",{id:"sort-options-grid",className:"grid grid-cols-2 gap-2",children:["name","date","size"].map(x=>{const y=h===x,N=y?m==="asc"?"desc":"asc":x==="name"?"asc":"desc";return u.jsxs("button",{className:`sort-option-button px-3 py-2 rounded-lg text-sm border ${y?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,onClick:()=>g(x,N),children:[x==="name"?"Name":x==="size"?"Size":"Date",y&&(m==="asc"?" ":" ")]},x)})})]}),u.jsxs("div",{id:"filter-type-group-container",children:[u.jsx("h4",{id:"filter-type-label",className:"text-sm font-medium text-gray-700 mb-2",children:"File Type"}),u.jsx("div",{id:"filter-type-options",className:"flex gap-2",children:["all","image","video"].map(x=>u.jsx("button",{className:`filter-type-button flex-1 px-3 py-2 rounded-lg text-sm border ${s.type===x?"bg-blue-500 border-blue-500 text-white shadow-sm":"border-gray-200 text-gray-700 hover:bg-gray-50"}`,onClick:()=>i({type:x}),children:x.charAt(0).toUpperCase()+x.slice(1)},x))})]}),u.jsxs("div",{id:"search-input-container",children:[u.jsx("label",{id:"search-input-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),u.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Search by filename...",value:s.search,onChange:x=>i({search:x.target.value})})]}),u.jsxs("div",{id:"favorites-toggle-container",className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"favOnly",checked:s.favoritesOnly,onChange:x=>i({favoritesOnly:x.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500"}),u.jsx("label",{htmlFor:"favOnly",className:"text-sm text-gray-700",children:"Show Favorites Only"})]})]}),u.jsx("div",{id:"filter-modal-footer",className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-end",children:u.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",onClick:r,children:"Apply"})})]})})}const h0="outputs-folders-collapsed",K5=1440*60*1e3;function J5(l){if(!l)return"Unknown date";const r=new Date,s=new Date(r.getFullYear(),r.getMonth(),r.getDate()),o=new Date(l),i=new Date(o.getFullYear(),o.getMonth(),o.getDate()),d=Math.round((s.getTime()-i.getTime())/K5);return d===0?"Today":d===1?"Yesterday":o.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function bd({file:l,viewMode:r,selectionMode:s,isSelected:o,isFavorited:i,onNavigateFolder:d,onOpen:p,onMenu:h,onToggleSelection:m}){const g=l.type==="folder",[x,y]=b.useState(!1);b.useEffect(()=>{y(!1)},[l.previewUrl,l.id]);const N=()=>{g?d(l.name):s?m(l.id):p(l)},k=S=>{S.stopPropagation(),h(l,S)};return r==="list"?u.jsxs("div",{className:`file-card-list-item flex items-center gap-3 p-2 hover:bg-gray-50 border-b border-gray-100 last:border-0 ${o?"bg-blue-50":""}`,onClick:N,children:[s&&!g&&u.jsx("div",{className:`selection-checkbox w-5 h-5 rounded border flex items-center justify-center flex-shrink-0 ${o?"bg-blue-600 border-blue-600 text-white":"border-gray-300 bg-white"}`,children:o&&u.jsx(Ir,{className:"w-3.5 h-3.5"})}),u.jsx("div",{className:"file-preview-container w-10 h-10 flex-shrink-0 flex items-center justify-center bg-gray-100 rounded text-gray-500 overflow-hidden relative",children:g?u.jsx(_o,{className:"w-6 h-6 text-amber-500"}):l.previewUrl&&!x?u.jsx("img",{src:l.previewUrl,className:"w-full h-full object-cover",loading:"lazy",onError:()=>y(!0)}):l.type==="video"?u.jsx(vg,{className:"w-5 h-5 text-gray-500"}):u.jsx("span",{className:"text-xs font-bold",children:"IMG"})}),u.jsx("div",{className:"file-info-container flex-1 min-w-0",children:u.jsx("div",{className:"file-name text-sm font-medium text-gray-900 truncate",children:l.name})}),u.jsxs("div",{className:"file-actions-container flex items-center gap-2",children:[i&&u.jsx(Hr,{className:"w-4 h-4 text-yellow-500"}),u.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-700",onClick:k,children:u.jsx(vr,{className:"w-5 h-5 -rotate-90"})})]})]}):u.jsxs("div",{className:"file-card-grid-item flex flex-col gap-1",children:[u.jsxs("div",{className:`relative aspect-square bg-gray-100 rounded-lg overflow-hidden transition-all ${o?"ring-4 ring-blue-500 ring-offset-2":""}`,onClick:N,children:[g?u.jsx("div",{className:"folder-grid-content w-full h-full flex flex-col items-center justify-center text-gray-500",children:u.jsx(_o,{className:"w-12 h-12 mb-2 text-amber-500"})}):l.previewUrl&&!x?u.jsx("img",{src:l.previewUrl,className:"w-full h-full object-cover",loading:"lazy",onError:()=>y(!0)}):u.jsx("div",{className:"media-placeholder w-full h-full flex items-center justify-center bg-gray-800 text-white font-bold",children:l.type==="video"?u.jsx(vg,{className:"w-10 h-10 text-white/80"}):"IMG"}),s&&!g?u.jsx("div",{className:"selection-badge-container absolute top-2 left-2",children:u.jsx("div",{className:`selection-badge w-6 h-6 rounded-full border-2 flex items-center justify-center shadow-sm ${o?"bg-blue-600 border-blue-600 text-white":"border-white bg-black/20"}`,children:o&&u.jsx(Ir,{className:"w-4 h-4"})})}):u.jsxs("div",{className:"file-menu-trigger-container absolute top-1 right-1 flex flex-col items-center gap-1",children:[u.jsx("button",{className:"p-1 bg-gray-500/40 rounded-full text-white hover:bg-gray-500/60",onClick:k,children:u.jsx(vr,{className:"w-4 h-4 -rotate-90"})}),i&&u.jsx(Hr,{className:"w-4 h-4 text-yellow-400 drop-shadow"})]}),l.type==="video"&&u.jsx("div",{className:"video-label absolute top-1 left-1 bg-black/50 px-1 rounded text-[10px] text-white",children:"VID"})]}),u.jsx("div",{className:"file-name text-xs text-gray-700 truncate px-1",children:l.name})]})}function e4({visible:l}){const{source:r,currentFolder:s,isLoading:o,viewMode:i,filter:d,sort:p,favorites:h,selectionMode:m,selectedIds:g,setCurrentFolder:x,navigateToPath:y,fetchFolders:N,fetchFiles:k,toggleFavorite:S,toggleSelection:w,getDisplayedFiles:M,refresh:j,selectIds:O,toggleSelectionMode:R,setFilter:z,setSort:T}=_t(),D=_t(Z=>Z.selectionActionOpen),A=_t(Z=>Z.setSelectionActionOpen),B=_t(Z=>Z.filterModalOpen),U=_t(Z=>Z.setFilterModalOpen),G=_t(Z=>Z.setOutputsViewerOpen),q=_t(Z=>Z.addFavorites),te=_t(Z=>Z.removeFavorites),ge=_t(Z=>Z.clearSelection),le=J(Z=>Z.loadWorkflow),ie=An(Z=>Z.setCurrentPanel),L=J(Z=>Z.workflow),Q=J(Z=>Z.originalWorkflow),se=b.useMemo(()=>!!(L&&Q&&JSON.stringify(L)!==JSON.stringify(Q)),[L,Q]),[xe,me]=b.useState(null),[_,I]=b.useState(null),[E,W]=b.useState(null),[Y,ce]=b.useState(null),[ee,ne]=b.useState(!1),[ve,Te]=b.useState(!1),[We,de]=b.useState(!1),[Ne,Ce]=b.useState(null),[_e,Ue]=b.useState([]),[Qe,Se]=b.useState(!1),[ye,Oe]=b.useState(""),[Le,it]=b.useState(!1),[vt,ht]=b.useState([]),[we,Ae]=b.useState(0),Ke=b.useRef(null),Ye=b.useRef(!1),[et,Ze]=b.useState(()=>localStorage.getItem(h0)==="true"),[dt,re]=b.useState({}),rt=b.useRef(null),Xe=b.useRef(null),gt=b.useRef(!1),$t=()=>{I(null),rt.current=null},cl=()=>{ne(!1),W(null),Xe.current=null},dl=(Z,je)=>{rt.current=je?.onDeleted??null,I(Z)},fl=(Z,je)=>{Z.type==="image"&&(Xe.current=je?.onLoaded??null,W(Z),ne(!0))};Ri({open:!!xe,onDismiss:()=>me(null),triggerRef:{current:null},contentRef:Ke}),b.useEffect(()=>{Ye.current=!1},[r]),b.useEffect(()=>{l&&!Ye.current&&!o&&(Ye.current=!0,N(),k())},[l,N,k,o]),b.useEffect(()=>{!l&&Le&&(it(!1),G(!1))},[l,Le,G]),b.useEffect(()=>{!l&&B&&U(!1)},[l,B,U]);const Cn=M(),sn=_t(Z=>Z.sort.mode),xn=Z=>{const ze=M().filter(at=>(at.type==="image"||at.type==="video")&&at.fullUrl),kt=ze.map(at=>({src:at.fullUrl,alt:at.name,mediaType:Vo(at.name),file:at,filename:at.name})),Ft=ze.findIndex(at=>at.id===Z.id);Ft>=0&&(ht(kt),Ae(Ft),it(!0),G(!0))},Me=()=>{it(!1),G(!1)},Re=Z=>{Z.file&&dl(Z.file,{onDeleted:je=>{ht(ze=>{const kt=ze.findIndex(at=>at.file?.id===je.id),Ft=ze.filter(at=>at.file?.id!==je.id);return Ae(at=>Ft.length===0?0:kt===-1?at:kt<at?at-1:kt===at?Math.min(at,Ft.length-1):at),Ft.length===0&&(it(!1),G(!1)),Ft})}})},Be=Z=>{!Z.file||Z.file.type!=="image"||fl(Z.file,{onLoaded:()=>{it(!1),G(!1)}})},Pe=Z=>{Z.file&&oe(Z.file,{closeViewer:!0})},{folders:F,nonFolders:be}=b.useMemo(()=>{const Z=[],je=[];for(const ze of Cn)ze.type==="folder"?Z.push(ze):je.push(ze);return{folders:Z,nonFolders:je}},[Cn]),fe=sn.startsWith("name"),ke=sn.startsWith("size"),Ie=d.favoritesOnly||!fe&&!ke,st=b.useMemo(()=>{if(fe){const je=[];for(const ze of be){const kt=ze.name?.trim()?.charAt(0).toUpperCase()||"#",Ft=`Starting with ${kt}`,at=je[je.length-1];at&&at.key===kt?at.files.push(ze):je.push({key:kt,label:Ft,files:[ze]})}return je}if(ke){const je=[];for(const ze of be){const Ft=(ze.size??0)/(1024*1024),at=Ft<1?0:Math.round(Ft),Sn=at===0?"<1MB":`${at}MB`,qo=at===0?"<1MB":`${at}MB`,Ta=je[je.length-1];Ta&&Ta.key===Sn?Ta.files.push(ze):je.push({key:Sn,label:qo,files:[ze]})}return je}if(!Ie)return[{key:"all",label:"All files",files:be}];const Z=[];for(const je of be){const ze=je.date?new Date(je.date).toISOString().slice(0,10):"unknown",kt=J5(je.date),Ft=Z[Z.length-1];Ft&&Ft.key===ze?Ft.files.push(je):Z.push({key:ze,label:kt,files:[je]})}return Z},[be,Ie,fe,ke]),Ge=()=>{const Z=!et;Ze(Z),localStorage.setItem(h0,String(Z))},xt=Z=>{re(je=>({...je,[Z]:!je[Z]}))},jt=Z=>{xn(Z)},Bt=(Z,je)=>{je.preventDefault();const ze=Math.min(je.clientX,window.innerWidth-200),kt=Math.min(je.clientY,window.innerHeight-200);me({file:Z,x:ze,y:kt})},It=()=>{xe&&(S(xe.file.id),me(null))},Ot=()=>{xe&&xe.file.type!=="folder"&&(m||R(),O([xe.file.id],"replace"),me(null))},Ct=()=>{xe&&xe.file.type==="image"&&(W(xe.file),ne(!0),me(null))},Ut=()=>{xe&&(I(xe.file),me(null))},Yt=()=>{g.length!==0&&(A(!1),Te(!0))},wn=async(Z,je)=>{try{await Dx({file:Z,source:r,loadWorkflow:le,onLoaded:()=>{ie("workflow"),je?.closeViewer&&(it(!1),G(!1))}})}catch(ze){console.error("Failed to load workflow from file:",ze),window.alert("Failed to load workflow from file.")}},oe=(Z,je)=>{if(Z.type==="folder"){window.alert("Workflow metadata is not available for folders.");return}if(se){gt.current=!!je?.closeViewer,ce(Z);return}wn(Z,je)},tt=()=>{if(!xe)return;const Z=xe.file;me(null),oe(Z,{closeViewer:!1})},Ht=async()=>{if(!Y)return;const Z=Y,je=gt.current;gt.current=!1,ce(null),await wn(Z,{closeViewer:je})},Vt=()=>{gt.current=!1,ce(null)},un=async()=>{if(!_)return;const Z=_;try{const je=Ro(_,r);await jd(je,r),j(),rt.current?.(Z),rt.current=null}catch(je){console.error("Failed to delete file:",je),window.alert("Failed to delete file.")}finally{I(null)}},dn=async()=>{if(g.length===0){Te(!1);return}try{const Z=`${r}/`,je=g.map(ze=>ze.startsWith(Z)?ze.slice(Z.length):ze);await Promise.all(je.map(ze=>jd(ze,r))),j(),ge()}catch(Z){console.error("Failed to delete selected files:",Z),window.alert("Failed to delete selected files.")}finally{Te(!1)}},$n=()=>{if(g.length===0)return;g.every(je=>h.includes(je))?te(g):q(g),A(!1)},yr=()=>{g.length!==0&&(A(!1),Ce(s),de(!0))},$l=async()=>{if(g.length!==0)try{const Z=`${r}/`,je=g.map(ze=>ze.startsWith(Z)?ze.slice(Z.length):ze);await w1(je,Ne,r),j()}catch(Z){console.error("Failed to move selected files:",Z),window.alert("Failed to move selected files.")}finally{de(!1)}},en=async()=>{const Z=ye.trim();if(!Z)return;const je=Ne?`${Ne}/${Z}`:Z;try{await S1(je,r),Oe(""),Se(!0);const ze=await Nd(r,1e3,0,"modified",!1,Ne);Ue(ze.filter(kt=>kt.type==="folder"))}catch(ze){console.error("Failed to create folder:",ze),window.alert("Failed to create folder.")}finally{Se(!1)}},bl=b.useMemo(()=>{const je=[{name:r==="output"?"Outputs":"Inputs",path:null}];if(s){const ze=s.split("/");ze.forEach((kt,Ft)=>{je.push({name:kt,path:ze.slice(0,Ft+1).join("/")})})}return je},[r,s]),Go=()=>{const Z=bl.length,je=[];return Z<=3?bl.forEach((ze,kt)=>{je.push({...ze,isClickable:kt<Z-1})}):(je.push({...bl[0],isClickable:!0}),je.push({name:"...",path:bl[Z-3].path,isEllipsis:!0,isClickable:!0}),je.push({...bl[Z-2],isClickable:!0}),je.push({...bl[Z-1],isClickable:!1})),u.jsx("div",{id:"outputs-breadcrumb-trail",className:"flex items-center text-sm overflow-hidden whitespace-nowrap",children:je.map((ze,kt)=>u.jsxs("div",{className:"flex items-center min-w-0",children:[kt>0&&u.jsx("span",{className:"mx-1.5 text-gray-400 shrink-0",children:"/"}),u.jsx("button",{onClick:()=>ze.isClickable&&y(ze.path),disabled:!ze.isClickable,className:`
                truncate transition-colors
                ${ze.isClickable?"text-blue-600 hover:text-blue-700 active:opacity-70":"text-gray-700 font-medium"}
                ${ze.isEllipsis?"px-1 bg-gray-100 rounded":""}
              `,title:ze.name,children:ze.name})]},kt))})};b.useEffect(()=>{if(!We)return;let Z=!1;return(async()=>{Se(!0);try{const ze=await Nd(r,1e3,0,"modified",!1,Ne);if(Z)return;Ue(ze.filter(kt=>kt.type==="folder"))}catch(ze){if(Z)return;console.error("Failed to load folders:",ze),Ue([])}finally{Z||Se(!1)}})(),()=>{Z=!0}},[We,Ne,r]),b.useEffect(()=>{D&&g.length===0&&A(!1)},[D,g.length,A]);const wl=()=>{const Z=_t.getState();Z.clearSelection(),Z.toggleSelectionMode()},Yl=()=>{if(!Ne)return;const Z=Ne.split("/");Z.pop(),Ce(Z.length?Z.join("/"):null)},Gi=Z=>()=>{Ce(Ne?`${Ne}/${Z}`:Z)};return u.jsx("div",{id:"outputs-panel-wrapper",className:"absolute inset-x-0 top-[60px] bottom-0",style:{display:l?"block":"none"},children:u.jsxs("div",{id:"outputs-panel-root",className:"h-full bg-white flex flex-col pt-[4px] pb-[80px]",children:[u.jsx("div",{id:"outputs-panel-header",className:"px-4 py-3 flex flex-col gap-3 border-b border-gray-100",children:u.jsxs("div",{id:"outputs-header-top-row",className:"flex items-center justify-between min-h-[24px]",children:[Go(),m&&u.jsxs("div",{className:"selection-status-container flex items-center gap-2 shrink-0 ml-2",children:[u.jsxs("span",{className:"text-[10px] font-bold text-blue-600 uppercase",children:[g.length," selected"]}),u.jsx("button",{onClick:wl,className:"text-[10px] text-gray-500 underline uppercase font-bold",children:"Clear"})]})]})}),u.jsxs("div",{id:"outputs-content-container",className:"flex-1 overflow-y-auto p-4",children:[F.length>0&&u.jsxs("div",{id:"outputs-folders-section",className:"mb-4",children:[u.jsxs("button",{onClick:Ge,className:"flex items-center gap-2 w-full text-left mb-2 py-1 text-sm font-medium text-gray-600 hover:text-gray-900",children:[et?u.jsx(wi,{className:"w-4 h-4"}):u.jsx(yi,{className:"w-4 h-4"}),u.jsxs("span",{children:["Folders (",F.length,")"]})]}),!et&&u.jsx("div",{className:"flex flex-col border border-gray-200 rounded-lg overflow-hidden",children:F.map(Z=>u.jsx(bd,{file:Z,viewMode:"list",selectionMode:m,isSelected:g.includes(Z.id),isFavorited:h.includes(Z.id),onNavigateFolder:x,onOpen:jt,onMenu:Bt,onToggleSelection:w},Z.id))})]}),u.jsx("div",{id:"outputs-files-section",className:"flex flex-col gap-4",children:st.map(Z=>u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center justify-between gap-3",children:[u.jsxs("button",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wide text-gray-500 hover:text-gray-800",onClick:()=>xt(Z.key),children:[dt[Z.key]?u.jsx(wi,{className:"w-3.5 h-3.5"}):u.jsx(yi,{className:"w-3.5 h-3.5"}),u.jsxs("span",{children:[Z.label," (",Z.files.length,")"]})]}),m&&u.jsx("button",{className:"text-[10px] font-bold uppercase text-blue-600 hover:text-blue-700",onClick:()=>O(Z.files.map(je=>je.id)),children:"Select all"})]}),!dt[Z.key]&&(i==="grid"?u.jsx("div",{className:"grid grid-cols-2 gap-4 auto-rows-min",children:Z.files.map(je=>u.jsx(bd,{file:je,viewMode:i,selectionMode:m,isSelected:g.includes(je.id),isFavorited:h.includes(je.id),onNavigateFolder:x,onOpen:jt,onMenu:Bt,onToggleSelection:w},je.id))}):u.jsx("div",{className:"flex flex-col",children:Z.files.map(je=>u.jsx(bd,{file:je,viewMode:i,selectionMode:m,isSelected:g.includes(je.id),isFavorited:h.includes(je.id),onNavigateFolder:x,onOpen:jt,onMenu:Bt,onToggleSelection:w},je.id))}))]},Z.key))}),o&&u.jsx("div",{id:"outputs-loading-indicator",className:"py-4 flex justify-center",children:u.jsx("span",{className:"text-gray-400 text-sm",children:"Loading..."})}),!o&&Cn.length===0&&u.jsx("div",{id:"outputs-empty-message",className:"text-center text-gray-400 py-8",children:s?"No images in this folder":r==="output"?"No generated images yet":"No imported images"})]}),xe&&u.jsxs(u.Fragment,{children:[u.jsx("div",{id:"outputs-context-menu-overlay",className:"fixed inset-0 z-[1690]",onClick:()=>me(null),onPointerDown:Z=>Z.stopPropagation()}),u.jsxs("div",{id:"outputs-context-menu",ref:Ke,className:"fixed z-[1700] bg-white shadow-xl rounded-lg border border-gray-200 w-52 py-1",style:{top:xe.y,left:xe.x},onPointerDown:Z=>Z.stopPropagation(),onClick:Z=>Z.stopPropagation(),children:[u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:It,children:[h.includes(xe.file.id)?u.jsx(Hr,{className:"w-4 h-4"}):u.jsx(bi,{className:"w-4 h-4"}),h.includes(xe.file.id)?"Unfavorite":"Favorite"]}),xe.file.type!=="folder"&&u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Ot,children:[u.jsx(Ir,{className:"w-4 h-4 text-gray-500"}),"Select"]}),xe.file.type==="image"&&u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:tt,children:[u.jsx(Oa,{className:"w-4 h-4 text-gray-500"}),"Load workflow"]}),xe.file.type==="image"&&u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Ct,children:[u.jsx(T0,{className:"w-4 h-4 text-gray-500"}),"Use in workflow"]}),u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:Ut,children:[u.jsx(Hl,{className:"w-4 h-4"}),"Delete"]})]})]}),D&&u.jsx("div",{id:"outputs-selection-actions",className:"fixed inset-0 z-[1800] bg-black/40 flex items-center justify-center p-4",onClick:()=>A(!1),role:"dialog","aria-modal":"true",children:u.jsxs("div",{className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:Z=>Z.stopPropagation(),children:[u.jsxs("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:[g.length," selected"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:$n,children:[g.every(Z=>h.includes(Z))?u.jsx(bi,{className:"w-4 h-4"}):u.jsx(Hr,{className:"w-4 h-4"}),g.every(Z=>h.includes(Z))?"Unfavorite":"Favorite"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:yr,children:[u.jsx(_o,{className:"w-4 h-4 text-gray-500"}),"Move"]}),u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:Yt,children:[u.jsx(Hl,{className:"w-4 h-4"}),"Delete"]}),u.jsx("button",{className:"w-full text-left px-4 py-3 text-sm text-gray-600 hover:bg-gray-50",onClick:()=>A(!1),children:"Cancel"})]})}),We&&u.jsx("div",{id:"outputs-move-picker-overlay",className:"fixed inset-0 z-[1850] bg-black/50 flex items-center justify-center p-4",onClick:()=>de(!1),role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-move-picker",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",onClick:Z=>Z.stopPropagation(),children:[u.jsxs("div",{className:"px-4 py-3 text-sm font-semibold text-gray-700 border-b border-gray-100",children:["Move to ",Ne||"root"]}),u.jsxs("div",{className:"max-h-[50vh] overflow-y-auto",children:[Qe&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"Loading folders..."}),!Qe&&Ne&&Ne.includes("/")&&u.jsx("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Yl,children:u.jsx("span",{className:"text-gray-500",children:".."})}),!Qe&&_e.length===0&&u.jsx("div",{className:"px-4 py-3 text-sm text-gray-400",children:"No folders"}),!Qe&&_e.map(Z=>u.jsxs("button",{className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 flex items-center gap-2",onClick:Gi(Z.name),children:[u.jsx(_o,{className:"w-4 h-4 text-amber-500"}),Z.name]},Z.id)),u.jsx("div",{className:"px-4 py-3 border-t border-gray-100",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{value:ye,onChange:Z=>Oe(Z.target.value),placeholder:"New folder",className:"flex-1 border border-gray-200 rounded-lg px-3 py-2 text-sm"}),u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-blue-600 hover:text-blue-700",onClick:en,children:"Create"})]})})]}),u.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg",onClick:()=>de(!1),children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg",onClick:$l,children:"Submit"})]})]})}),_&&u.jsx("div",{id:"outputs-delete-confirm-overlay",className:"fixed inset-0 z-[2100] bg-black/50 flex items-center justify-center p-4",onClick:$t,role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-delete-confirm-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:Z=>Z.stopPropagation(),children:[u.jsx("div",{id:"outputs-delete-confirm-title",className:"text-gray-900 text-base font-semibold",children:"Delete file?"}),u.jsx("div",{id:"outputs-delete-confirm-description",className:"text-gray-600 text-sm mt-1",children:_.type==="folder"?`This will permanently delete the folder "${_.name}" and all of its contents from the server. This cannot be undone.`:`This will permanently delete "${_.name}" from the server. This cannot be undone.`}),u.jsxs("div",{id:"outputs-delete-confirm-actions",className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:$t,children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:un,children:"Delete"})]})]})}),ve&&u.jsx("div",{id:"outputs-delete-selection-overlay",className:"fixed inset-0 z-[1800] bg-black/50 flex items-center justify-center p-4",onClick:()=>Te(!1),role:"dialog","aria-modal":"true",children:u.jsxs("div",{id:"outputs-delete-selection-modal",className:"w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-lg p-4",onClick:Z=>Z.stopPropagation(),children:[u.jsx("div",{className:"text-gray-900 text-base font-semibold",children:"Delete selected files?"}),u.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:["This will permanently delete ",g.length," selected file",g.length===1?"":"s"," from the server. This cannot be undone."]}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",onClick:()=>Te(!1),children:"Cancel"}),u.jsx("button",{className:"px-3 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700",onClick:dn,children:"Delete"})]})]})}),u.jsx(Rx,{open:ee,file:E,source:r,onClose:cl,onLoaded:()=>{ne(!1),W(null),Xe.current?.(),Xe.current=null}}),u.jsx(Z5,{open:B,onClose:()=>U(!1),filter:d,sort:p,onChangeFilter:z,onChangeSort:T}),u.jsx(Ax,{file:Y,onCancel:Vt,onConfirm:Ht}),u.jsx(Lx,{open:Le,items:vt,index:we,onClose:Me,onIndexChange:Ae,onDelete:Re,onLoadInWorkflow:Be,onLoadWorkflow:Pe,showMetadataToggle:!0})]})})}function t4(){const l=An(L=>L.currentPanel),r=An(L=>L.setCurrentPanel),s=Md(L=>L.appMenuOpen),o=nl(L=>L.viewerOpen),i=nl(L=>L.setViewerState),d=J(L=>L.followQueue),p=J(L=>L.setFollowQueue),h=bn(L=>L.bookmarkRepositioningActive),m=b.useRef(null),{isInputFocused:g}=_x(),x=_t(L=>L.outputsViewerOpen),y=_t(L=>L.selectionMode),N=_t(L=>L.filterModalOpen),k=_t(L=>L.selectionActionOpen),S=_t(L=>L.currentFolder),w=_t(L=>L.navigateUp);X5();const M=b.useCallback(()=>{l==="workflow"?r("queue"):l==="outputs"&&r("workflow")},[l,r]),j=b.useCallback(()=>{l==="outputs"&&S?w():l==="workflow"?r("outputs"):l==="queue"&&r("workflow")},[l,S,w,r]),O=l==="workflow"||l==="outputs",R=l==="workflow"||l==="queue"||l==="outputs"&&!!S,{swipeOffset:z,isSwiping:T,setSwipeEnabled:D,resetSwipeState:A}=P5({onSwipeLeft:O?M:void 0,onSwipeRight:R?j:void 0,enabled:!g&&!o&&!s&&!x&&!h&&!y&&!N&&!k}),B=J(L=>L.setNodeTypes),U=Si(L=>L.theme),G=J(L=>L.workflowLoadedAt),q=lt(L=>L.fetchQueue),te=Ln(L=>L.history);b.useEffect(()=>{!T&&z!==0&&A()},[T,z,A]),b.useEffect(()=>{x&&A()},[x,A]);const ge=()=>{i({viewerOpen:!1}),p(!1),D(!0),A()};b.useEffect(()=>{b0().then(L=>{B(L)}).catch(L=>{console.error("Failed to load node types:",L)})},[B]),b.useEffect(()=>{q()},[q]);const le=(L,Q,se=!0)=>{D(!1),A(),i({viewerImages:L,viewerIndex:Q,viewerScale:1,viewerTranslate:{x:0,y:0},viewerOpen:!0}),p(se)},ie=()=>{const L=mf(te,{onlyOutput:!0,alt:"Generation"});D(!1),A();const Q=L.length>0?0:-1;i({viewerImages:L,viewerIndex:Q,viewerScale:1,viewerTranslate:{x:0,y:0},viewerOpen:!0}),p(!0)};return b.useEffect(()=>{const L=document.documentElement;L.classList.toggle("dark",U==="dark"),L.style.colorScheme=U},[U]),b.useEffect(()=>{G&&queueMicrotask(()=>{p(!1)})},[G,p]),u.jsxs("div",{id:"app-root",className:"min-h-screen bg-gray-100",children:[u.jsx(Wb,{mode:l}),u.jsxs("main",{id:"main-content",ref:m,className:"pt-[60px] pb-[80px] min-h-screen relative",children:[u.jsxs(u.Fragment,{children:[u.jsx(e4,{visible:l==="outputs"}),u.jsx(l5,{visible:l==="workflow",onImageClick:le}),u.jsx(T5,{visible:l==="queue",onImageClick:le})]}),u.jsx("div",{id:"bottom-bar-spacer",className:"fixed inset-x-0 bottom-0 bg-gray-100 pointer-events-none z-[1500]",style:{height:"var(--bottom-bar-offset, 80px)"}})]}),u.jsx(p5,{currentPanel:l,viewerOpen:o,followQueue:d,onToggleFollowQueue:()=>p(!d),onOpenFollowQueue:ie}),u.jsx(Q5,{onClose:ge})]})}Ky.createRoot(document.getElementById("root")).render(u.jsx(b.StrictMode,{children:u.jsx(t4,{})}));
//# sourceMappingURL=index-DHQdmOLU.js.map
